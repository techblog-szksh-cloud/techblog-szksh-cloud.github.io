"use strict";(self.webpackChunktechblog_szksh_cloud_github_io=self.webpackChunktechblog_szksh_cloud_github_io||[]).push([[9450],{6029:function(n){n.exports=JSON.parse('{"blogPosts":[{"id":"/what-i-did-2022-08","metadata":{"permalink":"/what-i-did-2022-08","source":"@site/blog/what-i-did-2022-08.mdx","title":"2022-08 \u632f\u308a\u8fd4\u308a","description":"\u4ed5\u4e8b","date":"2022-08-24T09:30:55.000Z","formattedDate":"August 24, 2022","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":9.635,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2022-08 \u632f\u308a\u8fd4\u308a","date":"2022-08-24T09:30:55.000Z","authors":["suzuki-shunsuke"],"tags":["job","oss"]},"nextItem":{"title":"2022-07 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-07"}},"content":"import LinkCard from \'@site/src/components/linkcard\';\\n\\n## \u4ed5\u4e8b\\n\\n\u4ed5\u4e8b\u306f\u3042\u307e\u308a\u66f8\u3051\u308b\u3053\u3068\u3082\u306a\u3044\u3093\u3067\u3059\u304c\u3001\u5143\u6c17\u306b\u3084\u3063\u3066\u3044\u307e\u3059\u3002\\ntfcmt, github-comment, aqua \u3092\u3068\u3042\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u5c0e\u5165\u3057\u307e\u3057\u305f\u3002\\n\\n## OSS \u958b\u767a\\n\\n### aquaproj/aqua\\n\\n\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b checksum \u3092\u691c\u8a3c\u3059\u308b\u6a5f\u80fd\u306e\u958b\u767a\u3092\u9032\u3081\u3066\u3044\u307e\u3059\u3002\\n\u57fa\u672c\u7684\u306a\u6a5f\u80fd\u306e\u958b\u767a\u306f\u65e2\u306b\u51fa\u6765\u3066\u3044\u3066 prerelease \u3082\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3042\u3068\u306f\u73fe\u8077\u306b\u5c0e\u5165\u3057\u3066\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u3082\u3089\u3044\u306a\u304c\u3089\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u306b\u6301\u3063\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n<LinkCard url=\\"https://github.com/aquaproj/aqua/issues/427\\" />\\n\\n<LinkCard url=\\"https://twitter.com/aquaclivm/status/1559535842061733894\\" />\\n\\n### aqua-registry\\n\\nv3.20.0 => [3.42.0](https://github.com/aquaproj/aqua-registry/releases/tag/v3.42.0)\\n\\nPackage \u6570\u304c 702 \u304b\u3089 803 \u307e\u3067\u5897\u3048\u307e\u3057\u305f\u3002\\nContribution \u3057\u3066\u304f\u3060\u3055\u3063\u305f\u65b9\u3005\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\\n\\n\u4eca\u6708\u306f Pull Request \u306e\u6570\u304c\u3059\u3054\u304f\u3066 91 \u500b\u306e PR \u304c\u30de\u30fc\u30b8\u3055\u308c\u307e\u3057\u305f\u3002\\n\\n* Renovate \u4ee5\u5916 132 \u500b [Merged Pull Requests](https://github.com/aquaproj/aqua-registry/pulls?q=is%3Apr+is%3Aclosed+merged%3A2022-08-01..2022-08-31+-author%3Aapp%2Frenovate+)\\n* suzuki-shunsuke 41 \u500b [Merged Pull Requests](https://github.com/aquaproj/aqua-registry/pulls?q=is%3Apr+is%3Aclosed+merged%3A2022-08-01..2022-08-31+author%3Asuzuki-shunsuke)\\n\\n\u3042\u308a\u304c\u305f\u3044\u8a71\u3067\u3059\u3057\u3001\u3053\u308c\u307b\u3069\u306e PR \u304c\u6765\u308b OSS \u3092\u958b\u767a\u3067\u304d\u305f\u3053\u3068\u3092\u8a87\u308a\u306b\u601d\u3044\u307e\u3059\u3002\\n\\naqua-registry \u304c\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u30c4\u30fc\u30eb\u306e\u6570\u304c 800 \u3092\u8d85\u3048\u307e\u3057\u305f\u3002\\n\u3061\u306a\u307f\u306b asdf-plugins \u304c\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u6570\u306f 2022-08-30 \u6642\u70b9\u3067 514 \u306a\u306e\u3067\u3001 asdf \u3088\u308a\u3060\u3044\u3076\u591a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n```console\\n$ asdf plugin list all | wc -l\\n     514\\n```\\n\\n<LinkCard url=\\"https://twitter.com/szkdash/status/1564617121111621674\\" />\\n\\n\\n\u307e\u305f\u3001 GitHub \u306e API rate limit \u306b\u5f15\u3063\u304b\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002\\n\\n* github.token \u3092\u4f7f\u3046\\n* main branch \u3067 test \u3059\u308b\u306e\u3084\u3081\u308b\\n* ci-info \u306e\u7d50\u679c\u3092 cache\\n\\n\u5f8c\u8ff0\u3059\u308b aqua registry \u306e\u305f\u3081\u306e framework \u3092\u4f7f\u3063\u3066 CI \u3068\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u3092\u5927\u304d\u304f\u6539\u5584\u3057\u307e\u3057\u305f\u3002\\n\\n### aqua registry \u306e\u305f\u3081\u306e framework\\n\\naqua Registry \u3092\u958b\u767a\u3059\u308b\u305f\u3081\u306e Framework \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u307e\u3057\u305f\u3002\\n\u4e3b\u306a aqua Registry \u3068\u3044\u3048\u3070 [Standard Registry](https://github.com/aquaproj/aqua-registry) \u3067\u3059\u304c\u3001\\n\u7d44\u7e54\u5185\u306e private \u306a\u30c4\u30fc\u30eb\u306e\u305f\u3081\u306e Private Registry \u3092\u4f5c\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\\naqua-registry \u3092\u958b\u767a\u3059\u308b\u305f\u3081\u306e\u30b3\u30fc\u30c9\u306f\u5143\u3005 aqua-registry \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u5185\u306b\u7f6e\u3044\u3066\u3042\u308a\u307e\u3057\u305f\u304c\u3001\\n\u305d\u308c\u3092 Private Registry \u3092\u958b\u767a\u3059\u308b\u306e\u306b\u3082\u4f7f\u3048\u308b\u3088\u3046\u3001\u5225\u306e OSS \u3068\u3057\u3066\u5207\u308a\u51fa\u3057\u307e\u3057\u305f\u3002\\n\u307e\u305f\u3001 Private Registry \u306e Template Repository \u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u6574\u5099\u3057\u307e\u3057\u305f\u3002\\n\\n* https://github.com/aquaproj/registry-tool\\n* https://github.com/aquaproj/template-private-aqua-registry\\n* https://github.com/aquaproj/registry-action\\n* https://aquaproj.github.io/docs/reference/create-private-registry\\n\\n\u81ea\u5206\u3082\u793e\u5185\u306e\u30c4\u30fc\u30eb\u306e\u305f\u3081\u306e Private Registry \u3092\u4f5c\u308b\u306e\u306b\u3053\u308c\u3089\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n### aqua-installer\\n\\naqua-installer \u3092 GopherJS \u3092\u4f7f\u3063\u3066 JavaScript Action \u306b\u51fa\u6765\u306a\u3044\u304b\u691c\u8a3c\u3057\u307e\u3057\u305f\u3002\\n\\n<LinkCard url=\\"https://zenn.dev/shunsuke_suzuki/scraps/3b7eee7ca8d3ad\\" />\\n\\n<LinkCard url=\\"https://github.com/aquaproj/aqua-installer/pull/144\\" />\\n\\n\u7d50\u8ad6\u3092\u8a00\u3046\u3068\u4eca\u306f\u307e\u3060\u3084\u3081\u305f\u307b\u3046\u304c\u826f\u3055\u305d\u3046\u3068\u3044\u3046\u3053\u3068\u3067\u8ae6\u3081\u307e\u3057\u305f\u3002\\n\u8208\u5473\u306e\u3042\u308b\u4eba\u306f zenn \u306e scrap \u3092\u898b\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\\n\u5c06\u6765\u7684\u306b GopherJS \u304c\u3088\u308a\u6210\u719f\u3057\u3066\u304d\u305f\u3089\u307e\u305f\u691c\u8a0e\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n### aqua-renovate-config\\n\\n`go` datasource \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u305f\u3089 warning \u304c\u5927\u91cf\u306b\u51fa\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002\\n\\n- https://github.com/aquaproj/aqua-renovate-config/releases/tag/1.2.1\\n- https://github.com/aquaproj/aqua-renovate-config/releases/tag/1.2.2\\n\\n### tfcmt\\n\\n- [v3.4.0](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.4.0)\\n  - commit hash \u306b\u95a2\u9023\u3057\u305f PR \u3092\u53d6\u5f97\u3057\u3066 PR \u306b\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\\n\\nGitHub \u5074\u306e\u4ed5\u69d8\u5909\u66f4\u3067\u3001\u4eca\u6708\u306b\u306a\u3063\u3066 commit \u306b\u5bfe\u3059\u308b comment \u304c PR \u306e timeline \u306b\u8868\u793a\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n<LinkCard url=\\"https://github.blog/changelog/2022-08-04-commit-comments-no-longer-appear-in-the-pull-request-timeline/\\" />\\n\\n\u305d\u306e\u305f\u3081\u3001 CI \u3067 push event \u3092 hook \u3057\u3066 commit \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u3057\u3066\u3044\u308b\u5834\u5408\u3001 tfcmt plan \u306e\u7d50\u679c\u304c PR \u306b\u8868\u793a\u3055\u308c\u306a\u304f\u306a\u308b\u3068\u3044\u3046\u30b1\u30fc\u30b9\u304c\u3042\u308a\u307e\u3057\u305f\u3002\\n\\n\u305d\u3053\u3067 commit hash \u306b\u95a2\u9023\u3057\u305f PR \u3092\u53d6\u5f97\u3057\u3066 PR \u306b\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\u306a\u304a\u3001\u5143\u3005 pull_request event \u3092 hook \u3059\u308b\u306a\u3069\u3057\u3066 PR \u756a\u53f7\u304c tfcmt \u306b\u6e21\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n### tfaction\\n\\n- [v0.5.15](https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.15): tfmigrate-apply \u4e2d\u306e typo \u306e\u4fee\u6b63\\n- [v0.5.16](https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.16)\\n  - tfmigrate \u304c history \u306e\u4fdd\u5b58\u5148\u306b GCS \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u305f\u3053\u3068\u306e\u306b\u5408\u308f\u305b\u3066\u3001 tfmigrate-plan job \u3067 .tfmigrate.hcl \u3092 scaffold \u3059\u308b\u969b\u306b GCS \u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n  - gsutil \u304c Workload Identity Federation \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u305f\u3053\u3068\u306b\u5408\u308f\u305b\u3066\u3001 setup job \u306e\u4e2d\u3067\u6700\u65b0\u306e gsutil \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n  - \u3053\u308c\u306b\u3088\u308a\u3001\u305d\u308c\u307e\u3067 AWS \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u524d\u63d0\u3060\u3063\u305f\u306e\u304c\u3001 AWS \u306e\u4ee3\u308f\u308a\u306b GCP \u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n\\n### github-comment\\n\\n- [v4.5.0](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v4.5.0)\\n\\n\u4e0a\u8a18\u306e tfcmt \u3068\u540c\u69d8\u306e\u5909\u66f4\u3092 github-comment \u306b\u3082\u3057\u307e\u3057\u305f\u3002\\n\\n### ci-info\\n\\n* [v2.1.0](https://github.com/suzuki-shunsuke/ci-info/releases/tag/v2.1.0)\\n  * public repository \u306a\u3089 GitHub Access Token \u306a\u3057\u3067\u52d5\u304f\u3088\u3046\u306b\u3057\u307e\u3057\u305f\\n* [v2.1.1](https://github.com/suzuki-shunsuke/ci-info/releases/tag/v2.1.1)\\n  * arm64 support\\n\\n## OSS \u306e\u65b0\u898f\u958b\u767a :rocket:\\n\\n### gha-trigger\\n\\n\u307e\u3060\u958b\u767a\u4e2d\u3067\u3059\u304c\u3001\u65b0\u3057\u3044 OSS \u3092\u958b\u767a\u3057\u3066\u3044\u307e\u3059\u3002\u8a73\u7d30\u306f\u307e\u305f\u3044\u305a\u308c\u66f8\u3051\u305f\u3089\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n<LinkCard url=\\"https://github.com/suzuki-shunsuke/gha-trigger\\" />\\n\\n## \u305d\u306e\u4ed6\\n\\n### Aqua Picker (Third Party)\\n\\n\u516c\u5f0f\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001 aqua \u306b\u8272\u3005 Contribution \u3057\u3066\u304f\u3060\u3055\u3063\u3066\u3044\u308b [4513echo](https://twitter.com/4513echo) \u3055\u3093\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u30b5\u30a4\u30c8\u3067\u3059\u3002\\n\\n<LinkCard url=\\"https://aqua-picker.deno.dev/\\" />\\n\\n<LinkCard url=\\"https://twitter.com/4513echo/status/1556953063365025798\\" />\\n\\n<LinkCard url=\\"https://twitter.com/4513echo/status/1558711976741572608\\" />\\n\\n<LinkCard url=\\"https://twitter.com/4513echo/status/1560054691827855360\\" />\\n\\n\u3042\u308a\u304c\u305f\u3044\u8a71\u3067\u3059\u3002\\n\\n### Chrome \u306e tab \u3092\u624b\u52d5\u3067 group \u4f5c\u3063\u3066\u6574\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u305f\\n\\ntab \u305f\u304f\u3055\u3093\u958b\u304d\u3059\u304e\u3066\u76ee\u7684\u306e\u30da\u30fc\u30b8\u304c\u898b\u3064\u304b\u3089\u306a\u304f\u306a\u3063\u3066\u624b\u5f53\u305f\u308a\u3057\u3060\u3044\u306b\u9589\u3058\u308b\u307f\u305f\u3044\u306a\u306e\u3092\u306a\u3093\u3068\u304b\u3057\u305f\u3044\u3068\u306f\u524d\u304b\u3089\u601d\u3063\u3066\u307e\u3057\u305f\u3002\\n\\n\u305f\u307e\u306b Chrome \u306e\u62e1\u5f35\u6a5f\u80fd\u3092\u30b0\u30b0\u3063\u305f\u308a\u3057\u3064\u3064\u3082\u3069\u308c\u3082\u3057\u3063\u304f\u308a\u3053\u305a\u3001\u7279\u306b\u4f55\u3082\u5bfe\u7b56\u3092\u6253\u305f\u305a\u306b\u6765\u307e\u3057\u305f\u304c\u3001\\n\u6700\u8fd1 Chrome \u6a19\u6e96\u306e Grouping \u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u3001\u696d\u52d9\u306e\u30c8\u30d4\u30c3\u30af\u3054\u3068\u306b Group \u3092\u4f7f\u3063\u3066\u6574\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n\u305d\u308c\u306a\u308a\u306b\u3046\u307e\u304f\u3044\u3063\u3066\u307e\u3059\u304c\u3001\u307e\u3060\u6539\u5584\u306e\u4f59\u5730\u306f\u3042\u308a\u305d\u3046\u306a\u611f\u3058\u306f\u3059\u308b\u306e\u3067\u3001\u6a21\u7d22\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## \u305d\u306e\u4ed6\u306e\u305d\u306e\u4ed6\\n\\n### aqua\\n\\n<LinkCard url=\\"https://github.com/aquaproj/aqua/issues/1076\\" />\\n\\nGitHub Sponsor \u306b\u306a\u308b\u3068\u8a00\u3063\u3066\u3082\u3089\u3048\u3066\u3042\u308a\u304c\u305f\u3044\u3002\\n\\n<LinkCard url=\\"https://twitter.com/hiro_o918/status/1554845898194108418\\" />\\n\\n\u96d1\u306b\u4f7f\u3048\u308b\u3068\u3044\u3046\u306e\u306f\u3001\u5b66\u7fd2\u30b3\u30b9\u30c8\u306e\u4f4e\u3055\u306e\u8868\u308c\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\u3053\u308c\u306f team \u3084 project \u306b\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\u3057\u3001\u666e\u53ca\u3057\u3066\u3044\u304f\u4e0a\u3067\u306f\u3068\u3066\u3082\u91cd\u8981\u306a\u3053\u3068\u3067\u3059\u3002\\n\u500b\u4eba\u3067\u4f7f\u3046\u5206\u306b\u306f\u591a\u5c11\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u9ad8\u304f\u3066\u3082\u597d\u304d\u306a\u3082\u306e\u3092\u4f7f\u3048\u3070\u826f\u3044\u3067\u3059\u304c\u3001\\n\u4ed6\u306e\u4eba\u306b\u3082\u5e83\u3081\u3066\u3044\u304f\u4e0a\u3067\u306f\u5b66\u7fd2\u30b3\u30b9\u30c8\u306e\u4f4e\u3055\u306f\u6975\u3081\u3066\u91cd\u8981\u3067\u3059\u3002\\n\u4ed5\u4e8b\u3067\u4f7f\u3046\u5834\u5408\u306b\u306f\u5b66\u7fd2\u3059\u308b\u3053\u3068\u304c\u76ee\u7684\u3067\u306f\u306a\u304f\u3001\u4ed6\u306b\u3082\u3084\u308b\u3079\u304d\u3053\u3068\u304c\u3042\u308b\u306f\u305a\u306a\u306e\u3067\u3001\\n\u305d\u3046\u3044\u3046\u72b6\u614b\u3067\u3082\u30b9\u30c8\u30ec\u30b9\u306a\u304f\u3001\u7c21\u5358\u306b\u4f7f\u3048\u308b\u3053\u3068\u304c\u30b9\u30e0\u30fc\u30ba\u306b\u5c0e\u5165\u3092\u9032\u3081\u308b\u4e0a\u3067\u5927\u4e8b\u3067\u3059\u3002\\n\u306a\u306e\u3067\u3001\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u4f4e\u304f\u3066 team \u3084 project \u306b\u5c0e\u5165\u3057\u3084\u3059\u3044\u3068\u3044\u3046\u610f\u5473\u3067\u3082\u3001 \u500b\u4eba\u306e dotfiles \u3060\u3051\u3067\u306a\u304f team, project \u3067\u4f7f\u3046\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u306b\u3082 aqua \u304c\u5e83\u304c\u3063\u3066\u3044\u304f\u3068\u826f\u3044\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001\u96d1\u306b\u4f7f\u3048\u308b\u3068\u8a00\u3063\u3066\u3082\u3001 aqua \u3067\u306f registry \u3082\u542b\u3081\u3066 version \u3092\u53b3\u683c\u306b\u56fa\u5b9a\u3057\u7ba1\u7406\u3055\u308c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5dee\u7570\u306b\u3088\u308b\u554f\u984c\u304c\u8d77\u3053\u3089\u306a\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n<LinkCard url=\\"https://twitter.com/LGUG2Z/status/1562129310219059200\\" />\\n\\n\u3053\u3046\u3084\u3063\u3066\u5f90\u3005\u306b\u8a8d\u77e5\u3055\u308c\u3066\u3044\u304f\u306e\u306f\u3044\u3044\u8a71\u3067\u3059\u306d\u3002\\n\\n<LinkCard url=\\"https://twitter.com/ponkio_o/status/1562352036028461056\\" />\\n\\n<LinkCard url=\\"https://twitter.com/ponkio_o/status/1562356254991089669\\" />\\n\\n### aqua-registry\\n\\n<LinkCard url=\\"https://twitter.com/ponkio_o/status/1556532831324884992\\" />\\n\\n<LinkCard url=\\"https://twitter.com/kei711_/status/1561855780424679425\\" />\\n\\n<LinkCard url=\\"https://twitter.com/sukukyon/status/1560587208025063425\\" />\\n\\n<LinkCard url=\\"https://twitter.com/ryodocx/status/1562847088006021121\\" />\\n\\nPR \u304a\u5f85\u3061\u3057\u3066\u307e\u3059\u3002\\n\\n### tfcmt\\n\\n<LinkCard url=\\"https://twitter.com/szkdash/status/1557334525381730304\\" />\\n\\n<LinkCard url=\\"https://twitter.com/koki_develop/status/1560188434227965952\\" />\\n\\n### tfaction\\n\\n<LinkCard url=\\"https://twitter.com/practainc/status/1555430142545399809\\" />\\n\\n<LinkCard url=\\"https://twitter.com/sonic883b/status/1557060143312805888\\" />\\n\\n> GCP\u3067\u306eworkload identity\u3068\u9023\u643a\u3067\u304d\u308b\u304b\\n\\n\u3067\u304d\u308b\u306f\u305a\u3067\u3059\\n\\n<LinkCard url=\\"https://twitter.com/Kengo_TODA/status/1564576050671075329\\" />\\n\\n### github-comment\\n\\n<LinkCard url=\\"https://twitter.com/ponkio_o/status/1555119431260729344\\" />\\n\\ngithub-comment \u3067\u30b3\u30e1\u30f3\u30c8\u304c\u9577\u3059\u304e\u305f\u5834\u5408\u306b\u3001\u4ee3\u308f\u308a\u306e\u30b3\u30e1\u30f3\u30c8\u3092 post \u3059\u308b\u8a2d\u5b9a\u3067\u3059\u3002\\n\\n<LinkCard url=\\"https://twitter.com/ponkio_o/status/1561046628269961216\\" />\\n\\ninspire \u3057\u307e\u3057\u305f\u3002\\n\\n> It is inspired from [suzuki-shunsuke/github-comment](https://github.com/suzuki-shunsuke/github-comment).\\n\\n### ci-info\\n\\n<LinkCard url=\\"https://twitter.com/szkdash/status/1561735944213958661\\" />\\n\\nci-info \u304c\u81ea\u52d5\u3067\u74b0\u5883\u5909\u6570\u304b\u3089 commit hash \u306a\u3069\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u304f\u308c\u308b\u3068\u3044\u3046\u8a71\u3067\u3059\u306d\u3002\\n\u5185\u90e8\u7684\u306b\u306f go-ci-env \u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n<LinkCard url=\\"https://github.com/suzuki-shunsuke/go-ci-env\\" />"},{"id":"/what-i-did-2022-07","metadata":{"permalink":"/what-i-did-2022-07","source":"@site/blog/what-i-did-2022-07.mdx","title":"2022-07 \u632f\u308a\u8fd4\u308a","description":"\u4ed5\u4e8b","date":"2022-07-30T09:30:55.000Z","formattedDate":"July 30, 2022","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":6.57,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2022-07 \u632f\u308a\u8fd4\u308a","date":"2022-07-30T09:30:55.000Z","authors":["suzuki-shunsuke"],"tags":["job","oss"]},"prevItem":{"title":"2022-08 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-08"},"nextItem":{"title":"2022-06 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-06"}},"content":"import LinkCard from \'@site/src/components/linkcard\';\\n\\n## \u4ed5\u4e8b\\n\\n\u4eca\u6708\u304b\u3089 Mercari \u306e Platform Group \u306e Platform DX team \u306e\u30e1\u30f3\u30d0\u30fc\u3068\u3057\u3066\u4ed5\u4e8b\u3092\u3057\u3066\u3044\u307e\u3059\u3002\\n\u82f1\u8a9e\u3067\u82e5\u5e72\u82e6\u52b4\u3057\u3066\u3044\u308b\u90e8\u5206\u306f\u3042\u308a\u307e\u3059\u304c\u306a\u3093\u3068\u304b\u3084\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u3053\u306e\u3054\u6642\u4e16\u306a\u306e\u3067\u540c\u50da\u306e\u65b9\u3068\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u4f1a\u3046\u3053\u3068\u306f\u5f53\u5206\u7121\u3044\u3060\u308d\u3046\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001\\n2 \u56de\u3050\u3089\u3044\u6b53\u8fce\u4f1a\u3092\u3057\u3066\u9802\u304d(\u30aa\u30f3\u30e9\u30a4\u30f3\u3092\u542b\u3081\u308b\u3068\u3082\u3063\u3068\u3042\u308b)\u3001\u9854\u3092\u5408\u308f\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\\n\\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u304b\u306a\u308a\u6574\u3063\u3066\u307e\u3059\u3057\u3001\u308f\u304b\u3089\u306a\u3044\u3053\u3068\u306f\u805e\u3051\u3070\u6559\u3048\u3066\u3082\u3089\u3048\u307e\u3059\u3057\u3001\u6bce\u65e5\u30e1\u30f3\u30bf\u30fc\u3068 10 ~ 15 \u5206\u7a0b\u5ea6 1on1 \u3092\u3084\u3063\u3066\u3044\u308b\u306e\u3067\u9806\u8abf\u306b\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u9032\u3081\u3089\u308c\u3066\u3044\u308b\u304b\u306a\u3068\u3044\u3046\u6c17\u304c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u81ea\u52d5\u5316\u306e\u4ed5\u7d44\u307f\u3068\u304b\u306f\u304b\u306a\u308a\u6574\u3063\u3066\u3044\u307e\u3059\u304c\u3001\\n[aqua](https://aquaproj.github.io/) \u3084 [tfcmt](https://github.com/suzuki-shunsuke/tfcmt), [github-comment](https://github.com/suzuki-shunsuke/github-comment) \u3068\u3044\u3063\u305f\u81ea\u5206\u304c\u958b\u767a\u3057\u3066\u3044\u308b OSS \u3092\u6d3b\u7528\u3057\u3066\u66f4\u306b DX \u3092\u9ad8\u3081\u305f\u308a\u30b3\u30fc\u30c9\u3092\u7dba\u9e97\u306b\u3057\u3066\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u9ad8\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u306a\u3068\u611f\u3058\u3066\u3044\u307e\u3059\u3002\\n\\n\u73fe\u5728\u5e7e\u3064\u304b\u306e\u30bf\u30b9\u30af\u306b\u53d6\u308a\u7d44\u307f\u3064\u3064\u3001\u4e0a\u8a18\u306e\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\u3059\u308b\u305f\u3081\u306b\u30c4\u30fc\u30eb\u5074\u3092\u82e5\u5e72\u4fee\u6b63\u3057\u3066\u3044\u307e\u3059\u3002\\n\u65b0\u3057\u3044\u74b0\u5883\u306b\u79fb\u308b\u3053\u3068\u3067\u4eca\u307e\u3067\u898b\u3048\u3066\u306a\u304b\u3063\u305f\u90e8\u5206\u304c\u898b\u3048\u3066\u30c4\u30fc\u30eb\u3092\u9032\u5316\u3055\u305b\u308b\u3053\u3068\u304c\u51fa\u6765\u3066\u3044\u3066\u3044\u3044\u8a71\u3060\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## OSS \u958b\u767a\\n\\n### aquaproj/aqua\\n\\nv1.15.1 => v1.18.0\\n\\n* [v1.16.0](https://github.com/aquaproj/aqua/releases/tag/v1.16.0)\\n  * `aqua g` \u306e\u691c\u7d22\u7d50\u679c\u306e\u8868\u793a\u3092\u6539\u5584\\n* [v1.17.0](https://github.com/aquaproj/aqua/releases/tag/v1.17.0)\\n  * log \u306e\u30ab\u30e9\u30fc\u51fa\u529b\u3092\u74b0\u5883\u5909\u6570\u3067\u5236\u5fa1\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n  * progress bar \u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7121\u52b9\u5316\u3057\u305f\u3002\u74b0\u5883\u5909\u6570\u3067\u6709\u52b9\u5316\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n* [v1.18.0](https://github.com/aquaproj/aqua/releases/tag/v1.18.0)\\n  * `aqua cp` \u30b3\u30de\u30f3\u30c9\u306e\u30b5\u30dd\u30fc\u30c8\\n    * Docker image \u306a\u3069\u306b\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001 aqua \u306a\u3057\u3067\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u969b\u306b\u4fbf\u5229\\n\\naqua cp \u3092\u4f7f\u3063\u305f Docker image \u306e build \u306b\u95a2\u3057\u3066\u306f\u4ee5\u4e0b\u306b\u66f8\u304d\u307e\u3057\u305f\u3002\\n\\n<LinkCard url=\\"https://aquaproj.github.io/docs/tutorial-extras/build-container-image/\\" />\\n\\n### aqua-registry\\n\\nv3.5.0 => v3.20.0\\n\\nPackage \u6570\u304c 637 \u304b\u3089 702 \u307e\u3067\u5897\u3048\u307e\u3057\u305f\u3002\\nContribution \u3057\u3066\u304f\u3060\u3055\u3063\u305f\u65b9\u3005\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\\n\\n\u3042\u3068\u3001 aqua-registry \u306b contribution \u3059\u308b\u305f\u3081\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 `generate-registry.sh` \u3084 `scaffold.sh` \u3092 Go \u3067\u66f8\u304d\u76f4\u3057\u305f\u308a\u3001\u65b0\u305f\u306b `create-pr-new-pkg` \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3057\u307e\u3057\u305f\u3002\\nGo \u3067\u66f8\u304d\u76f4\u3059\u3053\u3068\u3067 Windows \u3067\u3082\u52d5\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\nscaffold \u3057\u3066\u304b\u3089 PR \u3092\u4f5c\u6210\u3059\u308b\u307e\u3067\u304c\u81ea\u52d5\u5316\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u3001\u3088\u308a\u7c21\u5358\u306b contribution \u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u304b\u306a\u308a\u4fbf\u5229\u3067\u3059\u3002\\n\\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e 3 \u30b3\u30de\u30f3\u30c9\u3067 [kevwan/depu](https://github.com/kevwan/depu) \u3092\u8ffd\u52a0\u3059\u308b PR \u3092\u4f5c\u6210\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002 [#4992](https://github.com/aquaproj/aqua-registry/pull/4992)\\n\\n```console\\n$ go run ./cmd/scaffold kevwan/depu # scaffold\\n$ depu --help # \u52d5\u4f5c\u78ba\u8a8d\\n$ go run ./cmd/create-pr-new-pkg kevwan/depu # PR \u4f5c\u6210\\n```\\n\\n\u307e\u305f Style Guide \u3092\u6574\u3048\u307e\u3057\u305f\u3002\\n\\nhttps://aquaproj.github.io/docs/reference/registry-style-guide\\n\\n\u305d\u3057\u3066\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u3092 Style Guide \u306b\u5408\u308f\u305b\u3066\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002\\n\\nPackage \u6570\u304c 700 \u3092\u8d85\u3048\u3001\u9806\u8abf\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u6570\u306f\u5897\u3048\u7d9a\u3051\u3066\u3044\u307e\u3059\u3002\\n\u3053\u308c\u3082\u7c21\u5358\u306b\u65b0\u3057\u3044\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u8ffd\u52a0\u3067\u304d\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3082\u542b\u3081\u305f\u4ed5\u7d44\u307f\u4f5c\u308a\u306e\u8cdc\u7269\u3067\u3059\u3002\\n\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u306f\u898b\u3048\u306b\u304f\u3044\u90e8\u5206\u3067\u3059\u304c\u3001\u3053\u306e\u8fba\u306e\u826f\u3055\u3082\u4f1d\u308f\u308c\u3070\u3044\u3044\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n### tfcmt\\n\\n* [v3.3.0](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.3.0)\\n  * Google Cloud Build \u3092\u6a19\u6e96\u3067\u30b5\u30dd\u30fc\u30c8\\n\\n### github-comment\\n\\n* [v4.3.0](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v4.3.0)\\n  * post command \u3067\u65e2\u5b58\u306e\u30b3\u30de\u30f3\u30c9\u306e\u66f4\u65b0\u3092\u30b5\u30dd\u30fc\u30c8\\n  * ARM64 \u3092\u30b5\u30dd\u30fc\u30c8\\n* [v4.4.0](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v4.4.0)\\n  * Google Cloud Build \u3092\u6a19\u6e96\u3067\u30b5\u30dd\u30fc\u30c8\\n\\n### go-ci-env\\n\\n* [v3.0.0](https://github.com/suzuki-shunsuke/go-ci-env/releases/tag/v3.0.0)\\n  * API \u3092\u5927\u5e45\u306b\u4fee\u6b63\u3057\u3001\u4f7f\u3044\u3084\u3059\u304f\u3057\u305f\\n  * `generic` package \u3092\u524a\u9664\\n  * `Add` function \u3092\u8ffd\u52a0\u3057\u3001\u72ec\u81ea\u306e Platform \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3084\u3059\u304f\u3057\u305f\\n  * `JobURL` \u3092\u8ffd\u52a0\\n\\n### tfaction\\n\\n* [v0.5.13](https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.13)\\n  * tfaction.yaml \u3068 tfaction-root.yaml \u3067\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u7279\u5b9a\u306e working directory \u3067 terraform \u306e `-parallelism` \u3092\u5909\u3048\u305f\u3044\u3068\u304d\u3068\u304b\u306b\u4fbf\u5229\u3067\u3059\\n* [v0.5.14](https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.14)\\n  * v0.5.13 \u3067\u751f\u3058\u305f\u3001 terraform apply \u3092\u5b9f\u884c\u3059\u308b\u969b\u306b GCS \u304b\u3089 plan file \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u306e\u306b\u5931\u6557\u3059\u308b\u30d0\u30b0\u3092\u4fee\u6b63\u3057\u307e\u3057\u305f (GCS \u3058\u3083\u306a\u304f\u3066 S3 \u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093)\\n\\ntfaction, \u3082\u3057\u304b\u3057\u3066\u67d0W\u793e\u3067\u3082\u4f7f\u308f\u308c\u3066\u3044\u308b(?)\\n\\n## \u305d\u306e\u4ed6\\n\\n### aqua \u306e Twitter \u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u3063\u3066\u307f\u305f\\n\\n[@aquaclivm](https://twitter.com/aquaclivm)\\n\u3042\u3068\u306f hash tag [#aquaclivm](https://twitter.com/hashtag/aquaclivm) \u3092\u6d3b\u7528\u3057\u59cb\u3081\u307e\u3057\u305f(\u3061\u3087\u304f\u3061\u3087\u304f\u3064\u3051\u308b\u306e\u5fd8\u308c\u307e\u3059\u304c)\u3002\\n`aqua` \u3068\u3044\u3046\u30ef\u30fc\u30c9\u304c\u3042\u307e\u308a\u306b\u3082\u4e00\u822c\u7684\u3059\u304e\u3066\u691c\u7d22\u3057\u3066\u3082 aqua \u304c\u57cb\u3082\u308c\u3066\u898b\u3064\u3051\u3089\u308c\u306a\u3044\u306e\u3067\u3001 aqua \u306b\u95a2\u3057\u3066\u545f\u304f\u3068\u304d\u306f @aquaclivm \u3092\u30e1\u30f3\u30b7\u30e7\u30f3\u3059\u308b\u306a\u308a hash tag \u3092\u3064\u3051\u308b\u306a\u308a\u3057\u3066\u3082\u3089\u3048\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\u3002\\n\\n### starship, Yggdroot/LeaderF \u3092\u5c0e\u5165\\n\\n\u4ed5\u4e8b\u7528\u306e PC \u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u305f\u969b\u3001\u4eca\u307e\u3067\u4f7f\u3063\u3066\u305f denite.nvim \u3084 kube-ps1 \u304c\u3046\u307e\u304f\u52d5\u304b\u305a\u3001\u8abf\u3079\u308b\u306e\u3082\u9762\u5012\u306a\u306e\u3067\u5225\u306e\u30c4\u30fc\u30eb\u306b\u4e57\u308a\u63db\u3048\u307e\u3057\u305f\u3002\\n\\n* https://github.com/Yggdroot/LeaderF\\n* https://github.com/starship/starship\\n* https://github.com/yuru7/HackGen\\n\\n## \u305d\u306e\u4ed6\u306e\u305d\u306e\u4ed6\\n\\n`aqua gr` \u30b3\u30de\u30f3\u30c9\u3059\u3054\u3044\u4fbf\u5229\u3002\\n\\n<LinkCard url=\\"https://twitter.com/tadayosi/status/1542803440837234688\\" />\\n\\nfish \u3067 aqua \u3092\u88dc\u5b8c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u8a71\u3067\u3059\u3002\u3044\u3044\u8a71\\n\\n<LinkCard url=\\"https://weblog.grimoh.net/entry/2022/07/31/135537\\" />\\n\\n\u3044\u3044\u8a71\\n\\n<LinkCard url=\\"https://twitter.com/gr1m0h/status/1553043965166755840\\" />\\n\\n\u308f\u304b\u308b\u3002\u307f\u3093\u306a\u306b\u3053\u306e\u826f\u3055\u3092\u77e5\u3063\u3066\u307b\u3057\u3044\\n\\n<LinkCard url=\\"https://twitter.com/dubs11kt/status/1549372407017721856\\" />\\n\\n\u521d\u7269\u7406\u51fa\u793e\u6642\u306e\u8a18\u5ff5\u5199\u771f\\n\\n![image](https://user-images.githubusercontent.com/13323303/182027235-161a89a8-e6c1-4bd7-bb00-71675f203942.png)"},{"id":"/what-i-did-2022-06","metadata":{"permalink":"/what-i-did-2022-06","source":"@site/blog/what-i-did-2022-06.mdx","title":"2022-06 \u632f\u308a\u8fd4\u308a","description":"\u4ed5\u4e8b","date":"2022-06-28T05:16:55.000Z","formattedDate":"June 28, 2022","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":6.945,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2022-06 \u632f\u308a\u8fd4\u308a","date":"2022-06-28T05:16:55.000Z","authors":["suzuki-shunsuke"],"tags":["job","oss"]},"prevItem":{"title":"2022-07 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-07"},"nextItem":{"title":"2022-05 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-05"}},"content":"import LinkCard from \'@site/src/components/linkcard\';\\n\\n## \u4ed5\u4e8b\\n\\n05-18 \u304c\u30ea\u30af\u30eb\u30fc\u30c8\u3067\u306e\u6700\u7d42\u51fa\u793e\u65e5\u3067\u3057\u305f\u3002 https://techblog.szksh.cloud/job-change-2022-06/\\n\\n\u306a\u306e\u3067\u4eca\u6708\u306f\u4e38\u3005\u4f11\u307f\u3067\u3059\u3002\u6765\u6708 07-01 \u304b\u3089\u50cd\u304d\u307e\u3059\u3002\\n\\n## \u65e5\u5831(?)\\n\\nhttps://zenn.dev/shunsuke_suzuki/scraps/dbfdeb67518c52\\n\\nzenn \u3067\u65e5\u5831\u306e\u3088\u3046\u306a\u3082\u306e\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u4f11\u307f\u4e2d\u306a\u306e\u306b\u5049\u3044\u3002\\n06-07 \u3060\u3051\u4f55\u3082\u66f8\u3044\u3066\u306a\u3044\u3067\u3059\u306d\u3002\u3053\u306e\u65e5\u306f\u30b0\u30c0\u30b0\u30c0\u6f2b\u753b\u8aad\u3093\u3067\u305f\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\u3067\u3082\u57fa\u672c\u306f\u4f11\u307f\u4e2d\u3082\u305a\u3063\u3068 OSS \u306e\u30e1\u30f3\u30c6\u3057\u3066\u307e\u3057\u305f\u3002\\n\\n## Blog\\n\\n* [2022-06-23 CLI Version Manager \u306e aqua \u304c Windows \u3092\u30b5\u30dd\u30fc\u30c8](https://zenn.dev/shunsuke_suzuki/articles/aqua-windows-support)\\n* [2022-06-08 aqua \u304c Go \u88fd\u306e\u30c4\u30fc\u30eb\u306e\u30d3\u30eb\u30c9\u3092\u30b5\u30dd\u30fc\u30c8](https://zenn.dev/shunsuke_suzuki/articles/aqua-go-build-support)\\n\\n## OSS \u958b\u767a\\n\\n### aquaproj/aqua\\n\\nWindows \u5bfe\u5fdc\u306f\u975e\u5e38\u306b\u5927\u304d\u306a\u6539\u4fee\u3067\u3057\u305f\u304c\u3001\u53cd\u97ff\u304c\u307b\u307c\u306a\u304f\u3066\u6b8b\u5ff5\u3067\u3057\u305f\u3002\\n\\nv1.9.0 => v1.15.0\\n\\n* [v1.10.0](https://github.com/aquaproj/aqua/releases/tag/v1.10.0)\\n  * \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306e\u305f\u3081\u306b `-trace` \u3068 `-cpu-profile` option \u3092\u8ffd\u52a0\\n  * `go install` \u306b\u3088\u308b\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u30b5\u30dd\u30fc\u30c8\\n* [v1.10.1](https://github.com/aquaproj/aqua/releases/tag/v1.10.0), [v1.10.2](https://github.com/aquaproj/aqua/releases/tag/v1.10.2)\\n  * \u7570\u5e38\u7cfb\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3092\u6539\u5584\\n  * aqua \u306f\u30c4\u30fc\u30eb\u306e\u6027\u8cea\u4e0a\u3001 invalid \u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u306a\u308b\u3079\u304f\u8a31\u5bb9\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n  * https://zenn.dev/link/comments/bb67b39f122f25\\n* [v1.11.0](https://github.com/aquaproj/aqua/releases/tag/v1.11.0)\\n  * Bash, Zsh \u3067\u30b3\u30de\u30f3\u30c9\u3092\u88dc\u5b8c\u3092\u30b5\u30dd\u30fc\u30c8\\n* [v1.12.0](https://github.com/aquaproj/aqua/releases/tag/v1.12.0)\\n  * Windows \u3092\u6b63\u5f0f\u306b\u30b5\u30dd\u30fc\u30c8\\n  * `supported_envs` \u306e\u8ffd\u52a0\\n* [v1.12.1](https://github.com/aquaproj/aqua/releases/tag/v1.12.1)\\n  * `supported_envs` \u306b\u95a2\u3059\u308b\u30d0\u30b0\u4fee\u6b63\\n* [v1.13.0](https://github.com/aquaproj/aqua/releases/tag/v1.13.0)\\n  * Windows \u3067\u30ed\u30b0\u306b\u8272\u304c\u3064\u304f\u3088\u3046\u306b\u4fee\u6b63\\n* [v1.14.0](https://github.com/aquaproj/aqua/releases/tag/v1.14.0)\\n  * JSON Schema \u306e\u4fee\u6b63\\n  * Registry \u306e\u30b3\u30fc\u30c9\u3092 scaffold \u3059\u308b\u30b3\u30de\u30f3\u30c9 `aqua gr` \u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u52a0\\n    * Registry \u306e\u8a2d\u5b9a\u3092\u81ea\u5206\u3067\u66f8\u304f\u4eba\u306b\u3068\u3063\u3066\u306f\u975e\u5e38\u306b\u4fbf\u5229\\n* [v1.14.1](https://github.com/aquaproj/aqua/releases/tag/v1.14.1)\\n  * Windows \u95a2\u9023\u306e\u30d0\u30b0\u3092\u4fee\u6b63\\n* [v1.15.0](https://github.com/aquaproj/aqua/releases/tag/v1.15.0)\\n  * `aqua g` \u306b `-s` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3066\u3001 version \u3092 interactive \u306b\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n  * \u30c4\u30fc\u30eb\u306e download \u6642\u306b progress bar \u3092\u8868\u793a\\n* \u52d5\u753b\u53ce\u9332\\n  * \u5ba3\u4f1d\u306e\u305f\u3081\u306b\u52d5\u753b\u53ce\u9332\\n  * https://zenn.dev/shunsuke_suzuki/scraps/210234e8fa39bf\\n  * \u82f1\u8a9e\u3067\u77ed\u3044\u306e\u64ae\u308a\u307e\u3057\u305f: https://www.youtube.com/watch?v=adX_lloB3mY\\n  * \u65e5\u672c\u8a9e\u3067\u9577\u3081(10 ~ 30 \u5206) \u304f\u3089\u3044\u306e\u52d5\u753b\u3082\u6e96\u5099\u3057\u3066\u3044\u307e\u3059\\n    * https://zenn.dev/shunsuke_suzuki/scraps/c5e0da3c378e97\\n    * \u305f\u3060\u3001 aqua \u3092 rename \u3059\u308b\u306a\u3089\u305d\u306e\u5f8c\u306e\u307b\u3046\u304c\u826f\u3044\u304b\u306a\u3068\u601d\u3063\u3066\u4fdd\u7559\\n* aqua \u306e\u30ea\u30cd\u30fc\u30e0\u3092\u691c\u8a0e&\u6e96\u5099\\n  * https://zenn.dev/shunsuke_suzuki/scraps/fe8807a0296f33\\n  * https://github.com/aquaproj/aqua/issues/881\\n\\n### aqua-registry\\n\\nv2.19.0 => v3.5.0\\n\\nPackage \u6570\u304c 515 \u304b\u3089 637 \u307e\u3067\u5897\u3048\u307e\u3057\u305f\u3002\\n[#4181](https://github.com/aquaproj/aqua-registry/issues/4181) binenv \u304c\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u30c4\u30fc\u30eb\u306b\u95a2\u3057\u3066\u3001 aqua-registry \u3067\u3082\u3060\u3044\u305f\u3044\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002\\n\\n### tfcmt\\n\\n* [v3.2.4](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.2.4): `-auto-approve` \u306a\u3057\u3067 tfcmt apply \u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n* [v3.2.5](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.2.5): Windows \u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\\n\\n### asciinema-trim\\n\\nhttps://github.com/suzuki-shunsuke/asciinema-trim/releases/tag/v0.1.2\\n\\nWindows \u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\\n\\n## \u305d\u306e\u4ed6\\n\\n### aqua \u304c\u7d39\u4ecb\u3055\u308c\u307e\u3057\u305f\\n\\n<LinkCard url=\\"https://zenn.dev/zoetro/articles/9454a6231a1273\\" />\\n\\n\u8457\u8005\u306e zoetro \u3055\u3093\u306f\u4ee5\u524d\u3082 aqua \u306b\u95a2\u3059\u308b\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u305f\u3044\u8a71\u3067\u3059\u3002\\n\\n<LinkCard url=\\"https://zenn.dev/zoetro/articles/eee98d772c2483\\" />\\n\\nTerraform \u3084 Kubernetes \u3067\u306f\u69d8\u3005\u306a\u5468\u8fba\u30c4\u30fc\u30eb\u304c\u3042\u308a\u3001\u305d\u308c\u3089\u306e\u30c4\u30fc\u30eb\u306e\u7ba1\u7406\u306b aqua \u306f\u975e\u5e38\u306b\u4fbf\u5229\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n### Windows \u74b0\u5883\u3092\u7528\u610f\u3059\u308b\u306a\u3089 Amazon Workspaces \u304c\u4fbf\u5229\\n\\nhttps://zenn.dev/shunsuke_suzuki/scraps/6859774d379414\\n\\naqua \u306e Windows \u5bfe\u5fdc\u3067 Windows \u74b0\u5883\u304c\u5fc5\u8981\u3060\u3063\u305f\u306e\u3067 Amazon Workspaces \u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\\n\u3068\u3066\u3082\u7c21\u5358\u306b Windows \u74b0\u5883\u3092\u7528\u610f\u3067\u304d\u308b\u306e\u3067\u4fbf\u5229\u3067\u3057\u305f\u3002\\n\\n### tfcmt plan \u306f plan \u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3063\u3066\u3082\u5b9f\u884c\u3067\u304d\u308b\\n\\nterraform plan \u306e\u4ee3\u308f\u308a\u306b terraform show \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3048\u3070 plan file \u3092\u4f7f\u3063\u3066 tfcmt \u3067\u30b3\u30e1\u30f3\u30c8\u3067\u304d\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/tfcmt/issues/316\\n\\n### tfaction \u306e Star \u6570\u304c\u306a\u305c\u304b\u5897\u3048\u305f\\n\\n\u7406\u7531\u306f\u3088\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u7d50\u69cb star \u6570\u304c\u5897\u3048\u307e\u3057\u305f\u3002\\n\\n![image](https://storage.googleapis.com/zenn-user-upload/737521634e44-20220605.png)\\n\\n### Renovate \u304c GitHub Actions x.y.z-0 \u3092 x.y.z \u306b update \u3057\u3066\u304f\u308c\u306a\u3044\u539f\u56e0\u3068\u4fee\u6b63\u65b9\u6cd5\\n\\nhttps://zenn.dev/shunsuke_suzuki/scraps/9b4a3e5e8f6925#comment-09bfe96f8a2c1d\\n\\n### Slide \u4f5c\u6210\u306f Google Slide \u304c\u81ea\u5206\u306b\u3042\u3063\u3066\u308b\\n\\nSlide \u3092\u306a\u306b\u3067\u4f5c\u308b\u304b\u8003\u3048\u305f\u308a\u3057\u307e\u3057\u305f\u304c\u3001\u7d50\u5c40 Google Slide \u304c\u81ea\u5206\u306b\u306f\u5408\u3063\u3066\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3044\u3046\u7d50\u8ad6\u306b\u81f3\u308a\u307e\u3057\u305f\u3002\\n\u3082\u3063\u3068\u3082 Slide \u3063\u3066\u3042\u307e\u308a\u30b3\u30b9\u30d1\u304c\u826f\u304f\u306a\u3044\u306e\u3067\u3001\u30d6\u30ed\u30b0\u3068\u304b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u307b\u3046\u304c\u826f\u3044\u6c17\u306f\u3057\u307e\u3059\u306d\u3002\\n\\nhttps://zenn.dev/link/comments/888dbb8af3ca0a\\n\\n### \u30de\u30a4\u30af\u8cb7\u3063\u3066\u307f\u305f\\n\\nhttps://www.amazon.co.jp/gp/product/B099ZZMGJ5\\n\\n![image](https://storage.googleapis.com/zenn-user-upload/3a302e3c9ba5-20220609.png)\\n\\naqua \u306e\u52d5\u753b\u3092\u64ae\u308b\u306e\u306b\u5185\u81d3\u306e\u30de\u30a4\u30af\u3060\u3068\u30a4\u30de\u30a4\u30c1\u306a\u6c17\u304c\u3057\u305f\u306e\u3067\u30de\u30a4\u30af\u3092\u8cb7\u3063\u3066\u307f\u307e\u3057\u305f\u3002\\n\u6709\u7dda\u306e\u30d8\u30c3\u30c9\u30db\u30f3\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u304c\u3061\u3087\u3063\u3068\u30de\u30a4\u30ca\u30b9\u3067\u3059\u306d\u3002\\nQuickTime Player \u3067\u9332\u753b\u3057\u3066\u307f\u305f\u3089\u3001\u307e\u3041\u5185\u81d3\u306e\u30de\u30a4\u30af\u3088\u308a\u306f\u30af\u30ea\u30a2\u306a\u6c17\u304c\u3057\u307e\u3059\u304c\u3001\\n\u97f3\u3092\u62fe\u3044\u3059\u304e\u3066\u3044\u308b\u6c17\u3082\u3057\u307e\u3059\u3002\\n\\n\u8cb7\u3063\u305f\u3042\u3068\u3061\u3087\u3063\u3068\u52d5\u753b\u53ce\u9332\u306b\u4f7f\u3063\u305f\u3060\u3051\u3067\u3042\u307e\u308a\u4f7f\u3063\u3066\u306a\u3044\u3067\u3059\u304c\u3001\u6765\u6708\u304b\u3089\u4ed5\u4e8b\u3067\u3082\u4f7f\u3046\u6a5f\u4f1a\u3042\u308b\u306e\u304b\u306a\uff1f\u5185\u8535\u30de\u30a4\u30af\u3067\u5341\u5206\u306a\u6c17\u3082\u3059\u308b\u3051\u3069\u3002\\n\\n### \u904b\u52d5\\n\\n\u30a2\u30ad\u30ec\u30b9\u8171\u304c\u75db\u304f\u3066\u8d70\u308c\u306a\u3044\u3093\u3067\u3059\u304c\u3001\u5353\u7403\u306f\u306a\u3093\u3068\u304b\u51fa\u6765\u307e\u3059\u3002\\n\u30de\u30a4\u30e9\u30b1\u30c3\u30c8\u3068\u30de\u30a4\u30b7\u30e5\u30fc\u30ba\u3092\u8cb7\u3044\u307e\u3057\u305f\u3002\\n\u90311, 2 \u304f\u3089\u3044\u3067\u3084\u3063\u3066\u307e\u3059\u304c\u3001\u4ed5\u4e8b\u59cb\u307e\u3063\u305f\u3089\u90311\u306b\u306a\u308b\u304b\u3082\u3002\\n\\n## \u305d\u306e\u4ed6\u306e\u305d\u306e\u4ed6\\n\\ntweet \u306e\u57cb\u3081\u8fbc\u307f\u3001\u3082\u3046\u3061\u3087\u3044\u3044\u3044\u611f\u3058\u306b\u3057\u305f\u3044\u3067\u3059\u306d\u3002\\n\\ntfaction \u306b\u95a2\u3059\u308b\u30b3\u30e1\u30f3\u30c8\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\u3059\u3054\u3044\u81ea\u52d5\u5316\u3055\u308c\u3066\u3044\u308b\u611f\u3058\u304c\u3057\u3066\u3044\u3044\u3067\u3059\u3088\u306d\u3002\\n\\n<LinkCard url=\\"https://twitter.com/irotoris/status/1536953830306287617\\" />\\n\\n\u81ea\u5206\u304c LINE \u3067 Corporate Engineer \u3084\u3063\u3066\u305f\u9803\u306b\u4f5c\u3063\u305f Slack App \u304c\u672a\u3060\u306b\u73fe\u5f79\u3089\u3057\u304f\u3066\u611f\u52d5\u3057\u307e\u3057\u305f\u3002\\n\\n<LinkCard url=\\"https://twitter.com/szkdash/status/1537674427269545984\\" />\\n\\n## \u3055\u3044\u3054\u306b\\n\\n05-19 \u304b\u3089 1 \u30f6\u6708\u4ee5\u4e0a\u306b\u6e21\u308b\u6709\u7d66\u6d88\u5316\u304c\u7d42\u308f\u308a\u307e\u3057\u305f\u3002\\n\u9577\u3044\u4f11\u307f\u306e\u9593\u306b\u65b0\u3057\u3044 OSS \u3092\u4f5c\u3063\u305f\u308a\u3057\u305f\u3044\u3068\u3082\u601d\u3063\u3066\u307e\u3057\u305f\u304c\u3001\u65e2\u5b58\u306e OSS (\u4e3b\u306b aqua) \u306e\u30e1\u30f3\u30c6\u3067\u624b\u4e00\u676f\u3067\u3057\u305f\u3002\\n\u305d\u308c\u3067\u3082 aqua \u3084 tfcmt \u306a\u3069\u3092\u6539\u5584\u3067\u304d\u305f\u306e\u3067\u826f\u304b\u3063\u305f\u3067\u3059\u3002\\n\\n\u6765\u6708\u304b\u3089 Mercari \u3067\u50cd\u304d\u307e\u3059\u3002\\n\u74b0\u5883\u304c\u5927\u304d\u304f\u5909\u308f\u308b\u306f\u305a(\u7279\u306b\u82f1\u8a9e)\u306a\u306e\u3067\u3001\u697d\u3057\u307f\u306a\u534a\u9762\u3061\u3087\u3063\u3068\u7dca\u5f35\u3057\u307e\u3059\u3002"},{"id":"/what-i-did-2022-05","metadata":{"permalink":"/what-i-did-2022-05","source":"@site/blog/what-i-did-2022-05.mdx","title":"2022-05 \u632f\u308a\u8fd4\u308a","description":"\u4ed5\u4e8b","date":"2022-05-28T05:16:55.000Z","formattedDate":"May 28, 2022","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":9.29,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2022-05 \u632f\u308a\u8fd4\u308a","date":"2022-05-28T05:16:55.000Z","authors":["suzuki-shunsuke"],"tags":["job","oss"]},"prevItem":{"title":"2022-06 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-06"},"nextItem":{"title":"\u8ee2\u8077\u3057\u307e\u3059","permalink":"/job-change-2022-06"}},"content":"import LinkCard from \'@site/src/components/linkcard\';\\n\\n## \u4ed5\u4e8b\\n\\n05-18 \u304c\u30ea\u30af\u30eb\u30fc\u30c8\u3067\u306e\u6700\u7d42\u51fa\u793e\u65e5\u3067\u3057\u305f\u3002\\n\\nhttps://twitter.com/szkdash/status/1526875250646204417\\n\\nhttps://twitter.com/szkdash/status/1527235538951974912\\n\\n## Blog\\n\\n* [aqua supports building tools with Go](https://dev.to/suzukishunsuke/support-building-tools-written-in-go-2l10)\\n* [Pull Request \u3092\u518d\u5ea6 review \u3057\u3066\u307b\u3057\u3044\u5834\u5408\u306f Re-request review \u3092\u3057\u307e\u3057\u3087\u3046](https://techblog.szksh.cloud/github-re-request-review)\\n* [\u8ee2\u8077\u3057\u307e\u3059](https://techblog.szksh.cloud/job-change-2022-06)\\n* [automerge \u3067\u304d\u306a\u304b\u3063\u305f Renovate \u306e Pull Request \u3092 Issue \u3068\u3057\u3066\u7ba1\u7406](https://zenn.dev/shunsuke_suzuki/articles/renovate-issue-action)\\n* [CLI \u3067\u306e\u69cb\u9020\u5316\u30ed\u30ae\u30f3\u30b0\u306e\u3059\u3059\u3081](https://zenn.dev/shunsuke_suzuki/articles/cli-structured-logging)\\n* [tfcmt apply \u3067\u901a\u77e5\u5148\u306e\u53d6\u5f97\u65b9\u6cd5\u3092\u6539\u5584](https://zenn.dev/shunsuke_suzuki/articles/tfcmt-apply-v322)\\n\\n## OSS Contribution\\n\\nmerged date | repository | lang | PR\'s short description\\n--- | --- | --- | ---\\n2022-05-07 | [terraform-linters/tflint-ruleset-aws](https://github.com/terraform-linters/tflint-ruleset-aws) | go | [feat: support provider aliases](https://github.com/terraform-linters/tflint-ruleset-aws/pull/342)\\n\\nTerraform \u306e AWS Provider \u306e Alias \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3067\u3082 tflint \u306e AWS Plugin \u306e Deep Check \u304c\u6b63\u3057\u304f\u52d5\u304f\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/terraform-linters/tflint-ruleset-aws/issues/331 \u3092\u8aad\u3080\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u304b\u3082\u3002\\n\u3053\u308c\u3092\u5b9f\u88c5\u3059\u308b\u969b\u306b\u306f\u30e1\u30f3\u30c6\u30ca\u306e [@wata727](https://github.com/wata727) \u3055\u3093\u306b\u7d50\u69cb\u30d5\u30a9\u30ed\u30fc\u3057\u3066\u3044\u305f\u3060\u304d\u3001\u52a9\u304b\u308a\u307e\u3057\u305f\u3002\\n\\n## OSS \u958b\u767a\\n\\n### \u65b0\u898f\\n\\n\u7279\u306b\u306a\u3057\\n\\n### Update\\n\\n#### Demo\\n\\nhttps://twitter.com/szkdash/status/1531555164800557056\\n\\n\u82e5\u5e72\u60c5\u5831\u304c\u53e4\u304f\u306a\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u30c7\u30e2\u52d5\u753b\u3092\u4f5c\u308a\u76f4\u3057\u307e\u3057\u305f\u3002\\n\\n<LinkCard url=\\"https://zenn.dev/shunsuke_suzuki/scraps/37c85ae936a651\\" />\\n\\n#### aquaproj/aquaproj.github.io\\n\\nhttps://github.com/aquaproj/aquaproj.github.io\\n\\nzenn \u3068\u9055\u3063\u3066 dev.to, medium \u3067\u66f8\u3044\u305f\u8a18\u4e8b\u306f GitHub \u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u304c\u5acc\u3060\u3063\u305f\u306e\u3067\u3001\\naquaproj.github.io \u3067 Blog \u3092\u6709\u52b9\u5316\u3057\u3066 dev.to, medium \u306e\u8a18\u4e8b\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304d\u307e\u3057\u305f\u3002\\nCanonical URL \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\\n\u65b0\u305f\u306b\u82f1\u8a9e\u3067\u8a18\u4e8b\u3092\u66f8\u304f\u969b\u306b\u306f\u3053\u3061\u3089\u3067\u66f8\u3044\u3066\u3001 dev.to \u306b\u30af\u30ed\u30b9\u30dd\u30b9\u30c8\u3057\u3066 Canonical URL \u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n\u95a2\u9023: https://zenn.dev/shunsuke_suzuki/scraps/43b8f553d08b6f\\n\\n\u3042\u3068 DocSearch \u306b\u3088\u308b\u691c\u7d22\u304c\u3044\u3064\u306e\u9593\u306b\u304b\u52d5\u304b\u306a\u304f\u306a\u3063\u3066\u3044\u305f\u306e\u3067\u30b5\u30dd\u30fc\u30c8\u306b\u554f\u3044\u5408\u308f\u305b\u307e\u3057\u305f\u3002 https://github.com/aquaproj/aquaproj.github.io/issues/76\\n\\n#### aquaproj/aqua-registry\\n\\nhttps://github.com/aquaproj/aqua-registry\\n\\nv2.11.0 => v2.19.0 (\u30c4\u30fc\u30eb\u6570: 470 => 515)\\n\\n\u69d8\u3005\u306a\u30c4\u30fc\u30eb\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\\npackage type `go` \u306e\u30c4\u30fc\u30eb\u3082\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002 https://github.com/aquaproj/aqua-registry/pull/3713\\n\\n#### aquaproj/aqua\\n\\nhttps://github.com/aquaproj/aqua\\n\\n* v1.5.0-0 => v1.9.0\\n* v1.5.0: package \u540d\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u30b5\u30dd\u30fc\u30c8\\n  * \u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u304c\u5909\u308f\u3063\u305f\u308a\u3001\u5225\u306e org \u306b transfer \u3055\u308c\u305f\u308a\u3057\u305f\u3068\u304d\u306e\u305f\u3081\u306e\u6a5f\u80fd\\n* v1.5.1\\n  * \u540c\u3058\u30c4\u30fc\u30eb\u3092\u8907\u6570\u30d0\u30fc\u30b8\u30e7\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408(\u57fa\u672c\u305d\u3093\u306a\u3053\u3068\u3057\u306a\u3044\u3051\u3069)\u306e\u30d0\u30b0\u3092\u4fee\u6b63\\n  * Registry \u30d5\u30a1\u30a4\u30eb\u306e\u62e1\u5f35\u5b50\u304c .json \u306e\u5834\u5408\u3001 JSON \u3068\u3057\u3066\u30d1\u30fc\u30b9\\n  * \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\\n* v1.6.0\\n  * standard registry \u306e override \u306e\u30b5\u30dd\u30fc\u30c8: registry.yaml \u306e\u4ee3\u308f\u308a\u306b registry.json \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u82e5\u5e72\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u6539\u5584\u3059\u308b\\n  * experimental feature \u3068\u3044\u3046\u6982\u5ff5\u306e\u5c0e\u5165\\n    * execve(2) \u3067\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3092\u30b5\u30dd\u30fc\u30c8\u3002\u6b8b\u5ff5\u306a\u304c\u3089 macOS \u3067\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u306a\u3044\u30b1\u30fc\u30b9\u304c\u898b\u3089\u308c\u308b\u306e\u3067 experimental feature \u3068\u3057\u3066\u30ea\u30ea\u30fc\u30b9\\n  * retry \u306e limit \u306b\u5f15\u3063\u304b\u304b\u3063\u305f\u5834\u5408\u306b\u30a8\u30e9\u30fc\u3092\u8fd4\u3059\u3088\u3046\u306b\u3057\u305f\\n  * \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\\n* v1.6.1\\n  * log \u306b GOOS \u3068 GOARCH \u3092\u8ffd\u52a0\u3002\u554f\u3044\u5408\u308f\u305b\u6642\u306b\u4fbf\u5229\\n  * \u5927\u5e45\u306a\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\\n  * unit test \u306e\u5927\u5e45\u306a\u8ffd\u52a0\\n* v1.6.2\\n  * v1.6.1 \u306e\u30d0\u30b0\u4fee\u6b63\u3002 aqua g \u3068 aqua list \u3067 global configuration \u3092\u8aad\u307e\u306a\u304f\u306a\u3063\u3066\u3044\u305f\u306e\u3092\u4fee\u6b63\\n* v1.6.3\\n  * aqua g \u3067 1 \u4ef6\u3082\u30de\u30c3\u30c1\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u306b panic \u304c\u767a\u751f\u3059\u308b\u306e\u3092\u4fee\u6b63\\n* v1.7.0\\n  * Go \u88fd\u306e\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b go build \u3067\u30d3\u30eb\u30c9\u3059\u308b\u306e\u3092\u30b5\u30dd\u30fc\u30c8\\n* v1.8.0\\n  * aqua g \u3067 GitHub Tag \u304b\u3089\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n* v1.9.0\\n  * github_archive, go \u3067 commit SHA \u3092 version \u3068\u3057\u3066\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n\\nchecksum \u306e\u691c\u8a3c\u3082 POC \u3068\u3057\u3066\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\\n\u3057\u304b\u3057 checksum \u306e\u30ea\u30b9\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u3092 Git \u3067\u7ba1\u7406\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u304c\u30e6\u30fc\u30b6\u30fc\u306e\u4f53\u9a13\u3092\u640d\u306a\u3046\u306e\u3067\u3001\u3069\u3046\u3059\u308b\u306e\u304c\u826f\u3044\u306e\u304b\u3088\u304f\u5206\u304b\u3089\u305a\u4e00\u65e6\u7f6e\u3044\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/aquaproj/aqua/issues/427\\n\\n#### tfcmt\\n\\nhttps://github.com/suzuki-shunsuke/tfcmt\\n\\n* v3.2.1 => v3.2.3\\n* v3.2.2: apply \u306e merge commit \u306b\u95a2\u9023\u3059\u308b Pull Request \u3092 API \u3067\u53d6\u5f97\\n* v3.2.3: GitHub Enterprise Support \u306e\u4fee\u6b63\u3002 Graph QL API \u306e Endpoint \u3092\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n\\n#### github-comment\\n\\nhttps://github.com/suzuki-shunsuke/github-comment\\n\\n* v4.1.1 => v4.2.0\\n* v4.2.0: GitHub Enterprise \u306e\u30b5\u30dd\u30fc\u30c8\\n\\n#### renovate-issue-action\\n\\nhttps://github.com/suzuki-shunsuke/renovate-issue-action\\n\\nProject \u306b\u8ffd\u52a0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3053\u3068\u3067\u3001\u3060\u3044\u3076\u5b9f\u7528\u30ec\u30d9\u30eb\u306b\u9054\u3057\u305f\u6c17\u304c\u3057\u307e\u3059\u3002\\n\\nv0.2.1 => v0.3.1\\n\\n* v0.2.2\\n  * Issue \u306e title \u3068 body \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3092\u6539\u5584\\n  * additional_body field \u306e\u8ffd\u52a0\\n* v0.2.3\\n  * Issue \u3092 Project \u306b\u8ffd\u52a0\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n* v0.3.0\\n  * Issue \u306e body \u95a2\u9023\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6574\u7406\\n* v0.3.1\\n  * \u7d1b\u3089\u308f\u3057\u3044\u30ed\u30b0\u3092\u524a\u9664\\n\\n#### asciinema-trim\\n\\nhttps://github.com/suzuki-shunsuke/asciinema-trim\\n\\nv0.1.0 => v0.1.1\\n\\n\u518d\u751f\u901f\u5ea6\u306e\u5909\u66f4\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://twitter.com/szkdash/status/1531563963057852416\\n\\n## \u305d\u306e\u4ed6\\n\\n* CLAS \u3067\u30aa\u30d5\u30a3\u30b9\u30c1\u30a7\u30a2\u3092\u30ec\u30f3\u30bf\u30eb\u3057\u307e\u3057\u305f\\n* [\u82f1\u8a9e\u300c\u306a\u308b\u307b\u3069\uff01\u300d\u30e9\u30a4\u30c6\u30a3\u30f3\u30b0\u3000\u901a\u3058\u308b\u82f1\u6587\u3078\u306e15\u30b9\u30c6\u30c3\u30d7](https://www.amazon.co.jp/gp/product/B00FS9DK3C) \u3092 Kindle \u3067\u8aad\u307f\u307e\u3057\u305f\\n  * https://twitter.com/szkdash/status/1530421071903858689\\n* [\u3082\u3046\u4e00\u5ea6\u8aad\u3080 SRE](https://open.spotify.com/show/1PUdFj8hXIZdyFat3nk3Af) \u3092 spotify \u3067 1.5 \u500d\u901f\u3067\u805e\u3044\u3066\u3044\u307e\u3059\\n* \u904b\u52d5\u3092\u9811\u5f35\u3063\u3066\u3044\u307e\u3059\\n\\n### CLAS \u3067\u30aa\u30d5\u30a3\u30b9\u30c1\u30a7\u30a2\u3092\u30ec\u30f3\u30bf\u30eb\u3057\u307e\u3057\u305f\\n\\n\u4ee5\u524d\u304b\u3089\u30aa\u30d5\u30a3\u30b9\u30c1\u30a7\u30a2\u306b\u8208\u5473\u306f\u3042\u3063\u305f\u3082\u306e\u306e\u3001\u7d50\u69cb\u9ad8\u3044\u3067\u3059\u3057\u3044\u304d\u306a\u308a\u9ad8\u3044\u3082\u306e\u3092\u8cb7\u3063\u3066\u5931\u6557\u3059\u308b\u306e\u306f\u5acc\u3060\u3063\u305f\u306e\u3067\u30ec\u30f3\u30bf\u30eb\u3067\u8a66\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\u30ec\u30f3\u30bf\u30eb\u3082\u306f\u3058\u3081\u3066\u306a\u306e\u3067\u4e00\u756a\u5b89\u3044 (1,650 \u5186 / \u6708) \u306e\u304b\u3089\u8a66\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n* MS-13 \u30c1\u30a7\u30a2 \u3072\u3058\u7121\u3057 \u30d6\u30e9\u30c3\u30af\\n* https://clas.style/619\\n\\n\u6ce8\u6587\u3057\u3066\u304b\u3089\u5c4a\u304f\u307e\u3067\u306b 2 \u9031\u9593\u4ee5\u4e0a\u304b\u304b\u308a\u307e\u3057\u305f\u3002 Amazon \u3068\u304b\u306e\u7fcc\u65e5\u914d\u9001\u306b\u6163\u308c\u3066\u3044\u305f\u306e\u3067\u3001 2 \u9031\u9593\u4ee5\u4e0a\u304b\u304b\u308b\u3053\u3068\u306b\u9a5a\u304d\u307e\u3057\u305f\u304c\u3001\u305d\u3046\u3044\u3046\u3082\u306e\u304b\u3068\u601d\u3046\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n\u4e00\u756a\u5b89\u3044\u306e\u306b\u3057\u305f\u3082\u306e\u306e\u3001\u5ea7\u308a\u5fc3\u5730\u306f\u4eca\u307e\u3067\u306e\u3088\u308a\u3060\u3044\u3076\u826f\u3044\u3067\u3059\u3002\\n\u4eca\u307e\u3067\u81ea\u5206\u306f\u80cc\u3082\u305f\u308c\u306b\u5bc4\u308a\u304b\u304b\u3063\u3066\u3044\u308b\u611f\u899a\u304c\u3042\u307e\u308a\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u65b0\u3057\u3044\u306e\u3060\u3068\u81ea\u7136\u3068\u8170\u306b\u80cc\u3082\u305f\u308c\u304c\u5f53\u305f\u3063\u3066\u652f\u3048\u3089\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u611f\u3058\u304c\u3057\u307e\u3059\u3002\\n\u3068\u8a00\u3044\u3064\u3064\u3001\u4e00\u756a\u5b89\u3044\u3082\u306e\u306a\u306e\u3067\u3082\u3063\u3068\u3044\u3044\u3084\u3064\u3082\u8a66\u3057\u305f\u3044\u3068\u306f\u601d\u3063\u3066\u3044\u307e\u3059\u3002\u8098\u639b\u3051\u304c\u82e5\u5e72\u307b\u3057\u3044\u3067\u3059\u3002\\n\\n\u30aa\u30d5\u30a3\u30b9\u30c1\u30a7\u30a2\u306e\u4ed6\u306b\u8208\u5473\u3042\u308b\u3082\u306e\u3068\u3057\u3066\u306f\u3001\u30d9\u30c3\u30c9\u3082\u8208\u5473\u3042\u308a\u307e\u3059\u3002\\n\u30d9\u30c3\u30c9\u306e\u30ec\u30f3\u30bf\u30eb\u3082\u3042\u308b\u3088\u3046\u3067\u3059\u3002\u305f\u3060\u30d9\u30c3\u30c9\u306e\u5834\u5408\u306f\u3001\u4eca\u4f7f\u3063\u3066\u308b\u3084\u3064\u3092\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3057\u3001\u30aa\u30d5\u30a3\u30b9\u30c1\u30a7\u30a2\u3088\u308a\u3082\u9762\u5012\u306a\u6c17\u3082\u3057\u307e\u3059\u3002\\n\\nhttps://clas.style/furniture/bed/\\n\\n### \u904b\u52d5\\n\\n\u6709\u7d66\u6d88\u5316\u3067\u6642\u9593\u306b\u4f59\u88d5\u3082\u3042\u308a\u307e\u3059\u3057\u3001\u904b\u52d5\u3092\u9031 5, 6 \u304f\u3089\u3044\u3067\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\u5143\u3005\u98df\u4e8b\u306b\u306f\u6c17\u3092\u4f7f\u3063\u3066\u3044\u3066\u304a\u9152\u3082\u98f2\u307e\u306a\u3044\u3057\u9593\u98df\u3082\u3057\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u5f15\u304d\u3053\u3082\u3063\u3066\u3044\u305f\u3089\u6c17\u3065\u304b\u306c\u3046\u3061\u306b\u7d50\u69cb\u592a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n## \u305d\u306e\u4ed6\u306e\u305d\u306e\u4ed6\\n\\n<LinkCard url=\\"https://zenn.dev/shunsuke_suzuki/scraps/3fa8e603c3bf09\\" />\\n\\n<LinkCard url=\\"https://twitter.com/szkdash/status/1529707316991660032\\" />\\n\\ngo-yaml \u306f\u5225\u306b watch \u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001 v3.0.0 \u306e tag \u304c\u6253\u305f\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u3065\u304d\u307e\u3057\u305f\u3002 v3 \u306f\u9577\u3044\u3053\u3068 tag \u304c\u6253\u305f\u308c\u3066\u306a\u304f\u3066\u4f7f\u3046\u6c17\u306b\u306a\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\\ntag \u304c\u6253\u305f\u308c\u305f\u3068\u3044\u3046\u3053\u3068\u306f stable \u306b\u306a\u3063\u3066\u304d\u3066\u5b89\u5fc3\u3057\u3066\u4f7f\u3048\u308b\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\\nv2 \u3068 v3 \u3067\u3069\u3046\u5909\u308f\u3063\u3066\u308b\u304b\u628a\u63e1\u3057\u3066\u306a\u3044\u306e\u3067\u3001\u8abf\u3079\u3066\u307f\u3066\u3082\u826f\u3044\u304b\u3082\\n\\n<LinkCard url=\\"https://twitter.com/szkdash/status/1529463196062347264\\" />\\n\\nWhiteSource \u304c MEND \u306b\u540d\u79f0\u304c\u5909\u308f\u3063\u305f\u3089\u3057\u3044\u3067\u3059\u3002\\n\\n<LinkCard url=\\"https://twitter.com/szkdash/status/1527834722029965312\\" />\\n\\nhttps://github.com/spf13/afero \u4fbf\u5229\\n\\n<LinkCard url=\\"https://twitter.com/szkdash/status/1527281850355359745\\" />\\n\\nGitHub Actions \u306e pull_request closed event \u3067\u306f workflow \u304c trigger \u3057\u306a\u3044\u3053\u3068\u304c\u3042\u308b\\n\\n> GitHub doesn\u2019t queue the merge commit job for closed PRs; So workflows using on: { pull_request: { types: [\u201cclosed\u201d] } } will not consistently be triggered.\\n\\n<LinkCard url=\\"https://twitter.com/szkdash/status/1523544052008112128\\" />\\n\\nBot \u304c team \u306b\u5bfe\u3057\u3066\u30e1\u30f3\u30b7\u30e7\u30f3\u3059\u308b\u306b\u306f team \u3092 read \u3059\u308b\u6a29\u9650\u304c\u5fc5\u8981\\n\\n<LinkCard url=\\"https://twitter.com/deeeet/status/1527460224189181952\\" />\\n\\nMercari \u306e Security Team \u306e Blog Series \u8aad\u307e\u306d\u3070"},{"id":"/job-change-2022-06","metadata":{"permalink":"/job-change-2022-06","source":"@site/blog/job-change-2022-06.mdx","title":"\u8ee2\u8077\u3057\u307e\u3059","description":"\u8ee2\u8077\u3059\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u305d\u306e\u7d4c\u7def\u3068\u304b\u3092\u66f8\u3053\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002","date":"2022-05-19T10:22:40.000Z","formattedDate":"May 19, 2022","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":17.38,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u8ee2\u8077\u3057\u307e\u3059","date":"2022-05-19T10:22:40.000Z","authors":["suzuki-shunsuke"],"tags":["job","oss"]},"prevItem":{"title":"2022-05 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-05"},"nextItem":{"title":"Pull Request \u3092\u518d\u5ea6 review \u3057\u3066\u307b\u3057\u3044\u5834\u5408\u306f Re-request review \u3092\u3057\u307e\u3057\u3087\u3046","permalink":"/github-re-request-review"}},"content":"import LinkCard from \'@site/src/components/linkcard\';\\n\\n\u8ee2\u8077\u3059\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u305d\u306e\u7d4c\u7def\u3068\u304b\u3092\u66f8\u3053\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## \u73fe\u8077\u3067\u306f\u306a\u306b\u3092\u3084\u3063\u3066\u3044\u305f\u306e\u304b\\n\\n\u73fe\u8077\u3067\u306f Recruit \u3067\u30b9\u30bf\u30c7\u30a3\u30b5\u30d7\u30ea\u53ca\u3073 Quipper Product (Quipper School, Quipper Video) \u306e SRE \u3092\u3084\u3063\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n<LinkCard url=\\"https://brand.studysapuri.jp/career/position/sre\\" />\\n\\n2019-10-01 \u304b\u3089 Quipper Japan Branch \u306e SRE team \u306b Join \u3057\u3001\\nQuipper Japan Branch \u304c 2021-10-01 \u306b Recruit \u306b\u7d71\u5408\u3055\u308c\u3066\u304b\u3089\u306f Recruit \u306e SRE \u3092\u3084\u3063\u3066\u3044\u307e\u3057\u305f\u3002\\n\u7d71\u5408\u3055\u308c\u3066\u304b\u3089\u3082\u643a\u308f\u3063\u3066\u3044\u308b\u30d7\u30ed\u30c0\u30af\u30c8\u3084\u696d\u52d9\u5185\u5bb9\u306f\u7279\u306b\u5909\u308f\u3063\u3066\u306a\u3044\u306e\u3067\u3001 2 \u5e74 9 \u30f6\u6708\u307b\u3069\u5728\u7c4d\u3057\u3066\u3044\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/resume \u306b\u8077\u52d9\u7d4c\u6b74\u66f8\u3092\u7f6e\u3044\u3066\u3044\u308b\u306e\u3067\u305d\u3061\u3089\u3082\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\u3061\u306a\u307f\u306b\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u4eca\u56de\u306e\u8ee2\u8077\u306e\u969b\u306b\u4f5c\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u66f4\u65b0\u3055\u308c\u3066\u3044\u308b\u306e\u306b\u6c17\u3065\u3044\u3066\u81ea\u5206\u306e\u8ee2\u8077\u3092\u3044\u3061\u65e9\u304f\u5bdf\u3057\u305f\u65b9\u3082\u3044\u305f\u3088\u3046\u3067\u3057\u305f\u3002\\n\\nSRE \u3068\u3057\u3066\u69d8\u3005\u306a\u3053\u3068\u3092\u7d4c\u9a13\u3057\u307e\u3057\u305f\u304c\u3001\u7279\u306b\u81ea\u5206\u306f Terraform \u306e CI/CD Pipeline \u306e\u6539\u5584\u306b\u6ce8\u529b\u3057\u3066\u304d\u307e\u3057\u305f\u3002\\n\u305d\u3057\u3066\u305d\u306e\u904e\u7a0b\u3067\u69d8\u3005\u306a OSS \u3092\u958b\u767a\u3057\u3066\u304d\u307e\u3057\u305f\u3002\\n\u8a73\u7d30\u306f\u30d6\u30ed\u30b0\u3084\u8077\u52d9\u7d4c\u6b74\u66f8\u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u5272\u611b\u3057\u307e\u3059\u3002\\n\\n\u30b3\u30ed\u30ca\u306e\u6d41\u884c\u306b\u4f34\u3044\u9014\u4e2d\u304b\u3089\u4eca\u306b\u81f3\u308b\u307e\u3067\u30d5\u30eb\u30ea\u30e2\u30fc\u30c8\u306b\u306a\u308a\u3001\u30d5\u30eb\u30ea\u30e2\u30fc\u30c8\u3060\u3063\u305f\u671f\u9593\u306e\u307b\u3046\u304c\u9577\u3044\u3067\u3059\u3002\\n\u30d5\u30eb\u30ea\u30e2\u30fc\u30c8\u306b\u306a\u3063\u3066\u304b\u3089\u306f\u30aa\u30d5\u30a3\u30b9\u306b\u306f\u30ef\u30af\u30c1\u30f3\u306e\u8077\u57df\u63a5\u7a2e\u3092\u9664\u304d 1 \u56de\u3057\u304b\u884c\u3063\u3066\u306a\u3044\u3067\u3059\u3057\u3001\\n\u540c\u3058\u30c1\u30fc\u30e0\u3067\u3082\u81ea\u5206\u306e\u5f8c\u306b\u5165\u793e\u3057\u305f\u65b9\u3068\u306f\u76f4\u63a5\u4f1a\u3063\u305f\u3053\u3068\u306f\u306a\u3044\u3067\u3059\u3002\\n\u3067\u3059\u304c\u3001 Slack \u3084 Google Meet \u306a\u3069\u3067\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u53d6\u3063\u3066\u3044\u305f\u306e\u3067\u81ea\u5206\u3068\u3057\u3066\u306f\u7279\u306b\u4e0d\u4fbf\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\\n### \u30b9\u30bf\u30b5\u30d7 SRE \u306e\u3059\u3059\u3081\\n\\nIT \u306e\u529b\u3067\u6559\u80b2\u306b\u5909\u9769\u3092\u8d77\u3053\u3057\u3001\u5b66\u3073\u305f\u3044\u4eba\u304c\u3088\u308a\u81ea\u7531\u306b\u5b66\u3079\u308b\u4e16\u754c\u3092\u76ee\u6307\u3059\u30b9\u30bf\u30c7\u30a3\u30b5\u30d7\u30ea\u53ca\u3073 Quipper Product \u306b\u95a2\u308f\u308c\u3066\u5b09\u3057\u304f\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\u8ee2\u8077\u3059\u308b\u81ea\u5206\u304c\u8a00\u3046\u306e\u3082\u306a\u3093\u3067\u3059\u304c\u3001\u30b9\u30bf\u30b5\u30d7\u306e SRE \u30c1\u30fc\u30e0\u306f\u672c\u5f53\u306b\u6075\u307e\u308c\u305f\u74b0\u5883\u3067\u3059\u3002\u8ee2\u8077\u3092\u8003\u3048\u3066\u3044\u308b\u4eba\u306f\u662f\u975e\u5019\u88dc\u306b\u5165\u308c\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u30b9\u30bf\u30b5\u30d7 SRE \u306e\u826f\u3044\u3068\u3053\u308d:\\n\\n* \u540c\u50da(SRE \u4ee5\u5916\u3082\u542b\u3080)\u304c\u512a\u79c0\\n  * \u30d6\u30ed\u30b0\u3082\u662f\u975e\u8aad\u3093\u3067\u304f\u3060\u3055\u3044: https://blog.studysapuri.jp/\\n* \u73fe\u72b6\u306b\u6e80\u8db3\u3059\u308b\u3053\u3068\u306a\u304f\u3001\u65e5\u3005\u6539\u5584\u306b\u53d6\u308a\u7d44\u3093\u3067\u3044\u308b\\n  * \u6280\u8853\u7684\u306a\u90e8\u5206\u3060\u3067\u306a\u304f\u3001 MTG \u306a\u3069\u306e\u3042\u308a\u65b9\u306a\u3069\u3082\u65e5\u3005\u898b\u76f4\u3057\u3066\u3044\u308b\\n  * \u632f\u308a\u8fd4\u308a\u3092\u3057\u3001\u8ab2\u984c\u3068\u6539\u5584\u6848\u3092\u8003\u3048\u5b9f\u884c\u3059\u308b\u3068\u3044\u3046\u30b5\u30a4\u30af\u30eb\u3092\u65e5\u3005\u56de\u3057\u3066\u3044\u308b\\n* \u81ea\u5df1\u5b8c\u7d50\u306a\u30d7\u30ed\u30c0\u30af\u30c8\u30c1\u30fc\u30e0\u306e\u305f\u3081\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u958b\u767a\u3092\u884c\u3063\u3066\u3044\u308b\\n  * SRE \u304c\u30d7\u30ed\u30c0\u30af\u30c8\u30c1\u30fc\u30e0\u306b\u4f9d\u983c\u3092\u53d7\u3051\u3066\u30a4\u30f3\u30d5\u30e9\u3092\u69cb\u7bc9\u3059\u308b\u306e\u3067\u306f\u306a\u3044\\n* \u88c1\u91cf\u304c\u5927\u304d\u304f\u3001\u81ea\u5206\u3067\u8ab2\u984c\u3092\u898b\u3064\u3051\u3066\u6539\u5584\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\\n  * \u306a\u305c\u305d\u308c\u304c\u5fc5\u8981\u306a\u306e\u304b Issue \u3092\u66f8\u304f\u306a\u3069\u3001\u8aac\u660e\u8cac\u4efb\u306f\u4f34\u3046\u304c\u3001\u3061\u3083\u3093\u3068\u8aac\u660e\u3067\u304d\u308c\u3070 No \u3068\u306f\u3042\u307e\u308a\u8a00\u308f\u308c\u306a\u3044\\n  * \u81ea\u8d70\u51fa\u6765\u306a\u3044\u4eba\u306b\u306f\u5411\u304d\u307e\u305b\u3093\\n* \u60c5\u5831\u304c\u6bd4\u8f03\u7684\u30aa\u30fc\u30d7\u30f3\\n  * Slack \u306e Private channel \u3084 DM \u3067\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u307b\u307c\u306a\u3044\\n  * GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u3082\u30b9\u30bf\u30b5\u30d7\u95a2\u9023\u306e\u3082\u306e\u306a\u3089\u307b\u307c\u5168\u90e8\u898b\u308c\u308b\\n  * GitHub \u3092\u691c\u7d22\u3059\u308c\u3070\u3060\u3044\u305f\u3044\u60c5\u5831\u304c\u898b\u3064\u304b\u308b\\n* \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u6587\u5316\u3082\u3042\u308b\\n* Postomortem \u3084 Design Doc, Production Readiness Check, SLI/SLO \u3068\u3044\u3063\u305f SRE \u306e\u57fa\u672c\u7684\u306a\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u304c\u65e2\u306b\u5b9a\u7740\u3057\u3066\u3044\u308b\\n* \u30b5\u30fc\u30d3\u30b9\u304c\u5b89\u5b9a\u3057\u3066\u3044\u308b\\n  * \u30b5\u30fc\u30d3\u30b9\u306e\u6027\u8cea\u4e0a\u30fb SNS \u3067\u30d0\u30ba\u3063\u3066\u6025\u306b\u30b9\u30d1\u30a4\u30af\u3059\u308b\u3088\u3046\u306a\u3053\u3068\u304c\u307b\u307c\u306a\u3044\\n  * \u57fa\u672c\u7684\u306b\u306f k8s \u306e Cluster Autoscaler \u3084 Horizontal Pod Autoscaler \u3067\u5bfe\u5fdc\u3067\u304d\u308b(\u9577\u671f\u7684\u306a\u30b5\u30fc\u30d3\u30b9\u62e1\u5927\u306e\u305f\u3081\u306b\u4ed6\u306b\u3082\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u3059)\\n  * \u969c\u5bb3\u306f\u5c11\u306a\u304f\u3001\u6df1\u591c\u3084\u4f11\u65e5\u306b\u7a3c\u50cd\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3053\u3068\u3082\u5c11\u306a\u3044\u306e\u3067\u3001 QOL \u3092\u640d\u306a\u308f\u306a\u3044\\n\\nhttps://brand.studysapuri.jp/career/position/sre \u306b\u3082\u3044\u3044\u3053\u3068\u304c\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u3001\u8aad\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u3042\u3068\u3001 Security \u306b\u7279\u5316\u3057\u305f\u30dd\u30b8\u30b7\u30e7\u30f3\u3082\u3042\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3082\u8208\u5473\u304c\u3042\u308c\u3070\u662f\u975e\u3002\\n\\n<LinkCard url=\\"https://brand.studysapuri.jp/career/position/product-security-engineer\\" />\\n\\n## \u8ee2\u8077\u3078\u306e\u6d41\u308c\\n\\n\u8ee2\u8077\u306e\u304d\u3063\u304b\u3051\u306f\u3001 [@deeeet](https://twitter.com/deeeet) \u3055\u3093\u304b\u3089 Twitter DM \u3067\u58f0\u3092\u304b\u3051\u3066\u3044\u305f\u3060\u3044\u305f\u3053\u3068\u3067\u3057\u305f\u3002\\ndeeeet \u3055\u3093\u3068\u306f\u904e\u53bb\u306b 2 \u56de\u307b\u3069\u9762\u8b58\u304c\u3042\u308a\u3001\u6700\u521d\u306f\u300c[\u7a81\u6483 Terraform](https://twitter.com/deeeet/status/1192410426413182977)\u300d\u30012 \u56de\u76ee\u306f [Open Policy Agent Rego Knowledge Sharing Meetup](https://mercari.connpass.com/event/211073/) \u3068\u3044\u3046\u30aa\u30f3\u30e9\u30a4\u30f3 LT \u4f1a\u3067\u3057\u305f\u3002\\n\u305f\u3060\u3001\u9762\u8b58\u304c\u3042\u308b\u3068\u306f\u3044\u3048 deeeet \u3055\u3093\u304c\u81ea\u5206\u306e\u3053\u3068\u3092\u8a8d\u8b58\u3057\u3066\u3044\u308b\u3068\u306f\u601d\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u9a5a\u304d\u307e\u3057\u305f\u3002\\n\u3053\u3053\u4f55\u5e74\u304b OSS \u306e\u958b\u767a\u3084 blog \u306e\u57f7\u7b46\u306a\u3069\u3092\u7cbe\u529b\u7684\u306b\u884c\u3063\u3066\u304d\u305f\u306e\u304c\u529f\u3092\u594f\u3057\u305f\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\nDM \u3067\u58f0\u3092\u304b\u3051\u3066\u3044\u305f\u3060\u3044\u3066\u304b\u3089\u76f4\u3050\u306b\u30ab\u30b8\u30e5\u30a2\u30eb\u9762\u8ac7\u3092\u3057\u3066\u9802\u304d\u3001\u305d\u306e\u5f8c\u76f4\u3050\u63a1\u7528\u30da\u30fc\u30b8\u304b\u3089\u5fdc\u52df\u3057\u307e\u3057\u305f\u3002\\n\u8077\u52d9\u7d4c\u6b74\u66f8\u306e\u8a00\u8a9e\u306e\u6307\u5b9a\u306f\u7279\u306b\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\u63a1\u7528\u30da\u30fc\u30b8\u306b\u65e5\u672c\u8a9e\u306e JD \u304c\u306a\u3044\u3053\u3068\u304b\u3089\u3001\u82f1\u8a9e\u3067\u66f8\u304d\u307e\u3057\u305f\u3002\\nmarkdown \u3067\u66f8\u3044\u3066 [md-to-pdf](https://github.com/simonhaenisch/md-to-pdf) \u3067 PDF \u306b\u5909\u63db\u3057\u307e\u3057\u305f\u3002\\nmarkdown \u3067\u8077\u52d9\u7d4c\u6b74\u66f8\u3092\u66f8\u3044\u305f\u306e\u306f\u306f\u3058\u3081\u3066\u3067\u3059\u304c\u3001\u81ea\u5206\u306b\u3068\u3063\u3066\u306f Word \u306a\u3069\u3068\u6bd4\u3079\u3066\u305a\u3063\u3068\u66f8\u304d\u3084\u3059\u304b\u3063\u305f\u3067\u3059\u3002\\n\\n<LinkCard url=\\"https://github.com/suzuki-shunsuke/resume\\" />\\n\\n\u81ea\u5206\u306f\u4eca\u56de\u306e\u3082\u542b\u3081\u3066\u904e\u53bb\u306b 3 \u56de\u8ee2\u8077\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001\\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u4ecb\u3055\u305a\u306b\u76f4\u63a5\u5fdc\u52df\u3057\u305f\u306e\u306f\u306f\u3058\u3081\u3066\u3067\u3057\u305f\u3002\\n\u904e\u53bb 2 \u56de\u306e\u8ee2\u8077\u6d3b\u52d5\u306f\u8272\u3005\u306a\u4f1a\u793e\u306e\u52df\u96c6\u8981\u9805\u306b\u76ee\u3092\u901a\u3057\u3066\u8907\u6570\u793e\u306e\u9762\u63a5\u3092\u53d7\u3051\u3066\u65e5\u7a0b\u3092\u8abf\u6574\u3057\u3066\u9762\u63a5\u3092\u53d7\u3051\u306b\u884c\u3063\u3066\u3068\u3001\u306a\u304b\u306a\u304b\u7cbe\u795e\u7684\u306b\u3082\u8089\u4f53\u7684\u306b\u3082\u5927\u5909\u3067\u3057\u305f\u3002\\n\u4e00\u65b9\u3001\u4eca\u56de\u306f 1 \u793e\u3057\u304b\u53d7\u3051\u306a\u304b\u3063\u305f\u3053\u3068\u3001\u307e\u305f\u3053\u306e\u3054\u6642\u4e16\u306a\u306e\u3067\u9762\u63a5\u3082\u5168\u3066\u30ea\u30e2\u30fc\u30c8\u3060\u3063\u305f\u3053\u3068\u3082\u3042\u308a\u3060\u3044\u3076\u8ca0\u62c5\u306f\u5c11\u306a\u304b\u3063\u305f\u3067\u3059\u3002\\n\\n## \u3069\u3053\u306b\u8ee2\u8077\u3059\u308b\u306e\u304b\\n\\n2022-07-01 \u304b\u3089\u3001 Mercari \u306e [Platform Group](https://apply.workable.com/mercari/j/111722DA96/) \u306b Join \u3057\u307e\u3059\u3002\u307e\u30601\u30f6\u6708\u4ee5\u4e0a\u5148\u3067\u3059\u304c\u3001\u4eca\u304b\u3089\u697d\u3057\u307f\u3067\u3059\u3002\\n\\nMercari \u306b\u306f\u512a\u79c0\u306a\u30a8\u30f3\u30b8\u30cb\u30a2\u304c\u96c6\u307e\u3063\u3066\u307e\u3059\u3057\u3001 [Platform Group \u306e Blog Series](https://twitter.com/deeeet/status/1482879967977684996) \u3092\u8aad\u3093\u3067\u6280\u8853\u7684\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\u30f3\u30b0\u306a\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u3066\u9762\u767d\u305d\u3046\u3060\u3068\u611f\u3058\u307e\u3057\u305f\u3002\\n\u81ea\u5206\u304c\u73fe\u8077\u3067\u53d6\u308a\u7d44\u3093\u3067\u3044\u305f Terraform CI/CD Pipeline \u306a\u3069\u306e\u6539\u5584\u306b\u3082\u901a\u3058\u308b\u90e8\u5206\u304c\u3042\u308a\u3001\u81ea\u5206\u306e\u7d4c\u9a13\u30fb\u5f37\u307f\u3092\u6d3b\u304b\u3057\u3064\u3064\u65b0\u3057\u3044\u3053\u3068\u306b\u6311\u6226\u3067\u304d\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\nBlog Series \u3084 OSS \u306e\u516c\u958b\u306a\u3069\u3001\u793e\u5916\u306b\u3082\u6280\u8853\u3092\u30aa\u30fc\u30d7\u30f3\u306b\u3057\u3066\u3044\u308b\u306e\u3082\u826f\u3044\u6587\u5316\u3060\u3068\u611f\u3058\u307e\u3057\u305f\u3002\\n\\n\u73fe\u8077\u3067\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u30a8\u30f3\u30b8\u30cb\u30a2\u30ea\u30f3\u30b0\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u304f\u4e2d\u3067\u3001\\n\u62bd\u8c61\u5316\u3055\u308c\u305f UI/UX \u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u30fb\u751f\u7523\u6027\u3092\u640d\u306a\u308f\u305a\u306b\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u62c5\u4fdd\u3059\u308b\u3053\u3068\u304c\u3068\u3066\u3082\u91cd\u8981\u304b\u3064\u96e3\u3057\u3044\u8ab2\u984c\u3060\u3068\u611f\u3058\u3066\u3044\u3066\u3001\\n[Developer Experience at Mercari](https://engineering.mercari.com/en/blog/entry/20220125-developer-experience-at-mercari/) \u3084 [Securing Terraform monorepo CI](https://engineering.mercari.com/en/blog/entry/20220121-securing-terraform-monorepo-ci/) \u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u5171\u611f\u3057\u307e\u3057\u305f\u3002\\n\\n\u4f59\u8ac7\u3067\u3059\u304c\u3001\u3068\u3042\u308b\u65b9\u304b\u3089\u8ee2\u8077\u3059\u308b\u306a\u3089 Hashicorp \u306b\u8ee2\u8077\u3057\u3066\u6b32\u3057\u3044\u3068\u8a00\u308f\u308c\u307e\u3057\u305f\u3002\\n\u81ea\u5206\u306e\u3053\u308c\u307e\u3067\u306e OSS \u306e\u958b\u767a\u306e\u7d4c\u9a13\u3092\u6d3b\u304b\u3057\u3001\u3088\u308a\u591a\u304f\u306e\u4eba\u30fb\u7d44\u7e54\u306b\u4f7f\u3063\u3066\u3082\u3089\u3048\u308b OSS \u306e\u958b\u767a\u306b\u643a\u308f\u3063\u3066\u307b\u3057\u3044(\u305d\u306e\u307b\u3046\u304c\u3088\u308a\u5927\u304d\u306a\u30d0\u30ea\u30e5\u30fc\u304c\u51fa\u305b\u308b)\u3068\u3044\u3046\u610f\u56f3\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\\n\u5177\u4f53\u7684\u306a\u793e\u540d\u304c\u51fa\u3066\u304f\u308b\u3068\u306f\u601d\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3073\u3063\u304f\u308a\u3057\u307e\u3057\u305f\u3002\\n\u3069\u3053\u306b\u6240\u5c5e\u3059\u308b\u306b\u305b\u3088\u3001\u3088\u308a\u591a\u304f\u306e\u4eba\u30fb\u7d44\u7e54\u306b\u4f7f\u3063\u3066\u3082\u3089\u3048\u308b\u3088\u3046\u306a OSS \u306e\u958b\u767a\u3092\u3057\u3066\u3044\u304d\u305f\u3044\u3067\u3059\u306d\u3002\\n\\n## \u304a\u307e\u3051: OSS \u6d3b\u52d5\u306e\u632f\u308a\u8fd4\u308a\\n\\n\u8ee2\u8077\u306e\u8a71\u3068\u306f\u95a2\u4fc2\u306a\u3044\u3067\u3059\u304c\u3001\u3064\u3044\u3067\u306b\u3053\u3053\u6570\u5e74\u306e OSS \u6d3b\u52d5\u306a\u3069\u306b\u3064\u3044\u3066\u3082\u632f\u308a\u8fd4\u308a\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n[![GitHub followers](https://img.shields.io/github/followers/suzuki-shunsuke.svg?style=social&label=Follow&maxAge=2592000)](https://github.com/suzuki-shunsuke?tab=followers)\\n\\n2022-05-19 \u6642\u70b9\u306e\u72b6\u6cc1\\n\\n[GitHub Followers: 139](https://github.com/suzuki-shunsuke?tab=followers)\\n\\n![image](https://user-images.githubusercontent.com/13323303/169187254-97423eb7-cdbf-485c-bcb5-6852c89b8669.png)\\n\\n\u3084\u306f\u308a Star \u6570\u4e0a\u4f4d 3 \u3064\u306f\u601d\u3044\u5165\u308c\u304c\u3042\u308a\u307e\u3059\u3057\u3001 [github-comment](https://github.com/suzuki-shunsuke/github-comment) \u3084 [ci-info](https://github.com/suzuki-shunsuke/ci-info) \u3082\u4fbf\u5229\u306a\u306e\u3067\u3082\u3063\u3068\u8a55\u4fa1\u3055\u308c\u3066\u307b\u3057\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\u8272\u3005\u306a\u3082\u306e\u3092\u4f5c\u3063\u3066\u304d\u307e\u3057\u305f\u304c\u3001\u3053\u3053\u3067\u306f\u3053\u308c\u3089\u306b\u7d5e\u3063\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n### aqua\\n\\n\u4e00\u756a\u601d\u3044\u5165\u308c\u304c\u3042\u308b\u306e\u306f [aqua](https://aquaproj.github.io/) \u3067\u3059\u3002\\n\u6c4e\u7528\u7684\u306a CLI \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30c4\u30fc\u30eb\u306f\u8272\u3005\u3042\u308a\u305d\u3046\u3067\u610f\u5916\u3068\u3042\u307e\u308a\u3042\u308a\u307e\u305b\u3093(\u591a\u5206)\u3002\\n\u6709\u540d\u306a\u306e\u306f [asdf](https://asdf-vm.com/) \u304f\u3089\u3044\u3067\u3059\u304c\u3001\u3053\u308c\u306f\u81ea\u5206\u304c\u6c42\u3081\u3066\u3044\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f ([Nix](https://nixos.org/) \u3068\u304b\u3082\u3042\u308b\u3051\u3069\u3001\u826f\u304f\u77e5\u308a\u307e\u305b\u3093) \u3002\\n\\n\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u56fa\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u9055\u3044\u306b\u3088\u308b\u30c8\u30e9\u30d6\u30eb\u3092\u8d77\u3053\u3089\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\naqua \u306f\u4f7f\u3046\u306e\u304c\u3068\u3066\u3082\u7c21\u5358\u3067\u3001 (symbolic link \u3055\u3048\u4f5c\u3089\u308c\u3066\u3044\u308c\u3070) \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306b\u81ea\u52d5\u3067\u6307\u5b9a\u3057\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5207\u308a\u66ff\u308f\u308a\u307e\u3059\u3002\\naqua g \u306b\u3088\u308b\u691c\u7d22\u306f\u4f7f\u3044\u52dd\u624b\u304c\u3088\u3044\u3067\u3059\u3002 GitHub Actions \u3067\u7c21\u5358\u306b\u5c0e\u5165\u304c\u3067\u304d\u308b\u3088\u3046 Action \u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\naqua \u306f Renovate \u306e Preset Config \u3092\u63d0\u4f9b\u3057\u3066\u304a\u308a\u3001 Renovate \u3092\u4f7f\u3063\u3066\u7c21\u5358\u306b update \u306e\u81ea\u52d5\u5316\u304c\u3067\u304d\u307e\u3059\u3002\\naqua \u306f Renovate \u3092\u6700\u3082\u4e0a\u624b\u304f\u6d3b\u7528\u3057\u305f OSS \u306e\u4e00\u3064\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\naqua \u306b\u306f Registry \u3068\u3044\u3046 Ecosystem \u304c\u3042\u308a\u307e\u3059\u3002\\naqua \u672c\u4f53\u3078\u306e contribution \u306b\u306f\u305d\u308c\u306a\u308a\u306e\u30cf\u30fc\u30c9\u30eb\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001 [aqua-registry](https://github.com/aquaproj/aqua-registry) \u3068\u3044\u3046\u516c\u5f0f\u306e Registry \u306b\u306f\u7c21\u5358\u306b Contribution \u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n2022-05-19 \u6642\u70b9\u3067\u3042\u308a\u304c\u305f\u3044\u3053\u3068\u306b\u81ea\u5206\u4ee5\u5916\u306b [13 \u4eba\u306e\u65b9\u306b Contribution \u9802\u3044\u3066\u3044\u307e\u3059](https://github.com/aquaproj/aqua-registry/graphs/contributors)\u3002\\n\u672c\u4f53\u3068\u306f\u72ec\u7acb\u3057\u305f\u62e1\u5f35\u6a5f\u69cb\u3092\u6301\u3063\u305f OSS \u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3053\u3068\u306b\u3082\u6e80\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\\n\\naqua-registry \u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30c4\u30fc\u30eb\u306e\u6570\u306f\u3001 2022-05-19 \u73fe\u5728 [asdf-plugins](https://github.com/asdf-vm/asdf-plugins) \u3092\u8d85\u3048\u307e\u3057\u305f\u3002\\n\u3060\u304b\u3089 aqua \u306e\u307b\u3046\u304c\u512a\u308c\u3066\u3044\u308b\u3068\u3044\u3046\u8a71\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001 asdf \u3068\u540c\u7b49\u4ee5\u4e0a\u306b\u591a\u304f\u306e\u30c4\u30fc\u30eb\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3068\u306f\u8a00\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n```console\\n$ asdf plugin list all | wc -l   \\n     470\\n\\n$ aqua list | wc -l\\n     499\\n```\\n\\naqua \u306f\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u7d99\u7d9a\u7684 update \u3092\u975e\u5e38\u306b\u5bb9\u6613\u306b\u3057\u307e\u3059\u3002\\n\u30c4\u30fc\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5c55\u958b\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3088\u3046\u306a\u5b9a\u578b\u7684\u306a\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3057\u3001\u3044\u3064\u307e\u3067\u3082\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u4f7f\u308f\u308c\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n\u307e\u305f\u3001 Go \u3067 GitHub Actions \u306e Action \u3092\u4f5c\u308a\u305f\u3044\u3068\u884c\u3063\u305f\u5834\u5408\u306b\u3001\u614b\u3005 Action \u3068\u3057\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u305b\u305a\u306b aqua \u3067 install \u3057\u3066 run step \u3067\u5b9f\u884c\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3082\u3084\u308a\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\\n\u4f8b\u3048\u3070\u81ea\u5206\u306f [renovate-issue-action](https://github.com/suzuki-shunsuke/renovate-issue-action) \u3068\u3044\u3046 GitHub Actions \u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u305f CLI \u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u304c\u3001\\n\u3053\u308c\u3082\u614b\u3005 Action \u3068\u3057\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u305b\u305a\u306b aqua \u3067 install \u3057\u3066 run step \u3067\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\ne.g.\\n\\n```yaml\\n- uses: aquaproj/aqua-installer@v1.0.0\\n  with:\\n    aqua_version: v1.6.0\\n- run: renovate-issue-action\\n```\\n\\n### tfaction\\n\\n[tfaction](https://github.com/suzuki-shunsuke/tfaction) \u306f GitHub Actions \u3067 Terraform \u306e CI/CD Pipeline \u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e Action \u306e Collection \u3067\u3059\u3002\\n\u4fbf\u5229\u306a\u5358\u4f53\u306e Action \u306f\u8272\u3005\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001 workflow \u5168\u4f53\u3092\u30ab\u30d0\u30fc\u3059\u308b\u3082\u306e\u306f\u3042\u307e\u308a\u4ed6\u306b\u306a\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\u3053\u3046\u3044\u3046 CI/CD Pipeline \u306f\u3042\u307e\u308a\u30aa\u30fc\u30d7\u30f3\u306b\u3055\u308c\u306a\u3044\u9762\u3082\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u305d\u308c\u3092 OSS \u306b\u3067\u304d\u305f\u3053\u3068\u306f\u6709\u610f\u7fa9\u306a\u3053\u3068\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n### tfcmt\\n\\n[tfcmt](https://github.com/suzuki-shunsuke/tfcmt) \u306f CI \u3067\u5b9f\u884c\u3057\u305f terraform plan, apply \u306e\u7d50\u679c\u3092 Pull Request \u306b\u5206\u304b\u308a\u3084\u3059\u304f\u901a\u77e5\u3059\u308b CLI \u30c4\u30fc\u30eb\u3067\u3059\u3002\\n[tfnotify](https://github.com/mercari/tfnotify) \u306e\u30d5\u30a9\u30fc\u30af\u3067\u3059\u304c\u3001 GitHub \u3078\u306e\u901a\u77e5\u306b\u7279\u5316\u3059\u308b\u4ee3\u308f\u308a\u306b\u69d8\u3005\u306a\u6a5f\u80fd\u6539\u5584\u3092\u5165\u308c\u3066\u3044\u307e\u3059\u3002\\nGitHub \u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070 tfcmt \u3092\u500b\u4eba\u7684\u306b\u306f\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002\\nOSS \u306f\u6c17\u306b\u5165\u3089\u306a\u3051\u308c\u3070\u30d5\u30a9\u30fc\u30af\u3059\u308c\u3070\u3044\u3044\u3068\u306f\u3088\u304f\u8a00\u3063\u305f\u3082\u306e\u3067\u3059\u304c(?)\u3001\u5b9f\u969b\u306b\u30d5\u30a9\u30fc\u30af\u3057\u3066\u500b\u4eba\u3067\u3053\u3053\u307e\u3067\u958b\u767a\u3059\u308b\u3068\u306f\u3001\u6211\u306a\u304c\u3089\u3088\u304f\u3084\u3063\u305f\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n### github-comment\\n\\n[github-comment](https://github.com/suzuki-shunsuke/github-comment) \u306f Pull Request, Issue \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u3057\u305f\u308a\u30b3\u30e1\u30f3\u30c8\u3092\u975e\u8868\u793a\u306b\u3057\u305f\u308a\u3059\u308b CLI \u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\u4f7f\u3044\u65b9\u6b21\u7b2c\u3067\u3059\u304c\u3001 CI \u3092\u3088\u308a\u30e6\u30fc\u30b6\u30fc\u30d5\u30ec\u30f3\u30c9\u30ea\u30fc\u306b\u3057\u3001 Developer \u3068 DevOps Engineer \u306e\u53cc\u65b9\u306e\u751f\u7523\u6027\u3092\u9ad8\u3081\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\\n[github-comment \u3067 PR \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u3057\u3066 CI \u306e\u7d50\u679c\u3092\u5206\u304b\u308a\u3084\u3059\u304f\u3059\u308b](https://zenn.dev/shunsuke_suzuki/articles/improve-cicd-with-github-comment)\\n\\n### ci-info\\n\\n[ci-info](https://github.com/suzuki-shunsuke/ci-info) \u306f\u5730\u5473\u306a\u30c4\u30fc\u30eb\u3067\u3059\u304c\u3001 CI \u306b\u95a2\u9023\u3057\u305f\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3057\u305f\u308a\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u51fa\u529b\u3059\u308b CLI \u30c4\u30fc\u30eb\u3067\u3059\u3002\\nCI \u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u3068\u3001 push event \u306b\u95a2\u9023\u3059\u308b Pull Request \u3068\u304b\u3001 Pull Request \u306e label \u306e list \u3068\u304b\u3001 Pull Request \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7\u3068\u304b\u3001 Pull Request \u306e Author \u3068\u304b\u6b32\u3057\u304f\u306a\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u3046\u3044\u3063\u305f\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u30b3\u30fc\u30c9\u3092\u6bce\u56de\u66f8\u304f\u306e\u306f\u5730\u5473\u306b\u9762\u5012\u3067\u3059\u3002\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u3068\u304b\u3082\u8003\u3048\u308b\u3068\u306a\u304a\u3055\u3089\u3067\u3059\u3002\\n\u307e\u305f\u3001 CircleCI \u3084 GitHub Actions \u306a\u3069\u8907\u6570\u306e CI Platform \u306b\u5bfe\u5fdc\u3057\u3066\u3044\u3066\u3001\u305d\u308c\u3089\u306e\u9055\u3044\u3092\u5438\u53ce\u3059\u308b\u610f\u5473\u5408\u3044\u3082\u3042\u308a\u307e\u3059\u3002\\n\\n## \u3055\u3044\u3054\u306b\\n\\n\u4ee5\u4e0a\u3001\u73fe\u8077\u3067\u3084\u3063\u3066\u304d\u305f\u3053\u3068\u3001\u8ee2\u8077\u306e\u7d4c\u7def\u3001\u3053\u3053\u6570\u5e74\u3084\u3063\u3066\u304d\u305f OSS \u958b\u767a\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3057\u305f\u3002"},{"id":"/github-re-request-review","metadata":{"permalink":"/github-re-request-review","source":"@site/blog/github-re-request-review.mdx","title":"Pull Request \u3092\u518d\u5ea6 review \u3057\u3066\u307b\u3057\u3044\u5834\u5408\u306f Re-request review \u3092\u3057\u307e\u3057\u3087\u3046","description":"Pull Request \u3092\u518d\u5ea6 review \u3057\u3066\u307b\u3057\u3044\u5834\u5408\u306b\u306f\u3001 mention \u3064\u304d\u3067\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001","date":"2022-05-08T06:47:40.000Z","formattedDate":"May 8, 2022","tags":[{"label":"practice","permalink":"/tags/practice"}],"readingTime":1.245,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Pull Request \u3092\u518d\u5ea6 review \u3057\u3066\u307b\u3057\u3044\u5834\u5408\u306f Re-request review \u3092\u3057\u307e\u3057\u3087\u3046","date":"2022-05-08T06:47:40.000Z","authors":["suzuki-shunsuke"],"tags":["practice"]},"prevItem":{"title":"\u8ee2\u8077\u3057\u307e\u3059","permalink":"/job-change-2022-06"},"nextItem":{"title":"2022-04 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-04"}},"content":"import LinkCard from \'@site/src/components/linkcard\';\\n\\nPull Request \u3092\u518d\u5ea6 review \u3057\u3066\u307b\u3057\u3044\u5834\u5408\u306b\u306f\u3001 mention \u3064\u304d\u3067\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\\nRe-request review \u3092\u3057\u307e\u3057\u3087\u3046\u3002\\nGitHub \u306b\u306f\u518d\u5ea6 review \u4f9d\u983c\u3059\u308b\u305f\u3081\u306e\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n![image](https://user-images.githubusercontent.com/13323303/167285404-c9a1a1ee-1a81-41b3-9b68-1a5dc0fc95f3.png)\\n\\n<LinkCard url=\\"https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/about-pull-request-reviews#re-requesting-a-review\\" />\\n\\nmention \u3064\u304d\u306e\u30b3\u30e1\u30f3\u30c8\u3067\u306f\u3001\u4e00\u5ea6\u901a\u77e5\u3092\u898b\u9003\u3057\u305f\u308a\u3001\u5f8c\u3067\u5bfe\u5fdc\u3057\u3088\u3046\u3068\u601d\u3063\u3066\u6642\u9593\u304c\u7d4c\u3063\u3066\u3057\u307e\u3063\u305f\u5834\u5408\u306b\u3001\\n\u5fd8\u308c\u3089\u308c\u3084\u3059\u3044\u3068\u3044\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\\n\\nRe-request review \u3092\u4f7f\u3046\u3068 mention \u540c\u69d8\u306b\u901a\u77e5\u304c\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u901a\u77e5\u304c\u884c\u304f\u306e\u306b\u52a0\u3048\u3001 review \u5f85\u3061\u306e pull request \u3092\u691c\u7d22\u3067\u7d5e\u308a\u8fbc\u3081\u305f\u308a\u3001\u81ea\u5206\u306e review \u5f85\u3061\u306e pull request \u3092\u4e00\u89a7\u3067\u304d\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u81ea\u5206\u306e review \u5f85\u3061\u306e pull request \u4e00\u89a7: https://github.com/pulls/review-requested\\n\\n\u691c\u7d22\u3067\u7d5e\u308a\u8fbc\u307f\\n\\n* Awaiting review from you\\n* Awaiting review from you or your team\\n\\n![image](https://user-images.githubusercontent.com/13323303/167285469-59caf353-ecc8-4f59-82eb-220077254cea.png)\\n\\n\u307e\u305f\u3001 Slack \u306e integration \u3067\u5b9a\u671f\u7684\u306b\u901a\u77e5\u3092\u98db\u3070\u3057\u3066\u30ea\u30de\u30a4\u30f3\u30c9\u3059\u308b\u3053\u3068\u3067\u3001\u5fd8\u308c\u308b\u306e\u3092\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"},{"id":"/what-i-did-2022-04","metadata":{"permalink":"/what-i-did-2022-04","source":"@site/blog/what-i-did-2022-04.md","title":"2022-04 \u632f\u308a\u8fd4\u308a","description":"\u4ed5\u4e8b","date":"2022-05-05T05:16:55.000Z","formattedDate":"May 5, 2022","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":4.495,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2022-04 \u632f\u308a\u8fd4\u308a","date":"2022-05-05T05:16:55.000Z","authors":["suzuki-shunsuke"],"tags":["job","oss"]},"prevItem":{"title":"Pull Request \u3092\u518d\u5ea6 review \u3057\u3066\u307b\u3057\u3044\u5834\u5408\u306f Re-request review \u3092\u3057\u307e\u3057\u3087\u3046","permalink":"/github-re-request-review"},"nextItem":{"title":"2022-03 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-03"}},"content":"## \u4ed5\u4e8b\\n\\n* GitHub Discussions \u306e\u691c\u8a3c\\n* renovate-issue-action \u306e\u5c0e\u5165\\n* tfcmt \u3067 patch option \u306e\u6709\u52b9\u5316\\n* etc\\n\\nGitHub Discussions \u306b\u4ed5\u4e8b\u306e\u30ca\u30ec\u30c3\u30b8\u3092\u84c4\u7a4d\u3067\u304d\u306a\u3044\u304b\u691c\u8a3c\u3057\u305f\u308a\u3057\u307e\u3057\u305f\u3002\\nSlack \u3068\u6bd4\u3079\u3066\u30ca\u30ec\u30c3\u30b8\u3092\u84c4\u7a4d\u3057\u3084\u3059\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u671f\u5f85\u3059\u308b\u4e00\u65b9\u3001\\nSlack \u306e\u3088\u3046\u306b\u305d\u306e\u5834\u3067\u8cea\u554f\u3092\u3057\u3066\u3059\u3050\u89e3\u6c7a\u3059\u308b\u306e\u306b\u306f\u5411\u304b\u306a\u3044\u304b\u306a\u3068\u3044\u3046\u6c17\u3082\u3057\u307e\u3057\u305f\u3002\\n\u3061\u3083\u3093\u3068\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u66f8\u304f\u3088\u308a\u306f\u3068\u308a\u3042\u3048\u305a Discussions \u306b Q&A \u5f62\u5f0f\u3067\u30ca\u30ec\u30c3\u30b8\u3092\u6b8b\u3057\u3066\u304a\u304f\u306e\u306f\u4f4e\u30b3\u30b9\u30c8\u3067\u3084\u308c\u308b\u304b\u306a\u3068\u601d\u3046\u53cd\u9762\u3001\u624b\u9593\u3082\u304b\u304b\u308a\u305d\u3046\u3067\u3059\u3002\\n\u6d3b\u7528\u306e\u4ed5\u65b9\u3092\u6a21\u7d22\u3059\u308b\u3053\u3068\u3001\u7121\u7406\u306a\u304f\u904b\u7528\u3067\u304d\u308b\u30eb\u30fc\u30eb\u3092\u5b9a\u3081\u308b\u3053\u3068\u3001\u7d44\u7e54\u30fb\u30c1\u30fc\u30e0\u3067\u30c4\u30fc\u30eb\u306e\u6d3b\u7528\u65b9\u6cd5\u30fb\u4f7f\u3044\u5206\u3051\u306e\u8a8d\u8b58\u3092\u5408\u308f\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\\n\\n## Blog\\n\\n* [tfcmt \u304c\u30b3\u30e1\u30f3\u30c8\u306e\u66f4\u65b0\u3092\u30b5\u30dd\u30fc\u30c8](https://zenn.dev/shunsuke_suzuki/articles/tfcmt-plan-patch)\\n* [tfcmt supports updating comments](https://dev.to/suzukishunsuke/tfcmt-supports-updating-comments-ebg)\\n\\n## OSS \u958b\u767a\\n\\n### \u65b0\u898f\u958b\u767a\\n\\nfirst release date | name | badges | lang | type | short description\\n--- | --- | --- | --- | --- | ---\\n2022-04-23 | [renovate-issue-action](https://github.com/suzuki-shunsuke/renovate-issue-action) | [![GitHub last commit](https://img.shields.io/github/last-commit/suzuki-shunsuke/renovate-issue-action.svg)](https://github.com/suzuki-shunsuke/renovate-issue-action) | go | cli for GitHub Actions | Create, update, and close GitHub Issues with GitHub Actions according to Renovate Pull Requests\\n2022-04-21 | [zap-error](https://github.com/suzuki-shunsuke/zap-error) | [![GitHub last commit](https://img.shields.io/github/last-commit/suzuki-shunsuke/zap-error.svg)](https://github.com/suzuki-shunsuke/zap-error) | go | library | Embed zap.Field into error\\n\\n#### zap-error\\n\\nzap-error \u306f Go \u306e error \u306b zap.Field \u3092\u57cb\u3081\u8fbc\u307f\u3001\u69cb\u9020\u5316\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092 error \u306b\u6301\u305f\u305b\u3066\u30ed\u30ae\u30f3\u30b0\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\\nGo \u3067\u306f `fmt.Errorf` \u3092\u4f7f\u3063\u3066\u30a8\u30e9\u30fc\u306b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u4ed8\u4e0e\u3055\u305b\u308b\u306e\u304c\u4e00\u822c\u7684\u3067\u3059\u304c\u3001 `fmt.Errorf` \u3067\u306f\u69cb\u9020\u5316\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u4ed8\u4e0e\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\\n\u307e\u305f\u3001 uber-go/zap \u3092\u59cb\u3081\u3068\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u305f\u69cb\u9020\u5316\u30ed\u30ae\u30f3\u30b0\u3082\u4e00\u822c\u7684\u306b\u884c\u308f\u308c\u308b\u3053\u3068\u3067\u3059\u3002\\n\u3067\u3042\u308c\u3070 error \u306b\u69cb\u9020\u5316\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u4ed8\u4e0e\u3057\u30ed\u30ae\u30f3\u30b0\u306b\u6d3b\u7528\u3057\u305f\u3044\u3068\u601d\u3046\u306e\u306f\u500b\u4eba\u7684\u306b\u306f\u81ea\u7136\u306a\u3053\u3068\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\nzap-error \u306f\u305d\u306e\u305f\u3081\u306e\u8584\u3044\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002 error \u306b zap.Fields \u3092\u4ed8\u4e0e\u3059\u308b\u95a2\u6570\u3068\u3001 error \u3092 zap.Fields \u306b\u5909\u63db\u3059\u308b\u95a2\u6570\u306e 2 \u3064\u306e API \u3057\u304b\u63d0\u4f9b\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\nzap \u306e logger \u3092\u30e9\u30c3\u30d7\u3059\u308b\u3088\u3046\u306a\u3053\u3068\u306f\u3057\u3066\u3044\u306a\u3044\u306e\u3067 zap \u306f\u305d\u306e\u307e\u307e\u4f7f\u3048\u307e\u3059\u3002\\n\\n\u3061\u306a\u307f\u306b logrus \u7528\u306e [logrus-error](https://github.com/suzuki-shunsuke/logrus-error) \u3068\u3044\u3046\u306e\u3082\u5143\u3005\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n#### renovate-issue-action\\n\\nRenovate \u3067\u3059\u3093\u306a\u308a automerge \u51fa\u6765\u306a\u304b\u3063\u305f Pull Request \u3092 Issue \u3068\u3057\u3066\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\u305f\u3081\u306e GitHub Action \u3067\u3059(\u6b63\u78ba\u306b\u306f Action \u3067\u306f\u306a\u304f\u3066 CLI \u3067\u3059\u304c)\u3002\\n\u3053\u308c\u306f\u3044\u305a\u308c\u3061\u3083\u3093\u3068\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u305f\u3044\u3067\u3059\u306d\u3002\\n\\n### Update\\n\\n* [aquaproj/aqua-registry](https://github.com/aquaproj/aqua-registry)\\n  * \u9042\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30c4\u30fc\u30eb\u306e\u6570\u3067 asdf-plugins \u3092\u8d85\u3048\u307e\u3057\u305f: https://twitter.com/szkdash/status/1518895119205683201\\n  * v1.11.0 => v2.10.0\\n* [aquaproj/aqua](https://github.com/aquaproj/aqua)\\n  * v1.3.0-0 => v1.5.0-0\\n  * v1.3.0: overrides \u306e\u30b5\u30dd\u30fc\u30c8\\n  * v1.4.0: Registry \u306e\u30c6\u30b9\u30c8\u5411\u3051\u306b\u3001 GOOS \u3068 GOARCH \u3092\u74b0\u5883\u5909\u6570\u3067\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\\n    * aqua-registry \u306e CI \u3067\u3082\u4f7f\u308f\u308c\u3066\u3044\u3066\u3001\u672c\u6765 CI \u3067\u30c6\u30b9\u30c8\u304c\u96e3\u3057\u3044 ARM64 \u5411\u3051\u306e\u30c6\u30b9\u30c8\u306b\u6d3b\u7528\u3055\u308c\u3066\u3044\u307e\u3059\\n    * JSON Schema \u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\\n* [suzuki-shunsuke/tfcmt](https://github.com/suzuki-shunsuke/tfcmt)\\n  * v3.1.0 => v3.2.1\\n  * plan \u306e\u30b3\u30e1\u30f3\u30c8\u306e\u66f4\u65b0\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\\n* [suzuki-shunsuke/tfaction](https://github.com/suzuki-shunsuke/tfaction)\\n  * v0.5.7 => v0.5.11\\n\\n## OSS Contribution\\n\\nmerged date | repository | lang | PR\'s short description\\n--- | --- | --- | ---\\n2022-04-29 | [shuaibiyy/awesome-terraform](https://github.com/shuaibiyy/awesome-terraform) | document | [tools: add tfaction](https://github.com/shuaibiyy/awesome-terraform/pull/164)\\n2022-04-29 | [shuaibiyy/awesome-terraform](https://github.com/shuaibiyy/awesome-terraform) | document | [fix: update links to some tools](https://github.com/shuaibiyy/awesome-terraform/pull/165)\\n2022-04-22 | [kreuzwerker/terraform-provider-docker](https://github.com/kreuzwerker/terraform-provider-docker) | go | [chore: remove the workflow to close stale issues and pull requests](https://github.com/kreuzwerker/terraform-provider-docker/pull/371)\\n2022-04-21 | [mitchellh/mapstructure](https://github.com/mitchellh/mapstructure) | go | [fix: panic when Decode\'s input is array and output is a slice](https://github.com/mitchellh/mapstructure/pull/265)\\n2022-04-12 | [rhysd/actionlint](https://github.com/rhysd/actionlint) | go | [fix: add permissions \\"pages\\" and \\"discussions\\" and remove invalid permission \\"metadata\\"](https://github.com/rhysd/actionlint/pull/131)\\n2022-04-06 | [terraform-linters/tflint-ruleset-aws](https://github.com/terraform-linters/tflint-ruleset-aws) | go | [style: format rules/api/rule.go.tmpl and run go generate ./...](https://github.com/terraform-linters/tflint-ruleset-aws/pull/333)\\n\\ntfaction \u304c awesome-terraform \u306b\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002"},{"id":"/what-i-did-2022-03","metadata":{"permalink":"/what-i-did-2022-03","source":"@site/blog/what-i-did-2022-03.md","title":"2022-03 \u632f\u308a\u8fd4\u308a","description":"3 \u6708\u306f blog \u3092\u7d50\u69cb\u8aad\u307f\u307e\u3057\u305f\u3002","date":"2022-04-02T05:16:55.000Z","formattedDate":"April 2, 2022","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":1.24,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2022-03 \u632f\u308a\u8fd4\u308a","date":"2022-04-02T05:16:55.000Z","authors":["suzuki-shunsuke"],"tags":["job","oss"]},"prevItem":{"title":"2022-04 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-04"},"nextItem":{"title":"2022-02 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-02"}},"content":"3 \u6708\u306f blog \u3092\u7d50\u69cb\u8aad\u307f\u307e\u3057\u305f\u3002\\n\\nhttps://zenn.dev/shunsuke_suzuki/scraps/602d6f6b803168\\n\\n\u5f8c\u306f\u8077\u5834\u306e\u30a4\u30f3\u30d5\u30e9\u5468\u308a\u306e\u30b3\u30fc\u30c9\u3068\u304b\u3092\u8aad\u307f\u8fd4\u3057\u3066\u5fa9\u7fd2\u3057\u307e\u3057\u305f\u3002\\n\\n\u6700\u8fd1\u306f OSS \u958b\u767a\u3084\u30d6\u30ed\u30b0\u306e\u57f7\u7b46\u306a\u3069\u306e output \u304c\u4e2d\u5fc3\u3067\u3001 input \u3092\u3059\u308b\u6642\u9593\u304c\u3042\u307e\u308a\u53d6\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u30d6\u30ed\u30b0\u306a\u3069\u3092\u8aad\u3080\u3068\u3044\u3046\u5f62\u3067 input \u3092\u3057\u307e\u3057\u305f\u3002\\n\\n## \u4ed5\u4e8b\\n\\n* Blog \u57f7\u7b46\\n* Terraform\\n  * Module \u3092 Monorepo \u306b\u96c6\u7d04: [Terraform Modules \u3092 Monorepo \u3067 versioning \u3057\u3066\u7ba1\u7406](https://blog.studysapuri.jp/entry/2022/03/30/080000)\\n* AWS Account \u5206\u5272\\n\\n## Blog\\n\\ndate | title\\n--- | ---\\n2022-03-30 | [Terraform Modules \u3092 Monorepo \u3067 versioning \u3057\u3066\u7ba1\u7406](https://blog.studysapuri.jp/entry/2022/03/30/080000)\\n2022-03-29 | [Automate handling a number of Pull Requests by Renovate in Terraform Monorepo](https://devs.quipper.com/2022/03/29/automate-handling-a-number-of-pull-requests-by-renovate-in-terraform-monorepo.html)\\n2022-03-05 | [tfaction v0.5.0 \u306e update](https://zenn.dev/shunsuke_suzuki/articles/tfaction-v050)\\n\\n## OSS \u958b\u767a\\n\\n* aqua v1.2.0 ~ v1.3.0\\n* aqua-registry v1.6.0 ~ v1.11.0\\n* tfaction v0.5.0 ~ v0.5.7\\n* [tfcmt v3.1.0](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.1.0)\\n\\n## \u305d\u306e\u4ed6\\n\\nAWS CodeDeploy \u3092\u7528\u3044\u305f AWS Lambda \u306e Progressive Delivery \u306b\u95a2\u3057\u3066\u691c\u8a0e\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://zenn.dev/shunsuke_suzuki/scraps/64bf029c5eeb7b\\n\\nPipeCD \u3082\u8003\u3048\u307e\u3057\u305f\u304c\u3001 CodeDeploy \u3067\u51fa\u6765\u308b\u3093\u306a\u3089\u305d\u308c\u3067\u3044\u3044\u6c17\u304c\u3059\u308b\u306e\u3067\u3001\u307e\u305a\u306f CodeDeploy \u3067\u691c\u8a0e\u3057\u3066\u3044\u307e\u3059\u3002"},{"id":"/what-i-did-2022-02","metadata":{"permalink":"/what-i-did-2022-02","source":"@site/blog/what-i-did-2022-02.md","title":"2022-02 \u632f\u308a\u8fd4\u308a","description":"\u307e\u3068\u3081","date":"2022-03-14T05:16:55.000Z","formattedDate":"March 14, 2022","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":1.34,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2022-02 \u632f\u308a\u8fd4\u308a","date":"2022-03-14T05:16:55.000Z","authors":["suzuki-shunsuke"],"tags":["job","oss"]},"prevItem":{"title":"2022-03 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-03"},"nextItem":{"title":"2021-11 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-11"}},"content":"## \u307e\u3068\u3081\\n\\naqua, aqua-registry, aqua-installer \u306e v1 \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u307e\u3057\u305f\u3002\\nv1 \u306b\u4f34\u3046\u5909\u66f4\u306f\u7279\u306b\u3042\u308a\u307e\u305b\u3093\u3002\\naqua v1.1.0 \u3067\u306f `aqua g -i` \u306b\u3088\u3063\u3066 aqua.yaml \u306b package \u3092\u8ffd\u52a0\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3001\u4f7f\u3044\u52dd\u624b\u3092\u826f\u304f\u3057\u307e\u3057\u305f\u3002\\ntfaction \u306f\u7d50\u69cb\u8272\u3005\u6a5f\u80fd\u8ffd\u52a0\u3084\u30d0\u30b0\u4fee\u6b63\u304c\u5165\u3063\u3066\u307e\u3059\u3002\\n\u4ed5\u4e8b\u3067\u306f\u30d6\u30ed\u30b0\u306b\u3082\u66f8\u3044\u305f\u3088\u3046\u306b Renovate \u306e\u5927\u91cf PR \u3092\u81ea\u52d5\u3067\u51e6\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u6539\u5584\u3092\u884c\u3044\u307e\u3057\u305f\u3002\\n\\n## \u4ed5\u4e8b\\n\\n* Terraform\\n  * tfaction \u30d0\u30b0\u4fee\u6b63\\n  * GITHUB_TOKEN rate limit \u5f15\u3063\u304b\u304b\u3063\u305f\u306e\u3067 GitHub App \u306e token \u306b\u7f6e\u304d\u63db\u3048\\n  * CI \u3053\u3051\u305f renovate PR \u306e\u81ea\u52d5 close \u691c\u8a0e\\n  * tfsec \u3084 AWS Provider v4 \u306e update \u5bfe\u5fdc\u3092\u3069\u3046\u3059\u308b\u304b\u691c\u8a0e\u3057\u305f\u308a\u3001\u5bfe\u5fdc\u3057\u305f\u308a\u3057\u3066\u305f\\n* AWS Account \u5206\u5272\\n\\n## Blog\\n\\n* [Migrate Terraform CI from AWS CodeBuild to GitHub Actions](https://devs.quipper.com/2022/02/25/terraform-github-actions.html)\\n* [Renovate \u306e\u5927\u91cf\u306e Pull Request \u3092\u51e6\u7406\u3059\u308b\u6280\u8853](https://blog.studysapuri.jp/entry/2022/02/18/080000)\\n* [Terraform \u306e CI \u3092 AWS CodeBuild \u304b\u3089 GitHub Actions + tfaction \u306b\u79fb\u884c\u3057\u307e\u3057\u305f](https://blog.studysapuri.jp/entry/2022/02/04/080000)\\n\\n## OSS \u958b\u767a\\n\\n* aqua v1.0.0 ~ v1.1.0\\n* aqua-registry v1.0.0 ~ v1.5.0\\n* aqua-installer v1.0.0\\n* tfaction v0.4.0 ~ v0.4.12\\n* New\\n  * https://github.com/suzuki-shunsuke/reenable-automerge-action\\n  * https://github.com/suzuki-shunsuke/renovate-autoclose-action"},{"id":"/what-i-did-2021-11","metadata":{"permalink":"/what-i-did-2021-11","source":"@site/blog/what-i-did-2021-11.md","title":"2021-11 \u3084\u3063\u305f\u3053\u3068","description":"Job","date":"2021-11-28T06:45:55.000Z","formattedDate":"November 28, 2021","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":4.515,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2021-11 \u3084\u3063\u305f\u3053\u3068","date":"2021-11-28T06:45:55.000Z","authors":["suzuki-shunsuke"],"tags":["job","oss"]},"prevItem":{"title":"2022-02 \u632f\u308a\u8fd4\u308a","permalink":"/what-i-did-2022-02"},"nextItem":{"title":"aqua \u306e\u6700\u8fd1\u306e update (v0.7.4 ~ v0.7.16)","permalink":"/update-aqua-v0.7.16"}},"content":"## Job\\n\\n* AWS Control Tower\\n  * \u767b\u9332\u3067\u304d\u3066\u306a\u304b\u3063\u305f Account \u3092\u767b\u9332\u3067\u304d\u305f\\n* AWS SSO\\n  * \u30e6\u30fc\u30b6\u30fc\u3078\u306e\u6848\u5185\u30fb\u50ac\u4fc3\u3092\u884c\u3044\u3001 IAM User \u304b\u3089 SSO \u306b\u79fb\u884c\u3057\u3066\u3082\u3089\u3063\u305f\\n  * \u30ed\u30fc\u30ab\u30eb\u306e\u958b\u767a\u3067 Access Key \u306b\u4f9d\u5b58\u3057\u3066\u3044\u305f\u90e8\u5206\u306b\u95a2\u3057\u3066\u4fee\u6b63\u3057\u3001 Access Key \u306a\u3057\u3067\u30ed\u30fc\u30ab\u30eb\u3067\u958b\u767a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f(\u4eba\u306b\u3088\u3063\u3066\u306f\u307e\u3060 Access Key \u306b\u4f9d\u5b58\u3057\u305f\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u3044\u308b\\n    * S3 Browser \u304c SSO \u3067\u306a\u305c\u304b\u52d5\u304b\u306a\u3044\u3089\u3057\u3044(\u81ea\u5206\u304c Windows \u6301\u3063\u3066\u306a\u3044\u306e\u3067\u78ba\u8a8d\u3067\u304d\u3066\u306a\u3044\u3051\u3069\\n    * Cyberduck \u304c SSO \u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\\n  * \u4e00\u90e8\u306e\u30e6\u30fc\u30b6\u30fc\u306e Access Key \u306e deactivate\\n  * \u4e0d\u8981\u306a IAM User \u306e\u30af\u30ea\u30fc\u30cb\u30f3\u30b0\\n  * \u6765\u6708\u4e2d\u306b\u306f\u4e00\u90e8\u306e\u4f8b\u5916\u3092\u9664\u304d\u3001\u79fb\u884c\u3092\u5b8c\u4e86\u3055\u305b\u305f\u3044\\n  * SSO \u51fa\u6765\u306a\u3044\u4eba\u3092 SSO \u3067\u304d\u308b\u3088\u3046\u306b\u5bfe\u5fdc\u3057\u305f (\u540c\u671f\u5bfe\u8c61\u306e Group \u3084\u3001 Permission Set \u3092\u8ffd\u52a0\u3057\u305f\u308a)\\n  * SSO \u306b\u95a2\u3059\u308b User \u5411\u3051\u3001 SRE \u5411\u3051\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u82f1\u8a9e\u3067\u66f8\u3044\u305f\\n* aqua \u3092\u66f4\u65b0\u3057\u3001 Access Token \u306a\u3057\u3067\u3082\u52d5\u304f\u3088\u3046\u306b\u3057\u305f(API call \u3092\u6e1b\u3089\u3057\u3001 rate limit \u306e\u554f\u984c\u3092\u89e3\u6c7a\u3057\u305f\\n* Self Hosted Renovate in GitHub Actions\\n  * https://github.com/renovatebot/github-action\\n  * \u7121\u4e8b Self Hosted \u3067\u52d5\u304b\u305b\u308b\u3088\u3046\u306b\u306a\u3063\u305f\\n  * \u7d50\u679c\u7684\u306b Self Hosted \u3058\u3083\u306a\u304f\u3066\u3082\u826f\u304b\u3063\u305f\u306e\u3067\u306f\u3068\u3044\u3046\u6c17\u306f\u3057\u3066\u3044\u308b\\n* AWS WAF\\n  * COUNT, BLOCK log \u3092 Lambda \u3067\u62bd\u51fa\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u304c\u3001\u306a\u305c\u304b COUNT log \u304c\u62bd\u51fa\u3067\u304d\u3066\u3044\u306a\u3044\\n  * \u3042\u307e\u308a\u6642\u9593\u53d6\u308c\u3066\u306a\u3044\\n* Route53 \u306e\u30c9\u30e1\u30a4\u30f3\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u79fb\u7ba1\\n* Lambda \u306e CI/CD\\n  * \u5b9f\u73fe\u3057\u305f\u3044\u3053\u3068\u3092\u8a00\u8a9e\u5316: https://github.com/suzuki-shunsuke/issue/issues/70\\n  * \u691c\u8a0e(\u3042\u307e\u308a\u9032\u3093\u3067\u306a\u3044\\n* git-secrets \u304b\u3089 secretlint \u3078\u306e\u79fb\u884c\\n* circleci-config-merge \u3092 CI \u3067\u5b9f\u884c\u3057\u3066\u81ea\u52d5\u4fee\u6b63\u3059\u308b\u3088\u3046\u306b\u3057\u305f\\n\\n### \u8ab2\u984c\\n\\n* Renovate \u306e Automerge \u304c base branch \u304c\u66f4\u65b0\u3055\u308c\u305f\u3053\u3068\u3067 disable \u306b\u306a\u308a\u3001\u7d50\u5c40\u624b\u3067\u30de\u30fc\u30b8\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u304f\u306a\u3063\u3066\u3044\u308b\\n  * \u81ea\u52d5\u5316\u306e\u691c\u8a0e\\n\\n## Blog, Slide\\n\\n* https://techblog.szksh.cloud/archives/2021/11/\\n  * [aqua \u306e\u6700\u8fd1\u306e update (v0.7.4 ~ v0.7.16)](https://techblog.szksh.cloud/update-aqua-v0.7.16/)\\n* [OPA Policy Testing by Table Driven Test](https://dev.to/suzukishunsuke/opa-policy-testing-by-table-driven-test-289e)\\n* https://suzuki-shunsuke.github.io/slides/aqua/introduction-5min/\\n\\n## OSS\\n\\naqua \u306e\u516c\u5f0f\u30b5\u30a4\u30c8\u3092\u7acb\u3061\u4e0a\u3052\u307e\u3057\u305f\u3002\\n\\nhttps://aquaproj.github.io/\\n\\n[Docusaurus v2](https://docusaurus.io/) \u3067\u751f\u6210\u3057\u3066\u3001 GitHub Pages \u3067\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u3044\u307e\u3059\u3002\\n\\naqua \u7528\u306e GitHub Organization \u3092\u4f5c\u308a\u3001\u95a2\u9023\u30ea\u30dd\u30b8\u30c8\u30ea\u3092 transfer \u3057\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/aquaproj\\n\\n### OSS Contribution\\n\\n[tfmigrator](https://github.com/tfmigrator/cli) \u3068 [tfcmt](https://github.com/suzuki-shunsuke/tfcmt) \u3092 [awesome-terraform](https://github.com/shuaibiyy/awesome-terraform) \u306b\u8ffd\u52a0\u3057\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002\\n\\n* https://github.com/shuaibiyy/awesome-terraform/pull/139\\n* https://github.com/shuaibiyy/awesome-terraform/pull/138\\n\\n## \u305d\u306e\u4ed6\\n\\n### \u3053\u306e\u30d6\u30ed\u30b0\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5225\u306e GitHub Organization \u306b transfer \u3057\u307e\u3057\u305f\\n\\nhttps://github.com/techblog-szksh-cloud/techblog-szksh-cloud.github.io\\n\\n\u7406\u7531\u306f techblog.szksh.cloud \u304c suzuki-shunsuke.github.io \u306e CNAME \u306b\u306a\u3063\u3066\u3044\u3066\u3001\\nOSS \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306a\u3069\u3092 GitHub Pages \u3067\u516c\u958b\u3057\u305f\u3044\u3068\u304d\u306b\u90fd\u5408\u304c\u60aa\u304b\u3063\u305f\u304b\u3089\u3067\u3059\u3002\\n\\n\u3064\u3044\u3067\u306b CI \u3092 Drone \u304b\u3089 GitHub Actions \u306b\u79fb\u884c\u3057\u307e\u3057\u305f\u3002\\n\\n### suzuki-shunsuke/issue \u306e\u6d3b\u7528\\n\\nhttps://github.com/suzuki-shunsuke/issue/issues \u306b\u8a18\u9332\u3092\u6b8b\u3059\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/issue/issues?q=is%3Aissue+updated%3A2021-11-01..2021-11-30\\n\\n\u524d\u304b\u3089\u4f7f\u3063\u3066\u307e\u3057\u305f\u304c\u3001\u3042\u307e\u308a\u6d3b\u7528\u3067\u304d\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u610f\u8b58\u7684\u306b\u6d3b\u7528\u3057\u3066\u3044\u3053\u3046\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\u305b\u3063\u304b\u304f\u30c4\u30fc\u30eb\u3068\u304b\u3092\u691c\u8a3c\u3057\u3066\u3082\u3001\u3061\u3083\u3093\u3068\u8a18\u9332\u304c\u6b8b\u3063\u3066\u306a\u3044\u3068\u5fd8\u308c\u3066\u3057\u307e\u3044\u3082\u3063\u305f\u3044\u306a\u3044\u3068\u3044\u3046\u306e\u3068\u3001\\nissue \u306b\u6b8b\u3059\u3068\u81ea\u7136\u3068\u691c\u8a3c\u3068\u304b\u304c\u9032\u3080\u3088\u3046\u306a\u6c17\u304c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n### Docusaurus\\n\\nDocusaurus \u306f\u3044\u3044\u611f\u3058\u306a\u306e\u3067 [suzuki-shunsuke/profile](https://github.com/suzuki-shunsuke/profile) \u3084\u3053\u306e\u30d6\u30ed\u30b0\u3092 Docusaurus \u306b\u79fb\u884c\u3059\u308b\u306e\u3082\u3042\u308a\u304b\u3082\u3057\u308c\u306a\u3044\u306a\u3068\u601d\u3044\u307e\u3057\u305f\\n(\u601d\u3063\u305f\u3060\u3051\u3067\u307e\u3060\u4f55\u3082\u3057\u3066\u307e\u305b\u3093\\n\\n\u305f\u3060\u3001 OSS \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b Docusaurus \u3092\u4f7f\u3046\u5834\u5408\u3001\u500b\u4eba\u7684\u306b\u306f package.json \u3092\u540c\u3058\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u7f6e\u304d\u305f\u304f\u306a\u3044\u306e\u3067\u3001\\n\u540c\u3058\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u30d7\u30ed\u30c0\u30af\u30c8\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u7ba1\u7406\u3057\u306b\u304f\u3044\u304b\u306a\u3068\u3044\u3046\u6c17\u306f\u3057\u3066\u3044\u307e\u3059\u3002"},{"id":"/update-aqua-v0.7.16","metadata":{"permalink":"/update-aqua-v0.7.16","source":"@site/blog/update-aqua-v0.7.16.md","title":"aqua \u306e\u6700\u8fd1\u306e update (v0.7.4 ~ v0.7.16)","description":"\u4ee5\u524d aqua v0.7.3 \u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u969b\u306b aqua \u3067\u7d44\u7e54\u30fb\u30c1\u30fc\u30e0\u306e\u30c4\u30fc\u30eb\u7fa4\u3092\u7ba1\u7406 \u3068\u3044\u3046\u8a18\u4e8b\u3092\u66f8\u304d\u307e\u3057\u305f\u3002","date":"2021-11-18T11:21:57.000Z","formattedDate":"November 18, 2021","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"aqua","permalink":"/tags/aqua"}],"readingTime":8.005,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"aqua \u306e\u6700\u8fd1\u306e update (v0.7.4 ~ v0.7.16)","date":"2021-11-18T11:21:57.000Z","archives":["2021/11"],"tags":["oss","aqua"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"2021-11 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-11"},"nextItem":{"title":"2021-10 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-10"}},"content":"\u4ee5\u524d aqua [v0.7.3](https://github.com/suzuki-shunsuke/aqua/releases/tag/v0.7.3) \u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u969b\u306b [aqua \u3067\u7d44\u7e54\u30fb\u30c1\u30fc\u30e0\u306e\u30c4\u30fc\u30eb\u7fa4\u3092\u7ba1\u7406](/aqua-global-configs/) \u3068\u3044\u3046\u8a18\u4e8b\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\\n\u3042\u308c\u304b\u3089\u3082\u3046\u3059\u3050 2 \u30f6\u6708\u306b\u306a\u308a\u3001\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306f [v0.7.16](https://github.com/suzuki-shunsuke/aqua/releases/tag/v0.7.16) \u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\u305d\u3053\u3067 v0.7.4 ~ v0.7.16 \u306e\u9593\u306e\u66f4\u65b0\u3068\u3001\u95a2\u9023 repository \u306e\u66f4\u65b0\u3092\u5e7e\u3064\u304b(\u5168\u90e8\u3067\u306f\u306a\u3044)\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\u57fa\u672c\u7684\u306b [Release Note](https://github.com/suzuki-shunsuke/aqua/releases) \u306b\u66f8\u3044\u3066\u3042\u308b\u5185\u5bb9\u3067\u3059\u3002\\n\\n* GitHub \u306e Access Token \u304c\u57fa\u672c\u7684\u306b\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\\n* Homebrew \u3067 install \u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n* aqua.yaml \u304c\u3088\u308a\u7c21\u6f54\u306b\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n* aqua.yaml \u306e packages \u3092\u4ed6\u306e\u30ed\u30fc\u30ab\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u304b\u3089 import \u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n* aqua.yaml \u3092\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u968e\u5c64\u7684\u306b\u30cd\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n* aqua which \u30b3\u30de\u30f3\u30c9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\\n* github_archive, github_content type \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\\n* (advanced) \u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u306e type \u304c\u5909\u66f4\u3055\u308c\u305f\u5834\u5408\u306b\u3082\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n* [Standard Registry](https://github.com/suzuki-shunsuke/aqua-registry) \u306e package \u306e\u6570\u304c 139 => 220 \u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n* [aqua \u306e\u305f\u3081\u306e CircleCI Orb](https://circleci.com/developer/orbs/orb/suzuki-shunsuke/aqua) \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u307e\u3057\u305f\\n\\n## GitHub \u306e Access Token \u304c\u57fa\u672c\u7684\u306b\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\\n\\nprivate repository \u304b\u3089 package \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5834\u5408\u306f\u5f53\u7136\u5fc5\u8981\u3067\u3059\u304c\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\u3053\u308c\u306b\u3088\u308a\u3001 aqua \u3092\u5c0e\u5165\u3059\u308b\u30cf\u30fc\u30c9\u30eb\u304c\u4e0b\u304c\u308a\u307e\u3057\u305f\u3057\u3001 GitHub API \u306e Rate Limit \u306b\u5f15\u3063\u304b\u304b\u308b\u3053\u3068\u304c\u57fa\u672c\u7684\u306b\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n\u4f59\u8ac7\u3067\u3059\u304c\u3001 private repository \u306e\u30c4\u30fc\u30eb\u3092\u7c21\u5358\u306b install \u3067\u304d\u308b\u306e\u3082 aqua \u306e\u4fbf\u5229\u306a\u70b9\u3060\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n## Homebrew \u3067 install \u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n\\n```\\n$ brew install suzuki-shunsuke/aqua/aqua\\n```\\n\\nHomebrew \u3067 install \u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3067\u3001\u3088\u308a\u624b\u8efd\u306b\u5c0e\u5165\u3057\u3066\u3082\u3089\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n\u3061\u306a\u307f\u306b aqua \u3092 aqua \u3067\u7ba1\u7406\u51fa\u6765\u306a\u3044\u306e\u304b\u3068\u3044\u3046\u3068\u3001\u73fe\u72b6\u3067\u304d\u307e\u305b\u3093(\u7121\u9650\u30eb\u30fc\u30d7\u306b\u306a\u3063\u3066\u3057\u307e\u3046)\u3002\\n\\n## aqua.yaml \u304c\u3088\u308a\u7c21\u6f54\u306b\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n\\nAS IS\\n\\n```yaml\\n- name: direnv/direnv\\n  registry: standard\\n  version: v2.28.0 # renovate: depName=direnv/direnv\\n```\\n\\nTO BE\\n\\n```yaml\\n- name: direnv/direnv@v2.28.0\\n```\\n\\n* `registry: standard` \u304c\u7701\u7565\u53ef\u80fd\\n* version \u3092 name \u306b @ \u306e\u3042\u3068\u306b\u66f8\u3051\u308b\\n  * \u3053\u308c\u306b\u3088\u308a\u3001 [Renovate \u306e Regex Manager](https://docs.renovatebot.com/modules/manager/regex) \u7528\u306b\u30b3\u30e1\u30f3\u30c8 `# renovate: depName=direnv/direnv` \u3092\u66f8\u304f\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\\n\\n\u3053\u308c\u306b\u3088\u308a 1 \u884c\u3067\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\u305f\u3060\u7c21\u6f54\u306b\u304b\u3051\u3066\u697d\u3068\u3044\u3046\u3060\u3051\u3067\u306a\u304f\u3001 Renovate \u7528\u306e\u30b3\u30e1\u30f3\u30c8\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3092\u9593\u9055\u3048\u3066\u6307\u5b9a\u3059\u308b\u30ea\u30b9\u30af\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\n\\ne.g. \u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3092\u9593\u9055\u3048\u3066\u3044\u308b\u4f8b\\n\\n```yaml\\n- name: direnv/direnv\\n  registry: standard\\n  version: v2.28.0 # renovate: depName=cli/cli\\n```\\n\\n[aqua-renovate-config](https://github.com/suzuki-shunsuke/aqua-renovate-config) \u3092\u4f7f\u3048\u3070\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u304b\u306a\u304f\u3066\u3082 version \u3092\u4e0a\u3052\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\n## aqua.yaml \u306e packages \u3092\u4ed6\u306e\u30ed\u30fc\u30ab\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u304b\u3089 import \u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n\\ne.g.\\n\\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\\n\\n```\\naqua.yaml\\naqua/\\n  reviewdog.yaml\\n  golangci-lint.yaml\\n  ...\\n```\\n\\naqua.yaml \\n\\n```yaml\\npackages:\\n- import: aqua/*.yaml\\n```\\n\\naqua/reviewdog.yaml\\n\\n```yaml\\npackages:\\n- name: reviewdog/reviewdog@v0.13.0\\n```\\n\\n\u3053\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3059\u308b\u3053\u3068\u3067\u3001\u7279\u5b9a\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c update \u3055\u308c\u305f\u5834\u5408\u306e\u307f CI \u3067\u7279\u5b9a\u306e job \u3092\u5b9f\u884c\u3059\u308b\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u3084\u308a\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\\n\u4f8b\u3048\u3070 GitHub Actions \u306e [`on.<push|pull_request>.paths`](https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions#onpushpull_requestpaths) \u306e\u5834\u5408\u3001\\n\\n```yaml\\nname: test\\non:\\n  pull_request:\\n    paths:\\n    - \'**.go\'\\n    - aqua/golangci-lint.yaml\\n```\\n\\n## aqua.yaml \u3092\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u968e\u5c64\u7684\u306b\u30cd\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n\\naqua \u306f\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u9061\u3063\u3066 `^\\\\.?aqua\\\\.ya?ml$` \u3092\u63a2\u7d22\u3057\u307e\u3059\u3002\\n\u3053\u306e\u3068\u304d\u3001\u305d\u308c\u307e\u3067\u306f\u30d5\u30a1\u30a4\u30eb\u3092\u4e00\u3064\u898b\u3064\u3051\u305f\u6642\u70b9\u3067\u63a2\u7d22\u3092\u3084\u3081\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u5168\u3066\u306e\u968e\u5c64\u3092\u63a2\u7d22\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\u540c\u3058\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u305f\u5834\u5408\u3001\u5148\u306b\u898b\u3064\u304b\u3063\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e version \u304c\u512a\u5148\u3055\u308c\u307e\u3059\u3002\\n\u3053\u308c\u306b\u3088\u308a\u3001 Monorepo \u3067\u3082 aqua \u304c\u4f7f\u3044\u3084\u3059\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\nMonorepo \u76f4\u4e0b\u306b aqua.yaml \u3092\u7f6e\u304d\u3064\u3064\u3001\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b aqua.yaml \u3092\u7f6e\u3044\u3066\u3082\u3001\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u914d\u4e0b\u3067 Monorepo \u76f4\u4e0b\u306e aqua.yaml \u3082\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n## aqua which \u30b3\u30de\u30f3\u30c9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\\n\\n```console\\n$ which gh\\n/Users/shunsuke-suzuki/.aqua/bin/gh\\n\\n$ aqua which gh\\n/Users/shunsuke-suzuki/.aqua/pkgs/github_release/github.com/cli/cli/v2.2.0/gh_2.2.0_macOS_amd64.tar.gz/gh_2.2.0_macOS_amd64/bin/gh\\n```\\n\\naqua \u306f `~/.aqua/bin` \u914d\u4e0b\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u4f5c\u6210\u3057\u3001\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306b\u52d5\u7684\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6c7a\u5b9a\u3057\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\u3088\u3063\u3066 `which` \u3084 `command -v` \u3067\u306f\u5b9f\u969b\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u306e\u30d1\u30b9\u304c\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001 aqua which \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3068\u30d1\u30b9\u304c\u5206\u304b\u308a\u307e\u3059\u3002\\n\u3061\u306a\u307f\u306b aqua \u3067\u7ba1\u7406\u3055\u308c\u3066\u306a\u3044\u30b3\u30de\u30f3\u30c9\u3067\u3082\u30d1\u30b9\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\\n\\n```console\\n$ aqua which git\\n/usr/local/bin/git\\n```\\n\\n\u5c11\u3005\u5909\u308f\u3063\u305f\u4f7f\u3044\u65b9\u3067\u3059\u304c\u3001 aqua \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u5225\u306e\u30d1\u30b9\u306b\u30b3\u30d4\u30fc\u3057\u305f\u3044\u5834\u5408\u306b\u4fbf\u5229\u3067\u3059\u3002\\n\\n```\\n$ cp \\"$(aqua which gh)\\" src/gh\\n```\\n\\n## github_archive, github_content type \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\\n\\nStandard Registry \u306b\u3042\u308b package \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\u3060\u3051\u306e\u65b9\u306f\u3001\u305d\u3082\u305d\u3082 package \u306e type \u3068\u3044\u3046\u3082\u306e\u3092\u6c17\u306b\u3059\u308b\u5fc5\u8981\u3082\u306a\u3044\u306e\u3067\\n\u3042\u307e\u308a\u95a2\u4fc2\u306a\u3044\u8a71\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001 `http`, `github_release` package \u306b\u52a0\u3048\u3066\u3001 `github_archive`, `github_content` package \u3082\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u3057\u305f\u3002\\n`github_archive` \u306f GitHub Repository \u306e Archive \u3092\u30d1\u30c3\u30b1\u30fc\u30b8\u3068\u3057\u3066\u6271\u3046\u3082\u306e\u3067\u3001 [tfenv](https://github.com/tfutils/tfenv) \u3092 aqua \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u969b\u306a\u3093\u304b\u306b\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\\n`github_content` \u306f GitHub Content API \u3092\u4f7f\u3063\u3066 GitHub Repository \u306e\u5358\u4e00\u30d5\u30a1\u30a4\u30eb\u3092\u30d1\u30c3\u30b1\u30fc\u30b8\u3068\u3057\u3066\u6271\u3046\u3082\u306e\u3067\u3059\u3002\\n\\n## (advanced) \u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u306e type \u304c\u5909\u66f4\u3055\u308c\u305f\u5834\u5408\u306b\u3082\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n\\n\u3053\u308c\u307e\u305f advanced \u306a\u5185\u5bb9\u3067\u591a\u304f\u306e\u65b9\u306b\u306f\u3042\u307e\u308a\u95a2\u4fc2\u306a\u3044\u88cf\u5074\u306e\u4ed5\u7d44\u307f\u306e\u8a71\u3067\u3059\u304c\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u3088\u3063\u3066\u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066 type \u304c\u5909\u308f\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059(\u304b\u306a\u308a\u307e\u308c\u3067\u3059\u304c)\u3002\\n\u3042\u3068\u306f repository \u306e owner \u304c\u5909\u308f\u3063\u305f\u308a\u306a\u3093\u304b\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u305d\u3046\u3044\u3063\u305f\u5834\u5408\u306b\u3082\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\u3061\u306a\u307f\u306b GitHub Release \u306e asset \u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3084\u3001 asset \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u304c\u5909\u308f\u308b\u3053\u3068\u306f\u6642\u3005\u3042\u308a\u307e\u3059\u304c\u3001\u305d\u308c\u3089\u306b\u306f\u5143\u3005\u5bfe\u5fdc\u3067\u304d\u3066\u3044\u307e\u3059\u3002\\n\\ne.g.  https://github.com/suzuki-shunsuke/aqua-registry/blob/v0.10.7/registry.yaml#L486-L492\\n\\nhttps://github.com/suzuki-shunsuke/aqua/blob/v0.7.16/docs/registry_config.md#version_constraint-version_overrides\\n\\n## Standard Registry package \u306e\u6570\u304c 139 => 220 \u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\nStandard Registry \u306f [v0.8.6](https://github.com/suzuki-shunsuke/aqua-registry/releases/tag/v0.8.6) \u304b\u3089 [v0.10.7](https://github.com/suzuki-shunsuke/aqua-registry/releases/tag/v0.10.7) \u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u305d\u306e\u7d50\u679c package \u306e\u6570\u306f 139 \u304b\u3089 220 \u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n## aqua \u306e\u305f\u3081\u306e CircleCI Orb \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u307e\u3057\u305f\\n\\nCircleCI \u3067 Orb \u3092\u4f7f\u3063\u3066 aqua \u3092 install \u3057\u305f\u308a aqua \u3092\u4f7f\u3063\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\naqua \u3068\u30d1\u30c3\u30b1\u30fc\u30b8\u3092 cache \u3057\u3066\u304f\u308c\u307e\u3059\u3002"},{"id":"/what-i-did-2021-10","metadata":{"permalink":"/what-i-did-2021-10","source":"@site/blog/what-i-did-2021-10.md","title":"2021-10 \u3084\u3063\u305f\u3053\u3068","description":"Job","date":"2021-10-26T11:43:03.000Z","formattedDate":"October 26, 2021","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":0.81,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2021-10 \u3084\u3063\u305f\u3053\u3068","date":"2021-10-26T11:43:03.000Z","archives":["2021/10"],"tags":["job","oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"aqua \u306e\u6700\u8fd1\u306e update (v0.7.4 ~ v0.7.16)","permalink":"/update-aqua-v0.7.16"},"nextItem":{"title":"2021-09 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-09"}},"content":"## Job\\n\\n* AWS SSO \u306e\u5c0e\u5165\\n  * Google \u30a2\u30ab\u30a6\u30f3\u30c8\u3067 AWS \u3078\u30b5\u30a4\u30f3\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\\n  * AWS SSO \u306e Terraform \u7ba1\u7406\\n  * ssosync \u3092 Lambda \u3067\u5b9a\u671f\u5b9f\u884c\\n  * \u958b\u767a\u8005\u5411\u3051\u306e\u79fb\u884c\u30ac\u30a4\u30c9\u306e\u4f5c\u6210\u3057\u3001\u5b9f\u969b\u306b\u6848\u5185\\n  * terraform, kubectl \u306a\u3069\u306e\u30c4\u30fc\u30eb\u3067 AWS \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304b\u306e\u691c\u8a3c\\n* AWS WAF \u306e COUNT, BLOCK \u306e log \u3092 Firehose, Lambda \u3067\u62bd\u51fa\\n* [akoi](http://github.com/suzuki-shunsuke/akoi) \u3092 [aqua](https://github.com/suzuki-shunsuke/aqua) \u306b\u30ea\u30d7\u30ec\u30fc\u30b9\\n\\n## Blog\\n\\n* [2021-10-13: HashiTalks Japan 2021 \u3067\u5f0a\u30d7\u30ed\u30c0\u30af\u30c8\u306e Terraform Platform \u306b\u3064\u3044\u3066\u767b\u58c7\u3057\u307e\u3057\u305f](https://blog.studysapuri.jp/entry/2021/10/13/080000)\\n\\n## OSS\\n\\nhttps://github.com/pulls?q=is%3Aclosed+is%3Apublic+is%3Apr+author%3Asuzuki-shunsuke+archived%3Afalse+created%3A2021-10-01..2021-10-31+\\n\\n* Profile \u306a\u3069\u306e\u66f4\u65b0: https://github.com/suzuki-shunsuke/suzuki-shunsuke\\n* GitHub Actions \u306e\u958b\u767a\\n* \u81ea\u4f5c\u30c4\u30fc\u30eb\u3092 Homebrew \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n* aqua: v0.7.3 => v0.7.10\\n  * aqua-registry: v0.8.8 => v0.10.3\\n\\n### OSS Contribution\\n\\n* [hashicorp/terraform-provider-aws: fix make testacc](https://github.com/hashicorp/terraform-provider-aws/pull/21385)"},{"id":"/what-i-did-2021-09","metadata":{"permalink":"/what-i-did-2021-09","source":"@site/blog/what-i-did-2021-09.md","title":"2021-09 \u3084\u3063\u305f\u3053\u3068","description":"\u4ed5\u4e8b","date":"2021-10-02T12:46:15.000Z","formattedDate":"October 2, 2021","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":0.77,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2021-09 \u3084\u3063\u305f\u3053\u3068","date":"2021-10-02T12:46:15.000Z","archives":["2021/10"],"tags":["job","oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"2021-10 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-10"},"nextItem":{"title":"aqua \u3067\u7d44\u7e54\u30fb\u30c1\u30fc\u30e0\u306e\u30c4\u30fc\u30eb\u7fa4\u3092\u7ba1\u7406","permalink":"/aqua-global-configs"}},"content":"## \u4ed5\u4e8b\\n\\n\u4eca\u6708\u306f\u6709\u4f11\u6d88\u5316\u3084\u30b7\u30eb\u30d0\u30fc\u30a6\u30a3\u30fc\u30af\u3082\u3042\u308a\u3001\u7a3c\u50cd\u304c\u5c11\u306a\u304f\u3001\u3042\u307e\u308a\u4ed5\u4e8b\u304c\u9032\u307e\u306a\u304b\u3063\u305f\u3067\u3059\u3002\\n\\n* AWS SSO \u3084 Organizations \u3092\u5c0e\u5165\u3059\u308b\u305f\u3081\u306e\u30ed\u30fc\u30c9\u30de\u30c3\u30d7\u306e\u7b56\u5b9a\\n* AWS SSO \u306e\u691c\u8a3c\\n\\n## \u767b\u58c7\\n\\n* 2021-09-30 [HashiTalks Japan 2021](https://events.hashicorp.com/hashitalksjapan) ([youtube](https://www.youtube.com/watch?v=Cl9S-uzkuLc))\\n  * [Terraform Platform in Quipper](https://speakerdeck.com/szksh/terraform-platform-in-quipper) ([youtube](https://www.youtube.com/watch?v=KpYwcwxnzbY))\\n  * Talk (30 min)\\n\\n## \u65b0\u305f\u306b\u4f5c\u3063\u305f OSS\\n\\n* [aqua-renovate-config](https://github.com/suzuki-shunsuke/aqua-renovate-config)\\n  * [Renovate Configuration](https://docs.renovatebot.com/config-presets/) to update packages and registries of [aqua](https://github.com/suzuki-shunsuke/aqua)\\n\\n## Blog\\n\\n* English\\n  * [Tips about Renovate](https://dev.to/suzukishunsuke/tips-about-renovate-38bd)\\n  * [2021-09-08 aqua - Declarative CLI Version Manager](https://dev.to/suzukishunsuke/aqua-declarative-cli-version-manager-1ibe)\\n* https://techblog.szksh.cloud/archives/2021/09/\\n  * [2021-09-25 aqua \u3067\u7d44\u7e54\u30fb\u30c1\u30fc\u30e0\u306e\u30c4\u30fc\u30eb\u7fa4\u3092\u7ba1\u7406](/aqua-global-configs/)\\n  * [2021-09-05 aqua \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306b\u751f\u6210\u3059\u308b generate \u30b3\u30de\u30f3\u30c9](/aqua-generate/)\\n  * [2021-09-04 aqua v0.1.0 \u304b\u3089 v0.5.0 \u3067\u306e\u5909\u66f4\u70b9](/aqua-v0.5/)"},{"id":"/aqua-global-configs","metadata":{"permalink":"/aqua-global-configs","source":"@site/blog/aqua-global-configs.md","title":"aqua \u3067\u7d44\u7e54\u30fb\u30c1\u30fc\u30e0\u306e\u30c4\u30fc\u30eb\u7fa4\u3092\u7ba1\u7406","description":"aqua v0.7.3 \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u3001","date":"2021-09-25T03:01:56.000Z","formattedDate":"September 25, 2021","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"aqua","permalink":"/tags/aqua"}],"readingTime":3.975,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"aqua \u3067\u7d44\u7e54\u30fb\u30c1\u30fc\u30e0\u306e\u30c4\u30fc\u30eb\u7fa4\u3092\u7ba1\u7406","date":"2021-09-25T03:01:56.000Z","tags":["oss","aqua"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"2021-09 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-09"},"nextItem":{"title":"aqua \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306b\u751f\u6210\u3059\u308b generate \u30b3\u30de\u30f3\u30c9","permalink":"/aqua-generate"}},"content":"[aqua](https://github.com/suzuki-shunsuke/aqua) [v0.7.3](https://github.com/suzuki-shunsuke/aqua/releases/tag/v0.7.3) \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u3001\\n\u8907\u6570\u306e global configuration \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\u3002\\n\\n\u500b\u4eba\u3067\u4f7f\u3046\u5206\u306b\u306f\u3042\u307e\u308a\u5b09\u3057\u3044\u6a5f\u80fd\u3067\u3082\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\\n\u4f1a\u793e\u30fb\u7d44\u7e54\u30fb\u30c1\u30fc\u30e0\u3068\u3044\u3063\u305f\u96c6\u56e3(\u4ee5\u4e0b`\u7d44\u7e54`\u3067\u7d71\u4e00)\u3067\u8a2d\u5b9a\u3092\u5171\u6709\u3059\u308b\u306b\u306f\u4fbf\u5229\u306a\u6a5f\u80fd\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3053\u308c\u307e\u3067 aqua \u3067\u306f 2 \u3064\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n* -c \u3067\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u63a2\u7d22\u3057\u3066\u6700\u521d\u306b\u898b\u3064\u304b\u3063\u305f\u30d5\u30a1\u30a4\u30eb\\n  * \u30ea\u30dd\u30b8\u30c8\u30ea\u76f4\u4e0b\u306b\u305d\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u7528\u306e aqua.yaml \u3092\u304a\u304f\\n* global configuration (\u30c7\u30d5\u30a9\u30eb\u30c8\u306f `~/.aqua/global/[.]aqua.y[a]ml`)\\n  * \u500b\u4eba\u306e dotfiles \u3068\u304b\u3067 aqua.yaml \u3092\u7ba1\u7406\u3057\u3066\u304a\u304f\\n\\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u7279\u5b9a\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u7528\u306e\u8a2d\u5b9a\u3068\u500b\u4eba\u306e\u8a2d\u5b9a\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n\u3057\u304b\u3057\u3001\u7b2c\u4e09\u306e\u8a2d\u5b9a\u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\u4f8b\u3048\u3070\u3042\u308b\u7d44\u7e54\u3067\u4f7f\u3046\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u3092 aqua \u3067\u7ba1\u7406\u3057\u3088\u3046\u3068\u601d\u3063\u3066\u3082\u3053\u308c\u307e\u3067\u306f\u96e3\u3057\u304b\u3063\u305f\u3067\u3059\u3002\\n\\n\u305d\u3053\u3067 `AQUA_GLOBAL_CONFIG` \u3068\u3044\u3046\u74b0\u5883\u5909\u6570\u306b `:` \u533a\u5207\u308a\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u5148\u982d\u304b\u3089\u9806\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53c2\u7167\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u512a\u5148\u9806\u4f4d\u306f\u9ad8\u3044\u65b9\u304b\u3089\u9806\u306b\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n1. -c \u3067\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u63a2\u7d22\u3057\u3066\u6700\u521d\u306b\u898b\u3064\u304b\u3063\u305f\u30d5\u30a1\u30a4\u30eb\\n1. `AQUA_GLOBAL_CONFIG`\\n1. global configuration (\u30c7\u30d5\u30a9\u30eb\u30c8\u306f `~/.aqua/global/[.]aqua.y[a]ml`)\\n\\n\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u306f\\n\\n1. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u30ea\u30dd\u30b8\u30c8\u30ea)\u306e\u8a2d\u5b9a\\n1. \u7d44\u7e54\u306e\u8a2d\u5b9a\\n1. \u500b\u4eba\u306e\u8a2d\u5b9a\\n\\n\u3068\u3044\u3046\u611f\u3058\u3067\u3059\u3002\\n\\n\u4f8b\u3048\u3070 GitHub Organizations \u306b aqua-config \u3068\u3044\u3046\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u305f\u3068\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n* all.yaml: \u5168 Developer \u7528\u306e\u8a2d\u5b9a\\n* sre.yaml: SRE Team \u7528\u306e\u8a2d\u5b9a\\n\\n\u305d\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30ed\u30fc\u30ab\u30eb `/home/foo/aqua-config` \u306b checkout \u3057\u305f\u3068\u3057\u307e\u3057\u3087\u3046\u3002\\n\u3042\u306a\u305f\u304c SRE \u306e\u5834\u5408\u3001 AQUA_GLOBAL_CONFIG \u3092\u6b21\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```sh\\nexport AQUA_GLOBAL_CONFIG=/home/foo/aqua-config/sre.yaml:/home/foo/aqua-config/all.yaml\\n```\\n\\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u7279\u5b9a\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u7528\u306e\u8a2d\u5b9a\u3068\u500b\u4eba\u306e\u8a2d\u5b9a(dotfiles)\u306b\u52a0\u3048\u3066\u3001\\n\u81ea\u5206\u304c\u6240\u5c5e\u3059\u308b\u7d44\u7e54\u7528\u306e\u8a2d\u5b9a\u3082\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n\u7d44\u7e54\u3068\u3057\u3066\u306f\u7d44\u7e54\u306b\u5fc5\u8981\u306a\u30c4\u30fc\u30eb\u7fa4\u3092 aqua \u3067\u5ba3\u8a00\u7684\u306b\u7ba1\u7406\u3067\u304d\u308b\u305f\u3081\u3001\\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306e\u30b3\u30b9\u30c8\u3082\u4e0b\u304c\u308a\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u7d44\u7e54\u3067\u7d71\u4e00\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n## `aqua install` \u306b\u8ffd\u52a0\u3055\u308c\u305f `-a` option\\n\\nv0.7.3 \u3067\u306f `aqua install` \u306b `-a` option \u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\\n`aqua install` \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f global configuration \u306f\u53c2\u7167\u3057\u307e\u305b\u3093\u3002\\nglobal configuration \u3092\u53c2\u7167\u3059\u308b\u306e\u306f `aqua exec` \u53ca\u3073 aqua \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30c4\u30fc\u30eb\u3092\u5b9f\u884c\u3057\u305f\u3068\u304d(\u5185\u90e8\u7684\u306b `aqua exec` \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b)\u3060\u3051\u3067\u3059\u3002\\n\\n`-a` option \u3092\u3064\u3051\u308b\u3068 global configuration \u3082\u542b\u3081\u3066\u5168\u3066\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53c2\u7167\u3057 install \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\naqua.yaml \u3092 Git \u3067\u7ba1\u7406\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u5b9a\u671f\u7684\u306b \u30ea\u30dd\u30b8\u30c8\u30ea\u3092 pull \u3057\u3066 `aqua i -a -l` \u3092\u5b9f\u884c\u3059\u308b\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\u7c21\u5358\u306a\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u305f\u308a\u3001 cron \u3067\u5b9a\u671f\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3068\u3088\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002"},{"id":"/aqua-generate","metadata":{"permalink":"/aqua-generate","source":"@site/blog/aqua-generate.md","title":"aqua \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306b\u751f\u6210\u3059\u308b generate \u30b3\u30de\u30f3\u30c9","description":"* aqua - CLI \u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406","date":"2021-09-05T01:17:39.000Z","formattedDate":"September 5, 2021","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"aqua","permalink":"/tags/aqua"}],"readingTime":3.14,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"aqua \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306b\u751f\u6210\u3059\u308b generate \u30b3\u30de\u30f3\u30c9","date":"2021-09-05T01:17:39.000Z","tags":["oss","aqua"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"aqua \u3067\u7d44\u7e54\u30fb\u30c1\u30fc\u30e0\u306e\u30c4\u30fc\u30eb\u7fa4\u3092\u7ba1\u7406","permalink":"/aqua-global-configs"},"nextItem":{"title":"aqua v0.1.0 \u304b\u3089 v0.5.0 \u3067\u306e\u5909\u66f4\u70b9","permalink":"/aqua-v0.5"}},"content":"* [aqua - CLI \u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406](/aqua)\\n* [aqua v0.1.0 \u304b\u3089 v0.5.0 \u3067\u306e\u5909\u66f4\u70b9](/aqua-v0.5)\\n\\naqua v0.5.1 \u3067\u8ffd\u52a0\u3055\u308c\u305f generate \u3068\u3044\u3046\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\naqua \u3067\u306f Registry \u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3059\u308b\u624b\u9593\u3092\u7701\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\\nRegistry \u3092\u6d3b\u7528\u3059\u308b\u306b\u306f\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3044\u30c4\u30fc\u30eb\u304c Registry \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u304b\u3001\u3055\u308c\u3066\u3044\u308b\u3068\u3057\u305f\u3089 name \u306f\u306a\u306b\u304b\u8abf\u3079\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\nRegistry \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306e\u306b\u898b\u9003\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u3082\u3042\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n\u307e\u305f\u3001 aqua \u3067\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306b\u306f version \u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u591a\u304f\u306e\u5834\u5408\u306f\u3068\u308a\u3042\u3048\u305a\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u306a\u306b\u304b\u3092\u8abf\u3079\u308b\u3053\u3068\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n\u3053\u308c\u3089\u306e\u624b\u9593\u3092\u6e1b\u3089\u3059\u305f\u3081\u306b generate \u3068\u3044\u3046\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306a\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\\n\u3053\u308c\u306f aqua.yaml \u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b Registry \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b packages \u306e\u4e00\u89a7\u304b\u3089 package \u3092 fuzzy search \u306b\u3088\u3063\u3066\u9078\u629e\u3057\u3001\\n\u66f4\u306b `github_release` package \u306e\u5834\u5408\u306f release version \u306e\u4e00\u89a7\u3092 fuzzy search \u306b\u3088\u3063\u3066\u9078\u629e\u3059\u308b\u3053\u3068\u3067 package \u306e YAML \u5b9a\u7fa9\u3092\u51fa\u529b\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\\n\\n\u4f7f\u3063\u3066\u307f\u308b\u306e\u304c\u65e9\u3044\u3067\u3057\u3087\u3046\u3002 aqua.yaml \u306b Standard Registry \u3092\u8ffd\u52a0\u3057\u305f\u4e0a\u3067 `aqua g` \u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n```yaml\\nregistries:\\n- type: standard\\n  ref: v0.2.1 # renovate: depName=suzuki-shunsuke/aqua-registry\\n```\\n\\n\u3059\u308b\u3068 fuzzy search \u304c\u8d77\u52d5\u3057\u3001 package \u304c\u9078\u629e\u3067\u304d\u307e\u3059\u3002\\n\u81ea\u5206\u304c\u4f7f\u3044\u305f\u3044\u30c4\u30fc\u30eb\u540d\u3067\u691c\u7d22\u3057\u3066\u307f\u3066\u3001\u3042\u308c\u3070\u305d\u308c\u3092\u9078\u629e\u3057\u307e\u3059\u3002\\n\\n```\\n  direnv (standard)\\n  consul (standard)\\n  conftest (standard)\\n> golangci-lint (standard)\\n  47/47\\n>\\n```\\n\\ngolangci-lint \u3092\u9078\u3093\u3067\u307f\u307e\u3057\u3087\u3046\u3002\\n\u3059\u308b\u3068 golangci-lint \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4e00\u89a7\u304c\u9078\u629e\u3067\u304d\u307e\u3059\u3002\\n\\n```\\n  v1.40.0\\n  v1.40.1\\n  v1.41.0\\n  v1.41.1\\n> v1.42.0\\n  30/30\\n>\\n```\\n\\nversion \u3092\u9078\u3076\u3068 YAML \u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\\n\\n```console\\n$ aqua g\\n- name: golangci-lint\\n  registry: standard\\n  version: v1.42.0\\n```\\n\\n\u3053\u306e YAML \u3092 `aqua.yaml` \u306e `packages` \u306b\u8ffd\u8a18\u3059\u308c\u3070 OK \u3067\u3059\u3002\\n\\nhelm \u306e\u3088\u3046\u306b GitHub Release \u304b\u3089\u3067\u306f\u306a\u304f\u516c\u5f0f\u30b5\u30a4\u30c8\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3088\u3046\u306a\u30c4\u30fc\u30eb\u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\u306e\u304c\u96e3\u3057\u3044\u306e\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u9078\u629e\u306f\u3067\u304d\u307e\u305b\u3093\u3002\\n\\n```console\\n$ aqua g\\n- name: helm\\n  registry: standard\\n  version: \\"\\"\\n```\\n\\n\u305d\u308c\u3067\u3082 helm \u304c `helm` \u3068\u3044\u3046 name \u3067 standard registry \u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306f\u308f\u304b\u308b\u306e\u3067\u3001\u5341\u5206\u4fbf\u5229\u3067\u3059\u3002\\n\\n\u3061\u306a\u307f\u306b fuzzy search \u306b\u306f [ktr0731/go-fuzzyfinder](https://github.com/ktr0731/go-fuzzyfinder) \u3092\u4f7f\u308f\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u975e\u5e38\u306b\u7c21\u5358\u306b fuzzy search \u304c\u5b9f\u88c5\u3067\u304d\u3066\u3068\u3066\u3082\u4fbf\u5229\u3067\u3057\u305f\u3002"},{"id":"/aqua-v0.5","metadata":{"permalink":"/aqua-v0.5","source":"@site/blog/aqua-v0.5.md","title":"aqua v0.1.0 \u304b\u3089 v0.5.0 \u3067\u306e\u5909\u66f4\u70b9","description":"\u5148\u65e5 aqua v0.1.0 \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u8a18\u4e8b\u3092\u66f8\u3044\u305f\u3070\u304b\u308a\u3067\u3059\u304c\u3001","date":"2021-09-04T02:58:42.000Z","formattedDate":"September 4, 2021","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"aqua","permalink":"/tags/aqua"}],"readingTime":8.745,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"aqua v0.1.0 \u304b\u3089 v0.5.0 \u3067\u306e\u5909\u66f4\u70b9","date":"2021-09-04T02:58:42.000Z","tags":["oss","aqua"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"aqua \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306b\u751f\u6210\u3059\u308b generate \u30b3\u30de\u30f3\u30c9","permalink":"/aqua-generate"},"nextItem":{"title":"2021-08 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-08"}},"content":"[\u5148\u65e5 aqua v0.1.0 \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u8a18\u4e8b\u3092\u66f8\u3044\u305f](/aqua/)\u3070\u304b\u308a\u3067\u3059\u304c\u3001\\n\u305d\u3053\u304b\u3089\u66f4\u306b\u958b\u767a\u3092\u7d9a\u3051\u3066 v0.5.0 \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u306e\u3067\u3001\u5909\u66f4\u70b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\u57fa\u672c\u7684\u306b [Release Note](https://github.com/suzuki-shunsuke/aqua/releases) \u306b\u66f8\u3044\u3066\u3042\u308b\u3068\u304a\u308a\u3067\u3059\u3002\\n\\n* PATH \u3092 project (aqua.yaml) \u6bce\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\\n  * `~/.aqua/bin` \u3092 PATH \u306b\u8ffd\u52a0\u3059\u308c\u3070\u3088\u304f\u306a\u308a\u307e\u3057\u305f\\n  * direnv \u306a\u3069\u3092\u4f7f\u3063\u3066\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\\n* `install` \u30b3\u30de\u30f3\u30c9\u306b `--test` option \u3092\u8ffd\u52a0\u3057\u3001 `file.src` \u306e\u8a2d\u5b9a\u304c\u6b63\u3057\u3044\u304b\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n  * CI \u3067 aqua \u306e\u8a2d\u5b9a\u3092\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306b\u4fbf\u5229\\n* GitHub Release \u3060\u3051\u3067\u306a\u304f\u3001\u4efb\u610f\u306e URL \u304b\u3089 tool \u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30fb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n  * Go \u3084 helm, Hashicorp \u306e product \u306e\u3088\u3046\u306a\u516c\u5f0f\u30b5\u30a4\u30c8\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30bf\u30a4\u30d7\u306e\u30c4\u30fc\u30eb\u3082 install \u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n* Breaking Change: `inline_registry` \u306e\u8a2d\u5b9a\u306e\u5f62\u5f0f\u3092\u5909\u66f4\u3057\u307e\u3057\u305f\\n* aqua \u306e\u8a2d\u5b9a\u306e\u518d\u5229\u7528\u6027\u3092\u9ad8\u3081\u308b `Registry` \u3068\u3044\u3046\u4ed5\u7d44\u307f\u3092\u5c0e\u5165\u3057\u307e\u3057\u305f\\n  * standard `Registry` \u3092\u516c\u958b\u3057\u307e\u3057\u305f https://github.com/suzuki-shunsuke/aqua-registry\\n* \u7c21\u5358\u306a slide \u3092\u516c\u958b\u3057\u307e\u3057\u305f: https://speakerdeck.com/szksh/introduction-of-aqua\\n\\n## PATH \u3092 project (aqua.yaml) \u6bce\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\\n\\naqua v0.1.0 \u3067\u306f symbolic link \u3092 aqua.yaml \u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e `.aqua/bin` \u914d\u4e0b\u306b\u4f5c\u6210\u3057\u3066\u304a\u308a\u3001\u3053\u3053\u3092 PATH \u306b\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002\\ndirenv \u3068\u304b\u3092\u4f7f\u3046\u3068\u4fbf\u5229\u3067\u3059\u304c\u3001\u9593\u63a5\u7684\u306b(?) aqua \u304c direnv \u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u5f62\u306b\u306a\u308a\u3001\u5fae\u5999\u3067\u3057\u305f\u3002\\n\\naqua v0.5.0 \u3067\u306f symbolic link \u3092 `~/.aqua/bin` \u914d\u4e0b\u306b\u4f5c\u6210\u3059\u308b\u305f\u3081\u3001 .bashrc \u306a\u3069\u3067 `~/.aqua/bin` \u3092 PATH \u306b\u8ffd\u52a0\u3057\u3066\u304a\u3051\u3070 project \u3054\u3068\u306b\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u306f\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\n\u3061\u306a\u307f\u306b\u4f5c\u6210\u3055\u308c\u308b symbolic link \u306f aqua-proxy \u3078\u306e\u30ea\u30f3\u30af\u3067\u3042\u308a\u3001\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u306f\u4f9d\u5b58\u3057\u306a\u3044\u306e\u3067 `~/.aqua/bin` \u3092\u5171\u6709\u3057\u3066\u3082\u5e72\u6e09\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n### [\u5fdc\u7528] `~/.aqua/bin` \u914d\u4e0b\u306b symbolic link \u3092\u4f5c\u308b\u4e0a\u3067\u306e\u8ab2\u984c\u3068\u305d\u308c\u306e\u89e3\u6c7a\u6cd5\\n\\n`~/.aqua/bin` \u914d\u4e0b\u306b symbolic link \u3092\u4f5c\u3063\u3066 PATH \u306b\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3001\u4e00\u3064\u5927\u304d\u306a\u8ab2\u984c\u304c\u3042\u308a\u307e\u3059\\n(\u3060\u304b\u3089\u3053\u305d v0.1.0 \u3067\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b symbolic link \u3092\u4f5c\u3063\u3066\u3044\u307e\u3057\u305f)\u3002\\n`~/.aqua/bin` \u914d\u4e0b\u306b symbolic link \u3092\u4f5c\u3063\u3066 PATH \u306b\u8ffd\u52a0\u3059\u308b\u3068\u3001\u57fa\u672c\u7684\u306b\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u547c\u3070\u308c\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\\n\u305d\u306e\u30c4\u30fc\u30eb\u3092 aqua \u3067\u7ba1\u7406\u3057\u3066\u3044\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u914d\u4e0b\u306a\u3089\u305d\u308c\u3067\u826f\u3044\u3067\u3059\u304c\u3001\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u3001\u672c\u6765 aqua \u4ee5\u5916\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3082\u306e\u3092\u5b9f\u884c\u3057\u305f\u304f\u3066\u3082\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3002\\n\u4f8b\u3048\u3070 homebrew \u3067 jq \u3092 install \u3057\u3066\u3044\u3066\u3001\u3042\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f aqua \u3092\u4f7f\u3063\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u56fa\u5b9a\u3057\u305f\u3082\u306e\u3092\u4f7f\u3044\u305f\u3044\u304c\u3001\u305d\u308c\u4ee5\u5916\u3067\u306f homebrew \u3067 install \u3057\u305f\u3082\u306e\u3092\u4f7f\u3044\u305f\u3044\u3068\u3044\u3063\u305f\u5834\u5408\u306b\u554f\u984c\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n\u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u3001 aqua \u3067\u306f\u30c4\u30fc\u30eb\u3092\u547c\u3073\u51fa\u3059\u969b\u306b `PATH` \u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066 aqua-proxy \u3078\u306e\u30ea\u30f3\u30af\u3068\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u306f\u9664\u5916\u3059\u308b\u3068\u3044\u3046\u30cf\u30c3\u30af(?)\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n## `install` \u30b3\u30de\u30f3\u30c9\u306b `--test` option \u3092\u8ffd\u52a0\u3057\u3001 `file.src` \u306e\u8a2d\u5b9a\u304c\u6b63\u3057\u3044\u304b\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n\\n\u5730\u5473\u306a\u66f4\u65b0\u3067\u3059\u304c\u3001 aqua \u306e\u8a2d\u5b9a\u3092\u66f4\u65b0\u3057\u305f\u969b\u306b CI \u3067\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306b\u4fbf\u5229\u3067\u3059\u3002\\n`--test` option \u306a\u3057\u3060\u3068\u3001 warning \u306f\u51fa\u529b\u3057\u307e\u3059\u304c\u3001 exit code \u306f 0 \u306b\u306a\u308a\u307e\u3059\u3002\\n\\n## GitHub Release \u3060\u3051\u3067\u306a\u304f\u3001\u4efb\u610f\u306e URL \u304b\u3089 tool \u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30fb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\\n\\n\u3061\u306a\u307f\u306b\u3001 GitHub Release \u3067\u516c\u958b\u3055\u308c\u3066\u306a\u3044\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3067\u3082\u3001\\nGitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u3067 versioning \u3055\u308c\u3066\u3044\u3066 Renovate \u306e `github_release` data source \u3067\u81ea\u52d5\u66f4\u65b0\u3067\u304d\u308b\u30b1\u30fc\u30b9\u306f\u5c11\u306a\u304f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## Breaking Change: `inline_registry` \u306e\u8a2d\u5b9a\u306e\u5f62\u5f0f\u3092\u5909\u66f4\u3057\u307e\u3057\u305f\\n\\n\u5c0f\u3055\u306a breaking change \u3067\u3059\u304c\u3001`inline_registry` \u306e\u5f62\u5f0f\u304c\u5909\u308f\u308a\u307e\u3057\u305f\u3002\\n\\nAS IS\\n\\n```yaml\\ninline_registry:\\n- name: jq\\n  type: github_release\\n  repo_owner: stedolan\\n  repo_name: jq\\n  asset: \'jq-{{if eq .OS \\"darwin\\"}}osx{{else}}{{.OS}}{{end}}-{{.Arch}}\'\\n  files:\\n  - name: jq\\n```\\n\\nTO BE\\n\\n```yaml\\ninline_registry:\\n  packages:\\n  - name: jq\\n    type: github_release\\n    repo_owner: stedolan\\n    repo_name: jq\\n    asset: \'jq-{{if eq .OS \\"darwin\\"}}osx{{else}}{{.OS}}{{end}}-{{.Arch}}\'\\n    files:\\n    - name: jq\\n```\\n\\n## aqua \u306e\u8a2d\u5b9a\u306e\u518d\u5229\u7528\u6027\u3092\u9ad8\u3081\u308b `Registry` \u3068\u3044\u3046\u4ed5\u7d44\u307f\u3092\u5c0e\u5165\u3057\u307e\u3057\u305f\\n\\n\u3053\u308c\u304c\u4e00\u756a\u5927\u304d\u306a\u66f4\u65b0\u3067\u3059\u3002\\naqua \u3092\u4f7f\u3046\u306b\u306f\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3092 YAML \u3067\u8a18\u8ff0\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u304c\u3001\\n\u3053\u308c\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u624b\u9593\u3067\u3059\u3057\u3001\u65b0\u898f\u30e6\u30fc\u30b6\u30fc\u306b\u3068\u3063\u3066\u969c\u58c1\u3068\u306a\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n\u30c4\u30fc\u30eb\u3068\u305d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5b9a\u7fa9\u3057\u305f\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u3066\u307b\u3057\u3044\u3082\u306e\u3067\u3059\u3002\\n\u30c4\u30fc\u30eb\u3068\u305d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5b9a\u7fa9\u306f `aqua.yaml` \u306e `packages` \u306e\u90e8\u5206\u306a\u306e\u3067\u3001\u305d\u308c\u4ee5\u5916\u306e\u8a2d\u5b9a\u3092\u5982\u4f55\u306b\u7c21\u7565\u5316\u3059\u308b\u304b\u3068\u3044\u3046\u8a71\u306b\u306a\u308a\u307e\u3059\u3002\\n\\nRegistry \u306f\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306e\u8a2d\u5b9a\u3092\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u56fa\u6709\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u8a2d\u5b9a\u3068\u306f\u72ec\u7acb\u3055\u305b\u3001\u518d\u5229\u7528\u53ef\u80fd\u306a\u5f62\u3067\u5171\u6709\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\\n\\nRegistry \u306b\u306f\u73fe\u72b6 4 \u7a2e\u985e\u3042\u308a\u307e\u3059\u3002\\n\\n* inline regisry: aqua.yaml \u306e\u4e2d\u306b\u76f4\u63a5 install \u65b9\u6cd5\u3092\u5b9a\u7fa9\u3059\u308b\u3002 v0.1.0 \u304b\u3089\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u65b9\u6cd5\\n* github_content registry: GitHub Repository \u306b\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u3092 Registry \u3068\u3057\u3066\u53c2\u7167\u3059\u308b\u65b9\u6cd5\\n* local registry: GitHub Repository \u306b\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u3092 Regisry \u3068\u3057\u3066\u53c2\u7167\u3059\u308b\u65b9\u6cd5\\n* standard registry: \u81ea\u5206\u304c\u30e1\u30f3\u30c6\u3057\u3066\u3044\u308b github_content registry \u306e\u30a8\u30a4\u30ea\u30a2\u30b9\\n\\n### inline registry\\n\\ninline registry \u306f\u5f93\u6765\u304b\u3089\u3042\u308b\u3084\u3064\u3067\u3001 aqua.yaml \u5185\u306b\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\\n\\n```yaml\\ninline_registry:\\n  packages:\\n  - name: jq\\n    type: github_release\\n    repo_owner: stedolan\\n    repo_name: jq\\n    asset: \'jq-{{if eq .OS \\"darwin\\"}}osx{{else}}{{.OS}}{{end}}-{{.Arch}}\'\\n    files:\\n    - name: jq\\n```\\n\\n\u30b7\u30f3\u30d7\u30eb\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u30b3\u30d4\u30da\u3059\u308b\u4ee5\u5916\u306b\u518d\u5229\u7528\u6027\u304c\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n## local registry\\n\\nlocal registry \u306f\u30ed\u30fc\u30ab\u30eb\u306b\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u53c2\u7167\u3059\u308b registry \u3067\u3059\u3002\\n\u7d76\u5bfe\u30d1\u30b9\u304b\u3001 aqua.yaml \u304b\u3089\u306e\u76f8\u5bfe\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\\n\\n## github_content registry\\n\\n\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u306f\u6b21\u306e\u3088\u3046\u306b Registry \u3092\u5b9a\u7fa9\u3059\u308c\u3070\u3042\u3068\u306f `packages` \u3067 Registry \u3092\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\\nGitHub Access Token \u3092\u74b0\u5883\u5909\u6570 `GITHUB_TOKEN` \u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```yaml\\nregistries:\\n- name: suzuki-shunsuke/aqua-registry\\n  type: github_content\\n  repo_owner: suzuki-shunsuke\\n  repo_name: aqua-registry\\n  ref: v0.2.0 # renovate: depName=suzuki-shunsuke/aqua-registry\\n  path: registry.yaml\\n\\npackages:\\n- name: conftest\\n  registry: standard\\n  version: v0.27.0 # renovate: depName=open-policy-agent/conftest\\n```\\n\\n### Registry \u3092\u516c\u958b\u3059\u308b\\n\\n\u81ea\u5206\u3067 Registry \u3092\u516c\u958b\u3057\u305f\u3044\u5834\u5408\u306f GitHub Repository \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\u3060\u3051\u3067 OK \u3067\u3059\u3002\\ne.g. https://github.com/suzuki-shunsuke/aqua-registry/blob/main/registry.yaml\\n\\n## Standard Registry\\n\\nStandard Registry \u3082\u4f5c\u308a\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/aqua-registry\\n\\njq \u3084 gh, kubectl, Terraform \u306a\u3069\u6709\u540d\u306a\u30c4\u30fc\u30eb\u306f\u3053\u306e Registry \u3092\u4f7f\u3048\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u304c\u3001\\n\u5f53\u7136 PR \u3082\u53d7\u3051\u4ed8\u3051\u3066\u3044\u308b\u306e\u3067\u3001\u8ffd\u52a0\u3057\u3066\u307b\u3057\u3044\u30c4\u30fc\u30eb\u304c\u3042\u308c\u3070 PR \u3092\u6295\u3052\u3066\u304f\u3060\u3055\u3044\u3002\\n\\nOfficial Registry \u3092 github_content Registry \u3068\u3057\u3066\u5229\u7528\u3059\u308b\u3053\u3068\u3082\u5f53\u7136\u3067\u304d\u307e\u3059\u304c\u3001\\n\u3088\u308a\u7c21\u6f54\u306b\u66f8\u3051\u308b\u3088\u3046\u306b `type: standard` \u3068\u3044\u3046 Registry \u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nAS IS\\n\\n```yaml\\nregistries:\\n- name: standard\\n  type: github_content\\n  repo_owner: suzuki-shunsuke\\n  repo_name: aqua-registry\\n  ref: v0.2.0 # renovate: depName=suzuki-shunsuke/aqua-registry\\n  path: registry.yaml\\n```\\n\\nTO BE\\n\\n```yaml\\nregistries:\\n- type: standard\\n  ref: v0.2.0 # renovate: depName=suzuki-shunsuke/aqua-registry\\n```\\n\\n\u4e0a 2 \u3064\u306f\u7b49\u4fa1\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u5f8c\u8005\u306e\u307b\u3046\u304c\u7c21\u6f54\u3067\u3059\u3002"},{"id":"/what-i-did-2021-08","metadata":{"permalink":"/what-i-did-2021-08","source":"@site/blog/what-i-did-2021-08.md","title":"2021-08 \u3084\u3063\u305f\u3053\u3068","description":"\u4ed5\u4e8b","date":"2021-09-02T05:33:16.000Z","formattedDate":"September 2, 2021","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":1.61,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2021-08 \u3084\u3063\u305f\u3053\u3068","date":"2021-09-02T05:33:16.000Z","archives":["2021/08"],"tags":["job","oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"aqua v0.1.0 \u304b\u3089 v0.5.0 \u3067\u306e\u5909\u66f4\u70b9","permalink":"/aqua-v0.5"},"nextItem":{"title":"aqua - CLI \u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406","permalink":"/aqua"}},"content":"## \u4ed5\u4e8b\\n\\n* AWS IAM User \u3092\u524a\u9664\u3059\u308b\u969b\u306b force_destroy \u304c true \u306b\u306a\u3063\u3066\u3044\u308b\u304b Conftest \u3067\u30c6\u30b9\u30c8\\n* Terraform \u306e State \u5206\u5272\\n* Terraform Modules \u3092\u5225\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u7ba1\u7406\u3057\u3066 versioning\\n* git-secrets \u3092 secretlint \u306b\u79fb\u884c\\n  * git-secrets \u304c\u30e1\u30f3\u30c6\u3055\u308c\u3066\u306a\u304f\u3066\u3001\u65e2\u77e5\u30d0\u30b0\u304c\u653e\u7f6e\u3055\u308c\u3066\u3044\u308b\u304b\u3089\\n* CI \u3067 terraform fmt \u306b\u3088\u308b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u81ea\u52d5\u5316\\n* WIP: AWS WAF \u306e COUNT, BLOCK \u30ed\u30b0\u3092 Firehose \u3067\u62bd\u51fa\\n* WIP: AWS CodeBuild \u3067 Provisioning Error \u304c\u767a\u751f\u3057\u305f\u3089\u81ea\u52d5\u3067 Retry\\n* WIP: AWS CodeBuild \u306e\u305f\u3081\u306e GitHub App \u306e\u958b\u767a\\n* WIP: AWS SSO \u306b\u3064\u3044\u3066\u8abf\u67fb\\n\\n## OSS Contribution\\n\\nRenovate \u306e GitHub Actions \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u4fee\u6b63\u3092\u3057\u307e\u3057\u305f\u3002\\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4e2d\u306b\u66f8\u304b\u308c\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u3092 Renovate \u3067\u81ea\u52d5 update \u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n* [docs: fix broken links and update GitHub Actions](https://github.com/renovatebot/github-action/pull/556)\\n* [chore: update GitHub Actions in README by Renovate](https://github.com/renovatebot/github-action/pull/557)\\n\\n## \u65b0\u305f\u306b\u4f5c\u3063\u305f OSS\\n\\n* [logrus-error](https://github.com/suzuki-shunsuke/logrus-error): [logrus](https://github.com/sirupsen/logrus).Fields \u3092 error \u306b\u57cb\u3081\u8fbc\u3080 Go \u306e\u8584\u3044\u30e9\u30a4\u30d6\u30e9\u30ea\\n* [aqua](https://github.com/suzuki-shunsuke/aqua): Command Line Tools Version Manager\\n  * [aqua-proxy](https://github.com/suzuki-shunsuke/aqua-proxy): aqua \u306e\u5185\u90e8\u30c4\u30fc\u30eb \\n  * [aqua-installer](https://github.com/suzuki-shunsuke/aqua-installer): aqua \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3068 GitHub Actions\\n* [go-checkout-github-merged-commit](https://github.com/suzuki-shunsuke/go-checkout-github-merged-commit): PR \u306e merged commit \u3092 checkout \u3059\u308b Go \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\\n* [aws-codebuild-retry](https://github.com/suzuki-shunsuke/aws-codebuild-retry): AWS CodeBuild \u3092 Retry \u3059\u308b Lambda Function\\n\\n## Blog\\n\\n* https://techblog.szksh.cloud/archives/2021/08/\\n  * [aqua - CLI \u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406](https://techblog.szksh.cloud/aqua/)\\n  * [AWS CodeBuild \u3092\u5b9f\u884c\u3059\u308b Github App \u3092\u4f5c\u308b](https://techblog.szksh.cloud/github-app-for-codebuild/)\\n* Quipper\\n  * [Terraform \u306e CI \u306b tfmigrate \u3092\u5c0e\u5165\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2021/08/11/080000)\\n  * [AWS IAM \u306e\u7ba1\u7406\u3092 miam \u304b\u3089 Terraform \u306b\u79fb\u884c\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2021/08/02/080000)"},{"id":"/aqua","metadata":{"permalink":"/aqua","source":"@site/blog/aqua.md","title":"aqua - CLI \u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406","description":"2021-09-04 \u8ffd\u8a18: aqua v0.1.0 \u304b\u3089 v0.5.0 \u3067\u306e\u5909\u66f4\u70b9","date":"2021-08-28T00:07:38.000Z","formattedDate":"August 28, 2021","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"aqua","permalink":"/tags/aqua"}],"readingTime":15.575,"truncated":false,"authors":[],"frontMatter":{"title":"aqua - CLI \u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406","date":"2021-08-28T00:07:38.000Z","archives":["2021/08"],"tags":["oss","aqua"]},"prevItem":{"title":"2021-08 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-08"},"nextItem":{"title":"AWS CodeBuild \u3092\u5b9f\u884c\u3059\u308b Github App \u3092\u4f5c\u308b","permalink":"/github-app-for-codebuild"}},"content":"2021-09-04 \u8ffd\u8a18: [aqua v0.1.0 \u304b\u3089 v0.5.0 \u3067\u306e\u5909\u66f4\u70b9](/aqua-v0.5)\\n\\n[aqua](https://github.com/suzuki-shunsuke/aqua) \u3068\u3044\u3046 OSS \u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\u8a18\u4e8b\u306e\u5185\u5bb9\u306f aqua v0.1.0 \u306b\u57fa\u3065\u304d\u307e\u3059\u3002\u5c06\u6765\u7684\u306b\u4ed5\u69d8\u304c\u5909\u308f\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n## aqua \u3068\u306f\\n\\naqua \u306f CLI \u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u306e\u305f\u3081\u306e CLI \u3067\u3059\u3002\\naqua \u3067\u7ba1\u7406\u3059\u308b\u4e3b\u306a\u5bfe\u8c61\u306f GitHub Release \u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\\nYAML \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u3044\u3066\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u6307\u5b9a\u3057\u305f\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u3001 `aqua install` \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\\n[jq](https://stedolan.github.io/jq/), [conftest](https://www.conftest.dev/) \u306a\u3069\u304c GitHub Release \u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\\n\\n```yaml\\npackages:\\n- name: jq\\n  registry: inline\\n  version: jq-1.6\\n- name: conftest\\n  registry: inline\\n  version: v0.27.0\\ninline_registry:\\n- name: jq\\n  type: github_release\\n  repo_owner: stedolan\\n  repo_name: jq\\n  asset: \'jq-{{if eq .OS \\"darwin\\"}}osx-amd64{{else}}{{if eq .OS \\"linux\\"}}linux64{{else}}win64.exe{{end}}{{end}}\'\\n  files:\\n  - name: jq\\n- name: conftest\\n  type: github_release\\n  repo_owner: open-policy-agent\\n  repo_name: conftest\\n  asset: \'conftest_{{trimPrefix \\"v\\" .Package.Version}}_{{title .OS}}_x86_64.tar.gz\'\\n  files:\\n  - name: conftest\\n```\\n\\n\u3061\u306a\u307f\u306b\u4e0a\u8a18\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\\n\\n```yaml\\n  asset: \'conftest_{{trimPrefix \\"v\\" .Package.Version}}_{{title .OS}}_x86_64.tar.gz\'\\n```\\n\\n\u306e\u90e8\u5206\u3067\u306f Go \u306e [text/template](https://pkg.go.dev/text/template) \u3068 [sprig](http://masterminds.github.io/sprig/) \u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n\u30c4\u30fc\u30eb\u3054\u3068\u306b URL \u3092\u8abf\u3079\u3066 download \u3057\u3066 tarball \u306a\u3069\u3092\u5c55\u958b\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u306a\u3069\u306e\u9762\u5012\u306a\u4f5c\u696d\u3092 aqua \u3067\u81ea\u52d5\u5316\u3067\u304d\u307e\u3059\u3002\\nupdate \u3082\u57fa\u672c\u7684\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e version \u3092\u66f4\u65b0\u3059\u308b\u3060\u3051\u3067 OK \u3067\u3059\u3002\\n\\naqua \u3092\u4f7f\u3046\u3068\u540c\u3058\u30c4\u30fc\u30eb\u306e\u8907\u6570\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u7ba1\u7406\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3088\u3063\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5207\u308a\u66ff\u3048\u308b\u3068\u3044\u3063\u305f\u3053\u3068\u3082\u5bb9\u6613\u306b\u3067\u304d\u307e\u3059\u3002\\n\\n## 3 \u3064\u306e\u4e3b\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\\n\\naqua \u3067\u306f\u4ee5\u4e0b\u306e 3 \u3064\u306e\u4e3b\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n* CI/CD \u3067\u5fc5\u8981\u306a\u30c4\u30fc\u30eb\u306e\u7ba1\u7406\\n* \u30ed\u30fc\u30ab\u30eb\u3067\u306e\u958b\u767a\u306b\u5fc5\u8981\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u30ea\u30dd\u30b8\u30c8\u30ea)\u56fa\u6709\u306e\u30c4\u30fc\u30eb\u306e\u7ba1\u7406\\n* \u7279\u5b9a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u30ea\u30dd\u30b8\u30c8\u30ea)\u306b\u3088\u3089\u306a\u3044\u30c4\u30fc\u30eb\u306e\u7ba1\u7406\\n\\n### \u30e6\u30fc\u30b9\u30b1\u30fc\u30b91: CI/CD \u3067\u5fc5\u8981\u306a\u30c4\u30fc\u30eb\u306e\u7ba1\u7406\\n\\n\u4f8b\u3048\u3070 Terraform \u306e Monorepo \u306e CI \u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69d8\u3005\u306a\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u3044\u305f\u3068\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n* [gh](https://cli.github.com/)\\n* [jq](https://stedolan.github.io/jq/)\\n* [tfsec](https://tfsec.dev/)\\n* [tflint](https://github.com/terraform-linters/tflint)\\n* [tfmigrate](https://github.com/minamijoyo/tfmigrate)\\n* [tfcmt](https://github.com/suzuki-shunsuke/tfcmt)\\n* [opa](https://github.com/open-policy-agent/opa)\\n* [conftest](https://www.conftest.dev/)\\n* [shfmt](https://github.com/mvdan/sh)\\n* [shellcheck](https://github.com/koalaman/shellcheck)\\n* [github-comment](https://github.com/suzuki-shunsuke/github-comment)\\n\\n\u3053\u308c\u3089\u30921\u500b1\u500b curl \u306a\u3069\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u306e\u306f\u9762\u5012\u3067\u3059\u304c\u3001\\naqua \u3067\u3042\u308c\u3070\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5ba3\u8a00\u7684\u306b\u66f8\u3044\u3066 `aqua i` \u3092\u5b9f\u884c\u3059\u308c\u3070\u7d42\u308f\u308a\u3067\u3059\u3002\\n\u65b0\u305f\u306b\u30c4\u30fc\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3067\u3082\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u8a18\u3059\u308c\u3070\u3088\u304f\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3067\u304d\u308b\u306e\u3067\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3057\u3066\u306a\u3044\u306e\u306b\u6025\u306b\u30c4\u30fc\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u305b\u3093\u3057\u3001 [Renovate \u306e Regex Manager](https://docs.renovatebot.com/modules/manager/regex/) \u306a\u3069\u3092\u4f7f\u3048\u3070\u66f4\u65b0\u3092\u81ea\u52d5\u5316\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n\\n### \u30e6\u30fc\u30b9\u30b1\u30fc\u30b92: \u30ed\u30fc\u30ab\u30eb\u3067\u306e\u958b\u767a\u306b\u5fc5\u8981\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u30ea\u30dd\u30b8\u30c8\u30ea)\u56fa\u6709\u306e\u30c4\u30fc\u30eb\u306e\u7ba1\u7406\\n\\n\u3042\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u958b\u767a\u306b\u5fc5\u8981\u306a\u30c4\u30fc\u30eb\u3092 aqua \u3067\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u76f4\u4e0b\u306b `aqua.yaml` \u3092\u7f6e\u3044\u3066\u304a\u3051\u3070 OK \u3067\u3059\u3002\\n\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u4eba\u306b\u3088\u3063\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9055\u3063\u305f\u308a\u3059\u308b\u554f\u984c\u3082\u89e3\u6d88\u3067\u304d\u307e\u3059\u3002\\n`aqua.yaml` \u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b `.aqua` \u304c\u4f5c\u6210\u3055\u308c\u308b\u306e\u3067\u305d\u308c\u3092 .gitignore \u306b\u8ffd\u52a0\u3057\u3001 `.aqua/bin` \u3092 PATH \u306b\u8ffd\u52a0\u3057\u307e\u3057\u3087\u3046\u3002\\ndirenv \u3092\u4f7f\u3044\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u76f4\u4e0b\u306b .envrc \u3092\u7f6e\u3044\u3066 `.aqua/bin` \u3092 PATH \u306b\u8ffd\u52a0\u3059\u308b\u3068\u4fbf\u5229\u3067\u3059\u3002\\n\\n```\\naqua.yaml\\n.aqua/bin\\n.envrc\\n```\\n\\n.envrc\\n\\n```\\nPATH_add .aqua/bin\\n```\\n\\n`.aqua/bin` \u3092 PATH \u306b\u8ffd\u52a0\u3057\u306a\u304f\u3066\u3082 `aqua exec -- <\u30b3\u30de\u30f3\u30c9> ...` \u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n\\n### \u30e6\u30fc\u30b9\u30b1\u30fc\u30b93: \u7279\u5b9a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u30ea\u30dd\u30b8\u30c8\u30ea)\u306b\u3088\u3089\u306a\u3044\u30c4\u30fc\u30eb\u306e\u7ba1\u7406\\n\\n\u7279\u5b9a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3088\u3089\u305a\u306b\u30c4\u30fc\u30eb\u3092 laptop \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3044\u5834\u5408\u306b\u3082\u4f7f\u3048\u307e\u3059\u3002\\n`~/.aqua/global/aqua.yaml` \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8a18\u8ff0\u3057\u3001 `~/.aqua/global/.aqua/bin` \u3092 PATH \u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n```sh\\nexport PATH=$HOME/.aqua/global/.aqua/bin:$PATH\\n```\\n\\n\u305d\u3057\u3066 `~/.aqua/global` \u914d\u4e0b\u3067 `aqua i` \u3092\u5b9f\u884c\u3059\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u3067\u304d\u307e\u3059\u3002\\n`~/.aqua/global` \u3092 Git \u3067\u7ba1\u7406\u3057\u3066 GitHub \u306a\u3069\u3067\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u306e\u3082\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\\nhttps://github.com/suzuki-shunsuke/my-aqua-config\\n\\n## akoi \u3068\u306e\u9055\u3044\\n\\n\u3068\u3053\u308d\u3067\u3001\u81ea\u5206\u306f aqua \u306b\u4f3c\u305f\u30c4\u30fc\u30eb\u3068\u3057\u3066 [akoi](http://github.com/suzuki-shunsuke/akoi) \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u516c\u958b\u3057\u3066\u3044\u3066\u3001\u81ea\u5206\u3082\u3053\u308c\u307e\u3067\u3053\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u304d\u307e\u3057\u305f\u3002\\naqua \u3068 akoi \u306f\u300cCLI \u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u300d\u3068\u3044\u3046\u76ee\u7684\u30fb\u30b4\u30fc\u30eb\u306f\u540c\u3058\u3067\u3059\u3002\\nakoi \u3082\u7d50\u69cb\u4fbf\u5229\u306a\u30c4\u30fc\u30eb\u3067\u3059\u304c\u3001 akoi \u304c\u62b1\u3048\u308b\u69d8\u3005\u306a\u8ab2\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b aqua \u3092\u958b\u767a\u3057\u3066\u3044\u307e\u3059\u3002\\naqua \u306f akoi \u306e\u3044\u308f\u3070\u5f8c\u7d99\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\u305f\u3060\u3057\u30b3\u30fc\u30c9\u306f\u5168\u304f\u5225\u7269\u3067\u3059\u3057\u3001\u4e92\u63db\u6027\u3082\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n### akoi \u3068\u6bd4\u3079\u305f aqua \u306e\u826f\u3044\u70b9\\n\\n* GitHub Access Token \u3092\u4f7f\u3063\u305f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u30b5\u30dd\u30fc\u30c8\\n  * private repository \u3092\u30b5\u30dd\u30fc\u30c8\\n  * akoi \u306f anonymous \u306a\u30a2\u30af\u30bb\u30b9\u306a\u306e\u3067 rate limit \u306b\u5f15\u3063\u304b\u304b\u308a\u3084\u3059\u3044\\n* \u7ba1\u7406\u5bfe\u8c61\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306b\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u53ef\u80fd\\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u305f\u3042\u3068\u306b install \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\\n  * akoi \u306f symbolic link \u3092\u4f5c\u308a\u76f4\u3059\u305f\u3081\u306b install \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\\n* \u7ba1\u7406\u5bfe\u8c61\u306e\u30c4\u30fc\u30eb\u306e\u5b9f\u4f53\u3092\u5171\u6709\u3067\u304d\u308b\\n  * project \u3054\u3068\u306b\u30c4\u30fc\u30eb\u3092 install \u3059\u308b\u5fc5\u8981\u304c\u306a\u3044(\u8a08\u7b97\u8cc7\u6e90\u306e\u52b9\u7387\u5316)\\n  * akoi \u3068\u9055\u3063\u3066 \u30c4\u30fc\u30eb\u306b\u3088\u3063\u3066\u5b9f\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306f\u4e00\u610f\u306b\u6c7a\u307e\u308b\u306e\u3067\u3001\u5e72\u6e09\u3059\u308b\u3053\u3068\u304c\u306a\u304f\u5b89\u5168\u306b\u5171\u6709\u3067\u304d\u308b\\n* \u4e8b\u524d\u306b archive \u306e\u4e2d\u306e\u30d1\u30b9\u3092\u77e5\u3063\u3066\u3044\u308b\u5fc5\u8981\u304c\u306a\u3044\\n  * akoi \u306f install \u6642\u306b archive \u3092\u5c55\u958b\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3001\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u4f5c\u6210\u3059\u308b\\n    * \u30d1\u30b9\u304c\u9593\u9055\u3063\u3066\u3044\u308b\u3068\u5931\u6557\u3057\u3001 download \u304b\u3089\u3084\u308a\u76f4\u3057\u306b\u306a\u308b\\n    * \u305d\u306e\u305f\u3081\u3001\u65b0\u3057\u3044\u30c4\u30fc\u30eb\u3092 akoi \u3067\u7ba1\u7406\u3059\u308b\u5834\u5408\u306f\u307e\u305a archive \u306e\u69cb\u9020\u3092\u8abf\u3079\u308b\u5fc5\u8981\u304c\u3042\u308b\\n  * aqua \u306f install \u3057\u305f\u3042\u3068\u306b ~/.aqua \u914d\u4e0b\u3092\u898b\u3066 file.src \u3092\u4fee\u6b63\u3059\u308c\u3070\u826f\u3044\u3057\u3001\u9593\u9055\u3063\u3066\u3066\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u306b\u5931\u6557\u3057\u3066\u3082 download \u306e\u3084\u308a\u76f4\u3057\u3068\u304b\u306f\u306a\u3044\\n* `bin_path`, `link_path` \u3088\u3046\u306a\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u8003\u3048\u306a\u304f\u3066\u826f\u3044\\n  * akoi \u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306a\u3069\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\\n  * \u3069\u3046\u8a2d\u5b9a\u3059\u3079\u304d\u304b\u60a9\u307e\u3057\u3044\u3057\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3088\u3063\u3066\u8a2d\u5b9a\u304c\u9055\u3063\u305f\u308a\u3057\u3066\u8a2d\u5b9a\u3092\u7d71\u4e00\u3059\u308b\u306e\u304c\u96e3\u3057\u3044\\n  * aqua \u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306a\u3069\u304c\u8a2d\u5b9a\u3067\u304d\u306a\u3044\u306e\u3067\u30e6\u30fc\u30b6\u30fc\u304c\u8ff7\u3046\u5fc5\u8981\u304c\u306a\u3044\\n\\n#### \u7ba1\u7406\u5bfe\u8c61\u306e\u30c4\u30fc\u30eb\u306e\u5b9f\u4f53\u3092\u5171\u6709\u3067\u304d\u308b\\n\\naqua \u306f\u30c4\u30fc\u30eb\u306e\u5b9f\u4f53\u3092 AQUA_ROOT_DIR `~/.aqua` \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u5171\u6709\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\u8907\u6570\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u540c\u3058\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u540c\u3058\u30c4\u30fc\u30eb\u3092\u4f7f\u3046\u5834\u5408\u306b\u5171\u6709\u3067\u304d\u308b\u306e\u3067\u3001\\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u304b\u304b\u308b\u6642\u9593\u3092\u77ed\u7e2e\u3067\u304d\u307e\u3059\u3057\u3001\u7121\u99c4\u306b\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3092\u6d88\u8cbb\u3059\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u305b\u3093\u3002\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u3088\u3063\u3066\u52d5\u7684\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u53d6\u5f97\u3059\u308b\u306e\u3067\u3001\u5171\u6709\u3057\u3066\u3044\u3066\u3082\u30ea\u30dd\u30b8\u30c8\u30ea\u3054\u3068\u306b\u7570\u306a\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u3046\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n\\n\u5b89\u5168\u306b\u5171\u6709\u3067\u304d\u308b\u3088\u3046\u306b\u30c4\u30fc\u30eb\u306e\u5b9f\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5143\u306b\u3088\u3063\u3066\u30e6\u30cb\u30fc\u30af\u304b\u3064\u4e00\u610f\u306b\u6c7a\u307e\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\u30e6\u30fc\u30b6\u30fc\u304c\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093(\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u5909\u3048\u3089\u308c\u307e\u3059\u304c\u3001\u30eb\u30fc\u30c8\u4ee5\u4e0b\u306f\u5909\u3048\u3089\u308c\u307e\u305b\u3093)\u3002\\n\\n\u4f8b\u3048\u3070 OSX \u3067 jq-1.6 \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```\\n.aqua/pkgs/github_release/github.com/stedolan/jq/jq-1.6/jq-osx-amd64/jq-osx-amd64\\n```\\n\\n\u3053\u306e\u3088\u3046\u306b GitHub Release \u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\\n\\n* \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30aa\u30fc\u30ca\u30fc\\n* \u30ea\u30dd\u30b8\u30c8\u30ea\u540d\\n* tag\\n* GitHub Release \u306e\u30a2\u30bb\u30c3\u30c8\u540d\\n\\n\u306a\u3069\u304b\u3089\u4e00\u610f\u306b\u6c7a\u307e\u308b\u305f\u3081\u3001\u3042\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u306f jq \u3092\u30d5\u30a9\u30fc\u30af\u3057\u305f\u3082\u306e\u3092\u4f7f\u3046\u3068\u3044\u3063\u305f\u5834\u5408\u3067\u3082\u5b89\u5168\u306b\u5171\u5b58\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n## \u4fbf\u5229\u306a `--only-link` option\\n\\n`aqua install` \u3092\u5b9f\u884c\u3059\u308b\u3068\u30c4\u30fc\u30eb\u3054\u3068\u306b\u4ee5\u4e0b\u306e\u3053\u3068\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\n\\n1. `.aqua/bin` \u914d\u4e0b\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u4f5c\u6210\\n1. \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\\n1. tarball \u306a\u3069\u306e\u5c55\u958b\\n1. ~/.aqua \u914d\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n\\naqua.yaml \u306e packages \u306b\u5927\u91cf\u306e\u30c4\u30fc\u30eb\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3068\u3001\\n\u5927\u91cf\u306e\u30c4\u30fc\u30eb\u304c\u4e00\u5ea6\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308a\u3001\\n\u4e26\u5217\u3067\u5b9f\u884c\u3055\u308c\u308b\u3068\u306f\u3044\u3048\u3001\u90fd\u5408\u304c\u60aa\u3044\u3053\u3068\u3082\u3042\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n`--only-link` option \u3092\u3064\u3051\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3060\u3051\u4f5c\u6210\u3057\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306a\u3069\u306f\u884c\u308f\u306a\u3044\u306e\u3067\u76f4\u3050\u306b\u7d42\u308f\u308a\u307e\u3059\u3002\\n\\n```\\n$ aqua install --only-link\\n```\\n\\n\u305d\u306e\u72b6\u614b\u3067\u30c4\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30c4\u30fc\u30eb\u304c\u81ea\u52d5\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u304b\u3089\u5b9f\u884c\u3055\u308c\u308b\u306e\u3067\\n\u672c\u5f53\u306b\u5fc5\u8981\u306b\u306a\u3063\u3066\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3042\u308a\u3001\u4f59\u8a08\u306a\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u767a\u751f\u3057\u306a\u3044\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\\n\\n## \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306e\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u52d5\u7684\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048\u306e\u4ed5\u7d44\u307f\\n\\naqua \u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3059\u308b\u3068 `aqua install` \u5b9f\u884c\u3092\u3057\u306a\u304f\u3066\u3082\u66f4\u65b0\u304c\u53cd\u6620\u3055\u308c\u308b\u3001\\n\u30c4\u30fc\u30eb\u304c\u307e\u3060\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u304f\u3066\u3082\u30c4\u30fc\u30eb\u3092\u5b9f\u884c\u6642\u306b\u81ea\u52d5\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3068\u3044\u3046\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\\n\\ntfenv \u3082 .terraform-version \u3092\u66f4\u65b0\u3059\u308c\u3070\u3059\u3050\u53cd\u6620\u3055\u308c\u307e\u3059\u3057\u3001\\nterraform \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u6642\u306b\u307e\u3060\u6307\u5b9a\u3057\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u306a\u304b\u3063\u305f\u3089\u81ea\u52d5\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u304c\u3001\u305d\u308c\u306b\u4f3c\u3066\u3044\u307e\u3059\u306d\\n(\u305f\u3060\u3057 tfenv \u306e\u6a5f\u80fd\u304c\u3069\u3046\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u304b\u306f\u8abf\u3079\u3066\u307e\u305b\u3093\u3057\u3001 aqua \u3092\u5b9f\u88c5\u3059\u308b\u4e0a\u3067\u53c2\u8003\u306b\u3057\u305f\u308a\u306f\u3057\u3066\u3044\u307e\u305b\u3093)\u3002\\n\\n\u4e0a\u8a18\u306e\u6a5f\u80fd\u304c aqua \u3067\u3069\u3046\u5b9f\u73fe\u3055\u308c\u3066\u3044\u308b\u304b\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070 aqua \u3067 jq \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001 `jq -h` \u3092\u5b9f\u884c\u3057\u305f\u3068\u3057\u307e\u3057\u3087\u3046\u3002\\njq \u3092\u5b9f\u884c\u3059\u308b\u3068 aqua-proxy \u3092\u7d4c\u7531\u3057\u3066 `aqua exec -- jq -h` \u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\n\u3053\u306e\u8fba\u306e\u8a73\u7d30\u306f [aqua-proxy \u3068\u306f](#aqua-proxy-\u3068\u306f) \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n`aqua exec` \u306f aqua \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u6307\u5b9a\u3055\u308c\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3001\u307e\u3060\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u30b3\u30de\u30f3\u30c9 `jq -h` \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n## aqua-proxy \u3068\u306f\\n\\n[aqua-proxy](https://github.com/suzuki-shunsuke/aqua-proxy) \u306f aqua \u304c\u5185\u90e8\u7684\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306b aqua \u53ca\u3073 aqua \u3067\u7ba1\u7406\u3059\u308b\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u52d5\u7684\u306b\u5909\u66f4\u3059\u308b\u305f\u3081\u306b\u4f5c\u3089\u308c\u307e\u3057\u305f\u3002\\naqua \u306e\u305f\u3081\u306b\u958b\u767a\u3055\u308c\u3066\u304a\u308a\u3001 aqua \u4ee5\u5916\u3067\u4f7f\u308f\u308c\u308b\u3053\u3068\u306f\u60f3\u5b9a\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\n\\naqua-proxy \u306f `aqua install` \u3084 `aqua exec` \u3092\u5b9f\u884c\u3057\u305f\u969b\u306b\u81ea\u52d5\u3067 `~/.aqua/bin/aqua-proxy` \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\\naqua \u306f\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u969b\u306b `.aqua/bin/<\u30c4\u30fc\u30eb>` \u304b\u3089 `~/.aqua/bin/aqua-proxy` \u3078\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u4f5c\u6210\u3059\u308b\u306e\u3067\u3001 `<\u30c4\u30fc\u30eb>` \u3092\u5b9f\u884c\u3059\u308b\u3068 `~/.aqua/bin/aqua-proxy` \u304c\u547c\u3070\u308c\u307e\u3059\u3002\\n\\naqua-proxy \u306f [os#Args](https://pkg.go.dev/os#Args) \u304b\u3089\u30c4\u30fc\u30eb\u540d\u3092\u53d6\u5f97\u3057\u3001\\n`aqua exec -- <\u30c4\u30fc\u30eb\u540d> ...` \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\u3053\u308c\u306b\u3088\u308a\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306b aqua \u53ca\u3073 `<\u30c4\u30fc\u30eb>` \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u52d5\u7684\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n`.aqua/bin/<\u30c4\u30fc\u30eb>` \u304b\u3089 aqua-proxy \u3078\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u306f\u9759\u7684\u3067\u3042\u308a\u3001 aqua-proxy \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5207\u308a\u66ff\u3048\u308b\u3053\u3068\u306f\u96e3\u3057\u3044\u3067\u3059\u3002\\naqua-proxy \u306e\u6a5f\u80fd\u30fb\u8cac\u52d9\u304c\u5927\u304d\u304f\u306a\u308b\u3068 aqua-proxy \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3084 aqua \u3068\u306e\u4e92\u63db\u6027\u3092\u8003\u3048\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u304f\u306a\u308a\u307e\u3059\u3002\\naqua-proxy \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u307b\u307c\u6c17\u306b\u3057\u306a\u304f\u3066\u826f\u3044\u3088\u3046\u3001 aqua-proxy \u306f\u6700\u5c0f\u9650\u306e\u6a5f\u80fd\u30fb\u8cac\u52d9\u3057\u304b\u6301\u305f\u305a\u3001\u5b89\u5b9a\u7684\u3067\u3042\u307e\u308a\u5909\u66f4\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u8a2d\u8a08\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n## \u30d7\u30ed\u30bb\u30b9\u30c4\u30ea\u30fc\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\\n\\n\u65e2\u306b\u8aac\u660e\u3057\u305f\u3068\u304a\u308a `<\u30c4\u30fc\u30eb>` \u3092\u5b9f\u884c\u3057\u305f\u969b\u306b\u306f\u5b9f\u306f\u30d7\u30ed\u30bb\u30b9\u30c4\u30ea\u30fc\u7684\u306b\u306f\\n`aqua-proxy => aqua => <\u30c4\u30fc\u30eb>` \u3068\u3044\u3046\u98a8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n`<\u30c4\u30fc\u30eb>` \u3092\u76f4\u63a5\u5b9f\u884c\u3057\u305f\u5834\u5408\u3068\u6319\u52d5\u306b\u9055\u3044\u304c\u51fa\u306a\u3044\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3053\u3068\u306b\u6c17\u3092\u914d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n* SIGINT, SIGTERM \u306a\u3069\u306e\u30b7\u30b0\u30ca\u30eb\u304c\u9069\u5207\u306b `<\u30c4\u30fc\u30eb>` \u306e\u30d7\u30ed\u30bb\u30b9\u307e\u3067\u4f1d\u9054\u3055\u308c\u308b\u3088\u3046\u306b\u3059\u308b\\n* `<\u30c4\u30fc\u30eb>` \u306e exit code \u304c\u4f1d\u9054\u3055\u308c\u308b\u3088\u3046\u306b\u3059\u308b\\n\\n\u8a66\u3057\u306b fzf \u3092\u5b9f\u884c\u3057\u3066\u307f\u3066\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u30d7\u30ed\u30bb\u30b9\u30c4\u30ea\u30fc\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n```\\n$ ls | fzf\\n```\\n\\nfzf \u304c\u8d77\u52d5\u3057\u307e\u3059\u304c\u3001\u305d\u306e\u307e\u307e\u306b\u3057\u3066\u304a\u3044\u3066\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u30d7\u30ed\u30bb\u30b9\u30c4\u30ea\u30fc\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\\nMac \u306e `pstree` \u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n```\\n-+- 83548 foo fzf\\n \\\\-+- 83549 foo aqua exec -- fzf\\n   \\\\--- 83550 foo /Users/foo/.aqua/pkgs/github_release/github.com/junegunn/fzf/0.27.2/fzf-0.27.2-darwin_amd64.zip/fzf\\n```\\n\\n\u7d1b\u3089\u308f\u3057\u3044\u306e\u3067\u3059\u304c\u3001\u6700\u521d\u306e\u30d7\u30ed\u30bb\u30b9\u306e\u5b9f\u4f53\u306f fzf \u3067\u306f\u306a\u304f\u3066 aqua-proxy \u3067\u3059\u3002 fzf \u304c aqua-proxy \u3078\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3053\u3046\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\u3053\u3053\u3067 aqua-proxy \u306b SIGTERM \u3092\u9001\u308b\u3068\u624b\u5143\u306e Mac \u3067\u306f\u3061\u3083\u3093\u3068\u5b50\u30d7\u30ed\u30bb\u30b9\u307e\u3067\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\\n\\n```\\n$ kill 83548\\n```\\n\\n\u3053\u306e\u8fba\u306e\u30b7\u30b0\u30ca\u30eb\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306f Windows \u3060\u3068\u6b63\u5e38\u306b\u52d5\u304b\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\nhttps://pkg.go.dev/os#Signal\\n\\n> The only signal values guaranteed to be present in the os package on all systems are os.Interrupt (send the process an interrupt) and os.Kill (force the process to exit).\\n> On Windows, sending os.Interrupt to a process with os.Process.Signal is not implemented;\\n> it will return an error instead of sending a signal."},{"id":"/github-app-for-codebuild","metadata":{"permalink":"/github-app-for-codebuild","source":"@site/blog/github-app-for-codebuild.md","title":"AWS CodeBuild \u3092\u5b9f\u884c\u3059\u308b Github App \u3092\u4f5c\u308b","description":"GitHub Repository \u306e CI \u306b CodeBuild \u3092\u4f7f\u3046\u5834\u5408\u3001 CodeBuild \u306e Webhook integration (\u4ee5\u4e0b CodeBuild GitHub integration \u3068\u547c\u3076\u3053\u3068\u306b\u3057\u307e\u3059) \u3092\u4f7f\u3046\u306e\u304c\u4e00\u756a\u81ea\u7136\u3067\u3057\u3087\u3046\u3002","date":"2021-08-16T00:10:51.000Z","formattedDate":"August 16, 2021","tags":[{"label":"aws","permalink":"/tags/aws"},{"label":"codebuild","permalink":"/tags/codebuild"},{"label":"github-app","permalink":"/tags/github-app"}],"readingTime":9.08,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"AWS CodeBuild \u3092\u5b9f\u884c\u3059\u308b Github App \u3092\u4f5c\u308b","date":"2021-08-16T00:10:51.000Z","tags":["aws","codebuild","github-app"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"aqua - CLI \u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406","permalink":"/aqua"},"nextItem":{"title":"2021-07 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-07"}},"content":"GitHub Repository \u306e CI \u306b CodeBuild \u3092\u4f7f\u3046\u5834\u5408\u3001 [CodeBuild \u306e Webhook integration](https://docs.aws.amazon.com/codebuild/latest/userguide/github-webhook.html) (\u4ee5\u4e0b `CodeBuild GitHub integration` \u3068\u547c\u3076\u3053\u3068\u306b\u3057\u307e\u3059) \u3092\u4f7f\u3046\u306e\u304c\u4e00\u756a\u81ea\u7136\u3067\u3057\u3087\u3046\u3002\\n\u57fa\u672c\u7684\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306a\u3089\u3053\u308c\u3067\u3088\u3044\u306e\u3067\u3059\u304c\u3001 GitHub App \u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u3088\u308a\u9ad8\u5ea6\u306a CI \u3092\u5b9f\u73fe\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n## \u89e3\u6c7a\u3057\u305f\u3044\u8ab2\u984c\\n\\n* Batch Build \u306e\u8ab2\u984c\\n  * \u8d77\u52d5\u30fb\u7d42\u4e86\u304c\u9045\u3044\\n  * \u5168 build \u304c\u6210\u529f\u3057\u305f Batch Build \u3092 Retry \u3067\u304d\u306a\u3044\\n  * Web UI \u304c\u308f\u304b\u308a\u306b\u304f\u3044\\n    * \u4f59\u8a08\u306a build \u304c\u8d77\u52d5\u3059\u308b\\n    * build \u5358\u4f53\u3092 Retry \u3067\u304d\u306a\u3044\\n  * build \u3054\u3068\u306b\u6761\u4ef6\u8a2d\u5b9a\u3068\u304b\u3067\u304d\u306a\u3044\\n  * buildspec \u3092\u52d5\u7684\u306b\u751f\u6210\u3067\u304d\u306a\u3044\\n* `CodeBuild GitHub integration` \u306e\u8ab2\u984c\\n  * Build Project \u3054\u3068\u306b Repository Webhook \u304c 1 \u3064\u4f5c\u3089\u308c\u308b\\n    * [webhook 1 repository \u3042\u305f\u308a 20 \u500b\u307e\u3067\u3057\u304b\u4f5c\u308c\u306a\u3044](https://docs.github.com/en/developers/webhooks-and-events/webhooks/about-webhooks)\\n    * (\u3053\u308c\u3092\u88cf\u4ed8\u3051\u308b\u5ba2\u89b3\u7684\u306a\u30bd\u30fc\u30b9\u306f\u306a\u3044\u3067\u3059\u304c) webhook \u306e\u6570\u304c\u5897\u3048\u308b\u3068 build \u306e\u52d5\u4f5c\u304c\u4e0d\u5b89\u5b9a\u306b\u306a\u308b\u306e\u3092\u89b3\u6e2c\u3057\u3066\u3044\u307e\u3059\\n  * Filter \u306e\u6761\u4ef6\u304c\u9650\u3089\u308c\u3066\u3044\u308b(\u4f8b\u3048\u3070 PR label \u3067 filter \u3068\u304b\u3067\u304d\u306a\u3044)\\n  * \u8907\u6570\u306e build \u3092\u5b9f\u884c\u3067\u304d\u306a\u3044(Batch Build \u3082 1 \u3064\u3068\u307f\u306a\u3057\u305f\u5834\u5408\u306e\u8a71)\\n* CodeBuild \u306e\u8ab2\u984c\\n  * Retry \u3057\u305f\u5834\u5408 webhook \u3067\u8d77\u52d5\u3057\u305f\u3068\u304d\u306e\u74b0\u5883\u5909\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u306a\u3044\\n\\n## GitHub App\\n\\nAmazon API Gateway \u3068 Lambda \u3092\u4f7f\u3063\u3066 GitHub App \u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\\nLambda \u3067 webhook \u3092\u53d7\u3051\u53d6\u308a\u3001 AWS SDK \u3092\u4f7f\u3063\u3066 build \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n![codebuilder-architecture](https://user-images.githubusercontent.com/13323303/129534257-391da6ac-9690-46df-b6df-53605d3c0c6a.png)\\n\\nGitHub App \u3092\u4f5c\u6210\u3057\u3001 Webhook URL \u3068\u3057\u3066 API Gateway \u306e endpoint \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\\ninternet facing \u306a API Gateway \u306f Repository \u3054\u3068\u306b\u4f5c\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u5171\u6709\u3067 1 \u3064\u4f5c\u308b\u3088\u3046\u306b\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\nLambda \u306f Repository \u3054\u3068\u306b\u5206\u3051\u305f\u307b\u3046\u304c\u6a29\u9650\u3092\u7d5e\u308c\u308b\u3057\u3001 Function \u304c\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308b\u3057\u3001\u3042\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u305f\u3081\u306e\u5909\u66f4\u304c\u4ed6\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u5f71\u97ff\u3059\u308b\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\\nBatch Build \u3092\u4f7f\u3046\u4ee3\u308f\u308a\u306b Build \u3092\u8907\u6570\u4e26\u5217\u3067\u8d77\u52d5\u3059\u308b\u3053\u3068\u3067\u3001 Batch Build \u306e\u8ab2\u984c\u3092\u89e3\u6c7a\u3067\u304d\u307e\u3059\u3002\\n\u5b9f\u884c\u6642\u306b[\u30d1\u30e9\u30e1\u30fc\u30bf](https://docs.aws.amazon.com/sdk-for-go/api/service/codebuild/#CodeBuild.StartBuildWithContext)\u3092\u5909\u3048\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\nWebhook \u306e Payload \u3082\u53c2\u7167\u3067\u304d\u308b\u306e\u3067\u3001 Payload \u304b\u3089\u5f97\u305f\u30c7\u30fc\u30bf(PR \u756a\u53f7\u3001 label\u3001PR Author \u540d\u3001 etc)\u3092\u74b0\u5883\u5909\u6570\u3068\u3057\u3066 build \u306b\u308f\u305f\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n\\n\u5f93\u6765\u306f build \u5185\u3067 GitHub API \u3092\u4f7f\u3063\u3066\u53d6\u5f97\u3057\u3066\u3044\u305f PR \u306e\u60c5\u5831\u3092\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u6e21\u305b\u308b\u3053\u3068\u3067\\nbuild \u306e\u51e6\u7406\u304c\u7c21\u7565\u5316\u3055\u308c\u307e\u3059\u3057\u3001 GitHub API \u306e call \u6570\u3092\u6e1b\u3089\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059(\u3053\u308c\u306f API \u306e rate limit \u304c\u554f\u984c\u306b\u306a\u308b\u5834\u5408\u306b\u91cd\u8981\u3067\u3059)\u3002\\n\\nPR label \u306b\u3088\u308b build \u306e\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u306a\u3069\u3001 `CodeBuild GitHub integration` \u3067\u306f\u96e3\u3057\u3044\u3088\u308a\u8907\u96d1\u306a filter \u3082\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\\n\\nGitHub App \u3067\u3042\u308c\u3070 Repository Webhook \u304c\u4f5c\u3089\u308c\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u305b\u3093\u3057\u3001 Build Project \u3054\u3068\u306b webhook \u306e\u8a2d\u5b9a\u3092\u3059\u308b\u5fc5\u8981\u3082\u3042\u308a\u307e\u305b\u3093\u3002\\n\\nAssume Role \u3059\u308b\u3053\u3068\u3067\u5225\u306e AWS Account \u306e Build Project \u306e build \u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n\\n## merged event \u3067 merged commit sha \u3067 build \u3092\u5b9f\u884c\\n\\nPR \u304c\u30de\u30fc\u30b8\u3055\u308c\u305f\u3089 merged commit \u306e SHA \u3067 CI \u3092\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u3001 push event \u3092 hook \u3059\u308b\u306e\u304c\u304a\u305d\u3089\u304f\u4e00\u822c\u7684\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n`CodeBuild GitHub integration` \u3067\u306f `merged` event \u3092 hook \u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u304c\u3001\\n\u3053\u306e\u5834\u5408 PR \u306e head branch \u306e SHA \u3067 build \u304c\u5b9f\u884c\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3057\u3001 base branch \u306e commit status \u304c\u66f4\u65b0\u3055\u308c\u307e\u305b\u3093\u3002\\n\\n\u3057\u304b\u3057 `push` event \u3067\u306f\u95a2\u9023\u3059\u308b PR \u306e\u60c5\u5831\u304c\u53d6\u308c\u306a\u3044(build \u306e\u74b0\u5883\u5909\u6570\u3068\u3057\u3066 PR \u306e\u60c5\u5831\u304c\u6e21\u3055\u308c\u306a\u3044)\u3068\u3044\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\\n[GitHub API \u3067\u30b3\u30df\u30c3\u30c8\u3068\u95a2\u9023\u3057\u305f PR \u306e\u4e00\u89a7\u304c\u53d6\u308c\u307e\u3059](https://docs.github.com/en/rest/reference/repos#list-pull-requests-associated-with-a-commit)\u304c\u3001\u8907\u6570\u306e PR \u3068\u95a2\u9023\u3065\u3044\u3066\u3044\u308b\u5834\u5408\u3001\u3069\u306e PR \u306a\u306e\u304b\u7279\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093(\u7279\u5b9a\u306e\u6761\u4ef6\u4ed8\u304d\u3067\u3042\u308c\u3070\u3067\u304d\u307e\u3059\u304c)\u3002\\n\\n\u305d\u3053\u3067 GitHub App \u3067 `merged` event (\u6b63\u78ba\u306b\u306f `closed` event \u3067 PR \u304c\u30de\u30fc\u30b8\u6e08\u306e\u5834\u5408) \u3092 hook \u3057\u3064\u3064\u3001\\nbuild \u8d77\u52d5\u6642\u306b source version \u3068\u3057\u3066 merged commit sha \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\\nwebhook \u304b\u3089 PR \u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3064\u3064 merged commit \u306e SHA \u3067 CI \u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\\n\\n## GitHub \u306e Personal Access Token \u306e\u4ee3\u308f\u308a\u306b GitHub App installation access token \u3092\u4f7f\u3046\\n\\nCodeBuild \u306e build \u5185\u3067 GitHub API \u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u3001 Personal Access Token \u3092\u767a\u884c\u3059\u308b\u306e\u304c\u30b7\u30f3\u30d7\u30eb\u3067\u3059\u304c\u3001 Personal Access Token \u306b\u306f\u3044\u304f\u3064\u304b\u8ab2\u984c\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* token \u6d41\u51fa\u306e\u30ea\u30b9\u30af\\n  * rotation \u304c\u96e3\u3057\u3044\u306e\u3067\u6709\u52b9\u671f\u9650\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u306a\u3044\u5834\u5408\u304c\u591a\u3044\\n* rate limit\\n  * token \u304c organization \u3067\u5e83\u304f\u5171\u6709\u3055\u308c\u305f\u308a\u3059\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u554f\u984c\u306b\u306a\u308a\u3084\u3059\u3044\\n  * rate limit \u306f account \u5358\u4f4d\u306a\u306e\u3067\u3001\u540c\u3058 account \u306e token \u3092\u5225\u306b\u4f5c\u3063\u3066\u3082\u610f\u5473\u304c\u306a\u3044\\n  * account \u3092\u5897\u3084\u3057\u3066 org \u306b\u8ffd\u52a0\u3059\u308b\u3068\u3001 org \u306e\u30e1\u30f3\u30d0\u30fc\u304c\u5897\u3048\u308b\u306e\u3067\u304a\u91d1\u304c\u304b\u304b\u308b(\u307e\u3041\u91d1\u984d\u7684\u306b\u7121\u8996\u3057\u3066\u3082\u3088\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c)\\n\\nGitHub App \u3067\u306f rotation \u306a\u3069\u3092\u8003\u3048\u306a\u304f\u3066\u3082\u4e00\u6642\u7684\u306a token \u3092\u767a\u884c\u3067\u304d\u308b\u306e\u3067\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7684\u306b\u30ea\u30b9\u30af\u304c\u4f4e\u3044\u3067\u3059\u3057\u3001\\nGitHub App \u3092\u4f5c\u3063\u3066\u3082\u304a\u91d1\u306f\u304b\u304b\u308a\u307e\u305b\u3093\u3002\\ntoken \u3092\u767a\u884c\u3059\u308b\u306b\u306f\\n\\n* App ID\\n* Installation ID (webhook \u306e payload \u306b\u542b\u307e\u308c\u3066\u3044\u308b)\\n* Private key\\n\\n\u304c\u5fc5\u8981\u3067\u3001 build \u5b9f\u884c\u6642\u306b installation id \u3092\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u6e21\u3059\u3053\u3068\u3067 Lambda \u3060\u3051\u3067\u306a\u304f Codebuild \u3067\u3082 installation access token \u304c\u4f7f\u3048\u307e\u3059\u3002\\n\\n\u3082\u3061\u308d\u3093 GitHub App \u3092\u4f7f\u3063\u3066\u3082 rate limit \u306b\u5f15\u3063\u304b\u304b\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u3059\u304c\u3001 Personal Access Token \u306b\u6bd4\u3079\u3066\u56de\u907f\u3057\u3084\u3059\u3044\u304b\u3068\u306f\u601d\u3044\u307e\u3059\u3002\\n\\n## Lambda \u304b\u3089 Repository \u306e\u30b3\u30fc\u30c9\u3092\u53c2\u7167\u3059\u308b\\n\\nhttps://blog.studysapuri.jp/entry/2020/12/03/080000 \u3067\u306f CodeBuild \u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30b3\u30fc\u30c9\u3092 checkout \u3057\u3001\\nbuild \u306e\u4e2d\u3067\u52d5\u7684\u306b buildspec \u3092\u751f\u6210\u3057\u3066 batch build \u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u540c\u3058\u3088\u3046\u306a\u3053\u3068\u3092 Lambda \u3067\u3084\u308d\u3046\u3068\u3057\u305f\u5834\u5408\u3001\u8272\u3005\u5236\u7d04\u304c\u3042\u308a\u307e\u3059\u3002\\nLambda \u3067\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u3092 checkout \u3057\u3066\u304f\u308b\u4ee3\u308f\u308a\u306b\u3001 build \u3092\u5b9f\u884c\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u9759\u7684\u306b\u751f\u6210\u3057\u3066\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30df\u30c3\u30c8\u3057\u3066\u304a\u304d\u305d\u308c\u3092 GitHub API \u3067\u53d6\u5f97\u3059\u308b\u3068\u3044\u3046\u3084\u308a\u65b9\u304c\u3042\u308a\u307e\u3059\u3002\\n\u305d\u306e\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u7528\u610f\u3057\u3066\u304a\u304d\u3001 \u3061\u3083\u3093\u3068\u30d5\u30a1\u30a4\u30eb\u304c\u6700\u65b0\u306b\u306a\u3063\u3066\u3044\u308b\u304b CI \u306e\u4e2d\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3001\\n\u306a\u3063\u3066\u3044\u306a\u3051\u308c\u3070 CI \u3092 fail \u3055\u305b\u308b\u304b\u81ea\u52d5\u3067\u66f4\u65b0\u3057\u3066\u30b3\u30df\u30c3\u30c8\u3059\u308b\u3068\u3044\u3046\u306e\u3092\u3084\u308b\u306e\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\\nGit \u306e pre-push hook \u306a\u3069\u3067 check \u3059\u308b\u306e\u3082\u3042\u308a\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n## GitHub App \u306e\u958b\u767a\u3092\u3044\u304b\u306b\u697d\u306b\u3059\u308b\u304b\\n\\n\u3088\u3046\u306f webhook \u3092\u53d7\u3051\u53d6\u3063\u3066 build \u3092\u5b9f\u884c\u3059\u308b Lambda Function \u3092\u5b9f\u88c5\u3059\u308c\u3070\u3044\u3044\u3060\u3051\u306a\u306e\u3067\u3059\u304c\u3001\\n\u6bce\u56de 0 \u304b\u3089\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u306e\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u624b\u9593\u306a\u306e\u3067\u3001 Go \u306e\u7c21\u5358\u306a library \u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-github-app-for-aws-codebuild\\n\\n\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u81ea\u4f53\u306f\u5927\u3057\u305f\u3082\u306e\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u7686\u3055\u3093\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3084\u8a00\u8a9e\u306b\u5408\u308f\u305b\u3066\u72ec\u81ea\u306b\u4f5c\u3063\u3066\u3082\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\\n## \u30b5\u30f3\u30d7\u30eb\\n\\n\u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u3082\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example-github-app-for-aws-codebuild"},{"id":"/what-i-did-2021-07","metadata":{"permalink":"/what-i-did-2021-07","source":"@site/blog/what-i-did-2021-07.md","title":"2021-07 \u3084\u3063\u305f\u3053\u3068","description":"\u4eca\u307e\u3067\u4ed5\u4e8b\u306b\u9650\u5b9a\u3057\u3066\u66f8\u3044\u3066\u304d\u307e\u3057\u305f\u304c\u3001 OSS \u6d3b\u52d5\u306a\u3093\u304b\u306b\u3082\u89e6\u308c\u3066\u3082\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u306e\u3067\u5206\u304b\u308b\u7bc4\u56f2\u3067\u66f8\u304d\u307e\u3059\u3002","date":"2021-07-27T21:58:45.000Z","formattedDate":"July 27, 2021","tags":[{"label":"job","permalink":"/tags/job"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":3.57,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2021-07 \u3084\u3063\u305f\u3053\u3068","date":"2021-07-27T21:58:45.000Z","archives":["2021/07"],"tags":["job","oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"AWS CodeBuild \u3092\u5b9f\u884c\u3059\u308b Github App \u3092\u4f5c\u308b","permalink":"/github-app-for-codebuild"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-06-01 ~ 2021-06-30","permalink":"/2021/06/01/job-06-30"}},"content":"\u4eca\u307e\u3067\u4ed5\u4e8b\u306b\u9650\u5b9a\u3057\u3066\u66f8\u3044\u3066\u304d\u307e\u3057\u305f\u304c\u3001 OSS \u6d3b\u52d5\u306a\u3093\u304b\u306b\u3082\u89e6\u308c\u3066\u3082\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u306e\u3067\u5206\u304b\u308b\u7bc4\u56f2\u3067\u66f8\u304d\u307e\u3059\u3002\\n\\n## \u4ed5\u4e8b\\n\\n* Docker Image \u3092 Docker Hub \u304b\u3089 ECR \u3078\u79fb\u884c\\n* Terraform\\n  * .terraform.lock.hcl \u3092 CI \u306e\u4e2d\u3067\u81ea\u52d5\u3067\u66f4\u65b0(commit, push)\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n    * Terraform \u306b\u8a73\u3057\u304f\u306a\u3044\u4eba\u3082\u4f7f\u3046\u306e\u3067\u3001\u81ea\u52d5\u5316\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3068\u5224\u65ad\\n  * [tfmigrate](https://github.com/minamijoyo/tfmigrate) \u3092 CI \u306b\u5c0e\u5165\\n  * (in progress) Terraform Modules \u3092 Terraform \u306e Monorepo \u3068\u306f\u5225\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u7ba1\u7406\u3057\u3066 versioning \u3059\u308b\u3088\u3046\u306b\u3057\u305f\\n  * Route53 \u306e\u7ba1\u7406\u3092 [Roadworker](https://github.com/codenize-tools/roadworker) \u304b\u3089 Terraform \u3078\u79fb\u884c\\n  * tfmigrate \u3092\u4f7f\u3063\u305f\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\\n\\n## Event\\n\\n* [Open Policy Agent Rego Knowledge Sharing Meetup](https://mercari.connpass.com/event/211073/) \u3067\u767b\u58c7\\n  * https://gist.github.com/suzuki-shunsuke/9372337aa62a6f8394bb136582ec068e\\n\\n## OSS Contribution\\n\\nAWS AppConfig \u3092 Terraform \u3067\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b PR \u304c\u7121\u4e8b\u30de\u30fc\u30b8\u3055\u308c\u307e\u3057\u305f\u3002\\n\\n* [feat: add aws_appconfig_deployment](https://github.com/hashicorp/terraform-provider-aws/pull/20172)\\n* [fix: add the attribute \\"environment_id\\" to aws_appconfig_environment](https://github.com/hashicorp/terraform-provider-aws/pull/20176)\\n* [feat: support AppConfig Deployment Strategy](https://github.com/hashicorp/terraform-provider-aws/pull/19359)\\n* [feat: support AppConfig Hosted Configuration Version](https://github.com/hashicorp/terraform-provider-aws/pull/19324)\\n* [feat: add appconfig_configuration_profile](https://github.com/hashicorp/terraform-provider-aws/pull/19320)\\n* [feat: add aws_appconfig_application and aws_appconfig_environment](https://github.com/hashicorp/terraform-provider-aws/pull/19307)\\n\\n## \u65b0\u305f\u306b\u4f5c\u3063\u305f OSS\\n\\n* [tfmigrator/cli](https://github.com/tfmigrator/cli): CLI to Migrate Terraform Configuration and State with terraform state command and hcledit\\n* [Renovate github-tags Datasource Repositories](https://github.com/suzuki-shunsuke/renovate-github-tags-datasource-repositories)\\n\\n### tfmigrator\\n\\nTerraform Configuration \u3068 State \u3092\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3059\u308b tfmigrator \u306e CLI \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u307e\u3057\u305f\u3002\\ntfmigrator \u306b\u306f\u7d06\u4f59\u66f2\u6298\u6709\u308a(?)\u3001\u6642\u7cfb\u5217\u7684\u306b\\n\\n* [suzuki-shunsuke/tfmigrator](https://github.com/suzuki-shunsuke/tfmigrator) \u3092\u958b\u767a\u3002 CLI\\n* YAML \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u8868\u73fe\u529b\u306b\u9650\u754c\u3092\u611f\u3058\u3001 suzuki-shunsuke/tfmigrator \u3092\u30d5\u30a9\u30fc\u30af\u3057\u3066 Go \u306e\u30e9\u30a4\u30d6\u30e9\u30ea [tfmigrator/tfmigrator](https://github.com/tfmigrator/tfmigrator) \u3092\u958b\u767a\\n  * \u7c21\u5358\u306b CLI \u3092\u5b9f\u88c5\u3067\u304d\u308b\u3088\u3046\u306b API \u3082\u63d0\u4f9b\\n  * \u3064\u3044\u3067\u306b\u8272\u3005\u6539\u826f\\n    * [hcledit](https://github.com/minamijoyo/hcledit) \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u4e0d\u8981\\n    * \u30d5\u30a1\u30a4\u30eb\u306e in place \u306e\u66f4\u65b0\u3092\u30b5\u30dd\u30fc\u30c8\\n    * dry run \u306e\u30b5\u30dd\u30fc\u30c8\\n    * \u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u307e\u3068\u3081\u3066\u6271\u3048\u308b\u3088\u3046\u306a API \u3082\u63d0\u4f9b [QuickRunBatch](https://pkg.go.dev/github.com/tfmigrator/tfmigrator@v0.5.1/tfmigrator#QuickRunBatch)\\n    * etc\\n* \u5b9f\u969b\u306b tfmigrator/tfmigrator \u3092\u4f7f\u3063\u3066\u307f\u308b\u3068 Go \u3092\u66f8\u304f\u306e\u304c\u3061\u3087\u3063\u3068\u9762\u5012\u304f\u3055\u3044\\n  * \u305d\u3082\u305d\u3082\u8907\u96d1\u306a rule \u3092\u4e00\u5ea6\u306b\u9069\u7528\u3057\u3088\u3046\u3068\u3059\u308b\u306e\u304c\u9593\u9055\u3063\u3066\u3044\u308b\u3068\u611f\u3058\u305f\\n* tfmigrator/tfmigrator \u3092\u4f7f\u3044\u3001 CLI \u3082\u5b9f\u88c5 tfmigrator/cli\\n  * \u3084\u306f\u308a\u57fa\u672c\u7684\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3067\u306f YAML \u66f8\u304f\u307b\u3046\u304c\u697d\\n\\n### Renovate github-tags Datasource Repositories\\n\\nRenovate \u306e Datasource \u3084 Manager \u3067\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044 package \u3092 Renovate \u3067 update \u3059\u308b\u305f\u3081\u306b\u3001\\npackage \u3088\u3046\u306b GitHub Repository \u3092\u4f5c\u3063\u3066 package \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5408\u308f\u305b\u3066 GitHub tag \u3092\u66f4\u65b0\u3057\u3001\\n`github-tags` Datasource \u3068\u3057\u3066\u4f7f\u304a\u3046\u3068\u3044\u3046\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3059\u3002\\n\u73fe\u72b6 AWS RDS \u3084 AWS Elasticache \u306e engine version \u7528\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\\ntag \u306f GitHub Actions \u3092\u6bce\u65e5\u5b9a\u671f\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u66f4\u65b0\u3057\u307e\u3059\u3002\\n\u8a73\u7d30\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u306e README \u3067\u3082\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\\n\\n## \u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30ea\u30ea\u30fc\u30b9\u3057\u305f OSS\\n\\n* [tfcmt](https://github.com/suzuki-shunsuke/tfcmt)\\n  * [v2.0.0-0](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v2.0.0-0)\\n  * [v1.1.0](https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v1.1.0)\\n    * https://twitter.com/szkdash/status/1416263752475836416\\n\\nterraform v0.15.4 \u304b\u3089 Terraform \u4ee5\u5916\u3067\u306e\u5909\u66f4\u3082 plan \u306b\u51fa\u529b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\\n\u308f\u304b\u308a\u306b\u304f\u3044\u3068\u611f\u3058\u305f\u306e\u3067\u3001 tfcmt \u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5909\u6570\u8ffd\u52a0\u3057\u3066\u898b\u3084\u3059\u304f\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\nRefreshing state \u306e\u30ed\u30b0\u3092\u9664\u5916\u3057\u305f\u308a\u3001warning \u76ee\u7acb\u305f\u305b\u305f\u308a\u3082\u3067\u304d\u3066\u4fbf\u5229\u3067\u3059\u3002\\n\\n## Blog\\n\\n* https://techblog.szksh.cloud/archives/2021/07/"},{"id":"/2021/06/01/job-06-30","metadata":{"permalink":"/2021/06/01/job-06-30","source":"@site/blog/job-2021-06-01-06-30.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-06-01 ~ 2021-06-30","description":"* GCP \u3092 Terraform \u3067\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e developer support","date":"2021-07-12T20:47:11.000Z","formattedDate":"July 12, 2021","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":0.15,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-06-01 ~ 2021-06-30","date":"2021-07-12T20:47:11.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"2021-07 \u3084\u3063\u305f\u3053\u3068","permalink":"/what-i-did-2021-07"},"nextItem":{"title":"OPA \u3067 Table Driven Tests \u3063\u307d\u3044\u3053\u3068\u3092\u3057\u3066\u307f\u308b","permalink":"/opa-table-driven-test"}},"content":"* GCP \u3092 Terraform \u3067\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e developer support\\n* miam \u3092 Terraform \u306b\u79fb\u884c\\n* Docker Hub \u304b\u3089 ECR \u3078\u306e\u79fb\u884c"},{"id":"/opa-table-driven-test","metadata":{"permalink":"/opa-table-driven-test","source":"@site/blog/opa-table-driven-test.md","title":"OPA \u3067 Table Driven Tests \u3063\u307d\u3044\u3053\u3068\u3092\u3057\u3066\u307f\u308b","description":"OPA \u3067 Table Driven Tests \u3063\u307d\u304f Policy \u3092 Test \u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8003\u3048\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2021-07-09T10:38:55.000Z","formattedDate":"July 9, 2021","tags":[{"label":"opa","permalink":"/tags/opa"},{"label":"conftest","permalink":"/tags/conftest"},{"label":"rego","permalink":"/tags/rego"}],"readingTime":2.87,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"OPA \u3067 Table Driven Tests \u3063\u307d\u3044\u3053\u3068\u3092\u3057\u3066\u307f\u308b","date":"2021-07-09T10:38:55.000Z","tags":["opa","conftest","rego"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-06-01 ~ 2021-06-30","permalink":"/2021/06/01/job-06-30"},"nextItem":{"title":"Terraform \u3067\u7a7a\u306e AWS Lambda Function \u3092\u4f5c\u308b\u65b9\u6cd5","permalink":"/create-empty-lambda-by-terraform"}},"content":"OPA \u3067 Table Driven Tests \u3063\u307d\u304f Policy \u3092 Test \u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8003\u3048\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n## \u80cc\u666f\\n\\n\u5148\u65e5 [Open Policy Agent Rego Knowledge Sharing Meetup](https://mercari.connpass.com/event/211073/) \u3067\u767a\u8868\u3059\u308b\u6a5f\u4f1a\u3092\u9802\u304d\u307e\u3057\u305f\u3002\\n\u767a\u8868\u306e\u8cc7\u6599\u306f[\u3053\u3061\u3089](https://gist.github.com/suzuki-shunsuke/9372337aa62a6f8394bb136582ec068e)\u3002\\n\u666e\u6bb5\u4ed6\u793e\u306e\u4e8b\u4f8b\u3092\u805e\u3044\u305f\u308a OPA \u306b\u3064\u3044\u3066\u8a71\u305f\u308a\u3059\u308b\u6a5f\u4f1a\u304c\u306a\u3044\u306e\u3067\u3001\u975e\u5e38\u306b\u8cb4\u91cd\u306a\u6642\u9593\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n\u305d\u306e\u4e2d\u3067 [deeeet](https://twitter.com/deeeet) \u3055\u3093\u304c [Table Driven Tests](https://github.com/golang/go/wiki/TableDrivenTests) \u3063\u307d\u304f\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3068\u3044\u3046\u3088\u3046\u306a\u3053\u3068\u3092\u304a\u3063\u3057\u3083\u3063\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n\u3060\u3044\u305f\u3044\u3053\u306e\u8fba: https://youtu.be/0YpJhrz6L0A?t=2990\\n\\n\u305d\u306e\u8a71\u3092\u53d7\u3051\u3066\u6539\u3081\u3066\u81ea\u5206\u3067\u8003\u3048\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u3067\u304d\u306a\u304f\u306f\u306a\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u3044\u3046\u6c17\u304c\u3057\u305f\u306e\u3067\u3061\u3087\u3063\u3068\u3084\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n## \u30b5\u30f3\u30d7\u30eb\\n\\n\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u3092 GitHub \u306b\u7528\u610f\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example-opa-table-driven-tests\\n\\n\u4eca\u56de\u306f aws_cloud_watch_log_group \u306e retention_in_days \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b Rule \u306e Test \u3092\u3057\u307e\u3059\u3002\\n\\n* Rule: https://github.com/suzuki-shunsuke/example-opa-table-driven-tests/blob/main/policy/cloudwatch_log_retention_in_days.rego\\n* Policy Test: https://github.com/suzuki-shunsuke/example-opa-table-driven-tests/blob/main/policy/cloudwatch_log_retention_in_days_test.rego\\n\\n\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3092 `seeds` \u3068\u3044\u3046 list \u3067\u5b9a\u7fa9\u3057\u3001\u3069\u308c\u304b\u4e00\u3064\u3067\u3082 false \u3060\u3063\u305f\u3089 fail \u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u4e2d\u8eab\u306f\\n\\n* msg: \u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3092\u793a\u3059\u30e1\u30c3\u30bb\u30fc\u30b8\u3002\u30c6\u30b9\u30c8\u304c\u5931\u6557\u3057\u305f\u3068\u304d\u306e trace \u306b\u542b\u3081\u308b\\n* resource: rule \u306e input\\n* exp: rule \u306e\u8a55\u4fa1\u7d50\u679c\u306e\u671f\u5f85\u5024\\n\\n\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\ntest \u306e\u4e2d\u8eab\u306f\u5225\u306e rule \u3092\u5426\u5b9a\u3057\u3066\u3044\u308b\u3060\u3051\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306d\u3002\\n\\n```rego\\ntest_deny_aws_cloudwatch_log_grop_retention_in_days {\\n\\tnot any_deny_aws_cloudwatch_log_grop_retention_in_days\\n}\\n```\\n\\n\u3053\u306e\u66f8\u304d\u65b9\u306f [Universal Quantification (FOR ALL)](https://www.openpolicyagent.org/docs/latest/policy-language/#universal-quantification-for-all) \u3067\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nSet \u306e\u6bd4\u8f03\u306f `!=`, `==` \u3067\u5927\u4e08\u592b\u3067\u3059\u3002 https://www.openpolicyagent.org/docs/latest/policy-language/#sets\\n\\n```rego\\n\\tresult != seed.exp\\n```\\n\\ntest \u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306b\u3001\u3069\u306e\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3067\u306a\u305c\u5931\u6557\u3057\u305f\u306e\u304b\u308f\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092 trace \u3067\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```rego\\n\\ttrace(sprintf(\\"FAIL %s (%d): %s, wanted %v, got %v\\", [\\"test_deny_aws_cloudwatch_log_grop_retention_in_days\\", i, seed.msg, seed.exp, result]))\\n```\\n\\nConftest \u306e\u5834\u5408\u3001 `--trace` \u3092\u3064\u3051\u308b\u3068\u51fa\u529b\u3055\u308c\u307e\u3059\u3002 `Note` \u3067 grep \u3059\u308b\u3068\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\\n\\n```console\\n$ conftest verify --trace | grep Note\\nTRAC   | | | | Note \\"FAIL test_deny_aws_cloudwatch_log_grop_retention_in_days (1): retention_in_days should be greater than 0, wanted {\\\\\\"aws_cloudwatch_log_group.main: retention_in_days should be set and greater than 0\\\\\\"}, got set()\\"\\n```\\n\\n\u4ee5\u4e0a\u3001\u7c21\u5358\u3067\u3059\u304c Rego \u3067 Table Driven Tests \u3063\u307d\u304f test \u3092\u66f8\u304f\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002"},{"id":"/create-empty-lambda-by-terraform","metadata":{"permalink":"/create-empty-lambda-by-terraform","source":"@site/blog/create-empty-lambda-by-terraform.md","title":"Terraform \u3067\u7a7a\u306e AWS Lambda Function \u3092\u4f5c\u308b\u65b9\u6cd5","description":"Terraform \u3067\u7a7a\u306e AWS Lambda Function \u3092\u4f5c\u308d\u3046\u3068\u3057\u305f\u969b\u306b\u3061\u3087\u3063\u3068\u30cf\u30de\u3063\u305f\u306e\u3067\u3084\u308a\u65b9\u3092\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002","date":"2021-06-24T12:25:24.000Z","formattedDate":"June 24, 2021","tags":[{"label":"terraform","permalink":"/tags/terraform"},{"label":"lambda","permalink":"/tags/lambda"}],"readingTime":4.88,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Terraform \u3067\u7a7a\u306e AWS Lambda Function \u3092\u4f5c\u308b\u65b9\u6cd5","date":"2021-06-24T12:25:24.000Z","tags":["terraform","lambda"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"OPA \u3067 Table Driven Tests \u3063\u307d\u3044\u3053\u3068\u3092\u3057\u3066\u307f\u308b","permalink":"/opa-table-driven-test"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-05-01 ~ 2021-05-31","permalink":"/2021/05/01/job-05-31"}},"content":"Terraform \u3067\u7a7a\u306e AWS Lambda Function \u3092\u4f5c\u308d\u3046\u3068\u3057\u305f\u969b\u306b\u3061\u3087\u3063\u3068\u30cf\u30de\u3063\u305f\u306e\u3067\u3084\u308a\u65b9\u3092\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\\n\\n\u300c\u7a7a\u306e Lambda Function\u300d\u3068\u3044\u3046\u8868\u73fe\u306f\u9069\u5207\u3067\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\\nLambda \u3067\u5b9f\u884c\u3059\u308b\u30b3\u30fc\u30c9\u306e\u30c7\u30d7\u30ed\u30a4\u306f Terraform \u4ee5\u5916\u306e\u30c4\u30fc\u30eb\u3067\u3084\u308b\u3051\u3069\u3001\\nLambda Function \u306e\u4f5c\u6210\u306f Terraform \u3067\u884c\u3046\u306e\u3067\u3001 dummy \u306e\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u3066 Terraform \u3067 Lambda \u3092\u4f5c\u308b\u3068\u3044\u3046\u8a71\u3067\u3059\u3002\\n\\n\u81ea\u5206\u306f\u4eca\u306f [lambroll](https://github.com/fujiwara/lambroll) \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3067 Lambda \u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3044\u307e\u3059\u3002\\nlambroll \u306f Lambda Function \u3082\u4f5c\u3063\u3066\u304f\u308c\u308b\u306e\u3067 Terraform \u3067\u4f5c\u308b\u5fc5\u8981\u306f\u5fc5\u305a\u3057\u3082\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n\u3057\u304b\u3057 Lambda Function \u306b\u95a2\u9023\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u3092 Terraform \u3067\u7ba1\u7406\u3059\u308b\u5834\u5408\u3001\\nLambda Function \u3082 Terraform \u3067\u4f5c\u308b\u3068 Lambda Function \u306e ARN \u3084 Invoke ARN \u3092\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\\n\\n\u307e\u305f lambroll \u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5834\u5408\u3082\u5148\u306b Terraform \u3067 IAM Role \u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\\nTerraform \u3067 aws_lambda_permission \u306e\u3088\u3046\u306a\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f Lambda Function \u304c\u5148\u306b\u4f5c\u3089\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\\n\u4e92\u3044\u306b\u4f9d\u5b58\u95a2\u4fc2\u304c\u767a\u751f\u3057\u3001\u9762\u5012\u306a\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n\u307e\u305f Lambda Function \u306e\u524a\u9664\u3082 Terraform \u3067\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n\u306a\u306e\u3067\u3001 Terraform \u3067 Lambda Function \u3092\u4f5c\u3063\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u8272\u3005\u90fd\u5408\u304c\u826f\u3044\u3067\u3059\u3002\\n\\nTerraform \u3067\u4f5c\u6210\u3068\u524a\u9664\u306f\u884c\u3046\u3082\u306e\u306e\u3001\u66f4\u65b0\u3092\u3057\u305f\u3044\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001 `ignore_changes = all` \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\\n\\nhttps://www.terraform.io/docs/language/meta-arguments/lifecycle.html#ignore_changes\\n\\nLambda Function \u3092 Web UI \u306a\u3069\u304b\u3089\u4f5c\u308b\u5834\u5408 Function code \u306f\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u304c\u3001\\nTerraform \u3067 Lambda Function \u3092\u4f5c\u308b\u5834\u5408\u3001 `filename` \u3084 `image_uri`, `s3_bucket` \u306e\u3044\u305a\u308c\u304b\u304c\u5fc5\u9808\u306b\u306a\u308a\u307e\u3059\u3002\\n\u3053\u308c\u306f issue \u3082\u3042\u308a\u307e\u3059\u304c\u3001\u4ed5\u69d8\u306e\u3088\u3046\u306b\u307f\u3048\u307e\u3059\u3002\\n\\nhttps://github.com/hashicorp/terraform-provider-aws/issues/5945\\n\\nECR \u3084 S3 \u306b dummy \u306e\u30b3\u30fc\u30c9\u3092\u7528\u610f\u3059\u308b\u3068\u3044\u3046\u306e\u3082\u4e00\u3064\u306e\u624b\u3067\u3059\u304c\u3001\u74b0\u5883\u306b\u4f9d\u5b58\u3059\u308b\u306e\u304c\u3042\u307e\u308a\u826f\u3044\u6c17\u304c\u3057\u306a\u3044\u306e\u3067\u3001\\narchive_file data source \u3092\u4f7f\u3063\u3066 dummy \u306e zip \u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u3068\u3044\u3046\u65b9\u6cd5\u3092\u53d6\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://registry.terraform.io/providers/hashicorp/archive/latest/docs/data-sources/archive_file\\n\\n\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3067 CI \u3067 terraform apply \u3092\u5b9f\u884c\u3057\u307e\u3057\u305f\u304c\u3001 zip file \u304c\u306a\u3044\u3068\u8a00\u308f\u308c\u3066\u5931\u6557\u3057\u307e\u3057\u305f\u3002\\n\\n```tf\\nresource \\"aws_lambda_function\\" \\"main\\" {\\n  # https://www.terraform.io/docs/language/meta-arguments/lifecycle.html#ignore_changes\\n  # Terraform can create and destroy the remote object but will never propose updates to it.\\n  lifecycle {\\n    ignore_changes = all\\n  }\\n\\n  function_name = \\"foo\\"\\n  role          = aws_iam_role.main.arn\\n\\n  handler  = \\"bootstrap\\"\\n  runtime  = \\"provided.al2\\"\\n  filename = data.archive_file.dummy.output_path\\n}\\n\\ndata \\"archive_file\\" \\"dummy\\" {\\n  type        = \\"zip\\"\\n  output_path = \\"${path.module}/dummy.zip\\"\\n\\n  source {\\n    content  = \\"dummy\\"\\n    filename = \\"bootstrap\\"\\n  }\\n}\\n```\\n\\n```\\nError: unable to load \\"lambda-base/dummy.zip\\": open lambda-base/dummy.zip: no such file or directory\\n```\\n\\n\u3057\u304b\u3057\u30ed\u30fc\u30ab\u30eb\u3067 terraform plan, apply \u3092\u5b9f\u884c\u3057\u3066\u307f\u3066\u3082\u518d\u73fe\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\\nCI \u3067\u306f Pull Request \u3067 plan file \u3092\u751f\u6210\u3057\u3066 S3 \u306b plan file \u3092 upload \u3057\u3001 PR \u3092\u30de\u30fc\u30b8\u3057\u305f default branch \u3067\u306f terraform plan \u3092\u5b9f\u884c\u305b\u305a\u306b S3 \u304b\u3089 plan file \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066 terraform apply \u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n[Pull Request \u306e terraform plan \u306e\u5b9f\u884c\u7d50\u679c\u3092 S3 \u306b\u4fdd\u5b58\u3057\u3066\u5b89\u5168\u306b apply | Quipper Product Team Blog](https://blog.studysapuri.jp/entry/2021/03/10/080000)\\n\\nplan file \u3092\u6307\u5b9a\u3057\u3066 terraform apply \u3092\u5b9f\u884c\u3057\u305f\u969b\u306b\u306f zip file \u304c\u4f5c\u6210\u3055\u308c\u305a\u3001\u4e0a\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\\n\\n\u95a2\u9023\u3059\u308b issue \u3082\u3042\u308a\u307e\u3057\u305f\u3002 https://github.com/hashicorp/terraform-provider-archive/issues/39\\n\\n\u3053\u306e issue \u3067\u306f\u5e7e\u3064\u304b\u306e\u89e3\u6c7a\u65b9\u6cd5\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3061\u306a\u307f\u306b 2021-06-24 \u73fe\u5728 Hashicorp \u5074\u304b\u3089\u306f\u7279\u306b\u53cd\u5fdc\u304c\u306a\u3044\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\\nrandom_uuid \u3084 random_string \u3092\u4f7f\u3063\u305f\u65b9\u6cd5\u3082\u3042\u308a\u307e\u3059\u304c\u3001 Lambda \u3092\u4f5c\u6210\u3059\u308b\u3060\u3051\u306a\u3089 null_resource \u306b\u4f9d\u5b58\u3055\u305b\u308b\u3060\u3051\u3067\u5341\u5206\u306e\u3088\u3046\u306b\u601d\u3048\u307e\u3057\u305f\u3002\\n\\n```tf\\ndata \\"archive_file\\" \\"dummy\\" {\\n  type        = \\"zip\\"\\n  output_path = \\"${path.module}/dummy.zip\\"\\n  source {\\n    content  = \\"dummy\\"\\n    filename = \\"bootstrap\\"\\n  }\\n  depends_on = [\\n    null_resource.main\\n  ]\\n}\\n\\nresource \\"null_resource\\" \\"main\\" {}\\n```\\n\\n\u3053\u306e\u3088\u3046\u306b null_resource \u306b\u4f9d\u5b58\u3055\u305b\u308b\u3068 terraform plan \u3067\u306f zip file \u304c\u4f5c\u3089\u308c\u305a\u3001 terraform apply \u3067\u306f\u3058\u3081\u3066 zip file \u304c\u4f5c\u3089\u308c\u308b\u305f\u3081\u3001\\nterraform apply \u304c\u5931\u6557\u3059\u308b\u3053\u3068\u306f\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002"},{"id":"/2021/05/01/job-05-31","metadata":{"permalink":"/2021/05/01/job-05-31","source":"@site/blog/job-2021-05-01-05-31.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-05-01 ~ 2021-05-31","description":"* SRE \u30c1\u30fc\u30e0\u306e\u65b0\u30e1\u30f3\u30d0\u30fc\u306e\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u30b5\u30dd\u30fc\u30c8","date":"2021-05-29T23:19:32.000Z","formattedDate":"May 29, 2021","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":0.48,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-05-01 ~ 2021-05-31","date":"2021-05-29T23:19:32.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Terraform \u3067\u7a7a\u306e AWS Lambda Function \u3092\u4f5c\u308b\u65b9\u6cd5","permalink":"/create-empty-lambda-by-terraform"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-04-01 ~ 2021-04-30","permalink":"/2021/04/01/job-04-30"}},"content":"* SRE \u30c1\u30fc\u30e0\u306e\u65b0\u30e1\u30f3\u30d0\u30fc\u306e\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u30b5\u30dd\u30fc\u30c8\\n* GCP\\n  * dev \u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5fdc\u3058\u3066\u6a29\u9650\u4ed8\u4e0e\u3057\u305f\u308a\u5bfe\u5fdc\\n  * Terraform \u306b\u3088\u308b GCP \u306e\u7ba1\u7406 CI/CD \u306e\u6574\u5099\\n  * Workload Identity Federation \u306b\u3064\u3044\u3066\u8abf\u3079\u305f\\n  * Terraform \u306b\u3088\u308b IAM \u7ba1\u7406\u306e\u4ed5\u65b9\u3092\u691c\u8a0e\\n* Conftest\\n  * `opa fmt` \u306b\u3088\u308b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8(CI \u3082\u5c0e\u5165)\\n  * Policy Testing (CI \u3082\u5c0e\u5165)\\n* Upgrade Terraform to v0.15.4\\n* miam \u306e Terraform \u79fb\u884c\u3092\u691c\u8a3c"},{"id":"/2021/04/01/job-04-30","metadata":{"permalink":"/2021/04/01/job-04-30","source":"@site/blog/job-2021-04-01-04-30.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-04-01 ~ 2021-04-30","description":"* SRE \u30c1\u30fc\u30e0\u306e\u65b0\u30e1\u30f3\u30d0\u30fc\u306e\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u30b5\u30dd\u30fc\u30c8","date":"2021-04-28T00:28:01.000Z","formattedDate":"April 28, 2021","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":0.83,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-04-01 ~ 2021-04-30","date":"2021-04-28T00:28:01.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-05-01 ~ 2021-05-31","permalink":"/2021/05/01/job-05-31"},"nextItem":{"title":"PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3084 PR Label \u306b\u5fdc\u3058\u3066 matrix build \u3092\u5b9f\u884c\u3059\u308b Github Actions \u306e Workflow \u306e\u30b5\u30f3\u30d7\u30eb\u3092\u66f8\u3044\u3066\u307f\u305f","permalink":"/example-github-actions-dynamic-matrix"}},"content":"* SRE \u30c1\u30fc\u30e0\u306e\u65b0\u30e1\u30f3\u30d0\u30fc\u306e\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u30b5\u30dd\u30fc\u30c8\\n* Lambda \u306e Monorepo\\n  * \u5e7e\u3064\u304b\u5b9f\u969b\u306b Function \u4f5c\u3063\u305f(developer support)\\n  * \u5e7e\u3064\u304b\u306e Release Strategy \u306e\u5b9f\u88c5\u30fb\u691c\u8a3c\\n    * \u30b7\u30f3\u30d7\u30eb\u306a GitHub Flow\\n    * Git Flow \u3092\u30a2\u30ec\u30f3\u30b8\u3057\u305f\u30ea\u30ea\u30fc\u30b9\u30d5\u30ed\u30fc\\n    * Canary Release\\n    * WIP: AWS AppConfig \u3092\u7528\u3044\u305f Dark Launch\\n* IAM User \u306e\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u9001\u4fe1\u306e\u81ea\u52d5\u5316\\n* Terraform\\n  * Renovate \u306b\u3088\u308b Terraform \u306e patch update \u306e\u81ea\u52d5\u5316\\n  * Docker \u3092\u4f7f\u3063\u305f\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u306e\u6539\u5584\\n  * \u30ed\u30fc\u30ab\u30eb\u3067 terraform init \u3057\u305f\u3089 .terraform.lock.hcl \u304c\u66f4\u65b0\u3055\u308c\u308b\u554f\u984c\u306e\u5bfe\u5fdc https://techblog.szksh.cloud/terraform-providers-lock/\\n* GCP \u306e Terraform \u7ba1\u7406\\n  * \u8abf\u67fb\\n  * WIP\\n* Conftest\\n  * \u793e\u5185\u306e Rego \u306e\u6d3b\u7528\u4e8b\u4f8b\u3092\u307e\u3068\u3081\u305f\\n  * `opa fmt` \u306b\u3088\u308b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8(CI \u3082\u5c0e\u5165)\\n  * Policy Testing (CI \u3082\u5c0e\u5165)"},{"id":"/example-github-actions-dynamic-matrix","metadata":{"permalink":"/example-github-actions-dynamic-matrix","source":"@site/blog/example-github-actions-dynamic-matrix.md","title":"PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3084 PR Label \u306b\u5fdc\u3058\u3066 matrix build \u3092\u5b9f\u884c\u3059\u308b Github Actions \u306e Workflow \u306e\u30b5\u30f3\u30d7\u30eb\u3092\u66f8\u3044\u3066\u307f\u305f","description":"GitHub Actions \u306e\u52c9\u5f37\u304c\u3066\u3089 Pull Request (\u4ee5\u4e0b PR) \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3084 PR Label \u306b\u5fdc\u3058\u3066","date":"2021-04-25T07:09:47.000Z","formattedDate":"April 25, 2021","tags":[{"label":"github-actions","permalink":"/tags/github-actions"}],"readingTime":3.515,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3084 PR Label \u306b\u5fdc\u3058\u3066 matrix build \u3092\u5b9f\u884c\u3059\u308b Github Actions \u306e Workflow \u306e\u30b5\u30f3\u30d7\u30eb\u3092\u66f8\u3044\u3066\u307f\u305f","date":"2021-04-25T07:09:47.000Z","tags":["github-actions"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-04-01 ~ 2021-04-30","permalink":"/2021/04/01/job-04-30"},"nextItem":{"title":"terraform init \u3067 lock \u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b\u554f\u984c\u306e\u5bfe\u5fdc","permalink":"/terraform-providers-lock"}},"content":"GitHub Actions \u306e\u52c9\u5f37\u304c\u3066\u3089 Pull Request (\u4ee5\u4e0b PR) \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3084 PR Label \u306b\u5fdc\u3058\u3066\\nMatrix build \u3092\u5b9f\u884c\u3059\u308b Github Actions \u306e Workflow \u306e\u30b5\u30f3\u30d7\u30eb\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example-github-actions-dynamic-matrix\\n\\nMonorepo \u3067\u540c\u3058 Job \u3092 PR \u3067\u5909\u66f4\u3055\u308c\u305f\u3082\u306e\u306b\u5bfe\u3057\u3066\u3060\u3051\u5b9f\u884c\u3057\u305f\u3044\u3001\\n\u3051\u3069 workflow \u3092\u30b5\u30fc\u30d3\u30b9\u3054\u3068\u306b\u5b9a\u7fa9\u3059\u308b\u306e\u306f\u3081\u3093\u3069\u3044\u307f\u305f\u3044\u306a\u5834\u5408\u306b\u4f7f\u3048\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n\u52c9\u5f37\u304c\u3066\u3089\u3061\u3087\u3063\u3068\u66f8\u3044\u3066\u307f\u3066\u8efd\u304f\u52d5\u4f5c\u78ba\u8a8d\u3057\u305f\u3060\u3051\u306a\u306e\u3067\u3001\u30d0\u30b0\u3063\u3066\u308b\u3001\u3042\u308b\u3044\u306f\u5b9f\u7528\u7684\u3067\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n\u3053\u3053\u3067\u306f Monorepo \u306e CI \u3092 GitHub Actions \u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u3092\u8003\u3048\u307e\u3059\u3002\\n\\nGitHub Actions \u3067\u306f path filter \u3092\u7528\u3044\u3066 workflow \u306e\u5b9f\u884c\u6709\u7121\u3092\u5236\u5fa1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\u305d\u3053\u3067\u30b5\u30fc\u30d3\u30b9\u3054\u3068\u306b workflow \u3092\u4f5c\u6210\u3057\u3001 path filter \u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u305d\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u66f4\u65b0\u3055\u308c\u305f\u3068\u304d\u306e\u307f\u305d\u306e\u30b5\u30fc\u30d3\u30b9\u306e CI \u3092\u5b9f\u884c\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u304c\u7c21\u5358\u306b\u3067\u304d\u307e\u3059\u3002\\n\\n\u3057\u304b\u3057\u591a\u304f\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u542b\u307e\u308c\u308b Monorepo \u3067\u5404\u30b5\u30fc\u30d3\u30b9\u306b\u540c\u3058 Job \u3092\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\u305d\u306e\u5834\u5408\u30b5\u30fc\u30d3\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u305f\u3073\u306b workflow \u3092\u8ffd\u52a0\u3057\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\u307e\u3041 .github/workflows \u914d\u4e0b\u306b 1 \u3064 YAML \u3092\u30b3\u30d4\u30da\u3067\u4f5c\u6210\u3059\u308b\u3060\u3051\u3068\u3044\u3048\u3070\u305d\u308c\u307e\u3067\u306a\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3059\u3089\u3082\u7701\u7565\u3057\u305f\u3044\u3068\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n[Terraform \u306e CI/CD \u3092 CodeBuild \u306b\u79fb\u884c\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/12/03/080000)\u3067\u306f CodeBuild \u306e Batch Build \u306e buildspec \u3092\\nPR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304a\u3088\u3073 PR Label \u306b\u5fdc\u3058\u3066\u52d5\u7684\u306b\u751f\u6210\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3053\u308c\u306e\u826f\u3044\u3068\u3053\u308d\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3001\u30ea\u30cd\u30fc\u30e0\u3057\u305f\u308a\u3001\u524a\u9664\u3057\u305f\u308a\u3057\u3066\u3082 CI \u3092\u30a4\u30b8\u308b\u5fc5\u8981\u304c\u307e\u3063\u305f\u304f\u306a\u3044\u3068\u3053\u308d\u3067\u3059\u3002\\n\\n\u305d\u308c\u3068\u4f3c\u305f\u3088\u3046\u306a\u3053\u3068\u3092 GitHub Actions \u3067\u3082\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\\n\\nfoo \u3068 bar \u3068\u3044\u3046 2 \u3064\u306e\u30b5\u30fc\u30d3\u30b9(Go \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3)\u304c\u3042\u308a\u3001\\nCI \u3067\u306f setup job \u3067 CI \u3092\u5b9f\u884c\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u30ea\u30b9\u30c8\u3092\u52d5\u7684\u306b\u751f\u6210\u3057\u3001\u5f8c\u7d9a\u306e build job \u3067\u5bfe\u8c61\u30b5\u30fc\u30d3\u30b9\u306e build \u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\\n\u4f8b\u3048\u3070\u30ea\u30dd\u30b8\u30c8\u30ea\u76f4\u4e0b\u306e README.md \u3060\u3051\u3092\u66f4\u65b0\u3057\u305f\u5834\u5408\u3001\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30d3\u30eb\u30c9\u3082\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002\\n\u30b5\u30fc\u30d3\u30b9 foo \u306e main.go \u3060\u3051\u3092\u66f4\u65b0\u3057\u305f\u5834\u5408\u3001\u30b5\u30fc\u30d3\u30b9 foo \u306e\u30d3\u30eb\u30c9\u3060\u3051\u5b9f\u884c\u3055\u308c\u3001 bar \u306e\u30d3\u30eb\u30c9\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002\\n`target/<\u30b5\u30fc\u30d3\u30b9\u540d>` \u3068\u3044\u3046 PR Label \u3092\u3064\u3051\u3066 CI \u3092\u5b9f\u884c\u3059\u308b\u3068\u6307\u5b9a\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u306e\u30b3\u30fc\u30c9\u304c\u5909\u66f4\u3055\u308c\u3066\u3044\u306a\u304f\u3066\u3082\u30d3\u30eb\u30c9\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\\n\\n\u4e3b\u306b\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3044\u3064\u3064\u3001\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n* [ci-info](https://github.com/suzuki-shunsuke/ci-info)\\n* [matchfile](https://github.com/suzuki-shunsuke/matchfile)\\n* jq\\n\\n\u8a73\u7d30\u306f https://github.com/suzuki-shunsuke/example-github-actions-dynamic-matrix \u306e\u30b3\u30fc\u30c9\u3068 [Demo \u7528\u306e PR](https://github.com/suzuki-shunsuke/example-github-actions-dynamic-matrix/pulls?q=is%3Apr+is%3Aopen+label%3Ademo) \u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002"},{"id":"/terraform-providers-lock","metadata":{"permalink":"/terraform-providers-lock","source":"@site/blog/terraform-providers-lock.md","title":"terraform init \u3067 lock \u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b\u554f\u984c\u306e\u5bfe\u5fdc","description":"Terraform v0.14 \u3067 local \u3067 terraform init \u3059\u308b\u3068 lock \u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u3066\u3057\u307e\u3046\u554f\u984c\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002","date":"2021-04-24T12:57:27.000Z","formattedDate":"April 24, 2021","tags":[{"label":"terraform","permalink":"/tags/terraform"}],"readingTime":3.45,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"terraform init \u3067 lock \u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b\u554f\u984c\u306e\u5bfe\u5fdc","date":"2021-04-24T12:57:27.000Z","archives":["2021/04"],"tags":["terraform"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3084 PR Label \u306b\u5fdc\u3058\u3066 matrix build \u3092\u5b9f\u884c\u3059\u308b Github Actions \u306e Workflow \u306e\u30b5\u30f3\u30d7\u30eb\u3092\u66f8\u3044\u3066\u307f\u305f","permalink":"/example-github-actions-dynamic-matrix"},"nextItem":{"title":"Terraform Module \u306e Template \u3068\u3044\u3046\u4f7f\u3044\u65b9","permalink":"/terraform-module-template"}},"content":"Terraform v0.14 \u3067 local \u3067 `terraform init` \u3059\u308b\u3068 lock \u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u3066\u3057\u307e\u3046\u554f\u984c\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002\\n\\n\u7d50\u8ad6\u3092\u6700\u521d\u306b\u8a00\u3046\u3068\u3001 [100 \u4ee5\u4e0a\u306e Terraform \u74b0\u5883\u3092\u3044\u3044\u611f\u3058\u306b v0.14 \u306b upgrade \u3057\u305f\u65b9\u6cd5](https://blog.studysapuri.jp/entry/2021/03/12/080000)\u3067\u7d39\u4ecb\u3057\u3066\u3044\u308b\u65b9\u6cd5\u3067 Renovate \u3067 Terraform Provider \u3092 update \u3059\u308b\u969b\u306b `terraform init -upgrade` \u3092\u5b9f\u884c\u3057\u3066 lock \u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u3066\u30b3\u30df\u30c3\u30c8\u30fb\u30d7\u30c3\u30b7\u30e5\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\\n\u305d\u306e\u969b\u306b `terraform providers lock -platform=darwin_amd64` \u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\\nTerraform v0.14 \u3067 lock \u30d5\u30a1\u30a4\u30eb `.terraform.lock.hcl` \u304c\u5c0e\u5165\u3055\u308c\u307e\u3057\u305f\u3002\\nRenovate \u3067 Terraform Provider \u3092 update \u3059\u308b\u969b\u306b\u3082 lock \u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\\n`terraform init -upgrade` \u3092\u5b9f\u884c\u3057\u3066 lock \u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u3066\u30b3\u30df\u30c3\u30c8\u30fb\u30d7\u30c3\u30b7\u30e5\u3057\u3066\u3044\u307e\u3059\u3002\\n\u306a\u306e\u3067\u3059\u304c\u3001\u30ed\u30fc\u30ab\u30eb\u3067 `terraform init` \u3092\u5b9f\u884c\u3059\u308b\u3068\u306a\u3093\u304b lock \u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b\u3053\u3068\u304c\u826f\u304f\u3042\u308a\u307e\u3057\u305f\u3002\u3057\u3070\u3089\u304f\u653e\u7f6e\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001 developer \u304b\u3089\u300c\u306a\u3093\u304b\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u3055\u308c\u305f\u3093\u3060\u3051\u3069\u3001\u3053\u308c\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3044\u3044\u306e\uff1f\u300d\u3068\u805e\u304b\u308c\u3001\u3053\u306e\u307e\u307e\u653e\u3063\u3066\u304a\u3044\u3066\u56f0\u60d1\u3055\u305b\u305f\u308a\u3082\u3084\u3063\u3068\u3055\u305b\u305f\u308a\u3059\u308b\u306e\u306f\u826f\u304f\u306a\u3044\u306a\u3068\u601d\u3044\u3001\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\\n\\nlock \u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066 [.terraform.lock.hcl \u5b8c\u5168\u306b\u7406\u89e3\u3057\u305f](https://speakerdeck.com/minamijoyo/how-to-update-terraform-dot-lock-dot-hcl-efficiently)\u3067\u8a73\u3057\u304f\u89e3\u8aac\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u5927\u5909\u52a9\u304b\u308a\u307e\u3057\u305f\u3002\\n\\n* lock \u30d5\u30a1\u30a4\u30eb\u306b\u306f provider \u306e hash \u5024\u304c\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\\n* lock \u30d5\u30a1\u30a4\u30eb\u306f `terraform init` \u3067\u81ea\u52d5\u7684\u306b\u66f4\u65b0\u3055\u308c\u308b\\n* hash \u5024\u306f platform (Mac, Linux, etc) \u306b\u3088\u3063\u3066\u9055\u3046\\n* `terraform init` \u5b9f\u884c\u6642\u306b\u3001\u305d\u306e platform \u306e hash \u5024\u304c lock \u30d5\u30a1\u30a4\u30eb\u306b\u306a\u3051\u308c\u3070\u8ffd\u52a0\u3055\u308c\u308b\\n  * \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5b9f\u884c\u74b0\u5883\u4ee5\u5916\u306e Platform \u306e hash \u5024\u306f\u8ffd\u52a0\u3055\u308c\u306a\u3044\\n* CI \u306f Linux \u4e0a\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3001 Linux \u306e hash \u5024\u3060\u3051\u304c\u8a18\u9332\u3055\u308c\u308b\\n* \u30ed\u30fc\u30ab\u30eb\u3067 Mac \u4e0a\u3067 `terraform init` \u3059\u308b\u3068 Mac \u306e hash \u5024\u304c\u8ffd\u52a0\u3055\u308c\u3001 lock \u30d5\u30a1\u30a4\u30eb\u306b\u5dee\u5206\u304c\u751f\u3058\u308b\\n\\n\u306a\u306e\u3067\u5dee\u5206\u304c\u51fa\u3066\u3057\u307e\u3063\u305f\u5834\u5408\u306f\u30b3\u30df\u30c3\u30c8\u3059\u308b\u3067\u826f\u3044\u3068\u306f\u601d\u3044\u307e\u3059\u304c\u3001\u305d\u3082\u305d\u3082 CI \u3067 lock \u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3059\u308b\u969b\u306b Mac \u306e hash \u5024\u3082\u8ffd\u52a0\u3057\u3066\u3057\u307e\u3048\u3070\u30ed\u30fc\u30ab\u30eb\u3067 Mac \u4e0a\u3067 `terraform init` \u3057\u3066\u3082\u5dee\u5206\u304c\u51fa\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u3061\u306a\u307f\u306b Windows \u4e0a\u3067 `terraform init` \u3059\u308b\u4eba\u306f\u81ea\u5206\u306e\u5468\u308a\u306b\u306f\u3044\u306a\u3055\u305d\u3046\u306a\u306e\u3067\u3001 Windows \u306f\u5bfe\u5fdc\u3057\u306a\u3044\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n[100 \u4ee5\u4e0a\u306e Terraform \u74b0\u5883\u3092\u3044\u3044\u611f\u3058\u306b v0.14 \u306b upgrade \u3057\u305f\u65b9\u6cd5](https://blog.studysapuri.jp/entry/2021/03/12/080000)\u3067\u7d39\u4ecb\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u3059\u3067\u306b lock \u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u3066\u30b3\u30df\u30c3\u30c8\u30fb\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u4ed5\u7d44\u307f\u306f\u3042\u308b\u306e\u3067\u3001\u5909\u66f4\u3068\u3057\u3066\u306f 1 (\u6b63\u78ba\u306b\u306f\u30b3\u30fc\u30c9\u30b3\u30e1\u30f3\u30c8\u5165\u308c\u30664)\u884c\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3057\u305f\u3002\\n\\n```sh\\ngithub-comment exec -- terraform providers lock -platform=darwin_amd64\\n```"},{"id":"/terraform-module-template","metadata":{"permalink":"/terraform-module-template","source":"@site/blog/terraform-module-template.md","title":"Terraform Module \u306e Template \u3068\u3044\u3046\u4f7f\u3044\u65b9","description":"Terraform Module \u306e\u4f7f\u3044\u65b9\u3068\u3057\u3066 Terraform Module \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b3\u30d4\u30da\u3057\u3066\u4f7f\u3046\u3068\u3044\u3046\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2021-04-03T02:04:25.000Z","formattedDate":"April 3, 2021","tags":[{"label":"terraform","permalink":"/tags/terraform"}],"readingTime":5.335,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Terraform Module \u306e Template \u3068\u3044\u3046\u4f7f\u3044\u65b9","date":"2021-04-03T02:04:25.000Z","archives":["2021/04"],"tags":["terraform"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"terraform init \u3067 lock \u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b\u554f\u984c\u306e\u5bfe\u5fdc","permalink":"/terraform-providers-lock"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-03-01 ~ 2021-03-31","permalink":"/2021/03/01/job-03-31"}},"content":"Terraform Module \u306e\u4f7f\u3044\u65b9\u3068\u3057\u3066 Terraform Module \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b3\u30d4\u30da\u3057\u3066\u4f7f\u3046\u3068\u3044\u3046\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nTerraform \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(\u4ee5\u4e0b tf\u30d5\u30a1\u30a4\u30eb) \u3092\u66f8\u304f\u969b\u3001\u6bce\u56de\u4e00\u304b\u3089\u66f8\u304f\u306e\u306f\u5927\u5909\u3067\u3059\u3002\\n\u591a\u304f\u306e\u5834\u5408\u3001\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u3092\u518d\u5229\u7528\u3057\u305f\u307b\u3046\u304c\u697d\u3067\u3057\u3087\u3046\u3002\\n\\nTerraform \u306e\u30b3\u30fc\u30c9\u306e\u518d\u5229\u7528\u306e\u4ed5\u7d44\u307f\u3068\u3057\u3066\u3001 Module \u304c\u3042\u308a\u307e\u3059\u3002\\nModule \u306f\u52ff\u8ad6\u4fbf\u5229\u306a\u306e\u3067\u3059\u304c\u3001\u4f7f\u3044\u65b9\u306b\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3001\u300c\u5b89\u6613\u306b Module \u5316\u3059\u308b\u306a\u3002\u4f7f\u3046\u306a\u300d\u3068\u3044\u3046\u3075\u3046\u306a\u8003\u3048\u65b9\u3082\u3042\u308b\u3067\u3057\u3087\u3046\u3002\\n\u81ea\u5206\u3082\u57fa\u672c\u7684\u306b\u540c\u610f\u898b\u3067\u3001 Module \u3092\u5171\u7528\u3059\u308b\u3088\u3046\u306b\u306a\u308b\u3068 Module \u3078\u306e\u5909\u66f4\u304c\u3057\u3065\u3089\u304f\u306a\u3063\u305f\u308a\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u3069\u3093\u3069\u3093\u5897\u3048\u3066\u8907\u96d1\u306b\u306a\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070\u6b21\u306e\u3088\u3046\u306b\u5171\u7528\u306e local Module \u3092\u4f5c\u6210\u3059\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```\\nmodules/\\n  lambda-base/\\n    README.md\\n    main.tf\\n    variables.tf\\n    outputs.tf\\nservices/\\n  foo/\\n    staging/\\n      main.tf # \u30ea\u30dd\u30b8\u30c8\u30ea\u76f4\u4e0b\u306e modules/lambda-base \u3092\u53c2\u7167\\n    production/\\n      main.tf # \u30ea\u30dd\u30b8\u30c8\u30ea\u76f4\u4e0b\u306e modules/lambda-base \u3092\u53c2\u7167\\n```\\n\\n\u3053\u3046\u3059\u308b\u3068 modules \u914d\u4e0b\u306e Module \u3092\u5909\u66f4\u3057\u305f\u969b\u306b\u305d\u306e Module \u3092\u4f7f\u3063\u3066\u3044\u308b\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5f71\u97ff\u304c\u51fa\u3066\u3057\u307e\u3044\u3001\\n\u30b5\u30fc\u30d3\u30b9\u306e\u30aa\u30fc\u30ca\u30fc\u304c\u69d8\u3005\u3060\u3063\u305f\u308a\u3001\u66d6\u6627\u3060\u3063\u305f\u308a\u4e0d\u5728\u3060\u3063\u305f\u308a\u3059\u308b\u3068\u5909\u66f4\u304c\u96e3\u3057\u3044\u3067\u3059\u3057\u3001\u3069\u3093\u3069\u3093 Module \u304c\u8907\u96d1\u306b\u306a\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\nModule \u3092\u5225\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u3057\u3066\u7ba1\u7406\u3057\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3068\u3044\u3046\u3084\u308a\u65b9\u3082\u3042\u308a\u307e\u3059\u304c\u3001\\n\u7d50\u69cb\u8907\u96d1\u3068\u3044\u3046\u304b\u8003\u3048\u308b\u3053\u3068\u304c\u591a\u3044\u30a2\u30d7\u30ed\u30fc\u30c1\u3060\u3068\u306f\u601d\u3044\u307e\u3059\u3002\\n\\nTerraform \u306b\u305d\u3053\u307e\u3067\u8a73\u3057\u304f\u306a\u3044 developer \u306b\u3082\u66f8\u3044\u3066\u3082\u3089\u3046\u3068\u306a\u308b\u3068\u3001\u30b7\u30f3\u30d7\u30eb\u306a\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u3059\u308b\u306e\u304c\u671b\u307e\u3057\u3044\u3067\u3057\u3087\u3046(\u5f53\u7136\u3053\u308c\u306f\u7d44\u7e54\u306b\u3088\u308a\u307e\u3059\u304c)\u3002\\n\\n\u305d\u3053\u3067 Module \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7528\u610f\u3057\u3001 Module \u3092\u4f7f\u3044\u305f\u304f\u306a\u3063\u305f\u3089\u305d\u308c\u3092\u30b3\u30d4\u30da\u3057\u3066\u4f7f\u3046\u3068\u3044\u3046\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u3042\u308a\u307e\u3059\u3002\\n\u4f8b\u3048\u3070 `lambda-base` \u3068\u3044\u3046 Module \u306e Template \u3092 foo \u3068\u3044\u3046\u30b5\u30fc\u30d3\u30b9\u306e staging \u74b0\u5883\u3068 production \u74b0\u5883\u3067\u4f7f\u3046\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```\\nservices/\\n  foo/\\n    staging/\\n      modules/\\n        lambda-base/ # templates \u304b\u3089\u30b3\u30d4\u30fc\\n      main.tf\\n    production/\\n      modules/\\n        lambda-base/ # templates \u304b\u3089\u30b3\u30d4\u30fc\\n      main.tf\\ntemplates/ # Module \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7f6e\u3044\u3066\u304a\u304f\\n  lambda-base/ # \u4e2d\u8eab\u306f\u666e\u901a\u306e Module\\n    README.md\\n    main.tf\\n    variables.tf\\n    outputs.tf\\n```\\n\\n\u3053\u3046\u3059\u308b\u3068 2 \u3064\u306e Module \u306f\u305d\u308c\u305e\u308c\u72ec\u7acb\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u5909\u66f4\u304c\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3057\u3001\u30b7\u30f3\u30d7\u30eb\u306b\u4fdd\u3064\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\n## \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3068\u304b\u306f\u4f7f\u308f\u306a\u3044\\n\\nModule \u306e Template \u3092\u30b3\u30d4\u30da\u3059\u308b\u969b\u306b\u3001\u30b3\u30fc\u30c9\u306b\u5909\u6570\u3092\u57cb\u3081\u8fbc\u3093\u3067\u30b3\u30d4\u30da\u3059\u308b\u969b\u306b\u7f6e\u63db\u3057\u305f\u308a\u3068\u304b\u3001\u9ad8\u5ea6\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3092\u4f7f\u3063\u3066\u52d5\u7684\u306b\u5185\u5bb9\u3092\u5909\u3048\u305f\u308a\u3068\u3044\u3063\u305f\u3053\u3068\u3082\u8003\u3048\u3089\u308c\u307e\u3059\u304c\u3001\\n\u500b\u4eba\u7684\u306b\u306f\u8907\u96d1\u5ea6\u304c\u4e0a\u304c\u308b\u306e\u3067\u3084\u3089\u306a\u3044\u307b\u3046\u304c\u826f\u3044\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\u5909\u6570\u3067\u3042\u308c\u3070 Module \u306e input variable \u3068\u3057\u3066\u6e21\u305b\u3070\u3088\u3044\u3057\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u4f7f\u3044\u305f\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5206\u3051\u305f\u308a\u3001 HCL \u3067\u8868\u73fe\u3057\u305f\u308a\u3059\u308c\u3070\u3088\u3044\u306e\u3067\u306f\u3068\u3044\u3046\u6c17\u304c\u3057\u307e\u3059\u3002\\n\\n## \u8003\u3048\u3089\u308c\u308b\u30c7\u30e1\u30ea\u30c3\u30c8\\n\\n\u901a\u5e38\u306e Module \u3068\u6bd4\u3079\u3066\u3001\u30c7\u30e1\u30ea\u30c3\u30c8\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3053\u3068\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\\n\\n* \u30b3\u30fc\u30c9\u91cf\u304c\u5897\u3048\u308b(DRY \u3058\u3083\u306a\u3044)\\n* Module \u3092\u4e00\u7b87\u6240\u3067\u7ba1\u7406\u3067\u304d\u306a\u3044\\n  * \u4e00\u62ec\u3057\u3066\u5909\u66f4\u3092\u52a0\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u306a\u3044\\n  * \u8a2d\u5b9a\u3092\u5f37\u5236\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\\n\\n\u3057\u304b\u3057\u3001\u500b\u4eba\u7684\u306b\u306f\u3053\u308c\u306f\u5927\u3057\u305f\u554f\u984c\u3058\u3083\u306a\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u30b3\u30fc\u30c9\u304c\u5897\u3048\u308b\u3053\u3068\u306b\u95a2\u3057\u3066\u306f\u3001\u305d\u308c\u306f\u305d\u3046\u3068\u3057\u304b\u8a00\u3044\u3088\u3046\u304c\u3042\u308a\u307e\u305b\u3093\u3002\\n\u4e00\u62ec\u3057\u3066\u5909\u66f4\u3092\u52a0\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u306a\u3044\u306e\u306f\u3001\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u3060\u3068\u601d\u3063\u3066\u3044\u3066\u3001\u3080\u3057\u308d\u5bfe\u51e6\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u9650\u5b9a\u3057\u306a\u304c\u3089 Module \u306b\u5909\u66f4\u3092\u52a0\u3048\u3089\u308c\u308b\u3068\u3044\u3046\u30e1\u30ea\u30c3\u30c8\u306e\u307b\u3046\u304c\u5927\u304d\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\u8a2d\u5b9a\u3092\u5f37\u5236\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u306e\u306f\u3001\u305f\u3057\u304b\u306b\u305d\u308c\u306f\u3042\u308b\u3068\u601d\u3063\u3066\u3044\u3066\u3001\u30b3\u30d4\u30da\u3057\u305f Module \u306b\u4e00\u62ec\u3057\u3066\u5909\u66f4\u3092\u52a0\u3048\u305f\u308a Conftest \u306a\u3069\u3067\u30c6\u30b9\u30c8\u3059\u308b\u4ed5\u7d44\u307f\u304c\u5fc5\u8981\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"/2021/03/01/job-03-31","metadata":{"permalink":"/2021/03/01/job-03-31","source":"@site/blog/job-2021-03-01-03-31.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-03-01 ~ 2021-03-31","description":"* \u30d6\u30ed\u30b0\u306e\u57f7\u7b46","date":"2021-03-28T14:36:55.000Z","formattedDate":"March 28, 2021","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":0.755,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-03-01 ~ 2021-03-31","date":"2021-03-28T14:36:55.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Terraform Module \u306e Template \u3068\u3044\u3046\u4f7f\u3044\u65b9","permalink":"/terraform-module-template"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-02-01 ~ 2021-02-28","permalink":"/2021/02/01/job-02-28"}},"content":"* \u30d6\u30ed\u30b0\u306e\u57f7\u7b46\\n  * [100 \u4ee5\u4e0a\u306e Terraform \u74b0\u5883\u3092\u3044\u3044\u611f\u3058\u306b v0.14 \u306b upgrade \u3057\u305f\u65b9\u6cd5](https://blog.studysapuri.jp/entry/2021/03/12/080000)\\n  * [Pull Request \u306e terraform plan \u306e\u5b9f\u884c\u7d50\u679c\u3092 S3 \u306b\u4fdd\u5b58\u3057\u3066\u5b89\u5168\u306b apply](https://blog.studysapuri.jp/entry/2021/03/10/080000)\\n* Terraform \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4f5c\u6210\\n  * CI/CD \u3067\u3084\u3063\u3066\u308b\u3053\u3068\\n  * \u30ed\u30fc\u30ab\u30eb\u3067\u306e\u958b\u767a\u74b0\u5883 setup\\n  * etc\\n* CI \u306e\u6539\u5584\\n  * CircleCI \u306e job \u306e branch filter \u3092\u8a2d\u5b9a\u3057\u3066\u4f59\u8a08\u306a job \u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3057\u305f\\n  * (\u9032\u884c\u4e2d) \u30c7\u30d7\u30ed\u30a4\u3092\u30b5\u30fc\u30d3\u30b9\u3054\u3068\u306b\u5206\u5272\\n* (\u9032\u884c\u4e2d) Lambda \u3092\u7206\u901f\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u305f\u3081\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3065\u304f\u308a\\n  * Terraform + lambroll + AWS CodeBuild\\n* MongoDB upgrade (Atlas)\\n* On Boarding \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u6574\u7406"},{"id":"/2021/02/01/job-02-28","metadata":{"permalink":"/2021/02/01/job-02-28","source":"@site/blog/job-2021-02-01-02-28.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-02-01 ~ 2021-02-28","description":"* Terraform \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u7d71\u5408","date":"2021-02-27T11:51:56.000Z","formattedDate":"February 27, 2021","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":0.405,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-02-01 ~ 2021-02-28","date":"2021-02-27T11:51:56.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-03-01 ~ 2021-03-31","permalink":"/2021/03/01/job-03-31"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-01-01 ~ 2021-01-31","permalink":"/2021/01/01/job-01-31"}},"content":"* Terraform \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u7d71\u5408\\n* [Terraform \u3092 v0.14 \u3078 upgrade](https://blog.studysapuri.jp/entry/2021/03/12/080000)\\n* \u30c7\u30d7\u30ed\u30a4\u3092\u30b5\u30fc\u30d3\u30b9\u3054\u3068\u306b\u5206\u5272\\n* CircleCI \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5206\u5272\\n  * https://blog.studysapuri.jp/entry/2020/12/01/080000 \u3068\u540c\u69d8\u306e\u3053\u3068\u3092\u5225\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3082\u3084\u3063\u305f\\n* Renovate \u306e\u8a2d\u5b9a\u3092\u6539\u5584\u3057\u3001\u5b89\u5168\u6027\u3068\u904b\u7528\u306e\u8ca0\u62c5\u8efd\u6e1b\u3001\u30aa\u30fc\u30d7\u30f3\u306a\u307e\u307e\u306e PR \u306e\u524a\u6e1b\\n* miam \u306e Rate Limit \u554f\u984c\u306e\u89e3\u6d88"},{"id":"/2021/01/01/job-01-31","metadata":{"permalink":"/2021/01/01/job-01-31","source":"@site/blog/job-2021-01-01-01-31.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-01-01 ~ 2021-01-31","description":"* CI: PR \u30b3\u30e1\u30f3\u30c8\u306e\u975e\u8868\u793a","date":"2021-02-10T23:13:10.000Z","formattedDate":"February 10, 2021","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":0.465,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-01-01 ~ 2021-01-31","date":"2021-02-10T23:13:10.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-02-01 ~ 2021-02-28","permalink":"/2021/02/01/job-02-28"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-12-01 ~ 2020-12-31","permalink":"/2020/12/01/job-12-31"}},"content":"* CI: PR \u30b3\u30e1\u30f3\u30c8\u306e\u975e\u8868\u793a\\n  * github-comment, tfcmt\\n    * \u975e\u8868\u793a\u4ee5\u5916\u306b\u3082\u7d30\u304b\u306a\u6539\u5584\u5165\u308c\u3066\u3044\u308b\\n* Renovate\\n  * [label \u3092\u8a2d\u5b9a](https://github.com/renovatebot/renovate/pull/8138)\\n  * [Renovate \u306e PR \u306b\u4fbf\u5229\u306a\u30ea\u30f3\u30af\u3092\u8ffd\u52a0](/renovate-add-compare/)\\n* Terraform\\n  * apply \u3053\u3051\u305f\u3068\u304d\u306b plan \u518d\u5b9f\u884c\u3057\u3066 S3 \u306b\u4fdd\u5b58\u3057\u3066\u3044\u308b plan file \u53ca\u3073 PR \u30b3\u30e1\u30f3\u30c8\u3092\u66f4\u65b0\\n  * [tfnotify](https://github.com/mercari/tfnotify) \u3092 [tfcmt](https://github.com/suzuki-shunsuke/tfcmt) \u306b\u30ea\u30d7\u30ec\u30fc\u30b9\\n    * [tfnotify \u3092 fork \u3057\u305f](/fork-tfnotify/)"},{"id":"/2020/12/01/job-12-31","metadata":{"permalink":"/2020/12/01/job-12-31","source":"@site/blog/job-2020-12-01-12-31.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-12-01 ~ 2020-12-31","description":"2020-12-01 \u304b\u3089 2020-12-31 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u3051\u308b\u7bc4\u56f2\u3067\u66f8\u304d\u307e\u3059\u3002","date":"2021-02-10T23:02:11.000Z","formattedDate":"February 10, 2021","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":1.865,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-12-01 ~ 2020-12-31","date":"2021-02-10T23:02:11.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2021-01-01 ~ 2021-01-31","permalink":"/2021/01/01/job-01-31"},"nextItem":{"title":"terraformer \u3067\u96d1\u306b\u751f\u6210\u3057\u305f tf \u30d5\u30a1\u30a4\u30eb \u3068 state \u3092\u5206\u5272\u3057\u305f\u304f\u3066\u30c4\u30fc\u30eb\u3092\u66f8\u3044\u305f","permalink":"/tfmigrator"}},"content":"2020-12-01 \u304b\u3089 2020-12-31 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u3051\u308b\u7bc4\u56f2\u3067\u66f8\u304d\u307e\u3059\u3002\\n\\n* AWS SAM Application \u306e\u958b\u767a\\n* [Renovate \u306e PR \u306b\u30ea\u30f3\u30af\u3092\u8ffd\u52a0](/renovate-add-compare/)\\n* Terraform\\n  * Terraform \u306e CI \u306b\u95a2\u3057\u3066\u65e5\u3005\u884c\u3063\u3066\u3044\u308b\u6539\u5584\u70b9\u30fb\u5909\u66f4\u70b9\u3092\u30c1\u30fc\u30e0\u306b\u30b7\u30a7\u30a2\\n  * Docker Compose \u3092\u7528\u3044\u3066\u30ed\u30fc\u30ab\u30eb\u3067\u958b\u767a\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u6539\u5584\\n  * \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30fb\u30b3\u30fc\u30c9\u30b3\u30e1\u30f3\u30c8\u306e\u8ffd\u52a0\\n  * \u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\\n    * \u4e0d\u8981\u306a\u30b3\u30fc\u30c9\u306e\u524a\u9664\\n    * \u4e0d\u8981\u306a secret \u3092\u524a\u9664\\n    * \u4e0d\u8981\u306a\u5909\u6570\u306e\u524a\u9664\\n    * data.terraform_remote_state \u3092 local values \u306b\u7f6e\u63db\\n    * \u306a\u305c\u304b\u74b0\u5883\u5909\u6570\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3057\u3066\u3044\u305f\u7b87\u6240\u3092\u3001 local value \u306b\u7f6e\u63db\\n  * CI \u306b tflint \u306e\u5c0e\u5165\\n  * \u5bfe\u8c61\u306e build \u304c 1 \u3064\u306e\u5834\u5408 batch build \u3092\u5b9f\u884c\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\\n    * [Terraform \u306e CI/CD \u3092 CodeBuild \u306b\u79fb\u884c\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/12/03/080000) \u306e\u6539\u826f\\n    * Batch Build \u306e\u8d77\u52d5\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u554f\u984c\u306e\u89e3\u6d88\\n  * master \u306e HEAD \u3058\u3083\u306a\u304f\u3066\u3082 apply \u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\\n  * plan file \u3092 S3 \u306b\u4fdd\u5b58\\n  * refactor: tfsec \u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3046\u3088\u3046\u306b\u3059\u308b\\n  * Renovate \u306e PR \u304c\u591a\u3059\u304e\u3066\u9b31\u9676\u3057\u3044\u554f\u984c\u306e\u5bfe\u5fdc\\n    * automerge \u3055\u308c\u308b\u3082\u306e\u306f reviewer \u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u305f\\n    * [prConcurrentLimit](https://docs.renovatebot.com/configuration-options/#prconcurrentlimit) \u3092 1 \u306b\u3057\u305f\\n    * branch protection `Require branches to be up to date before merging` \u3092\u7121\u52b9\u5316\\n* [kube-linter](https://github.com/stackrox/kube-linter)\\n  * Rule \u306b\u57fa\u3065\u3044\u3066 manifest \u306e\u4fee\u6b63\\n* [miam](https://github.com/codenize-tools/miam) \u3067\u30ea\u30bd\u30fc\u30b9\u304c\u524a\u9664\u3055\u308c\u305d\u3046\u306a\u3068\u304d\u306b\u8b66\u544a\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u305f\\n* \u30d6\u30ed\u30b0\u306e\u57f7\u7b46\\n  * [Renovate \u306e Tips](https://blog.studysapuri.jp/entry/2020/12/10/080000)\\n  * [Terraform \u306e CI/CD \u3092 CodeBuild \u306b\u79fb\u884c\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/12/03/080000)\\n  * [\u5de8\u5927\u306a .circleci/config.yml \u3092\u5206\u5272\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/12/01/080000)"},{"id":"/tfmigrator","metadata":{"permalink":"/tfmigrator","source":"@site/blog/tfmigrator.md","title":"terraformer \u3067\u96d1\u306b\u751f\u6210\u3057\u305f tf \u30d5\u30a1\u30a4\u30eb \u3068 state \u3092\u5206\u5272\u3057\u305f\u304f\u3066\u30c4\u30fc\u30eb\u3092\u66f8\u3044\u305f","description":"terraformer \u3067\u96d1\u306b\u751f\u6210\u3057\u305f Terraform \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb (\u4ee5\u4e0b tf \u30d5\u30a1\u30a4\u30eb) \u3068 state \u3092\u5206\u5272\u3057\u305f\u304f\u3066\u30c4\u30fc\u30eb\u3092\u66f8\u304d\u307e\u3057\u305f\u3002","date":"2021-01-31T05:53:23.000Z","formattedDate":"January 31, 2021","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"terraform","permalink":"/tags/terraform"}],"readingTime":12.43,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"terraformer \u3067\u96d1\u306b\u751f\u6210\u3057\u305f tf \u30d5\u30a1\u30a4\u30eb \u3068 state \u3092\u5206\u5272\u3057\u305f\u304f\u3066\u30c4\u30fc\u30eb\u3092\u66f8\u3044\u305f","date":"2021-01-31T05:53:23.000Z","archives":["2021/01"],"tags":["oss","terraform"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-12-01 ~ 2020-12-31","permalink":"/2020/12/01/job-12-31"},"nextItem":{"title":"skaffold \u3092\u4f7f\u3063\u3066 GitOps \u3059\u308b","permalink":"/gitops-skaffold"}},"content":"[terraformer](https://github.com/GoogleCloudPlatform/terraformer) \u3067\u96d1\u306b\u751f\u6210\u3057\u305f Terraform \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb (\u4ee5\u4e0b tf \u30d5\u30a1\u30a4\u30eb) \u3068 state \u3092\u5206\u5272\u3057\u305f\u304f\u3066\u30c4\u30fc\u30eb\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\\n\\n[tfmigrator](https://github.com/suzuki-shunsuke/tfmigrator)\\n\\n## \u7d4c\u7def\\n\\n### miam \u304b\u3089 Terraform \u3078\u79fb\u884c\u3057\u305f\u3044\\n\\n[miam](https://github.com/codenize-tools/miam) \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u5927\u91cf\u306e\u30ea\u30bd\u30fc\u30b9\u3092 Terraform \u3067\u7ba1\u7406\u3057\u305f\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\n\u591a\u304f\u306e AWS Resource \u306f Terraform \u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001 IAM \u306b\u95a2\u3057\u3066\u306f miam \u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\u306a\u305c Terraform \u3067\u306f\u306a\u304f miam \u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u5f53\u6642\u306e\u3053\u3068\u306f\u81ea\u5206\u306b\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u6b74\u53f2\u7684\u306a\u7d4c\u7def\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\u6614\u306f\u4eca\u3088\u308a\u3082 Terraform \u306e\u8868\u73fe\u529b\u304c\u8c4a\u304b\u3067\u306f\u306a\u304f\u3001 Ruby \u3067\u81ea\u7531\u306b\u304b\u3051\u308b miam \u306e\u307b\u3046\u304c\u6271\u3044\u3084\u3059\u304b\u3063\u305f\u3068\u304b\u3001\\nmiam \u3060\u3068 miam \u3067\u30ea\u30bd\u30fc\u30b9\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u3092\u5f37\u5236\u3067\u304d\u308b\u305f\u3081\u3001\u6a29\u9650\u7ba1\u7406\u3092\u53b3\u683c\u306b\u3084\u308b\u3068\u3044\u3046\u89b3\u70b9\u3067\u306f\u90fd\u5408\u304c\u826f\u3044\u3068\u3044\u3046\u70b9\u3082\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3067\u306f\u306a\u305c Terraform \u3067\u7ba1\u7406\u3057\u305f\u304f\u306a\u3063\u305f\u304b\u3068\u3044\u3046\u3068\u3001\\n\u4e00\u756a\u5927\u304d\u306a\u7406\u7531\u306f miam \u3067\u983b\u7e41\u306b rate limit \u306b\u5f15\u3063\u304b\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u304b\u3089\u3067\u3059\u3002\\nTerraform \u306b\u3057\u308d miam \u306b\u3057\u308d CI/CD \u3067 test, apply \u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\nmiam \u3067\u306f\u6bce\u56de\u5168\u90e8\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u5bfe\u8c61\u306b\u51e6\u7406\u304c\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\u30ea\u30bd\u30fc\u30b9\u306e\u6570\u304c\u5897\u3048\u308b\u306b\u3064\u308c\u3066 rate limit \u306b\u5f15\u3063\u304b\u304b\u308a\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\\nCI \u3092 rerun \u3059\u308c\u3070\u6210\u529f\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u60aa\u3044\u3068\u304d\u306f 3 \u56de\u9023\u7d9a\u3067 rate limit \u306b\u5f15\u3063\u304b\u304b\u308a\u3001 4 \u56de\u76ee\u3067\u3088\u3046\u3084\u304f\u6210\u529f\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u307e\u3057\u305f\u3002\\n\\nTerraform \u3067\u306f\u30b5\u30fc\u30d3\u30b9\u3084\u74b0\u5883\u5358\u4f4d\u3067 State \u304c\u5206\u5272\u3055\u308c\u3066\u304a\u308a\u3001 CI \u3082 PR \u3067\u30d5\u30a1\u30a4\u30eb\u304c\u5909\u66f4\u3055\u308c\u305f state \u306b\u5bfe\u3057\u3066\u306e\u307f\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\\nrate limit \u306b\u5f15\u3063\u304b\u304b\u308b\u3053\u3068\u306f\u57fa\u672c\u306a\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u4ed6\u306b\u3082\u8272\u3005\u7406\u7531\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u672c\u984c\u304b\u3089\u305d\u308c\u308b\u306e\u3067\u3084\u3081\u3066\u304a\u304d\u307e\u3059\u3002\\nrate limit \u3060\u3051\u306a\u3089 miam \u3067\u3082 exclude \u3059\u308b\u6a5f\u80fd\u304c\u3042\u308b\u306e\u3067\u9811\u5f35\u308c\u3070\u306a\u3093\u3068\u304b\u306a\u308b\u6c17\u306f\u3057\u307e\u3059\u3002\\n\\n### \u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\\n\\n* Terraform \u3067\u65e2\u5b58\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u7ba1\u7406\u3057\u305f\u3044\\n  * tf \u30d5\u30a1\u30a4\u30eb \u3068 state \u3092\u751f\u6210\u3057\u305f\u3044\\n* Terraform \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb \u3068 state \u306f\u30b5\u30fc\u30d3\u30b9\u30fb\u74b0\u5883\u3054\u3068\u306b\u5206\u5272\u3057\u305f\u3044\\n* Terraform \u306e\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u306f\u30d2\u30e5\u30fc\u30de\u30f3\u30ea\u30fc\u30c0\u30d6\u30eb\u306b\u3057\u305f\u3044\\n  * \u3053\u308c\u306f\u96e3\u3057\u3051\u308c\u3070\u8ae6\u3081\u308b\u306e\u3082\u3042\u308a\u3060\u304c\u3001\u3067\u304d\u308c\u3070\u3084\u308a\u305f\u3044\\n\\n### terraformer \u3067\u81ea\u52d5\u751f\u6210\u3059\u308b\u3082\u8272\u3005\u554f\u984c\u304c\u3042\u3063\u305f\\n\\n\u307e\u305a\u306f terraformer \u3067\u96d1\u306b tf \u30d5\u30a1\u30a4\u30eb \u3068 state \u3092\u751f\u6210\u3057\u307e\u3057\u305f\u3002\\n\u4eca\u56de terraformer \u3092\u4f7f\u3046\u306e\u306f\u521d\u3081\u3066\u3067\u3001 terraformer \u3067\u4e07\u4e8b\u89e3\u6c7a\u306a\u3089\u8a71\u306f\u7c21\u5358\u3060\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u8a71\u306f\u305d\u3093\u306a\u7c21\u5358\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\u3053\u308c\u306b\u95a2\u3057\u3066\u306f\u3001\u81ea\u5206\u306e\u554f\u984c(\u4f7f\u3044\u65b9\u3092\u9593\u9055\u3063\u3066\u3044\u308b\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3061\u3083\u3093\u3068\u8aad\u3093\u3067\u3044\u306a\u3044)\u306a\u306e\u304b\u3001 \u3042\u308b\u3044\u306f terraformer \u5074\u306e\u554f\u984c\u306a\u306e\u304b\u3088\u304f\u5206\u304b\u3063\u3066\u306a\u3044\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\u3002\\n\\n\u307e\u305a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u3082\u3044\u307e\u3044\u3061\u30ea\u30bd\u30fc\u30b9\u306e\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u306e\u4ed5\u65b9\u304c\u5206\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\u8a66\u3057\u306b IAM role \u306e\u540d\u524d\u3092\u6307\u5b9a\u3057\u3066\u305d\u308c\u3060\u3051 import \u3057\u3088\u3046\u3068\u3057\u307e\u3057\u305f\u304c\u3001\u306a\u305c\u304b\u5168 IAM \u30ea\u30bd\u30fc\u30b9\u304c import \u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\\n\\n\u826f\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u3053\u308c\u306f\u5168 IAM \u30ea\u30bd\u30fc\u30b9\u3092\u96d1\u306b import \u3057\u3066\u304b\u3089\u30b5\u30fc\u30d3\u30b9\u30fb\u74b0\u5883\u3054\u3068\u306b\u5206\u5272\u3059\u308b\u3057\u304b\u7121\u3044\u304b\u306a\u3041\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\n\\n\u52a0\u3048\u3066\u3001\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u304c\u5168\u7136\u30d2\u30e5\u30fc\u30de\u30f3\u30ea\u30fc\u30c0\u30d6\u30eb\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002 terraformer \u3068\u3057\u3066\u306f\u3053\u308c\u306f\u4ed5\u65b9\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u306a\u3093\u3068\u304b\u30ea\u30cd\u30fc\u30e0\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\n\\n### \u6700\u521d\u624b\u4f5c\u696d\u3067\u59cb\u3081\u308b\u3082\u3001\u81ea\u52d5\u5316\u304c\u5fc5\u8981\u3068\u609f\u308b\\n\\n\u6700\u521d\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u95a2\u3057\u3066\u624b\u4f5c\u696d\u3067 tf \u30d5\u30a1\u30a4\u30eb, state \u3092\u79fb\u884c\u3059\u308b\u4f5c\u696d\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\\n\u7c21\u5358\u306a\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u534a\u81ea\u52d5\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u3002\\ntf \u30d5\u30a1\u30a4\u30eb\u306e\u64cd\u4f5c\u306b\u306f [hcledit](https://github.com/minamijoyo/hcledit) \u304c\u4fbf\u5229\u3067\u3059\u3002\\n\\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\\n\\n* terraform state mv\\n* hcledit block get\\n* hcledit block mv\\n* hcledit block list\\n\\n\u3067\u3001\u3084\u3063\u3066\u307f\u305f\u3082\u306e\u306e\u3001\u306a\u306b\u305b\u5bfe\u8c61\u304c\u591a\u3044\u306e\u3067\u3001\u3053\u308c\u3092\u4e00\u3064\u4e00\u3064\u624b\u4f5c\u696d\u3067\u3084\u308b\u306e\u306f\u5927\u5909\u3060\u3057\u3001\u30d2\u30e5\u30fc\u30de\u30f3\u30a8\u30e9\u30fc\u306f\u907f\u3051\u3089\u308c\u306a\u3044\u3068\u611f\u3058\u307e\u3057\u305f\u3002\\n\u305d\u3053\u3067\u3061\u3087\u3063\u3068\u3057\u305f\u30c4\u30fc\u30eb\u3092\u4f5c\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\u624b\u4f5c\u696d\u3067\u4e00\u56de\u3084\u3063\u305f\u5206\u624b\u9806\u306f\u30a4\u30e1\u30fc\u30b8\u3067\u304d\u3066\u3044\u308b\u306e\u3067\u3001\u5272\u3068\u7c21\u5358\u306b\u3067\u304d\u308b\u3060\u308d\u3046\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\n\\n## tfmigrator\\n\\n\u305d\u3053\u3067\u4f5c\u3063\u305f\u306e\u304c [tfmigrator](https://github.com/suzuki-shunsuke/tfmigrator) \u3067\u3059\u3002\\n\u4eca\u56de\u306f AWS \u306e IAM \u30ea\u30bd\u30fc\u30b9\u3092\u6271\u3044\u307e\u3059\u304c\u3001 tfmigrator \u306f\u7279\u5b9a\u306e provider \u306a\u3069\u306b\u306f\u4f9d\u5b58\u3057\u306a\u3044\u30c4\u30fc\u30eb\u3067\u3059\u3002\\nTerraform CLI \u3068 hcledit \u304c\u5fc5\u8981\u3067\u3059\u3002\\n\\n\u307e\u305a terraformer \u3067 IAM \u30ea\u30bd\u30fc\u30b9\u3092\u5168\u90e8 import \u3057\u3066\u304d\u307e\u3059\u3002\\n\\n```\\n$ terraformer import aws -r iam --compact --path-pattern .\\n```\\n\\n\u3053\u3046\u3059\u308b\u3068 resources.tf \u3068 terraform.tfstate \u304c\u4f5c\u3089\u308c\u307e\u3059\u3002\\n\\ntfmigrator \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb tfmigrator.yaml \u3092\u66f8\u304d\u307e\u3059\u3002\\n\\n```yaml\\n---\\nitems:\\n# \u65e2\u306b Terraform \u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u306f\u7121\u8996\\n- rule: \'\\"tags\\" in Values && Values.tags.ManagedBy == \\"Terraform\\"\'\\n  exclude: true\\n- rule: \'\\"name\\" not in Values\'\\n  exclude: true\\n# `name` \u306b \\"foo\\" \u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3082\u306e\u306f\u30b5\u30fc\u30d3\u30b9 foo \u306e\u30ea\u30bd\u30fc\u30b9\u3068\u307f\u306a\u3057\u3066\u5206\u5272\\n- rule: \'Values.name contains \\"foo\\"\'\\n  state_out: foo/terraform.tfstate\\n  resource_name: \\"{{.Values.name}}\\"\\n  tf_path: foo/resource.tf\\n# \u4ee5\u4e0b\u7565\\n```\\n\\ntfmigrator \u306e\u51e6\u7406\u306e\u6d41\u308c\u3092\u306a\u3093\u3068\u306a\u304f\u305d\u308c\u3063\u307d\u3044\u64ec\u4f3c\u8a00\u8a9e\u3067\u8868\u73fe\u3057\u307e\u3059\u3002\\n\u5b9f\u969b\u306e\u51e6\u7406\u306e\u6d41\u308c\u3068\u306f\u82e5\u5e72\u7570\u306a\u308a\u307e\u3059\u304c\u3001\u96f0\u56f2\u6c17\u304c\u4f1d\u308f\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n```\\nfor resource in state\\n  for item config.items\\n    if item.rule.match(resource)\\n      if item.exclude\\n        # \u3053\u306e\u30ea\u30bd\u30fc\u30b9\u306f\u51e6\u7406\u305b\u305a\u6b21\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u51e6\u7406\u306b\u79fb\u308b\\n        break\\n      # tf \u306e migration (note: \u5143\u306e tf \u306f\u305d\u306e\u307e\u307e)\\n      hcledit block get resource.path < tf | hcledit block mv resource.path \\"${resource.type}.${item.resource_name(resource)}\\" >> item.tf_path\\n      terraform state mv\\n      # \u6b21\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u51e6\u7406\u306b\u79fb\u308b\\n      break\\n```\\n\\n\u5404 item \u306e\u8a2d\u5b9a\u306e\u610f\u5473\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\\n\\n* rule: [expr](https://github.com/antonmedv/expr/blob/master/docs/Language-Definition.md) \u306e expression \u3002\u3053\u306e\u6761\u4ef6\u306b\u30de\u30c3\u30c1\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u3053\u306e item \u3067\u51e6\u7406\u3059\u308b\\n* exclude: true \u306e\u5834\u5408\u3001\u3053\u306e item \u306b\u30de\u30c3\u30c1\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306f\u7121\u8996\u3059\u308b\\n* state_out: `terraform state mv` \u306e `-state-out`\\n* resource_name: \u65b0\u3057\u3044\u30ea\u30bd\u30fc\u30b9\u540d\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u540d\u524d\u306f\u305d\u306e\u307e\u307e\u3002 Go \u306e [text/template](https://golang.org/pkg/text/template/) \u3067\u51e6\u7406\u3055\u308c\u307e\u3059\\n* tf_path: Terraform \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u51fa\u529b\u5148\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u3044\u305f\u3089 tfmigrator \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \\n\u3044\u304d\u306a\u308a\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u3059\u308b\u3068\u3044\u3046\u3088\u308a\u306f\u3001\u307e\u305a\u306f dry run \u3066\u304d\u306a\u3053\u3068\u3092\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u305f\u3044\u3067\u3059\u306d\u3002\\n`-skip-state` \u3092\u3064\u3051\u308b\u3068 `terraform state mv` \u3092 skip \u3057\u3001\u5206\u5272\u3055\u308c\u308b tf \u30d5\u30a1\u30a4\u30eb \u3092\u65b0\u3057\u3044\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3060\u3051\u3057\u307e\u3059\u3002\\n\\n```\\n$ cat *.tf | tfmigrator run -skip-state\\n```\\n\\n\u751f\u6210\u3055\u308c\u305f tf \u30d5\u30a1\u30a4\u30eb \u3092\u773a\u3081\u3066\u3001\u826f\u3055\u305d\u3046\u306a\u3089 `-skip-state` \u3092\u3068\u3063\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n## tf \u30d5\u30a1\u30a4\u30eb\u751f\u6210\u6642\u306e\u6ce8\u610f\u70b9\\n\\ntf \u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210\u306f\u73fe\u72b6\u8ffd\u8a18\u30e2\u30fc\u30c9\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u306a\u306e\u3067 `-skip-state` \u3092\u3064\u3051\u3066\u8907\u6570\u56de\u5b9f\u884c\u3059\u308b\u3068\u540c\u3058\u8a2d\u5b9a\u304c\u91cd\u8907\u3057\u3066\u66f8\u304d\u8fbc\u307e\u308c\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\\n\u305d\u308c\u304c\u56f0\u308b\u5834\u5408\u306f\u5b9f\u884c\u524d\u306b\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u6d88\u3057\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u307e\u305f\u3001tf \u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u884c\u306f\u65e2\u5b58\u306e tf \u30d5\u30a1\u30a4\u30eb\u306b\u5bfe\u3057\u3066 `hcledit block get`, `hcledit block mv` \u3092\u5b9f\u884c\u3057\u3066\u884c\u308f\u308c\u308b\u305f\u3081\u3001\\n\u5143\u306e tf \u30d5\u30a1\u30a4\u30eb\u306f\u305d\u306e\u307e\u307e\u6b8b\u308b\u3053\u3068\u3001\u307e\u305f expression \u306f\u8a55\u4fa1\u3055\u308c\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\u4f8b\u3048\u3070 `name = var.name` \u306e\u3088\u3046\u306b\u5909\u6570\u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u308c\u3082\u305d\u306e\u307e\u307e\u8a55\u4fa1\u3055\u308c\u305a\u306b\u6b8b\u308a\u307e\u3059\u3002\\n\u3068\u308a\u3042\u3048\u305a\u81ea\u5206\u304c\u3084\u308a\u305f\u304b\u3063\u305f\u306e\u306f terraformer \u3067\u751f\u6210\u3057\u305f tf \u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u884c\u3060\u3063\u305f\u306e\u3067\u3001\u305d\u3093\u306a\u306b\u554f\u984c\u306b\u306f\u306a\u3089\u306a\u3044\u3060\u308d\u3046\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n## \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\\n\\n\u3042\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u51e6\u7406\u3067\u30a8\u30e9\u30fc\u304c\u8d77\u3053\u3063\u305f\u3089\u5373\u5ea7\u306b\u7570\u5e38\u7d42\u4e86\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n(\u5f53\u7136\u3067\u3059\u304c)\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3068\u304b\u306f\u3057\u307e\u305b\u3093(\u3057\u3001\u3067\u304d\u307e\u305b\u3093)\u3002\\n\u30a8\u30e9\u30fc\u51fa\u529b\u3057\u3064\u3064\u6b21\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u51e6\u7406\u306b\u79fb\u308b\u3001\u3068\u3044\u3046\u306e\u3082\u8003\u3048\u3089\u308c\u307e\u3059\u304c\u3001\u9593\u9055\u3063\u3066 `terraform state mv` \u3055\u308c\u308b\u3068\u9762\u5012\u306a\u306e\u3067\u3001\u73fe\u72b6\u5373\u5ea7\u306b\u7d42\u4e86\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\u554f\u984c\u306e\u3042\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u7121\u8996\u3057\u305f\u3044\u5834\u5408\u306f\u3001 tfmigrator \u306e\u8a2d\u5b9a\u3067\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u30de\u30c3\u30c1\u3059\u308b item \u3092\u8ffd\u52a0\u3057 `exclude: true` \u3068\u3059\u308c\u3070\u3088\u3044\u3067\u3057\u3087\u3046\u3002\\n\\n## \u3053\u306e\u30c4\u30fc\u30eb\u306e\u4fbf\u5229\u306a\u3068\u3053\u308d\\n\\n* expr \u3092\u7528\u3044\u3066\u30ea\u30bd\u30fc\u30b9\u3092\u5206\u985e\u3067\u304d\u308b\\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8ff0\u3057\u3001\u30ef\u30f3\u30fb\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u308b\\n  * \u30ec\u30d3\u30e5\u30fc\u3067\u304d\u308b\\n  * \u5f8c\u3067\u898b\u8fd4\u305b\u308b\\n\\n\u30ed\u30fc\u30ab\u30eb\u3067\u8a66\u884c\u932f\u8aa4\u3057\u306a\u304c\u3089\u8907\u6570\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u3068\u3001\u5f8c\u3067\u306a\u306b\u3084\u3063\u305f\u304b\u308f\u304b\u3089\u306a\u304f\u306a\u308a\u304c\u3061\u3067\u3059\u3057\u3001\u9014\u4e2d\u3067\u4f5c\u696d\u3092\u4e2d\u65ad\u3057\u305f\u308a\u3059\u308b\u3068\u3001\u3042\u3068\u3067\u4eca\u3069\u3046\u3044\u3046\u72b6\u614b\u306a\u306e\u304b\u5206\u304b\u3089\u306a\u304f\u306a\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\u30ef\u30f3\u30fb\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u308b\u3068\u305d\u3046\u3044\u3046\u554f\u984c\u304c\u306a\u304f\u3066\u4fbf\u5229\u3067\u3059\u306d\u3002\\n\\n## \u809d\u5fc3\u306e\u79fb\u884c\u306f\u3067\u304d\u305f\u306e\u304b\\n\\n\u307e\u3060\u3067\u304d\u3066\u3044\u307e\u305b\u3093\u3002\u79fb\u884c\u3059\u308b\u305f\u3081\u306b tfmigrator \u3092\u4f5c\u3063\u305f\u306e\u3067\u3001\u3053\u308c\u304b\u3089\u79fb\u884c\u3057\u3066\u3044\u3053\u3046\u3068\u3044\u3046\u6bb5\u968e\u3067\u3059\u3002\\n\u306a\u306e\u3067 tfmigrator \u306f\u307e\u3060\u5168\u7136\u4f7f\u3044\u8fbc\u3093\u3067\u306a\u3044\u3067\u3059\u3057\u3001\u4f7f\u3063\u3066\u304f\u4e2d\u3067\u6a5f\u80fd\u4fee\u6b63\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## \u6700\u5f8c\u306b\\n\\nterraformer \u3067\u96d1\u306b import \u3057\u3066\u304d\u305f tf \u30d5\u30a1\u30a4\u30eb\u3068 state \u3092\u3044\u3044\u611f\u3058\u306b\u5206\u5272\u3059\u308b\u305f\u3081\u306b tfmigrator \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\\ntfmigrator \u304c\u5f79\u306b\u7acb\u3064\u30b1\u30fc\u30b9\u306f\u5272\u3068\u9650\u3089\u308c\u3066\u3044\u308b\u3068\u3044\u3046\u304b\u3001\u65e5\u5e38\u7684\u306b\u4f7f\u3046\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3067\u3082\u306a\u3044\u3067\u3059\u304c\u3001\\nterraformer \u3067\u96d1\u306b import \u3057\u3066\u304d\u305f\u306e\u306f\u826f\u3044\u304c\u3001\u6271\u3044\u306b\u56f0\u3063\u3066\u3044\u308b\u306a\u3093\u3066\u4eba\u306b\u306f\u5f79\u306b\u7acb\u3064\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002"},{"id":"/gitops-skaffold","metadata":{"permalink":"/gitops-skaffold","source":"@site/blog/gitops-skaffold.md","title":"skaffold \u3092\u4f7f\u3063\u3066 GitOps \u3059\u308b","description":"skaffold \u3092\u7528\u3044\u3066\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u52d5\u7684\u306b\u751f\u6210\u3057\u3064\u3064 GitOps \u3059\u308b\u65b9\u6cd5\u3092\u8003\u3048\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2021-01-11T07:24:44.000Z","formattedDate":"January 11, 2021","tags":[{"label":"skaffold","permalink":"/tags/skaffold"},{"label":"gitops","permalink":"/tags/gitops"},{"label":"k8s","permalink":"/tags/k-8-s"}],"readingTime":4.725,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"skaffold \u3092\u4f7f\u3063\u3066 GitOps \u3059\u308b","date":"2021-01-11T07:24:44.000Z","tags":["skaffold","gitops","k8s"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"terraformer \u3067\u96d1\u306b\u751f\u6210\u3057\u305f tf \u30d5\u30a1\u30a4\u30eb \u3068 state \u3092\u5206\u5272\u3057\u305f\u304f\u3066\u30c4\u30fc\u30eb\u3092\u66f8\u3044\u305f","permalink":"/tfmigrator"},"nextItem":{"title":"tfnotify \u3092 fork \u3057\u305f","permalink":"/fork-tfnotify"}},"content":"skaffold \u3092\u7528\u3044\u3066\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u52d5\u7684\u306b\u751f\u6210\u3057\u3064\u3064 GitOps \u3059\u308b\u65b9\u6cd5\u3092\u8003\u3048\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\u306a\u304a\u3001\u73fe\u6642\u70b9\u3067\u306f\u3042\u304f\u307e\u3067\u8003\u3048\u3066\u307f\u305f\u3060\u3051\u3067\u5b9f\u969b\u306b\u5c0e\u5165\u3057\u305f\u308a\u306f\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\n\\nGitOps \u306f\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092 Git \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30df\u30c3\u30c8\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u308f\u3051\u3067\u3059\u304c\u3001\\nDocker image \u3092\u30d3\u30eb\u30c9\u3001\u30d7\u30c3\u30b7\u30e5\u3057\u3001\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e image tag \u3092\u66f8\u304d\u63db\u3048\u308b\u3068\u3044\u3046\u4e00\u9023\u306e\u51e6\u7406\u3092\u3069\u3046\u3084\u3063\u3066\u3084\u308b\u306e\u304c\u3044\u3044\u306e\u304b\\n\u500b\u4eba\u7684\u306b\u8003\u3048\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n\u81ea\u5206\u306f FluxCD \u306b\u306f\u8a73\u3057\u304f\u306a\u3044\u306e\u3067\u3059\u304c\u3001\\nFluxCD \u3067\u306f registry \u3092\u30dd\u30fc\u30ea\u30f3\u30b0\u3057\u3066\u81ea\u52d5\u3067\u6700\u65b0\u306e\u30bf\u30b0\u306b\u66f8\u304d\u63db\u3048\u308b\u6a5f\u80fd\u304c\u3042\u308b\u305d\u3046\u3067\u3059\u306d\u3002\\n\\nhttps://toolkit.fluxcd.io/guides/image-update/\\n\\n\u305f\u3060\u3057\u3001\u307e\u3060 alpha \u3067\u3042\u308b\u3053\u3068\u3068\u3001 semver \u306b\u5f93\u3063\u3066\u3044\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3088\u3046\u3067\u3059\u3002\\n\u3053\u308c\u3060\u3068 master branch \u304c update \u3055\u308c\u308b\u305f\u3073\u306b image \u3092\u30d3\u30eb\u30c9\u3057\u3066 sha \u3067\u30bf\u30b0\u3092\u4ed8\u4e0e\u3059\u308b\u307f\u305f\u3044\u306a\u904b\u7528\u306f\u96e3\u3057\u305d\u3046\u3067\u3059\u3002\\n\\nSkaffold \u3060\u3068\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e image tag \u3092\u81ea\u52d5\u3067\u66f8\u304d\u63db\u3048\u3066\u304f\u308c\u308b\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\\n\u52a0\u3048\u3066 [skaffold render](https://skaffold.dev/docs/references/cli/#skaffold-render) \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3068 manifest \u306e apply \u306f\u305b\u305a\u306b\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u51fa\u529b\u3060\u3051\u3084\u3063\u3066\u304f\u308c\u307e\u3059\u3002\\n\u51fa\u529b\u3055\u308c\u305f manifest \u3092 Git \u30ea\u30dd\u30b8\u30c8\u30ea\u306b commit, push \u3059\u308c\u3070 GitOps \u304c\u5b9f\u73fe\u3067\u304d\u305d\u3046\u3067\u3059\u3002\\n\\n## How\\n\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3092 2 \u3064\u7528\u610f\u3057\u307e\u3059\u3002\\n\\n* app: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u3068\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u7ba1\u7406\u3059\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\\n* manifest: GitOps \u304c\u9023\u643a\u3059\u308b\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u7ba1\u7406\u3059\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\\n\\napp \u306f Monorepo \u306b\u306a\u3063\u3066\u3044\u308b\u3068\u3057\u307e\u3059\u3002\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306f\u6b21\u306e\u3088\u3046\u306a\u611f\u3058\u3092\u30a4\u30e1\u30fc\u30b8\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```\\nservices/\\n  foo/\\n    skaffold.yaml\\n    Dockerfile\\n    kubernetes/\\n      base/\\n        kustomization.yaml\\n        deployment.yaml\\n      overlays/\\n        develop/\\n          kustomization.yaml\\n        production/\\n          kustomization.yaml\\n```\\n\\nskaffold.yaml\\n\\n```yaml\\n---\\napiVersion: skaffold/v2beta10\\nkind: Config\\nbuild:\\n  tagPolicy:\\n    gitCommit:\\n      prefix: develop-\\n  artifacts:\\n  - image: foo\\ndeploy:\\n  kustomize:\\n    paths:\\n    - kubernetes/overlays/develop\\nprofiles:\\n- name: production\\n  build:\\n    tagPolicy:\\n      gitCommit:\\n        prefix: production-\\n  deploy:\\n    kustomize:\\n      paths:\\n      - kubernetes/overlays/production\\n```\\n\\n[profile](https://skaffold.dev/docs/environment/profiles/) \u306b\u3088\u3063\u3066 develop \u3068 production \u3092\u533a\u5225\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nmanifest \u3067\u306f tag \u3092\u6307\u5b9a\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\\n\\n```yaml\\n    spec:\\n      containers:\\n      - name: foo\\n        image: foo\\n```\\n\\n`skaffold render` \u3067 manifest \u3092\u751f\u6210\u3057\u307e\u3059\u3002\\n\\n```\\n$ skaffold render \\\\\\n  -p production \\\\\\n  --default-repo xxx.dkr.ecr.ap-northeast-1.amazonaws.com \\\\\\n  --offline=true \\\\\\n  --loud=true \\\\\\n  --output manifest.yaml\\n```\\n\\n`--loud=true` \u3092\u3064\u3051\u306a\u3044\u3068\u306a\u306b\u3082\u51fa\u529b\u3057\u306a\u3044\u306e\u3067\u306a\u306b\u304c\u8d77\u3053\u3063\u3066\u308b\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u3002\\n\\n\u751f\u6210\u3055\u308c\u305f\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u307f\u308b\u3068 tag \u304c\u81ea\u52d5\u3067\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n```yaml\\n      - image: xxx.dkr.ecr.ap-northeast-1.amazonaws.com/foo:production-e3a42e0@sha256:7032af912c511ab0c8353c28604461d8960833144953fb50853f087db55ffdd0\\n```\\n\\n\u751f\u6210\u3057\u305f manifest \u3092 `manifest` \u30ea\u30dd\u30b8\u30c8\u30ea\u306b commit, push \u3057\u307e\u3059\u3002\\nmanifest \u30ea\u30dd\u30b8\u30c8\u30ea\u3092 checkout \u3057\u3066\u304d\u3066 git \u30b3\u30de\u30f3\u30c9\u3067\u3084\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u304c\u3001 [ghcp](https://github.com/int128/ghcp) \u3092\u4f7f\u3046\u3068\u30b3\u30de\u30f3\u30c91\u3064\u3067\u3067\u304d\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\\n\\nmanifest \u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u5bfe\u8c61\u306e\u30b5\u30fc\u30d3\u30b9\u53ca\u3073\u74b0\u5883\u3054\u3068\u306b\u30d6\u30e9\u30f3\u30c1\u3092\u5206\u3051\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\\n\u305d\u3046\u3057\u305f\u307b\u3046\u304c push \u306e\u969b\u306b\u5931\u6557\u3057\u306b\u304f\u3044\u3068\u601d\u3044\u307e\u3059(\u591a\u5206\u3002\u5206\u304b\u3089\u306a\u3044\u3051\u3069)\u3002\\n\\n```\\n$ ghcp commit -u suzuki-shunsuke -r manifest -b \\"foo/production\\" -m \\"message\\" manifest.yaml\\n```\\n\\nmessage \u306f\u5b9f\u969b\u306b\u306f\u3082\u3063\u3068\u8a73\u7d30\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u3059\u3079\u304d\u3067\u3057\u3087\u3046\u3002 CI \u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3068\u601d\u3046\u306e\u3067\u3001 build URL \u3092\u542b\u3081\u305f\u308a\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\\n\u3053\u3046\u3059\u308b\u3068 `foo/production` \u30d6\u30e9\u30f3\u30c1\u306b manifest.yaml \u304c push \u3055\u308c\u307e\u3059\u3002\\n\u3042\u3068\u306f ArgoCD \u3084 FluxCD \u306e\u3088\u3046\u306a GitOps \u30c4\u30fc\u30eb \u3067 foo/production \u306e manifest.yaml \u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308c\u3070\u3088\u3044\u306f\u305a\u3067\u3059\u3002\\n\\n```yaml\\napiVersion: argoproj.io/v1alpha1\\nkind: Application\\nmetadata:\\n  name: foo\\n  namespace: argocd\\nspec:\\n  source:\\n    repoURL: https://github.com/suzuki-shunsuke/manifest.git\\n    targetRevision: foo/production\\n    path: manifest.yaml\\n  destination:\\n    server: https://kubernetes.default.svc\\n    namespace: production\\n```\\n\\n## \u3055\u3044\u3054\u306b\\n\\n\u4ee5\u4e0a\u3001 Skaffold \u3092\u4f7f\u3063\u3066\u3044\u3044\u611f\u3058\u306b tag \u3092\u66f8\u304d\u63db\u3048\u3066 GitOps \u3059\u308b\u4ed5\u7d44\u307f\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u305f\u3002\\nSkaffold \u4f7f\u3046\u3068 Docker image \u306e build, push \u3068\u3044\u3063\u305f\u4e00\u9023\u306e\u6d41\u308c\u3082\u5168\u90e8\u3084\u3063\u3066\u304f\u308c\u308b\u306e\u3067\u697d\u3067\u826f\u3044\u306a\u3068\u611f\u3058\u307e\u3057\u305f\u3002\\n\\nGitOps \u3058\u3083\u306a\u304f\u3066\u3082 CIOps \u3067\u3082 Skaffold \u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u4fbf\u5229\u305d\u3046\u3060\u306a\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\n\u305d\u306e\u5834\u5408\u306f `skaffold render` \u3067\u306f\u306a\u304f\u3001 [skaffold run](https://skaffold.dev/docs/references/cli/#skaffold-run) \u306b\u306a\u308a\u305d\u3046\u3067\u3059\u306d\u3002\\n\\nhttps://skaffold.dev/docs/workflows/ci-cd/"},{"id":"/fork-tfnotify","metadata":{"permalink":"/fork-tfnotify","source":"@site/blog/fork-tfnotify.md","title":"tfnotify \u3092 fork \u3057\u305f","description":"mercari/tfnotify \u3092 Fork \u3057\u3066 2 \u3064\u307b\u3069 OSS \u3092\u4f5c\u308a\u307e\u3057\u305f\u3002","date":"2021-01-02T10:42:10.000Z","formattedDate":"January 2, 2021","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"terraform","permalink":"/tags/terraform"}],"readingTime":1.97,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"tfnotify \u3092 fork \u3057\u305f","date":"2021-01-02T10:42:10.000Z","tags":["oss","terraform"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"skaffold \u3092\u4f7f\u3063\u3066 GitOps \u3059\u308b","permalink":"/gitops-skaffold"},"nextItem":{"title":"2019-10 \u304b\u3089\u4eca(2020-12-31)\u306b\u81f3\u308b\u307e\u3067\u4ed5\u4e8b\u3067\u3084\u3063\u3066\u3044\u308b\u3053\u3068","permalink":"/my-work-2020"}},"content":"[mercari/tfnotify](https://github.com/mercari/tfnotify) \u3092 Fork \u3057\u3066 2 \u3064\u307b\u3069 OSS \u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\\n\\n* https://github.com/suzuki-shunsuke/tfnotify - tfnotify \u3068\u4e92\u63db\u6027\u3042\u308a\\n* https://github.com/suzuki-shunsuke/tfcmt - tfnotify \u3068\u4e92\u63db\u6027\u304c\u306a\u3044\\n\\n## \u958b\u767a\u306e\u7d4c\u7def\\n\\n\u3053\u308c\u307e\u3067 tfnotify \u3092\u4fbf\u5229\u306b\u4f7f\u308f\u305b\u3066\u3082\u3089\u3063\u3066\u305f\u306e\u3067\u3059\u304c\u3001\u5e7e\u3064\u304b\u6539\u5584\u3057\u305f\u3044\u3068\u601d\u3046\u3068\u3053\u308d\u304c\u3042\u308a\u3001\u672c\u5bb6\u306b PR \u3092\u6295\u3052\u307e\u3057\u305f\u3002\\n\u3057\u304b\u3057\u6b8b\u5ff5\u306a\u304c\u3089\u3053\u308c\u307e\u3067\u306e\u3068\u3053\u308d\u53cd\u5fdc\u304c\u306a\u304f\u3001\u305d\u3053\u307e\u3067\u672c\u5bb6\u304c\u6d3b\u767a\u3067\u306f\u306a\u3044\u3053\u3068\u3001\u307e\u305f\u4ed6\u306b\u3082\u8272\u3005\u6539\u4fee\u3057\u305f\u3044\u3068\u3053\u308d\u304c\u3042\u3063\u305f\u3053\u3068\u304b\u3089\u3001\u81ea\u5206\u3067\u30d5\u30a9\u30fc\u30af\u3057\u3066\u30e1\u30f3\u30c6\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\u6700\u521d\u306f\u4e92\u63db\u6027\u3092\u7dad\u6301\u3057\u306a\u304c\u3089 [suzuki-shunsuke/tfnotify](https://github.com/suzuki-shunsuke/tfnotify) \u3092\u958b\u767a\u3057\u3066\u3044\u307e\u3057\u305f(\u4eca\u3082\u3057\u3066\u3044\u307e\u3059)\u3002\\n\u3057\u304b\u3057\u3001\u958b\u767a\u3092\u9032\u3081\u308b\u306b\u9023\u308c\u3001\u81ea\u5206\u306b\u3068\u3063\u3066\u5fc5\u8981\u306e\u306a\u3044\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306a\u3069\u306b\u95a2\u3059\u308b\u30b3\u30fc\u30c9\u304c\u90aa\u9b54\u3067\u3042\u308b\u3068\u611f\u3058\u3001\u305d\u308c\u3089\u3092\u6d88\u3057\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5225\u306b\u958b\u767a\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\u4e92\u63db\u6027\u304c\u306a\u304f\u306a\u308b\u3053\u3068\u304b\u3089\u3001\u540d\u524d\u3082\u5909\u3048\u3066 tfcmt \u3068\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/tfcmt\\n\\n\u3053\u3046\u3044\u3063\u305f\u7d4c\u7def\u304b\u3089\u3001 tfcmt \u306e\u307b\u3046\u3092\u512a\u5148\u7684\u306b\u958b\u767a\u3057\u3066\u3044\u307e\u3059\u304c\u3001 tfcmt \u3067\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd\u3092\u5f8c\u304b\u3089 suzuki-shunsuke/tfnotify \u306b\u3082\u5b9f\u88c5\u3057\u3066\u305f\u308a\u3082\u3057\u307e\u3059\u3002\\n\\n## Fork \u5143\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\\n\\n[suzuki-shunsuke/tfnotify](https://github.com/suzuki-shunsuke/tfnotify) \u306f [mercari/tfnotify v0.7.0](https://github.com/mercari/tfnotify/releases/tag/v0.7.0) [fb178d8](https://github.com/mercari/tfnotify/commit/fb178d8a5a51f88a51b7fda93ed5443ff56dfc8f) \u3092\u30d5\u30a9\u30fc\u30af\u3057\u307e\u3057\u305f\u3002\\n\u4e00\u65b9 tfcmt \u306f [suzuki-shunsuke/tfnotify v1.3.3](https://github.com/suzuki-shunsuke/tfnotify/releases/tag/v1.3.3) \u3092\u30d5\u30a9\u30fc\u30af\u3057\u307e\u3057\u305f\u3002\\n\\n## mercari/tfnotify \u3068\u306e\u9055\u3044\\n\\n\u672c\u5bb6\u3068\u306e\u9055\u3044\u306f Release Note \u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n* suzuki-shunsuke/tfnotify\\n  * https://github.com/suzuki-shunsuke/tfnotify/releases\\n  * https://github.com/suzuki-shunsuke/tfnotify/blob/master/COMPARED_WITH_TFNOTIFY.md\\n* suzuki-shunsuke/tfcmt\\n  * https://github.com/suzuki-shunsuke/tfcmt/releases\\n  * https://github.com/suzuki-shunsuke/tfcmt/blob/master/COMPARED_WITH_TFNOTIFY.md"},{"id":"/my-work-2020","metadata":{"permalink":"/my-work-2020","source":"@site/blog/my-work-2020.md","title":"2019-10 \u304b\u3089\u4eca(2020-12-31)\u306b\u81f3\u308b\u307e\u3067\u4ed5\u4e8b\u3067\u3084\u3063\u3066\u3044\u308b\u3053\u3068","description":"2019-10-01 \u304b\u3089\u4eca\u306e\u8077\u5834\u3067 SRE \u3068\u3057\u3066\u50cd\u3044\u3066\u3044\u307e\u3059\u3002","date":"2020-12-31T02:00:40.000Z","formattedDate":"December 31, 2020","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":8.94,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"2019-10 \u304b\u3089\u4eca(2020-12-31)\u306b\u81f3\u308b\u307e\u3067\u4ed5\u4e8b\u3067\u3084\u3063\u3066\u3044\u308b\u3053\u3068","date":"2020-12-31T02:00:40.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"tfnotify \u3092 fork \u3057\u305f","permalink":"/fork-tfnotify"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-11-01 ~ 2020-11-30","permalink":"/2020/11/01/job-11-30"}},"content":"2019-10-01 \u304b\u3089\u4eca\u306e\u8077\u5834\u3067 SRE \u3068\u3057\u3066\u50cd\u3044\u3066\u3044\u307e\u3059\u3002\\n\u305d\u306e\u4e2d\u3067\u81ea\u5206\u304c\u3069\u3046\u3044\u3046\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u308b\u304b\u3068\u3044\u3046\u8a71\u3092\u3057\u307e\u3059\u3002\\n\\n2020-12-31 \u73fe\u5728\u306e\u5185\u5bb9\u3067\u3059\u3002\\n\\n## \u8981\u7d04\\n\\n* \u30d7\u30ed\u30c0\u30af\u30c8\u6a2a\u65ad\u7684\u306a SRE \u30c1\u30fc\u30e0\u3067\u3001\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u904b\u7528\u30fb\u958b\u767a\u3057\u3066\u3044\u308b\\n* \u7279\u306b CI/CD \u306e\u6539\u5584\u304c\u5f97\u610f\\n* developer \u306b CI/CD \u3092\u3044\u308f\u3070\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u63d0\u4f9b\u3057\u3066\u304a\u308a\u3001 DX \u306e\u6539\u5584\u306b\u53d6\u308a\u7d44\u3093\u3067\u3044\u308b\\n* Monorepo \u306e\u8ca0\u306e\u5074\u9762(CI\u304c\u9045\u3044\u3001\u95a2\u4fc2\u306a\u3044Test\u304c\u3053\u3051\u308betc)\u306e\u89e3\u6d88\u306b\u3082\u53d6\u308a\u7d44\u3093\u3067\u3044\u308b\\n* \u81ea\u5206\u304c\u76f4\u9762\u3057\u3066\u3044\u308b\u8ab2\u984c\u3092\u89e3\u6c7a\u3059\u308b OSS \u3092\u8272\u3005\u958b\u767a\u3057\u3066\u3044\u308b\\n\\n## \u30ad\u30fc\u30ef\u30fc\u30c9\\n\\n* SRE\\n* Monorepo\\n* CI/CD\\n* Developer Experience\\n* Terraform\\n* Go / Shell script\\n* k8s\\n* CircleCI / CodeBuild\\n* Conftest\\n* Renovate\\n\\n## \u3088\u308a\u5177\u4f53\u7684\u306b\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u66f8\u3044\u305f\u8a18\u4e8b\\n\\n* \u500b\u4eba\u30d6\u30ed\u30b0\\n  * https://techblog.szksh.cloud/job-2020-10-01-10-31/\\n  * https://techblog.szksh.cloud/job-2020-07-01-09-30/\\n  * https://techblog.szksh.cloud/job-2020-04-01-06-30/\\n  * https://techblog.szksh.cloud/job-2020-01-01-03-31/\\n  * https://techblog.szksh.cloud/job-2019-10-01-12-31/\\n* \u4f1a\u793e\u30d6\u30ed\u30b0\\n  * [Renovate \u306e Tips](https://blog.studysapuri.jp/entry/2020/12/10/080000)\\n  * [Terraform \u306e CI/CD \u3092 CodeBuild \u306b\u79fb\u884c\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/12/03/080000)\\n  * [\u5de8\u5927\u306a .circleci/config.yml \u3092\u5206\u5272\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/12/01/080000)\\n  * [Docker Hub \u306e Rate Limit \u554f\u984c\u306b\u5bfe\u5fdc\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/11/02/080000)\\n  * [CI \u306e\u4fee\u6b63\u3092\u30ea\u30ea\u30fc\u30b9\u524d\u306b\u672c\u756a\u3068\u540c\u3058\u6761\u4ef6\u4e0b\u3067\u691c\u8a3c\u51fa\u6765\u308b\u4ed5\u7d44\u307f\u3092\u69cb\u7bc9\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/04/06/080000)\\n\\n## \u4f55\u3092\u3084\u3063\u3066\u3044\u308b\u304b\\n\\n\u30d7\u30ed\u30c0\u30af\u30c8\u6a2a\u65ad\u7684\u306a SRE \u30c1\u30fc\u30e0\u3067\u3001\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u904b\u7528\u30fb\u958b\u767a\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nSRE \u3068\u4e00\u8a00\u3067\u8a00\u3063\u3066\u3082\u3001\u305d\u306e\u9818\u57df\u306f\u975e\u5e38\u306b\u591a\u5c90\u306b\u308f\u305f\u308a\u307e\u3059\u3002\\n\u7d44\u7e54\u306b\u3088\u3063\u3066 `SRE` \u306e\u5b9f\u614b\u306f\u7570\u306a\u308b\u3067\u3057\u3087\u3046\u3002\\n\u4f8b\u3048\u3070 SRE \u3068\u306f\u5225\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u5c02\u9580\u30c1\u30fc\u30e0\u304c\u3042\u308b\u3088\u3046\u306a\u7d44\u7e54\u3082\u3042\u308b\u3068\u306f\u601d\u3044\u307e\u3059\u304c\u3001\\n\u73fe\u8077\u3067\u306f\u305d\u306e\u3088\u3046\u306a\u3082\u306e\u306f\u306a\u3044\u306e\u3067\u305d\u3053\u3082 SRE \u304c\u898b\u3066\u3044\u307e\u3059\u3002\\n\u5168\u3066\u306e\u9818\u57df\u306b\u95a2\u3057\u3066\u500b\u4eba\u304c\u30b9\u30da\u30b7\u30e3\u30ea\u30c6\u30a3\u3092\u6301\u3064\u3068\u3044\u3046\u306e\u306f\u975e\u5e38\u306b\u96e3\u3057\u3044\u306e\u3067\u3001\\n\u5168\u4f53\u7684\u306b\u3042\u308b\u7a0b\u5ea6\u30ab\u30d0\u30fc\u3057\u3064\u3064\u3082\u7279\u5b9a\u306e\u9818\u57df\u306b\u5bfe\u3057\u30b9\u30da\u30b7\u30e3\u30ea\u30c6\u30a3\u3092\u6301\u3064\u3068\u3044\u3046\u306e\u304c\u5272\u3068\u73fe\u5b9f\u7684\u306a\u8a71\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u81ea\u5206\u306e\u5834\u5408\u3001 CI/CD \u306e\u6539\u5584\u3092\u5f37\u307f\u3068\u3057\u3001\u305d\u3053\u306b\u4e3b\u306b\u53d6\u308a\u7d44\u3093\u3067\u3044\u307e\u3059\u3002\\n\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u904b\u7528\u30fb\u958b\u767a\u3057\u3066\u3044\u308b\u3068\u8a00\u3044\u307e\u3057\u305f\u304c\u3001\u305d\u308c\u306b\u306f CI/CD \u3082\u542b\u307e\u308c\u307e\u3059\u3002\\n\u73fe\u8077\u3067\u306f Monorepo \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u63a1\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\nMonorepo \u306b\u3059\u308b\u3053\u3068\u3067\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u307e\u305f\u304c\u308b\u5909\u66f4\u3092 1 \u3064\u306e Pull Request (\u4ee5\u4e0bPR) \u3067\u307e\u3068\u3081\u3066\u51fa\u6765\u305f\u308a\u3001 CI/CD \u306a\u3069\u306e\u4ed5\u7d44\u307f\u3092\u5171\u901a\u5316\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\u73fe\u8077\u3067\u306f\u5e7e\u3064\u304b\u306e Monorepo \u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u3068 k8s manifest \u306e Monorepo\\n* Ansible \u306e Monorepo\\n* Terraform \u306e Monorepo\\n* \u306a\u3069\u306a\u3069\\n\\nMonorepo \u306e\u4e2d\u3067 CI/CD \u306b\u95a2\u3057\u3066\u306f SRE \u304c ownership \u3092\u6301\u3061\u3001\u8a00\u308f\u3070\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066 developer \u306b\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3068\u3044\u3063\u3066\u3082 Jenkins \u3084 CircleCI \u306e\u3088\u3046\u306a\u3082\u306e\u3092\u81ea\u4f5c\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u610f\u5473\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\nCI/CD \u306b\u306f\u4e3b\u306b CircleCI \u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001CI\u306e\u8a2d\u5b9a\u3084 CI/CD \u3067\u4f7f\u308f\u308c\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306a\u3069\u3092\u30e1\u30f3\u30c6\u3057\u3066\u3044\u307e\u3059\u3002\\n\u5168\u3066\u3092 SRE \u304c\u66f8\u304f\u3068\u3044\u3046\u3053\u3068\u3067\u306f\u306a\u304f\u3001\u3080\u3057\u308d developer \u304c\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u969b\u306b\u7c21\u5358\u306b CI/CD \u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070 Terraform \u3067\u306f\u30b5\u30fc\u30d3\u30b9\u30fb\u74b0\u5883(staging, production, etc) \u3054\u3068\u306b State \u3092\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5206\u3051\u3066\u3044\u307e\u3059\u304c\u3001\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u969b\u306f\u3001\u307e\u305a\u306f generator \u3092\u5b9f\u884c\u3057\u3066\u30b3\u30fc\u30c9\u751f\u6210\u3057\u3001\u305d\u3053\u306b Terraform \u306e configuration \u3092\u66f8\u3051\u3070 CI/CD \u3067 test \u3084 lint, apply \u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\u5143\u3005\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u306e\u8ffd\u52a0\u6642\u306b\u306f .circleci/config.yml \u306b\u8a2d\u5b9a\u3092\u66f8\u304d\u8db3\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u3001\\n\u6700\u8fd1 [Terraform \u306e CI/CD \u3092 CircleCI \u304b\u3089 CodeBuild \u306b\u79fb\u884c\u3057\u305f](https://blog.studysapuri.jp/entry/2020/12/03/080000) \u3053\u3068\u3067\u305d\u308c\u304c\u4e00\u5207\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u65e5\u3005\u9032\u5316\u3057\u3066\u3044\u307e\u3059\u3002\\n\u5358\u306b PR \u3067 terraform plan \u3057\u3066 master \u3067 terraform apply \u3059\u308b\u3060\u3051\u306a\u3089\u7c21\u5358\u3067\u3059\u304c\u3001\\n\u3088\u308a DX \u306e\u9ad8\u3044\u3082\u306e\u306b\u3059\u308b\u306e\u304c\u81ea\u5206\u306e\u5f37\u307f\u30fb\u5c02\u9580\u6027\u3067\u3059\u3002\\n\\nLint \u3084 Test \u3092\u5c0e\u5165\u3057\u305f\u308a\u3082\u3057\u307e\u3059\u3002\u52ff\u8ad6 Rails \u306a\u3069\u3067\u66f8\u304b\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3068\u3044\u3046\u3053\u3068\u3067\u306f\u306a\u304f(\u305d\u308c\u3092\u66f8\u304f\u306e\u306f\u57fa\u672c developer)\u3001\u4f8b\u3048\u3070 k8s \u306e\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u30c6\u30b9\u30c8\u3084 Terraform \u306e lint \u306a\u3069\u3067\u3059\u3002\\nLint \u3084 Test \u306f\u3001\u5c0e\u5165\u3057\u3066 CI \u304c\u5931\u6557\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3089\u7d42\u308f\u308a\u3001\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\u73fe\u8077\u3067\u306f developer \u304c k8s \u306e\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3084 Terraform \u306e configuration \u3082\u66f8\u304d\u307e\u3059\u304c\u3001\u5fc5\u305a\u3057\u3082\u5168\u54e1\u304c\u305d\u308c\u3089\u306b\u7fd2\u719f\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\u5931\u6557\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3082\u3001developer \u304c\u5931\u6557\u3057\u305f\u539f\u56e0\u3092\u7406\u89e3\u3067\u304d\u306a\u304b\u3063\u305f\u3089\u3001\u7121\u99c4\u306b rerun \u3057\u3066\u307f\u3066\u7d50\u5c40\u89e3\u6c7a\u3057\u306a\u304f\u3066 SRE \u306b\u8cea\u554f\u3057\u3066\u304f\u308b\u3060\u3051\u3067\u3059\u3002\\n\u305d\u3046\u3067\u306f\u306a\u304f\u3001 \u306a\u305c CI \u304c\u3053\u3051\u305f\u306e\u304b\u3001\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u3001\u305d\u306e lint \u306f\u3069\u3046\u3044\u3046\u7d4c\u7def\u3067\u5c0e\u5165\u3055\u308c\u305f\u306e\u304b\u306a\u3069\u3092 developer \u304c\u81ea\u5206\u3067\u7406\u89e3\u3057\u3001\u81ea\u5df1\u89e3\u6c7a\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059(\u52ff\u8ad6\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u554f\u3044\u5408\u308f\u305b\u304c\u767a\u751f\u3059\u308b\u306e\u306f\u4ed5\u65b9\u306a\u3044\u3067\u3059\u3057\u3001\u9060\u616e\u306f\u3057\u3066\u307b\u3057\u304f\u306f\u3042\u308a\u307e\u305b\u3093)\u3002\\n\u305d\u3053\u3067 PR \u306b\u305d\u308c\u3089\u306e\u60c5\u5831\u3092\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u7c21\u5358\u306b\u30b3\u30e1\u30f3\u30c8\u3067\u304d\u308b\u3088\u3046\u306b OSS \u3068\u3057\u3066\u30c4\u30fc\u30eb\u3082\u958b\u767a\u3057\u3066\u3044\u307e\u3059([gihtub-comment](https://github.com/suzuki-shunsuke/github-comment))\u3002 \\n\\nMonorepo \u3067\u306f\u5358\u7d14\u306b\u5168\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30c6\u30b9\u30c8\u30fb\u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4\u3092\u5b9f\u884c\u3059\u308b\u3068\u6642\u9593\u304c\u304b\u304b\u3063\u305f\u308a\u3001 PR \u306b\u95a2\u4fc2\u306a\u3044\u30c6\u30b9\u30c8\u304c\u843d\u3061\u305f\u308a\u3057\u307e\u3059\u3002\\n\u305d\u306e\u305f\u3081\u3001\u5fc5\u8981\u306a job \u3060\u3051\u5b9f\u884c\u3059\u308b\u3088\u3046\u306a\u4ed5\u7d44\u307f\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\u305d\u306e\u3078\u3093\u3092\u30b3\u30fc\u30c9\u3092\u66f8\u304b\u305a\u306b\u3044\u3044\u611f\u3058\u306b\u51fa\u6765\u308b\u306e\u304c\u7406\u60f3\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001 Monorepo \u306e\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306f\u305d\u3053\u307e\u3067\u91b8\u6210\u3057\u3066\u3044\u306a\u3044\u3068\u601d\u3063\u3066\u304a\u308a\u3001\u81ea\u5206\u305f\u3061\u3067\u3042\u308b\u7a0b\u5ea6\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\u81ea\u5206\u306f Go \u3084 Shell Script \u3067\u305d\u3046\u3044\u3063\u305f\u30b3\u30fc\u30c9\u3092\u666e\u6bb5\u66f8\u304d\u307e\u3059\u3002\\n\\n\u73fe\u8077\u306e Monorepo \u306e\u3046\u3061\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u3068 k8s manifest \u306e Monorepo \u306f\u975e\u5e38\u306b\u5927\u304d\u304f\u3001 CI/CD \u3092\u30ca\u30a4\u30fc\u30d6\u306b\u5b9f\u88c5\u3059\u308b\u3068\u975e\u5e38\u306b\u6642\u9593\u304c\u304b\u304b\u3063\u305f\u308a\u52b9\u7387\u304c\u60aa\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\u305d\u3046\u3044\u3063\u305f\u554f\u984c\u70b9\u3092\u898b\u3064\u3051\u51fa\u3057\u3001\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3059\u308b\u3068\u3044\u3063\u305f\u3053\u3068\u3082\u3084\u308a\u307e\u3057\u305f\u3002\\n\\n\u305d\u306e\u4e2d\u3067\u751f\u307e\u308c\u305f OSS \u3082\u3042\u308a\u307e\u3059\u3002\\n\u81ea\u5206\u304c\u76f4\u9762\u3057\u3066\u3044\u308b\u8ab2\u984c\u3092\u89e3\u6c7a\u3059\u308b OSS \u3092\u958b\u767a\u3059\u308b\u306e\u304c\u81ea\u5206\u306e\u30e9\u30a4\u30d5\u30ef\u30fc\u30af\u3067\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/profile#libraries\\n\\n\u4ed5\u4e8b\u3067\u3082\u4f7f\u3063\u3066\u3044\u308b\u30c4\u30fc\u30eb\u3092\u5e7e\u3064\u304b\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n* [gihtub-comment](https://github.com/suzuki-shunsuke/github-comment) GitHub \u306e PR, commit \u306b\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u30c4\u30fc\u30eb\\n* [circleci-config-merge](https://github.com/suzuki-shunsuke/circleci-config-merge) \u5206\u5272\u3055\u308c\u305f .circleci/config.yml \u3092\u30de\u30fc\u30b8\\n* [github-ci-monitor](https://github.com/suzuki-shunsuke/github-ci-monitor) CI \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092 DataDog \u3067\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3059\u308b AWS SAM application\\n* [matchfile](https://github.com/suzuki-shunsuke/matchfile) Monorepo \u306e CI \u3067\u3001\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u4f9d\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u304c\u3042\u3063\u305f\u304b\u5224\u5b9a\u3059\u308b\u306e\u306b\u4fbf\u5229\\n* [ci-info](https://github.com/suzuki-shunsuke/ci-info) GitHub API \u3092\u4f7f\u3063\u3066 CI \u306e\u60c5\u5831\u3092\u53d6\u5f97\\n* [dd-time](https://github.com/suzuki-shunsuke/dd-time) \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u3092 DataDog \u306b\u9001\u308b\\n* [akoi](https://github.com/suzuki-shunsuke/akoi) \u30d0\u30a4\u30ca\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406"},{"id":"/2020/11/01/job-11-30","metadata":{"permalink":"/2020/11/01/job-11-30","source":"@site/blog/job-2020-11-01-11-30.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-11-01 ~ 2020-11-30","description":"2020-11-01 \u304b\u3089 2020-11-30 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u3051\u308b\u7bc4\u56f2\u3067\u66f8\u304d\u307e\u3059\u3002","date":"2020-12-29T20:44:14.000Z","formattedDate":"December 29, 2020","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":0.975,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-11-01 ~ 2020-11-30","date":"2020-12-29T20:44:14.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"2019-10 \u304b\u3089\u4eca(2020-12-31)\u306b\u81f3\u308b\u307e\u3067\u4ed5\u4e8b\u3067\u3084\u3063\u3066\u3044\u308b\u3053\u3068","permalink":"/my-work-2020"},"nextItem":{"title":"Renovate \u306e PR \u306b\u4fbf\u5229\u306a\u30ea\u30f3\u30af\u3092\u8ffd\u52a0","permalink":"/renovate-add-compare"}},"content":"2020-11-01 \u304b\u3089 2020-11-30 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u3051\u308b\u7bc4\u56f2\u3067\u66f8\u304d\u307e\u3059\u3002\\n\\n- [github-ci-monitor \u3092\u5c0e\u5165\u3057\u3001 CI \u306e\u5931\u6557\u3092\u901a\u77e5](/github-ci-monitor/)\\n  - https://github.com/suzuki-shunsuke/github-ci-monitor\\n- Terraform\\n  - Upgrade AWS Provider: Renovate \u3067\u81ea\u52d5\u66f4\u65b0\u3059\u308b\u4ed5\u7d44\u307f\u306e\u6539\u5584\\n  - Upgrade Terraform from v0.12 to v0.13\\n  - [tfsec](https://github.com/tfsec/tfsec) \u306e\u5c0e\u5165\\n  - PR \u306e label \u306b\u3088\u3063\u3066 CI(plan/apply) \u306e\u5b9f\u884c\u5bfe\u8c61\u3092\u8ffd\u52a0\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n  - [CircleCI \u304b\u3089 CodeBuild \u3078\u306e\u79fb\u884c](https://blog.studysapuri.jp/entry/2020/12/03/080000)\\n  - [tfmigrate](https://github.com/minamijoyo/tfmigrate) \u306e\u691c\u8a3c\\n- Monorepo \u306e CI \u306e\u9ad8\u901f\u5316 (CircleCI)\\n  - k8s manifest \u306e test \u3092\u3001\u5909\u66f4\u304c\u3042\u3063\u305f\u3082\u306e\u306b\u5bfe\u3057\u3066\u3060\u3051\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u305f\\n- [kube-linter](https://github.com/stackrox/kube-linter) \u306e\u5c0e\u5165\\n- Renovate\\n  - https://blog.studysapuri.jp/entry/2020/12/10/080000\\n  - additionalBranchPrefix \u306b\u3088\u308b\u30d6\u30e9\u30f3\u30c1\u306e\u5206\u5272\\n  - depName \u3092\u4f7f\u3063\u305f\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\\n- [.circleci/config.yml \u306e\u5206\u5272](https://blog.studysapuri.jp/entry/2020/12/01/080000)\\n- \u30d6\u30ed\u30b0\u306e\u57f7\u7b46\\n  - [Docker Hub \u306e Rate Limit \u554f\u984c\u306b\u5bfe\u5fdc\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/11/02/080000)"},{"id":"/renovate-add-compare","metadata":{"permalink":"/renovate-add-compare","source":"@site/blog/renovate-add-compare.md","title":"Renovate \u306e PR \u306b\u4fbf\u5229\u306a\u30ea\u30f3\u30af\u3092\u8ffd\u52a0","description":"Renovate \u306b\u3088\u308b PR \u3092\u30ec\u30d3\u30e5\u30fc\u3059\u308b\u969b\u3001\u5dee\u5206\u304c\u306a\u3093\u306a\u306e\u304b\u5206\u304b\u308a\u3065\u3089\u3044\u3068\u304d\u304c\u3042\u308a\u307e\u3059\u3002","date":"2020-12-28T05:32:31.000Z","formattedDate":"December 28, 2020","tags":[{"label":"renovate","permalink":"/tags/renovate"}],"readingTime":1.24,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Renovate \u306e PR \u306b\u4fbf\u5229\u306a\u30ea\u30f3\u30af\u3092\u8ffd\u52a0","date":"2020-12-28T05:32:31.000Z","tags":["renovate"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-11-01 ~ 2020-11-30","permalink":"/2020/11/01/job-11-30"},"nextItem":{"title":"Renovate \u3068 Dependabot \u306e\u6bd4\u8f03","permalink":"/compare-renovate-dependabot"}},"content":"Renovate \u306b\u3088\u308b PR \u3092\u30ec\u30d3\u30e5\u30fc\u3059\u308b\u969b\u3001\u5dee\u5206\u304c\u306a\u3093\u306a\u306e\u304b\u5206\u304b\u308a\u3065\u3089\u3044\u3068\u304d\u304c\u3042\u308a\u307e\u3059\u3002\\n\u4f8b\u3048\u3070 data source \u304c github-release \u306e\u5834\u5408\u3001 PR \u306e description \u306b Release Note \u304c\u542b\u307e\u308c\u3066\u304a\u308a\u3001\u30b3\u30fc\u30c9\u306e\u5dee\u5206\u3082 link \u304c\u3042\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\\n\u4e00\u65b9 helm data source \u306e\u5834\u5408\u3001 \u305d\u3046\u3044\u3063\u305f\u3082\u306e\u304c\u306a\u304f\u5dee\u5206\u304c\u306a\u3093\u306a\u306e\u304b\u5206\u304b\u3089\u306a\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\\n\u305d\u3046\u3044\u3046\u5834\u5408\u3001 [prBodyNotes](https://docs.renovatebot.com/configuration-options/#prbodynotes) \u3092\u5229\u7528\u3057\u3066 link \u3092\u8ffd\u52a0\u3059\u308b\u3068\u4fbf\u5229\u3067\u3059\u3002\\n\\n\u4f8b\u3048\u3070\u3001 datadog helm chart \u306e\u5834\u5408\\n\\n```json\\n{\\n  \\"datasources\\": [\\"helm\\"],\\n  \\"packageNames\\": [\\"datadog\\"],\\n  \\"prBodyNotes\\": [\\n    \\"[compare](https://github.com/DataDog/helm-charts/compare/datadog-{{currentVersion}}...datadog-{{newVersion}})\\"\\n  ]\\n}\\n```\\n\\n\u3068\u3059\u308b\u3068\u3001 PR \u306e description \u306b\u30ea\u30f3\u30af\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\u5730\u5473\u3067\u3059\u304c\u4fbf\u5229\u3067\u3059\u3002\\nRelease page \u3078\u306e\u30ea\u30f3\u30af\u3092\u8ffd\u52a0\u3057\u3066\u3082\u4fbf\u5229\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002\\n\\nex. https://github.com/suzuki-shunsuke/test-renovate-2/pull/28\\n\\ntemplate \u3067\u4f7f\u3048\u308b\u5909\u6570\u306f https://docs.renovatebot.com/templates/ \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\nhelm chart \u3054\u3068\u306b\u8a2d\u5b9a\u3092\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u304c\u9762\u5012\u3067\u3059\u304c\u3001\u4ed5\u65b9\u306a\u3044\u3067\u3059\u306d\u3002"},{"id":"/compare-renovate-dependabot","metadata":{"permalink":"/compare-renovate-dependabot","source":"@site/blog/compare-renovate-dependabot.md","title":"Renovate \u3068 Dependabot \u306e\u6bd4\u8f03","description":"\u666e\u6bb5 Renovate \u3092\u4e3b\u306b\u4f7f\u3063\u3066\u3044\u308b\u81ea\u5206\u304c\u3001 Dependabot \u3068 Renovate \u306e\u9055\u3044\u306b\u3064\u3044\u3066\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002","date":"2020-12-05T03:37:17.000Z","formattedDate":"December 5, 2020","tags":[{"label":"dependabot","permalink":"/tags/dependabot"},{"label":"renovate","permalink":"/tags/renovate"}],"readingTime":4.235,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Renovate \u3068 Dependabot \u306e\u6bd4\u8f03","date":"2020-12-05T03:37:17.000Z","tags":["dependabot","renovate"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Renovate \u306e PR \u306b\u4fbf\u5229\u306a\u30ea\u30f3\u30af\u3092\u8ffd\u52a0","permalink":"/renovate-add-compare"},"nextItem":{"title":"Terraform \u306e Docker Provider \u306e Collaborator \u306b\u306a\u308a\u307e\u3057\u305f","permalink":"/collaborator-of-terraform-docker-provider"}},"content":"\u666e\u6bb5 Renovate \u3092\u4e3b\u306b\u4f7f\u3063\u3066\u3044\u308b\u81ea\u5206\u304c\u3001 Dependabot \u3068 Renovate \u306e\u9055\u3044\u306b\u3064\u3044\u3066\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\\n\u666e\u6bb5 Renovate \u3092\u4e3b\u306b\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001 Renovate \u5bc4\u308a\u306e\u5185\u5bb9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\u6c17\u5206\u3092\u5bb3\u3059\u308b\u4eba\u304c\u3044\u307e\u3057\u305f\u3089\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3002\\nDependabot \u306e\u7406\u89e3\u304c\u6d45\u3044\u306e\u3067\u9593\u9055\u3063\u3066\u305f\u3089\u6307\u6458\u3057\u3066\u3082\u3089\u3048\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\u3002\\n2020-12-01 \u6642\u70b9\u306e\u60c5\u5831\u3067\u3059\u3002\\n\\n## \u8a2d\u5b9a\u9805\u76ee\u306e\u6570\\n\\n* https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/configuration-options-for-dependency-updates#directory\\n* https://docs.renovatebot.com/configuration-options/\\n\\n\u307e\u305a\u306f\u8a2d\u5b9a\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u6bd4\u3079\u308b\u3068\u3001 Renovate \u306e\u307b\u3046\u304c\u8a2d\u5b9a\u9805\u76ee\u304c\u591a\u3044\u3067\u3059\u3002\\nRenovate \u306f\u3088\u304f\u8a00\u3046\u3068\u8a2d\u5b9a\u9805\u76ee\u304c\u591a\u304f\u3001\u67d4\u8edf\u306a\u8a2d\u5b9a\u304c\u3067\u304d\u308b\u3068\u3044\u3048\u308b\u4e00\u65b9\u3001\u3059\u3079\u3066\u306e\u8a2d\u5b9a\u3092\u7406\u89e3\u3057\u4f7f\u3044\u3053\u306a\u3059\u306e\u306f\u96e3\u3057\u3044\u3067\u3059\u3002\\n\u6c7a\u3057\u3066\u65e5\u672c\u8a9e\u306e\u60c5\u5831\u3082\u591a\u304f\u306a\u3044\u306e\u3067\u3001\u8272\u3005\u8a66\u884c\u932f\u8aa4\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\\nDependabot \u306e\u5834\u5408\u3001\u8a2d\u5b9a\u304c\u305d\u3093\u306a\u306b\u591a\u304f\u306a\u304f\u5272\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u5370\u8c61\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n## scheduling\\n\\n* https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/configuration-options-for-dependency-updates#scheduleinterval\\n* https://docs.renovatebot.com/configuration-options/#prhourlylimit\\n* https://docs.renovatebot.com/configuration-options/#schedule\\n\\nDependabot \u306f schedule \u306e\u8a2d\u5b9a\u304c\u5fc5\u9808\u3067\u3059\u3002\\nRenovate \u3067\u3082 schedule \u306e\u8a2d\u5b9a\u306f\u51fa\u6765\u307e\u3059\u3002\\n\\n## Dependabot \u306f 1 \u500b 1 \u500b\u8a2d\u5b9a\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\uff1f\\n\\nRenovate \u306f renovate.json \u3055\u3048\u4f5c\u308c\u3070\u4e2d\u8eab\u304c\u307b\u307c\u7a7a\u3067\u3082\u52dd\u624b\u306b update \u3055\u308c\u307e\u3059\u3002\\n\u9006\u306b\u5bfe\u8c61\u3092\u7d5e\u308a\u305f\u304b\u3063\u305f\u3089\u660e\u793a\u7684\u306b\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u4e00\u65b9\u3067 Dependabot \u306f\u5bfe\u8c61\u3092 1 \u3064 1 \u3064\u6307\u5b9a\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3088\u3046\u3067\u3059\u306d\u3002\\n\\n\u3082\u3061\u308d\u3093\u3001\u3053\u308c\u306f\u5fc5\u305a\u3057\u3082\u60aa\u3044\u3053\u3068\u3067\u306f\u306a\u3044\u3067\u3059\u3057\u3001\u826f\u3044\u9762\u3082\u3042\u308a\u307e\u3059\u3002\\n\u8a2d\u5b9a\u304c\u660e\u793a\u7684\u306b\u66f8\u304b\u308c\u3066\u3044\u305f\u307b\u3046\u304c\u6319\u52d5\u3092\u7406\u89e3\u3057\u3084\u3059\u3044\u3067\u3059\u3057\u306d\u3002\\n\\n\u305f\u3060\u3057\u3001\u6570\u304c\u591a\u3044\u3068\u5927\u5909\u3067\u3059\u3057\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u305f\u3073\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3055\u305d\u3046\u3067\u3059\u3002\\n\\n## Renovate \u306f .circleci/config.yml \u306a\u3069\u306e update \u3082\u30b5\u30dd\u30fc\u30c8\\n\\n* https://docs.renovatebot.com/modules/manager/\\n* https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/configuration-options-for-dependency-updates#package-ecosystem\\n\\nRenovate \u306f .circleci/config.yml \u3084 .drone.yml \u306e Docker image \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e update \u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\\nDependabot \u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u306d\u3002\\n\\n## Renovate \u306f\u6b63\u898f\u8868\u73fe\u306b\u3088\u308b update \u3092\u30b5\u30dd\u30fc\u30c8\\n\\nhttps://docs.renovatebot.com/modules/manager/regex/\\n\\nGitHub Releases \u304b\u3089\u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u3066\u3044\u308b\u3088\u3046\u306a\u5834\u5408\u3067\u3082\u3001\\nRenovate \u3067\u306f Regex Manager \u3092\u4f7f\u3048\u3070 update \u51fa\u6765\u307e\u3059\u3002\\nCI \u3067\u4f7f\u3063\u3066\u3044\u308b\u30c4\u30fc\u30eb\u3092 GitHub Releases \u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u3066\u3044\u308b\u30b1\u30fc\u30b9\u304c\u591a\u3044\u306e\u3067\u91cd\u5b9d\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n## Renovate \u306f Grouping \u3092\u30b5\u30dd\u30fc\u30c8\\n\\nRenovate \u306f\u8907\u6570\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u540c\u3058 PR \u3067\u307e\u3068\u3081\u3066 update \u3067\u304d\u307e\u3059\u3002\\n\\nhttps://docs.renovatebot.com/configuration-options/#group\\n\\n## Renovate \u3067 PR \u3092\u307e\u3068\u3081\u3089\u308c\u305f\u304f\u306a\u3044\u5834\u5408\u306f additionalBranchPrefix \u306a\u3069\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\\n\\nhttps://docs.renovatebot.com/configuration-options/#additionalbranchprefix\\n\\nRenovate \u3060\u3068\u540c\u3058\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u4f55\u3082\u8a2d\u5b9a\u3057\u306a\u3044\u3068 1 \u3064\u306e PR \u306b\u66f4\u65b0\u304c\u307e\u3068\u3081\u3089\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\\nadditionalBranchPrefix \u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u56de\u907f\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u3053\u306e\u89e3\u6c7a\u7b56\u3092\u898b\u3064\u3051\u308b\u307e\u3067\u306b\u5c11\u3005\u82e6\u52b4\u3057\u307e\u3057\u305f\u3002\\nRenovate \u306e\u96e3\u3057\u3044\u3068\u3053\u308d\u3067\u3059\u306d\u3002\\n\\n## Renovate \u306f\u8a2d\u5b9a\u3092\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u3088\u3046\u306b\u5171\u6709\u3067\u304d\u308b\\n\\nhttps://docs.renovatebot.com/config-presets/\\n\\nRenovate \u306f\u6c4e\u7528\u7684\u306a\u8a2d\u5b9a\u3092 OSS \u306e\u3088\u3046\u306b\u516c\u958b\u3057\u518d\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\u4ed5\u4e8b\u3060\u3068\u7279\u306b\u4f7f\u3063\u3066\u306a\u3044\u3067\u3059\u304c\u3001\\n\u500b\u4eba\u306e Go \u306e Project \u306a\u3093\u304b\u306f\u540c\u3058\u3082\u306e\u3092\u4f7f\u3063\u3066\u3044\u3066\u3001\u4fbf\u5229\u3067\u3059\u3002\\n\\n* https://github.com/suzuki-shunsuke/renovate-config/blob/master/golang.json\\n* https://github.com/suzuki-shunsuke/github-comment/blob/master/renovate.json"},{"id":"/collaborator-of-terraform-docker-provider","metadata":{"permalink":"/collaborator-of-terraform-docker-provider","source":"@site/blog/collaborator-of-terraform-docker-provider.md","title":"Terraform \u306e Docker Provider \u306e Collaborator \u306b\u306a\u308a\u307e\u3057\u305f","description":"\u5148\u65e5 kreuzwerker/terraform-provider-docker \u306e Collaborator \u306b\u306a\u308a\u307e\u3057\u305f\u3002","date":"2020-12-03T00:07:32.000Z","formattedDate":"December 3, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"terraform","permalink":"/tags/terraform"}],"readingTime":1.605,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Terraform \u306e Docker Provider \u306e Collaborator \u306b\u306a\u308a\u307e\u3057\u305f","date":"2020-12-03T00:07:32.000Z","tags":["oss","terraform"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Renovate \u3068 Dependabot \u306e\u6bd4\u8f03","permalink":"/compare-renovate-dependabot"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-10-01 ~ 2020-10-31","permalink":"/2020/10/01/job-10-31"}},"content":"\u5148\u65e5 [kreuzwerker/terraform-provider-docker](https://github.com/kreuzwerker/terraform-provider-docker) \u306e Collaborator \u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n[kreuzwerker/terraform-provider-docker](https://github.com/kreuzwerker/terraform-provider-docker) \u306f Terraform \u306e Docker Provider \u3067\u3042\u308a\u3001 Docker \u30b3\u30f3\u30c6\u30ca\u3084 image, network \u306a\u3069\u3092\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002\\n\u5143\u3005\u306f Hashicorp \u306e Official Provider \u3067\u3042\u3063\u305f [terraform-providers/terraform-provider-docker](https://github.com/terraform-providers/terraform-provider-docker) \u304c [kreuzwerker/terraform-provider-docker](https://github.com/kreuzwerker/terraform-provider-docker) \u306b\u79fb\u7ba1\u3055\u308c\u3001 Community Provider \u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\u5143\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306f hashicorp org \u306b\u79fb\u3055\u308c archive \u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n## Collaborator \u306b\u306a\u3063\u305f\u7d4c\u7def\\n\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u79fb\u7ba1\u3055\u308c\u308b\u969b\u306b\u3001\u30e1\u30f3\u30c6\u30ca\u3092\u52df\u96c6\u3057\u3066\u3044\u3066\u904e\u53bb\u306b contribution \u3057\u3066\u3044\u305f\u81ea\u5206\u306b\u3082\u58f0\u3092\u304b\u3051\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/hashicorp/terraform-provider-docker/issues/306\\n\\n## Contributor \u306b\u306a\u3063\u305f\u7d4c\u7def\\n\\n\u81ea\u5206\u304c\u3053\u306e provider \u306b contribution \u3057\u305f\u7d4c\u7def\u306f\u3001 Terraform \u306e Hands on \u3092\u66f8\u304f\u306e\u306b\u4e01\u5ea6\u3088\u3044 provider \u3092\u63a2\u3057\u3066\u3044\u305f\u3053\u3068\u3067\u3057\u305f\u3002\\n\\nHands on \u306e\u984c\u6750\u3068\u3057\u3066 Docker \u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u3063\u305f\u308a\u3067\u304d\u305f\u3089\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u601d\u3063\u3066 Docker provider \u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\\n\u3057\u304b\u3057\u5f53\u6642\u306e docker_container \u30ea\u30bd\u30fc\u30b9\u306f read \u3092\u3061\u3083\u3093\u3068\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\u306a\u306e\u3067 import \u3084 update \u304c\u307e\u3068\u3082\u306b\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\u305d\u308c\u3092\u898b\u304b\u306d\u3066\u4fee\u6b63\u3057\u3066 PR \u3092\u6295\u3052\u305f\u306e\u304c\u6700\u521d\u3067\u3059\u3002\\n\\n* https://github.com/hashicorp/terraform-provider-docker/pull/234\\n* https://github.com/hashicorp/terraform-provider-docker/pull/236\\n\\n\u305d\u306e\u5f8c\u3082\u5e7e\u3064\u304b contribution \u3092\u3057\u307e\u3057\u305f\u3002\\n\\n\u306a\u304a\u3001 PR \u3092\u6295\u3052\u305f\u3082\u306e\u306e\u3001 Hands on \u306f MySQL Provider \u3092\u4f7f\u3063\u3066\u66f8\u304d\u307e\u3057\u305f\u3002\\n\\nhttps://techblog.szksh.cloud/terraform-hands-on-with-mysql-provider/"},{"id":"/2020/10/01/job-10-31","metadata":{"permalink":"/2020/10/01/job-10-31","source":"@site/blog/job-2020-10-01-10-31.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-10-01 ~ 2020-10-31","description":"2020-10-01 \u304b\u3089 2020-10-31 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-11-29T02:48:17.000Z","formattedDate":"November 29, 2020","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":1.57,"truncated":false,"authors":[],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-10-01 ~ 2020-10-31","date":"2020-11-29T02:48:17.000Z","archives":["2020/11"],"tags":["job"]},"prevItem":{"title":"Terraform \u306e Docker Provider \u306e Collaborator \u306b\u306a\u308a\u307e\u3057\u305f","permalink":"/collaborator-of-terraform-docker-provider"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-07-01 ~ 2020-09-30","permalink":"/2020/07/01/job-09-30"}},"content":"2020-10-01 \u304b\u3089 2020-10-31 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002\\n\u52ff\u8ad6\u5168\u90e8\u306f\u66f8\u3051\u306a\u3044\u306e\u3067\u3044\u304f\u3064\u304b\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u66f8\u304d\u307e\u3059\u3002\\n\\n* Terraform\\n  * CodeBuild Batch Build \u306b\u3088\u308b dynamic \u306a build pipeline \u306e\u5c0e\u5165\\n  * Conftest \u306e\u5b9f\u884c\u65b9\u6cd5\u3092\u4fee\u6b63\\n    * https://www.openpolicyagent.org/docs/latest/terraform/\\n    * tf \u30d5\u30a1\u30a4\u30eb\u306b\u5bfe\u3057\u3066 conftest \u3092\u5b9f\u884c\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u516c\u5f0f\u306e\u65b9\u6cd5\u306b\u5f93\u3063\u3066\u30c6\u30b9\u30c8\u3059\u308b\u3088\u3046\u306b\u3057\u305f\\n  * aws_cloudwatch_log_group.retention_in_days \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b Conftest \u3067\u30c6\u30b9\u30c8\\n    * \u30b3\u30b9\u30c8\u524a\u6e1b\\n  * tfnotify \u304c parse \u306b\u5931\u6557\u3057\u305f\u5834\u5408\u3001 github-comment \u3067\u30b3\u30e1\u30f3\u30c8\\n    * https://techblog.szksh.cloud/post-tfnotify-parse-error/\\n* Docker Hub \u8a8d\u8a3c\u3059\u308b\u3088\u3046\u306b\u3057\u305f\\n  * [Docker Hub \u306e Rate Limit \u554f\u984c\u306b\u5bfe\u5fdc\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/11/02/080000)\\n* kustomize build \u306e\u30c6\u30b9\u30c8(\u5931\u6557\u3057\u305f\u3089 PR \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u3057\u3066\u3001\u306a\u305c\u5931\u6557\u3057\u305f\u304b\u5206\u304b\u308b\u3088\u3046\u306b\u3057\u305f)\\n  * \u5143\u3005 kustomize build \u306b\u5931\u6557\u3057\u3066 CI \u304c\u3053\u3051\u3066\u3082\u3001\u306a\u305c\u3053\u3051\u305f\u306e\u304b\u5206\u304b\u308a\u306b\u304f\u304f\u3001 SRE \u306b\u554f\u3044\u5408\u308f\u305b\u304c\u6765\u3066\u8abf\u3079\u308b\u307f\u305f\u3044\u306a\u3053\u3068\u304c\u3042\u3063\u305f\\n  * \u3069\u306e k8s manifest \u306e kustomize build \u306b\u5931\u6557\u3057\u305f\u306e\u304b\u3001 PR \u306b\u5206\u304b\u308a\u3084\u3059\u304f\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3057\u305f\\n* CI \u3067 kubectl apply --server-dry-run \u306b\u3088\u308b\u30c6\u30b9\u30c8\u3092\u5c0e\u5165\\n* Monorepo\\n  * \u5dee\u5206\u691c\u77e5\u30fb\u30c7\u30d7\u30ed\u30a4\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u6539\u5584\\n* Renovate\\n  * automerge \u306e\u5c0e\u5165\\n    * [renovate-approve](https://github.com/apps/renovate-approve) \u4fbf\u5229\\n  * CI \u3067 renovate-config-validator \u306b\u3088\u308b validation \u306e\u5c0e\u5165\\n    * https://docs.renovatebot.com/reconfigure-renovate/"},{"id":"/2020/07/01/job-09-30","metadata":{"permalink":"/2020/07/01/job-09-30","source":"@site/blog/job-2020-07-01-09-30.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-07-01 ~ 2020-09-30","description":"2020-07-01 \u304b\u3089 2020-09-30 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-11-29T02:36:44.000Z","formattedDate":"November 29, 2020","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":0.875,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-07-01 ~ 2020-09-30","date":"2020-11-29T02:36:44.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-10-01 ~ 2020-10-31","permalink":"/2020/10/01/job-10-31"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-04-01 ~ 2020-06-30","permalink":"/2020/04/01/job-06-30"}},"content":"2020-07-01 \u304b\u3089 2020-09-30 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002\\n\u52ff\u8ad6\u5168\u90e8\u306f\u66f8\u3051\u306a\u3044\u306e\u3067\u3044\u304f\u3064\u304b\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u66f8\u304d\u307e\u3059\u3002\\n\\n* Terraform\\n  * CircleCI \u304b\u3089 CodeBuild \u3078\u306e\u79fb\u884c\\n    * Security + DX\\n    * 10\u6708\u4ee5\u964d\u3082\u7d99\u7d9a\\n  * tfnotify \u306e\u5c0e\u5165\\n    * Monorepo \u3067\u5c0e\u5165\u3059\u308b\u306b\u306f\u4e00\u5de5\u592b\u304c\u5fc5\u8981\\n    * \u30b3\u30e1\u30f3\u30c8\u304c\u6d88\u3048\u308b\u6319\u52d5\u304c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5316\u3055\u308c\u3066\u306a\u304f\u3066\u8efd\u304f\u30cf\u30de\u3063\u305f\\n* Renovate \u306e\u5c0e\u5165\\n  * Regex Manager \u4fbf\u5229\\n* Monorepo\\n  * \u5dee\u5206\u691c\u77e5\u30fb\u30c7\u30d7\u30ed\u30a4\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u6539\u5584\\n* DataDog \u304b\u3089\u306e\u30a2\u30e9\u30fc\u30c8\u306e\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u696d\u52d9\u306e\u6539\u5584\\n  * \u3069\u3093\u306a\u30a2\u30e9\u30fc\u30c8\u304c\u3042\u3063\u3066\u3001\u3069\u3046\u5bfe\u5fdc\u3057\u305f\u304b\u306a\u3069\u306e\u30ca\u30ec\u30c3\u30b8\u306e\u5171\u6709\u306e\u6539\u5584\\n  * \u5272\u3068\u30a2\u30ca\u30ed\u30b0\u306a\u624b\u6cd5\u3060\u304c\u3001\u3061\u3083\u3093\u3068 work \u3057\u3066\u3044\u308b"},{"id":"/2020/04/01/job-06-30","metadata":{"permalink":"/2020/04/01/job-06-30","source":"@site/blog/job-2020-04-01-06-30.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-04-01 ~ 2020-06-30","description":"2020-04-01 \u304b\u3089 2020-06-30 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-11-29T02:20:07.000Z","formattedDate":"November 29, 2020","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":0.99,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-04-01 ~ 2020-06-30","date":"2020-11-29T02:20:07.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-07-01 ~ 2020-09-30","permalink":"/2020/07/01/job-09-30"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-01-01 ~ 2020-03-31","permalink":"/2020/01/01/job-03-31"}},"content":"2020-04-01 \u304b\u3089 2020-06-30 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002\\n\u52ff\u8ad6\u5168\u90e8\u306f\u66f8\u3051\u306a\u3044\u306e\u3067\u3044\u304f\u3064\u304b\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u66f8\u304d\u307e\u3059\u3002\\n\\n* Monorepo\\n  * CI \u3067 `kustomize build` \u306e diff \u3092 PR \u306b\u30b3\u30e1\u30f3\u30c8\\n  * Conftest \u3067 k8s manifest \u306e validation \u306e\u5c0e\u5165\\n  * Go \u3067\u66f8\u304b\u308c\u305f\u5dee\u5206\u691c\u77e5\u306e\u30b3\u30fc\u30c9\u306e\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\\n  * CI \u306e\u9ad8\u901f\u5316\u30fb\u30b3\u30b9\u30c8\u524a\u6e1b\\n* GitOps\\n  * GitOps \u3092\u5c0e\u5165\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u306e\u958b\u767a\u306e\u30b5\u30dd\u30fc\u30c8\\n* Terraform\\n  * input variables \u3092 local value \u306b\u7f6e\u304d\u63db\u3048\\n* GuardDuty \u306e\u5c0e\u5165\\n  * Terraform \u3067 IaC\\n  * False Positive \u306a\u30a2\u30e9\u30fc\u30c8\u304c\u591a\u304f\u3066\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3067\u304d\u3066\u306a\u3044\\n* \u30d6\u30ed\u30b0\u306e\u57f7\u7b46\\n  * [CI \u306e\u4fee\u6b63\u3092\u30ea\u30ea\u30fc\u30b9\u524d\u306b\u672c\u756a\u3068\u540c\u3058\u6761\u4ef6\u4e0b\u3067\u691c\u8a3c\u51fa\u6765\u308b\u4ed5\u7d44\u307f\u3092\u69cb\u7bc9\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/04/06/080000)\\n* Argo Workflows \u306e\u691c\u8a3c\\n* MongoDB Atlas \u3078\u306e\u79fb\u884c\u30b5\u30dd\u30fc\u30c8\\n  * Go \u3067 Restore Job \u306e\u958b\u767a\\n  * \u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3"},{"id":"/2020/01/01/job-03-31","metadata":{"permalink":"/2020/01/01/job-03-31","source":"@site/blog/job-2020-01-01-03-31.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-01-01 ~ 2020-03-31","description":"2020-01-01 \u304b\u3089 2020-03-31 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-11-29T01:50:11.000Z","formattedDate":"November 29, 2020","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":2.625,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-01-01 ~ 2020-03-31","date":"2020-11-29T01:50:11.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-04-01 ~ 2020-06-30","permalink":"/2020/04/01/job-06-30"},"nextItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2019-10-01 ~ 2019-12-31","permalink":"/2019/10/01/job-12-31"}},"content":"2020-01-01 \u304b\u3089 2020-03-31 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002\\n\u52ff\u8ad6\u5168\u90e8\u306f\u66f8\u3051\u306a\u3044\u306e\u3067\u3044\u304f\u3064\u304b\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u66f8\u304d\u307e\u3059\u3002\\n\\n* Monorepo\\n  * \u66f4\u65b0\u691c\u77e5\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092 Go \u3067\u30ea\u30d7\u30ec\u30fc\u30b9\\n    * [CI \u306e\u4fee\u6b63\u3092\u30ea\u30ea\u30fc\u30b9\u524d\u306b\u672c\u756a\u3068\u540c\u3058\u6761\u4ef6\u4e0b\u3067\u691c\u8a3c\u51fa\u6765\u308b\u4ed5\u7d44\u307f\u3092\u69cb\u7bc9\u3057\u305f\u8a71](https://blog.studysapuri.jp/entry/2020/04/06/080000)\\n  * CircleCI \u306e\u30b3\u30fc\u30c9\u30ea\u30b9\u30c8\u30a2\u306e\u6539\u5584(\u30b3\u30b9\u30c8\u524a\u6e1b\u30fb\u9ad8\u901f\u5316)\\n    * \u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u975e\u5e38\u306b\u3067\u304b\u3044\u306e\u3067\u5168\u90e8 checkout, restore \u3059\u308b\u3068\u6642\u9593\u304c\u304b\u304b\u308b\\n    * Job \u3054\u3068\u306b\u5fc5\u8981\u6700\u5c0f\u9650\u306e\u30b3\u30fc\u30c9\u3060\u3051\u3092\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u3053\u3068\u3067\u9ad8\u901f\u5316\\n* \u30b5\u30fc\u30d0\u306e OS upgrade\\n* Ansible\\n  * CI \u306e\u66f4\u65b0\u691c\u77e5\u3067\u3001 PR \u306e label \u3067\u5bfe\u8c61\u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f(\u30b3\u30fc\u30c9\u306b\u5909\u66f4\u304c\u306a\u304f\u3066\u3082\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f)\\n    * \u305f\u307e\u306b\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3068\u304d\u306f\u3042\u308b\\n    * \u305d\u308c\u307e\u3067\u306f\u3066\u304d\u3068\u3046\u306b\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u306a\u3044\u3068\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u306a\u304b\u3063\u305f\u304c\u3001 PR \u306e label \u3067\u5bfe\u8c61\u306e playbook \u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n  * key=value \u5f62\u5f0f\u3092 YAML \u306b\u5909\u63db\\n    * https://www.ansible.com/blog/ansible-best-practices-essentials\\n    * 3. Use Native YAML Syntax\\n* .circleci/config.yml \u306e\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\\n  * job \u3092 parameterize \u3057\u3066\u5171\u901a\u5316\u3057\u305f\u308a\\n  * parameterize \u3055\u308c\u305f command \u3092\u4f7f\u3063\u3066\u5171\u901a\u5316\u3057\u305f\u308a\\n  * \u30b3\u30fc\u30c9\u91cf\u306e\u5927\u5e45\u306a\u524a\u6e1b\\n* Terraform\\n  * CircleCI \u306e\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001 master \u3067\u306e CI \u3092\u4e00\u6642\u7684\u306b\u7981\u6b62\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\\n    * State \u3092\u5f04\u3063\u3066\u305f\u308a\u3059\u308b\u3068\u304d\u306b\u4e88\u671f\u305b\u306c apply \u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u305f\u3081\\n  * master branch \u306e CI \u304c\u7d42\u308f\u308b\u307e\u3067 wait\\n    * master \u306e CI \u304c\u8d70\u3063\u3066\u3044\u308b\u9593\u306b PR \u306e CI \u3067\u307e\u3060 apply \u3055\u308c\u3066\u3044\u306a\u3044\u30ea\u30bd\u30fc\u30b9\u304c\u5dee\u5206\u3068\u3057\u3066\u51fa\u308b\u306e\u3092\u9632\u3050\\n  * shfmt, shellcheck \u306e\u5c0e\u5165\\n    * CI/CD \u3067\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3089\u3092 lint\\n  * [State Locking](https://www.terraform.io/docs/state/locking.html) \u306e\u5c0e\u5165\\n  * Terraform Cloud \u306e\u691c\u8a3c\\n    * \u7d50\u679c\u3001\u898b\u9001\u308a\\n    * \u3059\u3067\u306b CI/CD pipeline \u3092\u69cb\u7bc9\u3057\u3066\u3044\u308b\u81ea\u5206\u305f\u3061\u306b\u3068\u3063\u3066\u306f\u3001\u308f\u3056\u308f\u3056\u79fb\u884c\u3059\u308b\u30e1\u30ea\u30c3\u30c8\u304c\u8584\u3044\u3068\u5224\u65ad\\n* MongoDB upgrade\\n* Jenkins Alternative \u306e\u691c\u8a3c\\n  * RunDeck\\n  * Argo Workflows\\n  * \u7d50\u5c40\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u691c\u8a3c\u3057\u305f\u7a0b\u5ea6"},{"id":"/2019/10/01/job-12-31","metadata":{"permalink":"/2019/10/01/job-12-31","source":"@site/blog/job-2019-10-01-12-31.md","title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2019-10-01 ~ 2019-12-31","description":"2019-10-01 \u304b\u3089 2019-12-31 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-11-29T01:38:57.000Z","formattedDate":"November 29, 2020","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":1.12,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2019-10-01 ~ 2019-12-31","date":"2020-11-29T01:38:57.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2020-01-01 ~ 2020-03-31","permalink":"/2020/01/01/job-03-31"},"nextItem":{"title":"Splitting .circleci/config.yml","permalink":"/splitting-circleci-config"}},"content":"2019-10-01 \u304b\u3089 2019-12-31 \u306b\u304b\u3051\u3066\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u3092\u66f8\u304d\u307e\u3059\u3002\\n\u52ff\u8ad6\u5168\u90e8\u306f\u66f8\u3051\u306a\u3044\u306e\u3067\u3044\u304f\u3064\u304b\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u66f8\u304d\u307e\u3059\u3002\\n\\n* Terraform\\n  * **terraform fmt \u306e\u5c0e\u5165**\\n  * **Terraform \u306e upgrade v0.11 => v0.12**\\n  * **State \u306e\u5206\u5272 3 => 40 \u5f31(\u6b63\u78ba\u306a\u6570\u306f\u5fd8\u308c\u305f)**\\n  * Conftest \u306b\u3088\u308b lint: Remote Backend \u306e\u30d1\u30b9\u3092\u9593\u9055\u3048\u308b\u3068\u307e\u305a\u3044\u306e\u3067 test \u3092\u5c0e\u5165\\n  * \u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u3068\u304d\u306e\u305f\u3081\u306e generator (\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8)\u3092\u958b\u767a\\n  * CODEOWNERS \u306e\u8a2d\u5b9a\\n  * \u7a81\u6483\u96a3\u306e Terraform\\n  * **\u30ea\u30ea\u30fc\u30b9\u30d6\u30e9\u30f3\u30c1\u3092\u3084\u3081\u3066 GitHub Flow \u306b\u79fb\u884c**\\n  * \u53e4\u3044\u30ea\u30d3\u30b8\u30e7\u30f3\u3067 apply \u306e\u5b9f\u884c\u306e\u7981\u6b62(CI \u304c\u3053\u3051\u308b\u3088\u3046\u306b\u3057\u305f)\\n* Ansible\\n  * CI \u306e\u9ad8\u901f\u5316\\n  * Jenkins job \u3092 CircleCI \u306e scheduled job \u306b\u30ea\u30d7\u30ec\u30fc\u30b9(\u8131 Jenkins)\\n  * \u30ed\u30fc\u30ab\u30eb\u3067\u306e\u958b\u767a\u74b0\u5883\u306e\u6539\u5584\\n    * \u30b3\u30f3\u30c6\u30ca\u3092\u4f7f\u3044\u56de\u305b\u308b\u3088\u3046\u306b\u3059\u308b\\n  * [goss](https://github.com/aelsabbahy/goss) \u306b\u7f6e\u304d\u63db\u3048\u3066\u9ad8\u901f\u5316\\n* CI \u306e\u6539\u5584\\n  * \u9ad8\u901f\u5316(\u7121\u99c4\u306a\u51e6\u7406\u306e\u524a\u6e1b)"},{"id":"/splitting-circleci-config","metadata":{"permalink":"/splitting-circleci-config","source":"@site/blog/splitting-circleci-config.md","title":"Splitting .circleci/config.yml","description":"In this post I introduce how to split a huge .circleci/config.yml.","date":"2020-11-07T05:43:10.000Z","formattedDate":"November 7, 2020","tags":[{"label":"circleci","permalink":"/tags/circleci"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":2.54,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Splitting .circleci/config.yml","date":"2020-11-07T05:43:10.000Z","tags":["circleci","oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u4ed5\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068 2019-10-01 ~ 2019-12-31","permalink":"/2019/10/01/job-12-31"},"nextItem":{"title":"github-ci-monitor: CI \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092 DataDog \u3067\u76e3\u8996","permalink":"/github-ci-monitor"}},"content":"In this post I introduce how to split a huge `.circleci/config.yml`.\\n\\nCircleCI doesn\'t support to split .circleci/config.yml, so we manage all workflows and jobs configuration into one file .circleci/config.yml.\\nIf the repository is [Monorepo](https://en.wikipedia.org/wiki/Monorepo), the more the number of services increases, the more the size of .circleci/config.yml becomes large and it\'s hard to maintain .circleci/config.yml.\\nBy splitting .circleci/config.yml per service, it makes easy to maintain .circleci/config.yml and we can configure split file\'s [CODEOWNERS](https://docs.github.com/en/free-pro-team@latest/github/creating-cloning-and-archiving-repositories/about-code-owners).\\n\\nTo split .circleci/config.yml, you have to generate .circleci/config.yml by merging split files and commit both split files and .circleci/config.yml.\\n\\n## circleci config pack\\n\\nWe can merge split files with the command `circleci config pack`, but I introduce the other tool [circleci-config-merge](https://github.com/suzuki-shunsuke/circleci-config-merge).\\n\\nCircleCI CLI is an official tool so it\'s reliable, but I feel the restriction of the file name and the directory structure is a little strict.\\nWe have to manage all files on the same directory, and the file path is reflected to generated YAML content.\\n\\nFor the detail of `circleci config pack`, please see the official document.\\n\\nhttps://circleci.com/docs/2.0/local-cli/#packing-a-config\\n\\nIf you can accept the restriction of `circleci config pack`, I recommend to use it because it is an official tool.\\nBut if it is difficult to accept the restriction, maybe [circleci-config-merge](https://github.com/suzuki-shunsuke/circleci-config-merge) would help you.\\n\\n## circleci-config-merge\\n\\ncircleci-config-merge is a CLI tool to generate .circleci/config.yml by merging split files.\\n\\nThe usage of circleci-config-merge is like the following.\\n\\n```\\n$ circleci-config-merge merge <file1> [<file2> ...]\\n```\\n\\nThere is no restriction of file paths, and the format of split file is same as .circleci/config.yml.\\n\\nFor example, you can manage files on the same directory.\\n\\n```\\n.circleci/\\n  config.yml # generated\\n  src/\\n    service1.yml # split config per service\\n    service2.yml\\n    ...\\n```\\n\\nOr you can also manage files on each service directory.\\n\\n```\\nservice1/\\n  circleci/\\n    workflow.yml # you can split file freely\\n    jobs.yml\\n  ...\\nservice2/\\n  circleci/\\n    config.yml\\n  ...\\n...\\n```\\n\\ncircleci-config-merge merges the list of workflow jobs.\\n\\nFor example,\\n\\n```yaml\\nworkflows:\\n  build:\\n    jobs:\\n    - foo\\n```\\n\\n```yaml\\nworkflows:\\n  build:\\n    jobs:\\n    - bar\\n```\\n\\nThe workflow `build`\'s jobs are merged as the following.\\n\\n```yaml\\nworkflows:\\n  build:\\n    jobs: # sort by job name for comparison\\n    - bar\\n    - foo\\n```\\n\\n## Test .circleci/config.yml in CI\\n\\nIf you split .circleci/config.yml, you should test in CI whether .circleci/config.yml is generated by merging split files.\\ncircleci-config-merge doesn\'t provide such a feature, but you can implement the test with the other tool like [dyff](https://github.com/homeport/dyff).\\n\\nI have created an example repository [suzuki-shunsuke/example-circleci-config-merge](https://github.com/suzuki-shunsuke/example-circleci-config-merge).\\nYou can use this example as a reference to split .circleci/config.yml and setup CI.\\n\\n## Use case\\n\\nLastly, I introduce a use case of circleci-config-merge.\\nRecently, I split a huge .circleci/config.yml which is over 6,000 lines to about 60 files.\\nIt was hard to maintain the original .circleci/config.yml, but by splitting it became easy to maintain .circleci/config.yml.\\nIf you are suffer from a huge .circleci/config.yml, let\'s split it!\\n\\n## Conclusion\\n\\nIn this post I introduced how to split a huge .circleci/config.yml.\\nWe can generate .circleci/config.yml by merging split files with [circleci-config-merge](https://github.com/suzuki-shunsuke/circleci-config-merge).\\nPlease see the example [suzuki-shunsuke/example-circleci-config-merge](https://github.com/suzuki-shunsuke/example-circleci-config-merge) as a reference to split .circleci/config.yml and setup CI."},{"id":"/github-ci-monitor","metadata":{"permalink":"/github-ci-monitor","source":"@site/blog/github-ci-monitor.md","title":"github-ci-monitor: CI \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092 DataDog \u3067\u76e3\u8996","description":"\u81ea\u4f5c\u306e OSS github-ci-monitor \u306e\u7d39\u4ecb\u3067\u3059\u3002","date":"2020-11-01T08:51:44.000Z","formattedDate":"November 1, 2020","tags":[{"label":"oss","permalink":"/tags/oss"}],"readingTime":6.615,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"github-ci-monitor: CI \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092 DataDog \u3067\u76e3\u8996","date":"2020-11-01T08:51:44.000Z","tags":["oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Splitting .circleci/config.yml","permalink":"/splitting-circleci-config"},"nextItem":{"title":"matchfile - \u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7\u304b\u3089\u5fc5\u8981\u306a\u30bf\u30b9\u30af\u3092\u5c0e\u51fa\u3059\u308b\u305f\u3081\u306e CLI \u30c4\u30fc\u30eb","permalink":"/matchfile"}},"content":"\u81ea\u4f5c\u306e OSS [github-ci-monitor](https://github.com/suzuki-shunsuke/github-ci-monitor) \u306e\u7d39\u4ecb\u3067\u3059\u3002\\n\\nGitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306e CI \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u5b9a\u671f\u7684\u306b\u53d6\u5f97\u3057\u3001 DataDog \u306b\u9001\u308b\u3053\u3068\u3067\u3001 CI \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u76e3\u8996\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\u73fe\u72b6\u306f AWS Lambda \u3067\u52d5\u304b\u3059\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4ed6\u306e\u65b9\u6cd5\u3067\u3082\u52d5\u304b\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u3064\u3082\u308a\u3067\u3059\u3002\\n\\n## Motivation\\n\\n\u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\u306f\u3001 PR \u3092\u30de\u30fc\u30b8\u3057\u305f\u3042\u3068\u306b CI \u304c\u3053\u3051\u305f\u5834\u5408\u306b\u901a\u77e5\u304c\u6b32\u3057\u3044\u3068\u3044\u3046\u3082\u306e\u3067\u3059\u3002\\n\u30de\u30fc\u30b8\u3057\u305f\u3042\u3068\u306b CI \u304c\u4e00\u77ac\u3067\u7d42\u308f\u308b\u306a\u3089\u7121\u4e8b\u7d42\u308f\u308b\u306e\u3092\u898b\u5c4a\u3051\u3066\u3082\u3044\u3044\u3093\u3067\u3059\u304c\u3001\\n\u6570\u5206\u304b\u304b\u308b\u3068\u5f85\u3063\u3066\u308b\u306e\u3082\u6642\u9593\u304c\u3082\u3063\u305f\u3044\u306a\u3044\u3067\u3059\u3002\\n\u3057\u3070\u3089\u304f\u3057\u305f\u3042\u3068\u306b\u7d50\u679c\u3092\u78ba\u8a8d\u3059\u308c\u3070\u3044\u3044\u3093\u3067\u3059\u304c\u3001\u305d\u308c\u3082\u9762\u5012\u304f\u3055\u3044\u3067\u3059\u3057\u3001\u666e\u901a\u306b\u5fd8\u308c\u307e\u3059\u3002\\n\u305d\u3046\u3059\u308b\u3068\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3064\u3082\u308a\u304c\u5b9f\u306f CI \u304c\u3053\u3051\u3066\u305f\u306a\u3093\u3066\u3053\u3068\u304c\u666e\u901a\u306b\u3042\u308a\u307e\u3059\u3002\\n\\n\u305d\u3046\u3044\u3046\u3053\u3068\u306b\u3059\u3050\u6c17\u3065\u3051\u308b\u3088\u3046\u3001 Slack \u306b\u901a\u77e5\u304c\u307b\u3057\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n## \u4ed5\u7d44\u307f\\n\\n\u4ed5\u7d44\u307f\u306f\u5358\u7d14\u3067\u3059\u3002\\n\\nGitHub API \u3067\u5404\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u53d6\u5f97\u3057\u3001 DataDog API \u3067\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u9001\u4fe1\u3057\u3066\u3044\u307e\u3059\u3002\\nDataDog API \u306f [Service Check API](https://docs.datadoghq.com/ja/api/v1/service-checks/) \u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\\nstatus \u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n* 0: \u6b63\u5e38\\n* 1: \u7570\u5e38\\n* 3: \u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u53d6\u5f97\u306b\u5931\u6557\\n\\n\u307e\u305f\u4ee5\u4e0b\u306e tag \u304c\u4ed8\u304d\u307e\u3059\u3002\\n\\n* owner: \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30aa\u30fc\u30ca\u30fc\\n* repo: \u30ea\u30dd\u30b8\u30c8\u30ea\u540d\\n* ref: \u30d6\u30e9\u30f3\u30c1\u540d\\n\\n\u5404\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u306f\u73fe\u72b6 3 \u3064\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n* Commit Status: [Get the combined status for a specific reference](https://docs.github.com/en/free-pro-team@latest/rest/reference/repos#get-the-combined-status-for-a-specific-reference)\\n* Check API:\\n  * Check Run: [List check runs for a Git reference](https://docs.github.com/en/free-pro-team@latest/rest/reference/checks#list-check-runs-for-a-git-reference)\\n  * Check Suite: [List check suites for a Git reference](https://docs.github.com/en/free-pro-team@latest/rest/reference/checks#list-check-suites-for-a-git-reference)\\n\\n\u305d\u308c\u305e\u308c on/off \u3092\u8a2d\u5b9a\u3067\u304d\u3001\u8907\u6570\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u3069\u308c\u304b 1 \u3064\u3067\u3082\u5931\u6557\u3057\u3066\u3044\u305f\u3089 status \u304c 1 \u306b\u306a\u308a\u307e\u3059\u3002\\n\\n## Lambda \u3067\u52d5\u304b\u3059\u5834\u5408\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\\n\\nCloudWatch Events \u3067\u5b9a\u671f\u7684(5\u5206\u6bce\u3068\u304b)\u306b Lambda Function \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30ea\u30b9\u30c8\u306a\u3069\u306e\u8a2d\u5b9a\u306f\u74b0\u5883\u5909\u6570\u3067\u6e21\u3057\u3001 GitHub Access Token \u306a\u3069\u306e\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u306f AWS Secrets Manager \u7d4c\u7531\u3067\u6e21\u3057\u307e\u3059\u3002\\n\\n## \u5b9f\u88c5\u65b9\u91dd\\n\\nCI \u304c\u3053\u3051\u305f\u3089\u901a\u77e5\u3057\u3066\u307b\u3057\u3044\u3068\u3044\u3046\u8981\u4ef6\u3092\u6e80\u305f\u3059\u65b9\u6cd5\u306f\u8272\u3005\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u307e\u305a CI \u306e\u4e2d\u3067\u3053\u3051\u305f\u5834\u5408\u306b\u901a\u77e5\u3092\u98db\u3070\u3059\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059(\u66f8\u3044\u3066\u307f\u305f\u3089\u7d50\u69cb\u3042\u308a\u307e\u3059\u306d)\u3002\\n\\n* \u30c4\u30fc\u30eb\u3092\u3069\u3063\u304b\u3067\u52d5\u304b\u3057\u305f\u308a\u30c4\u30fc\u30eb\u81ea\u4f53\u3092\u76e3\u8996\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\\n* \u3088\u308a\u8a73\u7d30\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308c\u308b\\n  * \u30b3\u30de\u30f3\u30c9\u306e\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u3092\u542b\u3081\u305f\u308a\\n  * CI \u306e\u30ea\u30f3\u30af\u8cbc\u3063\u305f\u308a\u3001 PR \u306e author \u3092\u30e1\u30f3\u30b7\u30e7\u30f3\u3057\u305f\u308a\u3082\u3057\u3084\u3059\u3044\\n* CI \u304c\u3053\u3051\u305f\u3089\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u901a\u77e5\u3067\u304d\u308b\\n* \u30dd\u30fc\u30ea\u30f3\u30b0\u3068\u9055\u3044\u3001\u7121\u99c4\u306b API \u3092\u53e9\u304f\u5fc5\u8981\u304c\u306a\u3044\\n\\n\u4e00\u65b9\u3067\u3001\u3053\u308c\u3092\u6f0f\u308c\u306a\u304f\u5b9f\u88c5\u3059\u308b\u306e\u306f\u3051\u3063\u3053\u3046\u5927\u5909\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\u4f8b\u3048\u3070 CircleCI \u3060\u3068\u5168\u3066\u306e Job \u3067\u3061\u3083\u3093\u3068\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u304c 1 \u500b\u3060\u3051\u306a\u3089\u305d\u308c\u3067\u3082\u3044\u3044\u3067\u3059\u304c\u3001\u4f55\u5341\u500b\u3082\u3042\u308b\u3068\u306a\u308b\u3068\u3060\u3044\u3076\u5927\u5909\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u4eca\u56de\u306e\u30c4\u30fc\u30eb\u306e\u3088\u3046\u306a\u65b9\u5f0f\u3060\u3068\u5bfe\u8c61\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e CI \u306b\u4e00\u5207\u624b\u3092\u52a0\u3048\u305a\u306b\u5b9f\u88c5\u3067\u304d\u308b\u306e\u304c\u5927\u304d\u3044\u3067\u3059\u3002\\n\\n\u307e\u305f\u3001 CI \u306e\u7d50\u679c\u3092\u53d6\u5f97\u3059\u308b API \u3068\u3057\u3066 CI \u30b5\u30fc\u30d3\u30b9\u304c\u63d0\u4f9b\u3059\u308b API \u3092\u4f7f\u3063\u3066\u53d6\u5f97\u3059\u308b\u3053\u3068\u3082\u8003\u3048\u3089\u308c\u307e\u3059\u3002\\n\u3057\u304b\u3057\u3001 GitHub API \u3092\u4f7f\u3048\u3070 CI \u30b5\u30fc\u30d3\u30b9\u6bce\u306b\u5b9f\u88c5\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u3066\u697d\u3067\u3059\u3002\\n\\nSlack API \u3092\u4f7f\u3063\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6295\u7a3f\u3059\u308b\u3088\u3046\u306a\u3053\u3068\u3082\u4e00\u77ac\u8003\u3048\u307e\u3057\u305f\u304c\u3001 DataDog \u3092\u4f7f\u3046\u3053\u3068\u3067\u4ee5\u4e0b\u306e\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* \u9001\u4fe1\u5148\u3084\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u304b\u3092\u30c4\u30fc\u30eb\u3067\u7ba1\u7406\u3057\u306a\u304f\u3066\u826f\u3044\\n* \u4f55\u5ea6\u3082\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3089\u306a\u3044\u3088\u3046\u306b\u72b6\u614b\u3092 DB \u3067\u6301\u305f\u306a\u304f\u3066\u826f\u3044\\n* \u30a2\u30e9\u30fc\u30c8\u3092\u4e00\u6642\u7684\u306b\u6b62\u3081\u305f\u308a\u3059\u308b\u306e\u3082\u7c21\u5358\\n\\n\u307e\u305f\u3001\u6642\u9593\u8ef8\u3067\u3069\u308c\u3060\u3051 CI \u304c\u58ca\u308c\u305f\u72b6\u614b\u3060\u3063\u305f\u304b\u3001\u5fa9\u65e7\u3059\u308b\u306e\u306b\u3069\u306e\u304f\u3089\u3044\u6642\u9593\u304c\u304b\u304b\u3063\u305f\u304b\u5206\u304b\u308b\u306e\u3082\u306a\u306b\u304b\u306b\u4f7f\u3048\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n\u4eca\u56de\u306e\u30c4\u30fc\u30eb\u306b\u9650\u3089\u305a\u3001 Slack \u306b\u76f4\u63a5\u901a\u77e5\u3059\u308b\u3088\u308a DataDog \u3084 Sentry \u3092\u7d4c\u7531\u3057\u305f\u307b\u3046\u304c\u4e0a\u624b\u304f\u3044\u304f\u3053\u3068\u3082\u7d50\u69cb\u3042\u308b\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001\u5b9a\u671f\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u3068\u3057\u3066\u306f Lambda \u4ee5\u5916\u306b\u3082\\n\\n* Jenkins\\n* \u9069\u5f53\u306a\u30b5\u30fc\u30d0\u3067 cron\\n* CI \u30b5\u30fc\u30d3\u30b9\\n* k8s \u306e CronJob\\n* k8s \u306e Deployment\\n\\n\u306a\u3069\u8272\u3005\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u305d\u3046\u3044\u3046\u98a8\u306b\u3082\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u30d0\u30a4\u30ca\u30ea\u3092\u4eca\u5f8c\u63d0\u4f9b\u3057\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\nLambda \u3092\u4f7f\u3046\u3068\u30a4\u30f3\u30d5\u30e9\u3092\u7ba1\u7406\u3057\u306a\u304f\u3066\u826f\u3044\u306e\u304c\u30e1\u30ea\u30c3\u30c8\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001 DataDog API \u3067\u7d50\u679c\u3092\u9001\u308b push \u578b\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306f\u5225\u306b\u3001\\nDataDog Agent + Prometheus Exporter \u306e pull \u578b\u3082\u3042\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\u305d\u3046\u3059\u308b\u3068\u30c4\u30fc\u30eb\u5074\u3067 DataDog API Key \u304c\u4e0d\u8981\u306b\u306a\u308b\u3068\u3044\u3046\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059\u3002\\n\u3053\u3061\u3089\u306e\u30d1\u30bf\u30fc\u30f3\u3082\u4eca\u5f8c\u5b9f\u88c5\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"/matchfile","metadata":{"permalink":"/matchfile","source":"@site/blog/matchfile.md","title":"matchfile - \u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7\u304b\u3089\u5fc5\u8981\u306a\u30bf\u30b9\u30af\u3092\u5c0e\u51fa\u3059\u308b\u305f\u3081\u306e CLI \u30c4\u30fc\u30eb","description":"\u81ea\u4f5c\u306e CLI \u30c4\u30fc\u30eb matchfile \u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2020-10-27T10:39:44.000Z","formattedDate":"October 27, 2020","tags":[{"label":"oss","permalink":"/tags/oss"}],"readingTime":5.05,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"matchfile - \u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7\u304b\u3089\u5fc5\u8981\u306a\u30bf\u30b9\u30af\u3092\u5c0e\u51fa\u3059\u308b\u305f\u3081\u306e CLI \u30c4\u30fc\u30eb","date":"2020-10-27T10:39:44.000Z","tags":["oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"github-ci-monitor: CI \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092 DataDog \u3067\u76e3\u8996","permalink":"/github-ci-monitor"},"nextItem":{"title":"\u306a\u305c buildflow \u3092\u4f5c\u3063\u305f\u306e\u304b","permalink":"/buildflow-goal"}},"content":"\u81ea\u4f5c\u306e CLI \u30c4\u30fc\u30eb matchfile \u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/matchfile\\n\\n\u3053\u306e\u8a18\u4e8b\u306e\u57f7\u7b46\u6642\u70b9\u3067\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306f v0.1.1 \u3067\u3059\u3002\\n\\n\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7\u304b\u3089\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u306e\u3042\u308b\u30bf\u30b9\u30af\u3092\u5c0e\u51fa\u3059\u308b\u305f\u3081\u306e CLI \u30c4\u30fc\u30eb\u3067\u3059\u3002\\nGo \u3067\u66f8\u304b\u308c\u3066\u3044\u3066\u3001\u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u308c\u3070\u4f7f\u3048\u307e\u3059\u3002\\n\\nPull Request (\u4ee5\u4e0b PR) \u306e CI \u3067\u306f PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u5fdc\u3058\u3066\\n\u5fc5\u8981\u306a\u30bf\u30b9\u30af(build, test, lint, etc) \u3060\u3051\u3092\u5b9f\u884c\u3057\u305f\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u305d\u3053\u3067\u3001 `PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u30ea\u30b9\u30c8` \u3068 `\u30bf\u30b9\u30af\u304c\u4f9d\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u6761\u4ef6` \u3092\u5143\u306b\u3001\u305d\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u5224\u5b9a\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3068\u3057\u3066 matchfile \u3092\u958b\u767a\u3057\u307e\u3057\u305f\u3002\\n\\n\u305f\u3060\u3057\u3001 matchfile \u306e\u6a5f\u80fd\u3068\u3057\u3066\u306f PR \u3084 CI \u3068\u306f\u72ec\u7acb\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3082\u3063\u3068\u5225\u306e\u76ee\u7684\u3067\u3082\u4f7f\u3048\u308b\u3068\u306f\u601d\u3044\u307e\u3059\u3002\\n\\nmatchfile \u306f `PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u30ea\u30b9\u30c8` \u3084 `\u30bf\u30b9\u30af\u304c\u4f9d\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u6761\u4ef6` \u3092\u53d6\u5f97\u3057\u305f\u308a\u3059\u308b\u6a5f\u80fd\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n`PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u30ea\u30b9\u30c8` \u306f [ci-info](https://github.com/suzuki-shunsuke/ci-info) \u3068\u3044\u3046\u81ea\u5206\u304c\u4f5c\u3063\u305f\u5225\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3046\u3068\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\\n\\n`\u30bf\u30b9\u30af\u304c\u4f9d\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u6761\u4ef6` \u306f\u30bf\u30b9\u30af\u306b\u5927\u304d\u304f\u4f9d\u5b58\u3059\u308b\u306e\u3067 matchfile \u306f\u30ab\u30d0\u30fc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\n\\nmatchfile \u306e\u4f7f\u3044\u65b9\u3068\u3057\u3066\u306f\\n\\n```\\n$ matchfile run <PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u30ea\u30b9\u30c8\u304c\u66f8\u304b\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9> <\u30bf\u30b9\u30af\u304c\u4f9d\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u6761\u4ef6\u304c\u66f8\u304b\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9>\\n```\\n\\n\u3067\u3001 `PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u30ea\u30b9\u30c8` \u306e\u3046\u3061\u4e00\u3064\u3067\u3082 `\u30bf\u30b9\u30af\u304c\u4f9d\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u6761\u4ef6` \u306b\u30de\u30c3\u30c1\u3059\u308c\u3070 `true` \u3092\u3001\u30de\u30c3\u30c1\u3057\u306a\u3051\u308c\u3070 `false` \u3092\u6a19\u6e96\u51fa\u529b\u3057\u307e\u3059\u3002\\n\u30b3\u30de\u30f3\u30c9\u306e exit code \u3067\u7d50\u679c\u3092\u8868\u73fe\u3059\u308b\u3053\u3068\u3082\u8003\u3048\u3089\u308c\u307e\u3057\u305f\u304c\u3001\u305d\u3046\u3059\u308b\u3068 `set -e` \u3057\u3066\u3044\u308b\u3068\u304d\u306b\u82e5\u5e72\u9762\u5012\u304f\u3055\u3044\u306e\u3067\u3001\u6a19\u6e96\u51fa\u529b\u3067\u8868\u73fe\u3057\u307e\u3057\u305f\u3002\\n\\n\u3054\u304f\u7c21\u5358\u306a\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\\n\\n```\\n$ echo template/foo.tpl > changed_files.txt\\n$ echo template > template_dependencies.txt\\n$ matchfile run changed_files.txt template_dependencies.txt\\ntrue\\n```\\n\\n`\u30bf\u30b9\u30af\u304c\u4f9d\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u6761\u4ef6` \u306f\u72ec\u81ea\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\\n[gitignore \u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8](https://git-scm.com/docs/gitignore)\u306b\u30a4\u30f3\u30b9\u30d1\u30a4\u30a2\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u6b63\u898f\u8868\u73fe\u304c\u4f7f\u3048\u308b\u306a\u3069\u3001\u72ec\u81ea\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\nCI \u306e\u4e2d\u3067\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u52d5\u7684\u306b\u751f\u6210\u3059\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3001\u884c\u6307\u5411\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\nGo \u5b9f\u88c5\u306e\u30d1\u30fc\u30b5\u30fc\u304c\u63d0\u4f9b\u3055\u308c\u305f\u3088\u304f\u77e5\u3089\u308c\u305f\u884c\u6307\u5411\u306e(\u30b3\u30de\u30f3\u30c9\u3067\u751f\u6210\u3057\u3084\u3059\u3044)\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u3042\u308c\u3070\u826f\u304b\u3063\u305f\u3093\u3067\u3059\u304c\u3001\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u7c21\u5358\u306b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n```\\n[#][!][<kind>,...] <path>\\n...\\n```\\n\\n1\u884c\u306b1\u3064\u6761\u4ef6\u3092\u66f8\u304d\u307e\u3059\u3002\\n\u4e0a\u304b\u3089\u5168\u90e8\u8a55\u4fa1\u3055\u308c\u307e\u3059(\u3069\u308c\u304b\u30de\u30c3\u30c1\u3057\u3066\u3082\u7d42\u308f\u308a\u307e\u305b\u3093)\u3002\\n`#` \u306f\u30b3\u30e1\u30f3\u30c8\u3067\u3059\u3002\u884c\u306e\u9014\u4e2d\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\\n\\n`!` \u306f gitignore \u3068\u4f3c\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u306e\u884c\u3092\u8a55\u4fa1\u3059\u308b\u6642\u70b9\u3067\u8a55\u4fa1\u7d50\u679c\u304c `true` \u3067\u3042\u308a\u3001`!` \u3092\u9664\u3044\u305f\u305d\u306e\u884c\u306e\u8a55\u4fa1\u304c `true` \u306e\u5834\u5408\u3001\u8a55\u4fa1\u7d50\u679c\u304c `false` \u306b\u306a\u308a\u307e\u3059\u3002\\n\u65e5\u672c\u8a9e\u304c\u4e0b\u624b\u304f\u305d\u3067\u3059\u306d\u3002\\n\\n\u7c21\u5358\u306a\u4f8b\u3092\u793a\u3059\u3068\u3001 `foo/foo.txt \u4ee5\u5916\u306e foo \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb` \u3068\u3057\u305f\u3044\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```\\nglob foo/*\\n!glob foo/foo.txt\\n```\\n\\n`kind` \u306f `path` \u3092\u3069\u3046\u6271\u3046\u304b\u3092\u793a\u3057\u3066\u3044\u3066\u3001\u5e7e\u3064\u304b\u7a2e\u985e\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* equal: \u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u304c\u6587\u5b57\u5217\u3068\u3057\u3066\u5b8c\u5168\u306b\u4e00\u81f4\u3059\u308c\u3070\u30de\u30c3\u30c1\\n* dir: \u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u304c `<path>/` \u3067\u59cb\u307e\u308c\u3070\u30de\u30c3\u30c1\\n* regexp: \u6b63\u898f\u8868\u73fe\\n* glob: \u30b0\u30ed\u30d6\u3002 `**` \u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u307e\u305b\u3093\\n\\nkind \u306f\u30ab\u30f3\u30de\u3064\u306a\u304e\u3067\u8907\u6570\u6307\u5b9a\u3067\u304d\u3001\u8907\u6570\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u5148\u306b\u6307\u5b9a\u3057\u305f\u3082\u306e\u304b\u3089\u30de\u30c3\u30c1\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3055\u308c\u3001\u4e00\u3064\u3067\u3082\u30de\u30c3\u30c1\u3057\u305f\u3089\u305d\u306e\u6761\u4ef6\u304c\u30de\u30c3\u30c1\u3059\u308b\u3082\u306e\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002\\n\\nkind \u306e\u6307\u5b9a\u306f\u4efb\u610f\u3067\u3001\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001 kind \u306f `equal,dir,glob` \u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002\\n\\n\u3064\u307e\u308a\\n\\n```\\nfoo.txt\\n```\\n\\n\u306f\\n\\n```\\nequal,dir,glob foo.txt\\n```\\n\\n\u3068\u540c\u3058\u3067\u3059\u3002"},{"id":"/buildflow-goal","metadata":{"permalink":"/buildflow-goal","source":"@site/blog/buildflow-goal.md","title":"\u306a\u305c buildflow \u3092\u4f5c\u3063\u305f\u306e\u304b","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-10-18T00:53:08.000Z","formattedDate":"October 18, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":10.655,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u306a\u305c buildflow \u3092\u4f5c\u3063\u305f\u306e\u304b","date":"2020-10-18T00:53:08.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"matchfile - \u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7\u304b\u3089\u5fc5\u8981\u306a\u30bf\u30b9\u30af\u3092\u5c0e\u51fa\u3059\u308b\u305f\u3081\u306e CLI \u30c4\u30fc\u30eb","permalink":"/matchfile"},"nextItem":{"title":"buildflow \u306e\u5b9f\u884c\u7d50\u679c\u306e\u51fa\u529b\u5f62\u5f0f","permalink":"/buildflow-result-output"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f \u306a\u305c buildflow \u3092\u4f5c\u3063\u305f\u306e\u304b\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\u958b\u767a\u8005\u3067\u3042\u308b\u81ea\u5206\u306e\u597d\u307f\u3084\u7f6e\u304b\u308c\u305f\u74b0\u5883\u306a\u3069\u304c\u6240\u3005\u306b\u53cd\u6620\u3055\u308c\u305f\u5185\u5bb9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n## \u89e3\u6c7a\u3057\u305f\u3044\u8ab2\u984c\\n\\n\u81ea\u5206\u306f CI/CD \u306e DX \u306e\u6539\u5584\u306b\u696d\u52d9\u3068\u3057\u3066\u53d6\u308a\u7d44\u3093\u3067\u3044\u307e\u3059\u3002\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u305f\u304f\u3055\u3093\u3042\u308a\u3001\u6a2a\u65ad\u7684\u306b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3057\u3066\u3044\u307e\u3059\u3002\\n\u5e7e\u3064\u304b\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u30e2\u30ce\u30ec\u30dd\u306b\u306a\u3063\u3066\u304a\u308a\u3001 CI \u306e\u8907\u96d1\u3055\u304c\u5897\u3057\u3066\u3044\u305f\u308a\u3001 CI \u306e\u5b9f\u884c\u6642\u9593\u304c\u9577\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u73fe\u5728\u306e CI/CD \u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u3042\u308b\u3068\u611f\u3058\u3066\u3044\u307e\u3059(\u4ed6\u306b\u3082\u3042\u308b\u3093\u3067\u3059\u304c\u3001 buildflow \u3068\u95a2\u4fc2\u306a\u3044\u306e\u3067\u5272\u611b)\u3002\\n\\n* \u5b9f\u884c\u6642\u9593\u304c\u9577\u3044\\n  * PR \u3068\u306f\u95a2\u4fc2\u306a\u3044\u51e6\u7406(test, build, etc) \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\\n* \u91d1\u92ad\u7684\u306b\u9ad8\u3044\\n  * \u5b9f\u884c\u6642\u9593\u304c\u9577\u3044\u306e\u3067\u7121\u99c4\u306b\u304a\u91d1\u304c\u304b\u304b\u3063\u3066\u3044\u308b\\n  * CI \u30b5\u30fc\u30d3\u30b9\u306b\u3088\u3063\u3066\u306f\u4e26\u5217\u5ea6\u3092\u4e0a\u3052\u308b\u3053\u3068\u3067\u5b9f\u884c\u6642\u9593\u304c\u7e2e\u3080\u5834\u5408\u304c\u3042\u308b\u304c\u3001\u305d\u308c\u3067\u3082\u305d\u306e\u5206\u304a\u91d1\u304c\u304b\u304b\u308b\\n* PR \u3068\u306f\u76f4\u63a5\u95a2\u4fc2\u306a\u3044\u3068\u3053\u308d\u3067\u5931\u6557\u3059\u308b\\n  * PR \u3068\u306f\u95a2\u4fc2\u306a\u3044\u51e6\u7406(test, build, etc) \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u3066\u3001\u305d\u308c\u3089\u304c flaky \u3067\u5931\u6557\u3059\u308b\\n* \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u304c\u60aa\u3044\\n  * \u5c5e\u4eba\u5316\u6c17\u5473\\n  * \u4f55\u3092\u3084\u3063\u3066\u3044\u308b\u306e\u304b\u5206\u304b\u308a\u306b\u304f\u3044\\n* \u540c\u3058\u3088\u3046\u306a\u6a5f\u80fd\u3092\u8907\u6570\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u5b9f\u88c5\u30fb\u30e1\u30f3\u30c6\u3057\u305f\u304f\u306a\u3044\\n\\n\u3053\u308c\u3089\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b buildflow \u3092\u958b\u767a\u3057\u307e\u3057\u305f\u3002\\n\\n## buildflow \u3067\u5fc5\u8981\u306a\u51e6\u7406\u3060\u3051\u3092\u5b9f\u884c\u3059\u308b\\n\\nbuildflow \u3067\u306f PR \u306e\u60c5\u5831\u3092\u81ea\u52d5\u3067\u53d6\u5f97\u3057\u3001\u305d\u308c\u3089\u306b\u5fdc\u3058\u3066\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\\n\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u5fdc\u3058\u3066\u3060\u3051\u3067\u306a\u304f\u3001 label \u3084 PR \u306e author \u306a\u3069\u3067\u3082\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\\nTengo script \u3092\u7528\u3044\u3066\u67d4\u8edf\u306a\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\u3067\u304d\u307e\u3059\u3002\\nJSON \u3084 YAML \u306e\u8aad\u307f\u8fbc\u307f\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4f9d\u5b58\u95a2\u4fc2\u306a\u3069\u306e\u8a2d\u5b9a\u3092\u5225\u30d5\u30a1\u30a4\u30eb\u3067\u7ba1\u7406\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\\n\\n\u4e00\u90e8\u306e CI \u30b5\u30fc\u30d3\u30b9\u306f\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306e\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\\nCodeBuild \u306f Webhook \u306e Filter \u3067\u7279\u5b9a\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5909\u66f4\u3055\u308c\u305f\u5834\u5408\u306e\u307f build \u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3057\u3001\\nGitHub Actions \u3067\u3082\u4f3c\u305f\u3088\u3046\u306a\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 \\n\\n* https://docs.github.com/ja/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#onpushpull_requestpaths\\n\\n\u305d\u308c\u3089\u3067\u4e8b\u8db3\u308a\u308b\u306a\u3089\u305d\u308c\u3067\u3082\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\u305d\u308c\u3089\u3060\u3051\u3060\u3068\u96e3\u3057\u3044\u5834\u5408\u3001 buildflow \u3092\u4f7f\u3046\u3068\u3088\u308a\u67d4\u8edf\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n## \u4e26\u5217\u51e6\u7406\u306b\u3088\u308b\u9ad8\u901f\u5316\\n\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067 for loop \u306a\u3069\u3067\u51e6\u7406\u3057\u3066\u3044\u3066\u6642\u9593\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u5834\u5408\u3001\\nbuildflow \u3067\u4e26\u5217\u51e6\u7406\u3059\u308b\u3068\u9ad8\u901f\u5316\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n## \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\\n\\nbuildflow \u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u300c\u5fc5\u8981\u306a\u51e6\u7406\u3060\u3051\u3092\u5b9f\u884c\u300d\u3057\u305f\u308a\u300c\u4e26\u5217\u51e6\u7406\u3067\u9ad8\u901f\u5316\u300d\u3057\u305f\u308a\u306f\u3067\u304d\u308b\u3067\u3057\u3087\u3046\u3002\\n\u305d\u308c\u3067\u3082 buildflow \u3092\u958b\u767a\u3057\u305f\u306e\u306f\u3001\u697d\u3092\u3059\u308b\u305f\u3081\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u9ad8\u3081\u308b\u305f\u3081\u3067\u3059\u3002\\n\\nPR \u306e\u60c5\u5831\u306f\u3088\u304f\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u81ea\u52d5\u3067\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u8907\u96d1\u306a CI \u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u3068\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u304c\u60aa\u304f\u306a\u308a\u307e\u3059\u3002\\n\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u7fd2\u719f\u5ea6\u306b\u4f9d\u5b58\u3057\u307e\u3059\u304c\u3001\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u30a8\u30f3\u30b8\u30cb\u30a2\u306a\u3089\u8ab0\u3067\u3082\u66f8\u3051\u308b\u5206\u5168\u54e1\u304c\u7fd2\u719f\u3057\u3066\u3044\u308b\u3068\u306f\u9650\u308a\u307e\u305b\u3093\u3057\u3001\\n\u5bb9\u6613\u306b\u30d0\u30b0\u304c\u751f\u307e\u308c\u307e\u3059\u3002\\n\u30c1\u30fc\u30e0\u306b\u3088\u308a\u307e\u3059\u304c\u3001Python \u3084 Ruby, Go \u3068\u3044\u3063\u305f\u4ed6\u306e\u8a00\u8a9e\u3068\u6bd4\u3079\u3001 lint \u3084 test \u304c\u3055\u308c\u3066\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u305b\u3044\u3082\u3042\u308b\u3068\u306f\u601d\u3044\u307e\u3059\u3002\\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u306f\u5f53\u7136 CI \u3067 test, lint \u3059\u308b\u306e\u306b\u3001\\nCI \u3068\u304b\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3057\u306a\u3044\u3068\u3044\u3046\u306e\u3082\u73cd\u3057\u304f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3042\u3068\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u69cb\u9020\u304c\u8ca7\u5f31\u3060\u3063\u305f\u308a\u3001\u95a2\u6570\u306e I/F \u304c\u308f\u304b\u308a\u306b\u304f\u304b\u3063\u305f\u308a\u3001\u30b0\u30b0\u308a\u306b\u304f\u3044\u6a5f\u80fd\u304c\u591a\u304b\u3063\u305f\u308a\u3001\\n\u30b3\u30de\u30f3\u30c9\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u9010\u4e00\u8abf\u3079\u306a\u3044\u3068\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u4f59\u8ac7\u3067\u3059\u304c\u3001 shellcheck \u3084 shfmt \u3092\u4f7f\u3046\u3053\u3068\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002\\nshellcheck \u3092\u59cb\u3081\u3066\u4f7f\u3046\u3068\u3001\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u306f\u3053\u3093\u306a\u306b\u8272\u3005\u7f60\u304c\u3042\u308b\u306e\u304b\u3068\u6c17\u4ed8\u304b\u3055\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n[Google \u306e Shell Style Guide](https://google.github.io/styleguide/shellguide.html) \u3067\u306f\u6b21\u306e\u3088\u3046\u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n> If you are writing a script that is more than 100 lines long, or that uses non-straightforward control flow logic, you should rewrite it in a more structured language now\\n\\n\u3067\u306f Ruby \u3084 Python \u3068\u3044\u3063\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3067\u66f8\u3044\u305f\u3089\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u6319\u3052\u305f\u554f\u984c\u306f\u89e3\u6c7a\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3057\u3001\u975e\u5e38\u306b\u81ea\u7136\u3067\u5408\u7406\u7684\u306a\u9078\u629e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u305d\u308c\u3067\u3082 buildflow \u3092\u5b9f\u88c5\u3057\u305f\u306e\u306b\u306f\u3001\u5e7e\u3064\u304b\u8ab2\u984c\u611f\u304c\u3042\u3063\u305f\u304b\u3089\u3067\u3059\u3002\\n\u307e\u305a\u306f\u51e6\u7406\u7cfb\u3001\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3001 OS \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u4f9d\u5b58\u3059\u308b\u3053\u3068\u3067\u3059\u3002\\n\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4f7f\u308f\u306a\u3051\u308c\u3070\u3044\u3044\u8a71\u3067\u3059\u304c\u3001 Ruby \u3084 Python \u3092\u4f7f\u3063\u3066\u3044\u308c\u3070\u4f7f\u3044\u305f\u3044\u3068\u3044\u3046\u58f0\u3082\u51fa\u3066\u304f\u308b\u3053\u3068\u306f\u3042\u308b\u3067\u3057\u3087\u3046\u3002\\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u540c\u3058\u8a00\u8a9e\u3092\u4f7f\u3063\u3066\u3044\u308c\u3070\u305d\u308c\u3068\u306e\u5171\u5b58\u3082\u6c17\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\nbuildflow \u306b\u9650\u3089\u305a\u3001\u81ea\u5206\u306f Go \u306e\u300c\u30ef\u30f3\u30d0\u30a4\u30ca\u30ea\u3067\u52d5\u304f\u300d\u3068\u3044\u3046\u4e16\u754c\u89b3\u304c\u975e\u5e38\u306b\u597d\u304d\u3067\u3059\u3002\\n\\n\u81ea\u5206\u306f\u3053\u308c\u307e\u3067\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092 Go \u3067\u66f8\u304d\u76f4\u3059\u3068\u3044\u3046\u3053\u3068\u3092\u3084\u3063\u3066\u304d\u307e\u3057\u305f\u3002\\n\u305d\u306e\u5834\u5408\u4ee5\u4e0b\u306e2\u3064\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3069\u3061\u3089\u306b\u305b\u3088\u8ab2\u984c\u611f\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* \u30d3\u30eb\u30c9\u6e08\u307f\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u4f7f\u3046\\n  * \u914d\u5e03\u65b9\u6cd5\u3092\u8003\u3048\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n* \u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u306e\u3088\u3046\u306b `go run` \u3067\u5b9f\u884c\u3059\u308b\\n  * \u4ed6\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3068\u540c\u69d8\u306e\u554f\u984c\u304c\u3042\u308b\\n\\n## \u30ed\u30b8\u30c3\u30af\u3068\u30b3\u30de\u30f3\u30c9\u306e\u5206\u96e2\\n\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f55\u304b\u3057\u3089\u306e\u8a00\u8a9e\u3067\u66f8\u304d\u76f4\u3059\u5834\u5408\u3001\\n\u5168\u3066\u3092\u305d\u308c\u3089\u3067\u66f8\u304d\u305f\u3044\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\u3060\u304b\u3089\u3053\u305d\u3001\u898f\u6a21\u304c\u5c0f\u3055\u3044\u3046\u3061\u306f\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u66f8\u304f\u306e\u3067\u3057\u3087\u3046\u3002\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u66f8\u3044\u305f\u307b\u3046\u304c\u697d\u306a\u90e8\u5206\u3082\u3042\u308b\u306e\u3067\u3059\u3002\\n\\nbuildflow \u3067\u306f\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e3\u3064\u306b\u5206\u96e2\u3057\u307e\u3059\u3002\\n\\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(YAML)\\n* Tengo script\\n* \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8(\u7d30\u304b\u3044\u3053\u3068\u8a00\u3046\u3068\u3001\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u4ee5\u5916\u3082\u5b9f\u306f\u4f7f\u3048\u308b\u3051\u3069)\\n\\n\u3053\u3046\u3057\u3066\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u66f8\u304d\u306b\u304f\u3044\u90e8\u5206\u3092\u5206\u96e2\u3057\u3001\u9069\u5207\u306a\u7c92\u5ea6\u3067\u7ba1\u7406\u3059\u308b\u3053\u3068\u3067\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u9ad8\u3081\u308b\u3068\u3044\u3046\u306e\u304c\u4e00\u3064\u306e\u72d9\u3044\u3067\u3059\u3002\\nTengo script \u306f\u57fa\u672c\u7684\u306b\u30c7\u30fc\u30bf\u306e\u6574\u5f62\u306a\u3069\u306b\u5f79\u5272\u3092\u9650\u5b9a\u3057\u3001\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u306b\u5207\u308a\u51fa\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3067\\n\u30c6\u30b9\u30c8\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\nbuildflow \u306b\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u3057\u3066\u306e\u5074\u9762\u304c\u3042\u308a\u3001\\nbuildflow \u306b\u4e57\u3063\u304b\u308b\u3053\u3068\u3067\u5171\u901a\u306e\u6a5f\u80fd\u306e\u5b9f\u88c5\u3092\u7701\u3044\u305f\u308a\u3001\u30b3\u30fc\u30c9\u3092\u9069\u5207\u306b\u5206\u5272\u3057\u3066\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u7dad\u6301\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3068\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u5c24\u3082\u3053\u3053\u306f\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u304c\u3042\u308b\u3067\u3057\u3087\u3046\u3002\\n\u4e0a\u8a18\u306e 3 \u3064\u3092\u884c\u304d\u6765\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u304f\u3066\u8f9b\u3044\u3068\u3044\u3046\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u3082\u3089\u3063\u305f\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\\n\u30b3\u30fc\u30c9\u5206\u5272\u306f\u5fc5\u9808\u3067\u306f\u306a\u3044\u306e\u3067 YAML \u306b\u30a4\u30f3\u30e9\u30a4\u30f3\u3067\u66f8\u304f\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u304c\u3001\u3042\u307e\u308a\u304a\u3059\u3059\u3081\u3057\u306a\u3044\u306e\u3068\u3001\\n\u305d\u3082\u305d\u3082\u4e0a\u8a18\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u306f\u30d5\u30a1\u30a4\u30eb\u306e\u884c\u304d\u6765\u3060\u3051\u3067\u306a\u304f\\n\\n* buildflow \u306e\u8a2d\u5b9a\\n* Tengo Script\\n* \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\\n\\n\u3068\u3044\u3046 3 \u3064\u306e\u7570\u306a\u308b\u8a00\u8a9e\u3092\u884c\u304d\u6765\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3082\u3042\u308b\u306e\u3067\u3057\u3087\u3046\u3002\\n\\n\u305d\u308c\u306f\u305d\u3046\u3044\u3046\u5074\u9762\u3082\u3042\u308b\u3067\u3057\u3087\u3046\u3002\\n\u3053\u308c\u306f buildflow \u306e\u6839\u672c\u7684\u306a\u90e8\u5206\u306a\u306e\u3067\u5909\u66f4\u3055\u308c\u308b\u3053\u3068\u306f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\u3082\u3057\u5909\u66f4\u3059\u308b\u3088\u3046\u306a\u3089\u591a\u5206\u5225\u306e\u30c4\u30fc\u30eb\u3068\u3057\u3066\u4f5c\u3063\u3066\u3044\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n## \u307e\u3068\u3081\\n\\nbuildflow \u306f\u81ea\u5206\u304c\u76f4\u9762\u3057\u3066\u3044\u308b CI/CD \u306e\u8ab2\u984c\\n\\n* \u5fc5\u8981\u306a\u51e6\u7406\u3060\u3051\u5b9f\u884c\u3057\u305f\u3044\\n* \u5171\u901a\u306e\u51e6\u7406\u3092\u9010\u4e00\u5b9f\u88c5\u3057\u305f\u304f\u306a\u3044\\n* \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u9ad8\u3081\u305f\u3044\\n\\n\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b\u4f5c\u308a\u307e\u3057\u305f\u3002\\n\\nbuildflow \u306f\u30ef\u30f3\u30d0\u30a4\u30ca\u30ea\u3067\u52d5\u304d\u307e\u3059\u3002\\n\u30b3\u30fc\u30c9\u3092\u9069\u5207\u306b\u5206\u96e2\u3057\u3001\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u8907\u96d1\u306a\u30ed\u30b8\u30c3\u30af\u3092\u9664\u53bb\u3059\u308b\u3053\u3068\u3067\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u9ad8\u3081\u308b\u3053\u3068\u3092\u76ee\u6307\u3057\u3066\u3044\u307e\u3059\u3002"},{"id":"/buildflow-result-output","metadata":{"permalink":"/buildflow-result-output","source":"@site/blog/buildflow-result-output.md","title":"buildflow \u306e\u5b9f\u884c\u7d50\u679c\u306e\u51fa\u529b\u5f62\u5f0f","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-10-17T23:36:09.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":2.1,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u306e\u5b9f\u884c\u7d50\u679c\u306e\u51fa\u529b\u5f62\u5f0f","date":"2020-10-17T23:36:09.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u306a\u305c buildflow \u3092\u4f5c\u3063\u305f\u306e\u304b","permalink":"/buildflow-goal"},"nextItem":{"title":"buildflow \u304c\u81ea\u52d5\u3067\u53d6\u5f97\u3059\u308b Pull Request \u306e\u60c5\u5831","permalink":"/buildflow-pr-info"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u306e\u5b9f\u884c\u7d50\u679c\u306e\u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306a\u3069\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n\u3061\u3087\u3063\u3068\u51fa\u529b\u306f\u308f\u304b\u308a\u306b\u304f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\u6539\u5584\u3057\u305f\u3044\u3068\u601d\u3044\u3064\u3064\u3001\u3069\u3046\u3042\u308b\u3079\u304d\u306a\u306e\u304b\u307e\u3060\u898b\u3048\u3066\u306a\u3044\u306e\u3067\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\ntask \u306e\u6a19\u6e96\u51fa\u529b\u3001\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\\n\u307e\u305f\u3001\u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u4e26\u5217\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\\n\u8907\u6570\u306e\u30bf\u30b9\u30af\u306e\u30ed\u30b0\u3092\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u51fa\u529b\u3059\u308b\u3068\u5f53\u7136\u6df7\u3058\u308b\u306e\u3067\u3001\u533a\u5225\u304c\u3064\u304f\u3088\u3046\u306b\u5404\u884c\u306e prefix \u306b `timestamp | task name | ` \u3092\u3064\u3051\u3066\u51fa\u529b\u3057\u307e\u3059\u3002\\n\u305d\u308c\u3067\u3082\u6df7\u3058\u308b\u3068\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3001 phase \u304c\u5b8c\u4e86\u5f8c\u306b\u3001 phase \u306e\u5168 task \u306e\u30ed\u30b0\u3092\u6df7\u3056\u3089\u306a\u3044\u3088\u3046\u306b\u305d\u308c\u305e\u308c\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u3057\u307e\u3059\u3002\\n\u3064\u307e\u308a\u540c\u3058\u30ed\u30b0\u304c 2 \u56de\u51fa\u529b\u3055\u308c\u307e\u3059\u304c 2 \u56de\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u3002\\n\\n```\\n==============\\n= Phase: phase \u540d =\\n==============\\n10:47:54UTC | task A | + /bin/sh -c echo hello # \u5b9f\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\\n10:47:54UTC | task B | + /bin/sh -c echo foo\\n10:47:54UTC | task A | hello # \u30b3\u30de\u30f3\u30c9\u306e\u6a19\u6e96(\u30a8\u30e9\u30fc)\u51fa\u529b\\n10:47:54UTC | task A | \\n... # \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u8907\u6570\u306e task \u306e\u30ed\u30b0\u304c\u6df7\u3056\u308b\u5834\u5408\u304c\u3042\u308b\\n\\n\\n================\\n= Phase Result: phase \u540d = # \u8a72\u5f53 phase \u306e\u5168 task \u5b8c\u4e86\u5f8c\u306b\u5168 task \u306e\u7d50\u679c\u3068\u6a19\u6e96(\u30a8\u30e9\u30fc)\u51fa\u529b\u3092\u51fa\u529b\u3059\u308b\\n================\\nstatus: succeeded\\ntask: task A\\nstatus: succeeded\\nexit code: 0\\nstart time: 2020-10-14T10:47:54Z\\nend time: 2020-10-14T10:47:54Z\\nduration: 4.818877ms\\n+ /bin/sh -c echo hello\\nhello\\n\\n...\\n```"},{"id":"/buildflow-pr-info","metadata":{"permalink":"/buildflow-pr-info","source":"@site/blog/buildflow-pr-info.md","title":"buildflow \u304c\u81ea\u52d5\u3067\u53d6\u5f97\u3059\u308b Pull Request \u306e\u60c5\u5831","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-10-17T23:13:48.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":3.6,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u304c\u81ea\u52d5\u3067\u53d6\u5f97\u3059\u308b Pull Request \u306e\u60c5\u5831","date":"2020-10-17T23:13:48.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u306e\u5b9f\u884c\u7d50\u679c\u306e\u51fa\u529b\u5f62\u5f0f","permalink":"/buildflow-result-output"},"nextItem":{"title":"buildflow \u3067\u306f\u306a\u305c Tengo \u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u304b","permalink":"/buildflow-why-tengo"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u304c\u81ea\u52d5\u3067 Pull Request (\u4ee5\u4e0b PR) \u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u304f\u308b\u6a5f\u80fd\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n\u3053\u306e\u6a5f\u80fd\u306f GitHub \u306e\u307f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002 GitLab \u3084 BitBucket \u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\n\u3053\u308c\u306f\u5358\u7d14\u306b\u81ea\u5206\u304c GitHub \u3057\u304b\u4f7f\u308f\u306a\u3044\u304b\u3089\u3067\u3059\u3002\\n\\nPR \u306e CI \u3067\u306f\\n\\n* \u5909\u66f4\u3055\u308c\u305f\u3082\u306e\u3060\u3051\u30c6\u30b9\u30c8\u3059\u308b\\n* \u7279\u5b9a\u306e PR \u30e9\u30d9\u30eb\u304c\u3064\u3044\u3066\u3044\u305f\u3089\u5b9f\u884c\u3059\u308b\\n* \u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u306e PR \u3060\u3051\u51e6\u7406\u3092\u5909\u3048\u308b(bot \u3068\u304b)\\n\\n\u306e\u3088\u3046\u306b PR \u306e\u60c5\u5831\u306b\u57fa\u3065\u3044\u3066\u6319\u52d5\u3092\u5909\u3048\u305f\u304f\u306a\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067 GitHub API \u53e9\u3044\u3066\u60c5\u5831\u3068\u3063\u3066\u304d\u3066 jq \u3067\u30d1\u30fc\u30b9\u3057\u3066\u3068\u304b\u3001\u9811\u5f35\u308c\u3070\u5225\u306b\u3067\u304d\u308b\u3093\u3067\u3059\u304c\u3001\\n\u6bce\u56de\u305d\u3046\u3044\u3046\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u305f\u304f\u306a\u3044\u306a\u3068\u611f\u3058\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n\u306a\u304a\u3001 PR \u306e\u60c5\u5831\u3092\u3068\u3063\u3066\u304f\u308b\u6a5f\u80fd\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u3059(GitHub Access Token \u5fc5\u8981\u3067\u3059\u3057\u306d)\u3002\\n\u8a2d\u5b9a\u3067 `pr: true` \u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\nPR \u306e\u60c5\u5831\u3092\u3068\u3063\u3066\u304f\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u60c5\u5831\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\\n* repository owner: \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067 `owner` \u3092\u8a2d\u5b9a\u3059\u308b\u304b\u3001\u81ea\u52d5\u53d6\u5f97\u3002 `owner` \u3092\u8a2d\u5b9a\u3057\u3066\u3042\u308b\u5834\u5408\u306f\u305d\u3061\u3089\u304c\u512a\u5148\u3055\u308c\u308b\\n* repository name: \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067 `repo` \u3092\u8a2d\u5b9a\u3059\u308b\u304b\u3001\u81ea\u52d5\u53d6\u5f97\u3002 `repo` \u3092\u8a2d\u5b9a\u3057\u3066\u3042\u308b\u5834\u5408\u306f\u305d\u3061\u3089\u304c\u512a\u5148\u3055\u308c\u308b\\n* pull request number: \u81ea\u52d5\u53d6\u5f97\\n* GitHub Access Token: \u74b0\u5883\u5909\u6570 `GITHUB_TOKEN` \u307e\u305f\u306f `GITHUB_ACCESS_TOKEN` \u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\\n\\n## \u53d6\u5f97\u3055\u308c\u308b\u60c5\u5831\\n\\n\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3084 Tengo script \u306b\u6e21\u3055\u308c\u307e\u3059\u3002\\n\\n* PR: PR \u306e\u60c5\u5831: [GitHub API](https://docs.github.com/en/free-pro-team@latest/rest/reference/pulls#get-a-pull-request) \u306e\u30ec\u30b9\u30dd\u30f3\u30b9 body\\n* Files: PR \u3067\u66f4\u65b0\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7: [GitHub API](https://docs.github.com/en/free-pro-team@latest/rest/reference/pulls#list-pull-requests-files) \u306e\u30ec\u30b9\u30dd\u30f3\u30b9 body\\n\\nFiles \u306b\u95a2\u3057\u3066\u306f\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u3055\u308c\u3066\u3044\u3066\u3082\u5168\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u53d6\u5f97\u3067\u304d\u308b\u307e\u3067\u7e70\u308a\u8fd4\u3057 API \u3092\u53e9\u3044\u3066\u3044\u307e\u3059\u3002\\n\\n## \u81ea\u52d5\u53d6\u5f97\u306e\u4ed5\u7d44\u307f\\n\\n\u5404\u7a2e CI \u30b5\u30fc\u30d3\u30b9\u306e\u7d44\u307f\u8fbc\u307f\u306e\u74b0\u5883\u5909\u6570\u304b\u3089\u305d\u308c\u3089\u306e\u60c5\u5831\u3092\u81ea\u52d5\u3067\u53d6\u5f97\u3057\u3066\u304f\u308c\u307e\u3059\u3002\\n\\n\u5185\u90e8\u7684\u306b\u306f go-ci-env \u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001 PR \u60c5\u5831\u306e\u81ea\u52d5\u53d6\u5f97\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b CI \u30b5\u30fc\u30d3\u30b9\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-ci-env#supported-ci-services\\n\\nPR \u756a\u53f7\u304c\u74b0\u5883\u5909\u6570\u304b\u3089\u53d6\u5f97\u3067\u304d\u306a\u3044\u5834\u5408\u3001 revision \u304b\u3089\u95a2\u9023\u3059\u308b PR \u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3057\u3001\u4e00\u756a\u6700\u521d\u306e PR \u3068\u307f\u306a\u3057\u307e\u3059\u3002\\n\u3053\u308c\u306f PR \u306e\u30de\u30fc\u30b8\u30b3\u30df\u30c3\u30c8\u306e CI \u3067\u306f\u30de\u30fc\u30b8\u3055\u308c\u305f PR \u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u3092\u610f\u56f3\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u95a2\u9023\u3059\u308b PR \u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u53d6\u5f97\u3055\u308c\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u304c `nil` \u306b\u306a\u308b\u3060\u3051\u3067\u3001 buildflow \u306f\u7570\u5e38\u7d42\u4e86\u3057\u305f\u308a\u305b\u305a\u306b\u51e6\u7406\u3092\u7d9a\u884c\u3057\u307e\u3059\u3002"},{"id":"/buildflow-why-tengo","metadata":{"permalink":"/buildflow-why-tengo","source":"@site/blog/buildflow-why-tengo.md","title":"buildflow \u3067\u306f\u306a\u305c Tengo \u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u304b","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-10-17T13:35:56.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":6.515,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u3067\u306f\u306a\u305c Tengo \u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u304b","date":"2020-10-17T13:35:56.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u304c\u81ea\u52d5\u3067\u53d6\u5f97\u3059\u308b Pull Request \u306e\u60c5\u5831","permalink":"/buildflow-pr-info"},"nextItem":{"title":"buildflow \u306e dynamic task","permalink":"/buildflow-dynamic-task"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u3067\u306a\u305c Tengo \u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u304b\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/d5/tengo\\n\\nTengo \u306b\u95a2\u3057\u3066\u306f https://techblog.szksh.cloud/buildflow-1/ \u3067\u3082\u591a\u5c11\u89e6\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n\u306a\u305c Tengo \u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u304b\u306b\u95a2\u3057\u3066\u306f\\n\\n* \u306a\u305c\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u304b\\n* \u306a\u305c\u4ed6\u306e\u8a00\u8a9e\u3067\u306f\u306a\u304f Tengo \u306a\u306e\u304b\\n\\n\u306e 2 \u3064\u306e\u89b3\u70b9\u3067\u8a71\u3057\u307e\u3059\u3002\\n\\n## \u306a\u305c\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u304b\\n\\n\u9006\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3092\u63a1\u7528\u3057\u306a\u3044\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001 YAML \u306a\u3069\u3067\u72ec\u81ea DSL \u306e\u3088\u3046\u306a\u3082\u306e\u3092\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\\nDSL \u3068\u8a00\u3046\u3068\u5927\u3052\u3055\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001 AND, OR, NOT \u3068\u3044\u3063\u305f\u8ad6\u7406\u3092 YAML \u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u8a18\u8ff0\u8a00\u8a9e\u3067\u8868\u73fe\u3057\u3088\u3046\u3068\u601d\u3046\u3068\u305d\u3093\u306a\u611f\u3058\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3053\u306e\u65b9\u6cd5\u306f\u6271\u3044\u305f\u3044\u30ed\u30b8\u30c3\u30af\u304c\u5358\u7d14\u306a\u3082\u306e\u306b\u9650\u3089\u308c\u308b\u306e\u3067\u3042\u308c\u3070\u554f\u984c\u306a\u3044\u3067\u3059\u304c\u3001\\n\u3088\u308a\u67d4\u8edf\u306a\u30ed\u30b8\u30c3\u30af\u3092\u8868\u73fe\u3057\u305f\u3044\u3068\u306a\u3063\u305f\u5834\u5408\u306b\u3001\u7121\u7406\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* \u3069\u3046\u3084\u3063\u3066\u8868\u73fe\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u81ea\u5206\u3067\u8003\u3048\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n  * \u3069\u3046\u9811\u5f35\u3063\u3066\u3082\u72ec\u81ea\u30eb\u30fc\u30eb\u306b\u306a\u308b\u305f\u3081\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u3068\u3063\u3066\u76f4\u611f\u7684\u3068\u306f\u8a00\u3048\u306a\u3044\\n* \u6b63\u3057\u304f\u5b9f\u88c5\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n* \u4ed5\u69d8\u3092\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5316\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n\\n\u4e00\u65b9\u3001 Go \u3067\u306f\u5e7e\u3064\u304b\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u304c\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u304a\u308a\u3001 buildflow \u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u306b\u7d44\u307f\u8fbc\u3080\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\nhttps://github.com/avelino/awesome-go#embeddable-scripting-languages\\n\\n\u3053\u308c\u3089\u3092\u6d3b\u7528\u3059\u308c\u3070\u4e0a\u8a18\u306e\u554f\u984c\u306f\u89e3\u6c7a\u3067\u304d\u308b\u3046\u3048\u306b\u3001\u975e\u5e38\u306b\u67d4\u8edf\u306b\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\u3067\u304d\u307e\u3059(\u52ff\u8ad6\u8a00\u8a9e\u306b\u3088\u308a\u307e\u3059\u304c)\u3002\\n\\n## \u306a\u305c\u4ed6\u306e\u8a00\u8a9e\u3067\u306f\u306a\u304f Tengo \u306a\u306e\u304b\\n\\n\u5358\u7d14\u306b https://github.com/avelino/awesome-go#embeddable-scripting-languages \u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4e2d\u3067\u4e00\u756a\u8981\u4ef6\u306b\u30de\u30c3\u30c1\u3057\u3066\u305d\u3046\u3060\u3063\u305f\u304b\u3089\u3067\u3059\u3002\\n\u3068\u3044\u3063\u3066\u3082\u5168\u3066\u3092\u3061\u3083\u3093\u3068\u30c1\u30a7\u30c3\u30af\u3057\u305f\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3002\\nLua \u3068\u304b\u3082\u3042\u308b\u306e\u3067\u305d\u308c\u3067\u3082\u826f\u304b\u3063\u305f\u304b\u3082\u3067\u3059\u304c\u3001\u81ea\u5206\u306f Lua \u3092\u5168\u7136\u77e5\u308a\u307e\u305b\u3093\u3002\\n\u3042\u3068\u3061\u3083\u3093\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u30cb\u30f3\u30b0\u3055\u308c\u3066\u3044\u305f\u306e\u3082\u7406\u7531\u306e\u4e00\u3064\u3067\u3059\u3002\\nTengo \u3088\u308a\u4eba\u6c17\u306e\u3042\u308b\u8a00\u8a9e\u3082\u3042\u308a\u307e\u3057\u305f\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u3066\u306a\u3044\u3068\u3044\u3046\u7406\u7531\u3067\u898b\u9001\u3063\u305f\u308a\u3057\u307e\u3057\u305f\u3002\\n\\n\u5b9f\u306f Tengo \u306e\u524d\u306b\u4ed6\u306e\u8a00\u8a9e [antonmedv/expr](https://github.com/antonmedv/expr) \u3092\u63a1\u7528\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u9014\u4e2d\u3067\u8868\u73fe\u529b\u304c\u8db3\u308a\u3066\u306a\u3044\u306e\u3067\u79fb\u884c\u3057\u307e\u3057\u305f\u3002\\ngithub-comment \u3067\u3082 antonmedv/expr \u306f\u4f7f\u3063\u3066\u307e\u3059\u3057\u3001\u4fbf\u5229\u3067\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001\\n\u5909\u6570\u304c\u5ba3\u8a00\u3067\u304d\u305a\u3001\u57fa\u672c\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3067\u66f8\u304f\u3057\u304b\u306a\u3044\u306e\u3067\u7121\u7406\u3060\u306a\u3068\u5224\u65ad\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/buildflow/issues/20\\n\\n## buildflow \u3067\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u306b\u6c42\u3081\u3066\u3044\u308b\u3082\u306e\\n\\nbuildflow \u306b\u304a\u3051\u308b Tengo \u306e\u7528\u9014\u306f\u3042\u304f\u307e\u3067\u30ed\u30b8\u30c3\u30af\u306e\u8a18\u8ff0\u3001\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u6271\u3044\u306b\u304f\u3044 map \u7b49\u306e\u64cd\u4f5c\u3067\u3059\u3002\\nTengo \u3067\u5916\u90e8\u30b3\u30de\u30f3\u30c9\u3092\u547c\u3073\u51fa\u3057\u305f\u308a\u3068\u304b\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u66f8\u304d\u3057\u305f\u308a\u3068\u304b\u305d\u3046\u3044\u3046\u3053\u3068\u306f\u8003\u3048\u3066\u3044\u307e\u305b\u3093\\n(\u3066\u3063\u304d\u308a\u305d\u3046\u3044\u3046\u3053\u3068\u304c\u51fa\u6765\u306a\u3044\u8a00\u8a9e\u306a\u306e\u304b\u3068\u5f53\u521d\u601d\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u306d)\u3002\\n\\nTengo \u306f Python \u3084 Ruby, Go \u3068\u3044\u3063\u305f\u8a00\u8a9e\u306b\u6bd4\u3079\u308c\u3070\u8a00\u8a9e\u4ed5\u69d8\u304c\u30b3\u30f3\u30d1\u30af\u30c8\u3067\u3042\u308a\u3001\\n\u3088\u304f\u77e5\u3089\u306a\u304f\u3066\u3082\u306a\u3093\u3068\u306a\u304f\u8aad\u3081\u308b\u3057\u3001\u7c21\u5358\u306b\u304b\u3051\u308b\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001 Tengo \u3067\u306f\u30c6\u30ad\u30b9\u30c8\u51e6\u7406\u306a\u3069\u306b\u4f7f\u3048\u308b\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059(\u3053\u308c\u304c\u306a\u3044\u3068\u8f9b\u304b\u3063\u305f\u3051\u3069\u3001\u3042\u308b\u306e\u3067\u5341\u5206)\u3002\\n\\n\u306a\u306e\u3067\u4eca\u306e\u6240 Tengo \u3067\u5341\u5206\u3060\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002 Tengo \u3088\u308a\u30ea\u30c3\u30c1\u306a\u8a00\u8a9e\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3082\u3001\u4eca\u306e\u6240\u3042\u307e\u308a\u79fb\u884c\u3059\u308b\u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n## Tengo \u306b\u95a2\u3059\u308b\u4e0d\u6e80\\n\\nTengo \u306b\u95a2\u3059\u308b\u4e0d\u6e80\u3092\u6319\u3052\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* \u3084\u306f\u308a\u8a8d\u77e5\u5ea6\u304c\u4f4e\u3044\\n* linter \u306a\u3069\u304c\u306a\u3044\\n* \u5404\u7a2e editor \u3067 syntax highlight \u304c\u306a\u3044(issue \u306f\u3042\u308b) https://github.com/d5/tengo/issues/146\\n\\n\u60c5\u5831\u304c\u5c11\u306a\u3044\u306e\u306b\u95a2\u3057\u3066\u306f\u3001\u8a00\u8a9e\u4ed5\u69d8\u304c\u30b7\u30f3\u30d7\u30eb\u306a\u306e\u3067\u500b\u4eba\u7684\u306b\u306f\u4eca\u306e\u6240\u56f0\u3063\u3066\u307e\u305b\u3093(\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u8aad\u3081\u3070\u5206\u304b\u308b\\n\\n## Tengo script \u306e\u5b9f\u884c\u3001 Test\\n\\n\u3088\u304f\u77e5\u3089\u306a\u3044\u8a00\u8a9e\u3067\u3042\u308c\u3070\u3001\u8a66\u3057\u306b\u5b9f\u884c\u3057\u3066\u307f\u305f\u308a\u3001\u3061\u3083\u3093\u3068\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u305f\u308a\u3057\u305f\u3044\u3067\u3059\u3088\u306d\u3002\\n\\n\u5b9f\u884c\u306b\u95a2\u3057\u3066\u306f\u516c\u5f0f\u306e\u65b9\u3067\u30c4\u30fc\u30eb\u304c\u3042\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n* https://tengolang.com/\\n* https://github.com/d5/tengo/blob/master/docs/tengo-cli.md\\n\\n\u30c6\u30b9\u30c8\u306b\u95a2\u3057\u3066\u306f\u7c21\u5358\u306a\u30c4\u30fc\u30eb\u3092\u5225\u306b\u4f5c\u308a\u307e\u3057\u305f https://github.com/suzuki-shunsuke/tengo-tester\\n\u5f93\u6765\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3053\u3046\u3044\u3046\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\u3057\u3066\u3082\u300c\u52d5\u3051\u3070\u3044\u3044\u300d\u7a0b\u5ea6\u306b\u8003\u3048\u3066\u3044\u3066\u30c6\u30b9\u30c8\u306f\u66f8\u304b\u306a\u3044\u3053\u3068\u304c\u591a\u304b\u3063\u305f\u3067\u3059\u304c\u3001\\n\u30ed\u30b8\u30c3\u30af\u3060\u3051\u3092 Tengo \u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u3057\u3066\u5207\u308a\u51fa\u3057\u3001\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\u3082\u7528\u610f\u3059\u308b\u3053\u3068\u3067\u3061\u3083\u3093\u3068\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3088\u3046\u306b\u306a\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\u3002"},{"id":"/buildflow-dynamic-task","metadata":{"permalink":"/buildflow-dynamic-task","source":"@site/blog/buildflow-dynamic-task.md","title":"buildflow \u306e dynamic task","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-10-17T12:29:51.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":2.5,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u306e dynamic task","date":"2020-10-17T12:29:51.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u3067\u306f\u306a\u305c Tengo \u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u304b","permalink":"/buildflow-why-tengo"},"nextItem":{"title":"buildflow \u306e task \u306e input, output \u3068\u3044\u3046\u6a5f\u80fd","permalink":"/buildflow-input-output"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u306e dynamic task \u3068\u3044\u3046\u6a5f\u80fd\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\ndynamic task \u3067\u306f task.items \u306e\u5024\u3067\u30eb\u30fc\u30d7\u3092\u56de\u3057\u3001\u8907\u6570\u306e task \u3092\u52d5\u7684\u306b\u751f\u6210\u3067\u304d\u307e\u3059\u3002\\n\u52ff\u8ad6 task.items \u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u306a\u306e\u3067\u3001\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u666e\u901a\u306e task \u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002\\ntask.items \u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u3001 map \u304b list \u304b\u3001\u305d\u308c\u3089\u3092\u8fd4\u3059 Tengo script \u3067\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\\n\\n```yaml\\n---\\nphases:\\n- name: main\\n  tasks:\\n  - name: \\"list {{.Item.Key}} {{.Item.Value.name}}\\"\\n    command:\\n      command: \\"echo {{.Item.Key}} {{.Item.Value.name}} {{.Item.Value.age}}\\"\\n    items:\\n    - name: foo\\n      age: 10\\n    - name: bar\\n      age: 20\\n```\\n\\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u306f dynamic task \u3092\u4f7f\u308f\u306a\u3044\u3068\u3053\u3046\u306a\u308a\u307e\u3059\u3002\\n\\n```yaml\\n---\\nphases:\\n- name: main\\n  tasks:\\n  - name: \\"list 0 foo\\"\\n    command:\\n      command: \\"echo 0 foo 10\\"\\n  - name: \\"list 1 bar\\"\\n    command:\\n      command: \\"echo 1 bar 20\\"\\n```\\n\\n\u30d1\u30e9\u30e1\u30fc\u30bf `Item` \u306f Key, Value \u3092\u6301\u3061\u3001 Items \u304c map \u306e\u5834\u5408\u3001\u305d\u308c\u305e\u308c map \u306e key, value \u304c\u6e21\u3055\u308c\u3001 list \u306e\u5834\u5408\u3001 index \u3068 value \u304c\u6e21\u3055\u308c\u307e\u3059\u3002\\n\\n\u4e0a\u8a18\u306e\u4f8b\u306f\u5358\u7d14\u3059\u304e\u3066\u30a4\u30de\u30a4\u30c1\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\\n\u4f8b\u3048\u3070\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306e\u4e00\u89a7\u3092\u8fd4\u3059\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u3092\u5143\u306b\\ndynamic task \u3067\u30d5\u30a1\u30a4\u30eb\u3054\u3068\u306b\u5225\u306e task \u3067\u4e26\u5217\u306b\u51e6\u7406\u3059\u308b\u3068\u304b\u304c\u8003\u3048\u3089\u308c\u305d\u3046\u3067\u3059\u3002\\n\\n## \u5236\u7d04\\n\\ntask.items \u306f phase \u306e\u6700\u521d\u306b\u8a55\u4fa1\u3055\u308c\u307e\u3059\u3002\\n\u3064\u307e\u308a\u540c\u3058 phase \u306e task \u306e\u7d50\u679c\u3092\u53c2\u7167\u3057\u305f\u308a\u51fa\u6765\u307e\u305b\u3093\u3002\\n\\n\u3053\u308c\u306f task.dependency \u306e\u8a55\u4fa1\u6642\u306b\u3001 task \u306e\u30ea\u30b9\u30c8\u304c\u5b9a\u307e\u3063\u3066\u3044\u306a\u3044\u3068\u8a55\u4fa1\u3067\u304d\u306a\u3044\u305f\u3081\u3067\u3059\u3002\\n\\n\u305f\u3060\u3057\u3001\u524d\u306e phase \u53ca\u3073 phase \u306e task \u306e\u5b9f\u884c\u7d50\u679c\u306f\u53c2\u7167\u3067\u304d\u308b\u305f\u3081\u3001 items \u3067\u7279\u5b9a\u306e task \u306e\u5b9f\u884c\u7d50\u679c\u3092\u53c2\u7167\u3057\u305f\u3044\u5834\u5408\u306f\u3001phase \u3092\u5206\u3051\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n\u5b9f\u306f dynamic task \u3092\u5b9f\u73fe\u3059\u308b\u4e0a\u3067\u4e0a\u8a18\u306e\u554f\u984c\u3092\u30af\u30ea\u30a2\u3059\u308b\u305f\u3081\u306b phase \u3068\u3044\u3046\u6982\u5ff5\u3092\u5c0e\u5165\u3057\u305f\u3068\u3044\u3046\u7d4c\u7def\u304c\u3042\u3063\u305f\u308a\u307e\u3059\u3002"},{"id":"/buildflow-input-output","metadata":{"permalink":"/buildflow-input-output","source":"@site/blog/buildflow-input-output.md","title":"buildflow \u306e task \u306e input, output \u3068\u3044\u3046\u6a5f\u80fd","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002","date":"2020-10-17T12:05:41.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":1.55,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u306e task \u306e input, output \u3068\u3044\u3046\u6a5f\u80fd","date":"2020-10-17T12:05:41.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u306e dynamic task","permalink":"/buildflow-dynamic-task"},"nextItem":{"title":"buildflow \u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3059\u308b","permalink":"/buildflow-split-files"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u304d\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u306e task \u306e input, output \u3068\u3044\u3046\u6a5f\u80fd\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\ntask \u306e input, output \u306f Tengo script \u3067 task \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6574\u5f62\u3059\u308b\u6a5f\u80fd\u3067\u3059\u3002\\n\\ntask \u306e command.command \u3084 write_file.template \u306a\u3069\u3001\u5e7e\u3064\u304b\u306e\u8a2d\u5b9a\u3067\u306f Go \u306e text/template \u304c\u4f7f\u3048\u307e\u3059\u304c\u3001 text/template \u306f\u8907\u96d1\u306a\u30ed\u30b8\u30c3\u30af\u3092\u8a18\u8ff0\u3057\u305f\u308a\u3059\u308b\u306e\u306b\u306f\u5411\u3044\u3066\u3044\u307e\u305b\u3093\u3002\\n\u305d\u3053\u3067 task \u306e input \u3067 Tengo script \u3092\u4f7f\u3063\u3066\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306e\u6574\u5f62\u3092\u884c\u3046\u3053\u3068\u3067\u3001\\ntemplate \u306f\u6bd4\u8f03\u7684\u304d\u308c\u3044\u306a\u72b6\u614b\u306b\u4fdd\u3064\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\n\u3053\u308c\u306f MVC \u30e2\u30c7\u30eb\u3067 View \u3068\u30ed\u30b8\u30c3\u30af\u3092\u5206\u96e2\u3059\u308b\u307f\u305f\u3044\u306a\u8003\u3048\u65b9\u3068\u4f3c\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\noutput \u3067\u306f\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u3092\u6574\u5f62\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\u4f8b\u3048\u3070\u30b3\u30de\u30f3\u30c9\u306e\u6a19\u6e96\u51fa\u529b\u3092\u30e6\u30cb\u30fc\u30af\u306a\u6587\u5b57\u5217\u306e\u30ea\u30b9\u30c8\u306b\u3057\u305f\u308a\u51fa\u6765\u307e\u3059\u3002\\n\\ntask.input \u306f task.when \u304c\u8a55\u4fa1\u3055\u308c\u305f\u3042\u3068\u3001 task \u306e command \u306a\u3069\u304c\u5b9f\u884c\u3055\u308c\u308b\u524d\u306b\u8a55\u4fa1\u3055\u308c\u307e\u3059\u3002\\n\u3064\u307e\u308a\u3001 task.when \u3084 task.dependency \u3067\u540c\u3058 task \u306e input \u306e\u7d50\u679c\u3092\u53c2\u7167\u306f\u51fa\u6765\u307e\u305b\u3093\u3002"},{"id":"/buildflow-split-files","metadata":{"permalink":"/buildflow-split-files","source":"@site/blog/buildflow-split-files.md","title":"buildflow \u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3059\u308b","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002","date":"2020-10-17T11:49:28.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":1.92,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3059\u308b","date":"2020-10-17T11:49:28.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u306e task \u306e input, output \u3068\u3044\u3046\u6a5f\u80fd","permalink":"/buildflow-input-output"},"nextItem":{"title":"buildflow \u306e script \u3084 template \u306b\u6e21\u3055\u308c\u308b parameter","permalink":"/buildflow-parameter"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\nbuildflow \u3067\u306f\u4e00\u90e8\u306e\u8a2d\u5b9a\u9805\u76ee\u306b\u3064\u3044\u3066\u4ed6\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u3066\u8aad\u307f\u8fbc\u3080\u3068\u3044\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n1 \u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u5168\u90e8\u306e\u8a2d\u5b9a\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u3001\u30d5\u30a1\u30a4\u30eb\u304c\u5927\u304d\u304f\u306a\u3063\u3066\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u304c\u60aa\u304f\u306a\u3063\u305f\u308a\u3001\\n\u30b3\u30fc\u30c9\u30aa\u30fc\u30ca\u30fc\u304c\u66d6\u6627\u306b\u306a\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u305d\u3046\u3044\u3046\u5834\u5408\u306f\u5206\u5272\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\u30b3\u30fc\u30c9\u30aa\u30fc\u30ca\u30fc\u304c\u7570\u306a\u308b\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u5171\u901a\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u3044\u308b\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3057\u3066\\nGitHub \u306e CODEOWNERS \u3092\u8a2d\u5b9a\u3059\u308b\u306e\u3082\u3088\u3044\u3067\u3057\u3087\u3046\u3002\\n\u3042\u307e\u308a\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3059\u308b\u3068\u540c\u3058\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u518d\u5229\u7528\u3082\u51fa\u6765\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001 Tengo script \u3092\u72ec\u7acb\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u5206\u5272\u3059\u308b\u3068\u3001 test \u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\\nTengo script \u3092\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3068\u3057\u3066 [tengo-tester](https://github.com/suzuki-shunsuke/tengo-tester) \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3082\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044\u3002\\n\\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u306e\u8a2d\u5b9a\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* phase.import\\n* task.import:\\n* task.input_file\\n* task.output_file\\n* task.when_file\\n* command.command_file\\n* command.env[].value_file\\n* write_file.template_file\\n\\n\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u306f\u3001\u7d76\u5bfe\u30d1\u30b9\u304b\u3001\u5b9f\u884c\u4e2d\u306e build \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u306e\u76f8\u5bfe\u30d1\u30b9\u306b\u306a\u308a\u307e\u3059\u3002"},{"id":"/buildflow-parameter","metadata":{"permalink":"/buildflow-parameter","source":"@site/blog/buildflow-parameter.md","title":"buildflow \u306e script \u3084 template \u306b\u6e21\u3055\u308c\u308b parameter","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002","date":"2020-10-17T10:44:39.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":2.34,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u306e script \u3084 template \u306b\u6e21\u3055\u308c\u308b parameter","date":"2020-10-17T10:44:39.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3059\u308b","permalink":"/buildflow-split-files"},"nextItem":{"title":"buildflow \u306e task \u306e\u8a2d\u5b9a\u9805\u76ee","permalink":"/buildflow-task"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u306e Tengo script \u3084\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u5909\u6570\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nbuildflow \u3067\u306f Tengo script \u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u4f7f\u3048\u308b\u8a2d\u5b9a\u9805\u76ee\u304c\u591a\u304f\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u3089\u306e\u8a2d\u5b9a\u306b\u306f\u5171\u901a\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u6e21\u3055\u308c\u307e\u3059\u3002\\n\\n* PR: Pull Request \u306e\u60c5\u5831: [GitHub API](https://docs.github.com/en/free-pro-team@latest/rest/reference/pulls#get-a-pull-request) \u306e\u30ec\u30b9\u30dd\u30f3\u30b9 body\\n* Files: Pull Request \u3067\u66f4\u65b0\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7: [GitHub API](https://docs.github.com/en/free-pro-team@latest/rest/reference/pulls#list-pull-requests-files) \u306e\u30ec\u30b9\u30dd\u30f3\u30b9 body\\n* Phases: \u5bfe\u8c61\u306e Phase \u3088\u308a\u3082\u524d\u306e Phase \u306e\u7d50\u679c\\n* Phase: \u5bfe\u8c61\u306e Phase\\n* Tasks: \u5bfe\u8c61\u306e Phase \u306e Task \u306e\u7d50\u679c\\n* Task: \u5bfe\u8c61\u306e Task\\n* Item: dynamic task \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\\n* Meta: \u8a2d\u5b9a meta\\n\\nPhase\\n\\n* Status: Phase \u306e\u5b9f\u884c\u7d50\u679c\\n  * succeeded\\n  * failed\\n  * skipped\\n* Tasks: Phase \u306e task \u306e\u5b9f\u884c\u7d50\u679c\\n* Meta: phase \u306e \u8a2d\u5b9a meta\\n\\nTask\\n\\ntype \u306b\u3088\u3089\u305a\u5171\u901a\\n\\n* Type: task \u306e type\\n* Name: task \u540d\\n* Status: Task \u306e\u5b9f\u884c\u7d50\u679c\\n  * queue\\n  * running\\n  * succeeded\\n  * failed\\n  * skipped\\n* Meta: task \u306e meta \u306e\u8a2d\u5b9a\\n* Input:\\n* Output:\\n\\ncommand\\n\\n* ExitCode\\n* StdOut\\n* StdErr\\n* CombinedOutput\\n\\nread_file\\n\\n* File\\n  * Text: \u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\\n  * Data: read_file \u306e format \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3001\u30d1\u30fc\u30b9\u3055\u308c\u305f\u7d50\u679c\\n\\nwrite_file\\n\\n* File\\n  * Text: \u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\\n\\n## Template \u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53c2\u7167\u3059\u308b\\n\\n\u4f8b\u3048\u3070 command \u306e\u5834\u5408\\n\\n```yaml\\n---\\nphases:\\n- name: main\\n  tasks:\\n  - name: hello\\n    command:\\n      command: \'echo \\"{{.Task.Name}}\\"\'\\n```\\n\\n## Tengo script \u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53c2\u7167\u3059\u308b\\n\\n\u4f8b\u3048\u3070 task foo \u304c\u6210\u529f\u3057\u305f\u5834\u5408\u306e\u307f\u3001 task bar \u3092\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\\n\\n```yaml\\n---\\nphases:\\n- name: main\\n  tasks:\\n  - name: foo\\n    command:\\n      command: echo hello\\n  - name: bar\\n    command:\\n      command: echo hello\\n    dependency:\\n    - foo\\n    when: |\\n      task := {}\\n      for t in Tasks {\\n        if t.Name == \\"foo\\" {\\n          task = t\\n          break\\n        }\\n      }\\n      result := task.Status == \\"succeeded\\"\\n```\\n\\n\u3053\u306e\u3088\u3046\u306b\u4ed6\u306e task \u306e\u5b9f\u884c\u7d50\u679c\u3084 PR \u306e\u60c5\u5831\u306a\u3069\u3092\u4f7f\u3063\u3066\u30d3\u30eb\u30c9\u306e\u6319\u52d5\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002"},{"id":"/buildflow-task","metadata":{"permalink":"/buildflow-task","source":"@site/blog/buildflow-task.md","title":"buildflow \u306e task \u306e\u8a2d\u5b9a\u9805\u76ee","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002","date":"2020-10-17T09:26:57.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":2.73,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u306e task \u306e\u8a2d\u5b9a\u9805\u76ee","date":"2020-10-17T09:26:57.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u306e script \u3084 template \u306b\u6e21\u3055\u308c\u308b parameter","permalink":"/buildflow-parameter"},"nextItem":{"title":"buildflow \u306e build, phase, task \u306b\u3064\u3044\u3066","permalink":"/buildflow-build-phase-task"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u306e task \u306e\u57fa\u672c\u7684\u306a\u8a2d\u5b9a\u9805\u76ee\u306a\u3069\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\u6570\u304c\u591a\u3044\u306e\u3067\u3001\u500b\u3005\u306e\u8a2d\u5b9a\u306e\u8a73\u7d30\u306f\u307e\u305f\u5225\u306e\u8a18\u4e8b\u306b\u66f8\u304d\u307e\u3059\u3002\\n\\ntask \u306b\u306f\u5e7e\u3064\u304b type \u304c\u3042\u308a\u307e\u3059\u304c\u3001\u5168\u3066\u306e type \u306b\u5171\u901a\u3059\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n* name: task \u540d\u3002 unique \u3067\u3042\u308b\u5fc5\u8981\u306f\u306a\u3044\u3002 Go \u306e text/template \u304c\u4f7f\u3048\u308b\\n* when: task \u3092\u5b9f\u884c\u3059\u308b\u304b\u5426\u304b\u3002 \u771f\u507d\u5024\u304b Tengo script\\n  * when_file \u3067\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u308b\\n* dependency: task \u306e\u4f9d\u5b58\u95a2\u4fc2\u306e\u5b9a\u7fa9\u3002 task \u540d\u306e\u30ea\u30b9\u30c8\u304b\u3001 Tengo script\\n* items: dynamic task \u306e\u8a2d\u5b9a\u3002 loop \u3092\u4f7f\u3063\u3066\u8907\u6570\u306e task \u3092\u52d5\u7684\u306b\u751f\u6210\u3067\u304d\u308b\\n  * \u4efb\u610f\u306e list \u304b map \u304b\u3001 Tengo script\\n* input: Tengo script \u3067 task \u306e\u30b3\u30de\u30f3\u30c9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u751f\u6210\u3067\u304d\u308b\\n  * input_file \u3067\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u308b\\n* output: Tengo script \u3067 task \u306e\u5b9f\u884c\u7d50\u679c\u3092\u6574\u5f62\u3067\u304d\u308b\u3002\u4ed6\u306e task \u304c\u53c2\u7167\u3057\u3066\u6319\u52d5\u3092\u5909\u3048\u305f\u308a\u3067\u304d\u308b\\n  * output_file \u3067\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u308b\\n* meta: \u30e6\u30fc\u30b6\u30fc\u304c\u81ea\u7531\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5b9a\u7fa9\u3067\u304d\u308b map\\n\\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u306f name \u4ee5\u5916\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\\n\\ntask \u306e type \u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* command: \u5916\u90e8\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\\n* read_file: \u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u3002\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u4ed6\u306e task \u3067\u53c2\u7167\u3067\u304d\u308b\\n* write_file: \u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u8fbc\u3080\\n\\ncommand \u306e\u8a2d\u5b9a\\n\\n* shell, shell_opts: \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u30b7\u30a7\u30eb\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f `/bin/sh -c`\\n* command: \u30b3\u30de\u30f3\u30c9\u3002 Go \u306e text/template \u3067\u51e6\u7406\u3055\u308c\u308b\\n  * command_file \u3067\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u308b\\n* stdin: \u30b3\u30de\u30f3\u30c9\u306e\u6a19\u6e96\u5165\u529b\u3002 Go \u306e text/template \u3067\u51e6\u7406\u3055\u308c\u308b\\n  * stdin_file \u3067\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u308b\\n* env: \u74b0\u5883\u5909\u6570\u3002\u74b0\u5883\u5909\u6570\u540d\u3068\u5024\u306f Go \u306e text/template \u3067\u51e6\u7406\u3055\u308c\u308b\\n\\nread_file \u306e\u8a2d\u5b9a\\n\\n* path: \u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3002Go \u306e text/template \u3067\u51e6\u7406\u3055\u308c\u308b\\n* format: \u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3002\u30aa\u30d7\u30b7\u30e7\u30f3\u3002 json \u3068 yaml \u3092\u30b5\u30dd\u30fc\u30c8\u3002\u6307\u5b9a\u3059\u308b\u3068\u30d1\u30fc\u30b9\u3057\u305f\u7d50\u679c\u3092\u4ed6\u306e task \u304c\u53c2\u7167\u3067\u304d\u308b\\n\\nwrite_file \u306e\u8a2d\u5b9a\\n\\n* path: \u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3002Go \u306e text/template \u3067\u51e6\u7406\u3055\u308c\u308b\\n* template: \u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3002Go \u306e text/template \u3067\u51e6\u7406\u3055\u308c\u308b\\n  * template_file \u3067\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u308b"},{"id":"/buildflow-build-phase-task","metadata":{"permalink":"/buildflow-build-phase-task","source":"@site/blog/buildflow-build-phase-task.md","title":"buildflow \u306e build, phase, task \u306b\u3064\u3044\u3066","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002","date":"2020-10-17T09:09:19.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":2.065,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u306e build, phase, task \u306b\u3064\u3044\u3066","date":"2020-10-17T09:09:19.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u306e task \u306e\u8a2d\u5b9a\u9805\u76ee","permalink":"/buildflow-task"},"nextItem":{"title":"buildflow \u3067\u306e Tengo \u306e\u4f7f\u3044\u65b9","permalink":"/buildflow-tengo"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u306e\u6982\u5ff5\u3067\u3042\u308b build, phase, task \u306b\u3064\u3044\u3066\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nbuildflow \u306b\u306f Build, Phase, Task \u3068\u3044\u3046\u6982\u5ff5\u304c\u3042\u308a\u307e\u3059\u3002\\nCircleCI \u306e Pipeline, Workflow, Job \u307f\u305f\u3044\u306a\u3082\u306e\u3068\u601d\u3063\u3066\u3082\u3089\u3048\u308b\u3068\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n```\\n$ buildflow run\\n```\\n\\n\u3067 1 \u3064\u306e build \u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\nbuild \u306f\u8907\u6570\u306e phase \u304b\u3089\u306a\u308a\u3001 phase \u304c 1 \u3064\u305a\u3064\u9806\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\nphase \u306f\u8907\u6570\u306e task \u304b\u3089\u306a\u308a\u3001 task \u304c\u5168\u3066\u7d42\u4e86\u3059\u308b\u3068\u3001\u305d\u306e phase \u3082\u7d42\u4e86\u3068\u306a\u308a\u307e\u3059\u3002\\ntask \u306f\u4e26\u5217\u306b\u5b9f\u884c\u3057\u305f\u308a\u3001\u4f9d\u5b58\u95a2\u4fc2\u3092\u5b9a\u7fa9\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\\ntask \u3067\u306f\u5916\u90e8\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u306f phases, tasks \u3092\u305d\u308c\u305e\u308c\u914d\u5217\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\\n\\n```yaml\\n---\\nphases:\\n- name: setup\\n  tasks:\\n  - name: hello\\n    command:\\n      command: echo hello\\n  - name: foo\\n    command:\\n      command: echo foo\\n- name: build\\n  tasks:\\n  - name: hello\\n    command:\\n      command: echo hello\\n  - name: foo\\n    command:\\n      command: echo foo\\n    dependency:\\n    - hello\\n- name: post build\\n  tasks:\\n  - name: hello\\n    command:\\n      command: echo hello\\n```\\n\\n\u4e0a\u306e\u4f8b\u3067\u306f 3 \u3064\u306e phase setup, build, post build \u304c\u9806\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3069\u308c\u304b\u306e phase \u304c\u5931\u6557\u3059\u308b\u3068\u305d\u308c\u4ee5\u964d\u306e phase \u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093(\u3053\u306e\u6319\u52d5\u306f\u5909\u3048\u3089\u308c\u307e\u3059)\u3002\\n\\ntask \u3082 phase \u540c\u69d8\u914d\u5217\u3067\u6307\u5b9a\u3057\u307e\u3059\u304c\u3001\u914d\u5217\u306e\u9806\u5e8f\u306b\u610f\u5473\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\u4f9d\u5b58\u95a2\u4fc2\u304c\u306a\u3044\u9650\u308a\u3001\u4e26\u5217\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3057\u3001\u5b9f\u884c\u9806\u5e8f\u306f\u4e0d\u5b9a\u3067\u3059\u3002"},{"id":"/buildflow-tengo","metadata":{"permalink":"/buildflow-tengo","source":"@site/blog/buildflow-tengo.md","title":"buildflow \u3067\u306e Tengo \u306e\u4f7f\u3044\u65b9","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 buildflow \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002","date":"2020-10-17T08:18:34.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":1.36,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u3067\u306e Tengo \u306e\u4f7f\u3044\u65b9","date":"2020-10-17T08:18:34.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u306e build, phase, task \u306b\u3064\u3044\u3066","permalink":"/buildflow-build-phase-task"},"nextItem":{"title":"buildflow \u3068\u3044\u3046\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u30a8\u30f3\u30b8\u30f3\u306e\u3088\u3046\u306a\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u3066\u3044\u308b","permalink":"/buildflow-1"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067 `buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3053\u306e\u8a18\u4e8b\u3067\u306f buildflow \u3067 Tengo \u3068\u3044\u3046\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3092\u3069\u306e\u3088\u3046\u306b\u4f7f\u3063\u3066\u3044\u308b\u304b\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/d5/tengo\\n\\nbuildflow \u306e\u8a2d\u5b9a\u3067\u306f task.when \u3084 task.dependency, task.input \u306a\u3069\u3067 Tengo script \u304c\u4f7f\u3048\u307e\u3059\u304c\u3001\\n1 \u3064\u306e\u5171\u901a\u306e\u30eb\u30fc\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\\n`result` \u3068\u3044\u3046\u5909\u6570\u3092\u5ba3\u8a00\u3057\u3001 script \u306e\u5b9f\u884c\u7d50\u679c\u3092\u305d\u306e\u5909\u6570\u306b\u6301\u305f\u305b\u308b\u3068\u3044\u3046\u30eb\u30fc\u30eb\u3067\u3059\u3002\\n\u3053\u308c\u306f Tengo \u306e\u4ed5\u69d8\u3068\u304b\u3067\u306f\u306a\u304f\u3001 buildflow \u7279\u6709\u306e\u30eb\u30fc\u30eb\u3067\u3059\u3002\\n\u3082\u3063\u3068\u3082\u5358\u7d14\u306a\u4f8b\u3060\u3068\u6b21\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\\n\\n```\\nresult := true\\n```\\n\\ntask.input, output \u306a\u3069\u3060\u3068 result \u306e\u5024\u304c Task.Input, Task.Output \u3068\u3057\u3066\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```yaml\\n---\\nphases:\\n- name: main\\n  tasks:\\n  - name: hello\\n    input: |\\n      result := {\\n        foo: \\"bar\\"\\n      }\\n    command:\\n      command: \'echo \\"{{.Task.Input.foo}}\\"\'\\n    when: \\"result := true\\"\\n```\\n\\n## Tengo \u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\\n\\nTengo \u306b\u306f[\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea](https://github.com/d5/tengo/blob/master/docs/stdlib.md)\u304c\u3042\u308a\u307e\u3059\u3002 \\nbuildflow \u3067\u306f\u5168\u3066\u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u4f7f\u3048\u307e\u3059\u3002"},{"id":"/buildflow-1","metadata":{"permalink":"/buildflow-1","source":"@site/blog/buildflow-1.md","title":"buildflow \u3068\u3044\u3046\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u30a8\u30f3\u30b8\u30f3\u306e\u3088\u3046\u306a\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u3066\u3044\u308b","description":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2020-10-17T07:06:31.000Z","formattedDate":"October 17, 2020","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"buildflow","permalink":"/tags/buildflow"}],"readingTime":4.995,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"buildflow \u3068\u3044\u3046\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u30a8\u30f3\u30b8\u30f3\u306e\u3088\u3046\u306a\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u3066\u3044\u308b","date":"2020-10-17T07:06:31.000Z","tags":["oss","buildflow"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u3067\u306e Tengo \u306e\u4f7f\u3044\u65b9","permalink":"/buildflow-tengo"},"nextItem":{"title":"tfnotify \u306e parse error \u3092\u901a\u77e5\u3059\u308b","permalink":"/post-tfnotify-parse-error"}},"content":"buildflow \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n`buildflow` \u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u30d6\u30ed\u30b0\u3092\u66f8\u3053\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n1\u672c\u76ee\u306e\u3053\u306e\u8a18\u4e8b\u3067\u306f\\n\\n* \u3069\u3093\u306a\u30c4\u30fc\u30eb\u304b\\n* Hello World\\n* \u7279\u5fb4\\n\\n\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n## \u3069\u3093\u306a\u30c4\u30fc\u30eb\u304b\\n\\nhttps://github.com/suzuki-shunsuke/buildflow\\n\\n\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e CLI \u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u30a8\u30f3\u30b8\u30f3\u3068\u8a00\u3046\u3068 Airflow \u3068\u304b Azkaban, Argo Workflows \u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3092\u30a4\u30e1\u30fc\u30b8\u3059\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\\n\u305d\u308c\u3089\u3068\u306f\u76ee\u7684\u3082\u6a5f\u80fd\u3082\u9055\u3044\u307e\u3059\u3002\\n\u4e00\u90e8\u306e CI \u30b5\u30fc\u30d3\u30b9\u3067\u306f\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306e\u30ed\u30fc\u30ab\u30eb\u5b9f\u884c\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u305f\u308a\u3057\u307e\u3059\u304c\u3001\u305d\u3093\u306a\u30a4\u30e1\u30fc\u30b8\u3067\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\nbuildflow \u3067\u306f task \u3068 task \u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5b9a\u7fa9\u3057\u3001\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u30ed\u30fc\u30ab\u30eb\u3067\u30bf\u30b9\u30af\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\n\u305d\u3046\u3044\u3046\u3068\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u3068\u3044\u3063\u305f\u307b\u3046\u304c\u3044\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u500b\u5225\u306e\u30bf\u30b9\u30af\u3092\u6307\u5b9a\u3057\u3066\u5b9f\u884c\u3059\u308b\u3088\u3046\u306a\u6a5f\u80fd\u306f\u306a\u3044\u306e\u3067\u3001\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u3068\u3082\u9055\u3046\u6c17\u304c\u3057\u307e\u3059\u3002\\n\\nCI \u30b5\u30fc\u30d3\u30b9\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u3066\u958b\u767a\u3057\u3066\u3044\u307e\u3059(\u6c4e\u7528\u7684\u306a\u30c4\u30fc\u30eb\u306a\u306e\u3067\u4ed6\u306e\u76ee\u7684\u3067\u3082\u4f7f\u3048\u308b\u3068\u306f\u601d\u3044\u307e\u3059)\u3002\\n\\n## Hello World\\n\\n\u307e\u3060\u3069\u3093\u306a\u30c4\u30fc\u30eb\u304b\u30d4\u30f3\u3068\u6765\u3066\u306a\u3044\u4eba\u3082\u3044\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u7c21\u5358\u306a Hello World \u3092\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n[GitHub Releases](https://github.com/suzuki-shunsuke/buildflow/releases) \u304b\u3089\u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u6b21\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb `.buildflow.yaml` \u3092\u7528\u610f\u3057\u307e\u3059\u3002\\n\\n```yaml\\n---\\nphases:\\n- name: main\\n  tasks:\\n  - name: hello\\n    command:\\n      command: echo hello\\n```\\n\\n\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068 task \u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\n\\n```\\n$ buildflow run\\n\\n==============\\n= Phase: main =\\n==============\\n07:50:46UTC | hello | + /bin/sh -c echo hello\\n07:50:46UTC | hello |\\n07:50:46UTC | hello | hello\\n07:50:46UTC | hello |\\n\\n================\\n= Phase Result: main =\\n================\\nstatus: succeeded\\ntask: hello\\nstatus: succeeded\\nexit code: 0\\nstart time: 2020-10-17T07:50:46Z\\nend time: 2020-10-17T07:50:46Z\\nduration: 4.317259ms\\n+ /bin/sh -c echo hello\\nhello\\n```\\n\\n## \u7279\u5fb4\\n\\ntask \u3092\u4f9d\u5b58\u95a2\u4fc2\u306b\u57fa\u3065\u3044\u3066\u4e26\u5217\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\u52a0\u3048\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* \u30ef\u30f3\u30d0\u30a4\u30ca\u30ea\u3067\u52d5\u304f\u3002\u4ed6\u306b\u4f9d\u5b58\u3059\u308b\u3082\u306e\u304c\u306a\u3044\\n  * Go \u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\\n* \u4ed6\u306e\u30bf\u30b9\u30af\u306e\u5b9f\u884c\u7d50\u679c\u306b\u3088\u3063\u3066\u30bf\u30b9\u30af\u306e\u6319\u52d5\u3092\u5909\u3048\u3089\u308c\u308b\\n  * \u6a19\u6e96(\u30a8\u30e9\u30fc)\u51fa\u529b\u3001 exit code, etc\\n  * dynamic \u306b task \u3092\u751f\u6210\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\\n* Tengo \u3068\u3044\u3046\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3092\u7528\u3044\u3066\u67d4\u8edf\u306a\u8a2d\u5b9a\u3092\u66f8\u3051\u308b\\n  * \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f YAML \u3067\u3059\u304c\u3001\u4e00\u90e8\u306e\u8a2d\u5b9a\u306b Tengo \u3068\u3044\u3046\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u304c\u4f7f\u3048\u307e\u3059\\n  * Tengo \u306e\u51e6\u7406\u7cfb\u3082 buildflow \u306b\u5185\u5305\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001 Tengo \u306e\u51e6\u7406\u7cfb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\\n* CI \u3067\u5b9f\u884c\u6642\u306b Pull Request (\u4ee5\u4e0b PR) \u306e\u60c5\u5831\u306b\u57fa\u3065\u3044\u3066\u51e6\u7406\u3092\u5909\u3048\u3089\u308c\u308b\\n  * GitHub \u524d\u63d0(GitLab \u3084 BitBucket \u306f\u30b5\u30dd\u30fc\u30c8\u5916)\\n  * \u81ea\u52d5\u3067 PR \u306e\u60c5\u5831\u3092\u53d6\u5f97\\n\\nTengo \u306f Go \u3067\u5b9f\u884c\u3055\u308c\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3067\u3059\u3002 https://github.com/d5/tengo \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\u306a\u305c Tengo \u3092\u63a1\u7528\u3057\u305f\u304b\u3068\u304b\u306f\u5225\u306b\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nTengo \u306f Python \u3084 Ruby, Go \u3068\u3044\u3063\u305f\u8a00\u8a9e\u306b\u6bd4\u3079\u308c\u3070\u8a00\u8a9e\u4ed5\u69d8\u304c\u30b3\u30f3\u30d1\u30af\u30c8\u3067\u3042\u308a\u3001\\n\u3088\u304f\u77e5\u3089\u306a\u304f\u3066\u3082\u306a\u3093\u3068\u306a\u304f\u8aad\u3081\u308b\u3057\u3001\u7c21\u5358\u306b\u304b\u3051\u308b\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\u52a0\u3048\u3066\u3001\u305d\u3082\u305d\u3082 buildflow \u306e\u4e2d\u3067\u306e Tengo \u306e\u5f79\u5272\u306f\u9650\u5b9a\u3055\u308c\u3066\u304a\u308a\u3001 Tengo \u3092\u30b4\u30ea\u30b4\u30ea\u66f8\u304f\u5fc5\u8981\u306f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nPR \u306e\u60c5\u5831\u306b\u57fa\u3065\u304d\u3001\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\n* \u7279\u5b9a\u306e\u30e9\u30d9\u30eb\u304c\u3064\u3044\u305f\u3089 task \u3092\u5b9f\u884c\u3059\u308b\\n* \u7279\u5b9a\u306e\u30d5\u30a1\u30a4\u30eb\u304c PR \u3067\u66f4\u65b0\u3055\u308c\u305f\u3089 task \u3092\u5b9f\u884c\u3059\u308b\\n* \u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc(bot\u3068\u304b)\u304b\u3089\u306e PR \u3067\u306f task \u3092\u5b9f\u884c\u3057\u306a\u3044\\n\\n\u3053\u308c\u3089\u306e\u30ed\u30b8\u30c3\u30af\u306f\u81ea\u5206\u304c\u3088\u304f\u6b32\u3057\u304f\u306a\u308b\u306e\u3067\u3001 buildflow \u3092\u4f7f\u3048\u3070\u7c21\u5358\u306b\u5b9f\u88c5\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n\u4ed6\u306b\u3082\u69d8\u3005\u306a\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u307e\u305f\u5225\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3067\u304d\u305f\u3089\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"/post-tfnotify-parse-error","metadata":{"permalink":"/post-tfnotify-parse-error","source":"@site/blog/post-tfnotify-parse-error.md","title":"tfnotify \u306e parse error \u3092\u901a\u77e5\u3059\u308b","description":"tfnotify \u304c terraform \u306e\u6a19\u6e96\u51fa\u529b\u306e\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u3066\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3067\u304d\u306a\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002","date":"2020-09-11T23:05:59.000Z","formattedDate":"September 11, 2020","tags":[{"label":"terraform","permalink":"/tags/terraform"},{"label":"tfnotify","permalink":"/tags/tfnotify"},{"label":"github-comment","permalink":"/tags/github-comment"}],"readingTime":1.785,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"tfnotify \u306e parse error \u3092\u901a\u77e5\u3059\u308b","date":"2020-09-11T23:05:59.000Z","tags":["terraform","tfnotify","github-comment"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"buildflow \u3068\u3044\u3046\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u30a8\u30f3\u30b8\u30f3\u306e\u3088\u3046\u306a\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u3066\u3044\u308b","permalink":"/buildflow-1"},"nextItem":{"title":"AWS CodeBuild \u826f\u3055\u305d\u3046","permalink":"/codebuild-1"}},"content":"[tfnotify](https://github.com/mercari/tfnotify) \u304c terraform \u306e\u6a19\u6e96\u51fa\u529b\u306e\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u3066\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3067\u304d\u306a\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3067\u304d\u306a\u304f\u3066\u3082\u30d3\u30eb\u30c9\u306e\u30ed\u30b0\u306b\u306f\u6b8b\u308b\u306e\u3067\u3059\u304c\u3001\u3084\u306f\u308a\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3067\u304d\u308b\u3068\u4fbf\u5229\u306a\u306e\u3067\u3001tfnotify \u304c\u30d1\u30fc\u30b9\u30a8\u30e9\u30fc\u3067\u30b3\u30e1\u30f3\u30c8\u306e\u6295\u7a3f\u306b\u5931\u6557\u3057\u305f\u3089\u3001 [github-comment](https://github.com/suzuki-shunsuke/github-comment) \u3067\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n\u306a\u304a\u3001\u3053\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u308b\u6642\u70b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f tfnotify v0.7.0, github-comment v1.9.0 \u3067\u3059\u3002\\n\\n\u4f8b\u3048\u3070 `tfnotify plan` \u304c\u30d1\u30fc\u30b9\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u5834\u5408\u3001 `cannot parse plan result` \u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\\n\u305d\u3053\u3067\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u306b `cannot parse plan result` \u304c\u542b\u307e\u308c\u3066\u3044\u305f\u3089 github-comment \u3067\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\\n\\n```sh\\nterraform plan | github-comment exec -k plan -- tfnotify plan\\n```\\n\\n.github-comment.yml\\n\\n```yaml\\n# \u7d30\u304b\u304f template \u3092\u5206\u3051\u3066\u3044\u308b\u304c\u3001\u5225\u306b\u5206\u3051\u306a\u304f\u3066\u3082\u3088\u3044\\ntemplates:\\n  # header \u306f CodeBuild \u306e\u5834\u5408\\n  header: \'{{Env \\"TARGET\\"}} [Build link]({{Env \\"CODEBUILD_BUILD_URL\\"}})\'\\n  exit_code: \':{{if eq .ExitCode 0}}white_check_mark{{else}}x{{end}}: Exit Code {{.ExitCode}}\'\\n  join_command: |\\n    ```\\n    $ {{.JoinCommand}}\\n    ```\\n  hidden_combined_output: |\\n    <details>\\n\\n    <pre><code>{{.CombinedOutput}}</code></pre>\\n\\n    </details>\\n  exec_default: |\\n    {{template \\"header\\" .}}\\n\\n    {{template \\"exit_code\\" .}}\\n\\n    {{template \\"join_command\\" .}}\\n\\n    {{template \\"hidden_combined_output\\" .}}\\nexec:\\n  plan:\\n  - when: |\\n      Stderr contains \\"cannot parse plan result\\"\\n    template: |\\n      {{template \\"exec_default\\" .}}\\n```\\n\\n`tfnotify apply` \u306e\u5834\u5408\u306f `cannot parse apply result` \u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u51fa\u529b\u3059\u308b\u306e\u3067\\n\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```sh\\nterraform apply -auto-approve | github-comment exec -k apply -- tfnotify apply\\n```\\n\\n```yaml\\nexec:\\n  apply:\\n  - when: |\\n      Stderr contains \\"cannot parse apply result\\"\\n    template: |\\n      {{template \\"exec_default\\" .}}\\n```\\n\\n## tfnotify \u306e\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\\n\\n* https://github.com/mercari/tfnotify/blob/v0.7.0/terraform/parser.go#L158\\n* https://github.com/mercari/tfnotify/blob/v0.7.0/terraform/parser.go#L111\\n* https://github.com/mercari/tfnotify/blob/v0.7.0/notifier/github/notify.go#L20-L21\\n* https://github.com/mercari/tfnotify/blob/v0.7.0/main.go#L193"},{"id":"/codebuild-1","metadata":{"permalink":"/codebuild-1","source":"@site/blog/codebuild-1.md","title":"AWS CodeBuild \u826f\u3055\u305d\u3046","description":"AWS CodeBuild \u3092\u691c\u8a3c\u3057\u3066\u3044\u308b\u3093\u3067\u3059\u304c\u3001\u7d50\u69cb\u826f\u3044\u3067\u3059\u306d\u3002","date":"2020-08-02T04:21:37.000Z","formattedDate":"August 2, 2020","tags":[{"label":"aws","permalink":"/tags/aws"},{"label":"codebuild","permalink":"/tags/codebuild"},{"label":"ci","permalink":"/tags/ci"}],"readingTime":5.02,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"AWS CodeBuild \u826f\u3055\u305d\u3046","date":"2020-08-02T04:21:37.000Z","tags":["aws","codebuild","ci"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"tfnotify \u306e parse error \u3092\u901a\u77e5\u3059\u308b","permalink":"/post-tfnotify-parse-error"},"nextItem":{"title":"github-comment - GitHub \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b CLI","permalink":"/github-comment"}},"content":"AWS CodeBuild \u3092\u691c\u8a3c\u3057\u3066\u3044\u308b\u3093\u3067\u3059\u304c\u3001\u7d50\u69cb\u826f\u3044\u3067\u3059\u306d\u3002\\n\u73fe\u72b6 Jenkins \u3084 CircleCI \u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u30b8\u30e7\u30d6\u3084 CI/CD \u3092\u4e00\u90e8\u79fb\u884c\u3057\u305f\u3044\u306a\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\n\\n\u4e00\u90e8\u3068\u8a00\u3063\u3066\u3044\u308b\u306e\u306f\u3001\u5358\u7d14\u306b\u5168\u90e8\u3044\u304d\u306a\u308a\u79fb\u884c\u3059\u308b\u306e\u306f\u96e3\u3057\u3044\u304b\u3089\u5171\u5b58\u3059\u308b\u524d\u63d0\u3067\u8003\u3048\u308b\u304f\u3089\u3044\u306e\u610f\u5473\u3067\u3059\u3002\\n\\n\u306a\u304a\u3001\u3053\u308c\u3092\u66f8\u3044\u3066\u3044\u308b\u6642\u70b9\u3067\u306f\u307e\u3060\u8efd\u304f\u691c\u8a3c\u3057\u3066\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u3001CodeBuild \u306e\u7406\u89e3\u306f\u6d45\u3044\u3067\u3059\u3002\\n\\n\u7279\u5fb4\u3068\u3057\u3066\u306f\\n\\n- Managed\\n- AWS \u4ee5\u5916\u306e\u30b5\u30fc\u30d3\u30b9\u306b AWS \u306e credential \u3092\u767b\u9332\u3057\u306a\u304f\u3066\u826f\u3044\\n  - Secret \u3092 AWS Secrets Manager \u3067\u7ba1\u7406\u3067\u304d\u308b\\n  - Secret \u3092\u81f3\u308b\u3068\u3053\u308d\u306b\u8a2d\u5b9a\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001 AWS Secrets Manager \u304b\u4f55\u304b\u3067\u4e00\u5143\u7ba1\u7406\u3059\u308b\u306e\u304c\u7406\u60f3\\n  - Role \u4f5c\u3063\u3066 Build Project \u306e Service Role \u3068\u3057\u3066\u6307\u5b9a\u3059\u308b\u3060\u3051\u306a\u3089 credential \u3092\u6271\u3046\u5fc5\u8981\u304c\u306a\u304f\u3066\u697d\u3067\u5b89\u5fc3\\n- VPC \u5185\u3067\u5b9f\u884c\u3067\u304d\u308b\\n- GitHub \u9023\u643a\u3082\u7c21\u5358\\n  - Webhook \u306e\u8a2d\u5b9a\u3067 PR \u306e\u7d30\u304b\u306a\u30a4\u30d9\u30f3\u30c8(merge \u3068\u304b reopen \u3068\u304b)\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u306e\u3082\u826f\u3044\\n  - PR \u3092 merge \u3057\u305f\u3068\u304d\u3082 PR \u3067\u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u3088\u3063\u3066 Webhook \u3092\u30d5\u30a3\u30eb\u30bf\u3067\u304d\u308b\u306e\u304c\u826f\u3044\\n- \u5909\u66f4\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u3088\u3063\u3066\u5b9f\u884c\u3059\u308bBuild Project \u3092\u5909\u66f4\u3059\u308b\u3088\u3046\u306a\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u73fe\u3067\u304d\u308b(monorepo \u3067\u7279\u306b\u6709\u52b9)\\n\\n\u3068\u3044\u3063\u305f\u70b9\u304c\u6319\u3052\u3089\u308c\u307e\u3059\u3002\\n\\n## \u5909\u66f4\u691c\u77e5\u306b\u3064\u3044\u3066\\n\\n\u4e0a\u8a18\u306e\u7279\u5fb4\u306b\u3064\u3044\u3066\u306f\u3060\u3044\u305f\u3044\u300c\u307e\u3041\u305d\u3046\u3060\u306d\u300d\u3068\u3044\u3046\u3075\u3046\u306b\u601d\u3063\u3066\u3082\u3089\u3048\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u5909\u66f4\u691c\u77e5\u306e\u90e8\u5206\u306b\u3064\u3044\u3066\u88dc\u8db3\u3057\u307e\u3059\u3002\\nmonorepo \u3092\u3084\u3063\u3066\u3044\u308b\u3068\u30b5\u30fc\u30d3\u30b9 A \u95a2\u9023\u306e\u30b8\u30e7\u30d6\u306f\u30b5\u30fc\u30d3\u30b9 A \u95a2\u9023\u306e\u30b3\u30fc\u30c9\u304c\u5909\u66f4\u3055\u308c\u305f\u5834\u5408\u306e\u307f\u5b9f\u884c\u3057\u305f\u3044\u3068\u3044\u3046\u306e\u304c\u3042\u308a\u307e\u3059\u3002\\n\u306a\u306e\u3067\u3059\u304c\u3001 CircleCI \u3060\u3068\u81ea\u5206\u306e\u77e5\u308b\u9650\u308a\u305d\u308c\u306f\u3067\u304d\u307e\u305b\u3093\u3002\\n\\nhttps://circleci.com/docs/2.0/configuration-reference/\\n\\n\u306a\u306e\u3067\u73fe\u72b6 Job \u3092\u5b9f\u884c\u3057\u3066\u304b\u3089\u30b5\u30fc\u30d3\u30b9 A \u95a2\u9023\u306e\u30b3\u30fc\u30c9\u304c\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3001\u5909\u66f4\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u3089 skip \u306a\u3044\u3057\\n`circleci step halt` \u3067 Job \u3092\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059\u3002\\n\u305f\u3060\u3001\u5dee\u5206\u691c\u77e5\u306e\u90e8\u5206\u3092\u81ea\u5206\u3067\u5b9f\u88c5\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3057\u3001 `circleci step halt` \u3067\u7d42\u4e86\u3059\u308b\u306b\u3057\u3066\u3082 Job \u306e\u8d77\u52d5\u81ea\u4f53\u306b\u305d\u3053\u305d\u3053\u6642\u9593\u304c\u304b\u304b\u3063\u305f\u308a\u3059\u308b\u3057(\u3053\u308c\u3060\u3051\u3067\u3082\u91d1\u92ad\u7684\u30b3\u30b9\u30c8\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u306f\u305a)\u3001 Job \u306e\u5b9f\u884c\u6642\u9593\u3084 error rate \u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3067\u3082\u30ce\u30a4\u30ba\u3068\u3057\u3066\u6df7\u3058\u3063\u3066\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002\\n\\nCodeBuild \u306e\u5834\u5408\u30011\u3064\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8907\u6570\u306e Build Project \u3092\u8a2d\u5b9a\u3067\u304d\u3001 Build Project \u3054\u3068\u306b buildspec \u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\\nBuild Project \u306e Webhook \u306e `FILE_PATH` \u306e\u8a2d\u5b9a\u3067\u7279\u5b9a\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5909\u66f4\u3055\u308c\u305f\u5834\u5408\u306e\u307f\u30d3\u30eb\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n\u306a\u306e\u3067\u30b5\u30fc\u30d3\u30b9 A \u7528\u306e build spec \u53ca\u3073 Build Project \u3092\u4f5c\u6210\u3057\u3001\u30b5\u30fc\u30d3\u30b9 A \u306e\u30b3\u30fc\u30c9\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d\u306e\u307f\u305d\u306e Build Project \u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b Webhook \u3092\u8a2d\u5b9a\u3059\u308c\u3070\u826f\u3055\u305d\u3046\u3067\u3059\u3002\\n\\n## \u6c17\u306b\u306a\u308b\u70b9\\n\\n* `FILE_PATH` \u3067 1 \u500b\u306e\u6b63\u898f\u8868\u73fe\u3057\u304b\u8a2d\u5b9a\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u8907\u96d1\u306a\u6b63\u898f\u8868\u73fe\u3092\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n* Terraform \u3067\u7ba1\u7406\u3059\u308b\u306e\u304c\u7d50\u69cb\u9762\u5012\u304f\u3055\u3044\\n  * \u3044\u3044\u611f\u3058\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u3068\u304b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316\u3057\u306a\u3044\u3068\u3060\u3081\u304b\u3082\\n* Pull Request \u306e\u30e9\u30d9\u30eb\u304c\u3064\u3044\u3066\u3044\u305f\u3089\u3053\u306e\u30b8\u30e7\u30d6\u3092\u5b9f\u884c\u3059\u308b\u3001\u307f\u305f\u3044\u306a\u8907\u96d1\u306a\u3053\u3068\u306f\u4e00\u5de5\u592b\u5fc5\u8981\u304b\u3082\\n  * Webhook \u306e\u8a2d\u5b9a\u3060\u3068\u7121\u7406\u306a\u306e\u3067\u3001 build \u306f\u5b9f\u884c\u3057\u3064\u3064\u30e9\u30d9\u30eb\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u3089 skip \u3068\u304b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n\\n## \u304a\u307e\u3051: CodeBuild \u95a2\u9023\u306e\u30cb\u30e5\u30fc\u30b9\\n\\n\u4ee5\u524d\u691c\u8a3c\u3057\u305f\u3068\u304d\u3088\u308a\u826f\u304f\u306a\u3063\u3066\u308b\u6c17\u304c\u3059\u308b\u306a\u3068\u601d\u3063\u3066\u66f4\u65b0\u3092\u30c1\u30a7\u30c3\u30af\u3057\u305f\u3089\u3084\u3063\u3071\u8272\u3005\u66f4\u65b0\u304c\u3042\u308b\u307f\u305f\u3044\u3067\u3059\u306d\u3002\\n\\nhttps://aws.amazon.com/jp/new/?whats-new-content-all.sort-by=item.additionalFields.postDateTime&whats-new-content-all.sort-order=desc&awsf.whats-new-developer-tools=general-products%23aws-codebuild"},{"id":"/github-comment","metadata":{"permalink":"/github-comment","source":"@site/blog/github-comment.md","title":"github-comment - GitHub \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b CLI","description":"GitHub \u306e issue \u3084 pull request, commit \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b CLI \u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f(\u7d50\u69cb\u524d\u306e\u8a71\u3067\u3059\u304c)\u3002","date":"2020-07-31T11:42:54.000Z","formattedDate":"July 31, 2020","tags":[{"label":"oss","permalink":"/tags/oss"}],"readingTime":8.58,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"github-comment - GitHub \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b CLI","date":"2020-07-31T11:42:54.000Z","tags":["oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"AWS CodeBuild \u826f\u3055\u305d\u3046","permalink":"/codebuild-1"},"nextItem":{"title":"clap - \u7c21\u5358\u306b\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","permalink":"/clap"}},"content":"GitHub \u306e issue \u3084 pull request, commit \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b CLI \u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f(\u7d50\u69cb\u524d\u306e\u8a71\u3067\u3059\u304c)\u3002\\n\\nhttps://github.com/suzuki-shunsuke/github-comment\\n\\n\u3053\u306e\u30d6\u30ed\u30b0\u306e\u57f7\u7b46\u6642\u70b9\u3067\u6700\u65b0\u306f v1.5.0 \u3067\u3059\u3002\\n\\nGo \u88fd\u306a\u306e\u3067\u3001 GitHub Releases \u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u308c\u3070\u7c21\u5358\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\\n\\n\u60f3\u5b9a\u3057\u3066\u3044\u308b\u4e3b\u306a\u7528\u9014\u306f\u3001 CI/CD \u306e \u7d50\u679c\u3092\u30b3\u30e1\u30f3\u30c8\u3067\u901a\u77e5\u3059\u308b\u3053\u3068\u3067 DX \u3092\u5411\u4e0a\u3059\u308b\u3053\u3068\u3067\u3059\u3002\\n\u4f8b\u3048\u3070 CI \u304c\u3053\u3051\u305f\u3089\u3053\u3051\u305f\u30b3\u30de\u30f3\u30c9\u3068\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u901a\u77e5\u3059\u308b\u306a\u3069\u3067\u3059\u3002\\n\\ngithub-comment \u306b\u306f\\n\\n- init: \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u96db\u5f62\u3092\u751f\u6210\u3059\u308b\\n- post: \u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b\\n- exec: \u5916\u90e8\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u305d\u306e\u7d50\u679c\u3092\u5143\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b\\n\\n\u3068\u3044\u3046 3 \u3064\u306e\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u30b3\u30e1\u30f3\u30c8\u306e\u6295\u7a3f\u306b\u306f GitHub \u306e Access Token \u304c\u5fc5\u8981\u3067\u3059\u3002\\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570 `-token` \u3067\u3082\u6e21\u305b\u307e\u3059\u304c\u3001\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```\\n$ export GITHUB_TOKEN=xxx # GITHUB_ACCESS_TOKEN \u3082\u53ef\\n```\\n\\n## post \u30b3\u30de\u30f3\u30c9\\n\\n\u3053\u3093\u306a\u611f\u3058\u3067\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3067\u304d\u307e\u3059\u3002\\n\\n```\\n$ github-comment post -org suzuki-shunsuke -repo github-comment -pr 1 -template test\\n```\\n\\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6570\u304c\u591a\u3044\u3067\u3059\u304c\u3001\u3044\u304f\u3064\u304b\u306e Platform \u3067\u306f\u74b0\u5883\u5909\u6570\u304b\u3089\u81ea\u52d5\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u88dc\u5b8c\u3057\u3066\u304f\u308c\u307e\u3059\u3002\\n\\n* Drone\\n* CircleCI\\n* GitHub Actions\\n\\n\u305d\u3046\u3059\u308b\u3068\u3053\u308c\u3067\u3088\u304f\u306a\u308a\u307e\u3059\u3002\\n\\n```\\n$ github-comment post -template test\\n```\\n\\n\u30b3\u30e1\u30f3\u30c8\u306f Go \u306e [text/template](https://golang.org/pkg/text/template/) \u3067\u51e6\u7406\u3055\u308c\u307e\u3059\u3002\\n`{{.Org}}` `{{.Repo}}` \u3068\u3044\u3063\u305f\u611f\u3058\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\\n\\n```\\n$ github-comment post -template \\"{{.Org}}/{{.Repo}} test\\"\\n```\\n\\n- PRNumber\\n- Org\\n- Repo\\n- SHA1\\n- TemplateKey\\n- Vars\\n\\n## exec \u30b3\u30de\u30f3\u30c9\\n\\n\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c(\u6a19\u6e96\u51fa\u529b\u3001\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u3001 exit code) \u3092\u5143\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3057\u305f\u3044\u5834\u5408\u306b\u3001 exec \u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u3048\u307e\u3059\u3002\\n\\n```\\n$ github-comment exec -template \\"{{.ExitCode}} {{.Stdout}}\\" -- echo hello\\n```\\n\\n\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u4e0a\u3067\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3057\u307e\u3059\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u5909\u6570\u3068\u3057\u3066\u3001 post \u3067\u3082\u6e21\u3055\u308c\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u4ed6\u306b\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u304c\u6e21\u3055\u308c\u307e\u3059\u3002\\n\\n- ExitCode\\n- Stdout\\n- Stderr\\n- CombinedOutput\\n- Command: [exec.Command.String](https://golang.org/pkg/os/exec/#Cmd.String)\\n- JoinCommand: \u30b3\u30de\u30f3\u30c9\u5f15\u6570(\u914d\u5217)\u3092\u30b9\u30da\u30fc\u30b9 `\\" \\"` \u3067\u3064\u306a\u3044\u3060\u6587\u5b57\u5217\\n\\ngithub-comment exec \u306e\u6a19\u6e96\u5165\u529b\u306f\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306b\u6e21\u3055\u308c\u307e\u3059\u3057\u3001 github-comment exec \u306e exit code \u306f\u5b9f\u884c\u3057\u305f\u30b3\u30de\u30f3\u30c9\u306e exit code \u306b\u306a\u308a\u307e\u3059\u3002\\n\\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\\n\\n\u4e0a\u8a18\u306e\u4f8b\u3067\u306f\u6295\u7a3f\u3059\u308b\u30b3\u30e1\u30f3\u30c8\u3092 `-template` \u3067\u6e21\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u3054\u304f\u77ed\u3044\u30b3\u30e1\u30f3\u30c8\u4ee5\u5916\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8ff0\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f `github-comment init` \u3067\u96db\u5f62\u3092\u751f\u6210\u3067\u304d\u307e\u3059\u3002\\n\\n```\\n$ github-comment init\\n```\\n\\n\u3053\u3093\u306a\u611f\u3058\u3067\u8907\u6570\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\\n\\n```yaml\\npost:\\n  default: |\\n    foo\\n  hello: |\\n    hello\\n  ...\\n```\\n\\n\u305d\u3057\u3066 `post` \u5b9f\u884c\u6642\u306b `-template-key (-k)` \u3067\u4f7f\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\\n`-template` \u3068 `-k` \u4e21\u65b9\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 `default` \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\\n\\n```\\n$ github-comment -k hello\\n```\\n\\n### exec \u306e\u8a2d\u5b9a\\n\\n`exec` \u306e\u8a2d\u5b9a\u306f\u3082\u3046\u5c11\u3057\u8907\u96d1\u3067\u3059\u3002\\n\u305d\u308c\u306f\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u306b\u3088\u3063\u3066\u4f7f\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5909\u3048\u305f\u308a\u3001\u3042\u308b\u3044\u306f\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3057\u306a\u304b\u3063\u305f\u308a\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3067\u3059\u3002\\n\u4e00\u3064\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30ad\u30fc\u306b\u5bfe\u3057\u3001\u8907\u6570\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u914d\u5217\u3067\u8a2d\u5b9a\u3057\u307e\u3059\u3002\\n\\n```yaml\\nexec:\\n  default:\\n    - when: ExitCode == 0\\n      template: |\\n        success\\n    - when: ExitCode != 0\\n      template: |\\n        failed\\n    ...\\n  ...\\n```\\n\\n\u305d\u3057\u3066\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u6587\u5b57\u5217\u3068\u306f\u5225\u306b `when` \u3068\u3044\u3046\u3001\u305d\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3046\u6761\u4ef6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\\n\u3053\u306e\u6761\u4ef6\u306f [antonmedv/expr](https://github.com/antonmedv/expr) \u306b\u3088\u3063\u3066\u51e6\u7406\u3055\u308c\u307e\u3059\u3002\\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e text/template \u3068\u306f\u307e\u305f\u5225\u306e\u69cb\u6587\u306a\u306e\u304c\u3084\u3084\u3053\u3057\u3044\u3067\u3059\u306d\u3002\\n\u6761\u4ef6\u306e\u8a55\u4fa1\u7d50\u679c\u306f\u5f53\u7136\u771f\u507d\u5024\u3067\u306f\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\\n\u8a55\u4fa1\u7d50\u679c\u304c true \u306a\u3089\u3070\u305d\u308c\u3092\u4f7f\u3063\u3066\u30b3\u30e1\u30f3\u30c8\u3057\u3001\u3042\u3068\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\\nfalse \u306a\u3089\u6b21\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a55\u4fa1\u3057\u307e\u3059\u3002\\n\u5168\u90e8\u30de\u30c3\u30c1\u3057\u306a\u3051\u308c\u3070\u30b3\u30e1\u30f3\u30c8\u306f\u6295\u7a3f\u3055\u308c\u307e\u305b\u3093\u3057\u3001\u30a8\u30e9\u30fc\u306b\u3082\u306a\u308a\u307e\u305b\u3093\u3002\\n`dont_comment: true` \u3068\u3059\u308b\u3068\u3001\u305d\u306e\u6761\u4ef6\u306b\u30de\u30c3\u30c1\u3057\u305f\u5834\u5408\u306f\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u305b\u305a\u306b\u7d42\u4e86\u3057\u307e\u3059(\u5f8c\u7d9a\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3082\u7121\u8996\u3055\u308c\u307e\u3059)\u3002\\n\\n```yaml\\nexec:\\n  hello:\\n    - when: ExitCode != 0\\n      dont_comment: true\\n    - when: true\\n      template: |\\n        Hello, world\\n```\\n\\n### \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u518d\u5229\u7528\\n\\n`templates` \u3092\u4f7f\u3046\u3068\u8907\u6570\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u30d8\u30c3\u30c0\u30fc\u306a\u3069\u3092\u5171\u901a\u5316\u3057\u3066\u518d\u5229\u7528\u3067\u304d\u307e\u3059\u3002\\n\\n```yaml\\ntemplates:\\n  header: \\"# {{.Org}}/{{.Repo}}\\"\\npost:\\n  default: |\\n    {{template \\"header\\" .}}\\n```\\n\\nGo \u306e [text/template](https://golang.org/pkg/text/template/) \u306b\u99b4\u67d3\u307f\u304c\u306a\u3044\u3068\u308f\u304b\u308a\u306b\u304f\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\\n\\n```yaml\\ntemplates:\\n  \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d: \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\\n```\\n\\n\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\\n\\n```\\n{{template \\"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\\" .}}\\n```\\n\\n\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\\n\\n## \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u5909\u6570\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u6e21\u3059\\n\\n`-var \u5909\u6570\u540d:\u5024` \u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u305b\u307e\u3059\u3002\\n`{{.Var.\u5909\u6570\u540d}}` \u3067\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\\n\\n```\\n$ github-comment post -var name:foo -template \\"Hello, {{.Var.name}}\\"\\n```\\n\\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u5909\u6570\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\u4efb\u610f\u306e\u578b\u306e\u5909\u6570\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\\n`{{.Var}}.\u5909\u6570\u540d` \u3067\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\\n\\n```yaml\\nvars:\\n  foo: bar\\n  zoo:\\n    foo: hello\\n```\\n\\n`{{.Var.zoo.foo}}`\\n\\n## post \u30b3\u30de\u30f3\u30c9\u306e\u6a19\u6e96\u5165\u529b\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u6e21\u3059\\n\\n`github-comment post` \u306e\u6a19\u6e96\u5165\u529b\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u6e21\u305b\u307e\u3059\u3002 exec \u306e\u5834\u5408\u306f\u305d\u3046\u306f\u306a\u3089\u306a\u3044(\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306b\u6e21\u3055\u308c\u308b)\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n```\\n$ echo foo | github-comment post\\n```\\n\\n## \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u88dc\u5b8c\\n\\n\u5148\u306b\u8ff0\u3079\u305f\u3068\u304a\u308a\u3001\u3044\u304f\u3064\u304b\u306e Platform \u3067\u306f\u74b0\u5883\u5909\u6570\u304b\u3089\u81ea\u52d5\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u88dc\u5b8c\u3057\u3066\u304f\u308c\u307e\u3059\u3002\\n\\n### CircleCI\\n\\n\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u5224\u5225: `CIRCLECI` \u306e\u6709\u7121\\n\\n\u30d1\u30e9\u30e1\u30fc\u30bf | \u30bd\u30fc\u30b9\\n--- | ---\\n.Org | CIRCLE_PROJECT_USERNAME\\n.Repo | CIRCLE_PROJECT_REPONAME\\n.PRNumber | CIRCLE_PULL_REQUEST\\n.SHA1 | CIRCLE_SHA1\\n\\n### Drone\\n\\n\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u5224\u5225: `DRONE` \u306e\u6709\u7121\\n\\n\u30d1\u30e9\u30e1\u30fc\u30bf | \u30bd\u30fc\u30b9\\n--- | ---\\n.Org | DRONE_REPO_OWNER\\n.Repo | DRONE_REPO_NAME\\n.PRNumber | DRONE_PULL_REQUEST\\n.SHA1 | DRONE_COMMIT_SHA1\\n\\n### GitHub Actions\\n\\n\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u5224\u5225: `GITHUB_ACTIONS` \u306e\u6709\u7121\\n\\n\u30d1\u30e9\u30e1\u30fc\u30bf | \u30bd\u30fc\u30b9\\n--- | ---\\n.Org | GITHUB_REPOSITORY\\n.Repo | GITHUB_REPOSITORY\\n.PRNumber | GITHUB_EVENT_PATH\\n.SHA1 | GITHUB_SHA1\\n\\n## exec \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306e Command \u3068 JoinCommand\\n\\n\u5b9f\u884c\u3057\u305f\u30b3\u30de\u30f3\u30c9\u3092\u793a\u3059\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066 Command \u3068 JoinCommand \u304c\u3042\u308a\u307e\u3059\u3002\\n\u3053\u308c\u3089\u306f\u4f3c\u3066\u307e\u3059\u304c\u3001\u5fae\u5999\u306b\u9055\u3044\u307e\u3059\u3002\\n\\nCommand \u306f [exec.Cmd \u306e .String()](https://golang.org/pkg/os/exec/#Cmd.String) \u304b\u3089\u53d6\u5f97\u3055\u308c\u308b\u306e\u3067\u3059\u304c\u3001\u30b3\u30de\u30f3\u30c9\u304c\u7d76\u5bfe\u30d1\u30b9\u306b\u306a\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u3042\u307e\u308a\u671b\u307e\u3057\u304f\u306a\u3044\u3053\u3068\u3082\u3042\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n\u4f8b\u3048\u3070 `echo hello` \u306e\u5834\u5408 `/usr/local/opt/coreutils/libexec/gnubin/echo foo` \u3068\u306a\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u4e00\u65b9 JoinCommand \u306f\u30b3\u30de\u30f3\u30c9\u6587\u5b57\u5217\u3092\u5358\u306b\u30b9\u30da\u30fc\u30b9\u3067\u3064\u306a\u3044\u3060\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\\n\\nexec.Cmd \u306e .String() \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u3044\u3066\u3042\u308b\u3068\u304a\u308a\u3001 .Command \u3068 .JoinCommand \u306f\u305d\u306e\u307e\u307e shell \u3067\u5b9f\u884c\u3059\u308b\u306e\u306b\u306f\u9069\u3055\u306a\u3044\u5f62\u5f0f\u306a\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n> String returns a human-readable description of c.\\n> It is intended only for debugging.\\n> In particular, it is not suitable for use as input to a shell.\\n> The output of String may vary across Go releases.\\n\\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u306f `--config -c` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\\n\u4f55\u3082\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5411\u304b\u3063\u3066 `.github-comment.yml`, `.github-comment.yaml` \u3092\u63a2\u7d22\u3057\u3001\u6700\u521d\u306b\u898b\u3064\u304b\u3063\u305f\u3082\u306e\u3092\u4f7f\u3044\u307e\u3059\u3002\\n\\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067 .Org, .Repo \u3092\u6307\u5b9a\u3059\u308b\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u30b3\u30e1\u30f3\u30c8\u5148\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\\nPlatform \u3067\u88dc\u5b8c\u3055\u308c\u308b\u5834\u5408\u3084\u3001\u660e\u793a\u7684\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u4e0d\u8981\u3067\u3059\u3002\\n\\n```yaml\\nbase:\\n  org: suzuki-shunsuke\\n  repo: github-comment\\n```"},{"id":"/clap","metadata":{"permalink":"/clap","source":"@site/blog/clap.md","title":"clap - \u7c21\u5358\u306b\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","description":"\u591a\u5206\u8eca\u8f2a\u306e\u518d\u767a\u660e\u3060\u3068\u306f\u601d\u3044\u307e\u3059\u304c\u3001\u7c21\u5358\u306b\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306e CLI \u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002","date":"2020-07-06T07:52:58.000Z","formattedDate":"July 6, 2020","tags":[{"label":"oss","permalink":"/tags/oss"}],"readingTime":2.33,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"clap - \u7c21\u5358\u306b\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","date":"2020-07-06T07:52:58.000Z","tags":["oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"github-comment - GitHub \u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b CLI","permalink":"/github-comment"},"nextItem":{"title":"CircleCI \u306e run \u306e\u5b9f\u884c\u6642\u9593\u3092 DataDog \u306b\u9001\u308b","permalink":"/send-circleci-run-execution-time-to-datadog"}},"content":"\u591a\u5206\u8eca\u8f2a\u306e\u518d\u767a\u660e\u3060\u3068\u306f\u601d\u3044\u307e\u3059\u304c\u3001\u7c21\u5358\u306b\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306e CLI \u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\\ntarball \u3084 zip \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5c55\u958b\u3057\u3066\u6307\u5b9a\u3057\u305f\u30d1\u30b9\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/clap\\n\\nGo \u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\\n\u30c4\u30fc\u30eb\u306e\u540d\u524d(clap)\u306b\u306f\u7279\u5225\u306a\u610f\u5473\u3084\u7406\u7531\u306f\u306a\u304f\u3001\u306a\u3093\u3068\u306a\u304f\u3067\u3059\u3002\\n\\nCI \u3067\u4f55\u304b\u3057\u3089\u306e\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u307e\u307e\u3042\u3063\u3066\u3001\u305d\u306e\u305f\u3081\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u90fd\u5ea6\u66f8\u304f\u306e\u304c\u5272\u3068\u9762\u5012\u306a\u306e\u3067\u30c4\u30fc\u30eb\u5316\u3057\u307e\u3057\u305f\u3002\\n\\n\u3053\u306e\u30d6\u30ed\u30b0\u3092\u66f8\u3044\u3066\u3044\u308b\u6642\u70b9\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u306f v0.1.0-1 \u3067\u3001\u6700\u4f4e\u9650\u306e\u6a5f\u80fd\u3057\u304b\u3042\u308a\u307e\u305b\u3093\u304c\u30019\u5272\u578b\u30cb\u30fc\u30ba\u3092\u6e80\u305f\u305b\u308b\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u4f7f\u3044\u65b9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n```\\n$ clap <URL> <\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u5185\u3067\u306e\u76f8\u5bfe\u30d1\u30b9>:<\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148> [<\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u5185\u3067\u306e\u76f8\u5bfe\u30d1\u30b9>:<\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148>...]\\n```\\n\\n\u4f8b\u3048\u3070 [conftest](https://github.com/open-policy-agent/conftest) \u3092 /usr/local/bin \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```sh\\nCONFTEST_VERSION=0.18.2\\nclap install https://github.com/instrumenta/conftest/releases/download/v${CONFTEST_VERSION}/conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz conftest:/usr/local/bin/conftest\\nchmod a+x /usr/local/bin/conftest\\n```\\n\\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u4ed8\u4e0e\u306f\u3084\u3063\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3084\u3063\u3066\u304f\u3060\u3055\u3044\u3002\\n\u30d5\u30a1\u30a4\u30eb\u306e\u5727\u7e2e\u5f62\u5f0f\u306f URL \u304b\u3089\u81ea\u52d5\u3067\u5224\u5225\u3057\u3066\u304f\u308c\u307e\u3059\u3002\\n\\n\u4e0a\u8a18\u306e conftest \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u4eca\u307e\u3067\u306f\u6b21\u306e\u3088\u3046\u306a\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n```sh\\n#!/usr/bin/env bash\\n\\nset -eu\\n\\nCONFTEST_VERSION=0.18.2\\n\\ndirpath=$(mktemp -d)\\npushd \\"$dirpath\\"\\nTARFILE=conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz\\ncurl -OL https://github.com/instrumenta/conftest/releases/download/v${CONFTEST_VERSION}/${TARFILE}\\ntar xvzf $TARFILE\\nmv conftest /usr/local/bin/conftest\\nchmod a+x /usr/local/bin/conftest\\npopd\\nrm -R \\"$dirpath\\"\\n```\\n\\n\u5730\u5473\u306b\u9762\u5012\u3067\u3059\u306d\u3002\u3053\u308c\u3092\u30c4\u30fc\u30eb\u6bce\u306b\u66f8\u3044\u3066\u3001\u3057\u304b\u3082\u5727\u7e2e\u5f62\u5f0f\u306b\u3088\u3063\u3066\u5fae\u5999\u306b\u5909\u3048\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\\n\\nclap \u81ea\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3069\u3046\u3059\u308b\u304b\u3068\u3044\u3046\u3068\u3001 [GitHub Releases \u3067 tarball \u306e\u4ed6\u306b\u30d0\u30a4\u30ca\u30ea\u5358\u4f53\u3067\u3082\u914d\u5e03](https://github.com/suzuki-shunsuke/clap/releases)\u3057\u3066\u3044\u308b\u306e\u3067\u7c21\u5358\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\\n\\n```\\nCLAP_VERSION=0.1.0-1\\ncurl -L -o /usr/local/bin/clap https://github.com/suzuki-shunsuke/clap/releases/download/v${CLAP_VERSION}/clap_${CLAP_VERSION}_linux_amd64\\nchmod a+x /usr/local/bin/clap\\n```\\n\\n\u4ee5\u4e0a\u3001\u7c21\u5358\u306a\u7d39\u4ecb\u3067\u3057\u305f\u3002"},{"id":"/send-circleci-run-execution-time-to-datadog","metadata":{"permalink":"/send-circleci-run-execution-time-to-datadog","source":"@site/blog/send-circleci-run-execution-time-to-datadog.md","title":"CircleCI \u306e run \u306e\u5b9f\u884c\u6642\u9593\u3092 DataDog \u306b\u9001\u308b","description":"\u5c0f\u30cd\u30bf\u3067\u3059\u3002","date":"2020-05-23T05:20:53.000Z","formattedDate":"May 23, 2020","tags":[{"label":"circleci","permalink":"/tags/circleci"},{"label":"dd-time","permalink":"/tags/dd-time"},{"label":"datadog","permalink":"/tags/datadog"}],"readingTime":1.755,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"CircleCI \u306e run \u306e\u5b9f\u884c\u6642\u9593\u3092 DataDog \u306b\u9001\u308b","date":"2020-05-23T05:20:53.000Z","tags":["circleci","dd-time","datadog"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"clap - \u7c21\u5358\u306b\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","permalink":"/clap"},"nextItem":{"title":"CircleCI \u306e checkout \u306e\u6ce8\u610f\u70b9","permalink":"/circleci-checkout-default-branch"}},"content":"\u5c0f\u30cd\u30bf\u3067\u3059\u3002\\n\\n[dd-time](https://techblog.szksh.cloud/dd-time/) \u3092\u4f7f\u3063\u3066 CircleCI \u306e `run` \u3092\u4f7f\u3063\u305f\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u3092\u3069\u3046\u8a08\u6e2c\u3057\u305f\u3089\u3044\u3044\u306e\u304b\u3061\u3087\u3063\u3068\u8003\u3048\u307e\u3057\u305f\u3002\\n\\n\u4ee5\u524d\u3001\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u3092 DataDog \u306b\u9001\u308b\u30c4\u30fc\u30eb dd-time \u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\\n\\n* https://techblog.szksh.cloud/dd-time/\\n* https://github.com/suzuki-shunsuke/dd-time\\n\\n\u3053\u308c\u306f\u57fa\u672c\u7684\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5f15\u6570\u3068\u3057\u3066 `--` \u4ee5\u964d\u306b\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\\n\\n```\\n$ dd-time -m dd_time.execution_time -t command:docker-build -- docker build .\\n```\\n\\n\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6a19\u6e96\u5165\u529b\u3067\u6e21\u3057\u305f\u3044\u5834\u5408\u306f\u3053\u3046\u3057\u307e\u3059\u3002\\n\\n```\\n$ curl https://example.com/install.sh | dd-time -m dd_time.execution_time -- sh\\n```\\n\\n\u3082\u3061\u308d\u3093\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3042\u308b\u5fc5\u8981\u306f\u306a\u304f\u3066\u4f8b\u3048\u3070 Python \u3060\u3063\u305f\u3089\u3053\u3046\u306a\u308a\u307e\u3059\u3002\\n\\n```\\n$ curl https://example.com/setup.py | dd-time -m dd_time.execution_time -- python\\n```\\n\\nCircleCI \u306e `run` \u3067\u306f `shell` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067 shell \u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\\n\\nhttps://circleci.com/docs/2.0/configuration-reference/#run\\n\\n\u306a\u306e\u3067 command \u5168\u4f53\u306e\u6642\u9593\u3092\u8a08\u6e2c\u3057\u305f\u3044\u5834\u5408\u306f\u3001 shell \u3092\u6b21\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\\n\\n```yaml\\n- run:\\n    name: test dd-time\\n    shell: /usr/local/bin/dd-time -m dd_time.test -- sh -eo pipefail\\n    command: |\\n      echo start\\n      sleep 5\\n      echo end\\n```\\n\\n\u3053\u3046\u3059\u308b\u3068 `shell` \u4ee5\u5916\u3092\u5f04\u308b\u3053\u3068\u306a\u304f\u5b9f\u884c\u6642\u9593\u3092\u8a08\u6e2c\u3057\u3066 DataDog \u306b\u9001\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\n\u3053\u306e `shell` \u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306f dd-time \u306b\u9650\u3089\u305a\u4f7f\u3048\u308b\u304b\u3082\u77e5\u308c\u306a\u3044\u3067\u3059\u306d\u3002\\n\\n* \u30ed\u30b0\u3092\u3069\u3063\u304b\u306b\u9001\u3063\u305f\u308a\u3068\u304b\\n* \u30b3\u30de\u30f3\u30c9\u304c\u5931\u6557\u3057\u305f\u3089\u30a8\u30e9\u30fc\u3092\u63e1\u308a\u3064\u3076\u3057\u3064\u3064\u3069\u3063\u304b\u306b\u901a\u77e5\u3057\u305f\u308a\u3068\u304b\\n* etc\\n\\n\u4ee5\u4e0a\u3001\u5c0f\u30cd\u30bf\u3067\u3057\u305f\u3002"},{"id":"/circleci-checkout-default-branch","metadata":{"permalink":"/circleci-checkout-default-branch","source":"@site/blog/circleci-checkout-default-branch.md","title":"CircleCI \u306e checkout \u306e\u6ce8\u610f\u70b9","description":"CircleCI \u306e\u7d44\u307f\u8fbc\u307f\u306e command checkout \u306e\u6ce8\u610f\u70b9\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002","date":"2020-04-24T07:53:01.000Z","formattedDate":"April 24, 2020","tags":[{"label":"circleci","permalink":"/tags/circleci"}],"readingTime":5.495,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"CircleCI \u306e checkout \u306e\u6ce8\u610f\u70b9","date":"2020-04-24T07:53:01.000Z","tags":["circleci"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"CircleCI \u306e run \u306e\u5b9f\u884c\u6642\u9593\u3092 DataDog \u306b\u9001\u308b","permalink":"/send-circleci-run-execution-time-to-datadog"},"nextItem":{"title":"Skaffold \u3067\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u3060\u3051\u52d5\u304b\u3059\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","permalink":"/skaffold-generator"}},"content":"CircleCI \u306e\u7d44\u307f\u8fbc\u307f\u306e command `checkout` \u306e\u6ce8\u610f\u70b9\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002\\n\\n\u306a\u304a\u3001\u3053\u3053\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u5185\u5bb9\u306f 2020/04/24 \u6642\u70b9\u306e\u3082\u306e\u3067\u3042\u308a\u3001\u4e88\u544a\u306a\u3057\u306b `checkout` \u306e\u6319\u52d5\u304c\u5909\u308f\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001\u4eca\u56de\u306f\u8a71\u3092\u7c21\u7565\u5316\u3059\u308b\u305f\u3081\u3001 `checkout` \u5b9f\u884c\u6642\u70b9\u3067 `.git` \u304c\u306a\u3044(\u3064\u307e\u308a\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u3066\u3044\u306a\u3044)\u3082\u306e\u3068\u3057\u307e\u3059\u3002\\n\\n## \u6700\u521d\u306b\u7d50\u8ad6\\n\\n\u5148\u306b\u7d50\u8ad6\u3092\u66f8\u304f\u3068\\n\\n* CircleCI \u3067\u306f\u30ed\u30fc\u30ab\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u3092\u53c2\u7167\u3057\u306a\u3044\u307b\u3046\u304c\u826f\u3044($CIRCLE_BRANCH \u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u3067\u3042\u308b\u5834\u5408\u306f\u9664\u304f)\\n  * \u5c65\u6b74\u304c origin \u3068\u7570\u306a\u308a\u3001 $CIRCLE_BRANCH \u3068\u540c\u69d8\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\\n* \u4ee3\u308f\u308a\u306b origin \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u3092\u53c2\u7167\u3057\u305f\u307b\u3046\u304c\u826f\u3044\\n* `git branch -f <\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1> origin/<\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1>` \u3092\u5b9f\u884c\u3057\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u306e\u5c65\u6b74\u3092\u4fee\u6b63\u3059\u308b\u306e\u3082\u3042\u308a\\n\\n## checkout \u304c\u306a\u306b\u3092\u3084\u3063\u3066\u3044\u308b\u304b\\n\\n`checkout` \u3067\u306a\u306b\u3092\u3084\u3063\u3066\u3044\u308b\u304b\u306f\u5b9f\u969b\u306b\u4f7f\u3063\u3066\u307f\u3066 CircleCI \u306e job \u306e\u8a73\u7d30\u753b\u9762(?) \u304b\u3089\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n\u30b5\u30f3\u30d7\u30eb: https://app.circleci.com/pipelines/github/suzuki-shunsuke/test-circleci/73/workflows/5611059c-d6b1-4a34-91b5-45d6f149d408/jobs/96\\n\\n\u3053\u3053\u3067\u306f `checkout` \u306e\u5168\u3066\u306b\u3064\u3044\u3066\u306f\u89e6\u308c\u307e\u305b\u3093\u3002\u4e00\u90e8\u629c\u7c8b\u3057\u307e\u3059\u3002\\n\\n```sh\\nelif [ -n \\"$CIRCLE_BRANCH\\" ]\\nthen\\n  git reset --hard \\"$CIRCLE_SHA1\\"\\n  git checkout -q -B \\"$CIRCLE_BRANCH\\"\\nfi\\n```\\n\\n`git reset --hard` \u306a\u3069\u3092\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n## \u306a\u305c\u3053\u3093\u306a\u3053\u3068\u3092\u3057\u3066\u3044\u308b\u306e\u304b\uff1f\\n\\n\u306a\u3093\u3067\u3053\u3093\u306a\u3053\u3068\u3092\u3057\u3066\u3044\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\u5358\u306b `git checkout $CIRCLE_BRANCH` \u3068\u304b\u3058\u3083\u3060\u3081\u306a\u3093\u3067\u3057\u3087\u3046\u304b\uff1f\\n\\n\u672c\u5f53\u306e\u3068\u3053\u308d\u306f CircleCI \u306e\u4e2d\u306e\u4eba\u306b\u805e\u304b\u306a\u3044\u3068\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u81ea\u5206\u306a\u308a\u306b\u8003\u3048\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n\u6614\u5b9f\u884c\u3057\u305f job \u3092 rerun \u3059\u308b\u3053\u3068\u3092\u601d\u3044\u6d6e\u304b\u3079\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\nrerun \u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u306f\u3059\u3067\u306b remote branch \u304c\u524a\u9664\u3055\u308c\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u305d\u3046\u306a\u308c\u3070\u5358\u306b `git checkout` \u3067\u306f\u5931\u6557\u3057\u307e\u3059\u3002\\n\u307e\u305f\u3001branch \u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3082 $CIRCLE_SHA1 \u304c\u305d\u306e branch \u306e HEAD \u3068\u3082\u9650\u308a\u307e\u305b\u3093\u3002\\nforce push \u3067\u5c65\u6b74\u304c\u5909\u66f4\u3055\u308c\u3001 $CIRCLE_SHA1 \u304c CIRCLE_BRANCH \u306e\u5c65\u6b74\u4e0a\u306b\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n\u305d\u3046\u3044\u3063\u305f\u30b1\u30fc\u30b9\u3092\u8003\u616e\u3057\u3001\u3053\u306e\u3088\u3046\u306a\u5b9f\u88c5\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## \u6ce8\u610f\u70b9\\n\\n\u3057\u304b\u3057\u3001 `git reset --hard` \u3057\u3066\u3044\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u4e00\u3064\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\\n`git reset --hard` \u306f branch \u3092 $CIRCLE_BRANCH \u306b\u5207\u308a\u66ff\u3048\u308b\u524d\u306b\u5b9f\u884c\u3057\u3066\u3044\u308b\u305f\u3081\u3001\\n\u5b9f\u884c\u3057\u3066\u3044\u308b\u30d6\u30e9\u30f3\u30c1(\u57fa\u672c\u7684\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1)\u306e\u5c65\u6b74\u304c\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n## \u30ed\u30fc\u30ab\u30eb\u3067\u518d\u73fe\u3057\u3066\u307f\u308b\\n\\nCircleCI \u306e rerun with SSH \u3067\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u304c\u3001\\n\u30ed\u30fc\u30ab\u30eb\u306e\u9069\u5f53\u306a\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u540c\u69d8\u306e\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u3044\u3066\u307f\u308b\u3053\u3068\u3067\u7c21\u5358\u306b\u518d\u73fe\u3067\u304d\u307e\u3059\u3002\\n\\n```\\n$ mkdir sample\\n$ cd sample\\n$ git init\\n$ git commit --allow-empty -m \\"master first commit\\"\\n$ export CIRCLE_BRANCH=feature/hello\\n$ git checkout -b $CIRCLE_BRANCH\\n$ git commit --allow-empty -m \\"$CIRCLE_BRANCH first commit\\"\\n$ git log\\n$ git checkout master  # clone \u76f4\u5f8c\u306e\u72b6\u614b\\n$ export CIRCLE_SHA1=$(git rev-parse $CIRCLE_BRANCH)\\n\\n# \u3053\u3053\u304b\u3089 CircleCI \u540c\u69d8\u306e\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u3044\u3066\u307f\u308b\\n$ git reset --hard \\"$CIRCLE_SHA1\\"\\n$ git checkout -q -B \\"$CIRCLE_BRANCH\\"\\n```\\n\\n\u3053\u3053\u3067 git log \u3057\u3066\u307f\u308b\u3068 master branch \u306e\u5c65\u6b74\u304c $CIRCLE_BRANCH \u3068\u540c\u69d8\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## \u4f55\u304c\u56f0\u308b\u306e\u304b\\n\\n\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1 \u3092\u53c2\u7167\u3057\u306a\u3051\u308c\u3070\u7279\u306b\u56f0\u308b\u3053\u3068\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u3002\\n\u4e00\u65b9\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u3068\u306e\u5dee\u5206\u3092\u691c\u77e5\u3057\u3066\u5909\u66f4\u304c\u3042\u3063\u305f\u3082\u306e\u3060\u3051\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304b\u305d\u3046\u3044\u3046\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\\n```\\n$ git diff --name-only master $CIRCLE_BRANCH\\n```\\n\\n\u3053\u3046\u3059\u308b\u3068\u5dee\u5206\u304c\u306a\u3044\u3053\u3068\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\\n\\n## \u56de\u907f\u65b9\u6cd5\\n\\nmaster \u306e\u4ee3\u308f\u308a\u306b origin/master \u3092\u53c2\u7167\u3059\u308c\u3070\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\\n```\\n$ git diff --name-only origin/master $CIRCLE_BRANCH\\n```\\n\\n\u305f\u3060\u3001\u3046\u3063\u304b\u308a\u30ed\u30fc\u30ab\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u3092\u53c2\u7167\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u306f\u5341\u5206\u8003\u3048\u3089\u308c\u308b\u4e0a\u306b\u5225\u306b\u30a8\u30e9\u30fc\u306f\u8d77\u3053\u3089\u306a\u3044\u306e\u3067\u9593\u9055\u3044\u306b\u6c17\u3065\u304d\u306b\u304f\u3044\u3067\u3059\u3002\\n\\n\u305d\u3053\u3067 checkout \u76f4\u5f8c\u306b\u30ed\u30fc\u30ab\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u306e\u5c65\u6b74\u3092 origin \u3068\u5f37\u5236\u7684\u306b\u540c\u3058\u306b\u3057\u3066\u3057\u307e\u3046\u3068\u3044\u3046\u30c6\u30af\u30cb\u30c3\u30af(?)\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\\n\\n```sh\\nDEFAULT_BRANCH=master\\nif [ \\"${CIRCLE_BRANCH:-}\\" != \\"$DEFAULT_BRANCH\\" ]; then\\n  git branch -f \\"$DEFAULT_BRANCH\\" \\"origin/$DEFAULT_BRANCH\\"\\nfi\\n```\\n\\n\u3053\u3046\u3059\u308c\u3070\u9593\u9055\u3048\u3066\u30ed\u30fc\u30ab\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d6\u30e9\u30f3\u30c1\u3092\u53c2\u7167\u3057\u3066\u3057\u307e\u3063\u3066\u3082\u5b89\u5fc3\u3067\u3059\u3002\\n\u3068\u306f\u3044\u3048\u3001\u30b3\u30fc\u30c9\u3092\u90e8\u5206\u7684\u306b\u79fb\u690d\u3057\u305f\u308a\u3059\u308b\u969b\u306b\u3082\u5371\u967a(\u9593\u9055\u3044\u306b\u6c17\u3065\u304d\u306b\u304f\u3044)\u306a\u306e\u3067\u3001 origin \u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3057\u307e\u3059\u3002"},{"id":"/skaffold-generator","metadata":{"permalink":"/skaffold-generator","source":"@site/blog/skaffold-generator.md","title":"Skaffold \u3067\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u3060\u3051\u52d5\u304b\u3059\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","description":"\u81ea\u4f5c\u306e CLI \u30c4\u30fc\u30eb skaffold-generator \u306e\u7d39\u4ecb\u3067\u3059\u3002","date":"2020-04-05T09:53:25.000Z","formattedDate":"April 5, 2020","tags":[{"label":"k8s","permalink":"/tags/k-8-s"},{"label":"skaffold","permalink":"/tags/skaffold"},{"label":"skaffold-generator","permalink":"/tags/skaffold-generator"},{"label":"oss","permalink":"/tags/oss"}],"readingTime":6.325,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Skaffold \u3067\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u3060\u3051\u52d5\u304b\u3059\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","date":"2020-04-05T09:53:25.000Z","tags":["k8s","skaffold","skaffold-generator","oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"CircleCI \u306e checkout \u306e\u6ce8\u610f\u70b9","permalink":"/circleci-checkout-default-branch"},"nextItem":{"title":"Terraform \u30cf\u30f3\u30ba\u30aa\u30f3 with MySQL Provider","permalink":"/terraform-hands-on-with-mysql-provider"}},"content":"\u81ea\u4f5c\u306e CLI \u30c4\u30fc\u30eb [skaffold-generator](https://github.com/suzuki-shunsuke/skaffold-generator) \u306e\u7d39\u4ecb\u3067\u3059\u3002\\n\u30d7\u30ed\u30c8\u30bf\u30a4\u30d4\u30f3\u30b0\u307f\u305f\u3044\u306a\u30ce\u30ea\u3067\u534a\u65e5\u304f\u3089\u3044\u3067\u5272\u3068\u624b\u65e9\u304f\u4f5c\u308c\u307e\u3057\u305f\u3002\\n\u540d\u524d\u304c\u9577\u304f\u3066\u9069\u5f53\u306a\u306e\u3067\u3082\u3063\u3068\u826f\u3044\u540d\u524d\u306a\u3044\u304b\u306a\u3068\u601d\u3063\u3066\u307e\u3059\u3002\\n\\n[Skaffold](https://github.com/suzuki-shunsuke/skaffold-generator) \u306b\u6b32\u3057\u3044\u6a5f\u80fd\u304c\u306a\u3044\u306e\u3067\u88dc\u5b8c\u3059\u308b\u611f\u3058\u3067\u4f5c\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u300c\u305d\u308c\u3007\u3007\u3067\u51fa\u6765\u308b\u3088\u300d\u3068\u304b\u3042\u3063\u305f\u3089(GitHub issue \u3068\u304b Twitter \u3067)\u6559\u3048\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\\n\\n## \u3069\u3093\u306a\u30c4\u30fc\u30eb\u304b\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb `skaffold-generator.yaml` \u3092\u76e3\u8996\u3057\u3066\u5909\u66f4\u304c\u3042\u3063\u305f\u3089 `skaffold.yaml` \u3092\u751f\u6210\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u30b5\u30fc\u30d3\u30b9\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u5b9a\u7fa9\u3067\u304d\u305f\u308a\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u6307\u5b9a\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u53ca\u3073\u305d\u308c\u304c\u4f9d\u5b58\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u306b\u95a2\u9023\u3057\u305f\u8a2d\u5b9a\u3060\u3051\u3092\u4f7f\u3063\u3066 `skaffold.yaml` \u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\\n\u3053\u306e\u30c4\u30fc\u30eb\u306f `skaffold.yaml` \u3092\u751f\u6210\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u5b9f\u969b\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306b\u306f `skaffold` \u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u3044\u307e\u3059\u3002\\n\\n## \u306a\u305c\u4f5c\u3063\u305f\u304b\\n\\n\u5143\u3005\u30ed\u30fc\u30ab\u30eb\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u52d5\u304b\u3057\u306a\u304c\u3089\u958b\u767a\u3059\u308b\u305f\u3081\u306b Docker Compose \u3092\u4f7f\u3063\u3066\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3092 skaffold \u306b\u79fb\u884c\u51fa\u6765\u306a\u3044\u304b\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\\n\u307e\u3060 skaffold \u3092\u89e6\u308a\u59cb\u3081\u305f\u3070\u304b\u308a\u3067\u7406\u89e3\u304c\u6d45\u3044\u306e\u3067\u3059\u304c\u3001\\n\u672c\u756a\u74b0\u5883\u306f k8s \u3067\u52d5\u3044\u3066\u308b\u304b\u3089\u30ed\u30fc\u30ab\u30eb\u3082 k8s \u3067\u52d5\u304b\u305b\u308b\u3068\u3044\u3044\u304b\u306a\u3068\u601d\u3063\u305f\u308a\u3001\u3042\u3068\u306f\u5909\u66f4\u3092\u691c\u77e5\u3057\u3066\u81ea\u52d5\u3067\u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u304f\u308c\u305f\u308a\u3057\u3066\u4fbf\u5229\u305d\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\n\u307e\u3041\u7d50\u679c\u7684\u306b\u79fb\u884c\u3057\u306a\u3044\u3053\u3068\u306b\u306a\u3063\u305f\u3068\u3057\u3066\u3082\u3001 Skaffold \u3068\u73fe\u72b6\u306e\u4ed5\u7d44\u307f\u306b\u3064\u3044\u3066\u7406\u89e3\u304c\u6df1\u307e\u308c\u3070\u3044\u3044\u304b\u306a\u304f\u3089\u3044\u306e\u3064\u3082\u308a\u3067\u3059\u3002\\n\\n\u691c\u8a3c\u306e\u904e\u7a0b\u3067\u3001 \u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3053\u3068\u304c Docker Compose \u3060\u3068\u51fa\u6765\u308b\u3051\u3069 Skaffold \u3060\u3068\u96e3\u3057\u305d\u3046\u3060\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\n\\n* \u30b5\u30fc\u30d3\u30b9\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\\n  * Skaffold \u3068\u3044\u3046\u3088\u308a k8s \u306e\u554f\u984c\u304b\u3068\u306f\u601d\u3044\u307e\u3059\u304c\\n  * Docker Compose \u3060\u3068\u4f9d\u5b58\u3059\u308b\u3082\u306e\u3092\u81ea\u52d5\u3067\u8d77\u52d5\u3057\u3066\u304f\u308c\u3066\u4fbf\u5229\\n* \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u6307\u5b9a\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u3060\u3051\u8d77\u52d5\u3059\u308b\u3053\u3068\\n  * Skaffold \u3060\u3068 skafffold.yaml \u3067\u5b9a\u7fa9\u3057\u305f\u3082\u306e\u3059\u3079\u3066\u304c\u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3068\u3044\u3046\u8a8d\u8b58\\n\\n\u30b5\u30fc\u30d3\u30b9\u306e\u6570\u304c\u5c11\u306a\u3051\u308c\u3070\u5168\u90e8\u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4\u3067\u3082\u3044\u3044\u3067\u3059\u304c\u3001\\n\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3092\u30e2\u30ce\u30ec\u30dd\u3067\u7ba1\u7406\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u5834\u5408\u3001\\n\u3059\u3079\u3066\u306e\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3092\u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306e\u306f\u7121\u99c4\u304c\u5927\u304d\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u305d\u3053\u3067 `skaffold.yaml` \u306e\u5143\u3068\u306a\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\u3057\u3066\u5fc5\u8981\u6700\u5c0f\u9650\u306e `skaffold.yaml` \u3092\u751f\u6210\u3059\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n\\nGo \u306e\u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u3066\u304f\u3060\u3055\u3044\u3002 https://github.com/suzuki-shunsuke/skaffold-generator/releases\\n\\n## \u4f7f\u3044\u65b9\\n\\n\u4f7f\u3044\u65b9\u306f\u7c21\u5358\u3067\u3059\u3002\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3082\u3042\u308a\u307e\u305b\u3093\u3002\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b5\u30f3\u30d7\u30eb\u304c\u3042\u308b\u306e\u3067\u305d\u308c\u3092\u898b\u307e\u3057\u3087\u3046\u3002\\n\\n* https://github.com/suzuki-shunsuke/skaffold-generator#getting-started\\n* https://github.com/suzuki-shunsuke/skaffold-generator/tree/master/examples\\n\\n\u307e\u305a\u306f `skaffold-generator.yaml` \u3092\u7528\u610f\u3057\u307e\u3059\u3002\\n\\n`skaffold-generator.yaml` \u306f `base` \u3068 `services` \u304b\u3089\u306a\u308a\u307e\u3059\u3002\\n\\n`base` \u306f\u751f\u6210\u3055\u308c\u308b `skaffold.yaml` \u306e\u30d9\u30fc\u30b9\u3068\u306a\u308b\u3082\u306e\u3067\u3059\u3002\\n`deploy.kubectl.manifests` \u3068 `build.artifacts` \u306f\u4e0a\u66f8\u304d\u3055\u308c\u308b\u306e\u3067\u6307\u5b9a\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\\n\\n`services` \u3067\u306f\u30b5\u30fc\u30d3\u30b9\u306e\u30ea\u30b9\u30c8\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\\n\u5404\u30b5\u30fc\u30d3\u30b9\u306f\u4ee5\u4e0b\u306e\u5c5e\u6027\u3092\u6301\u3061\u307e\u3059\u3002\\n\\n* name: \u30b5\u30fc\u30d3\u30b9\u540d\u3002\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3068 `depends_on` \u3067\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\u3059\u308b\u306e\u306b\u4f7f\u3046\u3002\u30e6\u30cb\u30fc\u30af\u306b\u3059\u308b\\n* manifests: skaffold.yaml \u306e `deploy.kubectl.manifests` \\n* artifacts: skaffold.yaml \u306e  `build.artifacts`\\n* depends_on: \u30b5\u30fc\u30d3\u30b9\u304c\u4f9d\u5b58\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u540d\u306e\u30ea\u30b9\u30c8\\n\\n\u7528\u610f\u3057\u305f\u3089 `skaffold-generator` \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 skaffold.yaml \u304c\u751f\u6210(\u65e2\u306b\u3042\u308c\u3070\u4e0a\u66f8\u304d)\u3055\u308c\u3001 `skaffold-generator.yaml` \u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u305f\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```\\n$ skaffold-generator\\n2020/04/05 18:19:37 start to watch skaffold-generator.yaml\\n```\\n\\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u304c `skaffold.yaml` \u306b\u53cd\u6620\u3055\u308c\u307e\u3059\u3002\\n\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 `skaffold dev` \u3092\u5b9f\u884c\u3059\u308c\u3070\\n\u751f\u6210\u3055\u308c\u305f `skaffold.yaml` \u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4\u51fa\u6765\u307e\u3059\u3002\\n\\n```\\n$ skaffold dev\\n```\\n\\n`skaffold-generator.yaml` \u3092\u5909\u66f4\u3059\u308c\u3070\u3001\u305d\u306e\u5909\u66f4\u3092\u691c\u77e5\u3057 `skaffold.yaml` \u304c\u66f4\u65b0\u3055\u308c\u3001\u305d\u3057\u3066 `skaffold dev` \u304c `skaffold.yaml` \u306e\u5909\u66f4\u3092\u691c\u77e5\u3057\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002\\n\\n\u5f15\u6570\u7121\u3057\u3067\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u3053\u306e\u30c4\u30fc\u30eb\u306e\u610f\u5473\u304c\u306a\u3044\u306e\u3067\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u6307\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```\\n$ skaffold-generator api\\n```\\n\\n\u3053\u3046\u3059\u308b\u3068\u30b5\u30fc\u30d3\u30b9 `api` \u3068 `api` \u304c\u4f9d\u5b58\u3059\u308b\u30b5\u30fc\u30d3\u30b9(\u4f9d\u5b58\u95a2\u4fc2\u306f\u518d\u5e30\u7684\u306b\u51e6\u7406\u3055\u308c\u307e\u3059)\u3060\u3051\u304c `skaffold.yaml` \u306b\u53cd\u6620\u3055\u308c\u307e\u3059\u3002\\n\u4f9d\u5b58\u95a2\u4fc2\u306f\u5faa\u74b0\u3057\u3066\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\\n\\n\u4f7f\u3044\u65b9\u306f\u4ee5\u4e0a\u3067\u3059\u3002\\n\\n## Docker Compose \u307f\u305f\u3044\u306b\u3067\u304d\u306a\u3044\u3053\u3068\\n\\nDocker Compose \u307f\u305f\u3044\u306b\u4f9d\u5b58\u95a2\u4fc2\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001\\nDocker Compose \u307f\u305f\u3044\u306b\u30c7\u30d7\u30ed\u30a4\u306e\u9806\u5e8f\u306f\u8003\u616e\u3055\u308c\u307e\u305b\u3093\u3002\\n\u307e\u3041\u3053\u306e\u30c4\u30fc\u30eb\u306f `skaffold.yaml` \u3092\u751f\u6210\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u4ed5\u65b9\u306a\u3044\u3067\u3059\u306d\u3002\\n\\n## \u6700\u5f8c\u306b\\n\\n\u4ee5\u4e0a\u3001 `skaffold-generator` \u306e\u7d39\u4ecb\u3067\u3057\u305f\u3002\\n\u307e\u3060\u4f5c\u3063\u305f\u3070\u3063\u304b\u3067\u81ea\u5206\u3067\u3082\u4f7f\u3048\u3066\u306a\u3044\u306e\u3067\u672c\u5f53\u306b\u4f7f\u3044\u7269\u306b\u306a\u308b\u306e\u304b\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001\\n\u8208\u5473\u3042\u308b\u4eba\u306f\u89e6\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002"},{"id":"/terraform-hands-on-with-mysql-provider","metadata":{"permalink":"/terraform-hands-on-with-mysql-provider","source":"@site/blog/terraform-hands-on-with-mysql-provider.md","title":"Terraform \u30cf\u30f3\u30ba\u30aa\u30f3 with MySQL Provider","description":"Terraform \u3092\u52c9\u5f37\u3059\u308b\u306b\u306f\u5b9f\u969b\u306b\u4f7f\u3063\u3066\u307f\u308b\u306e\u304c\u4e00\u756a\u624b\u3063\u53d6\u308a\u65e9\u3044\u3067\u3059\u304c\u3001","date":"2020-01-17T00:14:08.000Z","formattedDate":"January 17, 2020","tags":[{"label":"terraform","permalink":"/tags/terraform"}],"readingTime":39.02,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Terraform \u30cf\u30f3\u30ba\u30aa\u30f3 with MySQL Provider","date":"2020-01-17T00:14:08.000Z","tags":["terraform"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Skaffold \u3067\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u3060\u3051\u52d5\u304b\u3059\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","permalink":"/skaffold-generator"},"nextItem":{"title":"Terraform \u5165\u9580","permalink":"/terraform-getting-started"}},"content":"Terraform \u3092\u52c9\u5f37\u3059\u308b\u306b\u306f\u5b9f\u969b\u306b\u4f7f\u3063\u3066\u307f\u308b\u306e\u304c\u4e00\u756a\u624b\u3063\u53d6\u308a\u65e9\u3044\u3067\u3059\u304c\u3001\\n\u3067\u306f\u624b\u9803\u306a\u984c\u6750\u306f\u3042\u308b\u304b\u3068\u8a00\u308f\u308c\u308b\u3068\u5c11\u3057\u96e3\u3057\u3044\u3067\u3059\u3002\\n\\n[\u516c\u5f0f\u306e Getting Started \u3067\u306f AWS \u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059](https://learn.hashicorp.com/terraform/getting-started/build)\u304c\u3001\\nAWS \u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3084\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3057\u304a\u91d1\u3082\u304b\u304b\u3063\u3066\u3057\u307e\u3044\u307e\u3059(\u7121\u6599\u67a0\u306f\u3042\u308a\u307e\u3059\u304c)\u3002\\n\u3082\u3046\u5c11\u3057\u624b\u8efd\u306a\u3082\u306e\u304c\u6b32\u3057\u3044\u3068\u3053\u308d\u3067\u3059\u3002\\n\\n\u305d\u3053\u3067\u516c\u5f0f\u306e Provider \u3067\u4e01\u5ea6\u3044\u3044\u3082\u306e\u306f\u306a\u3044\u304b\u63a2\u3057\u305f\u3068\u3053\u308d\u3001 [MySQL Provider](https://www.terraform.io/docs/providers/mysql/) \u304c\u826f\u3055\u305d\u3046\u3067\u3057\u305f\u3002\\nMySQL \u306e\u30e6\u30fc\u30b6\u30fc\u3084 Database \u3092 Terraform \u3067\u7ba1\u7406\u3057\u305f\u3044\u3068\u306f\u81ea\u5206\u306f\u601d\u3044\u307e\u305b\u3093\u304c\u3001 Terraform \u306e\u5165\u9580\u3067\u904a\u3076\u306b\u306f\u3061\u3087\u3046\u3069\u3088\u3044\u3067\u3057\u3087\u3046\u3002\\n\\n\u3061\u306a\u307f\u306b\u516c\u5f0f\u306e Provider \u306e\u30ea\u30b9\u30c8\u306f\u3053\u3061\u3089\u3067\u3059\u3002\\n\\n* https://github.com/terraform-providers\\n* https://www.terraform.io/docs/providers/index.html\\n\\n\u307e\u305f\u3001 Terraform \u306b\u95a2\u3057\u3066\u306f [Terraform \u5165\u9580](https://techblog.szksh.cloud/terraform-getting-started/) \u3082\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u4eca\u56de\u306e\u4f5c\u696d\u7528\u306b\u9069\u5f53\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u3053\u3067\u4f5c\u696d\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n\u4ee5\u964d\u3001\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u306f\u4e00\u90e8\u7701\u7565\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```\\n$ mkdir workspace\\n$ cd workspace\\n```\\n\\n## Terraform \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068 tfenv\\n\\nTerraform \u3092\u8907\u6570\u4eba\u3067\u4f7f\u3046\u5834\u5408\u3001 Terraform \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u63c3\u3048\u308b\u306e\u304c\u91cd\u8981\u3067\u3059\u3002 \u7406\u7531\u306e\u4e00\u3064\u3068\u3057\u3066\u3001 Terraform \u306e State \u306f State \u3092\u4f5c\u6210\u3057\u305f Terraform \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u8a18\u9332\u3057\u3066\u304a\u308a\u3001\u305d\u308c\u3088\u308a\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Terraform \u3067 `terraform plan` \u306a\u3069\u3092\u5b9f\u884c\u3059\u308b\u3068\u5931\u6557\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u6319\u3052\u3089\u308c\u307e\u3059(\u3053\u306e\u70b9\u306b\u3064\u3044\u3066\u306f\u5f8c\u3067\u3082\u89e6\u308c\u307e\u3059)\u3002\\n\u305d\u3046\u3044\u3046\u610f\u5473\u3067\u306f\u3001 [tfenv](https://github.com/tfutils/tfenv) \u306b\u3088\u3063\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3059\u308b\u306e\u304c\u826f\u3044\u3067\u3059\u3002\\n\\n`.terraform-version` \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n```\\n$ echo 0.12.19 > .terraform-version\\n$ tfenv install\\n$ terraform version\\nTerraform v0.12.19\\n```\\n\\n## MySQL \u3092 Docker \u3067\u52d5\u304b\u3059\\n\\n\u3067\u306f MySQL \u3092 Docker \u3067\u52d5\u304b\u3057\u307e\u3059\u3002\\n\\nhttps://hub.docker.com/_/mysql?tab=description\\n\\n### Docker Compose \u4f7f\u3046\u5834\u5408\\n\\ndocker-compose.yml\\n\\n```yaml\\n---\\nversion: \\"3\\"\\nservices:\\n  mysql:\\n    image: mysql:5.7.28\\n    ports:\\n    - \\"23306:3306\\"\\n    environment:\\n      MYSQL_ROOT_PASSWORD: password\\n```\\n\\n```\\n$ docker-compose up -d\\n$ docker-compose ps  # \u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\\n```\\n\\n\u4e0d\u8981\u306b\u306a\u3063\u305f\u3089\u524a\u9664\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```\\n$ docker-compose rm -sf mysql\\n```\\n\\n\u3053\u308c\u304b\u3089 Terraform \u3067 MySQL \u306e Database \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b MySQL \u306b\u63a5\u7d9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\\n\\n```\\n$ docker-compose exec mysql mysql -u root -p -P 23306\\nmysql> show databases;  # database \u306e\u4e00\u89a7\u3092\u78ba\u8a8d\\n+--------------------+\\n| Database           |\\n+--------------------+\\n| information_schema |\\n| mysql              |\\n| performance_schema |\\n| sys                |\\n+--------------------+\\n4 rows in set (0.00 sec)\\n```\\n\\n### Docker Compose \u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\\n\\n\u57fa\u672c\u7684\u306b Docker Compose \u4f7f\u3046\u5834\u5408\u3068\u5909\u308f\u308a\u307e\u305b\u3093\u3002\\n\\n```\\n$ docker run --name terraform-mysql -p \\"23306:3306\\" -e MYSQL_ROOT_PASSWORD=password -d mysql:5.7.28\\n$ docker exec -ti terraform-mysql mysql -u root -p -P 23306\\n$ docker rm -vf terraform-mysql\\n```\\n\\n## \u30ea\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\\n\\n\u6b21\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\\n\\nmain.tf\\n\\n```hcl\\nprovider \\"mysql\\" {\\n  endpoint = \\"localhost:23306\\"\\n  username = \\"root\\"\\n  password = \\"password\\"\\n}\\n\\nresource \\"mysql_database\\" \\"foo\\" {\\n  name = \\"foo\\"\\n}\\n```\\n\\n\u8a2d\u5b9a\u3067\u304d\u308b\u5c5e\u6027\u3084\u305d\u306e\u610f\u5473\u306a\u3069\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\nhttps://www.terraform.io/docs/providers/mysql/r/database.html\\n\\nMySQL Provider \u306e\u8a2d\u5b9a\u3068\u3057\u3066 MySQL \u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u60c5\u5831\u3068\u3001Terraform \u306b\u3088\u3063\u3066\u4f5c\u6210\u3059\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 `foo` \u306e\u8a2d\u5b9a\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\npassword \u304c\u5e73\u6587\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u304c\u6c17\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u4e00\u65e6\u30b9\u30eb\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u3053\u306e\u72b6\u614b\u3067 `terraform plan` \u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002 `terraform plan` \u306f `terraform apply` \u306b\u3088\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\u3092 DRY RUN \u3059\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\\n\\n```\\n$ terraform plan\\n\\nError: Could not satisfy plugin requirements\\n\\n\\nPlugin reinitialization required. Please run \\"terraform init\\".\\n\\nPlugins are external binaries that Terraform uses to access and manipulate\\nresources. The configuration provided requires plugins which can\'t be located,\\ndon\'t satisfy the version constraints, or are otherwise incompatible.\\n\\nTerraform automatically discovers provider requirements from your\\nconfiguration, including providers used in child modules. To see the\\nrequirements and constraints from each module, run \\"terraform providers\\".\\n\\n\\n\\nError: provider.mysql: no suitable version installed\\n  version requirements: \\"(any version)\\"\\n  versions installed: none\\n```\\n\\n\u5931\u6557\u3057\u307e\u3057\u305f\u3002\\n\\n> Plugin reinitialization required. Please run \\"terraform init\\".\\n\\n\u3068\u3042\u308b\u901a\u308a\u3001 `terraform plan` \u3084 `apply` \u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u524d\u306b `terraform init` \u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```\\n$ terraform init\\n\\nInitializing the backend...\\n\\nInitializing provider plugins...\\n- Checking for available provider plugins...\\n- Downloading plugin for provider \\"mysql\\" (terraform-providers/mysql) 1.9.0...\\n^C\\nThe following providers do not have any version constraints in configuration,\\nso the latest version was installed.\\n\\nTo prevent automatic upgrades to new major versions that may contain breaking\\nchanges, it is recommended to add version = \\"...\\" constraints to the\\ncorresponding provider blocks in configuration, with the constraint strings\\nsuggested below.\\n\\n* provider.mysql: version = \\"~> 1.9\\"\\n\\nTerraform has been successfully initialized!\\n\\nYou may now begin working with Terraform. Try running \\"terraform plan\\" to see\\nany changes that are required for your infrastructure. All Terraform commands\\nshould now work.\\n\\nIf you ever set or change modules or backend configuration for Terraform,\\nrerun this command to reinitialize your working directory. If you forget, other\\ncommands will detect it and remind you to do so if necessary.\\n```\\n\\nProvider \u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u3002\\n`terraform init` \u3092\u5b9f\u884c\u3059\u308b\u3068 `.terraform` \u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\\n\\n```\\n$ ls -A\\n.terraform  .terraform-version  main.tf\\n```\\n\\n`terraform init` \u306f\u4f55\u5ea6\u3067\u3082\u5b89\u5168\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\\n`.terraform` \u3092\u524a\u9664\u3057\u305f\u5834\u5408\u3067\u3082\u3082\u3046\u4e00\u5ea6 `terraform init` \u3092\u5b9f\u884c\u3059\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n\u6b21\u306b `terraform plan` \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n```\\n$ terraform plan\\nRefreshing Terraform state in-memory prior to plan...\\nThe refreshed state will be used to calculate this plan, but will not be\\npersisted to local or remote state storage.\\n\\n\\n------------------------------------------------------------------------\\n\\nAn execution plan has been generated and is shown below.\\nResource actions are indicated with the following symbols:\\n  + create\\n\\nTerraform will perform the following actions:\\n\\n  # mysql_database.foo will be created\\n  + resource \\"mysql_database\\" \\"foo\\" {\\n      + default_character_set = \\"utf8\\"\\n      + default_collation     = \\"utf8_general_ci\\"\\n      + id                    = (known after apply)\\n      + name                  = \\"foo\\"\\n    }\\n\\nPlan: 1 to add, 0 to change, 0 to destroy.\\n\\n------------------------------------------------------------------------\\n\\nNote: You didn\'t specify an \\"-out\\" parameter to save this plan, so Terraform\\ncan\'t guarantee that exactly these actions will be performed if\\n\\"terraform apply\\" is subsequently run.\\n```\\n\\n> Plan: 1 to add, 0 to change, 0 to destroy.\\n\\n\u3068\u3042\u308b\u901a\u308a\u3001\u30ea\u30bd\u30fc\u30b9\u304c 1 \u3064\u4f5c\u6210\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002 DRY RUN \u306a\u306e\u3067\u307e\u3060\u4f5c\u6210\u3055\u308c\u3066\u307e\u305b\u3093\u3002\\n\\n\u3067\u306f\u5b9f\u969b\u306b\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n```\\n$ terraform apply\\nAn execution plan has been generated and is shown below.\\nResource actions are indicated with the following symbols:\\n  + create\\n\\nTerraform will perform the following actions:\\n\\n  # mysql_database.foo will be created\\n  + resource \\"mysql_database\\" \\"foo\\" {\\n      + default_character_set = \\"utf8\\"\\n      + default_collation     = \\"utf8_general_ci\\"\\n      + id                    = (known after apply)\\n      + name                  = \\"foo\\"\\n    }\\n\\nPlan: 1 to add, 0 to change, 0 to destroy.\\n\\nDo you want to perform these actions?\\n  Terraform will perform the actions described above.\\n  Only \'yes\' will be accepted to approve.\\n\\n  Enter a value: yes\\n\\nmysql_database.foo: Creating...\\nmysql_database.foo: Creation complete after 0s [id=foo]\\n\\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\\n```\\n\\n\u9014\u4e2d\u78ba\u8a8d\u304c\u3042\u308b\u306e\u3067 `yes` \u3068\u5165\u529b\u3059\u308b\u3068\u5b9f\u969b\u306b\u5909\u66f4\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002\\n\\n\u672c\u5f53\u306b Database \u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\\nMySQL \u30af\u30a8\u30ea\u3092\u53e9\u304d\u307e\u3059\u3002\\n\\n```\\nmysql> show databases;\\n+--------------------+\\n| Database           |\\n+--------------------+\\n| information_schema |\\n| foo                |\\n| mysql              |\\n| performance_schema |\\n| sys                |\\n+--------------------+\\n5 rows in set (0.01 sec)\\n\\nmysql> select * from INFORMATION_SCHEMA.SCHEMATA where SCHEMA_NAME=\'foo\';\\n+--------------+-------------+----------------------------+------------------------+----------+\\n| CATALOG_NAME | SCHEMA_NAME | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |\\n+--------------+-------------+----------------------------+------------------------+----------+\\n| def          | foo         | utf8                       | utf8_general_ci        | NULL     |\\n+--------------+-------------+----------------------------+------------------------+----------+\\n1 row in set (0.00 sec)\\n```\\n\\n\u3042\u308a\u307e\u3057\u305f\u3002\\n\\n\u3059\u308b\u3068 `terraform.tfstate` \u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\\n\\n```\\n$ ls\\ndocker-compose.yml main.tf  terraform.tfstate\\n```\\n\\n\u3053\u3093\u306a JSON \u30d5\u30a1\u30a4\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```json\\n{\\n  \\"version\\": 4,\\n  \\"terraform_version\\": \\"0.12.19\\",\\n  \\"serial\\": 1,\\n  \\"lineage\\": \\"7011a551-bfa1-96a5-4153-2c9d6f32251c\\",\\n  \\"outputs\\": {},\\n  \\"resources\\": [\\n    {\\n      \\"mode\\": \\"managed\\",\\n      \\"type\\": \\"mysql_database\\",\\n      \\"name\\": \\"foo\\",\\n      \\"provider\\": \\"provider.mysql\\",\\n      \\"instances\\": [\\n        {\\n          \\"schema_version\\": 0,\\n          \\"attributes\\": {\\n            \\"default_character_set\\": \\"utf8\\",\\n            \\"default_collation\\": \\"utf8_general_ci\\",\\n            \\"id\\": \\"foo\\",\\n            \\"name\\": \\"foo\\"\\n          },\\n          \\"private\\": \\"bnVsbA==\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n```\\n\\n\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u60c5\u5831\u3068\u3001 Terraform \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306a\u3069\u306e\u30e1\u30bf\u60c5\u5831\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u57fa\u672c\u7684\u306b terraform \u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u308b\u3082\u306e\u3067\u3042\u308a\u3001\u4eba\u9593\u304c\u624b\u3067\u4fee\u6b63\u3059\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n## \u53e4\u3044 Terraform \u3092\u4f7f\u3063\u3066\u307f\u308b\\n\\n\u3053\u3053\u3067\u3042\u3048\u3066\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Terraform \u3092\u4f7f\u3063\u3066 `terraform plan` \u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n```\\n$ echo 0.12.12 > .terraform-version\\n$ tfenv install\\n$ terraform version\\n$ terraform plan\\nError: Error locking state: Error acquiring the state lock: state snapshot was created by Terraform v0.12.19, which is newer than current v0.12.12; upgrade to Terraform v0.12.19 or greater to work with this state\\n\\nTerraform acquires a state lock to protect the state from being written\\nby multiple users at the same time. Please resolve the issue above and try\\nagain. For most commands, you can disable locking with the \\"-lock=false\\"\\nflag, but this is not recommended.\\n```\\n\\n\u5931\u6557\u3057\u307e\u3057\u305f\u3002 State \u306e lock \u306b\u5931\u6557\u3057\u305f\u3088\u3046\u3067\u3059\u3002 State \u306e lock \u306b\u3064\u3044\u3066\u306f https://techblog.szksh.cloud/terraform-state-locking/ \u3082\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u3053\u306e\u3088\u3046\u306b\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e terraform \u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\\n\u4e00\u65b9\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u3046\u306b\u306f\u554f\u984c\u306a\u304f\u4f7f\u3048\u307e\u3059\u304c\u3001 State \u306e `terraform_version` \u304c\u66f4\u65b0\u3055\u308c\u3001\u305d\u308c\u307e\u3067\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u305f\u4eba\u304c\u7a81\u7136 `terraform plan` \u306a\u3069\u304c\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\\n\u3053\u308c\u304c\u524d\u8ff0\u3057\u305f\u610f\u5473\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n> Terraform \u3092\u8907\u6570\u4eba\u3067\u4f7f\u3046\u5834\u5408\u3001 Terraform \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u63c3\u3048\u308b\u306e\u304c\u91cd\u8981\u3067\u3059\u3002 \u7406\u7531\u306e\u4e00\u3064\u3068\u3057\u3066\u3001 Terraform \u306e State \u306f State \u3092\u4f5c\u6210\u3057\u305f Terraform \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u8a18\u9332\u3057\u3066\u304a\u308a\u3001\u305d\u308c\u3088\u308a\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Terraform \u3067 `terraform plan` \u306a\u3069\u3092\u5b9f\u884c\u3059\u308b\u3068\u5931\u6557\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u6319\u3052\u3089\u308c\u307e\u3059(\u3053\u306e\u70b9\u306b\u3064\u3044\u3066\u306f\u5f8c\u3067\u3082\u89e6\u308c\u307e\u3059)\u3002\\n\\n\u3067\u306f\u5143\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u623b\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```\\n$ echo 0.12.19 > .terraform-version\\n$ terraform version\\n$ terraform plan\\nNo changes. Infrastructure is up-to-date.\\n```\\n\\n## \u30ea\u30bd\u30fc\u30b9\u306e\u66f4\u65b0\\n\\n\u540c\u3058\u8abf\u5b50\u3067\u3082\u3046\u4e00\u3064 Database \u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\nDatabase foo \u306e\u8a2d\u5b9a\u3092\u30b3\u30d4\u30fc\u3057\u3066 `terraform plan` \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"foo\\" {\\n  name = \\"foo\\"\\n}\\n\\nresource \\"mysql_database\\" \\"foo\\" {\\n  name = \\"foo\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\n\\nError: Duplicate resource \\"mysql_database\\" configuration\\n\\n  on main.tf line 11:\\n  11: resource \\"mysql_database\\" \\"foo\\" {\\n\\nA mysql_database resource named \\"foo\\" was already declared at main.tf:7,1-32.\\nResource names must be unique per type in each module.\\n```\\n\\n\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u901a\u308a\u3001\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u306f\u30e6\u30cb\u30fc\u30af\u3067\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\\n\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"foo\\" {\\n  name = \\"foo\\"\\n}\\n\\nresource \\"mysql_database\\" \\"bar\\" { # \\"foo\\" \u3092 \\"bar\\" \u306b\u5909\u66f4\\n  name = \\"foo\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # mysql_database.bar will be created\\n  + resource \\"mysql_database\\" \\"bar\\" {\\n      + default_character_set = \\"utf8\\"\\n      + default_collation     = \\"utf8_general_ci\\"\\n      + id                    = (known after apply)\\n      + name                  = \\"foo\\"\\n    }\\n\\nPlan: 1 to add, 0 to change, 0 to destroy.\\n```\\n\\n\u4f5c\u6210\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002 apply \u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n```\\n$ terraform apply\\nmysql_database.bar: Creating...\\n\\nError: Error 1007: Can\'t create database \'foo\'; database exists\\n\\n  on main.tf line 11, in resource \\"mysql_database\\" \\"bar\\":\\n  11: resource \\"mysql_database\\" \\"bar\\" {\\n```\\n\\n\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u540c\u3058\u540d\u524d\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f\u4f5c\u6210\u3067\u304d\u306a\u3044\u306e\u3067\u5f53\u7136\u3067\u3059\u3002\\n\u3053\u306e\u3088\u3046\u306b plan \u306b\u6210\u529f\u3057\u3066\u3082 apply \u306b\u5931\u6557\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u3059\u3002\\n\\n\u3067\u306f name \u3092\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\u3002\u3064\u3044\u3067\u306b database foo \u306e default character set \u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"foo\\" {\\n  name                  = \\"foo\\"\\n  default_character_set = \\"utf8mb4\\" # default character set \u3092\u4fee\u6b63\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f utf8\\n}\\n\\nresource \\"mysql_database\\" \\"bar\\" {\\n  name = \\"bar\\" # \u540d\u524d\u3092 foo \u304b\u3089 bar \u306b\u5909\u66f4\\n}\\n```\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # mysql_database.bar will be created\\n  + resource \\"mysql_database\\" \\"bar\\" {\\n      + default_character_set = \\"utf8\\"\\n      + default_collation     = \\"utf8_general_ci\\"\\n      + id                    = (known after apply)\\n      + name                  = \\"bar\\"\\n    }\\n\\n  # mysql_database.foo will be updated in-place\\n  ~ resource \\"mysql_database\\" \\"foo\\" {\\n      ~ default_character_set = \\"utf8\\" -> \\"utf8mb4\\"\\n        default_collation     = \\"utf8_general_ci\\"\\n        id                    = \\"foo\\"\\n        name                  = \\"foo\\"\\n    }\\n\\nPlan: 1 to add, 1 to change, 0 to destroy.\\n```\\n\\n```\\n$ terraform apply\\nmysql_database.bar: Creating...\\nmysql_database.foo: Modifying... [id=foo]\\nmysql_database.bar: Creation complete after 0s [id=bar]\\n\\nError: Error 1253: COLLATION \'utf8_general_ci\' is not valid for CHARACTER SET \'utf8mb4\'\\n\\n  on main.tf line 7, in resource \\"mysql_database\\" \\"foo\\":\\n   7: resource \\"mysql_database\\" \\"foo\\" {\\n```\\n\\nmysql_database.foo \u306e\u5909\u66f4\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u65b9 mysql_database.bar \u306e\u4f5c\u6210\u306b\u306f\u6210\u529f\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```\\nmysql> show databases;\\n+--------------------+\\n| Database           |\\n+--------------------+\\n| information_schema |\\n| bar                |\\n| foo                |\\n| mysql              |\\n| performance_schema |\\n| sys                |\\n+--------------------+\\n6 rows in set (0.00 sec)\\n\\nmysql> select * from INFORMATION_SCHEMA.SCHEMATA where SCHEMA_NAME=\'foo\';\\n+--------------+-------------+----------------------------+------------------------+----------+\\n| CATALOG_NAME | SCHEMA_NAME | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |\\n+--------------+-------------+----------------------------+------------------------+----------+\\n| def          | foo         | utf8                       | utf8_general_ci        | NULL     |\\n+--------------+-------------+----------------------------+------------------------+----------+\\n1 row in set (0.00 sec)\\n```\\n\\n\u3053\u306e\u3088\u3046\u306b\u3001\u4e00\u90e8\u306e\u5909\u66f4\u306e\u9069\u7528\u306b\u5931\u6557\u306b\u3057\u3066\u3082\u3001\u305d\u306e\u4ed6\u306e\u5909\u66f4\u306f\u9069\u7528\u3055\u308c\u308b\u3068\u3044\u3046\u3001\u3042\u308b\u610f\u5473\u4e2d\u9014\u534a\u7aef\u306b apply \u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3046\u3044\u3063\u305f\u5834\u5408\u306b rollback \u3059\u308b\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u306f\u306a\u3044\u306e\u3067\u6c17\u3092\u3064\u3051\u307e\u3057\u3087\u3046\u3002\u9069\u7528\u3055\u308c\u305f\u5909\u66f4\u306f\u3061\u3083\u3093\u3068 State \u306b\u53cd\u6620\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n\u3067\u306f mysql_database.foo \u306e\u5909\u66f4\u306b\u5931\u6557\u3057\u305f\u306e\u3067\u3001\u9069\u5207\u306b\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"foo\\" {\\n  name                  = \\"foo\\"\\n  default_character_set = \\"utf8mb4\\"\\n  default_collation     = \\"utf8mb4_general_ci\\" # utf8_general_ci \u304b\u3089\u5909\u66f4\\n}\\n```\\n\\napply \u306b `--auto-approve` \u3068\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3068\u78ba\u8a8d\u306a\u3057\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002CI\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306b\u306f\u57fa\u672c\u3053\u308c\u3092\u3064\u3051\u308b\u3053\u3068\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n```\\n$ terraform apply --auto-approve\\nmysql_database.foo: Refreshing state... [id=foo]\\nmysql_database.bar: Refreshing state... [id=bar]\\nmysql_database.foo: Modifying... [id=foo]\\nmysql_database.foo: Modifications complete after 0s [id=foo]\\n\\nApply complete! Resources: 0 added, 1 changed, 0 destroyed.\\n```\\n\\n\u5909\u66f4\u3067\u304d\u307e\u3057\u305f\u3002\\n\\n```\\nmysql> select * from INFORMATION_SCHEMA.SCHEMATA where SCHEMA_NAME=\'foo\';\\n+--------------+-------------+----------------------------+------------------------+----------+\\n| CATALOG_NAME | SCHEMA_NAME | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |\\n+--------------+-------------+----------------------------+------------------------+----------+\\n| def          | foo         | utf8mb4                    | utf8mb4_general_ci     | NULL     |\\n+--------------+-------------+----------------------------+------------------------+----------+\\n1 row in set (0.00 sec)\\n```\\n\\n## terraform.tfstate.backup\\n\\n\u3068\u3053\u308d\u3067 `terraform.tfstate.backup` \u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u3089\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n```\\n$ ls\\ndocker-compose.yml main.tf  terraform.tfstate  terraform.state.backup\\n```\\n\\n\u3053\u308c\u306f\u540d\u524d\u306e\u901a\u308a `terraform.tfstate` \u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3067\u3059\u3002\\n`terraform.tfstate` \u304c terraform \u306e\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066\u66f4\u65b0\u3055\u308c\u308b\u524d\u306b\u81ea\u52d5\u7684\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\\n\\n## \u30ea\u30bd\u30fc\u30b9\u306e recreate\\n\\n\u4eca\u5ea6\u306f database \u306e\u540d\u524d\u3092\u5909\u66f4\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"foo\\" {\\n  name                  = \\"foo2\\" # foo \u304b\u3089\u5909\u66f4\\n  default_character_set = \\"utf8mb4\\"\\n  default_collation     = \\"utf8mb4_general_ci\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # mysql_database.foo must be replaced\\n-/+ resource \\"mysql_database\\" \\"foo\\" {\\n        default_character_set = \\"utf8mb4\\"\\n        default_collation     = \\"utf8mb4_general_ci\\"\\n      ~ id                    = \\"foo\\" -> (known after apply)\\n      ~ name                  = \\"foo\\" -> \\"foo2\\" # forces replacement\\n    }\\n\\nPlan: 1 to add, 0 to change, 1 to destroy.\\n```\\n\\n\u5148\u7a0b default_collation \u3068 default_character_set \u3092\u5909\u66f4\u3057\u305f\u969b\u306f\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u4eca\u5ea6\u306f\u65b0\u3057\u304f\u4f5c\u308a\u76f4\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002\\n\u3053\u308c\u306f\u30ea\u30bd\u30fc\u30b9\u306e\u5b9a\u7fa9\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\\n\\nhttps://github.com/terraform-providers/terraform-provider-mysql/blob/v1.9.0/mysql/resource_database.go#L31\\n\\n\u5c5e\u6027\u306e\u5b9a\u7fa9\u3067 `ForceNew: true` \u3068\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u5c5e\u6027\u304c\u5909\u66f4\u3055\u308c\u308b\u3068\u30ea\u30bd\u30fc\u30b9\u304c\u4f5c\u308a\u76f4\u3055\u308c\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u65e2\u5b58\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u66f4\u65b0\u306b\u306a\u308a\u307e\u3059\u3002\\n\u65b0\u3057\u304f\u4f5c\u308a\u76f4\u3055\u308c\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u306a\u3069\u306f\u6d88\u3048\u308b\u306f\u305a\u3067\u3059\u3002\u8a66\u3057\u306b\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u3063\u3066\u304a\u3044\u3066\u3001 apply \u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n```\\nmysql> show tables from foo;\\nEmpty set (0.00 sec)\\n\\nmysql> create table foo.zoo (id int);\\nQuery OK, 0 rows affected (0.03 sec)\\n\\nmysql> show tables from foo;\\n+---------------+\\n| Tables_in_foo |\\n+---------------+\\n| zoo           |\\n+---------------+\\n1 row in set (0.00 sec)\\n```\\n\\n```\\n$ terraform apply --auto-approve\\nmysql_database.foo: Refreshing state... [id=foo]\\nmysql_database.bar: Refreshing state... [id=bar]\\nmysql_database.foo: Destroying... [id=foo]\\nmysql_database.foo: Destruction complete after 0s\\nmysql_database.foo: Creating...\\nmysql_database.foo: Creation complete after 0s [id=foo2]\\n\\nApply complete! Resources: 1 added, 0 changed, 1 destroyed.\\n```\\n\\n> mysql_database.foo: Destroying... [id=foo]\\n\\n\u3068\u3042\u308b\u3088\u3046\u306b\u4e00\u5ea6\u524a\u9664\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n```\\nmysql> show tables from foo;\\nERROR 1049 (42000): Unknown database \'foo\'\\nmysql> show tables from foo2;\\nEmpty set (0.00 sec)\\n```\\n\\n\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u306f\u5148\u7a0b\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u3088\u3046\u306b recreate \u306f\u5371\u967a\u306a\u64cd\u4f5c\u306a\u306e\u3067\u3084\u308b\u3068\u304d\u306b\u306f\u6ce8\u610f\u3092\u6255\u3044\u307e\u3057\u3087\u3046\u3002\\n\\n## \u5909\u6570\u306e\u5229\u7528\\n\\n\u5909\u6570\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u8a2d\u5b9a\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"foo\\" {\\n  name                  = \\"foo2\\"\\n  default_character_set = var.default_character_set  # \u5909\u6570 default_character_set \u3092\u53c2\u7167\\n  default_collation     = \\"utf8mb4_general_ci\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\n\\nError: Reference to undeclared input variable\\n\\n  on main.tf line 9, in resource \\"mysql_database\\" \\"foo\\":\\n   9:   default_character_set = var.default_character_set\\n\\nAn input variable with the name \\"default_character_set\\" has not been declared.\\nThis variable can be declared with a variable \\"default_character_set\\" {}\\nblock.\\n```\\n\\n\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u5909\u6570\u3092\u5229\u7528\u3059\u308b\u306b\u306f\u5ba3\u8a00\u304c\u5fc5\u8981\u3067\u3059\u3002\\n`variables.tf` \u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```hcl\\nvariable \\"default_character_set\\" {\\n  type = string\\n}\\n```\\n\\n```\\n$ terraform plan\\nvar.default_character_set\\n  Enter a value:\\n```\\n\\n\u5024\u306e\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u5909\u6570\u306e\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3089\u3067\u3059\u3002\\n\u3053\u3053\u3067\u306f `foo` \u3068\u5165\u529b\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n```\\n$ terraform plan\\nvar.default_character_set\\n  Enter a value: foo\\n\\nTerraform will perform the following actions:\\n\\n  # mysql_database.foo will be updated in-place\\n  ~ resource \\"mysql_database\\" \\"foo\\" {\\n      ~ default_character_set = \\"utf8mb4\\" -> \\"foo\\"\\n        default_collation     = \\"utf8mb4_general_ci\\"\\n        id                    = \\"foo2\\"\\n        name                  = \\"foo2\\"\\n    }\\n\\nPlan: 0 to add, 1 to change, 0 to destroy.\\n```\\n\\n`-input=false` \u306b\u3059\u308b\u3068\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u305a\u306b\u30a8\u30e9\u30fc\u3092\u8fd4\u3057\u307e\u3059\u3002\\n\\n```\\n$ terraform plan -input=false\\n\\nError: No value for required variable\\n\\n  on variables.tf line 1:\\n   1: variable \\"default_character_set\\" {\\n\\nThe root module input variable \\"default_character_set\\" is not set, and has no\\ndefault value. Use a -var or -var-file command line argument to provide a\\nvalue for this variable.\\n```\\n\\n`terraform.tfvars` \u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```hcl\\ndefault_character_set = \\"utf8mb4\\"\\n```\\n\\n```\\n$ terraform plan\\n\\nNo changes. Infrastructure is up-to-date.\\n```\\n\\n`terraform.tfvars` \u306f\u7279\u5225\u306a\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u3068\u81ea\u52d5\u3067\u8aad\u307f\u8fbc\u307e\u308c\u307e\u3059\u3002\\n\\n\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5909\u3048\u3066 terraform plan \u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n```\\n$ mv terraform.tfvars main.tfvars\\n$ terraform plan\\nvar.default_character_set\\n  Enter a value:\\n```\\n\\n\u805e\u304b\u308c\u307e\u3057\u305f\u3002 main.tfvars \u304c\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u307e\u305b\u3093\u3002 `-var-file` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308c\u3070 main.tfvars \u3092\u8aad\u307f\u8fbc\u3081\u307e\u3059\u3002\\n\\n```\\n$ terraform plan -var-file=main.tfvars\\n```\\n\\n\u3082\u3068\u306b\u623b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\\n\\n```\\n$ mv main.tfvars terraform.tfvars\\n```\\n\\n## \u4ed6\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u306e\u53c2\u7167\\n\\n\u8a2d\u5b9a\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"foo\\" {\\n  name                  = \\"foo2\\"\\n  default_character_set = var.default_character_set\\n  default_collation     = \\"utf8mb4_general_ci\\"\\n}\\n\\nresource \\"mysql_database\\" \\"bar\\" {\\n  name                  = \\"bar\\"\\n  default_character_set = mysql_database.foo.default_character_set  # \u4ed6\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u3092\u53c2\u7167\\n  default_collation     = \\"utf8mb4_general_ci\\"  # default_character_set \u306b\u5408\u308f\u305b\u3066\u5909\u66f4\\n}\\n```\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # mysql_database.bar will be updated in-place\\n  ~ resource \\"mysql_database\\" \\"bar\\" {\\n      ~ default_character_set = \\"utf8\\" -> \\"utf8mb4\\"\\n      ~ default_collation     = \\"utf8_general_ci\\" -> \\"utf8mb4_general_ci\\"\\n        id                    = \\"bar\\"\\n        name                  = \\"bar\\"\\n    }\\n\\nPlan: 0 to add, 1 to change, 0 to destroy.\\n```\\n\\n```\\n$ terraform apply --auto-approve\\nmysql_database.foo: Refreshing state... [id=foo2]\\nmysql_database.bar: Refreshing state... [id=bar]\\nmysql_database.bar: Modifying... [id=bar]\\nmysql_database.bar: Modifications complete after 0s [id=bar]\\n\\nApply complete! Resources: 0 added, 1 changed, 0 destroyed.\\n```\\n\\n## terraform state rm\\n\\nhttps://www.terraform.io/docs/commands/state/rm.html\\n\\nTerraform \u306f State \u306b\u3088\u3063\u3066\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4e2d\u306e\u30ea\u30bd\u30fc\u30b9\u3068\u5b9f\u969b\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3066\u3044\u307e\u3059\u3002\\nState \u304b\u3089\u30ea\u30bd\u30fc\u30b9\u3092\u524a\u9664\u3057\u3066 `terraform plan` \u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u3001 Terraform \u306f\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u65b0\u898f\u3067\u4f5c\u6210\u3057\u3088\u3046\u3068\u3057\u307e\u3059\u3002\\n\\n```\\n$ terraform plan\\nNo changes. Infrastructure is up-to-date.\\n\\n$ terraform state rm mysql_database.bar\\nRemoved mysql_database.bar\\nSuccessfully removed 1 resource instance(s).\\n\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # mysql_database.bar will be created\\n  + resource \\"mysql_database\\" \\"bar\\" {\\n      + default_character_set = \\"utf8mb4\\"\\n      + default_collation     = \\"utf8mb4_general_ci\\"\\n      + id                    = (known after apply)\\n      + name                  = \\"bar\\"\\n    }\\n\\nPlan: 1 to add, 0 to change, 0 to destroy.\\n```\\n\\n\u5b9f\u969b\u306b\u306f\u540c\u3058\u540d\u524d\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f\u4f5c\u6210\u3067\u304d\u306a\u3044\u306e\u3067 `apply` \u3067\u5931\u6557\u3059\u308b\u306f\u305a\u3067\u3059\u3002\\n`terraform state rm` \u306f\u5143\u3005 Terraform \u3067\u7ba1\u7406\u3057\u3066\u3044\u305f\u3082\u306e\u3092 Terraform \u3067\u7ba1\u7406\u3059\u308b\u306e\u3092\u6b62\u3081\u305f\u308a\u3001\u3042\u308b\u3044\u306f\u624b\u52d5\u3067\u524a\u9664\u3057\u3066\u3057\u307e\u3063\u305f\u30ea\u30bd\u30fc\u30b9\u3092 State \u304b\u3089\u3082\u524a\u9664\u3059\u308b\u306e\u306b\u4f7f\u3048\u307e\u3059\u3002\\n\\n## terraform import\\n\\nhttps://www.terraform.io/docs/import/index.html\\nhttps://www.terraform.io/docs/commands/import.html\\n\\n`terraform import` \u306f Terraform \u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u306a\u3044\u30ea\u30bd\u30fc\u30b9\u3092 Terraform \u3067\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b State \u306b\u30ea\u30bd\u30fc\u30b9\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u8fbc\u3080\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\\n\u3061\u3087\u3046\u3069 `mysql_database.bar` \u3092 State \u304b\u3089\u6d88\u3057\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001 import \u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u3087\u3046\u3002\\n\\nhttps://www.terraform.io/docs/providers/mysql/r/database.html#import \u306b\u3042\u308b\u901a\u308a\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u3092\u6307\u5b9a\u3059\u308c\u3070 import \u51fa\u6765\u307e\u3059\u3002\\n\\n```\\n$ terraform import mysql_database.bar bar\\nmysql_database.bar: Importing from ID \\"bar\\"...\\nmysql_database.bar: Import prepared!\\n  Prepared mysql_database for import\\nmysql_database.bar: Refreshing state... [id=bar]\\n\\nImport successful!\\n\\nThe resources that were imported are shown above. These resources are now in\\nyour Terraform state and will henceforth be managed by Terraform.\\n```\\n\\nImport \u51fa\u6765\u307e\u3057\u305f\u3002 `terraform plan` \u3092\u5b9f\u884c\u3057\u3066\u5dee\u5206\u304c\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\\n\\n```\\n$ terraform plan\\nNo changes. Infrastructure is up-to-date.\\n```\\n\\n\u6b21\u306b\u624b\u52d5\u3067 Database \u3092\u4f5c\u6210\u3057\u3066\u305d\u308c\u3092 import \u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n```\\nmysql> create database zoo;\\nQuery OK, 1 row affected (0.00 sec)\\n```\\n\\n```\\n$ terraform import mysql_database.zoo zoo\\nError: resource address \\"mysql_database.zoo\\" does not exist in the configuration.\\n\\nBefore importing this resource, please create its configuration in the root module. For example:\\n\\nresource \\"mysql_database\\" \\"zoo\\" {\\n  # (resource arguments)\\n}\\n```\\n\\n\u5931\u6557\u3057\u307e\u3057\u305f\u3002 `mysql_database.zoo` \u304c\u5b58\u5728\u3057\u306a\u3044\u304b\u3089\u3067\u3059\u3002\\n\u7a7a\u3067\u826f\u3044\u306e\u3067\u30ea\u30bd\u30fc\u30b9\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"zoo\\" {\\n}\\n```\\n\\n```\\n$ terraform import mysql_database.zoo zoo\\nmysql_database.zoo: Importing from ID \\"zoo\\"...\\nmysql_database.zoo: Import prepared!\\n  Prepared mysql_database for import\\nmysql_database.zoo: Refreshing state... [id=zoo]\\n\\nImport successful!\\n\\nThe resources that were imported are shown above. These resources are now in\\nyour Terraform state and will henceforth be managed by Terraform.\\n```\\n\\nImport \u51fa\u6765\u305f\u306e\u3067 zoo \u3092 Terraform \u3067\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n`terraform plan` \u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n```\\n$ terraform plan\\n\\nError: Missing required argument\\n\\n  on main.tf line 19, in resource \\"mysql_database\\" \\"zoo\\":\\n  19: resource \\"mysql_database\\" \\"zoo\\" {\\n\\nThe argument \\"name\\" is required, but no definition was found.\\n```\\n\\nzoo \u306e\u8a2d\u5b9a\u304c\u7a7a\u3067 name \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u5931\u6557\u3057\u307e\u3057\u305f\u3002\\n\u4fee\u6b63\u3057\u307e\u3059\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"zoo\\" {\\n  name = \\"zoo\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # mysql_database.zoo will be updated in-place\\n  ~ resource \\"mysql_database\\" \\"zoo\\" {\\n      ~ default_character_set = \\"latin1\\" -> \\"utf8\\"\\n      ~ default_collation     = \\"latin1_swedish_ci\\" -> \\"utf8_general_ci\\"\\n        id                    = \\"zoo\\"\\n        name                  = \\"zoo\\"\\n    }\\n\\nPlan: 0 to add, 1 to change, 0 to destroy.\\n```\\n\\n\u307e\u3060\u5dee\u5206\u304c\u51fa\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\\n\\nImport \u306f State \u306b\u306f\u30ea\u30bd\u30fc\u30b9\u306e\u30c7\u30fc\u30bf\u3092\u53cd\u6620\u3057\u3066\u304f\u308c\u307e\u3059\u304c\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u306f\u53cd\u6620\u3057\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u81ea\u5206\u3067\u53cd\u6620\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\u4e00\u90e8\u306e Provider \u3067\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u81ea\u52d5\u3067\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u306e\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30c4\u30fc\u30eb\u3082\u3042\u308a\u307e\u3059\u3002\\n\\n\u4fee\u6b63\u3057\u307e\u3059\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"zoo\\" {\\n  name                  = \\"zoo\\"\\n  default_character_set = \\"latin1\\"\\n  default_collation     = \\"latin1_swedish_ci\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\nNo changes. Infrastructure is up-to-date.\\n```\\n\\n\u7121\u4e8b\u5dee\u5206\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n## \u30ea\u30bd\u30fc\u30b9\u306e\u524a\u9664\\n\\n\u6b21\u306b\u30ea\u30bd\u30fc\u30b9\u3092\u524a\u9664\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n`terraform destroy` \u3082\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u8a2d\u5b9a\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\\n\u3061\u306a\u307f\u306b Terraform \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u8a18\u8ff0\u8a00\u8a9e\u3067\u3042\u308b HCL \u3067\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u306f `#` \u3067\u3082 `//` \u3067\u3082\u3069\u3061\u3089\u3067\u3082\u826f\u3044\u3067\u3059\u3002\\n\\nhttps://github.com/hashicorp/hcl#syntax\\n\\n```hcl\\n# resource \\"mysql_database\\" \\"bar\\" {\\n#   name                  = \\"bar\\"\\n#   default_character_set = mysql_database.foo.default_character_set\\n#   default_collation     = \\"utf8mb4_general_ci\\"\\n# }\\n```\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # mysql_database.bar will be destroyed\\n  - resource \\"mysql_database\\" \\"bar\\" {\\n      - default_character_set = \\"utf8mb4\\" -> null\\n      - default_collation     = \\"utf8mb4_general_ci\\" -> null\\n      - id                    = \\"bar\\" -> null\\n      - name                  = \\"bar\\" -> null\\n    }\\n\\nPlan: 0 to add, 0 to change, 1 to destroy.\\n```\\n\\n```\\n$ terraform apply --auto-approve\\nmysql_database.foo: Refreshing state... [id=foo2]\\nmysql_database.bar: Refreshing state... [id=bar]\\nmysql_database.bar: Destroying... [id=bar]\\nmysql_database.bar: Destruction complete after 0s\\n\\nApply complete! Resources: 0 added, 0 changed, 1 destroyed.\\n```\\n\\n```\\nmysql> show databases;\\n+--------------------+\\n| Database           |\\n+--------------------+\\n| information_schema |\\n| foo2               |\\n| mysql              |\\n| performance_schema |\\n| sys                |\\n| zoo                |\\n+--------------------+\\n6 rows in set (0.00 sec)\\n```\\n\\n\u78ba\u304b\u306b\u524a\u9664\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n## terraform state mv\\n\\nhttps://www.terraform.io/docs/commands/state/mv.html\\n\\n\u3053\u3053\u3067 \u30ea\u30bd\u30fc\u30b9\u306e\u540d\u524d\u3092\u5909\u3048\u3066 `terraform plan` \u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u540d\u524d\u3092\u5909\u3048\u305f\u304f\u306a\u308b\u3053\u3068\u306f\u307e\u3041\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"foo2\\" { # foo \u304b\u3089 foo2 \u306b\u5909\u66f4\\n  name                  = \\"foo2\\"\\n  default_character_set = var.default_character_set\\n  default_collation     = \\"utf8mb4_general_ci\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # mysql_database.foo will be destroyed\\n  - resource \\"mysql_database\\" \\"foo\\" {\\n      - default_character_set = \\"utf8mb4\\" -> null\\n      - default_collation     = \\"utf8mb4_general_ci\\" -> null\\n      - id                    = \\"foo2\\" -> null\\n      - name                  = \\"foo2\\" -> null\\n    }\\n\\n  # mysql_database.foo2 will be created\\n  + resource \\"mysql_database\\" \\"foo2\\" {\\n      + default_character_set = \\"utf8mb4\\"\\n      + default_collation     = \\"utf8mb4_general_ci\\"\\n      + id                    = (known after apply)\\n      + name                  = \\"foo2\\"\\n    }\\n\\nPlan: 1 to add, 0 to change, 1 to destroy.\\n```\\n\\n\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u524a\u9664\u3055\u308c\u3066\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u4f5c\u6210\u3055\u308c\u3066\u3057\u307e\u3044\u305d\u3046\u3067\u3059\u3002\\nState \u306b\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u30d1\u30b9\u3092\u4fee\u6b63\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```\\n$ terraform state mv mysql_database.foo mysql_database.foo2\\nMove \\"mysql_database.foo\\" to \\"mysql_database.foo2\\"\\nSuccessfully moved 1 object(s).\\n```\\n\\n```\\n$ terraform plan\\nNo changes. Infrastructure is up-to-date.\\n```\\n\\n\u5dee\u5206\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n\u3053\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066 State \u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u7279\u306b\u8907\u6570\u4eba\u3067\u4f5c\u696d\u3059\u308b\u5834\u5408\u306f\u5b89\u6613\u306b\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u3092\u5909\u66f4\u3059\u308b\u3079\u304d\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n## terraform refresh\\n\\nhttps://www.terraform.io/docs/commands/refresh.html\\n\\n`terraform refresh` \u306f\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066 State \u306b\u53cd\u6620\u3055\u305b\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\\nTerraform \u3092\u4f7f\u308f\u305a\u306b\u52a0\u3048\u305f\u5909\u66f4\u3092 State \u306b\u53cd\u6620\u3055\u305b\u308b\u306e\u306b\u4f7f\u3048\u307e\u3059\u3002\\nTerraform \u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30d5\u30e9\u3092\u7ba1\u7406\u3057\u3066\u3044\u308b\u4ee5\u4e0a\u3001 Terraform \u3092\u4f7f\u308f\u305a\u306b\u30a4\u30f3\u30d5\u30e9\u3092\u5909\u66f4\u3059\u308b\u306e\u306f\u671b\u307e\u3057\u304f\u306a\u3044\u3067\u3059\u304c\u3001\u5b9f\u969b\u306e\u3068\u3053\u308d\u306f\u3088\u304f\u3042\u308b\u8a71\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nTerraform \u3092\u4f7f\u308f\u305a\u306b default_character_set \u3092\u5909\u66f4\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n```\\nmysql> ALTER DATABASE zoo DEFAULT CHARACTER SET utf8mb4;\\nQuery OK, 1 row affected (0.01 sec)\\n\\nmysql> select * from INFORMATION_SCHEMA.SCHEMATA where SCHEMA_NAME=\'zoo\';\\n+--------------+-------------+----------------------------+------------------------+----------+\\n| CATALOG_NAME | SCHEMA_NAME | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |\\n+--------------+-------------+----------------------------+------------------------+----------+\\n| def          | zoo         | utf8mb4                    | utf8mb4_general_ci     | NULL     |\\n+--------------+-------------+----------------------------+------------------------+----------+\\n1 row in set (0.00 sec)\\n```\\n\\ndefault_character_set \u3092\u5909\u3048\u308b\u3068\u81ea\u52d5\u3067 DEFAULT_COLLATION_NAME \u3082\u5909\u308f\u308a\u307e\u3057\u305f\u3002\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u3082\u5909\u66f4\u3092\u53cd\u6620\u3055\u305b\u307e\u3057\u3087\u3046\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"zoo\\" {\\n  name                  = \\"zoo\\"\\n  default_character_set = \\"utf8mb4\\"\\n  default_collation     = \\"utf8mb4_general_ci\\"\\n}\\n```\\n\\n`-refresh=false` \u3092\u3064\u3051\u3066 terraform plan \u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n```\\n$ terraform plan -refresh=false\\nTerraform will perform the following actions:\\n\\n  # mysql_database.zoo will be updated in-place\\n  ~ resource \\"mysql_database\\" \\"zoo\\" {\\n      ~ default_character_set = \\"latin1\\" -> \\"utf8mb4\\"\\n      ~ default_collation     = \\"latin1_swedish_ci\\" -> \\"utf8mb4_general_ci\\"\\n        id                    = \\"zoo\\"\\n        name                  = \\"zoo\\"\\n    }\\n\\nPlan: 0 to add, 1 to change, 0 to destroy.\\n\\nWarning: Resource targeting is in effect\\n\\nYou are creating a plan with the -target option, which means that the result\\nof this plan may not represent all of the changes requested by the current\\nconfiguration.\\n\\nThe -target option is not for routine use, and is provided only for\\nexceptional situations such as recovering from errors or mistakes, or when\\nTerraform specifically suggests to use it as part of an error message.\\n```\\n\\n\u5dee\u5206\u304c\u51fa\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u3053\u308c\u306f State \u304c\u66f4\u65b0\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3089\u3067\u3059\u3002\\nterraform.tfstate \u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n```json\\n    {\\n      \\"mode\\": \\"managed\\",\\n      \\"type\\": \\"mysql_database\\",\\n      \\"name\\": \\"zoo\\",\\n      \\"provider\\": \\"provider.mysql\\",\\n      \\"instances\\": [\\n        {\\n          \\"schema_version\\": 0,\\n          \\"attributes\\": {\\n            \\"default_character_set\\": \\"latin1\\",\\n            \\"default_collation\\": \\"latin1_swedish_ci\\",\\n            \\"id\\": \\"zoo\\",\\n            \\"name\\": \\"zoo\\"\\n          },\\n          \\"private\\": \\"eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==\\"\\n        }\\n      ]\\n    }\\n```\\n\\n`-refresh=false` \u3092\u53d6\u308b\u3068\u4eca\u5ea6\u306f\u5dee\u5206\u304c\u306a\u304f\u306a\u308b\u306f\u305a\u3067\u3059\u3002\\n\\n```\\n$ terraform plan\\nNo changes. Infrastructure is up-to-date.\\n```\\n\\n\u3053\u308c\u306f\u3001\u5b9f\u306f terraform plan \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f State \u306e\u5185\u5bb9\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6bd4\u8f03\u3059\u308b\u524d\u306b\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057 State \u306e\u5185\u5bb9\u3092\u30a4\u30f3\u30e1\u30e2\u30ea\u3067\u66f4\u65b0\u3057\u305f\u4e0a\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3068\u6bd4\u8f03\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002\\n\u305f\u3060\u3057\u3001\u30a4\u30f3\u30e1\u30e2\u30ea\u3067\u306e\u66f4\u65b0\u3067\u3042\u308a\u3001\u5b9f\u969b\u306e State \u304c\u66f4\u65b0\u3055\u308c\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u3002\\n\\n\u4eca\u307e\u3067\u30b9\u30eb\u30fc\u3057\u3066\u304d\u307e\u3057\u305f\u304c\u3001\u305d\u306e\u3053\u3068\u306f terraform plan \u306e\u7d50\u679c\u3067\u3082\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n```\\n$ terraform plan\\nRefreshing Terraform state in-memory prior to plan...\\nThe refreshed state will be used to calculate this plan, but will not be\\npersisted to local or remote state storage.\\n```\\n\\n\u3067\u306f\u306a\u3093\u3067 `-refresh=false` \u304c\u5fc5\u8981\u306b\u306a\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u7406\u7531\u306e\u4e00\u3064\u3068\u3057\u3066 `terraform plan` \u304c\u901f\u304f\u306a\u308b\u3053\u3068\u304c\u6319\u3052\u3089\u308c\u307e\u3059\u3002\\n\u3080\u3057\u308d `-refresh=false` \u3092\u3064\u3051\u306a\u3044\u3068\u3001\u7ba1\u7406\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u6570\u304c\u5897\u3048\u308c\u3070\u5897\u3048\u308b\u307b\u3069\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u304f\u308b\u306e\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3057\u3001\\n\u5834\u5408\u306b\u3088\u3063\u3066\u306f API \u306e rate limit \u306b\u5f15\u3063\u304b\u304b\u308b\u306a\u3093\u3066\u3053\u3068\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n\u306a\u306e\u3067\u666e\u6bb5 `-refresh=false` \u3092\u3064\u3051\u3066 `terraform plan` \u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3068 Terraform \u3092\u4f7f\u308f\u305a\u306b\u52a0\u3048\u305f\u30a4\u30f3\u30d5\u30e9\u306e\u4fee\u6b63\u3092 State \u306b\u53d6\u308a\u8fbc\u3080\u305f\u3081\u306b `terraform refresh` \u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u51fa\u3066\u304d\u305f\u308a\u3057\u307e\u3059\u3002\\n\\nState \u306f\u66f4\u65b0\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067 `-refresh=false` \u3068\u3059\u308c\u3070\u76f8\u5909\u308f\u3089\u305a\u5dee\u5206\u306f\u51fa\u307e\u3059\u3002\\n\\n```\\n$ terraform plan -refresh=false\\nTerraform will perform the following actions:\\n\\n  # mysql_database.zoo will be updated in-place\\n  ~ resource \\"mysql_database\\" \\"zoo\\" {\\n      ~ default_character_set = \\"utf8mb4\\" -> \\"latin1\\"\\n      ~ default_collation     = \\"utf8mb4_general_ci\\" -> \\"latin1_swedish_ci\\"\\n        id                    = \\"zoo\\"\\n        name                  = \\"zoo\\"\\n    }\\n\\nPlan: 0 to add, 1 to change, 0 to destroy.\\n```\\n\\n\u5dee\u5206\u304c\u51fa\u307e\u3057\u305f\u3002 `terraform refresh` \u3092\u5b9f\u884c\u3059\u308b\u3068 State \u304c\u66f4\u65b0\u3055\u308c\u3001\u5dee\u5206\u304c\u306a\u304f\u306a\u308b\u306f\u305a\u3067\u3059\u3002\\n\\n```\\n$ terraform refresh\\nmodule.app.mysql_database.db: Refreshing state... [id=app]\\nmysql_database.foo2: Refreshing state... [id=foo2]\\nmysql_database.zoo: Refreshing state... [id=zoo]\\n```\\n\\n```json\\n    {\\n      \\"mode\\": \\"managed\\",\\n      \\"type\\": \\"mysql_database\\",\\n      \\"name\\": \\"zoo\\",\\n      \\"provider\\": \\"provider.mysql\\",\\n      \\"instances\\": [\\n        {\\n          \\"schema_version\\": 0,\\n          \\"attributes\\": {\\n            \\"default_character_set\\": \\"utf8mb4\\",\\n            \\"default_collation\\": \\"utf8mb4_general_ci\\",\\n            \\"id\\": \\"zoo\\",\\n            \\"name\\": \\"zoo\\"\\n          },\\n          \\"private\\": \\"eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==\\"\\n        }\\n      ]\\n    }\\n```\\n\\n```\\n$ terraform plan -refresh=false\\nNo changes. Infrastructure is up-to-date.\\n```\\n\\n## Module\\n\\nhttps://www.terraform.io/docs/configuration/modules.html\\n\\n\u7c21\u5358\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n```\\n$ mkdir database\\nvi database/database.tf\\n```\\n\\n```hcl\\nresource \\"mysql_database\\" \\"db\\" {\\n  name                  = \\"app\\"\\n  default_character_set = \\"utf8mb4\\"\\n  default_collation     = \\"utf8mb4_general_ci\\"\\n}\\n```\\n\\n\u3067\u306f Module \u3092\u4f7f\u3063\u3066 database \u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\\n\\n```hcl\\nmodule \\"app\\" {\\n  source = \\"./database\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\nError: Module not installed\\n\\n  on main.tf line 25:\\n  25: module \\"app\\" {\\n\\nThis module is not yet installed. Run \\"terraform init\\" to install all modules\\nrequired by this configuration.\\n```\\n\\n\u5931\u6557\u3057\u307e\u3057\u305f\u3002 `terraform init` \u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```\\n$ terraform init\\n```\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # module.app.mysql_database.db will be created\\n  + resource \\"mysql_database\\" \\"db\\" {\\n      + default_character_set = \\"utf8mb4\\"\\n      + default_collation     = \\"utf8mb4_general_ci\\"\\n      + id                    = (known after apply)\\n      + name                  = \\"app\\"\\n    }\\n\\nPlan: 1 to add, 0 to change, 0 to destroy.\\n```\\n\\n```\\n$ terraform apply --auto-approve\\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\\n```\\n\\n### Module \u30d1\u30e9\u30e1\u30fc\u30bf\\n\\n\u3053\u308c\u3067 Module \u3092\u4f7f\u3063\u3066 Database \u3092\u4f5c\u308c\u307e\u3057\u305f\u304c\u3001 name \u304c \\"app\\" \u56fa\u5b9a\u306a\u306e\u3067\u4f7f\u3044\u3065\u3089\u3044\u3067\u3059\u306d\u3002\u540d\u524d\u3092\u5909\u3048\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\\n\\ndatabase/database.tf\\n\\n```hcl\\nresource \\"mysql_database\\" \\"db\\" {\\n  name                  = var.name\\n  default_character_set = \\"utf8mb4\\"\\n  default_collation     = \\"utf8mb4_general_ci\\"\\n}\\n```\\n\\ndatabase/variables.tf\\n\\n```hcl\\nvariable \\"name\\" {\\n  type = string\\n}\\n```\\n\\n```\\n$ terraform plan\\n\\nError: Missing required argument\\n\\n  on main.tf line 25, in module \\"app\\":\\n  25: module \\"app\\" {\\n\\nThe argument \\"name\\" is required, but no definition was found.\\n```\\n\\n\u5fc5\u9808\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\\n\\nhttps://www.terraform.io/docs/configuration/variables.html\\n\\n```hcl\\nvariable \\"name\\" {\\n  type    = string\\n  default = \\"app\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\nNo changes. Infrastructure is up-to-date.\\n```\\n\\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3057\u3066 name \u3092\u5909\u66f4\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```hcl\\nmodule \\"app\\" {\\n  source = \\"./database\\"\\n  name   = \\"app2\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # module.app.mysql_database.db must be replaced\\n-/+ resource \\"mysql_database\\" \\"db\\" {\\n        default_character_set = \\"utf8mb4\\"\\n        default_collation     = \\"utf8mb4_general_ci\\"\\n      ~ id                    = \\"app\\" -> (known after apply)\\n      ~ name                  = \\"app\\" -> \\"app2\\" # forces replacement\\n    }\\n```\\n\\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u305b\u307e\u3057\u305f\u3002\u3082\u3068\u306b\u623b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\\n\\n```hcl\\nmodule \\"app\\" {\\n  source = \\"./database\\"\\n  name   = \\"app\\"\\n}\\n```\\n\\n### Module Output\\n\\nhttps://www.terraform.io/docs/configuration/outputs.html\\n\\nmysql_database.bar \u304b\u3089 mysql_database.foo \u306e\u5c5e\u6027\u3092\u53c2\u7167\u3057\u305f\u3088\u3046\u306b\u3001 `module.app` \u3067\u4f5c\u6210\u3057\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u5c5e\u6027\u3092\u53c2\u7167\u3059\u308b\u306b\u306f\u3069\u3046\u3057\u305f\u3089\u3088\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\\n\u30e2\u30b8\u30e5\u30fc\u30eb\u5185\u3067\u3042\u308c\u3070\u666e\u901a\u306b\u53c2\u7167\u3067\u304d\u307e\u3059\u304c\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5916\u304b\u3089\u53c2\u7167\u3059\u308b\u306b\u306f\u3001 Module \u5074\u3067\u660e\u793a\u7684\u306b\u516c\u958b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4e0d\u4fbf\u306a\u5074\u9762\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30ab\u30d7\u30bb\u30eb\u5316\u3068\u3082\u8a00\u3048\u307e\u3059\u306d\u3002\\n\\ndefault_character_set \u3092\u516c\u958b\u3057\u307e\u3057\u3087\u3046\u3002\\n\\ndatabase/output.tf\\n\\n```hcl\\noutput \\"default_character_set\\" {\\n  value = mysql_database.db.default_character_set\\n}\\n```\\n\\n\u305d\u3057\u3066\u53c2\u7167\u3057\u307e\u3059\u3002\\n\\nmain.tf\\n\\n```hcl\\nresource \\"mysql_database\\" \\"zoo\\" {\\n  name                  = \\"zoo\\"\\n  default_character_set = module.app.default_character_set  # \u53c2\u7167\\n  default_collation     = \\"utf8mb4_general_ci\\"\\n}\\n```\\n\\n```\\n$ terraform plan\\nNo changes. Infrastructure is up-to-date.\\n```\\n\\n## terraform destroy\\n\\nhttps://www.terraform.io/docs/commands/destroy.html\\n\\n\u3053\u3053\u307e\u3067\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002\\n\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u6700\u5f8c\u306b\u3053\u308c\u307e\u3067\u4f5c\u3063\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u3087\u3046\u3002\\n`-target` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u3066\u7279\u5b9a\u306e\u30ea\u30bd\u30fc\u30b9\u3060\u3051\u524a\u9664\u3067\u304d\u307e\u3059\u3002\\n`-target` \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u8907\u6570\u56de\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\\n\\n```\\n$ terraform destroy -target=module.app\\n\\nTerraform will perform the following actions:\\n\\n  # mysql_database.zoo will be destroyed\\n  - resource \\"mysql_database\\" \\"zoo\\" {\\n      - default_character_set = \\"utf8mb4\\" -> null\\n      - default_collation     = \\"utf8mb4_general_ci\\" -> null\\n      - id                    = \\"zoo\\" -> null\\n      - name                  = \\"zoo\\" -> null\\n    }\\n\\n  # module.app.mysql_database.db will be destroyed\\n  - resource \\"mysql_database\\" \\"db\\" {\\n      - default_character_set = \\"utf8mb4\\" -> null\\n      - default_collation     = \\"utf8mb4_general_ci\\" -> null\\n      - id                    = \\"app\\" -> null\\n      - name                  = \\"app\\" -> null\\n    }\\n\\nPlan: 0 to add, 0 to change, 2 to destroy.\\n\\nDo you really want to destroy all resources?\\n  Terraform will destroy all your managed infrastructure, as shown above.\\n  There is no undo. Only \'yes\' will be accepted to confirm.\\n\\n  Enter a value: yes\\n```\\n\\nmodule.app \u3092\u6d88\u305d\u3046\u3068\u3057\u305f\u3089\u3001 mysql_database.zoo \u3082\u524a\u9664\u3055\u308c\u305d\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\u3053\u308c\u306f mysql_database.zoo \u304c module.app \u306e\u5c5e\u6027\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002\\n\\n```hcl\\nresource \\"mysql_database\\" \\"zoo\\" {\\n  name                  = \\"zoo\\"\\n  default_character_set = module.app.default_character_set  # module.app \u306b\u4f9d\u5b58\\n  default_collation     = \\"utf8mb4_general_ci\\"\\n}\\n```\\n\\n`-target` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067 `mysql_database.zoo` \u3092\u6307\u5b9a\u3059\u308c\u3070\u305d\u308c\u3060\u3051\u524a\u9664\u3055\u308c\u307e\u3059\u3002\\n\\n```\\n$ terraform destroy -target=mysql_database.zoo\\nTerraform will perform the following actions:\\n\\n  # mysql_database.zoo will be destroyed\\n  - resource \\"mysql_database\\" \\"zoo\\" {\\n      - default_character_set = \\"utf8mb4\\" -> null\\n      - default_collation     = \\"utf8mb4_general_ci\\" -> null\\n      - id                    = \\"zoo\\" -> null\\n      - name                  = \\"zoo\\" -> null\\n    }\\n\\nPlan: 0 to add, 0 to change, 1 to destroy.\\n\\nDo you really want to destroy all resources?\\n  Terraform will destroy all your managed infrastructure, as shown above.\\n  There is no undo. Only \'yes\' will be accepted to confirm.\\n\\n  Enter a value:\\n```\\n\\n\u78ba\u8a8d\u3055\u308c\u308b\u306e\u3067\u3001 yes \u3068\u5165\u529b\u3057\u3066\u524a\u9664\u3057\u307e\u3059\u3002\\n\\n```\\n  Enter a value: yes\\n\\nmysql_database.zoo: Destroying... [id=zoo]\\nmysql_database.zoo: Destruction complete after 0s\\n\\nWarning: Applied changes may be incomplete\\n\\nThe plan was created with the -target option in effect, so some changes\\nrequested in the configuration may have been ignored and the output values may\\nnot be fully updated. Run the following command to verify that no other\\nchanges are pending:\\n    terraform plan\\n\\nNote that the -target option is not suitable for routine use, and is provided\\nonly for exceptional situations such as recovering from errors or mistakes, or\\nwhen Terraform specifically suggests to use it as part of an error message.\\n\\n\\nDestroy complete! Resources: 1 destroyed.\\n```\\n\\n```\\nmysql> show databases;\\n+--------------------+\\n| Database           |\\n+--------------------+\\n| information_schema |\\n| app                |\\n| foo2               |\\n| mysql              |\\n| performance_schema |\\n| sys                |\\n+--------------------+\\n6 rows in set (0.00 sec)\\n```\\n\\n\u78ba\u304b\u306b\u6d88\u3048\u3066\u3044\u307e\u3059\u3002\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u306f\u6d88\u3048\u3066\u3044\u306a\u3044\u306e\u3067 `terraform plan` \u3092\u5b9f\u884c\u3059\u308b\u3068 Create \u3057\u3088\u3046\u3068\u3057\u307e\u3059\u3002\\n\\n```\\n$ terraform plan\\nTerraform will perform the following actions:\\n\\n  # mysql_database.zoo will be created\\n  + resource \\"mysql_database\\" \\"zoo\\" {\\n      + default_character_set = \\"utf8mb4\\"\\n      + default_collation     = \\"utf8mb4_general_ci\\"\\n      + id                    = (known after apply)\\n      + name                  = \\"zoo\\"\\n    }\\n\\nPlan: 1 to add, 0 to change, 0 to destroy.\\n```\\n\\n\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u5168\u3066\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u524a\u9664\u3057\u307e\u3059\u3002\\n\\n```\\n$ terraform destroy --auto-approve\\nmodule.app.mysql_database.db: Refreshing state... [id=app]\\nmysql_database.foo2: Refreshing state... [id=foo2]\\nmysql_database.foo2: Destroying... [id=foo2]\\nmodule.app.mysql_database.db: Destroying... [id=app]\\nmodule.app.mysql_database.db: Destruction complete after 0s\\nmysql_database.foo2: Destruction complete after 0s\\n\\nDestroy complete! Resources: 2 destroyed.\\n```\\n\\n```\\nmysql> show databases;\\n+--------------------+\\n| Database           |\\n+--------------------+\\n| information_schema |\\n| mysql              |\\n| performance_schema |\\n| sys                |\\n+--------------------+\\n4 rows in set (0.00 sec)\\n```\\n\\n\u5168\u90e8\u6d88\u3048\u307e\u3057\u305f\u3002"},{"id":"/terraform-getting-started","metadata":{"permalink":"/terraform-getting-started","source":"@site/blog/terraform-getting-started.md","title":"Terraform \u5165\u9580","description":"\u53c2\u8003","date":"2020-01-16T00:25:05.000Z","formattedDate":"January 16, 2020","tags":[{"label":"terraform","permalink":"/tags/terraform"}],"readingTime":25.02,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Terraform \u5165\u9580","date":"2020-01-16T00:25:05.000Z","tags":["terraform"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Terraform \u30cf\u30f3\u30ba\u30aa\u30f3 with MySQL Provider","permalink":"/terraform-hands-on-with-mysql-provider"},"nextItem":{"title":"Terraform \u306e State Locking \u306e\u6982\u8981","permalink":"/terraform-state-locking"}},"content":"## \u53c2\u8003\\n\\n* [10\u5206\u3067\u7406\u89e3\u3059\u308bTerraform | Qiita](https://qiita.com/Chanmoro/items/55bf0da3aaf37dc26f73)\\n* [Terraform\u5165\u9580\u8cc7\u6599(v0.12.0\u5bfe\u5fdc) ~\u57fa\u672c\u77e5\u8b58\u304b\u3089\u8a2d\u8a08\u3084\u904b\u7528\u3001\u77e5\u3063\u3066\u304a\u304f\u3079\u304dtips\u307e\u3067~ | Qiita](https://qiita.com/fukubaka0825/items/68506b1e6644404d6cc0)\\n* [AWS\u3067Terraform\u306b\u5165\u9580 | Developers.io](https://dev.classmethod.jp/cloud/terraform-getting-started-with-aws/)\\n* [Terraform\u8077\u4eba\u5165\u9580: \u65e5\u3005\u306e\u904b\u7528\u3067\u5b66\u3093\u3060\u77e5\u898b\u3092\u6de1\u3005\u3068\u307e\u3068\u3081\u308b | Qiita](https://qiita.com/minamijoyo/items/1f57c62bed781ab8f4d7)\\n\\n\u624b\u3092\u52d5\u304b\u3057\u305f\u3044\u65b9\u306f [Terraform \u30cf\u30f3\u30ba\u30aa\u30f3 with MySQL Provider](https://techblog.szksh.cloud/terraform-hands-on-with-mysql-provider/) \u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n## \u524d\u63d0\\n\\n* \u57f7\u7b46\u6642\u70b9 (2020/01/05) \u3067 Terraform \u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306f v0.12.18 \u3067\u3059\\n\\n## Terraform \u3068\u306f\\n\\n[Terraform](https://www.terraform.io/) \u306f Infrastructure as Code \u3092\u5b9f\u73fe\u3059\u308b\u6c4e\u7528\u7684\u306aCLI\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\u30a4\u30f3\u30d5\u30e9\u306e\u72b6\u614b\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5b9a\u7fa9\u3057\u3001\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\\n\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u72b6\u614b\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5dee\u5206\u3092\u691c\u77e5\u3057\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8ff0\u3055\u308c\u305f\u3068\u304a\u308a\u306b\u306a\u308b\u3088\u3046\u306b\u30a4\u30f3\u30d5\u30e9\u3092\u5909\u66f4(CRUD)\u3057\u307e\u3059\u3002\\n\\n[Hashicorp](https://www.hashicorp.com/) \u3068\u3044\u3046\u4f01\u696d\u304c\u30db\u30b9\u30c8\u3057\u3066\u3044\u308b OSS \u306b\u306a\u308a\u307e\u3059\u3002\\nGo \u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002 https://github.com/hashicorp/terraform\\n\\n## Terraform \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n\\nTerraform \u306f Go \u88fd\u306a\u306e\u3067 1 \u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3060\u3051\u3067\u3059\u3002\\n\\nhttps://www.terraform.io/downloads.html\\n\\ntfenv \u3092\u4f7f\u3046\u3068\u7ba1\u7406\u304c\u697d\u3067\u3059\u3002\\n\\nhttps://github.com/tfutils/tfenv\\n\\ntfenv \u306f Terraform \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30c4\u30fc\u30eb\u3067\u3059\u3002\\npyenv \u3084 rbenv \u306e Terraform \u7248\u307f\u305f\u3044\u306a\u3082\u306e\u3067\u3059\u3002\\n\\n## \u7528\u8a9e\u96c6\\n\\nhttps://www.terraform.io/docs/glossary.html\\n\\n## Provider\\n\\nhttps://www.terraform.io/docs/glossary.html#terraform-provider\\n\\nTerraform \u3092\u300c\u6c4e\u7528\u7684\u306a\u300d\u30c4\u30fc\u30eb\u3068\u3044\u3044\u307e\u3057\u305f\u304c\u3001\u3053\u3053\u3067\u3044\u3046\u300c\u6c4e\u7528\u7684\u300d\u3068\u306f\u3001 AWS \u306a\u3069\u306e\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u5c02\u7528\u3067\u306f\u306a\u304f\u3001\u69d8\u3005\u306a\u30b5\u30fc\u30d3\u30b9\u3092\u540c\u3058\u3088\u3046\u306b\u6271\u3046\u3053\u3068\u304c\u51fa\u6765\u308b\u3068\u3044\u3046\u610f\u5473\u3067\u3059\u3002\\n\u5b9f\u969b\u306b AWS \u306a\u3069\u306e\u30a4\u30f3\u30d5\u30e9\u3092\u64cd\u4f5c\u3059\u308b\u5834\u5408\u306b\u306f\u30a4\u30f3\u30d5\u30e9\u304c\u63d0\u4f9b\u3059\u308b API \u3092\u5229\u7528\u3059\u308b\u308f\u3051\u3067\u3059\u304c\u3001\\n\u30b5\u30fc\u30d3\u30b9\u56fa\u6709\u306e API \u547c\u3073\u51fa\u3057\u306a\u3069\u306e\u51e6\u7406\u3092 `Provider` \u3068\u3044\u3046\u5f62\u3067 Terraform \u672c\u4f53\u304b\u3089\u5207\u308a\u51fa\u3059\u3053\u3068\u3067\u3053\u306e\u6c4e\u7528\u6027\u306f\u5b9f\u73fe\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\nProvider \u306f AWS \u3084 GCP \u306a\u3069\u306e Hashicorp \u516c\u5f0f\u306e\u3082\u306e\u3082\u3042\u308c\u3070\u3001\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u88fd\u306e\u3082\u306e\u3082\u3042\u308a\u307e\u3059\u3057\u3001\u81ea\u5206\u3067\u4f5c\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\\n\\n* \u516c\u5f0f Provider\\n  * https://www.terraform.io/docs/providers/index.html\\n  * https://github.com/terraform-providers\\n* \u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3 Provider\\n  * https://www.terraform.io/docs/providers/type/community-index.html\\n  * [\u5ba3\u4f1d] [Graylog](https://www.graylog.org/products/open-source) \u306e Provider https://github.com/suzuki-shunsuke/go-graylog\\n\\n\u5c11\u3057\u7a81\u3063\u8fbc\u3093\u3060\u8a71\u3092\u3059\u308b\u3068\u3001 Terraform \u672c\u4f53\u540c\u69d8 Provider \u3082\u5b9f\u614b\u306f Golang \u3067\u66f8\u304b\u308c\u305f1\u30d0\u30a4\u30ca\u30ea\u3067\u3042\u308a\u3001\u672c\u4f53\u304b\u3089 Provider \u3092 RPC \u306b\u3088\u3063\u3066\u547c\u3073\u51fa\u3059\u3068\u3044\u3046\u5f62\u3067\u30d7\u30e9\u30b0\u30a4\u30f3\u6a5f\u69cb\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\\nhttps://github.com/hashicorp/go-plugin\\n\\n### \u4f59\u8ac7: Provider \u306e\u81ea\u4f5c\\n\\nProvider \u306e\u81ea\u4f5c\u306b\u8208\u5473\u306e\u3042\u308b\u65b9\u306f https://www.terraform.io/docs/extend/writing-custom-providers.html \u3092\u8aad\u3080\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\u305f\u3060\u3057\u3001\u305d\u308c\u3092\u8aad\u3081\u3070\u5168\u3066\u308f\u304b\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u306a\u304f\u3001\u4f5c\u308a\u306a\u304c\u3089 Terraform \u672c\u4f53\u3084 AWS\u306a\u3069\u306e\u516c\u5f0f\u306e Provider \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3084 GoDoc \u3092\u8aad\u307f\u3064\u3064\u8a66\u884c\u932f\u8aa4\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n* https://github.com/terraform-providers/terraform-provider-aws/tree/master/aws\\n* https://godoc.org/github.com/hashicorp/terraform/helper/schema#Schema\\n* https://godoc.org/github.com/hashicorp/terraform/helper/schema#ResourceData\\n\\n## \u30ea\u30bd\u30fc\u30b9\\n\\nhttps://www.terraform.io/docs/glossary.html#resource\\n\\nTerraform \u3067\u306f\u30a4\u30f3\u30d5\u30e9\u3092\u69cb\u6210\u3059\u308b\u6700\u5c0f\u306e\u69cb\u6210\u8981\u7d20\u3092 `\u30ea\u30bd\u30fc\u30b9` \u3068\u547c\u3073\u307e\u3059\u3002\\n\u4f8b\u3048\u3070\u30b5\u30fc\u30d0\u304c 3 \u53f0\u3042\u308c\u3070\u305d\u308c\u305e\u308c\u304c\u5225\u3005\u306e\u30ea\u30bd\u30fc\u30b9\u3068\u8a00\u3048\u307e\u3059\u3002\\n\u30ea\u30bd\u30fc\u30b9\u3054\u3068\u306b\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\\n`terraform apply` \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u5404\u30ea\u30bd\u30fc\u30b9\u306b\u3064\u3044\u3066\u8a2d\u5b9a\u3068\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u72b6\u614b\u306e\u5dee\u5206\u304c\u691c\u77e5\u3055\u308c\u3001\u30ea\u30bd\u30fc\u30b9\u3054\u3068\u306b CRUD \u51e6\u7406\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\n\\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\\n\\n* https://www.terraform.io/docs/configuration/index.html\\n* https://github.com/hashicorp/hcl/blob/hcl2/hclsyntax/spec.md\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f [HCL](https://github.com/hashicorp/hcl) \u3068\u3044\u3046\u8a00\u8a9e\u3067\u8a18\u8ff0\u3057\u307e\u3059\u3002\\nHCL \u306f Hashicorp Configuration Language \u306e\u7565\u3067\u3001 Hashicorp \u304c\u958b\u767a\u3057\u3066\u3044\u308b JSON \u3084 YAML \u306e\u3088\u3046\u306a\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3059\u308b\u8a00\u8a9e\u3067\u3059\u3002\\n\\nTerraform v0.12 \u3067\u306f HCL \u306e v2 \u3092\u4f7f\u3044\u307e\u3059\u3002 v1 \u306f\u53e4\u3044\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u62e1\u5f35\u5b50\u306f\u57fa\u672c `.tf` \u3067\u3059\u3002\\n\u6b21\u306e\u3088\u3046\u306a\u5f62\u3067\u30ea\u30bd\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\\n\\n```hcl\\n# resource \\"\u30ea\u30bd\u30fc\u30b9\u306e\u7a2e\u985e\\" \\"\u30ea\u30bd\u30fc\u30b9\u540d\\"\\nresource \\"aws_instance\\" \\"example\\" {\\n  # \u5c5e\u6027\u540d = \u5c5e\u6027\u5024\\n  ami           = \\"ami-2757f631\\"\\n  instance_type = \\"t2.micro\\"\\n}\\n```\\n\\n\u4f59\u8ac7\u3067\u3059\u304c\u3001 [GFM (GitHub Flavored Markdown)](https://github.github.com/gfm/) \u3067\u306f `hcl` \u3067\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30cf\u30a4\u30e9\u30a4\u30c8\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n\u5404\u30ea\u30bd\u30fc\u30b9\u5b9a\u7fa9\u306f\u30d1\u30b9\u306b\u3088\u3063\u3066\u8b58\u5225\u3055\u308c\u307e\u3059\u3002\\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30b7\u30f3\u30d7\u30eb\u306a\u30ea\u30bd\u30fc\u30b9\u306e\u5b9a\u7fa9\u306e\u5834\u5408 `\u30ea\u30bd\u30fc\u30b9\u306e\u7a2e\u985e.\u30ea\u30bd\u30fc\u30b9\u540d` (`aws_instance.example`) \u3067\u3059\u3002\u30d1\u30b9\u306f\u4e00\u610f\u3067\u306a\u3051\u308c\u3070\u3044\u3051\u307e\u305b\u3093\u3002\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u540c\u30581\u3064\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u304d\u307e\u3059\u3002\\n`terraform plan` \u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u306f\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3057\u304b\u898b\u307e\u305b\u3093\u3002\\n\\n\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u306f\u30ea\u30bd\u30fc\u30b9\u306e\u7a2e\u985e\u306b\u3088\u3063\u3066\u7570\u306a\u308a\u307e\u3059\u3002\\n\u5404Provider \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n\u4f8b\u3048\u3070 AWS \u306e EC2 instance \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089\u3067\u3059\u3002 https://www.terraform.io/docs/providers/aws/r/instance.html\\n\\n## \u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u306e\u53c2\u7167\\n\\n\u3042\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u8a2d\u5b9a\u3067\u4ed6\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u5024\u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\n\u30b5\u30f3\u30d7\u30eb\u3092\u793a\u3057\u307e\u3059\u3002\\n\\n```hcl\\nresource \\"aws_iam_instance_profile\\" \\"example\\" {\\n  # \u30ea\u30bd\u30fc\u30b9 aws_iam_role.example \u306e\u5c5e\u6027 name \u306e\u5024\u3092\u53c2\u7167\\n  role = aws_iam_role.example.name\\n}\\n```\\n\\n## State\\n\\nhttps://www.terraform.io/docs/state/index.html\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3068\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u5dee\u5206\u3092\u691c\u77e5\u3059\u308b\u306b\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30ea\u30bd\u30fc\u30b9\u5b9a\u7fa9\u3068\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4e0a\u3067\u306f\u30ea\u30bd\u30fc\u30b9\u306f\u30d1\u30b9\u306b\u3088\u3063\u3066\u8b58\u5225\u3055\u308c\u307e\u3059\u304c\u3001\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u30ea\u30bd\u30fc\u30b9\u306f\u30a4\u30f3\u30d5\u30e9\u56fa\u6709\u306e ID \u306a\u3069\u3067\u8b58\u5225\u3055\u308c\u307e\u3059\u3002\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4e0a\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u30d1\u30b9\u3068\u3001\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u30ea\u30bd\u30fc\u30b9\u306e ID \u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u4fdd\u5b58\u3059\u308b\u30b9\u30c8\u30ec\u30fc\u30b8\u304c `State` \u306b\u306a\u308a\u307e\u3059\u3002\\n\u305f\u3060\u3057 State \u306e\u5f79\u5272\u306f\u30de\u30c3\u30d4\u30f3\u30b0\u3060\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u8a73\u7d30\u306f https://www.terraform.io/docs/state/purpose.html \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\u300c\u30b9\u30c8\u30ec\u30fc\u30b8\u300d\u3068\u3044\u3044\u307e\u3057\u305f\u304c\u305d\u306e\u5b9f\u614b\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u305f\u3060\u306e JSON \u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f `terraform apply` \u306a\u3069\u3092\u5b9f\u884c\u3059\u308b\u3068\u52dd\u624b\u306b `terraform.tfstate` \u3068\u3044\u3046\u540d\u524d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f5c\u6210\u3001\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\\nState \u306e\u4fdd\u5b58\u5148\u306f S3 \u3092\u542b\u3081\u8272\u3005\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://www.terraform.io/docs/backends/types/index.html\\n\\n### \u767a\u5c55: State \u3092\u6301\u305f\u306a\u3044\u30c4\u30fc\u30eb\u3068\u306e\u9055\u3044\\n\\nTerraform \u306e\u4ed6\u306b\u3082\u30a4\u30f3\u30d5\u30e9\u3092\u7ba1\u7406\u3059\u308b\u30c4\u30fc\u30eb\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u305d\u306e\u4e2d\u306b\u306f State \u306e\u3088\u3046\u306a\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u6301\u305f\u306a\u3044\u3082\u306e\u3082\u3042\u308a\u307e\u3059\u3002\\n\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u6301\u305f\u306a\u3044\u30c4\u30fc\u30eb\u3060\u3068\u3001\u30c4\u30fc\u30eb\u3092\u4f7f\u308f\u305a\u306b\u4f5c\u3063\u305f\u30ea\u30bd\u30fc\u30b9\u304c\u30c4\u30fc\u30eb\u306b\u3088\u3063\u3066\u524a\u9664\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\\n\u4e00\u65b9\u3001 Terraform \u3067\u306f\u30c4\u30fc\u30eb\u3092\u4f7f\u308f\u305a\u306b\u4f5c\u3063\u305f\u30ea\u30bd\u30fc\u30b9\u306f\u5909\u66f4\u306e\u5bfe\u8c61\u306b\u306a\u308a\u307e\u305b\u3093\u3002\\n\u5909\u66f4\u306e\u5bfe\u8c61\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u60c5\u5831\u3092 State \u306b\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\u305f\u3060\u306e JSON \u30d5\u30a1\u30a4\u30eb\u306a\u306e\u3067\u624b\u3067\u4fee\u6b63\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u304c\u3001 [terraform import](https://www.terraform.io/docs/commands/import.html) \u3068\u3044\u3046\u5c02\u7528\u306e\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308b\u306e\u3067\u305d\u308c\u3092\u4f7f\u3046\u307b\u3046\u304c\u5b89\u5168\u3067\u3059\u3002\\n\\nhttps://www.terraform.io/docs/import/index.html\\n\\n\u9006\u306b\u3001\u3042\u307e\u308a\u306a\u3044\u30b1\u30fc\u30b9\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u3042\u308b\u30ea\u30bd\u30fc\u30b9\u306b\u3064\u3044\u3066 Terraform \u3067\u7ba1\u7406\u3059\u308b\u306e\u3092\u3084\u3081\u305f\u3044\u5834\u5408\u3001\\n\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3060\u3051\u3067\u306a\u304f State \u304b\u3089\u3082\u524a\u9664\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\u5358\u7d14\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u524a\u9664\u3059\u308b\u3060\u3051\u3060\u3068\u3001 Terraform \u306b\u3088\u3063\u3066\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u30ea\u30bd\u30fc\u30b9\u304c\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\\nState \u304b\u3089\u524a\u9664\u3059\u308b\u306b\u306f [terraform state rm](https://www.terraform.io/docs/commands/state/rm.html) \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002\\n\\n\u305d\u306e\u4ed6 State \u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u304c\u8272\u3005\u3042\u308b\u306e\u3067\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\nhttps://www.terraform.io/docs/commands/state/index.html\\n\\n### \u767a\u5c55: Remote State \u3092\u4f7f\u3046\u304b\u5426\u304b\\n\\nTerraform \u3092 CI/CD \u306b\u3088\u3063\u3066\u5b9f\u884c\u3059\u308b\u524d\u63d0\u3067\u3059\u3002\\n\u57fa\u672c\u7684\u306b remote state \u3092\u4f7f\u3046\u3079\u304d\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nremote state \u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u3001 `terraform.tfstate` \u3092 Git \u3067\u7ba1\u7406\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\\n\u305d\u306e\u5834\u5408\u3001 feature branch \u306e terraform.tfstate \u3068\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u72b6\u614b\u306e\u4e56\u96e2\u304c\u8d77\u3053\u308a\u3048\u307e\u3059\u3002\\n\u30c1\u30fc\u30e0\u306e\u898f\u6a21\u304c\u5927\u304d\u304f\u8907\u6570\u306e\u958b\u767a\u304c\u4e26\u884c\u3057\u3066\u884c\u308f\u308c\u308c\u3070\u884c\u308f\u308c\u308b\u307b\u3069\u3001\u4e56\u96e2\u306e\u5f0a\u5bb3\u304c\u5927\u304d\u304f\u306a\u308a\u3001 remote state \u3092\u4f7f\u3063\u305f\u307b\u3046\u304c\u826f\u3044\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n\u307e\u305f\u3001 CI/CD \u3067\u66f4\u65b0\u3055\u308c\u305f `terraform.tfstate` \u3092 commit & push \u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n`terraform apply` \u3067\u5931\u6557\u3057\u305f\u5834\u5408\u3001\u4e00\u90e8\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u66f4\u65b0\u306b\u306f\u6210\u529f\u3057\u3001State \u304c\u66f4\u65b0\u3055\u308c\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n`terraform apply` \u304c\u5931\u6557\u3057\u3066\u3082\u5373\u5ea7\u306b\u7d42\u4e86\u3055\u305b\u305a\u306b `terraform.tfstate` \u3092 commit & push \u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\u3053\u308c\u306f CI/CD \u306e\u30b3\u30fc\u30c9\u3067\u6c17\u3092\u3064\u3051\u308c\u3070\u554f\u984c\u306a\u3044\u306e\u3067\u30c7\u30e1\u30ea\u30c3\u30c8\u3068\u8a00\u3046\u307b\u3069\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u6614\u81ea\u5206\u306f\u4f55\u5ea6\u304b commit & push \u3057\u640d\u306d\u3066\u9762\u5012\u304f\u3055\u3044\u3053\u3068\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n## \u5909\u6570\\n\\n* https://www.terraform.io/docs/glossary.html#variables\\n* https://learn.hashicorp.com/terraform/getting-started/variables.html\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u306f\u5909\u6570\u304c\u4f7f\u3048\u307e\u3059\u3002\\n\u5909\u6570\u3092\u4f7f\u3046\u306b\u306f\u5ba3\u8a00\u304c\u5fc5\u8981\u3067\u3059\u3002\u5ba3\u8a00\u3067\u306f\u578b\u306a\u3069\u3082\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\\n\\nhttps://www.terraform.io/docs/configuration/types.html\\n\\n\u5909\u6570\u306e\u5ba3\u8a00\u306f\u3064\u304e\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002 `.tf` \u306e\u3069\u3053\u306b\u66f8\u3044\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\\n\\n```hcl\\n# variable \\"\u5909\u6570\u540d\\"\\nvariable \\"region\\" {\\n  type    = \\"string\\"\\n  default = \\"us-east-1\\"\\n}\\n```\\n\\n\u5909\u6570\u306e\u5024\u306e\u8a2d\u5b9a\u306f\u6b21\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002 `terraform.tfvars` \u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u66f8\u3044\u3066\u304a\u304f\u3068\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306b\u81ea\u52d5\u3067\u8aad\u307f\u8fbc\u307e\u308c\u307e\u3059\u3002\\n\\n```hcl\\nami = {\\n  \\"us-east-1\\" = \\"ami-abc123\\"\\n  \\"us-west-2\\" = \\"ami-def456\\"\\n}\\n```\\n\\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u6e21\u3059\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\\n\\n## Provider \u306e\u8a2d\u5b9a\\n\\nProvider \u3092\u4f7f\u3046\u306b\u306f\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\u8a2d\u5b9a\u306e\u5c5e\u6027\u306f Provider \u306b\u3088\u3063\u3066\u9055\u3044\u307e\u3059\u3002\\n\\n```hcl\\n# provider \\"Provider\u540d\\"\\nprovider \\"google\\" {\\n  project = \\"acme-app\\"\\n  region  = \\"us-central1\\"\\n}\\n```\\n\\n## Module\\n\\nhttps://www.terraform.io/docs/modules/index.html\\nhttps://www.terraform.io/docs/configuration/modules.html\\n\\n\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u8a2d\u5b9a\u3092\u307e\u3068\u3081\u3066\u518d\u5229\u7528\u53ef\u80fd\u306a\u5f62\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3059\u308b\u4ed5\u7d44\u307f\u3068\u3057\u3066 Module \u304c\u3042\u308a\u307e\u3059\u3002\\n\u30ea\u30bd\u30fc\u30b9\u304c1\u3064\u3060\u3051\u3067\u3082\u3001\u30c1\u30fc\u30e0\u56fa\u6709\u306e\u8a2d\u5b9a\u3092 Module \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u305f\u308a\u3001\u30c1\u30fc\u30e0\u3067\u306f\u4f7f\u308f\u306a\u3044\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u3092\u96a0\u853d\u3057\u305f\u308a\u7528\u9014\u306f\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nModule \u306e\u4f5c\u308a\u65b9\u306f\u901a\u5e38\u306e Terraform \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u8a18\u8ff0\u3068\u540c\u69d8\u3001 1\u3064\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8a18\u8ff0\u3059\u308b\u3060\u3051\u3067\u3059\u3002\\n\\nModule \u306f\u6b21\u306e\u3088\u3046\u306b\u4f7f\u3044\u307e\u3059\u3002\\n\\n```hcl\\n# module \\"\u540d\u524d\\"\\nmodule \\"servers\\" {\\n  # \u30e2\u30b8\u30e5\u30fc\u30eb\u3078\u306e\u30d1\u30b9\\n  source = \\"./app-cluster\\"\\n\\n  # \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\\n  servers = 5\\n}\\n```\\n\\nModule \u306e\u30d1\u30b9\u306f `module.\u30e2\u30b8\u30e5\u30fc\u30eb\u540d` (module.servers) \u306b\u306a\u308a\u307e\u3059\u3002\\n\\nModule \u306e `source` \u3068\u3057\u3066\u306f\u30ed\u30fc\u30ab\u30eb\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u306e\u30d1\u30b9\u4ee5\u5916\u306b\u3082\u69d8\u3005\u306a\u3082\u306e\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://www.terraform.io/docs/modules/sources.html\\n\\n### \u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e Module\\n\\n\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306b\u3088\u3063\u3066\u69d8\u3005\u306a Module \u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n* https://registry.terraform.io/\\n* https://registry.terraform.io/modules/terraform-aws-modules\\n* https://github.com/terraform-community-modules\\n* https://github.com/terraform-aws-modules\\n\\n### Module \u5316\u3059\u308b\u3079\u304d\u304b\u5426\u304b\\n\\nGo \u3084 Python \u306a\u3069\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3067\u306e\u30e2\u30b8\u30e5\u30fc\u30eb(\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d1\u30c3\u30b1\u30fc\u30b8\u7b49\u547c\u3073\u65b9\u306f\u69d8\u3005\u3067\u3059\u304c)\u5316\u3068\u6bd4\u3079\u3001\\nTerraform \u306e Module \u5316\u306f\u614e\u91cd\u3067\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\\n\u7406\u7531\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u304c\u3001\\n\\n* Module \u3092\u5909\u66f4\u3059\u308b\u3068 State \u306e\u5909\u66f4\u3082\u5fc5\u8981\u306b\u306a\u308b\u5834\u5408\u3082\u3042\u308b\\n* Terraform \u306e\u8a2d\u5b9a\u306f\u4e2d\u3005\u30d1\u30ef\u30d5\u30eb\u3060\u3068\u306f\u601d\u3044\u307e\u3059\u304c\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306b\u6bd4\u3079\u308b\u3068\u67d4\u8edf\u6027\u304c\u8db3\u3089\u305a\u3001\u5909\u66f4\u306b\u5f31\u304f\u3001\u8907\u96d1\u306b\u306a\u308b\u3068\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u304c\u60aa\u304f\u306a\u308a\u307e\u3059\\n\\n\u504f\u898b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306b\u6bd4\u3079\u308b\u3068\u3001 Terraform \u306b\u300c\u7cbe\u901a\u300d\u3057\u3066\u3044\u308b\u4eba\u306f\u305d\u308c\u307b\u3069\u591a\u304f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\u521d\u5fc3\u8005\u306f\u76f4\u3050 Module \u5316\u306b\u98db\u3073\u3064\u304f\u306e\u306f\u3084\u3081\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059(\u5c24\u3082\u4f7f\u3063\u3066\u307f\u306a\u3044\u3068\u7406\u89e3\u304c\u6df1\u307e\u3089\u306a\u3044\u3068\u3044\u3046\u610f\u5473\u3067\u306f\u4f7f\u3063\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3059\u304c)\u3002\\n\\n## Output\\n\\nhttps://www.terraform.io/docs/configuration/outputs.html\\n\\nModule \u3067\u5b9a\u7fa9\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u306f\u57fa\u672c\u7684\u306b\u5916\u90e8\u304b\u3089\u96a0\u853d\u3055\u308c\u307e\u3059\u3002\\n\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u3092\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u500b\u5225\u306b Output \u3068\u3057\u3066\u5ba3\u8a00\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```hcl\\noutput \\"instance_ip_addr\\" {\\n  value = aws_instance.server.private_ip\\n}\\n```\\n\\n\u3053\u308c\u306f\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u5b9a\u7fa9\u3057\u305f\u30ea\u30bd\u30fc\u30b9 `aws_instance.server` \u306e\u5c5e\u6027 `private_ip` \u3092 Module \u306e\u5c5e\u6027 `instance_ip_addr` \u3068\u3057\u3066\u5916\u90e8\u306b\u516c\u958b\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3067\u3059\u3002\\nModule \u306e\u30d1\u30b9\u304c module.servers \u3060\u3068\u3059\u308b\u3068\u3001 `module.servers.instance_ip_addr` \u3067\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\\n\\n## Data Source\\n\\nhttps://www.terraform.io/docs/configuration/data-sources.html\\n\\nData source \u306f Terraform \u3067\u7ba1\u7406\u3057\u3066\u3044\u306a\u3044(\u3042\u308b\u3044\u306f\u4ed6\u306e State \u3067\u7ba1\u7406\u3057\u3066\u3044\u308b)\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u3067\u3059\u3002\\n\\n\u6b21\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\\n\\n```hcl\\n# data \\"\u30ea\u30bd\u30fc\u30b9\u306e\u7a2e\u985e\\" \\"\u30ea\u30bd\u30fc\u30b9\u540d\\"\\ndata \\"aws_ami\\" \\"example\\" {\\n  # \u30ea\u30bd\u30fc\u30b9\u3092\u4e00\u610f\u306b\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u30af\u30a8\u30ea\\n\\n  most_recent = true\\n\\n  owners = [\\"self\\"]\\n  tags = {\\n    Name   = \\"app-server\\"\\n    Tested = \\"true\\"\\n  }\\n}\\n```\\n\\nData source \u3067\u306f\u5c5e\u6027\u306b\u3088\u3063\u3066\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\u691c\u7d22\u306b\u30de\u30c3\u30c1\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306f\u5fc5\u305a1\u3064\u3067\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\\n\u8907\u6570\u30de\u30c3\u30c1\u3057\u305f\u308a1\u3064\u3082\u30de\u30c3\u30c1\u3057\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u3068\u5931\u6557\u3057\u307e\u3059(\u53b3\u5bc6\u306b\u306f Provider \u306e\u5b9f\u88c5\u6b21\u7b2c\u3067\u3059\u304c)\u3002\\n\\n### \u4ed6\u306e State \u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u3092 Data source \u3068\u3057\u3066\u53c2\u7167\u3059\u308b\\n\\nhttps://www.terraform.io/docs/providers/terraform/d/remote_state.html\\n\\n\u4ed6\u306e State \u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u5c5e\u6027\u3092 Data source \u3092\u4f7f\u3063\u3066\u53c2\u7167\u3059\u308b\u305f\u3081\u306b `terraform_remote_state` \u304c\u3042\u308a\u307e\u3059\u3002\\n\u53c2\u7167\u3059\u308b\u306b\u306f Module \u540c\u69d8 \u305d\u306e\u5c5e\u6027\u304c Output \u306b\u3088\u3063\u3066\u5916\u90e8\u306b\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```hcl\\ndata \\"terraform_remote_state\\" \\"vpc\\" {\\n  backend = \\"remote\\"\\n\\n  config = {\\n    organization = \\"hashicorp\\"\\n    workspaces = {\\n      name = \\"vpc-prod\\"\\n    }\\n  }\\n}\\n```\\n\\n## workspace\\n\\n* https://www.terraform.io/docs/state/workspaces.html\\n* [Terraform workspace\u3092\u5229\u7528\u3057\u3066\u74b0\u5883\u6bce\u306e\u30ea\u30bd\u30fc\u30b9\u540d\u306e\u5909\u66f4\u3092\u884c\u3046](https://blog.mosuke.tech/entry/2018/06/16/terraform-workspaces/)\\n* [Terraform \u904b\u7528\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9 2019 ~workspace \u3092\u3084\u3081\u3066\u307f\u305f\u7b49\u8af8\u3005~](http://kenzo0107.hatenablog.com/entry/2019/04/17/103558)\\n\\nTerraform \u306b\u306f workspace \u3068\u3044\u3046\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3061\u3089\u306e\u6a5f\u80fd\u306f\u81ea\u5206\u306f\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u7c21\u5358\u306b\u89e6\u308c\u308b\u3060\u3051\u306b\u7559\u3081\u307e\u3059\u3002\\nworkspace \u306e\u4ee3\u8868\u7684\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306f production \u3084 staging \u306a\u3069\u306e\u7570\u306a\u308b\u74b0\u5883\u3067\u540c\u3058\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5171\u6709\u3057\u3064\u3064 State \u3092 switch \u3059\u308b\u3053\u3068\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nworkspace \u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u74b0\u5883\u3054\u3068\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u53ca\u3073\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5b8c\u5168\u306b\u5206\u3051\u308b\u3053\u3068\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n```\\nproduction/\\n  ec2.tf\\n  terraform.tfstate\\n  ...\\nstaging/\\n  ec2.tf\\n  terraform.tfstate\\n  ...\\n```\\n\\nworkspace \u3092\u4f7f\u3046\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5171\u6709\u3067\u304d\u307e\u3059\u3002\\n\\n```\\nec2.tf\\nterraform.tfstate.d/\\n  production/\\n    terraform.tfstate\\n  staging/\\n    terraform.tfstate\\n```\\n\\n\u74b0\u5883\u3054\u3068\u306e\u8a2d\u5b9a\u306e\u5fae\u5999\u306a\u9055\u3044\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u5206\u5c90\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u306e\u3067\u3057\u3087\u3046\u3002\\n\\n### \u767a\u5c55: workspace \u3092\u4f7f\u3046\u3079\u304d\u304b\\n\\nworkspace \u3092\u4f7f\u3046\u3079\u304d\u304b\u5426\u304b\u306f\u610f\u898b\u304c\u5206\u304b\u308c\u3066\u3044\u308b\u69d8\u306b\u601d\u3048\u307e\u3059\u3002\\n\u6050\u3089\u304f\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3084\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u306e Terraform \u3078\u306e\u6210\u719f\u5ea6\u306b\u3082\u3088\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n\u73fe\u72b6\u81ea\u5206\u306f\u300c\u4f7f\u308f\u306a\u3044\u300d\u3068\u3044\u3046\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\\n\\n\u81ea\u5206\u304c\u3053\u308c\u307e\u3067\u95a2\u308f\u3063\u3066\u304d\u305f\u30c1\u30fc\u30e0\u4e8b\u60c5\u3060\u3068 Terraform \u306b\u5168\u54e1\u304c\u7cbe\u901a\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3088\u308a\u306f\u3001\u3080\u3057\u308d Terraform \u306b\u305d\u3053\u307e\u3067\u8a73\u3057\u304f\u306a\u3044\u4eba\u3082\u89e6\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\\n\u504f\u898b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u305d\u3046\u3044\u3046\u30c1\u30fc\u30e0\u306f\u5c11\u306a\u304f\u306a\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\\n\u305d\u3046\u3044\u3046\u30c1\u30fc\u30e0\u72b6\u6cc1\u3067\u306f\u3001 workspace \u3092\u4f7f\u3063\u3066 DRY \u306b\u306a\u308b\u3068\u3044\u3046\u30e1\u30ea\u30c3\u30c8\u4ee5\u4e0a\u306b\u3001 workspace \u305d\u306e\u3082\u306e\u3078\u306e\u5b66\u7fd2\u30b3\u30b9\u30c8\u3084\u74b0\u5883\u306b\u3088\u3063\u3066\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u5206\u5c90\u3059\u308b\u5b66\u7fd2\u30b3\u30b9\u30c8\u3092\u7701\u304d\u3001\\nTerraform \u306b\u7cbe\u901a\u3057\u3066\u3044\u306a\u304f\u3066\u3082\u7406\u89e3\u3067\u304d\u308b\u304f\u3089\u3044\u30b7\u30f3\u30d7\u30eb\u306b\u4fdd\u3064\u3053\u3068\u306e\u307b\u3046\u304c\u5927\u4e8b\u306a\u306e\u3067\u306f\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u7279\u306b\u3001\u3053\u308c\u307e\u3067 Terraform \u3092\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u6a2a\u65ad\u7684\u306a\u30c1\u30fc\u30e0\u3067\u7ba1\u7406\u3057\u3066\u3044\u305f\u72b6\u614b\u304b\u3089\u5404\u30b5\u30fc\u30d3\u30b9\u306e\u62c5\u5f53\u8005\u306b ownership \u3092\u59d4\u8b72\u3057\u3088\u3046\u3068\u3059\u308b\u5834\u5408\u3001\u4e0a\u8ff0\u306e\u5b66\u7fd2\u30b3\u30b9\u30c8\u30fb\u8907\u96d1\u3055\u304c\u5f0a\u5bb3\u306b\u306a\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u306a\u3068\u611f\u3058\u3066\u3044\u307e\u3059\u3002\\n\\n\u305f\u3060\u3057\u3001\u7e70\u308a\u8fd4\u3057\u306b\u306a\u308a\u307e\u3059\u304c\u81ea\u5206\u306f workspace \u3092\u4f7f\u3063\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u305b\u3093\u3002\\n\u4e0a\u8a18\u306e\u81ea\u5206\u306e\u8a8d\u8b58\u304c\u9593\u9055\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3057\u3001\u4eca\u5f8c workspace \u3092\u4f7f\u3063\u3066\u307f\u305f\u3089\u8003\u3048\u304c\u5909\u308f\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n## Terraform command \u306e\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\\n\\nhttps://www.terraform.io/docs/commands/index.html\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u3044\u305f\u4e0a\u3067\u57fa\u672c\u7684\u306a\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n### terraform init\\n\\nhttps://www.terraform.io/docs/commands/init.html\\n\\n\u307e\u305a\u3001 `terraform init` \u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```\\n$ terraform init\\n```\\n\\n`terraform init` \u306b\u3088\u3063\u3066\u3001\u4f9d\u5b58\u3059\u308b Provider \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n### terraform fmt\\n\\nhttps://www.terraform.io/docs/commands/fmt.html\\n\\n`terraform fmt` \u306b\u3088\u3063\u3066\u30b3\u30fc\u30c9\u3092\u6574\u5f62\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\n```\\n$ terraform fmt [-check] [-recursive]\\n```\\n\\n`-check` \u3092\u3064\u3051\u308b\u3068\u3001\u30b3\u30fc\u30c9\u3092\u6574\u5f62\u3059\u308b\u4ee3\u308f\u308a\u306b\u3001\u30b3\u30fc\u30c9\u304c\u6574\u5f62\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u3089 exit code \u304c non 0 \u3067\u7d42\u4e86\u3057\u307e\u3059\u3002\\nCI \u3067\u30b3\u30fc\u30c9\u304c\u6574\u5f62\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u30c1\u30a7\u30c3\u30af\u306b\u4f7f\u3048\u307e\u3059\u3002\\n\\n### terraform plan\\n\\nhttps://www.terraform.io/docs/commands/plan.html\\n\\n`terraform plan` \u306b\u3088\u3063\u3066 `terraform apply` \u306e dry run \u304c\u51fa\u6765\u307e\u3059\u3002\\n\\n```\\n$ terraform plan [-refresh=false]\\n```\\n\\n\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306f\u5909\u66f4\u3055\u308c\u305a\u3001 `apply` \u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u306b\u3069\u306e\u3088\u3046\u306a\u5909\u66f4\u304c\u884c\u308f\u308c\u308b\u304b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\\n\\n### terraform apply\\n\\nhttps://www.terraform.io/docs/commands/apply.html\\n\\n\u5b9f\u969b\u306b\u30a4\u30f3\u30d5\u30e9\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3057\u307e\u3059\u3002\\n\\n```\\n$ terraform apply [-auto-approve]\\n```\\n\\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u6700\u521d\u306b plan \u306e\u5b9f\u884c\u7d50\u679c\u304c\u51fa\u529b\u3055\u308c\u3066\u672c\u5f53\u306b\u5909\u66f4\u3092\u9069\u7528\u3057\u3066\u3088\u3044\u304b\u78ba\u8a8d\u304c\u3042\u308a\u307e\u3059\u3002\\n`-auto-approve` \u3092\u6307\u5b9a\u3059\u308b\u3068\u78ba\u8a8d\u3092 skip \u51fa\u6765\u307e\u3059\u3002\\n\\n`plan` \u306b\u6210\u529f\u3057\u3066\u3082 `apply` \u306b\u306f\u5931\u6557\u3059\u308b\u5834\u5408\u3082\u3042\u308a\u307e\u3059\u3002\\n\u7c21\u5358\u306a\u4f8b\u3068\u3057\u3066\u306f\u66f4\u65b0\u3059\u308b\u6a29\u9650\u304c\u306a\u3044\u5834\u5408\u3067\u3059\u3002\\n`apply` \u306b\u5931\u6557\u3059\u308b\u3068\u4e00\u90e8\u306e\u30ea\u30bd\u30fc\u30b9\u3060\u3051\u66f4\u65b0\u3055\u308c\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u8d77\u3053\u308a\u3048\u307e\u3059\u3002\\n\u305d\u3046\u306a\u3063\u3066\u3082\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3068\u304b\u306f\u51fa\u6765\u306a\u3044(terraform \u306b rollback \u306e\u6a5f\u80fd\u306f\u306a\u3044)\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n### terraform destroy\\n\\nhttps://www.terraform.io/docs/commands/destroy.html\\n\\nTerraform \u3067\u4f5c\u6210\u3057\u305f\u30a4\u30f3\u30d5\u30e9\u3092\u524a\u9664\u3057\u307e\u3059\u3002\\n\\n```\\n$ terraform destroy\\n```\\n\\n\u6050\u3089\u304f\u5b9f\u969b\u306e\u904b\u7528\u3067\u3053\u308c\u3092\u4f7f\u3046\u3053\u3068\u306f\u3042\u307e\u308a\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\u524a\u9664\u3057\u305f\u3044\u306a\u3089\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6d88\u3057\u3066 apply \u3059\u308b\u3067\u3057\u3087\u3046\u3002\\nTerraform \u306e\u52c9\u5f37\u304c\u3066\u3089\u904a\u3073\u3067\u4f5c\u3063\u305f\u3082\u306e\u3092\u4e38\u3063\u3068\u6d88\u3059\u3068\u304b\u4e3b\u306b\u305d\u3046\u3044\u3046\u7528\u9014\u3067\u4f7f\u308f\u308c\u308b\u6c17\u304c\u3057\u307e\u3059\u3002\\n\\n### terraform refresh\\n\\nhttps://www.terraform.io/docs/commands/refresh.html\\n\\nState \u3092\u5b9f\u969b\u306e\u30a4\u30f3\u30d5\u30e9\u306e\u72b6\u614b\u306b\u5408\u308f\u305b\u3066\u66f4\u65b0\u3057\u307e\u3059\u3002\\n\u30a4\u30f3\u30d5\u30e9\u306f\u66f4\u65b0\u3055\u308c\u307e\u305b\u3093\u3002\\n\u624b\u52d5\u3067\u30a4\u30f3\u30d5\u30e9\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u306b\u3001\u305d\u306e\u5909\u66f4\u3092 State \u306b\u53cd\u6620\u3055\u305b\u308b\u306e\u306b\u4f7f\u3048\u307e\u3059\u3002\\n\\n```\\n$ terraform refresh\\n```\\n\\n### terraform import\\n\\nhttps://www.terraform.io/docs/commands/import.html\\nhttps://www.terraform.io/docs/import/index.html\\n\\nTerraform \u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u306a\u3044\u30ea\u30bd\u30fc\u30b9\u306e\u30c7\u30fc\u30bf\u3092 State \u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\\nState \u306f\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u3068\u30a4\u30f3\u30d5\u30e9\u306eID \u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u7ba1\u7406\u3059\u308b\u3068\u8a00\u3044\u307e\u3057\u305f\u304c\u3001 import \u30b3\u30de\u30f3\u30c9\u306e\u5f15\u6570\u3067\u306f\u3053\u306e2\u3064\u3092\u6e21\u3059\u3053\u3068\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\\n\\n```\\n# \u30ea\u30bd\u30fc\u30b9\u30d1\u30b9 ID\\n$ terraform import aws_instance.example i-abcd1234\\n```\\n\\n\u3061\u306a\u307f\u306b\u3001\u4e00\u90e8\u306e\u30ea\u30bd\u30fc\u30b9\u306f import \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u307e\u305b\u3093\u3002\\n\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306f Provider \u306e\u5b9f\u88c5\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002\\n\\n### terraform state\\n\\nhttps://www.terraform.io/docs/commands/state/index.html\\n\\nState \u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\u69d8\u3005\u306a\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n## Terraform \u306e CI/CD\\n\\nterraform apply \u306f\u539f\u5247 CD \u306b\u3088\u3063\u3066\u5b9f\u884c\u3055\u308c\u308b\u3079\u304d\u3060\u3057\u3001\\nCI \u306b\u3088\u3063\u3066 `terraform fmt -check` \u3084 `terraform plan` \u306f\u5b9f\u884c\u3055\u308c\u308b\u3079\u304d\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u9006\u306b `terraform plan` \u3084 `apply` \u306f CI/CD \u3067\u3084\u3063\u3066\u308b\u3051\u3069\u3001\\n`terraform state` \u3084 `terraform import` \u306f\u30ed\u30fc\u30ab\u30eb\u304b\u3089\u5b9f\u884c\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u30c1\u30fc\u30e0\u3082\u5c11\u306a\u304f\u306f\u306a\u3044\u306e\u304b\u306a\u3068\u3044\u3046\u6c17\u304c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u8ab2\u984c\u3068\u306a\u308a\u3046\u308b\u306e\u306f\\n\\n* Credential \u306e\u7ba1\u7406\\n* IP\u5236\u9650\\n\\n\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n### Credential \u306e\u7ba1\u7406\\n\\nTerraform \u3067\u4f7f\u3046\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u306f\u5f37\u529b\u306a\u6a29\u9650\u3092\u6301\u3061\u304c\u3061\u306a\u306e\u3067\u6271\u3044\u306b\u6ce8\u610f\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\\n\u6a29\u9650\u3092\u7d5e\u308b\u306e\u304c\u7406\u60f3\u3067\u3059\u304c\u3001\u7d50\u69cb\u96e3\u3057\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070 PR \u306e CI \u3067\u306f `terraform apply` \u3092\u5b9f\u884c\u3057\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001 PR \u306e CI \u7528\u306b Read Only \u306a\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3092\u7528\u610f\u3059\u308b\u3068\u304b\u3082\u3042\u308a\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n\u4f8b\u3048\u3070 AWS \u306e\u30a4\u30f3\u30d5\u30e9\u7ba1\u7406\u3092 Terraform + CircleCI \u3067\u884c\u3046\u5834\u5408\u3001\\nAWS \u306e\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3092 CircleCI \u3067\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\nCircleCI \u3067\u306f SSH \u3067\u30b3\u30f3\u30c6\u30ca\u306b\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u305f\u3081\u3001\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3092\u76d7\u3082\u3046\u3068\u76d7\u3081\u307e\u3059\u3057\u3001\\nCircleCI \u306b\u9650\u3089\u305a\u60aa\u610f\u306e\u3042\u308b\u30b3\u30fc\u30c9\u3092 CI \u3067\u5b9f\u884c\u3057\u3066\u5916\u90e8\u306b\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3092\u9001\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\\n\\n### IP \u5236\u9650\\n\\nCI \u3067 Terraform \u3092\u4f7f\u3046\u5834\u5408\u3001 CI \u306e\u5b9f\u884c\u74b0\u5883\u304b\u3089\u30a4\u30f3\u30d5\u30e9\u306e API \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\nIP \u5236\u9650\u3092\u304b\u3051\u3066\u3044\u308b\u5834\u5408\u3001 CI \u306e\u5b9f\u884c\u74b0\u5883\u304b\u3089\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306a\u3069\u306e\u5de5\u592b\u304c\u5fc5\u8981\u3067\u3059\u3002\\nCI \u306e\u5b9f\u884c\u74b0\u5883\u306e IP range \u304c\u5b9a\u307e\u3063\u3066\u306a\u3044\u5834\u5408\u3001\u8a71\u306f\u66f4\u306b\u96e3\u3057\u304f\u306a\u308a\u307e\u3059\u3002\\n\\n## \u767a\u5c55: \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4e2d\u3067\u4f7f\u3048\u308b\u95a2\u6570\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u306f\u30d3\u30eb\u30c9\u30a4\u30f3\u95a2\u6570\u304c\u4f7f\u3048\u307e\u3059\u3002\\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\nhttps://www.terraform.io/docs/configuration/functions.html\\n\\n## \u4f59\u8ac7: awesome-terraform\\n\\nhttps://github.com/shuaibiyy/awesome-terraform\\n\\nTerraform \u95a2\u9023\u306e awesome \u306a\u30c4\u30fc\u30eb\u306e\u30ea\u30f3\u30af\u96c6\u3067\u3059\u3002"},{"id":"/terraform-state-locking","metadata":{"permalink":"/terraform-state-locking","source":"@site/blog/terraform-state-locking.md","title":"Terraform \u306e State Locking \u306e\u6982\u8981","description":"Terraform \u306e State Locking \u3068\u3044\u3046\u6a5f\u80fd\u306e\u6982\u8981\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002","date":"2020-01-10T07:18:05.000Z","formattedDate":"January 10, 2020","tags":[{"label":"terraform","permalink":"/tags/terraform"}],"readingTime":6,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Terraform \u306e State Locking \u306e\u6982\u8981","date":"2020-01-10T07:18:05.000Z","archives":["2020/01"],"tags":["terraform"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Terraform \u5165\u9580","permalink":"/terraform-getting-started"},"nextItem":{"title":"dd-time - \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u3092 Datadog \u306b\u9001\u308b\u30c4\u30fc\u30eb","permalink":"/dd-time"}},"content":"Terraform \u306e [State Locking](https://www.terraform.io/docs/state/locking.html) \u3068\u3044\u3046\u6a5f\u80fd\u306e\u6982\u8981\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\u305f\u3060\u3057\u3001\u81ea\u5206\u3082\u3061\u3083\u3093\u3068\u7406\u89e3\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u63a8\u6e2c\u3082\u6df7\u3058\u308a\u307e\u3059\u3002\\n\u57fa\u672c\u7684\u306b\u306f\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u3044\u3066\u3042\u308b\u5185\u5bb9\u306a\u306e\u3067\u305d\u3061\u3089\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\\n\\n## State Locking \u3068\u306f\\n\\n`terraform plan` \u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u306f State \u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\\n\u305d\u306e\u51e6\u7406\u306f atomic \u3067\u306f\u306a\u3044\u305f\u3081\u3001\u540c\u6642\u306b\u8907\u6570\u306e\u30b3\u30de\u30f3\u30c9\u304c State \u3092\u66f8\u304d\u63db\u3048\u3088\u3046\u3068\u3059\u308b\u3068\u4e0d\u6574\u5408\u304c\u751f\u3058\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n---\\n\\n\u4f8b\u3048\u3070 S3 backend \u306e state \u3092 state rm \u3067\u66f4\u65b0\u3059\u308b\u5834\u5408\u3092\u8003\u3048\u307e\u3059\u3002\\n\u3053\u308c\u306f\u30b3\u30de\u30f3\u30c9\u5185\u90e8\u3067\\n\\n1. \u73fe\u5728\u306e State \u3092\u53d6\u5f97\u3059\u308b (READ)\\n2. \u4fee\u6b63\u3057\u305f State \u3092 S3 \u306b push \u3059\u308b (WRITE)\\n\\n\u3068\u3044\u3046\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u308b\u306f\u305a\u3067\u3042\u308a\u3001\u8907\u6570\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001READ \u3068 WRITE \u306e\u9593\u306b\u4ed6\u306e\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066 WRITE \u3055\u308c\u308b\u3068\u3001\u305d\u306e WRITE \u306b\u3088\u308b\u5909\u66f4\u304c\u6d88\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u3002\\n\\n---\\n\\n\u305d\u3053\u3067 State Locking \u3092\u4f7f\u3046\u3068\u5404\u30b3\u30de\u30f3\u30c9\u3067 State \u3092\u5909\u66f4\u3059\u308b\u524d\u306b lock \u3092\u53d6\u308a\u3001WRITE \u5f8c\u306b lock \u3092\u89e3\u9664\u3057\u307e\u3059\u3002\\n\\n## \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3\\n\\nplan, apply, refresh, state rm, state mv, state push \u306b\u306f\u6b21\u306e\u3088\u3046\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```\\n-lock=true          Lock the state file when locking is supported.\\n-lock-timeout=0s    Duration to retry a state lock.\\n```\\n\\n`-lock` \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 true \u306a\u306e\u3067 State Locking \u306e\u3053\u3068\u3092\u77e5\u3089\u306a\u304f\u3066\u3082\u5b9f\u306f State Locking \u4f7f\u3063\u3066\u305f\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u3048\u307e\u3059\u304c\u3001 Backend type \u306b\u3088\u3063\u3066\u306f State Locking \u306e\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u306a\u3044\u3068 State Locking \u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070 S3 backend \u3067 State Locking \u3092\u3059\u308b\u306b\u306f DynamoDB \u304c\u5fc5\u8981\u3067\u3042\u308a\u3001 DynamoDB \u306e\u8a2d\u5b9a `dynamodb_table` \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3068 State Locking \u306f\u7121\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001`-lock=false` \u3067\u7121\u52b9\u5316\u3067\u304d\u307e\u3059\u304c\u3001\u516c\u5f0f\u7684\u306b\u975e\u63a8\u5968\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n`-lock-timeout` \u306f lock \u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306b\u4f55\u79d2\u5f8c\u306b\u30ea\u30c8\u30e9\u30a4\u3059\u308b\u304b\u306e\u8a2d\u5b9a\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n## force-unlock\\n\\nlock \u306e\u89e3\u653e\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306e\u305f\u3081\u306b\u3001 [force-unlock](https://www.terraform.io/docs/commands/force-unlock.html) \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\\n\u4f55\u3089\u304b\u306e\u30c8\u30e9\u30d6\u30eb\u3067 lock \u304c\u89e3\u653e\u3055\u308c\u306a\u3044\u5834\u5408\u306b\u4f7f\u3044\u307e\u3059\u3002\\n\\n```\\n$ terraform force-unlock LOCK_ID\\n```\\n\\n\u4f8b\u3048\u3070 plan \u3092\u5b9f\u884c\u4e2d\u306b\u30ad\u30e3\u30f3\u30bb\u30eb\u3059\u308b\u3068 lock \u304c\u89e3\u653e\u3055\u308c\u306a\u3044\u3053\u3068\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\\n\\nlock \u304c\u89e3\u653e\u3055\u308c\u3066\u3044\u306a\u3044\u72b6\u614b\u3067 plan \u306a\u3069\u3092\u5b9f\u884c\u3059\u308b\u3068 lock \u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u3001\u6b21\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u8d77\u3053\u308a\u307e\u3059\u3002\\n\\n```\\nAcquiring state lock. This may take a few moments...\\nError: Error locking state: Error acquiring the state lock: ConditionalCheckFailedException: The conditional request failed\\n\\tstatus code: 400, request id: xxx\\nLock Info:\\n  ID:        xxx\\n  Path:      terraform.tfstate\\n  Operation: OperationTypePlan\\n  Who:       xxx\\n  Version:   0.12.13\\n  Created:   2020-01-09 09:30:37.41120929 +0000 UTC\\n  Info:      \\nTerraform acquires a state lock to protect the state from being written\\nby multiple users at the same time. Please resolve the issue above and try\\nagain. For most commands, you can disable locking with the \\"-lock=false\\"\\nflag, but this is not recommended.\\n```\\n\\n\u3053\u3053\u3067\u51fa\u529b\u3055\u308c\u308b ID \u3092 force-unlock \u306e\u5f15\u6570\u3068\u3057\u3066\u6307\u5b9a\u3057\u307e\u3059\u3002\\n\\n```\\n$ terraform force-unlock xxx\\nDo you really want to force-unlock?\\n  Terraform will remove the lock on the remote state.\\n  This will allow local Terraform commands to modify this state, even though it\\n  may be still be in use. Only \'yes\' will be accepted to confirm.\\n  Enter a value: yes\\nTerraform state has been successfully unlocked!\\nThe state has been unlocked, and Terraform commands should now be able to\\nobtain a new lock on the remote state.\\n```\\n\\n## S3 backend\\n\\nState Locking \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u304b\u306f Backend type \u306b\u3088\u308a\u307e\u3059\u304c\u3001 S3 \u306e\u5834\u5408\u3001 DynamoDB \u3092\u4f7f\u3048\u3070\u3067\u304d\u307e\u3059\u3002\\n\\nhttps://www.terraform.io/docs/backends/types/s3.html#configuration-variables\\n\\nbackend \u306e\u8a2d\u5b9a\u3067 `dynamodb_table` \u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\nhttps://www.terraform.io/docs/backends/types/s3.html#dynamodb_table\\n\\n> dynamodb_table - (Optional) The name of a DynamoDB table to use for state locking and consistency. The table must have a primary key named LockID. If not present, locking will be disabled.\\n\\n```hcl\\ndata \\"terraform_remote_state\\" \\"network\\" {\\n  backend = \\"s3\\"\\n  config = {\\n    bucket = \\"terraform-state-prod\\"\\n    key    = \\"network/terraform.tfstate\\"\\n    region = \\"us-east-1\\"\\n\\n    # state locking \u306e\u8a2d\u5b9a\\n    dynamodb_table = \\"???\\"\\n  }\\n}\\n```\\n\\nIAM\u306e\u6a29\u9650\u3068\u3057\u3066\u306f https://www.terraform.io/docs/backends/types/s3.html#dynamodb-table-permissions \u304c\u5fc5\u8981\u3067\u3059\u3002\\n\\nDynamoDB \u306e\u30c6\u30fc\u30d6\u30eb\u306b\u306f `LockID` \u3068\u3044\u3046 Primary Key \u304c\u5fc5\u8981\u3067\u3059\u3002 \u578b\u306f `\u6587\u5b57\u5217` \u3067\u3059\u3002\\n\\n\u305d\u3057\u3066 State Locking \u3092\u6709\u52b9\u306b\u3057\u305f\u72b6\u614b\u3067 plan \u306a\u3069\u3092\u5b9f\u884c\u3059\u308b\u3068\\nDynamoDB \u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30ec\u30b3\u30fc\u30c9\u304c State \u3054\u3068\u306b\u4f5c\u3089\u308c\u308b\u3088\u3046\u3067\u3059\u3002\\n\\n## State Locking \u3092\u3059\u308c\u3070\u5b89\u5168\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\\n\\nState Locking \u81ea\u4f53\u306f\u5b89\u5168\u6027\u306b\u5bc4\u4e0e\u3059\u308b\u4ed5\u7d44\u307f\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001 State Locking \u3055\u3048\u3059\u308c\u3070\u5b89\u5168\u304b\u3068\u3044\u3046\u3068\u305d\u3046\u3067\u306f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u8907\u6570\u4eba\u304c\u540c\u6642\u306b plan \u3084 apply \u306a\u3069\u3092\u5b9f\u884c\u3059\u308b\u74b0\u5883\u3067\u306f\u3001\u5225\u306e\u30ed\u30c3\u30af\u6a5f\u69cb\u3082\u5fc5\u8981\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u8a73\u7d30\u306f\u307e\u305f\u5225\u9014\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u304c\u3001CI/CD \u3067 plan, apply \u306a\u3069\u3092\u5b9f\u884c\u3059\u308b\u5834\u5408\u3001 apply \u5b9f\u884c\u4e2d\u306f\u305d\u308c\u304c\u7d42\u308f\u308b\u307e\u3067\u4ed6\u306e plan \u3084 apply \u306e\u5b9f\u884c\u3092 wait \u3059\u308b\u3088\u3046\u306a\u4ed5\u7d44\u307f\u304c\u306a\u3044\u3068\u5371\u967a\u3067\u3059\u3002"},{"id":"/dd-time","metadata":{"permalink":"/dd-time","source":"@site/blog/dd-time.md","title":"dd-time - \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u3092 Datadog \u306b\u9001\u308b\u30c4\u30fc\u30eb","description":"\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u3092 Datadog \u306b\u9001\u308b dd-time \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002","date":"2019-11-30T04:54:47.000Z","formattedDate":"November 30, 2019","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"datadog","permalink":"/tags/datadog"}],"readingTime":3.09,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"dd-time - \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u3092 Datadog \u306b\u9001\u308b\u30c4\u30fc\u30eb","date":"2019-11-30T04:54:47.000Z","tags":["oss","datadog"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Terraform \u306e State Locking \u306e\u6982\u8981","permalink":"/terraform-state-locking"},"nextItem":{"title":"\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3084\u3063\u3066\u3044\u304d\u305f\u3044","permalink":"/mobreview"}},"content":"\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u3092 Datadog \u306b\u9001\u308b [dd-time](https://github.com/suzuki-shunsuke/dd-time) \u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\\n\\n\u3053\u306e\u30c4\u30fc\u30eb\u306f [circle-dd-bench](https://github.com/yuya-takeyama/circle-dd-bench) \u306b\u30a4\u30f3\u30b9\u30d1\u30a4\u30a2\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001 CircleCI \u4ee5\u5916\u3067\u3082\u9700\u8981\u3042\u308b\u3068\u601d\u3063\u305f\u308a\u3001\u4ed6\u306b\u3082\u5e7e\u3064\u304b\u6539\u5584\u3057\u305f\u3044\u90e8\u5206\u304c\u3042\u3063\u305f\u306e\u3067\u81ea\u4f5c\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\ncircle-dd-bench \u306b\u3064\u3044\u3066\u306f circle-dd-bench \u306e\u4f5c\u8005\u304c\u66f8\u3044\u305f\u30d6\u30ed\u30b0 https://blog.yuyat.jp/post/circle-dd-bench/ \u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\ndd-time \u306f Go \u88fd\u306a\u306e\u3067 [GitHub Releases](https://github.com/suzuki-shunsuke/dd-time/releases) \u304b\u3089\u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308c\u3070\u4f7f\u3048\u307e\u3059\u3002\\n\\n\u4f7f\u3044\u65b9\u306f\u30b7\u30f3\u30d7\u30eb\u3067\u5b9f\u884c\u6642\u9593\u3092\u8a08\u6e2c\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9\u306e\u524d\u306b `dd-time --` \u3092\u3064\u3051\u308b\u3060\u3051\u3067\u3059\u3002\\n\u4f8b\u3048\u3070 Docker image \u306e\u30d3\u30eb\u30c9\u306e\u6642\u9593\u3092\u8a08\u6e2c\u3057\u305f\u3044\u5834\u5408\u6b21\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```\\n$ dd-time -t command:docker-build -- docker build .\\n```\\n\\nDatadog \u306e API key \u3092\u74b0\u5883\u5909\u6570 `DATADOG_API_KEY` \u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\u3053\u3046\u3059\u308b\u3068 [Datadog \u306e Post timeseries points API](https://docs.datadoghq.com/api/?lang=python#post-timeseries-points) \u3092\u4f7f\u3044\u3001`command_execution_time` \u3068\u3044\u3046\u30e1\u30c8\u30ea\u30c3\u30af\u30b9\u540d(\u5909\u66f4\u53ef\u80fd)\u3067\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u304c\u9001\u3089\u308c\u307e\u3059\u3002\\n\\n\u30e1\u30c8\u30ea\u30c3\u30af\u30b9\u306e\u540d\u524d\u3084 host, tags \u306f\u305d\u308c\u305e\u308c `--metric-name (-m)`, `--host`, `--tag (-t)` \u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\\n`--tag` \u306f\u8907\u6570\u56de\u6307\u5b9a\u53ef\u80fd\u3067\u3001 `key:value` \u3068\u3044\u3046\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\\n\\nCircleCI \u3067\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001 CircleCI \u306e\u30d3\u30eb\u30c9\u30a4\u30f3\u74b0\u5883\u5909\u6570\u304c tag \u3068\u3057\u3066\u52dd\u624b\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u304c\u3001 CircleCI \u4ee5\u5916\u3067\u3082\u4f7f\u3048\u307e\u3059\u3002\\n\\ndd-time \u3092\u4f5c\u308b\u4e0a\u3067\u610f\u8b58\u3057\u305f\u3053\u3068\u306f\u3001`\u900f\u904e\u7684\u306b\u3059\u308b(\u5143\u306e\u30b3\u30fc\u30c9\u306b\u307b\u3068\u3093\u3069\u5f71\u97ff\u3092\u4e0e\u3048\u305a\u306b\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b)`\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\\n\u5177\u4f53\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u70b9\u3067\u3059\u3002\\n\\n* \u6a19\u6e96\u5165\u529b\u3092\u305d\u306e\u307e\u307e\u30b3\u30de\u30f3\u30c9\u306b\u6e21\u3059\\n* \u30b3\u30de\u30f3\u30c9\u306e\u6a19\u6e96\u51fa\u529b\u30fb\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u3092\u305d\u306e\u307e\u307e\u51fa\u529b\u3059\u308b\\n* \u30b3\u30de\u30f3\u30c9\u306e exit code \u3092\u305d\u306e\u307e\u307e dd-time \u306e exit code \u3068\u3059\u308b\\n* Datadog \u3078\u306e\u9001\u4fe1\u306b\u5931\u6557\u3057\u3066\u3082 dd-time \u306e exit code \u306f 0 \u3068\u3059\u308b\\n  (option \u3067 non zero \u306b\u3082\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u3082\u3042\u308a\u3060\u304c\u3001\u73fe\u72b6\u306f\u305d\u3046\u3057\u3066\u306a\u3044)\\n* Datadog \u3078\u306e\u9001\u4fe1\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u5410\u304d\u51fa\u305b\u308b(\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u3068\u6df7\u3056\u3089\u306a\u3044\u3088\u3046\u306b\u3067\u304d\u308b)\\n  * \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u3060\u304c\u3001 `--output (-o)` \u3068 `--apend (-a)` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u3067\u304d\u308b\\n  * `--append` \u3092\u6307\u5b9a\u3059\u308b\u3068\u8ffd\u8a18\u30e2\u30fc\u30c9\u3067\u51fa\u529b\u3067\u304d\u308b\\n* \u9069\u5207\u306b\u30b7\u30b0\u30ca\u30eb\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b(\u672c\u5f53\u306b\u9069\u5207\u3068\u8a00\u3048\u308b\u304b\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u304c)\\n\\n\u4ee5\u4e0a\u3001\u7c21\u5358\u3067\u3059\u304c dd-time \u306e\u7d39\u4ecb\u3067\u3057\u305f\u3002"},{"id":"/mobreview","metadata":{"permalink":"/mobreview","source":"@site/blog/mobreview.md","title":"\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3084\u3063\u3066\u3044\u304d\u305f\u3044","description":"\u6700\u8fd1\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u53d6\u308a\u5165\u308c\u305f\u3044\u3068\u611f\u3058\u3066\u3044\u3066\u3001\u306a\u3093\u3067\u53d6\u308a\u5165\u308c\u305f\u3044\u304b\u306a\u3069\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002","date":"2019-11-10T09:31:05.000Z","formattedDate":"November 10, 2019","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":14.32,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3084\u3063\u3066\u3044\u304d\u305f\u3044","date":"2019-11-10T09:31:05.000Z","tags":["job"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"dd-time - \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u6642\u9593\u3092 Datadog \u306b\u9001\u308b\u30c4\u30fc\u30eb","permalink":"/dd-time"},"nextItem":{"title":"go-timeout - command \u306e timeout","permalink":"/go-timeout"}},"content":"\u6700\u8fd1\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u53d6\u308a\u5165\u308c\u305f\u3044\u3068\u611f\u3058\u3066\u3044\u3066\u3001\u306a\u3093\u3067\u53d6\u308a\u5165\u308c\u305f\u3044\u304b\u306a\u3069\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\\n\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u81ea\u4f53\u307e\u3060 2, 3 \u56de\u3057\u304b\u3084\u3063\u3066\u306a\u3044\u306e\u3067\u8aac\u5f97\u529b\u306b\u304b\u3051\u307e\u3059\u304c\u3001\u3054\u5bb9\u8d66\u304f\u3060\u3055\u3044\u3002\\n\\n## \u60f3\u5b9a\\n\\n* \u30c1\u30fc\u30e0\u306f 6 \u4eba\u4ee5\u4e0b\\n* Pull Request (\u4ee5\u4e0b PR) \u3092\u30de\u30fc\u30b8\u3059\u308b\u306b\u306f\u5fc5\u305a\u4ed6\u306e\u8ab0\u304b\u304c approve \u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n\\n## \u76ee\u7684\\n\\n* \u30c1\u30fc\u30e0\u5185\u306e\u60c5\u5831\u5171\u6709\\n  * \u5c5e\u4eba\u5316\u306e\u89e3\u6d88\\n  * \u9000\u8077\u3084\u7570\u52d5\u306a\u3069\u306b\u3088\u308b\u60c5\u5831\u306e\u55aa\u5931(\u8ab0\u3082\u5206\u304b\u3089\u306a\u3044\u72b6\u614b)\u3092\u9632\u3050\\n  * \u30c1\u30fc\u30e0\u5916\u306e\u4eba\u3068\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3082\u6d3b\u7528\u3067\u304d\u308b\\n* \u30ec\u30d3\u30e5\u30fc\u5f85\u3061\u306e\u77ed\u7e2e\\n* \u30ec\u30d3\u30e5\u30fc\u306e\u54c1\u8cea\u306e\u6539\u5584\\n* \u4ed5\u4e8b\u3092\u8a55\u4fa1\u3057\u3066\u3082\u3089\u3046\u3053\u3068\u3067\u627f\u8a8d\u6b32\u6c42\u3092\u6e80\u305f\u3059\\n* \u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u6539\u5584\\n  * \u30ec\u30d3\u30e5\u30fc\u3092\u901a\u3058\u3066\u5fc5\u8981\u306a\u77e5\u8b58\u3092\u5438\u53ce\u3057\u3066\u3082\u3089\u3046\\n  * \u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306b\u9650\u3063\u305f\u3053\u3068\u3067\u306f\u306a\u3044\u304c\u3001\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306b\u3082\u6709\u52b9\u3067\u306f\u306a\u3044\u304b\\n* \u6700\u5f8c\u307e\u3067\u3084\u308a\u304d\u308b\\n\\n\u7b87\u6761\u66f8\u3057\u305f\u5185\u5bb9\u3092\u88dc\u8db3\u3057\u307e\u3059\u3002\\n\\n### \u60c5\u5831\u5171\u6709\\n\\n\u5c5e\u4eba\u5316\u306e\u89e3\u6d88\u306f\u7d50\u69cb\u91cd\u8981\u3060\u3068\u81ea\u5206\u306f\u601d\u3063\u3066\u3044\u3066\u3001\u7279\u5b9a\u306e\u4eba\u3058\u3083\u306a\u3044\u3068\u51fa\u6765\u306a\u3044\u3053\u3068\u3001\u308f\u304b\u3089\u306a\u3044\u3053\u3068\u3068\u3044\u3046\u306e\u306f\\n\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u3084\u6280\u8853\u7684\u8ca0\u50b5\u3060\u3063\u305f\u308a\u3001\u969c\u5bb3\u5bfe\u5fdc\u6642\u306b\u81f4\u547d\u7684\u306b\u306a\u308a\u304b\u306d\u307e\u305b\u3093(\u6df1\u591c\u306b\u969c\u5bb3\u304c\u8d77\u3053\u3063\u3066A\u3055\u3093\u306b\u805e\u304b\u306a\u3044\u3068\u308f\u304b\u3089\u306a\u3044\u306e\u306b\u3001A\u3055\u3093\u3068\u9023\u7d61\u304c\u53d6\u308c\u306a\u3044\u3068\u304b\u6700\u60aa)\u3002\\n\u30c1\u30fc\u30e0\u5168\u54e1\u3068\u306f\u3044\u304b\u306a\u304f\u3066\u3082 3 \u4eba\u3050\u3089\u3044\u306f\u51fa\u6765\u308b\u30fb\u5206\u304b\u3063\u3066\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u307e\u3041\u3001\u5f53\u521d\u306f 3 \u4eba\u3050\u3089\u3044\u5206\u304b\u3063\u3066\u3066\u3082\u3001\u6642\u9593\u304c\u7d4c\u3063\u3066\u7570\u52d5\u3084\u3089\u9000\u8077\u3084\u3089\u3067\u6c17\u3065\u3044\u305f\u3089\u5206\u304b\u3063\u3066\u3044\u308b\u4eba\u3044\u306a\u304f\u306a\u3063\u3066\u305f\u3068\u3044\u3046\u306e\u306f\\n\u3042\u308a\u3048\u306a\u304f\u306a\u3044\u306e\u3067\u3001\u305d\u3046\u3044\u3063\u305f\u30ea\u30b9\u30af\u3092\u3069\u3046\u3084\u3063\u3066\u9632\u3050\u304b\u3068\u3044\u3046\u306e\u306f\u8003\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u56de\u306e\u8a71\u3068\u306f\u5916\u308c\u308b\u306e\u3067\u5272\u611b\u3057\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001\u30c1\u30fc\u30e0\u5916\u306e\u4eba\u3068\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3082\u6d3b\u7528\u3067\u304d\u308b\u3068\u601d\u3063\u3066\u3044\u3066\u3001\\n\u4f8b\u3048\u3070\u30e9\u30f3\u30c1\u3084\u98f2\u307f\u4f1a\u3067\u30c1\u30fc\u30e0\u5916\u306e\u4eba\u3068\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u53d6\u308b\u969b\u306b\u81ea\u5206\u306e\u30c1\u30fc\u30e0\u306e\u4ed6\u306e\u4eba\u304c\u5bfe\u5fdc\u3057\u305f\u4ef6\u3068\u304b\u304c\u8a71\u984c\u306b\u4e0a\u304c\u3063\u305f\u3068\u304d\u306b\\n\u3061\u3083\u3093\u3068\u60c5\u5831\u5171\u6709\u3067\u304d\u3066\u306a\u3044\u3068\u3001\u81ea\u5206\u306f\u62c5\u5f53\u5916\u306a\u306e\u3067\u5206\u304b\u308a\u307e\u305b\u3093\u3068\u306a\u3063\u3066\u3057\u307e\u3046\u3067\u3057\u3087\u3046\u3002\\n\u77e5\u3063\u3066\u3044\u308c\u3070\u3080\u3057\u308d\u81ea\u5206\u304b\u3089\u8a71\u984c\u306b\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\u305d\u3053\u304b\u3089\u767a\u5c55\u3057\u3066\u66f4\u306b\u65b0\u3057\u3044\u30bf\u30b9\u30af\u306e\u8a71\u3082\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n### \u30ec\u30d3\u30e5\u30fc\u306e\u6539\u5584\\n\\n\u305b\u3063\u304b\u304f\u3044\u3044\u4ed5\u4e8b\u3092\u3057\u3066\u3082\u4e2d\u3005\u30ec\u30d3\u30e5\u30fc\u3057\u3066\u3082\u3089\u3048\u306a\u3044\u3068\u306a\u308b\u3068\u4e0d\u6e80\u304c\u305f\u307e\u308a\u307e\u3059\u3002\\n\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3092\u5b9f\u65bd\u3059\u308b\u3053\u3068\u3067\u30ec\u30d3\u30e5\u30fc\u3092\u4fc3\u9032\u3057\u3001\u30ec\u30d3\u30e5\u30fc\u5f85\u3061\u306e\u6642\u9593\u3092\u77ed\u304f\u3067\u304d\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\\n\u30ec\u30d3\u30e5\u30fc\u3057\u305f\u304f\u3066\u3082\u826f\u304f\u308f\u304b\u3089\u306a\u304f\u3066\u30ec\u30d3\u30e5\u30fc\u3067\u304d\u306a\u3044\u3068\u3044\u3046\u30d1\u30bf\u30fc\u30f3\u3082\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u3001\\n\u308f\u304b\u3089\u306a\u3044\u90e8\u5206\u3092\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3067\u89e3\u6d88\u3055\u308c\u3066\u30ec\u30d3\u30e5\u30fc\u304c\u9032\u3080\u3068\u826f\u3044\u3067\u3059\u306d\u3002\\n\\n\u307e\u305f\u3001\u3061\u3083\u3093\u3068\u8907\u6570\u4eba\u3067\u30ec\u30d3\u30e5\u30fc\u3059\u308b\u3053\u3068\u3067\u76ee\u5148\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3060\u3051\u306e\u672c\u8cea\u7684\u3067\u306a\u3044\u554f\u984c\u89e3\u6c7a\u3092\u9632\u3050\u3053\u3068\u304c\u51fa\u6765\u308b\u3053\u3068\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\u300c\u3044\u3084\u3001\u305d\u308c\u305d\u3082\u305d\u3082PR\u306e\u524d\u63d0\u304c\u304a\u304b\u3057\u304f\u306a\u3044\uff1f\u524d\u63d0\u3068\u306a\u3063\u3066\u3044\u308b\u4ed5\u69d8\u3092\u898b\u76f4\u3059\u3079\u304d\u306a\u306e\u3067\u306f\u300d\\n\u307f\u305f\u3044\u306a\u3053\u3068\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n### \u4ed5\u4e8b\u3092\u8a55\u4fa1\u3057\u3066\u3082\u3089\u3046\u3053\u3068\u3067\u627f\u8a8d\u6b32\u6c42\u3092\u6e80\u305f\u3059\\n\\n\u3044\u3044\u4ed5\u4e8b\u3057\u305f\u3089\u4ed6\u306e\u4eba\u306b\u3082\u77e5\u3063\u3066\u3082\u3089\u3044\u305f\u3044\u3068\u3044\u3046\u306e\u306f\u81ea\u7136\u306a\u3053\u3068\u3067\u3057\u3087\u3046\u3002\\n\u3044\u3044\u4ed5\u4e8b\u3092\u8912\u3081\u308b\u306e\u306f\u826f\u3044\u30c1\u30fc\u30e0\u30fb\u74b0\u5883\u3067\u3042\u308a\u50cd\u304d\u3084\u3059\u3055\u3068\u3044\u3046\u3068\u3053\u308d\u306b\u3064\u306a\u304c\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\\n\\n\u3061\u306a\u307f\u306b\u73fe\u8077\u3060\u3068 Slack \u3067\u4ed6\u306e\u30c1\u30fc\u30e0\u306b\u3082\u5171\u6709\u3057\u3066 emoji \u3067\u8912\u3081\u79f0\u3048\u308b\u3068\u3044\u3046\u306e\u304c\u7d50\u69cb\u3084\u3089\u308c\u3066\u3044\u3066\\n\u6c17\u6301\u3061\u306e\u3044\u3044\u74b0\u5883\u3060\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n### \u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u3078\u306e\u6d3b\u7528\\n\\n\u305d\u3082\u305d\u3082\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u3068\u3044\u3046\u3082\u306e\u3092\u3061\u3083\u3093\u3068\u53d7\u3051\u305f\u306e\u304c\u73fe\u8077\u304c\u521d\u3081\u3066\u3067\u3001\\n\u73fe\u8077\u3067\u3082\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306b\u3064\u3044\u3066\u306f\u307e\u3060\u307e\u3060\u691c\u8a0e\u4e2d\u3067\u3042\u308a\u3001\u300c\u4f55\u3092\u3082\u3063\u3066\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306f\u7d42\u308f\u308a\u3068\u8a00\u3048\u308b\u306e\u304b\u300d\u307f\u305f\u3044\u306a\u8b70\u8ad6\u304c Slack \u3067\u3055\u308c\u3066\u305f\u308a\u3057\u3066\u3001\\n\u81ea\u5206\u3082\u3088\u304f\u308f\u304b\u3063\u3066\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u304c\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0\u306b\u3082\u6d3b\u7528\u3067\u304d\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u3044\u3046\u6c17\u304c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u8272\u3005\u306a\u306b\u3082\u5206\u304b\u3063\u3066\u306a\u3044\u72b6\u614b\u306e New Joiner \u3067\u3082\u7406\u89e3\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u80cc\u666f\u3068\u304b\u3092\u8aac\u660e\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u3067\\n\u4f1a\u793e\u56fa\u6709\u306e\u30c9\u30e1\u30a4\u30f3\u77e5\u8b58\u306a\u3069\u3092\u88dc\u3044\u3001\u6226\u529b\u5316\u3092\u4fc3\u3059\u3053\u3068\u304c\u51fa\u6765\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\u4f1a\u793e\u56fa\u6709\u306e\u7565\u8a9e\u306a\u3069\u304c\u5f53\u305f\u308a\u524d\u306b\u4f7f\u308f\u308c\u3066\u305f\u308a\u3059\u308b\u3068 New Joiner \u306b\u306f\u7406\u89e3\u3067\u304d\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u305d\u3046\u3044\u3046\u306e\u3082\u542b\u3081\u3066\u30d5\u30a9\u30ed\u30fc\u3057\u3066\u3042\u3052\u308b\u826f\u3044\u6a5f\u4f1a\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u5316\u306a\u3093\u304b\u3092\u3084\u3063\u3066\u3044\u308b\u3068 New Joiner \u306b\u306f\u540d\u524d\u3092\u805e\u3044\u305f\u3060\u3051\u3067\u306f\u7406\u89e3\u3067\u304d\u306a\u3044\u3082\u306e\u3082\u51fa\u3066\u304d\u307e\u3059\u3057\u306d\u3002\\n\\n\u307e\u3041\u3042\u307e\u308a\u7d30\u304b\u306a\u8a71\u307e\u3067\u3057\u3060\u3059\u3068\u305d\u308c\u306f\u307e\u3060 New Joiner \u306b\u306f\u65e9\u3044\u3068\u3044\u3046\u3053\u3068\u306b\u3082\u306a\u308b\u306e\u3067\u3001\u30b1\u30fc\u30b9\u30d0\u30a4\u30b1\u30fc\u30b9\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n### \u6700\u5f8c\u307e\u3067\u3084\u308a\u304d\u308b\\n\\nPR \u3092\u6295\u3052\u305f\u5f8c\u3001\u30ec\u30d3\u30e5\u30fc\u3057\u3066\u3082\u3089\u3048\u306a\u3044\u3001\u8aac\u660e\u3092\u66f8\u3044\u3066\u3044\u308b\u306e\u306b\u8aad\u3093\u3067\u3082\u3089\u3048\u306a\u3044\u3068\u3044\u3063\u305f\u3068\u304d\u306b\\n\\n* \u81ea\u5206\u306f\u3084\u308b\u3079\u304d\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u308b\\n* \u30ec\u30d3\u30e5\u30fc\u3057\u306a\u3044\u4eba\u305f\u3061\u304c\u60aa\u3044\\n* \u8aac\u660e\u3092\u8aad\u307e\u306a\u3044\u4eba\u305f\u3061\u304c\u60aa\u3044\\n\\n\u3068\u3057\u3066\u305d\u308c\u4ee5\u4e0a\u306a\u306b\u3082\u3057\u306a\u3044\u3068\u3044\u3046\u306e\u306f\u3082\u3063\u305f\u3044\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\u300c\u7d50\u679c\u304c\u3059\u3079\u3066\u300d\u3060\u3068\u8003\u3048\u308b\u3068\u8aac\u660e\u3092\u66f8\u3044\u3066\u3082\u8aad\u3093\u3067\u3082\u3089\u3048\u306a\u304b\u3063\u305f\u3089\u305d\u308c\u306f\u66f8\u3044\u3066\u306a\u3044\u3068\u540c\u3058\u306a\u306e\u3067\\n\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3068\u3044\u3046\u5f62\u3067\u8aad\u3093\u3067\u3082\u3089\u3046\u52aa\u529b\u3092\u3059\u308b\u306e\u304c\u3088\u308a\u5efa\u8a2d\u7684\u306a\u306e\u3067\u3057\u3087\u3046\u3002\\n\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3057\u3066\u307f\u305f\u3089\u300c\u30ec\u30d3\u30e5\u30fc\u3057\u3088\u3046\u3068\u601d\u3063\u305f\u3051\u3069\u3001\u3053\u3053\u304c\u826f\u304f\u308f\u304b\u3089\u306a\u304f\u3066\u3084\u3081\u3061\u3083\u3063\u305f\u3093\u3060\u3088\u306d\u300d\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u3063\u305f\u306e\u3067\u3001\\n\u81ea\u5206\u306e\u8aac\u660e\u3082\u8db3\u308a\u3066\u306a\u304b\u3063\u305f\u3093\u3060\u306a\u3068\u898b\u76f4\u3059\u826f\u3044\u6a5f\u4f1a\u306b\u3082\u306a\u308a\u307e\u3059\u3002\\n\\n## \u89e3\u6c7a\u3057\u305f\u3044\u8ab2\u984c\\n\\n* \u4ed6\u306e\u4eba\u304c\u4f55\u3084\u3063\u3066\u308b\u306e\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\\n* \u4ed6\u306e\u4eba\u306e\u3092\u30ec\u30d3\u30e5\u30fc\u3057\u3088\u3046\u3068\u3057\u3066\u3082\u826f\u304f\u308f\u304b\u3089\u306a\u304f\u3066\u305d\u3063\u3068\u30bf\u30d6\u3092\u9589\u3058\u3066\u3057\u307e\u3046\\n  * \u5206\u304b\u3089\u306a\u3044\u3053\u3068\u3092\u7406\u89e3\u3059\u308b\u6210\u9577\u30c1\u30e3\u30f3\u30b9\u3092\u7121\u99c4\u306b\u3057\u3066\u3044\u308b\u306e\u3067\u306f\\n* \u30ec\u30d3\u30e5\u30fc\u5f85\u3061\u304c\u9577\u3044\\n  * \u7d30\u304b\u304f PR \u3092\u6295\u3052\u305f\u304f\u3066\u3082\u524d\u306e\u304c\u30de\u30fc\u30b8\u3055\u308c\u3066\u306a\u3044\u3068\u5148\u306b\u9032\u3081\u306a\u3044\\n  * \u30de\u30fc\u30b8\u3055\u308c\u306a\u3044\u307e\u307e master \u304c\u66f4\u65b0\u3055\u308c\u3066\u9010\u4e00 rebase \u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n* \u30ec\u30d3\u30e5\u30fc\u306e\u54c1\u8cea\u306e\u4f4e\u4e0b\\n  * \u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3051\u3069\u30de\u30fc\u30b8\u3057\u3066\u3057\u307e\u3048: \u30ec\u30d3\u30e5\u30fc\u306e\u610f\u5473\u304c\u306a\u3044\\n* issue \u3084 PR \u306e\u8aac\u660e\u3084\u30b3\u30e1\u30f3\u30c8\u304c\u8db3\u308a\u3066\u306a\u3044\\n  * \u8aac\u660e\u3092\u82f1\u8a9e\u3067\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3068\u304b\u3060\u3068\u3001\u8aac\u660e\u4e0d\u8db3\u306b\u306a\u308a\u3084\u3059\u3044\\n  * \u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3067\u53e3\u982d\u3067\u8aac\u660e\u3057\u3066\u307f\u308b\u3068\u3001 issue \u3084 PR \u306b\u66f8\u3044\u3066\u306a\u3044\u60c5\u5831\u304c\u51fa\u3066\u304f\u308b\\n    \u305d\u306e\u60c5\u5831\u3092\u8ffd\u8a18\u3059\u308b\u3053\u3068\u3067(\u53e3\u982d\u3067\u8aac\u660e\u3059\u308b\u3060\u3051\u3067\u306f\u3060\u3081\u3002\u5f8c\u304b\u3089\u305d\u306e\u5834\u306b\u3044\u306a\u304b\u3063\u305f\u4eba\u3082\u898b\u8fd4\u3059\u3082\u306e)\u6539\u5584\u3067\u304d\u308b\\n\\n## \u5b9f\u65bd\u65b9\u6cd5\\n\\n\u5b9a\u4f8b\u3092\u7d44\u3080\u306e\u3082\u3042\u308a\u3067\u3059\u304c\u3001\u500b\u4eba\u7684\u306b\u306f\u4e88\u5b9a\u3092\u62bc\u3055\u3048\u306a\u304f\u3066\u3082\u5834\u6240\u3092\u78ba\u4fdd\u3067\u304d\u308b\u306e\u306a\u3089(\u30d5\u30ea\u30fc\u30b9\u30da\u30fc\u30b9\u3068\u304b\u306b\u30e2\u30cb\u30bf\u30fc\u304c\u3042\u3063\u3066\u30b5\u30c3\u3068\u51fa\u6765\u308b\u306a\u3089\u7406\u60f3\u7684)\u4e0d\u5b9a\u671f\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\u3084\u308a\u305f\u304f\u306a\u3063\u305f\u3089\u305d\u306e\u65e8\u3092 Slack \u3067\u30b5\u30c3\u3068\u5171\u6709\u3057\u3001\u305d\u306e\u5834\u3067\u76f4\u3050\u3067\u304d\u308b\u306a\u3089\u3084\u308a\u3001\\n\u3067\u304d\u306a\u3044\u5834\u5408\u30ab\u30ec\u30f3\u30c0\u30fc\u898b\u3066\u7a7a\u3044\u3066\u305d\u3046\u306a\u67a0\u3092\u898b\u3064\u3051\u3066\u4e88\u5b9a\u3092\u62bc\u3055\u3048\u308b\u304b\u3001Slack\u306e\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\\n\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3067\u8a71\u3057\u3066\u3044\u308b\u5185\u5bb9\u3084\u3001\u8cea\u7591\u5fdc\u7b54\u306a\u3069\u306f Slack \u306e\u30b9\u30ec\u30c3\u30c9\u306b\u3067\u3082\u30e1\u30e2\u3063\u3066\u304a\u304f\u3068\u826f\u3055\u305d\u3046\u3067\u3059\u3002\\nissue \u3084 PR \u306e\u8aac\u660e\u306b\u66f8\u3044\u3066\u306a\u3044\u3053\u3068\u304c\u51fa\u3066\u304d\u305f\u3089\u3001\u8aac\u660e\u3092\u4fee\u6b63\u3057\u3066\u8ffd\u8a18\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\\n\\n### \u5b9a\u671f\u7684\u306b\u4e88\u5b9a\u3092\u3044\u308c\u308b\u61f8\u5ff5\u70b9\\n\\n* \u5b9a\u4f8b\u306f\u5c11\u306a\u3044\u307b\u3046\u304c\u826f\u3044\\n* \u5f62\u5f0f\u7684\u306b\u306a\u308b\\n* \u5b9a\u4f8b\u307e\u3067\u5f85\u305f\u306a\u304f\u3066\u826f\u3044\u306e\u3067\u306f\\n* \u5b9a\u4f8b\u307e\u3067\u30ec\u30d3\u30e5\u30fc\u3057\u306a\u3044\u3068\u3044\u3046\u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\u304c\u50cd\u304f\u5834\u5408\u3082\u3042\u308b\u306e\u3067\u306f\\n\\n### \u3084\u308a\u305f\u304f\u306a\u3063\u305f\u3089\u3084\u308b\u5834\u5408\u306e\u61f8\u5ff5\u70b9\\n\\n* \u30ab\u30ec\u30f3\u30c0\u30fc\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u306e\u304c\u9762\u5012\u304f\u3055\u3044(\u30b3\u30b9\u30c8\u304c\u304b\u304b\u308b)\\n* \u4eba\u306b\u3088\u3063\u3066\u306f\u8e8a\u8e87\u3057\u3066\u3057\u307e\u3046\\n* \u5834\u6240\u3092\u78ba\u4fdd\u3067\u304d\u306a\u3044\u304b\u3082\\n\\n## \u61f8\u5ff5\u70b9\\n\\n* \u8907\u6570\u4eba\u306e\u6642\u9593\u3092\u62d8\u675f\u3057\u3066\u5b9f\u65bd\u3059\u308b\u3053\u3068\u306e\u30b3\u30b9\u30c8\\n* \u53e3\u982d\u3067\u8aac\u660e\u3059\u308b\u3053\u3068\u306b\u7518\u3048\u3066\u3061\u3083\u3093\u3068 issue \u3084 PR \u306b\u66f8\u304b\u306a\u304f\u306a\u308b\\n  * \u30ec\u30d3\u30e5\u30fc\u306e\u6bb5\u968e\u3067\u6307\u6458\u3059\u308b\\n* \u5834\u6240\u3092\u62bc\u3055\u3048\u3089\u308c\u308b\u304b\\n  * \u4f1a\u8b70\u5ba4\u8db3\u308a\u306a\u3044\u554f\u984c\\n* \u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u306e\u610f\u7fa9\u3092\u5171\u6709\u3067\u304d\u308b\u304b\\n  * \u4eba\u306b\u3088\u3063\u3066\u306f\u6642\u9593\u306e\u7121\u99c4\u3068\u601d\u3046\u4eba\u304c\u3044\u3066\u3082\u304a\u304b\u3057\u304f\u306a\u3044\\n  * \u4e0d\u6e80\u3084\u63d0\u6848\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u3061\u3083\u3093\u3068\u305d\u308c\u3092\u8a00\u3048\u308b\u74b0\u5883\u3067\u3042\u308a\u305f\u3044\\n\\n\u3061\u3083\u3093\u3068\u6587\u7ae0\u5316\u3059\u308b\u306e\u3092\u3081\u3093\u3069\u304f\u3055\u304c\u3063\u3066\u53e3\u982d\u3067\u306e\u8aac\u660e\u3067\u6e08\u307e\u3057\u305f\u304c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3089\u3088\u308d\u3057\u304f\u306a\u3044\u3067\u3059\u306d\u3002\\n\\n## \u81ea\u5206\u306e\u53cd\u7701\u70b9\\n\\n\u3053\u3053\u307e\u3067\u66f8\u3044\u3066\u51fa\u3066\u304d\u305f\u81ea\u5206\u306e\u53cd\u7701\u70b9\u3068\u3057\u3066\u306f\u3001 issue \u3084 PR \u306e\u8aac\u660e\u3067\u3061\u3083\u3093\u3068 Context \u3084 Background \u3092\u3082\u3063\u3068\u3061\u3083\u3093\u3068\u66f8\u304b\u306a\u3044\u3068\u99c4\u76ee\u304b\u306a\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\\n\u53e3\u982d\u3067\u8aac\u660e\u3059\u308b\u969b\u306b\u306f\u305d\u306e\u3078\u3093\u3092\u6700\u521d\u306b\u610f\u8b58\u3057\u3066\u8a71\u3059\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u8aac\u660e\u306b\u306f\u66f8\u3044\u3066\u306a\u3044\u3053\u3068\u304c\u5c11\u306a\u304f\u306a\u3044\u306e\u3067\u3061\u3083\u3093\u3068\u66f8\u304f\u3088\u3046\u306b\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\n\\n## \u3080\u3059\u3073\\n\\n\u4eca\u56de\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u306b\u3064\u3044\u3066\u3042\u308c\u3053\u308c\u8003\u3048\u3066\u307f\u307e\u3057\u305f\u3002\\n\u307e\u3060\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u306f 2, 3 \u56de\u3084\u3063\u305f\u7a0b\u5ea6\u306a\u306e\u3067\u3001\u3061\u3083\u3093\u3068\u53d6\u308a\u7d44\u3093\u3067\u307f\u3066 PDCA \u56de\u3057\u3066\u6539\u5584\u51fa\u6765\u305f\u3089\u826f\u3044\u306a\u3068\u601d\u3044\u307e\u3059\u3002\\n\u4f8b\u3048\u3070\u3001\u4eca\u306e\u6240\u5b9a\u671f\u3067\u306f\u3084\u308a\u305f\u304f\u306a\u3044\u3068\u601d\u3063\u3066\u307e\u3059\u304c\u3001\u3084\u3063\u3066\u307f\u305f\u3089\u3061\u3083\u3093\u3068\u5b9a\u671f\u3058\u3083\u306a\u3044\u3068\u99c4\u76ee\u3060\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3057\u3001\\n\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u306f\u76ee\u7684\u3058\u3083\u306a\u304f\u3066\u624b\u6bb5\u306a\u306e\u3067\u3001\u4ed6\u306b\u3082\u3063\u3068\u3088\u3044\u624b\u6bb5\u304c\u3042\u3063\u3066\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u4e0d\u8981\u3060\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n\u3084\u3089\u306a\u3044\u3068\u59cb\u307e\u3089\u306a\u3044\u306e\u3067\u3084\u308c\u305f\u3089\u3044\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"/go-timeout","metadata":{"permalink":"/go-timeout","source":"@site/blog/go-timeout.md","title":"go-timeout - command \u306e timeout","description":"\u4f5c\u3063\u305f\u306e\u306f 2\u30f6\u6708\u304f\u3089\u3044\u524d\u306e\u8a71\u3067\u3059\u304c\u3001","date":"2019-11-04T01:00:21.000Z","formattedDate":"November 4, 2019","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"golang","permalink":"/tags/golang"}],"readingTime":2.28,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"go-timeout - command \u306e timeout","date":"2019-11-04T01:00:21.000Z","tags":["oss","golang"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u30e2\u30d6\u30ec\u30d3\u30e5\u30fc\u3084\u3063\u3066\u3044\u304d\u305f\u3044","permalink":"/mobreview"},"nextItem":{"title":"cmdx - task runner","permalink":"/cmdx"}},"content":"\u4f5c\u3063\u305f\u306e\u306f 2\u30f6\u6708\u304f\u3089\u3044\u524d\u306e\u8a71\u3067\u3059\u304c\u3001\\nGo \u306e command \u306e timeout \u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-timeout\\n\\n\u57fa\u672c\u7684\u306b\u306f https://github.com/Songmu/timeout \u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u304c\u3001\u3053\u308c\u3060\u3068\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u30d1\u30bf\u30fc\u30f3\u304c\u3042\u3063\u305f\u306e\u3067\u81ea\u4f5c\u3057\u307e\u3057\u305f\u3002\\n\\nGo \u306e command \u306e timeout \u306b\u95a2\u3057\u3066\u306f https://junkyard.song.mu/slides/gocon2019-spring/#24 \u304c\u3068\u3066\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n\u4e0a\u8a18\u306e\u30b9\u30e9\u30a4\u30c9\u3067\u306f\\n\\n* \u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306e [exec.CommandContext](https://golang.org/pkg/os/exec/#CommandContext) \u3067\u3082\u505c\u6b62\u3067\u304d\u308b\u304c\u3001 SIGKILL \u3067\u5f37\u5236\u7684\u306b\u505c\u6b62\u3059\u308b\u3053\u3068\u306b\u306a\u308b\\n  * \u5b50\u30d7\u30ed\u30bb\u30b9\u304c\u505c\u6b62\u3057\u306a\u3044\\n* [\u516c\u5f0f\u898b\u89e3](https://github.com/golang/go/issues/21135) \u3067\u306f\u3001SIGKILL \u4ee5\u5916\u306f\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u306f\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044\u3002\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u3067\u3084\u308c\u3070\u3088\u3044\\n* [Songmu/timeout](https://github.com/Songmu/timeout) \u4f7f\u3048\u3070 SIGKILL \u4ee5\u5916\u3067\u3088\u308a\u5b89\u5168\u306b\u505c\u6b62\u3067\u304d\u308b\\n\\n\u3068\u3044\u3046\u3053\u3068\u304c\u4e01\u5be7\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n\u81ea\u5206\u306f [cmdx](https://github.com/suzuki-shunsuke/cmdx) \u3068\u3044\u3046 task runner \u3092\u958b\u767a\u3057\u3066\u3044\u3066\u305d\u306e\u4e2d\u3067 task \u306e\u5b9f\u884c\u6642\u306b timeout \u3092\u8a2d\u5b9a\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\u5f53\u521d [Songmu/timeout](https://github.com/Songmu/timeout) \u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3057\u305f\u306e\u3067\u3059\u304c\u3001\u554f\u984c\u304c\u3042\u308b\u3053\u3068\u306b\u6c17\u3065\u304d\u307e\u3057\u305f\u3002\\n\u305d\u308c\u306f\u3001 command \u306e\u4e2d\u3067 [fzf](https://github.com/junegunn/fzf) \u3092\u4f7f\u3046\u3068\u3001\u4e0a\u624b\u304f\u52d5\u304b\u306a\u3044\u3068\u3044\u3046\u3082\u306e\u3067\u3057\u305f\u3002\\n\\n* https://github.com/suzuki-shunsuke/cmdx/issues/52\\n* https://twitter.com/szkdash/status/1165529415238815745\\n\\n\u6b63\u76f4\u3053\u306e\u8fba\u306e\u6319\u52d5\u306f\u3061\u3083\u3093\u3068\u7406\u89e3\u3067\u304d\u3066\u3044\u306a\u3044\u306e\u3067\u3059\u304c\u3001\\n\u8abf\u3079\u3066\u307f\u308b\u3068 Songmu/timeout \u3060\u3068 syscall.SysProcAttr \u306e Setpgid \u3092 true \u306b\u8a2d\u5b9a\u3057\u3066\u3044\u3066\u3001\u305d\u3046\u3059\u308b\u3068 fzf \u304c\u4e0a\u624b\u304f\u52d5\u304b\u306a\u3044\u3088\u3046\u3067\u3057\u305f\u3002\\n\\nhttps://junkyard.song.mu/slides/gocon2019-spring/#48\\n\\nhttps://junkyard.song.mu/slides/gocon2019-spring/#45\\n\\n\u306b\u306f timeout \u306e\u5b9f\u88c5\u65b9\u5f0f\u3068\u3057\u3066\\n\\n* GNU timeout \u306e\u5834\u5408\\n* Songmu timeout \u306e\u5834\u5408\\n\\n\u306e 2 \u901a\u308a\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3001 suzuki-shunsuke/go-timeout \u3067\u306f GNU timeout \u306e\u30d1\u30bf\u30fc\u30f3\u3067\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002 \\n\\nhttps://junkyard.song.mu/slides/gocon2019-spring/#46\\n\\n\u306b\u66f8\u3044\u3066\u3042\u308b\u3068\u304a\u308a\u3001\u5c11\u3005\u4e71\u66b4\u306a\u6c17\u3082\u3057\u307e\u3059\u304c\u3001 [cmdx](https://github.com/suzuki-shunsuke/cmdx) \u3067\u4f7f\u3046\u5206\u306b\u306f\u7279\u306b\u554f\u984c\u306a\u3044\u6c17\u304c\u3057\u307e\u3059\u3002"},{"id":"/cmdx","metadata":{"permalink":"/cmdx","source":"@site/blog/cmdx.md","title":"cmdx - task runner","description":"\u6700\u8fd1\u81ea\u4f5c\u3057\u305f OSS, cmdx \u306e\u7d39\u4ecb\u3067\u3059\u3002","date":"2019-08-23T02:35:13.000Z","formattedDate":"August 23, 2019","tags":[{"label":"oss","permalink":"/tags/oss"}],"readingTime":5.46,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"cmdx - task runner","date":"2019-08-23T02:35:13.000Z","tags":["oss"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"go-timeout - command \u306e timeout","permalink":"/go-timeout"},"nextItem":{"title":"Drone Extension \u306e\u30ea\u30b9\u30af","permalink":"/risk-of-drone-extension"}},"content":"\u6700\u8fd1\u81ea\u4f5c\u3057\u305f OSS, cmdx \u306e\u7d39\u4ecb\u3067\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/cmdx\\n\\ncmdx \u306f task runner \u3067\u3059\u3002\\n\\n`task runner` \u306e\u5b9a\u7fa9\u306f\u30b0\u30b0\u3063\u3066\u3082\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3001 cmdx \u3092 `task runner` \u3068\u547c\u3076\u306e\u304c\u9069\u5207\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001\\n\u3053\u3053\u3067\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u56fa\u6709\u306e\u30bf\u30b9\u30af\\n\\n* \u4f9d\u5b58\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n* \u30d3\u30eb\u30c9\\n* \u30c6\u30b9\u30c8\\n* \u30b3\u30fc\u30c9\u6574\u5f62\\n* lint\\n* etc\\n\\n\u306a\u3069\u3092\u7ba1\u7406\u3059\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\\n\\n\u985e\u4f3c\u3059\u308b\u3082\u306e\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* Make\\n* [npm scripts](https://docs.npmjs.com/misc/scripts)\\n* [Task](https://taskfile.dev/)\\n* [tj/robo](https://github.com/tj/robo)\\n* [mumoshu/variant](https://github.com/mumoshu/variant)\\n\\n## \u4f7f\u3044\u65b9\\n\\n\u8a73\u7d30\u306f [README](https://github.com/suzuki-shunsuke/cmdx/blob/master/README.md) \u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\\n\\n```\\n$ cmdx -i\\n```\\n\\n\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u96db\u5f62\u3092\u751f\u6210\u3057\u307e\u3059\u3002\\n\\n\u305d\u3057\u3066\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b task \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u304d\u307e\u3059\u3002\\n\u8a2d\u5b9a\u306b\u95a2\u3057\u3066\u306f [README](https://github.com/suzuki-shunsuke/cmdx/blob/master/README.md) \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u305d\u3046\u3059\u308b\u3068 `cmdx -l` \u3067\u30bf\u30b9\u30af\u306e\u4e00\u89a7\u3068\u305d\u306e\u8aac\u660e\u304c\u898b\u308c\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070\u6b21\u306f [cmdx](https://github.com/suzuki-shunsuke/cmdx) \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u306e\u5b9f\u884c\u7d50\u679c\u3067\u3059\u3002\\n\\n```\\n$ cmdx -l\\ninit, i - setup git hooks\\ncoverage, c - test a package (fzf is required)\\ntest, t - test\\nfmt - format the go code\\nvet, v - go vet\\nlint, l - lint the go code\\nrelease, r - release the new version\\ndurl - check dead links (durl is required)\\nci-local - run the Drone pipeline at localhost (drone-cli is required)\\n```\\n\\n\u3053\u308c\u306b\u3088\u308a\u65b0\u3057\u304f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u53c2\u753b\u3057\u305f\u4eba\u3082\u3069\u306e\u3088\u3046\u306a task \u304c\u3042\u308b\u306e\u304b\u76f4\u3050\u308f\u304b\u308a\u307e\u3059\u3002\\n\u4f8b\u3048\u3070 test \u3092\u5b9f\u884c\u3057\u305f\u3051\u308c\u3070 `cmdx t` \u3092\u5b9f\u884c\u3059\u308c\u3070\u3044\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\\n`cmdx help test` \u3068\u3059\u308c\u3070\u3053\u3053\u306e\u30bf\u30b9\u30af\u306e\u3088\u308a\u8a73\u7d30\u306a\u30d8\u30eb\u30d7\u304c\u898b\u308c\u307e\u3059\u3002\\n\\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b task \u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u3082\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u3061\u3083\u3093\u3068\u66f4\u65b0\u3055\u308c\u305a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u5b9f\u614b\u304c\u4e56\u96e2\u3059\u308b\u306a\u3093\u3066\u3053\u3068\u306f\u3088\u304f\u3042\u308a\u307e\u3059\u304c\u3001\\ncmdx \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30d8\u30eb\u30d7\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u3067\u4e56\u96e2\u3057\u306b\u304f\u304f\u306a\u308a\u307e\u3059(\u5b9f\u969b\u306b\u4f7f\u308f\u308c\u3066\u306a\u3044 task \u304c\u6b8b\u3063\u3066\u305f\u308a\u3001task \u306e description \u3084 usage \u304c\u9593\u9055\u3063\u3066\u305f\u3089\u99c4\u76ee\u3067\u3059\u304c)\u3002\\n\\n## \u306a\u305c cmdx \u304b\\n\\n\u81ea\u5206\u306f\u4eca\u307e\u3067 task runner \u3068\u3057\u3066\u57fa\u672c\u7684\u306b npm scripts \u3092\u4f7f\u3063\u3066\u304d\u3066\u3044\u3066\u3001\u30d6\u30ed\u30b0\u306b\u3082\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\\n\\n[JS\u4ee5\u5916\u3067\u306enpm\u306e\u6d3b\u7528](https://techblog.szksh.cloud/use-npm/)\\n\\n\u3057\u304b\u3057\u3001 npm scripts \u306b\u5bfe\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u4e0d\u6e80\u304c\u3042\u308a\u307e\u3057\u305f\u3002\\n\\n* security alert \u304c\u5b9a\u671f\u7684\u306b\u98db\u3093\u3067\u304d\u3066\u5bfe\u5fdc\u304c\u9762\u5012\u304f\u3055\u3044\\n  * \u3053\u308c\u306f husky \u3084 commitlint \u306a\u3069\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u304c\u539f\u56e0\u306a\u306e\u3067\u3042\u3063\u3066\u3001 npm scripts \u306e\u554f\u984c\u3067\u306f\u306a\u3044\u3067\u3059\u304c\\n* task \u306b\u5bfe\u3059\u308b\u30d8\u30eb\u30d7\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u306a\u3044\\n  * \u4eca\u307e\u3067\u306f README \u306b\u66f8\u3044\u3066\u305f\u304c\u3001\u672c\u6765\u306f help \u30b3\u30de\u30f3\u30c9\u3067\u81ea\u52d5\u751f\u6210\u30fb\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u3079\u304d\u3060\u3068\u601d\u3063\u3066\u3044\u308b\\n\\n\u4ed6\u306e\u30c4\u30fc\u30eb\u306b\u3088\u3063\u3066\u3053\u308c\u3089\u306e\u4e0d\u6e80\u306f\u89e3\u6d88\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u4ed6\u306e\u30c4\u30fc\u30eb\u306b\u3082\u305d\u308c\u305e\u308c\u5fae\u5999\u306b\u4e0d\u6e80\u304c\u3042\u308a\u3001\\n\u5b8c\u5168\u306b\u81ea\u5206\u306e\u30cb\u30fc\u30ba\u306b\u5408\u3046\u3082\u306e\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u4f5c\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n\u4e00\u4f8b\u3067\u3059\u304c\u3001 npm scripts \u306f\\n\\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb (package.json) \u3092\u63a2\u7d22\\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\\n\\n\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\\n\\n* \u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\\n  * \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\\n  * \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f9d\u5b58\u3057\u306a\u3044(\u9006\u306b\u8a00\u3046\u3068\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f9d\u5b58\u3057\u305f\u51e6\u7406\u3092\u5b9f\u884c\u3057\u306b\u304f\u3044\u3068\u3044\u3046\u9762\u3082\u3042\u308a\u307e\u3059\u304c)\\n\\n\u3068\u3044\u3046\u826f\u3055\u304c\u3042\u308a\u3001 \u3053\u308c\u304c\u610f\u5916\u3068\u4ed6\u306e\u30c4\u30fc\u30eb\u3067\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u306a\u304f(\u4f8b\u3048\u3070 Make \u3060\u3063\u305f\u3089 `-F` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067 Makefile \u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b)\u3001\u4e0d\u6e80\u3067\u3057\u305f\u3002\\n\\n\u307e\u305f\u3001 Make \u3084 Task \u3067\u306f task \u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u5b9a\u7fa9\u3057\u3001\u4e00\u56de\u306e\u30b3\u30de\u30f3\u30c9\u3067\u8907\u6570\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u304c\u3001\\ncmdx \u3067\u306f\u305d\u306e\u3088\u3046\u306a\u6a5f\u80fd\u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\n\u81ea\u5206\u304c\u666e\u6bb5\u305d\u306e\u3088\u3046\u306a\u6a5f\u80fd\u3092\u3042\u307e\u308a\u5fc5\u8981\u3068\u3057\u3066\u3044\u306a\u3044\u304b\u3089\u3067\u3059\u3002\\n\\ncmdx \u3067\u306f\u4e0a\u306e\u3088\u3046\u306a npm scripts \u306e\u4e0d\u6e80\u3092\u89e3\u6d88\u3059\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u6298\u89d2\u306a\u306e\u3067\u5e7e\u3064\u304b\u7d30\u304b\u306a\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n* \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3060\u3068\u9762\u5012\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u5f15\u6570\u3092\u30b5\u30dd\u30fc\u30c8\\n* \u30ea\u30c3\u30c1\u306a\u30d7\u30ed\u30f3\u30d7\u30c8\u306e\u30b5\u30dd\u30fc\u30c8\\n* \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\\n* etc\\n\\ncmdx \u304b\u3089 npm scripts \u306b\u4e57\u308a\u63db\u3048\u305f\u5834\u5408\u306e\u554f\u984c\u70b9\u3068\u3057\u3066\u306f husky \u3084 commitlint \u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u304c\u4f7f\u3048\u306a\u304f\u306a\u308b\u3053\u3068\u3067\u3059\u304c\u3001\\n\u5fc5\u9808\u306e\u30c4\u30fc\u30eb\u3067\u3082\u306a\u3044\u306e\u3067\u8a31\u5bb9\u3057\u3066\u3044\u307e\u3059\u3002"},{"id":"/risk-of-drone-extension","metadata":{"permalink":"/risk-of-drone-extension","source":"@site/blog/risk-of-drone-extension.md","title":"Drone Extension \u306e\u30ea\u30b9\u30af","description":"Drone v1 \u3067\u306f Extension \u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u5c0e\u5165\u3055\u308c\u307e\u3057\u305f\u3002","date":"2019-08-14T22:54:23.000Z","formattedDate":"August 14, 2019","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":3.67,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Drone Extension \u306e\u30ea\u30b9\u30af","date":"2019-08-14T22:54:23.000Z","tags":["drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"cmdx - task runner","permalink":"/cmdx"},"nextItem":{"title":"Drone v1 \u3067 gRPC \u304c\u4f7f\u308f\u308c\u306a\u304f\u306a\u3063\u305f","permalink":"/drone-v1-deprecate-grpc"}},"content":"Drone v1 \u3067\u306f Extension \u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u5c0e\u5165\u3055\u308c\u307e\u3057\u305f\u3002\\n\\n\u3053\u308c\u306f\u6587\u5b57\u901a\u308a Drone \u3092\u62e1\u5f35\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3001\u4ed5\u69d8\u306b\u5f93\u3063\u3066\u4f5c\u308c\u3070\u81ea\u7531\u306b Drone \u3092\u62e1\u5f35\u3067\u304d\u307e\u3059\u3002\\n\\nhttps://docs.drone.io/extensions/overview/\\n\\n\u5168\u3066\u3092\u672c\u4f53\u3067\u3084\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u62e1\u5f35\u3059\u308b\u4ed5\u7d44\u307f\u3092\u63d0\u4f9b\u3057\u3001\u3042\u3068\u306f\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306b\u59d4\u306d\u308b\u3068\u3044\u3046\u306e\u304c Drone \u306e\u4e00\u3064\u306e\u65b9\u91dd\u3068\u3082\u8a00\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nExtension \u306f\u975e\u5e38\u306b\u9762\u767d\u3044\u4ed5\u7d44\u307f\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001 Drone \u3092\u904b\u7528\u3059\u308b\u7acb\u5834\u304b\u3089\u3059\u308b\u3068\u4e2d\u3005\u982d\u304c\u75db\u3044\u4ed5\u7d44\u307f\u306a\u6c17\u304c\u3057\u3066\u3066\u3001\\n\u81ea\u5206\u306f\u5c0e\u5165\u306b\u5bfe\u3057\u614e\u91cd\u306a\u7acb\u5834\u3067\u3059\u3002\\n\u5358\u306a\u308b\u675e\u6182\u3067\u6e08\u3081\u3070\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u305d\u306e\u61f8\u5ff5\u306b\u3064\u3044\u3066\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u6839\u672c\u306f Drone Extension \u56fa\u6709\u306e\u554f\u984c\u3068\u8a00\u3046\u3088\u308a\u3001\u4e00\u822c\u7684\u306a\u62e1\u5f35\u6a5f\u69cb\u5168\u822c\u306b\u8a00\u3048\u308b\u3053\u3068\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\u305f\u3060\u3057\u3001 Drone Extension \u306f\u5168\u3066\u306e\u30d3\u30eb\u30c9\u306b\u5f71\u97ff\u3092\u53ca\u307c\u3059\u3001\\nCI/CD\u30b7\u30b9\u30c6\u30e0\u304c\u52d5\u304b\u306a\u304f\u306a\u308b\u3068\u30b5\u30fc\u30d3\u30b9\u306e\u30ea\u30ea\u30fc\u30b9\u306b\u5f71\u97ff\u3092\u53ca\u307c\u3057\u304b\u306d\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u304b\u3089\u3088\u308a\u30ea\u30b9\u30af\u306e\u9ad8\u3044\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n* \u672c\u4f53\u306e drone/drone \u3068\u6bd4\u3079\u3001\u958b\u767a\u306f\u6d3b\u767a\u3067\u306f\u306a\u304f\u3001\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e extension \u306f\u3044\u3064\u958b\u767a\u304c\u6b62\u307e\u3063\u3066\u3082\u304a\u304b\u3057\u304f\u306a\u3044\\n* \u672c\u4f53\u306e drone/drone \u3068\u6bd4\u3079\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3084\u30b5\u30dd\u30fc\u30c8\u4f53\u5236\u304c\u8ca7\u5f31\u3060\u3068\u601d\u308f\u308c\u308b(drone \u306b\u95a2\u3057\u3066\u306f https://discourse.drone.io \u3067\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e extension \u3067\u306f\u96e3\u3057\u3044)\\n* \u30e6\u30fc\u30b6\u30fc\u304b\u3089\u306e extension \u306b\u95a2\u3059\u308b\u8981\u671b\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3001\u7ba1\u7406\u8005\u306e\u8ca0\u62c5\u306b\u306a\u308b\\n* extension \u306e\u30af\u30a9\u30ea\u30c6\u30a3\u306f\u30de\u30c1\u30de\u30c1\u3067\u3042\u308a\u3001\u4f8b\u5916\u51e6\u7406\u304c\u7518\u304b\u3063\u305f\u308a\u3001\u3061\u3083\u3093\u3068\u30a8\u30e9\u30fc\u3092\u5410\u304b\u306a\u3044\u3082\u306e\u3082\u3042\u308b\u3060\u308d\u3046\\n* \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u304c\u96e3\u3057\u3044\u3068\u601d\u308f\u308c\u308b\\n* extension \u306e\u4ed5\u7d44\u307f\u4e0a\u3001extension \u3092\u5fc5\u8981\u3068\u3057\u306a\u3044\u30d3\u30eb\u30c9\u306b\u3082\u5f71\u97ff\u3092\u53ca\u307c\u3057\u3046\u308b\\n* \u4e00\u5ea6\u8ffd\u52a0\u3057\u3001\u4f9d\u5b58\u3057\u3060\u3059\u3068\u6d88\u3059\u306e\u304c\u96e3\u3057\u304f\u306a\u308b\\n* extension \u304c\u843d\u3061\u308b\u3068\u5168 build \u306b\u5f71\u97ff\u3059\u308b\u306e\u3067\u3001\u8010\u969c\u5bb3\u6027(\u5197\u9577\u5316)\u3001\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u304c\u5fc5\u8981\\n* etc\\n\\n\u52ff\u8ad6\u3001\u4e0a\u8a18\u306e\u61f8\u5ff5\u70b9\u306f Extension \u306b\u3088\u3063\u3066\u63d0\u4f9b\u3055\u308c\u308b\u6a5f\u80fd\u3068\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u3067\u3042\u308a\u3001\\nExtension \u306e\u5c0e\u5165\u65b9\u91dd\u306f Drone \u304c\u904b\u7528\u3055\u308c\u308b\u74b0\u5883\u306b\u3088\u3063\u3066\u5927\u304d\u304f\u4f9d\u5b58\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070\u5168\u54e1\u304c\u9854\u898b\u77e5\u308a\u306e\u3088\u3046\u306a\u5c0f\u3055\u306a\u7d44\u7e54\u3067\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u5c02\u7528\u306b Drone \u3092\u4f7f\u3063\u3066\u3044\u3066\u304b\u3064 Drone \u306e\u904b\u7528\u4f53\u5236(\u4eba\u54e1)\u306b\u5341\u5206\u4f59\u88d5\u304c\u3042\u308b\u306a\u3089\\n\u7a4d\u6975\u7684\u306b Extension \u3092\u5c0e\u5165\u3057\u3066\u3082\u554f\u984c\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n\u4e00\u65b9\u5927\u304d\u306a\u7d44\u7e54\u3067\u8272\u3005\u306a\u30b5\u30fc\u30d3\u30b9\u3067\u540c\u3058 Drone \u3092\u4f7f\u3063\u3066\u3044\u3066\u304b\u3064 Drone \u306e\u904b\u7528\u4f53\u5236\u304c\u4e0d\u5341\u5206(\u4eba\u624b\u4e0d\u8db3)\u306a\u3089\u3070\u3001 Extension \u306e\u5c0e\u5165\u306b\u306f\u614e\u91cd\u306b\u306a\u3089\u3056\u308b\u3092\u5f97\u306a\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"/drone-v1-deprecate-grpc","metadata":{"permalink":"/drone-v1-deprecate-grpc","source":"@site/blog/drone-v1-deprecate-grpc.md","title":"Drone v1 \u3067 gRPC \u304c\u4f7f\u308f\u308c\u306a\u304f\u306a\u3063\u305f","description":"v0.8 \u3067\u306f server - agent \u9593\u306e\u901a\u4fe1\u306b gPRC \u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u3001 v1 \u3067\u306f\u4f7f\u308f\u308c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002","date":"2019-08-14T22:39:18.000Z","formattedDate":"August 14, 2019","tags":[{"label":"drone","permalink":"/tags/drone"},{"label":"grpc","permalink":"/tags/grpc"}],"readingTime":1.71,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Drone v1 \u3067 gRPC \u304c\u4f7f\u308f\u308c\u306a\u304f\u306a\u3063\u305f","date":"2019-08-14T22:39:18.000Z","tags":["drone","grpc"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Drone Extension \u306e\u30ea\u30b9\u30af","permalink":"/risk-of-drone-extension"},"nextItem":{"title":"Golang \u3067\u306e\u6642\u523b\u306e\u6271\u3044\u65b9\u3092\u6574\u7406\u3059\u308b","permalink":"/golang-time"}},"content":"v0.8 \u3067\u306f server - agent \u9593\u306e\u901a\u4fe1\u306b gPRC \u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u3001 v1 \u3067\u306f\u4f7f\u308f\u308c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n## \u7406\u7531\\n\\n* https://discourse.drone.io/t/curious-about-decision-to-drop-grpc/3987\\n  * gRPC\u95a2\u9023\u306e\u30c8\u30e9\u30d6\u30eb\u306e\u554f\u3044\u5408\u308f\u305b\u304c\u591a\u3059\u304e\u3066\u30b5\u30dd\u30fc\u30c8\u3057\u304d\u308c\u306a\u3044\u306e\u3067\u6b62\u3081\u305f\\n\\n## v1 \u3067\u306e\u901a\u4fe1\u65b9\u6cd5\\n\\n* https://discourse.drone.io/t/drone-agents-keep-closing-connections-with-499-code/5197/2\\n  * agent \u304c\u30ed\u30f3\u30b0\u30dd\u30fc\u30ea\u30f3\u30b0\u3057\u3066\u3044\u308b\\n  * 30\u79d2\u5f8c\u3001\u306a\u3093\u306e\u30d3\u30eb\u30c9\u3082\u306a\u3051\u308c\u3070\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u5207\u3063\u3066\u3001\u518d\u63a5\u7d9a\u3059\u308b(\u5f35\u308a\u3063\u3071\u306a\u3057\u306b\u3057\u3066\u308b\u3068\u3001LB\u3084\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306b\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u5207\u3089\u308c\u308b\u305f\u3081)\\n\\n---\\n\\n\u81ea\u5206\u3082 v0.8 \u304b\u3089 Drone \u3092\u904b\u7528\u3057\u3066\u3044\u3066\u6700\u8fd1 v1 \u306b upgrade \u3057\u307e\u3057\u305f\u304c\u3001\\nv0.8 \u3067\u306f gRPC \u95a2\u9023\u306e\u30c8\u30e9\u30d6\u30eb\u304c\u983b\u767a\u3057\u3066\u3044\u307e\u3057\u305f\u3002\\nserver \u306e\u30ed\u30b0\u3067\u306f\u7d76\u3048\u305a gRPC \u95a2\u9023\u306e\u30a8\u30e9\u30fc\u3092\u5410\u3044\u3066\u3044\u307e\u3057\u305f\u3057\u3001\\nserver - agent \u9593\u306e TCP connection \u304c\u5207\u308c\u3063\u3071\u306a\u3057\u306b\u306a\u3063\u3066\u623b\u3089\u304f\u306a\u3063\u3066 agent \u6570\u304c\u3069\u3093\u3069\u3093\u6e1b\u3063\u3066\u3044\u3063\u305f\u308a\\n\u30d3\u30eb\u30c9\u304c pending \u306e\u307e\u307e\u306b\u306a\u3063\u305f\u308a\u3001\u8272\u3005\u3042\u308a\u307e\u3057\u305f\u3002\\n\\n\u95a2\u9023\u3059\u308b issue \u306f\u3042\u308a\u3001\u5e7e\u3064\u304b\u5bfe\u7b56\u3092\u6253\u3063\u3066\u307f\u305f\u308a\u3057\u307e\u3057\u305f\u304c\u3001\u7d50\u5c40\u89e3\u6c7a\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\\n* https://github.com/drone/drone/issues/2090\\n* https://github.com/drone/drone/issues/2246\\n* https://github.com/drone/drone/pull/2294\\n* https://www.reddit.com/r/droneci/comments/8opifu/drone_stops_working_after_some_little_time/e06d1gn/\\n\\n\u305d\u308c\u304c v1 \u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066 gRPC \u304c\u4f7f\u308f\u308c\u306a\u304f\u306a\u3063\u3066\u304b\u3089\u89e3\u6d88\u3057\u3001\u500b\u4eba\u7684\u306b\u306f\u3068\u3066\u3082\u52a9\u304b\u308a\u307e\u3057\u305f\u3002\\n\u7ba1\u7406\u8005\u7684\u306b\u306f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u4e00\u756a\u5b09\u3057\u3044\u70b9\u3067\u3059\u306d\u3002"},{"id":"/golang-time","metadata":{"permalink":"/golang-time","source":"@site/blog/golang-time.md","title":"Golang \u3067\u306e\u6642\u523b\u306e\u6271\u3044\u65b9\u3092\u6574\u7406\u3059\u308b","description":"\u4eca\u66f4\u306a\u304c\u3089 Golang \u3067\u306e\u6642\u523b\u306e\u6271\u3044\u65b9\u306b\u3064\u3044\u3066\u6539\u3081\u3066\u6574\u7406\u3057\u3066\u307f\u307e\u3057\u305f\u3002","date":"2019-08-14T11:28:56.000Z","formattedDate":"August 14, 2019","tags":[{"label":"golang","permalink":"/tags/golang"}],"readingTime":6.665,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Golang \u3067\u306e\u6642\u523b\u306e\u6271\u3044\u65b9\u3092\u6574\u7406\u3059\u308b","date":"2019-08-14T11:28:56.000Z","tags":["golang"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Drone v1 \u3067 gRPC \u304c\u4f7f\u308f\u308c\u306a\u304f\u306a\u3063\u305f","permalink":"/drone-v1-deprecate-grpc"},"nextItem":{"title":"Drone v1 \u3067\u306f Jsonnet \u304c extension \u306a\u3057\u3067\u4f7f\u3048\u308b","permalink":"/drone-jsonnet"}},"content":"\u4eca\u66f4\u306a\u304c\u3089 Golang \u3067\u306e\u6642\u523b\u306e\u6271\u3044\u65b9\u306b\u3064\u3044\u3066\u6539\u3081\u3066\u6574\u7406\u3057\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n## \u307e\u3068\u3081\\n\\n* time.Local \u306f\u660e\u793a\u7684\u306b\u8a2d\u5b9a\u3059\u308b(\u57fa\u672cUTC)\\n* DB \u306a\u3069\u306b\u306f \u57fa\u672cUTC \u3067\u6c38\u7d9a\u5316\u3059\u308b\\n* \u51fa\u529b\u6642\u306b\u5fc5\u8981\u306b\u306a\u3063\u305f\u3089\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u5909\u66f4\u3059\u308b\\n  * location \u306f\u51fa\u529b\u6642\u306b\u554f\u984c\u306b\u306a\u308b\u306e\u3067\u51fa\u529b\u6642\u306b location \u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3059\u308b\\n  * \u9006\u306b\u8a00\u3046\u3068\u51fa\u529b\u6642\u4ee5\u5916\u306f\u554f\u984c\u306b\u306a\u3089\u306a\u3044\u306e\u3067\u7121\u7406\u306b location \u3092 UTC \u306b\u3057\u306a\u304f\u3066\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u306a\u3044\\n  * \u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3(ex. ORM) \u306b time.Time \u3092\u6e21\u3059\u5834\u5408\u306f location \u306b\u6ce8\u610f\u304c\u5fc5\u8981\\n* \u6587\u5b57\u5217\u3068\u3057\u3066\u6642\u523b\u306e\u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u308b\u5834\u5408\u306f location \u3092\u660e\u793a\u7684\u306b\u30bb\u30c3\u30c8\u3059\u308b\\n* \u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u304c time.Local \u306b\u4f9d\u5b58\u3059\u308b\u5834\u5408\u3001 time.Local \u3092\u660e\u793a\u7684\u306b UTC \u306b\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\\n* \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u5229\u7528\u3059\u308b location \u304c\u5206\u304b\u3063\u3066\u3044\u308b\u5834\u5408\u3001location \u3092\u53d6\u5f97\u3059\u308b\u30d8\u30eb\u30d1\u30fc\u95a2\u6570\u3092\u5b9a\u7fa9\u3059\u308b\\n* `time.LoadLocation` \u306f\u74b0\u5883\u4f9d\u5b58\u306a\u306e\u3067\u4e88\u3081 location \u304c\u5206\u304b\u3063\u3066\u3044\u308b\u306a\u3089\u4f7f\u308f\u306a\u3044\u307b\u3046\u304c\u3088\u3044\\n* \u6587\u5b57\u5217\u3092 time.Time \u306b\u5909\u63db\u3059\u308b\u5834\u5408\u3001`time.ParseInLocation` \u3067 Location \u3092\u6307\u5b9a\u3057\u3066 time.Time \u306b\u5909\u63db\u5f8c\u3001time.Time.UTC() \u3067 UTC \u306b\u5909\u63db\u3059\u308b\\n* time.Time \u3092\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\u5834\u5408\u3001time.In \u3067 location \u3092\u5909\u63db\u5f8c\u3001time.Time.Format \u3067\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\\n\\n## \u30b0\u30ed\u30fc\u30d0\u30eb\u306a location\\n\\nhttps://golang.org/pkg/time/#Location\\n\\n> Local represents the system\'s local time zone.\\n\\n## location \u3092\u8a2d\u5b9a\u3059\u308b\\n\\nhttps://crieit.net/posts/Go-time-LoadLocation \u306b\u66f8\u3044\u3066\u3042\u308b\u3068\u304a\u308a\u3001\\n`time.LoadLocation` \u3092\u4e0b\u624b\u306b\u547c\u3073\u51fa\u3059\u3068\u74b0\u5883\u306b\u3088\u3063\u3066\u306f `unknown time zone` \u30a8\u30e9\u30fc\u304c\u8d77\u3053\u308b\u305f\u3081\\n\u6b21\u306e\u3088\u3046\u306b time.FixedZone \u3067 Location \u3092\u751f\u6210\u3057\u307e\u3059\u3002\\n\\n```go\\njp := time.FixedZone(\\"Asia/Tokyo\\", 9*60*60)\\n```\\n\\nFixedZone \u3068\u3044\u3046\u95a2\u6570\u540d\u304c\u7d1b\u3089\u308f\u3057\u3044\u6c17\u3082\u3057\u307e\u3059\u304c\u3001\u65b0\u3057\u3044 Location \u3092\u751f\u6210\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u526f\u4f5c\u7528\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n\u3061\u306a\u307f\u306b time.FixedZone \u306b\u6e21\u3059\u6587\u5b57\u5217\u306f \\"foo\\" \u307f\u305f\u3044\u306a\u9069\u5f53\u306a\u6587\u5b57\u5217\u3067\u3082\u52d5\u304f\u3088\u3046\u3067\u3059\u3002\\n\\nhttps://golang.org/pkg/time/#FixedZone\\n\\nhttps://github.com/golang/go/blob/9e277f7d554455e16ba3762541c53e9bfc1d8188/src/time/zoneinfo.go#L263-L308\\n\\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u5229\u7528\u3059\u308b location \u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306b location \u3092\u8fd4\u3059\u30d8\u30eb\u30d1\u30fc\u95a2\u6570\u3092\u7528\u610f\u3059\u308b\u3068\u826f\u3055\u305d\u3046\u3067\u3059\u3002\\n\\n```go\\npackage location\\n\\nimport (\\n\\t\\"time\\"\\n)\\n\\nvar (\\n\\tjp *time.Location\\n)\\n\\nfunc init() {\\n\\tjp = time.FixedZone(\\"Asia/Tokyo\\", 9*60*60)\\n}\\n\\nfunc JP() *time.Location {\\n\\treturn jp\\n}\\n```\\n\\n## \u53b3\u5bc6\u306b UTC \u306a Location \u3092\u53d6\u5f97\u3059\u308b\\n\\n\u53b3\u5bc6\u306b\u8a00\u3046\u3068\u3001`time.UTC` \u306f\u5909\u66f4\u53ef\u80fd\u306a\u306e\u3067 UTC \u3060\u3068\u306f\u9650\u308a\u307e\u305b\u3093\u3002\\n\u305d\u306e\u305f\u3081\u3001\u672c\u6765 `time.UTC` \u306f\u30b2\u30c3\u30bf\u30fc\u95a2\u6570\u3067\u3042\u308b\u3079\u304d\u3060\u3063\u305f\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u3044\u3046\u6c17\u3082\u3057\u307e\u3059\u3002\\n\\n\u53b3\u5bc6\u306b UTC \u306a Location \u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u30d8\u30eb\u30d1\u30fc\u95a2\u6570\u3092\u66f8\u304f\u3068\u826f\u3055\u305d\u3046\u3067\u3059\u3002\\n\\n```go\\npackage location\\n\\nimport (\\n\\t\\"time\\"\\n)\\n\\nvar (\\n\\tutc *time.Location\\n)\\n\\nfunc init() {\\n\\tutc = time.FixedZone(\\"UTC\\", 0)\\n}\\n\\nfunc UTC() *time.Location {\\n\\treturn utc\\n}\\n```\\n\\n## \u52d5\u4f5c\u74b0\u5883\u306b\u4f9d\u5b58\u3057\u306a\u3044\u30b3\u30fc\u30c9\u306b\u3059\u308b\u305f\u3081\u306b\\n\\n\u52d5\u4f5c\u74b0\u5883\u306b\u3088\u3063\u3066 `time.Local` \u306e\u5024\u304c\u9055\u3046\u3053\u3068\u3067\u7d50\u679c\u304c\u5909\u308f\u3063\u3066\u3057\u307e\u3046\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\\n\u305d\u308c\u3092\u9632\u3050\u305f\u3081\u306b\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u6700\u521d\u306b `time.Local` \u3092 UTC \u306b\u3059\u308b\u3068\u3044\u3046\u624b\u3082\u3042\u308a\u305d\u3046\u3067\u3059\u3002\\n\\n```go\\ntime.Local = location.UTC()\\n```\\n\\n\u305f\u3060\u3057\u3001\u305d\u308c\u3067\u3082\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3067\u3042\u308b\u4ee5\u4e0a\u3001\u884c\u5100\u306e\u60aa\u3044\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3088\u3063\u3066\u5909\u66f4\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3057\u3001\\n\u5fc5\u8981\u306a\u7b87\u6240\u3067 location \u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u3066\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306b\u4f9d\u5b58\u3057\u306a\u3044\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3053\u3068\u3092\u5fc3\u304c\u3051\u305f\u307b\u3046\u304c\u826f\u3044\u6c17\u3082\u3057\u307e\u3059\u3002\\n\\n## \u6587\u5b57\u5217\u3092 time.Time \u306b\u5909\u63db\u3059\u308b\\n\\n* https://golang.org/pkg/time/#Parse\\n* https://golang.org/pkg/time/#ParseInLocation\\n\\n> ParseInLocation is like Parse but differs in two important ways.\\n> First, in the absence of time zone information, Parse interprets a time as UTC;\\n> ParseInLocation interprets the time as in the given location.\\n> Second, when given a zone offset or abbreviation, Parse tries to match it against the Local location;\\n> ParseInLocation uses the given location.\\n\\nParseInLocation \u3068 Parse \u306e\u9055\u3044\\n\\n* \u6587\u5b57\u5217\u306b location \u306e\u60c5\u5831\u304c\u306a\u3044\u5834\u5408\u3001 Parse \u306f UTC \u3068\u3057\u3066\u6271\u3046\\n* zone offset \u304c\u6307\u5b9a\u3055\u308c\u305f\u5834\u5408\u3001 Parse \u306f Local location \u304b\u3089\u306e offset \u3068\u3057\u3066\u6271\u3046\\n  * ParseInLocation \u3067\u660e\u793a\u7684\u306b Location \u3092\u6307\u5b9a\u3057\u305f\u307b\u3046\u304c\u826f\u3055\u305d\u3046\\n\\n\u4e88\u3081 location \u304c\u308f\u304b\u3063\u3066\u3044\u308b\u5834\u5408 time.ParseInLocation \u3067 location \u3092\u6307\u5b9a\u3057\u3066 time.Time \u306b\u5909\u63db\u3057\u305f\u5f8c time.Time.In \u3067 UTC \u306b\u3059\u308b\u306e\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\\n\\n```go\\nt, err := time.ParseInLocation(\\"2006-01-02T15:04:05\\", \\"2019-08-13T21:30:00\\", jp)\\nif err != nil {\\n\\treturn err\\n}\\nt = t.UTC()\\n```\\n\\n## time.Time \u306e Location \u3092\u5909\u66f4\u3059\u308b\\n\\nhttps://golang.org/pkg/time/#Time.In\\n\\n> In returns a copy of t representing the same time instant,\\n> but with the copy\'s location information set to loc for display purposes.\\n\\ntime.Time.In \u306f time.Time \u306e Location \u3060\u3051\u5909\u66f4\u3057\u305f\u30b3\u30d4\u30fc\u3092\u8fd4\u3057\u307e\u3059\u3002\\n\\n```go\\npackage main\\n\\nimport (\\n\\t\\"fmt\\"\\n\\t\\"time\\"\\n)\\n\\nfunc main() {\\n\\ttime.Local = location.UTC()\\n\\tt := time.Now()\\n\\tfmt.Println(t) // 2019-08-14 12:08:44.150725 +0000 UTC m=+0.000212031\\n\\tt2 := t.In(location.JP())\\n\\tfmt.Println(t2) // 2019-08-14 21:08:44.150725 +0900 Asia/Tokyo\\n}\\n```\\n\\n## time.Time \u3092\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\\n\\nhttps://golang.org/pkg/time/#Time.Format\\n\\ntime.Time.In \u3067 location \u3092\u5909\u66f4\u3057\u305f\u5f8c time.Time.Format \u3067\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\u306e\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\\n\\n## time.Now \u306e location\\n\\nLocation \u306f `time.Local` \u306b\u306a\u308a\u307e\u3059\u3002\\n\\nhttps://golang.org/pkg/time/#Now\\n\\n## \u4ed6\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306e location \u306e\u6271\u3044\\n\\n### log\\n\\nlog \u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u51fa\u529b\u3055\u308c\u308b\u6642\u523b\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068 location \u306f log.SetFlags \u306b\u3088\u3063\u3066\u3042\u308b\u7a0b\u5ea6\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\\n\\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306f \u65e5\u6642\u3092 time.Local \u3067\u51fa\u529b\u3057\u307e\u3059\u3002\\nlog.LUTC \u3092\u30bb\u30c3\u30c8\u3059\u308b\u3053\u3068\u3067 UTC \u306b\u306a\u308a\u307e\u3059\u3002\\n\\n* https://golang.org/pkg/log/#SetFlags\\n* https://golang.org/pkg/log/#pkg-constants\\n\\n```go\\nlog.SetFlags(log.Flags() | log.LUTC)\\n```\\n\\n### logrus\\n\\n[logrus](https://github.com/Sirupsen/logrus) \u306e\u30ed\u30b0\u306e\u6642\u523b\u306e location \u3082 time.Local \u306a\u3088\u3046\u3067\u3059\u3002\\n\\n### robfig/cron \\n\\nhttps://github.com/robfig/cron\\n\\n> All interpretation and scheduling is done in the machine\'s local time zone (as provided by the Go time package (http://www.golang.org/pkg/time).\\n\\ntime.Local \u306a\u3088\u3046\u3067\u3059\u3002\\n\\n### go-sql-driver/misql\\n\\n* https://github.com/go-sql-driver/mysql#timetime-support\\n* https://www.sambaiz.net/article/189/\\n\\n### gorm\\n\\nhttps://github.com/jinzhu/gorm/wiki/How-To-Do-Time"},{"id":"/drone-jsonnet","metadata":{"permalink":"/drone-jsonnet","source":"@site/blog/drone-jsonnet.md","title":"Drone v1 \u3067\u306f Jsonnet \u304c extension \u306a\u3057\u3067\u4f7f\u3048\u308b","description":"Drone \u3067\u306f v1 \u304b\u3089\u5197\u9577\u306a YAML \u3092 DRY \u306b\u3059\u308b\u4e00\u3064\u306e\u624b\u3068\u3057\u3066\u3001 Jsonnet \u306e\u5229\u7528\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002","date":"2019-08-02T14:02:57.000Z","formattedDate":"August 2, 2019","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":1.7,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Drone v1 \u3067\u306f Jsonnet \u304c extension \u306a\u3057\u3067\u4f7f\u3048\u308b","date":"2019-08-02T14:02:57.000Z","tags":["drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Golang \u3067\u306e\u6642\u523b\u306e\u6271\u3044\u65b9\u3092\u6574\u7406\u3059\u308b","permalink":"/golang-time"},"nextItem":{"title":"The Top 10 Most Common Mistakes I\u2019ve Seen in Go Projects \u3092\u8aad\u3093\u3067\u307f\u3066","permalink":"/the-top-10-most-common-mistakes-ive-seen-in-go-projects"}},"content":"Drone \u3067\u306f v1 \u304b\u3089\u5197\u9577\u306a YAML \u3092 DRY \u306b\u3059\u308b\u4e00\u3064\u306e\u624b\u3068\u3057\u3066\u3001 Jsonnet \u306e\u5229\u7528\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u904e\u53bb\u306e\u30d6\u30ed\u30b0\u3067\u3082\u89e6\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://techblog.szksh.cloud/drone-jsonnet-generator/\\n\\n\u3057\u304b\u3057\u3001 v1 \u306e rc \u306e\u6642\u70b9\u3067\u306f Jsonnet \u306e\u6d3b\u7528\u306b\u306f Jsonnet Extension \u304c\u5fc5\u8981\u3067\u3057\u305f\u3002\\n\\nhttps://engineering.linecorp.com/ja/blog/go-oss-ci-cd-platform-drone-1-0-0-rc-1/#title7-1\\n\\n\u3057\u304b\u3057\u3001 v1 \u306e\u6b63\u5f0f\u7248\u3067\u306f Jsonnet Extension \u304c\u306a\u304f\u3066\u3082 Jsonnet \u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u307e\u305a Drone \u306e\u7ba1\u7406\u8005\u5074\u3067 Drone server \u306b\u74b0\u5883\u5909\u6570 `DRONE_JSONNET_ENABLED=true` \u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u305d\u3046\u3057\u305f\u3089\u3001\u30e6\u30fc\u30b6\u30fc\u5074\u306f\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3067 jsonnet \u304c\u4f7f\u3048\u307e\u3059\u3002\\n\\n1. .drone.yml \u306e\u4ee3\u308f\u308a\u306b .drone.jsonnet \u3092\u30b3\u30df\u30c3\u30c8\u3059\u308b (.drone.yml \u306f\u4e0d\u8981)\\n2. \u5404\u30ea\u30dd\u30b8\u30c8\u30ea\u306e settings \u306e Main > Configuration \u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u5909\u66f4\u3059\u308b\\n\\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u30d3\u30eb\u30c9\u5b9f\u884c\u6642\u306b\u81ea\u52d5\u3067 Jsonnet \u304c YAML \u306b\u5909\u63db\u3055\u308c\u51e6\u7406\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002\\n\\n## \u3044\u3064\u304b\u3089 Jsonnet Extension \u306f\u4e0d\u8981\u306b\u306a\u3063\u305f\u306e\u304b\\n\\n* https://github.com/drone/drone/compare/v1.0.0-rc.6...v1.0.0\\n* https://github.com/drone/drone/commit/5013cfa993fa455fc56f10e45b9f36cf1d6dff57\\n\\nv1 \u306e rc \u3067\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\u6b63\u5f0f\u7248\u3092\u30ea\u30ea\u30fc\u30b9\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067 Jsonnet Extension \u304c\u4e0d\u8981\u306b\u306a\u3063\u3066\u3044\u305f\u3088\u3046\u3067\u3059\u3002\\n\\n## \u6ce8\u610f\u70b9\\n\\n* SaaS https://cloud.drone.io \u306f 2019-08-02 \u6642\u70b9\u3067\u672a\u5bfe\u5fdc\\n* Jsonnet \u306f pipeline \u304c 1 \u3064\u3067\u3082 `[]` \u3067\u56f2\u3044\u3001\u914d\u5217\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\\n* Jsonnet \u306e Imports \u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\\n\\n## \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\\n\\n* https://discourse.drone.io/t/how-to-reduce-yaml-boilerplate/3704"},{"id":"/the-top-10-most-common-mistakes-ive-seen-in-go-projects","metadata":{"permalink":"/the-top-10-most-common-mistakes-ive-seen-in-go-projects","source":"@site/blog/the-top-10-most-common-mistakes-ive-seen-in-go-projects.md","title":"The Top 10 Most Common Mistakes I\u2019ve Seen in Go Projects \u3092\u8aad\u3093\u3067\u307f\u3066","description":"The Top 10 Most Common Mistakes I\u2019ve Seen in Go Projects \u3068\u3044\u3046\u8a18\u4e8b\u3092\u8aad\u3093\u3067\u9762\u767d\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u308a\u307e\u3059\u3002","date":"2019-07-21T09:13:53.000Z","formattedDate":"July 21, 2019","tags":[{"label":"go","permalink":"/tags/go"}],"readingTime":5.06,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"The Top 10 Most Common Mistakes I\u2019ve Seen in Go Projects \u3092\u8aad\u3093\u3067\u307f\u3066","date":"2019-07-21T09:13:53.000Z","tags":["go"],"archives":["2019/07"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Drone v1 \u3067\u306f Jsonnet \u304c extension \u306a\u3057\u3067\u4f7f\u3048\u308b","permalink":"/drone-jsonnet"},"nextItem":{"title":"Flute - Golang HTTP client testing framework","permalink":"/fagott"}},"content":"[The Top 10 Most Common Mistakes I\u2019ve Seen in Go Projects](https://itnext.io/the-top-10-most-common-mistakes-ive-seen-in-go-projects-4b79d4f6cd65) \u3068\u3044\u3046\u8a18\u4e8b\u3092\u8aad\u3093\u3067\u9762\u767d\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u308a\u307e\u3059\u3002\\n\u7ffb\u8a33\u3067\u306f\u306a\u3044\u3067\u3059\u3002\u30e1\u30e2\u306a\u306e\u3067\u3001\u539f\u6587\u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\\n\\n1. Unknown Enum Value: Unknown \u3067\u3042\u308b\u3053\u3068\u3092\u8868\u3059 enum \u306e\u5024\u306f 0 \u306b\u3057\u3088\u3046\u3002\u5024\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306b Unknown \u3068\u3057\u3066\u6271\u3048\u308b\u304b\u3089\\n2. Benchmarking: \u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3092\u53d6\u308b\u306e\u306f\u96e3\u3057\u3044\u3002\u30b3\u30f3\u30d1\u30a4\u30e9\u306e\u6700\u9069\u5316\u306b\u3088\u3063\u3066\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u306e\u7d50\u679c\u304c\u4e0d\u9069\u5207\u306b\u306a\u308b\u5834\u5408\u304c\u3042\u308b\\n3. Pointers! Pointers Everywhere!: \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u89b3\u70b9\u304b\u3089\u57fa\u672c\u7684\u306b\u306f\u30dd\u30a4\u30f3\u30bf\u3092\u4f7f\u3046\u3079\u304d\u3067\u306f\u306a\u3044\u3002\u5909\u6570\u3092\u5171\u6709\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306e\u307f\u3001\u30dd\u30a4\u30f3\u30bf\u3092\u4f7f\u3046\\n4. Breaking a for/switch or a for/select: for, switch \u304c\u5165\u308c\u5b50\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3001switch \u306e\u4e2d\u3067 break \u3057\u3066\u3082 for \u304b\u3089\u629c\u3051\u3089\u308c\u306a\u3044\u3002\u629c\u3051\u305f\u3051\u308c\u3070 labeled break \u3092\u4f7f\u3046\\n5. Errors Management\\n6. Slice Initialization\\n7. Context Management\\n8. Not Using the -race Option: `go test` \u30b3\u30de\u30f3\u30c9\u3067\u306f `-race` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3088\u3046\\n9. Using a Filename as an Input: \u5f15\u6570\u3068\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6e21\u3059\u306e\u3067\u306f\u306a\u304f\u3001 io.Reader \u3084 io.Writer \u3092\u6e21\u305d\u3046\\n10. Goroutines and Loop Variables\\n\\n## Pointers! Pointers Everywhere!\\n\\n\u5909\u6570\u306f\u30d2\u30fc\u30d7\u304b\u30b9\u30bf\u30c3\u30af\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u3002\\n\\n* \u30b9\u30bf\u30c3\u30af: \u95a2\u6570\u5185\u306e\u5909\u6570\u306f\u3001\u95a2\u6570\u304c\u8fd4\u3055\u308c\u308b\u3068\u3001\u30b9\u30bf\u30c3\u30af\u304b\u3089\u30dd\u30c3\u30d7\u3055\u308c\u308b\\n* \u30d2\u30fc\u30d7: \u5171\u6709\u5909\u6570\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\\n\\n\u95a2\u6570\u3067\u751f\u6210\u3057\u305f\u69cb\u9020\u4f53\u3092\u8fd4\u3059\u3068\u3001\u30b9\u30bf\u30c3\u30af\u3067\u7ba1\u7406\u3055\u308c\u3001\u8fd4\u3055\u308c\u305f\u6642\u70b9\u3067\u30dd\u30c3\u30d7\u3055\u308c\u308b\u3002\\n\u95a2\u6570\u5185\u3067\u751f\u6210\u3057\u305f\u30dd\u30a4\u30f3\u30bf\u3092\u8fd4\u3059\u3068\u3001\u305d\u308c\u306f Heap \u3067\u7ba1\u7406\u3055\u308c\u308b\u3002\\n\u30b9\u30bf\u30c3\u30af\u3067\u7ba1\u7406\u3059\u308b\u3068\u3001\u95a2\u6570\u304c\u8fd4\u3055\u308c\u305f\u6642\u70b9\u3067\u30dd\u30c3\u30d7\u3055\u308c\u3066\u3057\u307e\u3044\u3001\u95a2\u6570\u306e\u5916\u3067\u30dd\u30a4\u30f3\u30bf\u304c\u6307\u3059\u5024\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u308b\u305f\u3081\u3002\\n\\n```go\\nfunc getFooValue() foo {\\n\\tvar result foo\\n\\t// Do something\\n\\treturn result\\n}\\n```\\n\\n```go\\nfunc getFooPointer() *foo {\\n\\tvar result foo\\n\\t// Do something\\n\\treturn &result\\n}\\n```\\n\\n\u30b9\u30bf\u30c3\u30af\u306e\u307b\u3046\u304c\u52b9\u7387\u304c\u826f\u3044\u7406\u7531\\n\\n* \u30ac\u30d9\u30fc\u30b8\u30b3\u30ec\u30af\u30bf\u304c\u4e0d\u8981\\n  * \u95a2\u6570\u3092\u629c\u3051\u305f\u6642\u70b9\u3067\u30b9\u30bf\u30c3\u30af\u304b\u3089\u30dd\u30c3\u30d7\u3055\u308c\u308b\\n  * \u672a\u4f7f\u7528\u306e\u5909\u6570\u3092\u56de\u53ce\u3059\u308b\u8907\u96d1\u306a\u51e6\u7406\u304c\u4e0d\u8981\\n* \u30b9\u30bf\u30c3\u30af\u306e\u5909\u6570\u306f\u4e00\u3064\u306e goroutine \u306b\u5c5e\u3059\u308b\u305f\u3081\u3001\u5171\u6709\u306e\u305f\u3081\u306e\u540c\u671f\u304c\u4e0d\u8981\u3060\u304b\u3089\\n\\n\u3088\u3063\u3066\u57fa\u672c\u7684\u306b\u306f\u30dd\u30a4\u30f3\u30bf\u3092\u4f7f\u3046\u3079\u304d\u3067\u306f\u306a\u3044\u3002\u5909\u6570\u3092\u5171\u6709\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306e\u307f\u3001\u30dd\u30a4\u30f3\u30bf\u3092\u4f7f\u3046\u3002\\n\\n## Error Management\\n\\n* \u30a8\u30e9\u30fc\u306f\u4e00\u56de\u3060\u3051\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3055\u308c\u308b\u3079\u304d\u3002\u30a8\u30e9\u30fc\u306f\u30ed\u30ae\u30f3\u30b0\u3055\u308c\u308b\u304b\u3001\u30d7\u30ed\u30d1\u30b2\u30fc\u30c8\u3055\u308c\u308b\u3079\u304d(\u30ed\u30ae\u30f3\u30b0\u3057\u3064\u3064\u30d7\u30ed\u30d1\u30b2\u30fc\u30c8\u306f\u3060\u3081)\\n* pkg/errors \u3092\u4f7f\u3046\u3068\u6839\u672c\u7684\u306a\u30a8\u30e9\u30fc\u306e\u578b\u3092\u898b\u3066\u6761\u4ef6\u5206\u5c90\u3067\u304d\u308b\\n  * \u81ea\u5206\u304c\u4f5c\u3063\u3066\u308b [go-errlog](https://github.com/suzuki-shunsuke/go-errlog) \u306e v0.9.1 \u3060\u3068\u305d\u308c\u306f\u51fa\u6765\u306a\u3044\u3002\u6539\u5584\u3059\u3079\u304d\u304b\\n\\n```go\\nswitch errors.Cause(err).(type) {\\ndefault:\\n\\tlog.WithError(err).Errorf(\\"unable to server HTTP POST request for customer %s\\", customer.ID)\\n\\treturn Status{ok: false}\\ncase *db.DBError:\\n\\treturn retry(customer)\\n}\\n```\\n\\n## Slice Initialization\\n\\nhttps://tour.golang.org/moretypes/11\\n\\n* slice \u306b\u306f length \u3068 capacity \u304c\u3042\u308b\\n* length \u306f slice \u304c\u4fdd\u6301\u3059\u308b\u8981\u7d20\u306e\u6570\\n* capacity \u306f slice \u306e\u88cf\u306b\u3042\u308b\u914d\u5217\u306e\u8981\u7d20\u6570\u3092 slice \u306e\u6700\u521d\u306e\u8981\u7d20\u304b\u3089\u6570\u3048\u305f\u3082\u306e\\n\\nhttps://golang.org/ref/spec#Making_slices_maps_and_channels\\n\\nslice \u306e\u5834\u5408\\n\\n```go\\nmake(T, n) // length, capacity \u5171\u306b n\\nmake(T, n, m) // length \u306f n, capacity \u306f m\\n```\\n\\nhttps://play.golang.org/p/R1CF1e1K3L6\\n\\n```go\\na := make([]int, 0, 10)\\nfmt.Println(len(a), cap(a)) // 0, 10\\na = append(a, 1)\\nfmt.Println(len(a), cap(a)) // 1, 10\\n```\\n\\n`append` \u306f\u30b3\u30b9\u30c8\u304c\u9ad8\u3044\u304b\u3089\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u6307\u5b9a\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3068\u3044\u3046\u304c\u3001\\n`make` \u3067\u30b9\u30e9\u30a4\u30b9\u3092\u751f\u6210\u3057\u3066\u3044\u308c\u3070\u3001`append` \u3057\u3066\u3082\u305d\u3053\u307e\u3067\u30b3\u30b9\u30c8\u306f\u9ad8\u304f\u306a\u3044\u3002\\n\u82e5\u5e72\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u6307\u5b9a\u3057\u305f\u307b\u3046\u304c\u52b9\u7387\u304c\u826f\u3044\u304c\u3001\u4e00\u8cab\u6027\u3068\u3044\u3046\u89b3\u70b9\u3067\u306f `append` \u3092\u4f7f\u3063\u305f\u307b\u3046\u304c\u3088\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\\n\\n## Goroutines and Loop Variables\\n\\n```go\\nints := []int{1, 2, 3}\\nfor _, i := range ints {\\n\\tgo func() {\\n\\t\\tfmt.Printf(\\"%v\\\\n\\", i)\\n\\t}()\\n}\\n```\\n\\n\u3053\u308c\u3060\u3068\u5168\u3066\u306e goroutine \u3067\u540c\u3058 i \u3092\u5171\u6709\u3057\u3066\u3057\u307e\u3046\u3002\u95a2\u6570\u306e\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\u304b\u3001for \u30eb\u30fc\u30d7\u5185\u306e\u5909\u6570\u3068\u3057\u3066\u5b9a\u7fa9\u3059\u308b\u3002\\n\\n```go\\nints := []int{1, 2, 3}\\nfor _, i := range ints {\\n\\tgo func(i int) {\\n\\t\\tfmt.Printf(\\"%v\\\\n\\", i)\\n\\t}(i)\\n}\\n```\\n\\n```go\\nints := []int{1, 2, 3}\\nfor _, i := range ints {\\n\\ti := i // \u521d\u898b\u3060\u3068\u5947\u5999\u306b\u898b\u3048\u308b\u304c\u3001\u6b63\u3057\u3044\u3002\\n\\tgo func() {\\n\\t\\tfmt.Printf(\\"%v\\\\n\\", i)\\n\\t}()\\n}\\n```"},{"id":"/fagott","metadata":{"permalink":"/fagott","source":"@site/blog/fagott.md","title":"Flute - Golang HTTP client testing framework","description":"2019-07-17 \u8ffd\u8a18","date":"2019-07-06T23:20:00.000Z","formattedDate":"July 6, 2019","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"golang","permalink":"/tags/golang"},{"label":"flute","permalink":"/tags/flute"}],"readingTime":3.875,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Flute - Golang HTTP client testing framework","date":"2019-07-06T23:20:00.000Z","tags":["oss","golang","flute"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"The Top 10 Most Common Mistakes I\u2019ve Seen in Go Projects \u3092\u8aad\u3093\u3067\u307f\u3066","permalink":"/the-top-10-most-common-mistakes-ive-seen-in-go-projects"},"nextItem":{"title":"Drone \u3067\u300c\u30d3\u30eb\u30c9\u5b9f\u884c\u6642\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u300d\u3063\u307d\u3044\u3053\u3068\u3092\u3059\u308b","permalink":"/how-to-imitate-jenkins-parameterized-build-at-drone"}},"content":"## 2019-07-17 \u8ffd\u8a18\\n\\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u304c\u5909\u308f\u308a\u307e\u3057\u305f\\n\\nhttps://github.com/suzuki-shunsuke/flute/issues/20\\n\\n---\\n\\nGo \u306e HTTP client \u306e\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f5c\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/flute\\n\\n\u57f7\u7b46\u6642\u70b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f v0.6.0 \u3067\u3059\u3002\\n\\n* \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30c6\u30b9\u30c8\\n* HTTP \u30b5\u30fc\u30d0\u306e\u30e2\u30c3\u30ad\u30f3\u30b0\\n\\n\u3092\u76ee\u7684\u3068\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u6bd4\u8f03\u7684\u5b9f\u8df5\u7684\u306a\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\u7c21\u5358\u306a API client \u3068\u305d\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u305f\u306e\u3067\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n* https://github.com/suzuki-shunsuke/flute/blob/master/examples/create_user.go\\n* https://github.com/suzuki-shunsuke/flute/blob/master/examples/create_user_test.go#L17-L53\\n\\n\u5143\u3005\u81ea\u5206\u306f\u3053\u306e\u76ee\u7684\u306e\u305f\u3081\u306b [h2non/gock](https://github.com/h2non/gock) \u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u3002\\n\u305f\u3060\u3001 gock \u3060\u3068\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30de\u30c3\u30c1\u3057\u306a\u304b\u3063\u305f\u3068\u304d\u306b\u3001\u306a\u305c\u30de\u30c3\u30c1\u3057\u306a\u3044\u306e\u304b\u304c\u308f\u304b\u3089\u305a\u3001\u8abf\u67fb\u306b\u56f0\u308b\u3068\u3044\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3057\u305f\u3002\\n\\n\u305d\u3053\u3067 flute \u3067\u306f request \u306b\u5bfe\u3057\u3001matcher \u3068 tester \u3068\u3044\u3046\u6982\u5ff5\u3092\u5c0e\u5165\u3057\u3001\\nmatcher \u3067\u30de\u30c3\u30c1\u3057\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u3092 tester \u3067\u30c6\u30b9\u30c8\u3059\u308b\u3068\u3044\u3046\u3075\u3046\u306b\u3057\u307e\u3057\u305f\u3002\\n\u30c6\u30b9\u30c8\u3067\u306f\u5185\u90e8\u3067 [stretchr/testify](https://github.com/stretchr/testify) \u306e assert \u3092\u4f7f\u3063\u3066\u304a\u308a\u3001\u30c6\u30b9\u30c8\u306b\u5931\u6557\u3057\u305f\u3068\u304d\u306b\u306a\u305c\u5931\u6557\u3057\u305f\u306e\u304b\u304c\u5206\u304b\u308a\u3084\u3059\u304f\u51fa\u529b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u4f8b\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u306e Authorization header \u306b\u30c8\u30fc\u30af\u30f3\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u5834\u5408\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u3059\u3002\\n\\n```console\\n=== RUN   TestClient_CreateUser\\n--- FAIL: TestClient_CreateUser (0.00s)\\n    tester.go:168:\\n                Error Trace:    tester.go:168\\n                                                        tester.go:32\\n                                                        transport.go:25\\n                                                        client.go:250\\n                                                        client.go:174\\n                                                        client.go:641\\n                                                        client.go:509\\n                                                        create_user.go:45\\n                                                        create_user_test.go:56\\n                Error:          Not equal:\\n                                expected: []string{\\"token XXXXX\\"}\\n                                actual  : []string{\\"token \\"}\\n\\n                                Diff:\\n                                --- Expected\\n                                +++ Actual\\n                                @@ -1,3 +1,3 @@\\n                                 ([]string) (len=1) {\\n                                - (string) (len=11) \\"token XXXXX\\"\\n                                + (string) (len=6) \\"token \\"\\n                                 }\\n                Test:           TestClient_CreateUser\\n                Messages:       the request header \\"Authorization\\" should match\\n                                service: http://example.com\\n                                request name: create a user\\n```\\n\\n\u307e\u305f\u3001\u5f53\u305f\u308a\u524d\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30e2\u30c3\u30af\u3068\u3057\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u3082\u8fd4\u3057\u307e\u3059\u3002\\n\\n\u30de\u30c3\u30c1\u30f3\u30b0\u3084\u30c6\u30b9\u30c8\u3067\u4f7f\u3048\u308b\u9805\u76ee\u3068\u3057\u3066\u306f\\n\\n* \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30b9 (ex. \\"/users\\")\\n* method (ex. \\"GET\\", \\"POST\\")\\n* \u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf(\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6709\u7121\u3001\u5024)\\n* \u30d8\u30c3\u30c0\u30fc(\u30d8\u30c3\u30c0\u30fc\u306e\u6709\u7121\u3001\u5024)\\n* \u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\\n  * \u6587\u5b57\u5217\u5b8c\u5168\u4e00\u81f4\\n  * JSON\u3068\u3057\u3066\u306e\u7b49\u4fa1\u6027\\n* \u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u306e\u30ab\u30b9\u30bf\u30e0\u95a2\u6570\\n\\n\u306a\u3069\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u8a73\u7d30\u306f \u30b3\u30fc\u30c9\u4e2d\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u5165\u308c\u3066\u3044\u308b\u306e\u3067 [godoc](https://godoc.org/github.com/suzuki-shunsuke/flute/flute) \u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\\n\\n\u6280\u8853\u7684\u306b\u306f [*http.Client](https://golang.org/pkg/net/http/#Client) \u306e Transport \u306b *flute.Transport \u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067 HTTP \u30b5\u30fc\u30d0\u306e\u30e2\u30c3\u30ad\u30f3\u30b0\u3092\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nAPI \u306e\u30c7\u30b6\u30a4\u30f3\u9762\u3067\u8003\u616e\u3057\u305f\u3053\u3068\u3068\u3057\u3066\u306f\u3001\\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3067\u3042\u308b http.DefaultClient \u306e\u5909\u66f4\u3092\u30e9\u30a4\u30d6\u30e9\u30ea\u5074\u3067\u3084\u3089\u306a\u3044\u3053\u3068\u3067\u3059\u3002\\n\u3042\u304f\u307e\u3067 http.RoundTripper \u306e\u5b9f\u88c5\u3092\u63d0\u4f9b\u3059\u308b\u3060\u3051\u3067\u3001\u305d\u308c\u3092 http.DefaultClient \u306b\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u3001\u305d\u308c\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306f\u30e6\u30fc\u30b6\u30fc\u306b\u4efb\u305b\u3066\u3044\u307e\u3059\u3002\\n\\n* \u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306e\u5909\u66f4\u3092\u96a0\u853d\u3057\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u7121\u610f\u8b58\u306e\u3046\u3061\u306b\u5909\u66f4\u3057\u3066\u305f\u308a\u3059\u308b\u306e\u306f\u826f\u304f\u306a\u3044\\n  * gock \u3067\u306f http.DefaultClient \u3092\u5909\u66f4\u3057\u3066\u3044\u308b\u304c\u3001\u305d\u308c\u3092\u7406\u89e3\u3057\u306a\u3044\u307e\u307e\u4f7f\u3063\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u3082\u3044\u308b\u306f\u305a\\n  * \u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306e\u5909\u66f4\u306b\u306f\u526f\u4f5c\u7528\u3082\u3042\u308b\u306e\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u7406\u89e3\u3057\u305f\u4e0a\u3067\u660e\u793a\u7684\u306b\u884c\u3046\u3079\u304d\u3067\u3042\u308b\\n  * \u660e\u793a\u7684\u306b `http.DefaultClient = client` \u306e\u3088\u3046\u306b\u30e6\u30fc\u30b6\u30fc\u306b\u66f8\u304b\u305b\u308c\u3070\u3001\u7406\u89e3\u3057\u306a\u3044\u307e\u307e\u4f7f\u3046\u3053\u3068\u306f\u306a\u3044\u306f\u305a\\n* \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5916\u304b\u3089\u3082\u5909\u66f4\u3067\u304d\u308b\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3092\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u5b8c\u5168\u306b\u7ba1\u7406\u3059\u308b\u306e\u306f\u4e0d\u53ef\u80fd\u306a\u306e\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u4efb\u305b\u308b\\n\\n\u4ee5\u4e0a\u3001\u7c21\u5358\u3067\u3059\u304c\u81ea\u4f5c\u306e OSS [flute](https://github.com/suzuki-shunsuke/flute) \u306e\u7d39\u4ecb\u3067\u3057\u305f\u3002"},{"id":"/how-to-imitate-jenkins-parameterized-build-at-drone","metadata":{"permalink":"/how-to-imitate-jenkins-parameterized-build-at-drone","source":"@site/blog/how-to-imitate-jenkins-parameterized-build-at-drone.md","title":"Drone \u3067\u300c\u30d3\u30eb\u30c9\u5b9f\u884c\u6642\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u300d\u3063\u307d\u3044\u3053\u3068\u3092\u3059\u308b","description":"Jenkins \u3067\u306f parameterized build \u3068\u3044\u3046\u6a5f\u80fd\u3067\u3001\u30d3\u30eb\u30c9\u5b9f\u884c\u6642\u306b Web UI \u304b\u3089\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002","date":"2019-06-20T08:50:11.000Z","formattedDate":"June 20, 2019","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":2.71,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Drone \u3067\u300c\u30d3\u30eb\u30c9\u5b9f\u884c\u6642\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u300d\u3063\u307d\u3044\u3053\u3068\u3092\u3059\u308b","date":"2019-06-20T08:50:11.000Z","tags":["drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Flute - Golang HTTP client testing framework","permalink":"/fagott"},"nextItem":{"title":"Drone v0.8 \u306e .drone.yml \u3092 v1 \u306e .drone.jsonnet \u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","permalink":"/drone-jsonnet-generator"}},"content":"Jenkins \u3067\u306f parameterized build \u3068\u3044\u3046\u6a5f\u80fd\u3067\u3001\u30d3\u30eb\u30c9\u5b9f\u884c\u6642\u306b Web UI \u304b\u3089\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\nDrone \u3067\u306f\u57fa\u672c\u7684\u306b Git \u306e\u30a4\u30d9\u30f3\u30c8\u3092\u30d5\u30c3\u30af\u3057\u3066\u52d5\u304f\u306e\u3067\u300c\u30d3\u30eb\u30c9\u3092\u5b9f\u884c\u6642\u306b\u624b\u52d5\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3059\u308b\u300d\u3068\u3044\u3046\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002\\n\\n\u81ea\u5206\u306f\u57fa\u672c\u7684\u306b\u3067\u304d\u306a\u304f\u3066\u3082\u69cb\u308f\u306a\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u304c\u3001\\n\u3053\u3046\u3044\u3063\u305f\u6a5f\u80fd\u304c\u306a\u3044\u304b\u3089 Drone \u3092\u4f7f\u308f\u306a\u3044\u3068\u3044\u3046\u4eba\u3082\u4e2d\u306b\u306f\u3044\u308b\u306e\u3067\u3001\\nDrone \u3067\u3082\u3061\u3087\u3063\u3068\u3057\u305f\u5de5\u592b\u3067\u305d\u308c\u3063\u307d\u3044\u3053\u3068\u306f\u51fa\u6765\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3044\u3001\u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n\u4e00\u5fdc\u8a00\u3063\u3066\u304a\u304f\u3068\u3001 Jenkins \u306e parameterized build \u3092\u5b8c\u5168\u306b\u4ee3\u66ff\u3059\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example-drone-build-parameter\\n\\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\\n* [build_params/params.sh.tpl](https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/build_params/params.sh.tpl): \u30d3\u30eb\u30c9\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a18\u8ff0\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\\n* [scripts/deploy.sh](https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/scripts/deploy.sh): \u30c7\u30d7\u30ed\u30a4\u6642\u306b\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\\n* [.drone.yml](https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/.drone.yml): Drone \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\\n\\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\\n\\n```console\\n$ bash scripts/deploy.sh\\n```\\n\\n\u3059\u308b\u3068\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a18\u8ff0\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u4f5c\u6210\u3055\u308c\u3001\u30a8\u30c7\u30a3\u30bf\u3067\u958b\u304d\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/scripts/deploy.sh#L12-L17\\n\\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a18\u8ff0\u3057\u3001\u30a8\u30c7\u30a3\u30bf\u3092\u9589\u3058\u307e\u3059\u3002\\n\\n\u3059\u308b\u3068\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u30b3\u30df\u30c3\u30c8\u3055\u308c\u3001\u65b0\u3057\u3044\u30bf\u30b0\u304c\u4f5c\u6210\u3055\u308c\u3001\u30b3\u30df\u30c3\u30c8\u3068\u30bf\u30b0\u304c\u30ea\u30e2\u30fc\u30c8\u306b\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/scripts/deploy.sh#L27-L35\\n\\nDrone \u3067\u30bf\u30b0\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u30d5\u30c3\u30af\u3057\u3066\u30d3\u30eb\u30c9\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/.drone.yml#L13-L17\\n\\n\u30d3\u30eb\u30c9\u3067\u306f\u30b3\u30df\u30c3\u30c8\u3055\u308c\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u3053\u3068\u3067\u30d3\u30eb\u30c9\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u305b\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/.drone.yml#L10\\n\\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u30d3\u30eb\u30c9\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u30b3\u30df\u30c3\u30c8\u3055\u308c\u308b\u306e\u3067 Git \u3067\u7ba1\u7406\u3067\u304d\u308b\u3068\u3044\u3046\u306e\u3082\u7279\u5fb4\u3067\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/build_params/2019-07-07T10-04-02JST/params.sh\\n\\n\u4e0a\u8a18\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u74b0\u5883\u5909\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u304c\u3001\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3042\u308b\u5fc5\u8981\u6027\u306f\u306a\u304f\u3001\u4f8b\u3048\u3070 JSON \u30d5\u30a1\u30a4\u30eb\u3092\u8a18\u8ff0\u3057\u3066\u30d3\u30eb\u30c9\u3067 JSON \u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3082\u3088\u3044\u3057\u3001\\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9078\u629e\u3055\u305b\u308b\u3088\u3046\u306a\u3053\u3068\u304c\u3057\u305f\u3051\u308c\u3070 [fzf](https://github.com/junegunn/fzf) \u306e\u3088\u3046\u306a\u3082\u306e\u3092\u4f7f\u3063\u3066\u3082\u3088\u3044\u3057\u3001\\n\u3044\u304f\u3089\u3067\u3082\u6539\u5584\u3067\u304d\u307e\u3059\u3002\\n\\n\u4ee5\u4e0a\u3001\u7c21\u5358\u306a tips \u3067\u3057\u305f\u3002"},{"id":"/drone-jsonnet-generator","metadata":{"permalink":"/drone-jsonnet-generator","source":"@site/blog/drone-jsonnet-generator.md","title":"Drone v0.8 \u306e .drone.yml \u3092 v1 \u306e .drone.jsonnet \u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","description":"Drone v0.8 \u306e .drone.yml \u3092 v1 \u306e .drone.jsonnet \u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2019-06-11T22:40:45.000Z","formattedDate":"June 11, 2019","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"drone","permalink":"/tags/drone"}],"readingTime":4.66,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Drone v0.8 \u306e .drone.yml \u3092 v1 \u306e .drone.jsonnet \u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","date":"2019-06-11T22:40:45.000Z","tags":["oss","drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Drone \u3067\u300c\u30d3\u30eb\u30c9\u5b9f\u884c\u6642\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u300d\u3063\u307d\u3044\u3053\u3068\u3092\u3059\u308b","permalink":"/how-to-imitate-jenkins-parameterized-build-at-drone"},"nextItem":{"title":".drone.jsonnet \u3068 .drone.yml \u3092\u6bd4\u8f03\u3059\u308b Drone plugin \u3092\u4f5c\u3063\u305f","permalink":"/drone-plugin-jsonnet-check"}},"content":"Drone v0.8 \u306e .drone.yml \u3092 v1 \u306e .drone.jsonnet \u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/drone-jsonnet-generator\\n\\n## \u80cc\u666f\\n\\nhttps://docs.drone.io/user-guide/pipeline/migrating/\\n\\nDrone \u306f v0.8 \u304b\u3089 v1 \u3067 .drone.yml \u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u5927\u304d\u304f\u5909\u308f\u3063\u3066\u3044\u307e\u3059\u3002\\nDrone v1 \u3067\u306f\u30d3\u30eb\u30c9\u5b9f\u884c\u6642\u306b\u81ea\u52d5\u3067\u5909\u63db\u3057\u3066\u3044\u308b\u305f\u3081\u3001v0.8 \u306e .drone.yml \u3067\u3082\u305d\u306e\u307e\u307e\u52d5\u304d\u307e\u3059(matrix builds \u3082\u52d5\u304d\u307e\u3059)\u3002\\n\\n\u305d\u306e\u305f\u3081\u3001Drone v0.8 \u304b\u3089 v1 \u306b\u79fb\u884c\u3059\u308b\u969b\u3001\u3059\u3050\u306b .drone.yml \u3092\u4fee\u6b63\u3057\u306a\u304f\u3066\u3082\u554f\u984c\u306a\u3044\u306e\u3067\u3059\u304c\u3001\\nv1 \u72ec\u81ea\u306e\u6a5f\u80fd\u304c\u51fa\u3066\u304d\u305f\u5834\u5408 v0.8 \u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u5834\u5408\u5229\u7528\u3067\u304d\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3057\u3001\\n\u3044\u3064\u307e\u3067\u3082\u53e4\u3044\u307e\u307e\u3060\u3068\u6c17\u6301\u3061\u60aa\u3044\u306e\u3067\u51fa\u6765\u308b\u306a\u3089\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u5909\u63db\u3057\u305f\u3044\u3067\u3059\u3002\\n\\ndrone-cli \u3067\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u5909\u63db\u3059\u308b `drone convert` \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n\u305f\u3060\u3057\u3001 `drone convert` \u306f matrix build \u3092 multiple pipeline \u306b\u5909\u63db\u3059\u308b\u306e\u3067\u3059\u304c\u3001\\n\u975e\u5e38\u306b\u5197\u9577\u306b\u306a\u308a\u307e\u3059\u3002\\n\u305d\u306e\u305f\u3081\u3001[jsonnet](https://jsonnet.org/) \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://docs.drone.io/user-guide/pipeline/migrating/\\n\\n> The above syntax can be quite verbose if you are testing a large number of variations.\\n> To simplify your configuration we recommend using jsonnet.\\n\\n\u3053\u306e .drone.jsonnet \u306e\u751f\u6210\u306f `drone convert` \u3067\u306f\u51fa\u6765\u306a\u3044\u3067\u3059\u3057\u3001\u624b\u4f5c\u696d\u306b\u306a\u308b\u306e\u3067\u3059\u304c\u3001\u7d50\u69cb\u9762\u5012\u3067\u3059\u3002\\nv0.8 \u304b\u3089 v1 \u3067\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u5909\u308f\u3063\u3066\u307e\u3059\u3057\u3001jsonnet \u306b\u99b4\u67d3\u307f\u306e\u8584\u3044\u4eba\u3082\u5c11\u306a\u304f\u306a\u3044\u3067\u3057\u3087\u3046\u3002\\n\u79fb\u884c\u5bfe\u8c61\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u591a\u3044\u5834\u5408\u3001\u975e\u5e38\u306b\u82e6\u884c\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n\u305d\u3053\u3067\u4eca\u56de\u3053\u306e .drone.jsonnet \u3092\u751f\u6210\u3059\u308b\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u307e\u3057\u305f\u3002\\n\\n## \u4f7f\u3044\u65b9\\n\\n\u975e\u5e38\u306b\u30b7\u30f3\u30d7\u30eb\u3067\u3059\u3002\\n\\n```console\\n$ drone-jsonnet-generator gen [--source .drone.yml] [--target .drone.jsonnet] [--stdout]\\n```\\n\\n\u3092\u5b9f\u884c\u3059\u308b\u3068 .drone.yml \u304b\u3089 .drone.jsonnet \u3092\u751f\u6210\u3057\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070\\n\\n```yaml\\n---\\npipeline:\\n  build:\\n    image: golang:${GO_VERSION}\\n    commands:\\n    - echo hello\\nservices:\\n  database:\\n    image: ${DATABASE}\\nmatrix:\\n  include:\\n  - GO_VERSION: 1.4\\n    DATABASE: mysql:5.5\\n  - GO_VERSION: 1.4\\n    DATABASE: mysql:6.5\\n  - GO_VERSION: 1.3\\n    DATABASE: mysql:5.5\\n```\\n\\n\u304b\u3089\\n\\n```jsonnet\\nlocal pipeline(GO_VERSION, DATABASE) = {\\n  \\"kind\\": \\"pipeline\\",\\n  \\"name\\": \\"\'GO_VERSION:\' + GO_VERSION + \' DATABASE:\' + DATABASE\\",\\n  \\"platform\\": {\\n    \\"arch\\": \\"amd64\\",\\n    \\"os\\": \\"linux\\"\\n  },\\n  \\"services\\": [\\n    {\\n      \\"image\\": \\"${DATABASE}\\",\\n      \\"name\\": \\"database\\",\\n      \\"pull\\": \\"default\\"\\n    }\\n  ],\\n  \\"steps\\": [\\n    {\\n      \\"commands\\": [\\n        \\"echo hello\\"\\n      ],\\n      \\"image\\": \\"golang:${GO_VERSION}\\",\\n      \\"name\\": \\"build\\",\\n      \\"pull\\": \\"default\\"\\n    }\\n  ]\\n};\\n\\nlocal args = [\\n  {\\n    \\"DATABASE\\": \\"mysql:5.5\\",\\n    \\"GO_VERSION\\": \\"1.4\\"\\n  },\\n  {\\n    \\"DATABASE\\": \\"mysql:6.5\\",\\n    \\"GO_VERSION\\": \\"1.4\\"\\n  },\\n  {\\n    \\"DATABASE\\": \\"mysql:5.5\\",\\n    \\"GO_VERSION\\": \\"1.3\\"\\n  }\\n];\\n\\n[\\n  pipeline(arg.GO_VERSION, arg.DATABASE) for arg in args\\n]\\n```\\n\\n**\u6b8b\u5ff5\u306a\u304c\u3089\u751f\u6210\u3055\u308c\u305f jsonnet \u306f\u305d\u306e\u307e\u307e\u3067\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\u4fee\u6b63\u304c\u5fc5\u8981\u3067\u3059\u3002**\\n\u305d\u308c\u3067\u3082\u4e00\u304b\u3089 .drone.jsonnet \u3092\u66f8\u304f\u3088\u308a\u306f\u5727\u5012\u7684\u306b\u52b9\u7387\u304c\u826f\u3044\u3067\u3059\u3002\\n\\n* pipeline \u4e2d\u306e\u5909\u6570\u304c `${\u5909\u6570\u540d}` \u3068\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u76f4\u3059 (`\\"golang:${GO_VERSION}\\"` -> `\\"golang:\\" + GO_VERSION`)\\n* pipeline name \u304c `\\"` \u3067\u56f2\u307e\u308c\u3066\u308b\u306e\u3067\u53d6\u308a\u9664\u304f (`\\"\'GO_VERSION:\' + GO_VERSION + \' DATABASE:\' + DATABASE\\"` -> `\'GO_VERSION:\' + GO_VERSION + \' DATABASE:\' + DATABASE`)\\n\\n\u3042\u3068\u3001\u4e00\u90e8\u306e\u30b3\u30fc\u30c9\u3092 JSON \u3068\u3057\u3066\u751f\u6210\u3057\u3066\u3044\u308b\u306e\u3067\u3001jsonnet \u3068\u3057\u3066\u306f\u591a\u5c11\u7dba\u9e97\u3067\u306f\u306a\u3044(\u30d5\u30a3\u30fc\u30eb\u30c9\u304c`\\"`\u3067\u56f2\u307e\u308c\u3066\u305f\u308a\u3059\u308b)\u3067\u3059\u304c\u3001\u5b9f\u7528\u4e0a\u7279\u306b\u554f\u984c\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3061\u306a\u307f\u306b\u4e0a\u306e\u4f8b\u3067\u306f matrix build \u306e `include` \u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u4f7f\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u307e\u3059\u3057\u3001\\n`include` \u304c\u4f7f\u308f\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u82e5\u5e72\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u9055\u3044\u307e\u3059\u3002\\n\\n\u306a\u304a\u3001\u4eca\u56de\u306e\u30c4\u30fc\u30eb\u306e\u5bfe\u8c61\u306b\u306a\u308b .drone.yml \u306f matrix build \u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u304c\u524d\u63d0\u306b\u306a\u308a\u307e\u3059\u3002\\nmatrix build \u304c\u4f7f\u308f\u308c\u3066\u3044\u306a\u3044\u3068\u30a8\u30e9\u30fc\u3092\u8fd4\u3057\u307e\u3059\u3002\\nmatrix build \u3092\u4f7f\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3042\u308c\u3070 jsonnet \u3092\u4f7f\u3046\u5fc5\u8981\u6027\u304c\u5f31\u3044\u3067\u3059\u3057\u3001 `drone convert` \u3067\u5909\u63db\u3059\u308c\u3070\u826f\u3044\u6c17\u304c\u3057\u307e\u3059\u3002\\n\\n\u4ee5\u4e0a\u3001\u81ea\u4f5c\u306eOSS\u306e\u7d39\u4ecb\u3067\u3057\u305f\u3002\\nDrone v0.8 \u304b\u3089 v1 \u3078\u306e\u79fb\u884c\u3067\u56f0\u3063\u3066\u3044\u308b\u4eba\u306f\u662f\u975e\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\\n\u5feb\u9069\u306a Drone \u30e9\u30a4\u30d5\u3092\u3002"},{"id":"/drone-plugin-jsonnet-check","metadata":{"permalink":"/drone-plugin-jsonnet-check","source":"@site/blog/drone-plugin-jsonnet-check.md","title":".drone.jsonnet \u3068 .drone.yml \u3092\u6bd4\u8f03\u3059\u308b Drone plugin \u3092\u4f5c\u3063\u305f","description":"\u4e45\u3057\u3076\u308a\u306b Drone plugin \u3092\u4f5c\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2019-05-31T23:34:10.000Z","formattedDate":"May 31, 2019","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":2.84,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":".drone.jsonnet \u3068 .drone.yml \u3092\u6bd4\u8f03\u3059\u308b Drone plugin \u3092\u4f5c\u3063\u305f","date":"2019-05-31T23:34:10.000Z","tags":["drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Drone v0.8 \u306e .drone.yml \u3092 v1 \u306e .drone.jsonnet \u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u3063\u305f","permalink":"/drone-jsonnet-generator"},"nextItem":{"title":"go-jsoneq - 2\u3064\u306e\u5024\u304cJSON\u3068\u3057\u3066\u7b49\u3057\u3044\u304b\u6bd4\u8f03\u3059\u308bGo\u30e9\u30a4\u30d6\u30e9\u30ea","permalink":"/go-jsoneq"}},"content":"\u4e45\u3057\u3076\u308a\u306b [Drone plugin](https://docs.drone.io/plugins/) \u3092\u4f5c\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nhttps://www.github.com/suzuki-shunsuke/drone-plugin-jsonnet-check\\n\\n.drone.jsonnet \u304b\u3089 .drone.yml \u3092\u751f\u6210\u3057\u3066\u3044\u3066\u3001\u4e21\u65b9\u3092 Git \u3067\u7ba1\u7406\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u3001\\n.drone.jsonnet \u3068 .drone.yml \u306e\u72b6\u614b\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306e plugin \u3067\u3059\u3002\\n\\nDrone v1 \u3067\u306f matrix builds \u304c\u5ec3\u6b62\u3055\u308c\u3001multiple pipeline \u304c\u5c0e\u5165\u3055\u308c\u307e\u3057\u305f\u3002\\nmatrix builds \u3092 `drone convert` \u30b3\u30de\u30f3\u30c9\u3067 multiple pipeline \u306b\u5909\u63db\u3059\u308b\u3068\u3001pipeline \u306e\u6570\u304c\u591a\u3044\u307b\u3069\u5197\u9577\u3067\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u304c\u60aa\u304f\u306a\u308a\u307e\u3059\u3002\\n\u305d\u3053\u3067\u516c\u5f0f\u3067\u306f [jsonnet](https://jsonnet.org) \u3067\u8a18\u8ff0\u3057\u3066 .drone.yml \u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://docs.drone.io/user-guide/pipeline/migrating/\\n\\n> To simplify your configuration we recommend using jsonnet.\\n\\n```console\\n$ drone jsonnet --format --stream\\n```\\n\\njsonnet \u304b\u3089 yaml \u3078\u306e\u5909\u63db\u306f [Jsonnet extension](https://docs.drone.io/extend/config/jsonnet/) \u3092\u4f7f\u3046\u3068 Drone \u304c\u30d3\u30eb\u30c9\u5b9f\u884c\u6642\u306b\u81ea\u52d5\u3067\u5909\u63db\u3057\u3066\u304f\u308c\u308b\u306e\u3067 .drone.yml \u3092\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u306f\u306a\u304f\u306a\u308a\u307e\u3059\u304c\u3001\\n\u4f7f\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u3001 .drone.jsonnet \u3068 .drone.yml \u3092 Git \u3067\u7ba1\u7406\u3057\u3001\u81ea\u524d\u3067\u5909\u63db\u3057\u3066\u30b3\u30df\u30c3\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\u3053\u306e\u4f5c\u696d\u3092\u306a\u306b\u304b\u3057\u3089\u81ea\u52d5\u5316\u3057\u306a\u3044\u3068 .drone.jsonnet \u3068 .drone.yml \u306b\u4e0d\u6574\u5408\u304c\u751f\u3058\u308b\u3053\u3068\u3082\u3042\u308a\u5f97\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n* .drone.jsonnet \u3092\u66f4\u65b0\u3057\u305f\u3051\u3069 .drone.yml \u3092\u66f4\u65b0\u3057\u5fd8\u308c\u308b\\n* .drone.yml \u3092\u76f4\u63a5\u66f4\u65b0\u3057\u3066\u3057\u307e\u3063\u305f\\n\\n\u305d\u3053\u3067 CI \u3067\u4e0d\u6574\u5408\u304c\u751f\u3058\u3066\u3044\u306a\u3044\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306e plugin \u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\\n\\n\u6700\u521d\u306f plugin \u3067\u306f\u306a\u304f\u3001\u305f\u3060\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3068\u3057\u3066\u516c\u958b\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/drone-jsonnet-convert-test\\n\\n\u3057\u304b\u3057\u3001\u6298\u89d2\u306a\u306e\u3067 plugin \u306b\u3057\u307e\u3057\u305f\u3002\\n\\n\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u5358\u7d14\u3067\u3001 .drone.jsonnet \u304b\u3089 YAML \u3092\u751f\u6210\u3057\u3001 .drone.yml \u3068 diff \u3092\u53d6\u3063\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\\n\\n\u4f7f\u3044\u65b9\u306f README \u3092\u898b\u308c\u3070\u5206\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\\n\\n`drone jsonnet` \u30b3\u30de\u30f3\u30c9\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092 plugin \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u6e21\u305b\u307e\u3059\u3002\\n\\n```jsonnet\\n{\\n  kind: \\"pipeline\\",\\n  name: \\"test\\",\\n  steps: [\\n    {\\n      name: \\"test .drone.yml\\",\\n      image: \\"suzukishunsuke/jsonnet-check:v1.1.1-v0.1.0\\",\\n      settings: {\\n        format: true,\\n      },\\n    },\\n  ],\\n}\\n```\\n\\n```console\\n$ drone exec\\n[test .drone.yml:0] + drone jsonnet --format --target /tmp/.drone.yml\\n[test .drone.yml:1] + diff .drone.yml /tmp/.drone.yml\\n[test .drone.yml:2] --- .drone.yml\\n[test .drone.yml:3] +++ /tmp/.drone.yml\\n[test .drone.yml:4] @@ -12,5 +12,4 @@\\n[test .drone.yml:5]    settings:\\n[test .drone.yml:6]      format: true\\n[test .drone.yml:7]\\n[test .drone.yml:8] -\\n[test .drone.yml:9]  ...\\n2019/06/01 00:33:27 test .drone.yml : exit code 1\\n```\\n\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\\n\u30c6\u30b9\u30c8\u3067\u306f [bats](https://github.com/bats-core/bats-core) \u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u4ee5\u4e0a\u3001\u7c21\u5358\u3067\u3059\u304c\u3001\u81ea\u4f5c Drone plugin \u306e\u7d39\u4ecb\u3067\u3057\u305f\u3002"},{"id":"/go-jsoneq","metadata":{"permalink":"/go-jsoneq","source":"@site/blog/go-jsoneq.md","title":"go-jsoneq - 2\u3064\u306e\u5024\u304cJSON\u3068\u3057\u3066\u7b49\u3057\u3044\u304b\u6bd4\u8f03\u3059\u308bGo\u30e9\u30a4\u30d6\u30e9\u30ea","description":"https://github.com/suzuki-shunsuke/go-jsoneq","date":"2019-05-23T02:43:18.000Z","formattedDate":"May 23, 2019","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"golang","permalink":"/tags/golang"}],"readingTime":1.35,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"go-jsoneq - 2\u3064\u306e\u5024\u304cJSON\u3068\u3057\u3066\u7b49\u3057\u3044\u304b\u6bd4\u8f03\u3059\u308bGo\u30e9\u30a4\u30d6\u30e9\u30ea","date":"2019-05-23T02:43:18.000Z","tags":["oss","golang"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":".drone.jsonnet \u3068 .drone.yml \u3092\u6bd4\u8f03\u3059\u308b Drone plugin \u3092\u4f5c\u3063\u305f","permalink":"/drone-plugin-jsonnet-check"},"nextItem":{"title":"durl - \u58ca\u308c\u305fURL\u3092\u691c\u77e5\u3059\u308bCLI\u30c4\u30fc\u30eb","permalink":"/durl"}},"content":"https://github.com/suzuki-shunsuke/go-jsoneq\\n\\n2\u3064\u306e\u5024\u304cJSON\u3068\u3057\u3066\u7b49\u3057\u3044\u304b\u6bd4\u8f03\u3059\u308bGo\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u958b\u767a\u3057\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\u300c2\u3064\u306e\u5024\u304cJSON\u3068\u3057\u3066\u7b49\u3057\u3044\u300d\u3068\u306f\u30012\u3064\u306e\u5024\u3092\u305d\u308c\u305e\u308cJSON\u6587\u5b57\u5217\u306b\u5909\u63db\u3057\u305f\u3089\u30012\u3064\u304c\u8868\u73fe\u3059\u308b\u30c7\u30fc\u30bf\u304c\u304a\u306a\u3058\u306b\u306a\u308b\u3068\u3044\u3046\u610f\u5473\u3067\u3059\u3002\\n\\n```go\\nstruct {\\n\\tFoo string `json:\\"foo\\"`\\n}{\\n\\tFoo: \\"bar\\",\\n}\\n```\\n\\n\u3068\\n\\n```go\\nmap[string]interface{}{\\"foo\\": \\"bar\\"}\\n```\\n\\n\u3092 JSON \u306b\u5909\u63db\u3057\u305f\u3089\u3068\u3082\u306b\\n\\n```json\\n{\\"foo\\": \\"bar\\"}\\n```\\n\\n\u306b\u306a\u308a\u307e\u3059\u306d\u3002\\n\\njson.Marshaler \u306e\u30c6\u30b9\u30c8\u3084\u3001\\n\u5b9f\u969b\u306e JSON \u6587\u5b57\u5217\u304b\u3089\u69cb\u9020\u4f53\u3092\u5b9a\u7fa9\u3057\u305f\u3068\u304d\u306b\u3061\u3083\u3093\u3068\u5b9a\u7fa9\u3067\u304d\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3059\u308b\u306e\u306b\u4f7f\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\njsoneq.Equal \u3067\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u5358\u7d14\u3067\u3059\u3002\\n\\n1. json.Marshal \u3067 []byte \u306b\u5909\u63db\\n2. json.Unmarshal \u3067 []byte \u3092 map, array \u3068 primitive \u306a\u578b\u304b\u3089\u306a\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(?)\u306b\u5909\u63db\\n3. reflect.DeepEqual \u3067\u6bd4\u8f03\\n\\n\u5f15\u6570\u304c []byte \u306e\u5834\u5408\u306f 1 \u306f\u98db\u3070\u3057\u307e\u3059\u3002\\n\\nGoDoc \u3084\u30b5\u30f3\u30d7\u30eb\u3092\u898b\u308c\u3070\u4f7f\u3044\u65b9\u306f\u7c21\u5358\u306b\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u4ee5\u4e0a\u3001\u7c21\u5358\u3067\u3059\u304c\u3001\u81ea\u4f5c\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u7d39\u4ecb\u3067\u3057\u305f\u3002"},{"id":"/durl","metadata":{"permalink":"/durl","source":"@site/blog/durl.md","title":"durl - \u58ca\u308c\u305fURL\u3092\u691c\u77e5\u3059\u308bCLI\u30c4\u30fc\u30eb","description":"\u7d50\u69cb\u524d\u306b\u958b\u767a\u3057\u305f\u30c4\u30fc\u30eb\u3067\u3059\u304c\u3001\u307e\u3060\u8a18\u4e8b\u306b\u3057\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2019-04-28T12:25:00.000Z","formattedDate":"April 28, 2019","tags":[{"label":"oss","permalink":"/tags/oss"}],"readingTime":2.245,"truncated":false,"authors":[],"frontMatter":{"title":"durl - \u58ca\u308c\u305fURL\u3092\u691c\u77e5\u3059\u308bCLI\u30c4\u30fc\u30eb","date":"2019-04-28T12:25:00.000Z","draft":false,"tags":["oss"],"archives":["2019/04"]},"prevItem":{"title":"go-jsoneq - 2\u3064\u306e\u5024\u304cJSON\u3068\u3057\u3066\u7b49\u3057\u3044\u304b\u6bd4\u8f03\u3059\u308bGo\u30e9\u30a4\u30d6\u30e9\u30ea","permalink":"/go-jsoneq"},"nextItem":{"title":"\u6bce\u903130\u5206\u306e\u6280\u8853\u5171\u6709\u4f1a","permalink":"/2019-knowledge-share-meeting"}},"content":"\u7d50\u69cb\u524d\u306b\u958b\u767a\u3057\u305f\u30c4\u30fc\u30eb\u3067\u3059\u304c\u3001\u307e\u3060\u8a18\u4e8b\u306b\u3057\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/durl\\n\\n\u30d5\u30a1\u30a4\u30eb\u4e2d\u306e URL \u304c\u58ca\u308c\u3066\u3044\u306a\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\u30d5\u30a1\u30a4\u30eb\u4e2d\u306e URL \u3092\u62bd\u51fa\u3057\u3001HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u3066\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u304c 2xx \u3067\u306a\u3044\u3082\u306e\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u7570\u5e38\u7d42\u4e86\u3057\u307e\u3059\u3002\\n\\n\u306a\u304a\u3001\u30da\u30fc\u30b8\u5185\u30ea\u30f3\u30af(\u30a2\u30f3\u30ab\u30fc)\u304c\u58ca\u308c\u3066\u3044\u308b\u3082\u306e\u306b\u3064\u3044\u3066\u306f\u691c\u77e5\u3067\u304d\u307e\u305b\u3093\u3002\\n\\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n\\nGo\u88fd\u3067\u3001\u30d0\u30a4\u30ca\u30ea\u3092 GitHub Releases \u3067\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/durl/releases\\n\\n## Docker \u30a4\u30e1\u30fc\u30b8\\n\\nhttps://quay.io/repository/suzuki_shunsuke/durl\\n\\nbusybox \u30d9\u30fc\u30b9\u306e Docker \u30a4\u30e1\u30fc\u30b8\u3082\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\\nCI \u3067\u4f7f\u3046\u306e\u306b\u4fbf\u5229\u3067\u3059\u3002\\n\\n## \u4f7f\u3044\u65b9\\n\\n`durl init` \u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb `.durl.yml` \u3092\u751f\u6210\u3057\u307e\u3059\u3002\\n\\n```\\n$ durl init\\n```\\n\\n`durl check` \u306b\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u30ea\u30b9\u30c8\u3092\u6a19\u6e96\u5165\u529b\u3068\u3057\u3066\u6e21\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n`find` \u30b3\u30de\u30f3\u30c9\u306a\u3069\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u3068\u826f\u3044\u3067\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-errlog/blob/v0.9.0/scripts/durl.sh#L9\\n\\n```\\nfind . \\\\\\n  -type d -name node_modules -prune -o \\\\\\n  -type d -name .git -prune -o \\\\\\n  -type d -name vendor -prune -o \\\\\\n  -type f -print | \\\\\\n  grep -v package-lock.json | \\\\\\n  grep -v Gopkg.toml | \\\\\\n  grep -v Gopkg.lock | \\\\\\n  durl check || exit 1\\n```\\n\\n\u58ca\u308c\u305f URL \u304c\u898b\u3064\u304b\u3063\u305f\u3089 \u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3001URL\u3001HTTP\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u3057\u307e\u3059\u3002\\n\\n```\\n$ echo bar.txt | durl check\\n[bar.txt] https://github.com/suzuki-shunsuke/dead-repository is dead (404)\\n```\\n\\n## \u7121\u8996\u3059\u308b\u30c9\u30e1\u30a4\u30f3\\n\\nhttps://github.com/suzuki-shunsuke/durl/issues/11\\n\\n\u3053\u308c\u3089\u306f\u7121\u8996\u3057\u307e\u3059\u3002\\n\\n* example.com, example.org, example.net\\n* localhost\\n\\n## \u8a2d\u5b9a\\n\\nhttps://github.com/suzuki-shunsuke/durl#configuration\\n\\n* ignore_urls: \u7121\u8996\u3059\u308bURL(\u5b8c\u5168\u4e00\u81f4)\u306e\u30ea\u30b9\u30c8\\n* ignore_hosts: \u7121\u8996\u3059\u308b\u30c9\u30e1\u30a4\u30f3(\u5b8c\u5168\u4e00\u81f4)\u306e\u30ea\u30b9\u30c8\\n* http_method: HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30e1\u30bd\u30c3\u30c9\\n  * head,get: HEAD\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5931\u6557\u3057\u305f\u3089GET\u30ea\u30af\u30a8\u30b9\u30c8\\n  * head: HEAD\u30ea\u30af\u30a8\u30b9\u30c8\\n  * get: GET\u30ea\u30af\u30a8\u30b9\u30c8\\n* max_request_count: \u540c\u6642\u306b\u4e26\u5217\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\u6700\u5927\u6570\\n* max_failed_request_count: \u6700\u5927\u306e\u5931\u6557URL\u6570\u3002\u3053\u308c\u3092\u8d85\u3048\u308b\u3068\u5373\u6642\u7570\u5e38\u7d42\u4e86\u3059\u308b\\n* http_request_timeout: HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\\n\\n## CI \u306b\u7d44\u307f\u8fbc\u3080\\n\\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3084\u30d6\u30ed\u30b0\u3092GitHub\u306a\u3069\u3067\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u3044\u308b\u5834\u5408\u3001CI\u306b\u7d44\u307f\u8fbc\u3080\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\\n\\n* https://github.com/suzuki-shunsuke/go-errlog/blob/v0.9.0/.drone.yml#L35-L38\\n* https://github.com/suzuki-shunsuke/go-errlog/blob/v0.9.0/scripts/durl.sh#L9"},{"id":"/2019-knowledge-share-meeting","metadata":{"permalink":"/2019-knowledge-share-meeting","source":"@site/blog/2019-knowledge-share-meeting.md","title":"\u6bce\u903130\u5206\u306e\u6280\u8853\u5171\u6709\u4f1a","description":"\u81ea\u5206\u304c\u6700\u8fd1\u8077\u5834\u3067\u884c\u3063\u3066\u3044\u308b\u6280\u8853\u5171\u6709\u306e\u53d6\u308a\u7d44\u307f\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002","date":"2019-03-17T04:47:40.000Z","formattedDate":"March 17, 2019","tags":[{"label":"job","permalink":"/tags/job"}],"readingTime":3.695,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"\u6bce\u903130\u5206\u306e\u6280\u8853\u5171\u6709\u4f1a","date":"2019-03-17T04:47:40.000Z","authors":["suzuki-shunsuke"],"tags":["job"]},"prevItem":{"title":"durl - \u58ca\u308c\u305fURL\u3092\u691c\u77e5\u3059\u308bCLI\u30c4\u30fc\u30eb","permalink":"/durl"},"nextItem":{"title":"Rancher\u3067username \u304c\u91cd\u8907\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u5834\u5408\u306e\u89e3\u6d88\u65b9\u6cd5","permalink":"/rancher-duplicated-user-name"}},"content":"\u81ea\u5206\u304c\u6700\u8fd1\u8077\u5834\u3067\u884c\u3063\u3066\u3044\u308b\u6280\u8853\u5171\u6709\u306e\u53d6\u308a\u7d44\u307f\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## \u80cc\u666f\\n\\n\u3053\u308c\u307e\u3067\u81ea\u5206\u306f\u7a4d\u6975\u7684\u306b\u81ea\u5206\u306b\u3068\u3063\u3066\u65b0\u3057\u3044\u6280\u8853\u3092\u53d6\u308a\u5165\u308c\u3066\u30b5\u30fc\u30d3\u30b9\u306e\u54c1\u8cea\u306e\u5411\u4e0a\u306b\u7e4b\u3052\u3066\u304d\u307e\u3057\u305f\u3002\\n\u305f\u3060\u3057\u3001\u305d\u308c\u3089\u306e\u6280\u8853\u306b\u95a2\u3057\u3066\u5468\u308a\u306b\u5341\u5206\u306b\u5171\u6709\u3067\u304d\u3066\u3044\u306a\u304b\u3063\u305f\u5074\u9762\u304c\u3042\u308a\u307e\u3057\u305f\u3002\\n\\n## \u3084\u3063\u3066\u3044\u308b\u3053\u3068\\n\\n\u6bce\u903130\u5206\u6c7a\u307e\u3063\u305f\u6642\u9593\u306b\u30b9\u30e9\u30a4\u30c9\u3092\u4f7f\u3063\u3066\u767a\u8868\u3057\u3066\u3044\u307e\u3059\u3002\\n\u5bfe\u8c61\u306f\u540c\u3058\u90e8\u7f72\u306e\u5e0c\u671b\u8005\u3067\u3059\u3002\\n\u67a0\u306f30\u5206\u3067\u3059\u304c\u3001\u5b9f\u8cea\u8a71\u3057\u3066\u3044\u308b\u306e\u306f20\u5206\u304f\u3089\u3044\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\\nk8s\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u7684\u306a\u3053\u3068\u3082\u3084\u308a\u307e\u3057\u305f(\u305d\u306e\u3068\u304d\u306f30\u5206\u3067\u7d42\u308f\u3089\u306a\u3044\u306e\u30672\u56de\u306b\u5206\u3051\u3066\u3084\u308a\u307e\u3057\u305f)\u3002\\n\\n\u8a71\u3057\u305f\u3044\u3053\u3068\u306f\u305f\u304f\u3055\u3093\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u5927\u304d\u306a\u30c8\u30d4\u30c3\u30af\u3068\u3057\u3066\u4ee5\u4e0b\u306e3\u3064\u306b\u7d5e\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n1. k8s(Rancher): \u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3 (\u3044\u307e\u3053\u3053)\\n2. Drone: CI/CD\\n3. Graylog: \u30ed\u30b0\u53ce\u96c6\\n\\n## \u3053\u308c\u307e\u3067\u8a71\u3057\u305f\u3053\u3068\u30fb\u8a71\u3059\u4e88\u5b9a\u306e\u3053\u3068\\n\\nk8s \u306e\u521d\u5fc3\u8005\u304c k8s \u3092\u672c\u756a\u904b\u7528\u3092\u8996\u91ce\u306b\u5165\u308c\u3064\u3064\u691c\u8a3c\u74b0\u5883\u3067\u4f7f\u3063\u3066\u307f\u308b\u3068\u3053\u308d\u307e\u3067\u3092\u76ee\u6307\u3057\u3066\u8a71\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n1. \u306a\u305c k8s \u3092\u4f7f\u3046\u306e\u304b(\u90e8\u7f72\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306b\u5408\u308f\u305b\u3066\u5c0e\u5165\u610f\u7fa9\u3092\u8aac\u660e)\\n2. k8s \u306e\u30ea\u30bd\u30fc\u30b9(Pod, Service, Deployment, etc) \u306b\u3064\u3044\u3066\\n3. k8s, Rancher \u30cf\u30f3\u30ba\u30aa\u30f3(2\u56de) \u7c21\u5358\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u307f\u305f\u308a\\n4. Logging (\u3044\u307e\u3053\u3053)\\n5. \u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\\n6. IP\u5236\u9650\u306e\u304b\u304b\u3063\u305f\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u65b9\u6cd5\\n\\n## \u6bce\u903130\u5206\u3068\u3044\u3046\u30da\u30fc\u30b9\u611f\u306b\u3064\u3044\u3066\\n\\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u914d\u616e\u3057\u307e\u3057\u305f\u3002\\n\\n* \u96c6\u4e2d\u529b\u304c\u7d9a\u304f\u3053\u3068\\n  * 60\u5206\u306f\u9577\u3059\u304e\u308b\\n* \u6301\u7d9a\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\\n  * 1, 2 \u56de\u3084\u3063\u305f\u3060\u3051\u3067\u306f\u610f\u5473\u304c\u306a\u3044\\n  * 30\u5206\u3060\u3051\u306a\u3089\u53c2\u52a0\u3057\u3084\u3059\u3044\\n  * \u6e96\u5099\u306e\u30b3\u30b9\u30c8\u3082\u73fe\u5b9f\u7684\u306a\u7bc4\u56f2\\n  * 30\u5206\u3068\u77ed\u3081\u306a\u306e\u3067\u6bce\u9031\u3084\u308b\u3002\u9694\u9031\u3068\u304b\u3060\u3068\u983b\u5ea6\u304c\u5c11\u306a\u3059\u304e\u308b\u3057\u30011\u56de\u98db\u3076\u30681\u30f6\u6708\u7a7a\u3044\u3066\u3057\u307e\u3046\\n\\n## \u3053\u308c\u307e\u3067\u306e\u7d50\u679c\\n\\n\u7279\u306b\u5927\u304d\u306a\u6210\u679c\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\\nk8s\u306b\u8208\u5473\u3092\u6301\u3061k8s\u3092\u691c\u8a3c\u74b0\u5883\u3067\u4f7f\u3063\u3066\u304f\u308c\u308b\u4eba\u304c\u51fa\u3066\u304d\u307e\u3057\u305f\u3002\\n\u5171\u6709\u4f1a\u304ck8s \u3092\u89e6\u308b\u304d\u3063\u304b\u3051\u306b\u306a\u3063\u305f\u306e\u3060\u3068\u3057\u305f\u3089\u305d\u308c\u3060\u3051\u3067\u3082\u3084\u3063\u3066\u3088\u304b\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001\u81ea\u5206\u81ea\u8eab\u5b66\u3076\u3053\u3068\u3082\u3042\u308a\u307e\u3057\u305f\u3002\\nLogging \u306b\u95a2\u3057\u3066\u81ea\u5206\u306f\u4eca\u307e\u3067 Sidecar pattern \u3092\u4f7f\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001Cluster Level Logging \u3078\u306e\u79fb\u884c\u3092\u691c\u8a0e\u3059\u308b\u304d\u3063\u304b\u3051\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n\u4eca\u5f8c\u3082\u3053\u306e\u53d6\u7d44\u3092(\u7121\u7406\u306e\u306a\u3044\u7bc4\u56f2\u3067)\u7d9a\u3051\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"/rancher-duplicated-user-name","metadata":{"permalink":"/rancher-duplicated-user-name","source":"@site/blog/rancher-duplicated-user-name.md","title":"Rancher\u3067username \u304c\u91cd\u8907\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u5834\u5408\u306e\u89e3\u6d88\u65b9\u6cd5","description":"\u5148\u65e5\u8d77\u3053\u3063\u305f Rancher \u306e\u30c8\u30e9\u30d6\u30eb\u306e\u89e3\u6d88\u65b9\u6cd5\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002","date":"2019-03-16T12:17:05.000Z","formattedDate":"March 16, 2019","tags":[{"label":"rancher","permalink":"/tags/rancher"}],"readingTime":1.815,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Rancher\u3067username \u304c\u91cd\u8907\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u5834\u5408\u306e\u89e3\u6d88\u65b9\u6cd5","date":"2019-03-16T12:17:05.000Z","tags":["rancher"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"\u6bce\u903130\u5206\u306e\u6280\u8853\u5171\u6709\u4f1a","permalink":"/2019-knowledge-share-meeting"},"nextItem":{"title":"Go\u306e\u8a2d\u5b9a\u7ba1\u7406\u3067 viper \u306e\u4ee3\u308f\u308a\u306b confita \u3092\u4f7f\u3046","permalink":"/use-confita"}},"content":"\u5148\u65e5\u8d77\u3053\u3063\u305f Rancher \u306e\u30c8\u30e9\u30d6\u30eb\u306e\u89e3\u6d88\u65b9\u6cd5\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\nRancher \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f v2.1.6 \u3067\u3059\u3002\\nadmin \u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3088\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u3001\u30a8\u30e9\u30fc\u304c\u8d77\u3053\u308a\u307e\u3057\u305f\u3002\\n\u6700\u521d\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9593\u9055\u3063\u3066\u3044\u308b\u306e\u304b\u3068\u601d\u3044\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u3057\u305f\u3082\u306e\u306e\u3001\u89e3\u6d88\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\\nhttps://rancher.com/docs/rancher/v2.x/en/faq/technical/#how-can-i-reset-the-admin-password\\n\\n\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3088\u304f\u898b\u308b\u3068 500 \u30a8\u30e9\u30fc\u3067\u3057\u305f\u3002\u305d\u3053\u3067 rancher \u306e\u30b3\u30f3\u30c6\u30ca\u306e\u30ed\u30b0\u3092\u898b\u307e\u3057\u305f\u3002\\n\\n```\\n[ERROR] API error response 500 for POST /v3-public/localProviders/local?action=login. Cause: found more than one users with username admin\\n```\\n\\nusername \u304c `admin` \u306e\u30e6\u30fc\u30b6\u30fc\u304c\u8907\u6570\u4eba\u3044\u308b\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\\n\u3067\u3042\u308c\u3070\u3001\u30e6\u30fc\u30b6\u30fc\u3092 rename \u306a\u3044\u3057 delete \u3059\u308c\u3070\u89e3\u6d88\u3057\u305d\u3046\u3067\u3059\u3002\\n\u3057\u304b\u3057 Admin \u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u304c admin \u3057\u304b\u3044\u306a\u3044\u305f\u3081\u3001\u30e6\u30fc\u30b6\u30fc\u3092 rename \u3057\u305f\u308a delete \u3059\u308b\u306e\u304c\u96e3\u3057\u3044\u3067\u3059\u3002\\n\\n\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u304b\u3068\u601d\u3063\u3066\u8abf\u3079\u3066\u305f\u3068\u3053\u308d\\nrancher \u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067 kubectl \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3053\u3068\u3067 Rancher \u306e Custom Resource \u3092\u64cd\u4f5c\u3067\u304d\u305d\u3046\u306a\u3053\u3068\u3092\u77e5\u308a\u307e\u3057\u305f\u3002\\n\\nhttps://qiita.com/yamamoto-febc/items/498b911611dd25351ad7\\n\\n\u305d\u3053\u3067 2 \u4eba\u3044\u308b `admin` \u306e\u7247\u65b9\u3092 rename \u3059\u308b\u3053\u3068\u3067\u89e3\u6d88\u3057\u307e\u3057\u305f\u3002\\n\\n```\\n# rancher \u306e\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u308b\\n$ docker exec -ti rancher bash\\n# CRD\u306e\u4e00\u89a7\\n$ kubectl get crd\\n# \u30e6\u30fc\u30b6\u30fc\u4e00\u89a7\\n$ kubectl get users.management.cattle.io -o yaml\\n# rename \u3059\u308b user \u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3059\\n$ kubectl get users.management.cattle.io/<id> -o yaml > /tmp/user.yaml\\n# vi \u304c\u30b3\u30f3\u30c6\u30ca\u306b\u306a\u3044\u305f\u3081 sed \u3067\u5bfe\u5fdc\\n$ sed -e \\"s/username: admin/username: admin2/\\" /tmp/user.yaml | kubectl apply -f -\\n```"},{"id":"/use-confita","metadata":{"permalink":"/use-confita","source":"@site/blog/use-confita.md","title":"Go\u306e\u8a2d\u5b9a\u7ba1\u7406\u3067 viper \u306e\u4ee3\u308f\u308a\u306b confita \u3092\u4f7f\u3046","description":"Golang \u306e\u8a2d\u5b9a\u7ba1\u7406\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3044\u3048\u3070 viper \u304c\u6709\u540d\u3067\u3059\u304c\u3001","date":"2019-02-16T09:38:45.000Z","formattedDate":"February 16, 2019","tags":[{"label":"golang","permalink":"/tags/golang"}],"readingTime":1.795,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Go\u306e\u8a2d\u5b9a\u7ba1\u7406\u3067 viper \u306e\u4ee3\u308f\u308a\u306b confita \u3092\u4f7f\u3046","date":"2019-02-16T09:38:45.000Z","draft":false,"tags":["golang"],"archives":["2019/02"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Rancher\u3067username \u304c\u91cd\u8907\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u5834\u5408\u306e\u89e3\u6d88\u65b9\u6cd5","permalink":"/rancher-duplicated-user-name"},"nextItem":{"title":"JS\u4ee5\u5916\u3067\u306enpm\u306e\u6d3b\u7528","permalink":"/use-npm"}},"content":"Golang \u306e\u8a2d\u5b9a\u7ba1\u7406\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3044\u3048\u3070 [viper](https://github.com/spf13/viper) \u304c\u6709\u540d\u3067\u3059\u304c\u3001\\n[confita](https://github.com/heetch/confita) \u3082\u826f\u3055\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nconfita \u306e\u6a5f\u80fd\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* \u69cb\u9020\u4f53\u306b\u8a2d\u5b9a\u3092\u30de\u30c3\u30d4\u30f3\u30b0\\n* flag \u3084\u74b0\u5883\u5909\u6570\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5bfe\u5fdc\\n* \u8907\u6570\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5bfe\u5fdc\\n\\n\u69cb\u9020\u4f53\u306b\u8a2d\u5b9a\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u3067\u3001https://github.com/go-playground/validator \u306e\u3088\u3046\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u8a2d\u5b9a\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\n\u307e\u305f viper \u306f [v1.3.1](https://github.com/spf13/viper/tree/v1.3.1#reading-config-files) \u306e\u6642\u70b9\u3067\u8907\u6570\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6271\u3044\u306b\u304f\u3044\u3067\u3059\u3002\\n\\n> Viper can search multiple paths, but currently a single Viper instance only supports a single configuration file.\\n\\nk8s \u3067 ConfigMap \u3068 Secret \u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u6271\u3046\u5834\u5408\u3001\u8907\u6570\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6271\u3048\u306a\u3044\u3068\u4e0d\u4fbf\u3067\u3059\u3002\\n\u305d\u306e\u70b9 confita \u306f\u8907\u6570\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u554f\u984c\u306a\u304f\u6271\u3048\u307e\u3059\u3002\\n\\n\u4ee5\u4e0b\u306f\u30d5\u30e9\u30b0\u3067\u6307\u5b9a\u3057\u305f\u8907\u6570\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8a2d\u5b9a\u3092\u8aad\u307f\u8fbc\u3080\u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\\n\\n```go\\nimport (\\n\\t\\"context\\"\\n\\n\\t\\"gopkg.in/go-playground/validator.v9\\"\\n\\n\\t\\"github.com/heetch/confita\\"\\n\\t\\"github.com/heetch/confita/backend\\"\\n\\t\\"github.com/heetch/confita/backend/file\\"\\n\\tflag \\"github.com/spf13/pflag\\"\\n)\\n\\nfunc loadConfig(ctx context.Context) (Config, error) {\\n\\tcps := flag.StringSliceP(\\"config\\", \\"c\\", nil, \\"configuration file path\\")\\n\\tflag.Parse()\\n\\tfileBackends := []backend.Backend{}\\n\\tfor _, p := range *cps {\\n\\t\\tfileBackends = append(fileBackends, file.NewBackend(p))\\n\\t}\\n\\n\\tloader := confita.NewLoader(fileBackends...)\\n\\tcfg := Config{LogLevel: \\"info\\"}\\t// default value\\n\\tif err := loader.Load(ctx, &cfg); err != nil {\\n\\t\\treturn cfg, err\\n\\t}\\n\\tvalidate := validator.New()\\n\\tif err := validate.Struct(cfg); err != nil {\\n\\t\\treturn cfg, err\\n\\t}\\n\\treturn cfg, nil\\n}\\n```\\n\\n\u4ee5\u4e0a\u3001\u7c21\u5358\u306a\u7d39\u4ecb\u3067\u3057\u305f\u3002\\nviper \u4ee5\u5916\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u63a2\u3057\u3066\u3044\u308b\u4eba\u306f\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002"},{"id":"/use-npm","metadata":{"permalink":"/use-npm","source":"@site/blog/use-npm.md","title":"JS\u4ee5\u5916\u3067\u306enpm\u306e\u6d3b\u7528","description":"npm \u306f Node.js \u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3067\u3059\u304c\u3001\u81ea\u5206\u306fJS\u4ee5\u5916\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082\u4f7f\u3048\u308b\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002","date":"2019-02-14T12:34:22.000Z","formattedDate":"February 14, 2019","tags":[{"label":"npm","permalink":"/tags/npm"}],"readingTime":5.73,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"JS\u4ee5\u5916\u3067\u306enpm\u306e\u6d3b\u7528","date":"2019-02-14T12:34:22.000Z","draft":false,"tags":["npm"],"archives":["2019/02"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Go\u306e\u8a2d\u5b9a\u7ba1\u7406\u3067 viper \u306e\u4ee3\u308f\u308a\u306b confita \u3092\u4f7f\u3046","permalink":"/use-confita"},"nextItem":{"title":"Go \u306e\u597d\u304d\u306a\u3068\u3053\u308d","permalink":"/golang-good-point"}},"content":"npm \u306f Node.js \u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3067\u3059\u304c\u3001\u81ea\u5206\u306fJS\u4ee5\u5916\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082\u4f7f\u3048\u308b\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\u5b9f\u969b\u3001Go\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001OSS\u3001ansible role, playbook \u306a\u3069\u7a2e\u985e\u3092\u554f\u308f\u305a\u3001\u81ea\u5206\u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u591a\u304f\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\\n\u305f\u3060\u3001Go\u306eOSS\u3067 npm \u4f7f\u3063\u3066\u3044\u308b\u306e\u306f\u81ea\u5206\u4ee5\u5916\u3067\u898b\u305f\u3053\u3068\u306f\u306a\u3044\u3067\u3059\u3057\u3001\\n\u6b63\u76f4\u3042\u307e\u308a\u8cdb\u540c\u306f\u3055\u308c\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u8003\u3048\u65b9\u3082\u3042\u308b\u3068\u601d\u3063\u3066\u3044\u305f\u3060\u3051\u305f\u3089\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nnpm \u3092\u4f7f\u3046\u7406\u7531\u306f\\n\\n* Node\u88fd\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3046\u305f\u3081\\n* npm scripts \u3092\u4f7f\u3046\u305f\u3081 (\u4eca\u56de\u66f8\u304d\u305f\u3044\u306e\u306f\u3053\u3063\u3061)\\n\\n\u306e2\u3064\u3042\u308a\u307e\u3059\u3002\\n\\n## Node\u88fd\u306e\u30c4\u30fc\u30eb\\n\\n* [husky](https://github.com/typicode/husky): Git Hook\u3092\u8a2d\u5b9a\\n* [commitlint](https://conventional-changelog.github.io/commitlint/#/): commit \u30e1\u30c3\u30bb\u30fc\u30b8\u306elint\\n* [standard-version](https://github.com/conventional-changelog/standard-version): \u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306b\u3088\u3063\u3066 Change Log \u3092\u751f\u6210\\n\\n\u306a\u3069\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\\nNode\u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5909\u5316\u304c\u901f\u304f\u3001\u4e92\u63db\u6027\u304c\u58ca\u308c\u305f\u308a\u3068\u304b\u3082\u591a\u3044\u5370\u8c61\u3067\u3059\u304c\u3001\\n\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u304f\u3066\u3082\u30ea\u30dd\u30b8\u30c8\u30ea\u3054\u3068\u306b install \u51fa\u6765\u308b(package.json\u3067\u7ba1\u7406\u3067\u304d\u308b)\u306e\u3067\u305d\u306e\u70b9\u306f(\u7279\u306b\u30c1\u30fc\u30e0\u958b\u767a\u3067\u306f)\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## npm scripts\\n\\nnpm scripts \u306b\u3088\u3063\u3066\u305d\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u958b\u767a\u306b\u4f7f\u3046\u30b3\u30de\u30f3\u30c9\u7fa4\u3092\u7ba1\u7406\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u81ea\u5206\u306f\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/gomic/blob/v0.5.7/package.json\\n\\n\u306a\u306b\u3082\u30c4\u30fc\u30eb\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306b\u6bd4\u3079\u3001\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u30c1\u30fc\u30e0\u5168\u4f53\u3067\u30b3\u30de\u30f3\u30c9\u3092\u7d71\u4e00\u3067\u304d\u307e\u3059\u3057\u3001\u4e00\u9023\u306e\u30b3\u30de\u30f3\u30c9\u3092\u30b9\u30af\u30ea\u30d7\u30c8\u5316\u3057\u3066 npm scripts \u3067\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306a\u3069\u3001\u81ea\u52d5\u5316\u3082\u4fc3\u9032\u3055\u308c\u307e\u3059\u3002\\n\\n\u3054\u304f\u7c21\u5358\u306a\u81ea\u52d5\u5316\u306e\u4f8b\u3067\u3059\u304c\u3001tag \u3092\u6253\u3064\u3068\u540c\u6642\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e2d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u3092\u66f4\u65b0\u3059\u308b\u306e\u3092 `npm run tag v1.1.0` \u3068\u3044\u3063\u305f\u30b3\u30de\u30f3\u30c9\u3067\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067 tag \u3068version\u30b3\u30de\u30f3\u30c9\u3067\u51fa\u529b\u3055\u308c\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9055\u3046\u306a\u3093\u3066\u3053\u3068\u3092\u9632\u3050\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/gomic/blob/v0.5.7/scripts/tag.sh\\n\\n\u307e\u305f\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3088\u3063\u3066\u52d5\u4f5c\u304c\u5909\u308f\u308b\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u306f npm scripts \u306b\u3088\u3063\u3066\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u7d71\u4e00\u3067\u304d\u307e\u3059\u3002\\n\u4f8b\u3048\u3070 `gofmt` \u306f `-s` \u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u6709\u7121\u3067\u7d50\u679c\u304c\u5909\u308f\u308a\u307e\u3059\u3002\\n\\n## Make \u3067\u3044\u3044\u306e\u3067\u306f\\n\\nnpm scripts \u3067\u306f\u306a\u304f\u3066 Make \u306e\u307b\u3046\u304c\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u306e\u3068\u3044\u3046\u610f\u898b\u3082\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n* npm \u304c\u7279\u5b9a\u306e\u8a00\u8a9e\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306a\u306e\u306b\u5bfe\u3057\u3001Make\u306f\u3088\u308a\u6c4e\u7528\u7684\u306a\u30c4\u30fc\u30eb\u306a\u306e\u3067\u3001Node\u4ee5\u5916\u3067\u306fMake\u306e\u307b\u3046\u304c\u9069\u5207\u3067\u306f\\n* Make\u306e\u307b\u3046\u304cnpm scripts\u3088\u308a\u591a\u6a5f\u80fd\\n  * \u4f9d\u5b58\u95a2\u4fc2\u306e\u3042\u308b\u30bf\u30b9\u30af\u3092\u7ba1\u7406\u3059\u308b\u5834\u5408\u306fMake\u306e\u307b\u3046\u304c\u826f\u3044\\n* package.json\u306fjson\u306a\u306e\u3067\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u3051\u306a\u3044\u306e\u304c\u4e0d\u4fbf\\n\\n\u305f\u3060\u3001Make\u3088\u308anpm scripts\u306e\u307b\u3046\u304c\u826f\u3044\u3068\u611f\u3058\u3066\u3044\u308b\u90e8\u5206\u304c\u5c11\u306a\u304b\u3089\u305a\u3042\u308a\u307e\u3059\u3002\\n\\n* Make\u306b\u306f\u6d3e\u751f\u304c\u3042\u308b(BSD, GNU, etc)\\n* Make\u306f\u8907\u96d1\u3059\u304e\u308b(1\u518a\u306e\u672c\u306b\u306a\u308b\u304f\u3089\u3044)\\n  * npm scripts \u306f\u6a5f\u80fd\u304c\u5c11\u306a\u3044\u5206\u3001\u3068\u3066\u3082\u30b7\u30f3\u30d7\u30eb\\n* npm scripts \u306f\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f9d\u5b58\u3057\u306a\u3044(package.json\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u5b9f\u884c\u3055\u308c\u308b)\\n  * Make\u3067\u306f\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bMakefile \u304c\u306a\u3044\u5834\u5408\u3001Makefile\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\\n* Make\u306f\u5f15\u6570\u304c\u6e21\u3057\u3065\u3089\u3044(make FOO=foo \u307f\u305f\u3044\u306b\u5f15\u6570\u540d\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b)\\n\\n\u305d\u306e\u305f\u3081\u3001\u81ea\u5206\u306f npm scripts \u3092\u4f7f\u3063\u3066\u3044\u307e\u3059(husky\u3068\u304b\u3092\u4f7f\u3046\u304b\u3089\u3068\u3044\u3046\u306e\u3082\u3042\u308a\u307e\u3059\u304c)\u3002\\n\\n\u305d\u308c\u4ee5\u5916\u306e\u30c4\u30fc\u30eb\u3068\u306e\u6bd4\u8f03\u306f\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\nnpm \u306f\u304b\u306a\u308a\u4e00\u822c\u7684\u306a\u30c4\u30fc\u30eb\u3067\u3042\u308a\u3001\u305d\u306e\u3078\u3093\u306e\u30c4\u30fc\u30eb\u3088\u308a\u306f\u5c0e\u5165\u969c\u58c1\u304c\u4f4e\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## npm scripts \u306e\u95a2\u6570\u30fb\u30a8\u30a4\u30ea\u30a2\u30b9\\n\\nnpm scripts \u3092\u3088\u304f\u4f7f\u3046\u5834\u5408\u3001\u95a2\u6570\u3084\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u4fbf\u5229\u3067\u3059\u3002\\n\\n```sh\\nnx() {\\n  npm --silent run $1 -- ${@:2}\\n}\\nalias npm=\\"npm --silent\\"\\n```\\n\\n`--silent` \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u3001\u30ed\u30b0\u30ec\u30d9\u30eb\u306e\u8a2d\u5b9a\u3067\u3059\u3002 https://docs.npmjs.com/misc/config#loglevel\\n\u30ed\u30b0\u30ec\u30d9\u30eb\u3092\u7279\u306b\u6307\u5b9a\u3057\u306a\u3044\u3068\u3001Node\u306b\u95a2\u3059\u308b\u30ed\u30b0\u3082\u51fa\u529b\u3055\u308c\u3066\u3057\u307e\u3044\u3001\u898b\u901a\u3057\u304c\u60aa\u304f\u306a\u308a\u307e\u3059\u3002\\n\\n```\\n$ /usr/local/bin/npm run vet\\n\\n> @ vet /Users/suzuki-shunsuke/repos/src/github.com/suzuki-shunsuke/gomic\\n> go vet ./...\\n\\n# github.com/suzuki-shunsuke/gomic/internal/usecase/gencmd/output\\ninternal/usecase/gencmd/output/output.go:9:14: undefined: imports\\nnpm ERR! code ELIFECYCLE\\nnpm ERR! errno 2\\nnpm ERR! @ vet: `go vet ./...`\\nnpm ERR! Exit status 2\\nnpm ERR!\\nnpm ERR! Failed at the @ vet script.\\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\\n\\nnpm ERR! A complete log of this run can be found in:\\nnpm ERR!     /Users/suzuki-shunsuke/.npm/_logs/2019-02-14T22_44_50_065Z-debug.log\\n```\\n\\n`--silent` \u3092\u3064\u3051\u308b\u3068\u3059\u3063\u304d\u308a\u3057\u307e\u3059\u3002\\n\\n```\\n$ /usr/local/bin/npm --silent run vet\\n# github.com/suzuki-shunsuke/gomic/internal/usecase/gencmd/output\\ninternal/usecase/gencmd/output/output.go:9:14: undefined: imports\\n```\\n\\n\u305f\u3060\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3064\u3051\u308b\u3068\u3001npm scripts \u3067\u9593\u9055\u3063\u305f\u30b3\u30de\u30f3\u30c9\u3092\u6307\u5b9a\u3057\u3066\u3082\u306a\u3093\u306e\u30a8\u30e9\u30fc\u3082\u51fa\u529b\u3057\u3066\u304f\u308c\u306a\u304f\u306a\u308b\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},{"id":"/golang-good-point","metadata":{"permalink":"/golang-good-point","source":"@site/blog/golang-good-point.md","title":"Go \u306e\u597d\u304d\u306a\u3068\u3053\u308d","description":"\u81ea\u5206\u306f 2017/8\u9803(\u66d6\u6627)\u304b\u3089\u30e1\u30a4\u30f3\u3067\u66f8\u304f\u8a00\u8a9e\u3092 Python \u304b\u3089 Go \u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002","date":"2019-02-10T08:49:58.000Z","formattedDate":"February 10, 2019","tags":[{"label":"golang","permalink":"/tags/golang"}],"readingTime":2.635,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Go \u306e\u597d\u304d\u306a\u3068\u3053\u308d","date":"2019-02-10T08:49:58.000Z","tags":["golang"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"JS\u4ee5\u5916\u3067\u306enpm\u306e\u6d3b\u7528","permalink":"/use-npm"},"nextItem":{"title":"go-error-handling-logging-practice v0.2","permalink":"/golang-logging-error-handling-practice-0.2.0"}},"content":"\u81ea\u5206\u306f 2017/8\u9803(\u66d6\u6627)\u304b\u3089\u30e1\u30a4\u30f3\u3067\u66f8\u304f\u8a00\u8a9e\u3092 Python \u304b\u3089 Go \u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\\nGo\u3092\u66f8\u304d\u59cb\u3081\u3066\u5272\u3068\u65e9\u3044\u6bb5\u968e\u3067Go\u304c\u4e00\u756a\u597d\u304d\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\u305d\u3053\u3067\u306a\u3093\u3067 Go \u304c\u597d\u304d\u306a\u306e\u304b\u3068\u3044\u3046\u3053\u3068\u3092\u9811\u5f35\u3063\u3066\u8a00\u8a9e\u5316\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u82e5\u5e72\u4ed6\u306e\u8a00\u8a9e\u3068\u6bd4\u8f03\u3059\u308b\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u6c7a\u3057\u3066\u4ed6\u306e\u8a00\u8a9e\u3092\u30c7\u30a3\u30b9\u3063\u305f\u308a\u3001\\n\u4ed6\u306e\u8a00\u8a9e\u3088\u308a\u512a\u308c\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u304c\u8a00\u3044\u305f\u3044\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3054\u4e86\u627f\u304f\u3060\u3055\u3044\u3002\\n\\n* \u4f9d\u5b58\u3059\u308b\u3082\u306e\u304c\u5c0f\u3055\u304f\u3001\u30d0\u30a4\u30ca\u30ea1\u3064\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3060\u3051\u3067\u826f\u3044\\n  * Prometheus \u306e exporter \u3068\u304b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u7c21\u5358\\n  * Docker Image\u3082\u6700\u5c0f\u9650\u306b\u306a\u308b\\n* \u9759\u7684\u578b\u4ed8\u3051\\n  * \u30d3\u30eb\u30c9\u51fa\u6765\u3066\u3044\u308b\u6642\u70b9\u3067\u4e00\u5b9a\u306e\u4fe1\u983c\u6027\u304c\u62c5\u4fdd\u3055\u308c\u3066\u3044\u308b\\n  * \u3088\u304f\u77e5\u3089\u306a\u3044\u30b3\u30fc\u30c9\u3092\u8aad\u3093\u3060\u308a\u4fee\u6b63\u3059\u308b\u3068\u304d\u3068\u304b\u3060\u3044\u3076\u6709\u308a\u96e3\u3044\\n* GoDoc\u304c\u7d20\u6674\u3089\u3057\u3044\\n  * \u4f55\u3082\u3057\u306a\u304f\u3066\u3082\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u51fa\u6765\u4e0a\u304c\u3063\u3066\u3044\u308b\\n* \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u516c\u958b\u304c\u5bb9\u6613\\n  * GitHub\u306b\u516c\u958b\u3059\u308b\u3060\u3051\\n  * npm \u3084 pypi \u306e\u3088\u3046\u306a\u30ec\u30b8\u30b9\u30c8\u30ea\u304c\u306a\u3044\u306e\u3067\u697d\\n* go test \u3068\u304b go vet, gofmt \u307f\u305f\u3044\u306b\u6a19\u6e96\u30c4\u30fc\u30eb\u304c\u63c3\u3063\u3066\u3044\u308b\\n* \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u3067\u60a9\u3080\u5fc5\u8981\u304c\u306a\u3044\\n* lint\u30c4\u30fc\u30eb\u304c\u5145\u5b9f\u3057\u3066\u3044\u308b\\n  * gometalinter \u3068\u304b\u4f7f\u3063\u3066\u304a\u3051\u3070 OK\\n  * lint\u3067\u304d\u308b\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u306e\u306b\u305d\u3053\u307e\u3067\u9811\u5f35\u3089\u306a\u304f\u3066\u826f\u3044\\n* \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u304c\u6697\u9ed9\u7684\u306b\u7701\u7565\u3067\u304d\u306a\u3044\u306e\u3067\u4fe1\u983c\u6027\u304c\u9ad8\u3044\\n  * Go\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u5acc\u3044\u3063\u3066\u4eba\u3082\u3044\u308b\u3057\u3001v2\u3067\u6539\u5584\u3055\u308c\u308b\u3063\u3066\u8a71\u3082\u805e\u304f\u3051\u3069\u3001\u81ea\u5206\u306f\u3080\u3057\u308d\u597d\u304d(\u9762\u5012\u306a\u306e\u306f\u7406\u89e3\u3067\u304d\u308b\u3051\u3069)\\n* \u8a00\u8a9e\u4ed5\u69d8\u304c\u30b7\u30f3\u30d7\u30eb(\u5ba2\u89b3\u7684\u306a\u6839\u62e0\u306f\u306a\u3044\u3057\u3001\u96e3\u3057\u3044\u90e8\u5206\u3082\u3042\u308b\u3051\u3069\u3001\u305d\u3093\u306a\u6c17\u304c\u3059\u308b)\\n  * \u30e1\u30bf\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u4f7f\u3063\u305f\u3001\u9b54\u8853\u7684\u306a\u30b3\u30fc\u30c9\u306b\u306a\u308a\u306b\u304f\u3044\\n* interface \u4f7f\u3063\u3066\u30b3\u30fc\u30c9\u3092\u758e\u7d50\u5408\u306b\u3059\u308b\u306e\u304c\u66f8\u3044\u3066\u3066\u6c17\u6301\u3061\u3044\u3044\\n* \u4e26\u5217\u51e6\u7406\u304c\u66f8\u304d\u3084\u3059\u3044"},{"id":"/golang-logging-error-handling-practice-0.2.0","metadata":{"permalink":"/golang-logging-error-handling-practice-0.2.0","source":"@site/blog/golang-logging-error-handling-practice-0.2.0.md","title":"go-error-handling-logging-practice v0.2","description":"\u4ee5\u524d Golang \u306e\u30ed\u30ae\u30f3\u30b0\u30fb\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3057\u305f\u3002","date":"2019-02-01T13:26:13.000Z","formattedDate":"February 1, 2019","tags":[{"label":"golang","permalink":"/tags/golang"}],"readingTime":2.21,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"go-error-handling-logging-practice v0.2","date":"2019-02-01T13:26:13.000Z","tags":["golang"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Go \u306e\u597d\u304d\u306a\u3068\u3053\u308d","permalink":"/golang-good-point"},"nextItem":{"title":"Terraform Provider\u3067 import \u3092\u5b9f\u88c5\u3059\u308b\u65b9\u6cd5","permalink":"/terraform-provider-graylog-import"}},"content":"\u4ee5\u524d Golang \u306e\u30ed\u30ae\u30f3\u30b0\u30fb\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3057\u305f\u3002\\n\\n* https://suzuki-shunsuke.github.io/golang-logging-error-handling-practice/\\n* https://github.com/suzuki-shunsuke/go-error-handling-logging-practice\\n\\n\u305d\u308c\u3092\u5c11\u3057 v0.1 \u304b\u3089 v0.2 \u306b\u4e92\u63db\u6027\u3092\u58ca\u3059\u5f62\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3088\u3046\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\n\u672c\u8a18\u4e8b\u3067\u306f\u305d\u306e\u5909\u66f4\u70b9\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002\\n\\n## \u5909\u66f4\u70b9\\n\\n**\u95a2\u6570\u306e\u30a8\u30e9\u30fc\u306b\u60c5\u5831\u3092\u4ed8\u4e0e\u3059\u308b\u8cac\u52d9\u3092\u95a2\u6570\u306b\u5272\u308a\u5f53\u3066\u3066\u3044\u305f\u3082\u306e\u3092\u3001\u547c\u3073\u51fa\u3057\u5143\u306b\u5272\u308a\u5f53\u3066\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002**\\n\\n\u5177\u4f53\u7684\u306b\u306f\u5143\u3005\\n\\n```go\\nfunc createUser(name string, age int) error {\\n\\treturn errlog.Wrap(checkName(name), logrus.Fields{\\"age\\": age}, \\"failed to create a user\\")\\n}\\n```\\n\\n\u3060\u3063\u305f\u3082\u306e\u304c\\n\\n```go\\nfunc createUser(name string, age int) error {\\n\\treturn errlog.Wrap(checkName(name), nil, \\"user name is invalid\\")\\n}\\n```\\n\\n\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n## \u5909\u66f4\u7406\u7531\\n\\n\u30e1\u30bf\u60c5\u5831\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u306f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002\\n\u4e0a\u8a18\u306e\u4f8b\u3060\u3068\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u3044\u3046\u30e1\u30bf\u60c5\u5831\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u306f `name` \u3088\u308a `user_name` \u3084 `admin_name`, `owner_name` \u3068\u3057\u305f\u307b\u3046\u304c\u9069\u5207\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u305d\u308c\u306f\u95a2\u6570\u5185\u90e8\u3067\u306f\u5206\u304b\u3089\u305a\u3001\u547c\u3073\u51fa\u3057\u5143\u3067\u306a\u3044\u3068\u5206\u304b\u308a\u307e\u305b\u3093\u3002\u547c\u3073\u51fa\u3057\u5143\u3067\u306a\u3044\u3068\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u306e\u885d\u7a81\u304c\u907f\u3051\u3089\u308c\u306a\u3044\u3053\u3068\u3082\u3042\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u95a2\u3057\u3066\u3082\u540c\u69d8\u306e\u3053\u3068\u304c\u8a00\u3048\u307e\u3059\u3002\\n\u307e\u305f\u3001\u5143\u3005 v0.1 \u3067\u306f\u30e6\u30fc\u30b6\u30fc\u304c\u5b9a\u7fa9\u3057\u305f\u95a2\u6570\u3068\\n\\n* \u6a19\u6e96\u95a2\u6570\u3084\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3069\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5916\u90e8\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u95a2\u6570\\n* interface \u306e\u95a2\u6570\u3084\u30e1\u30bd\u30c3\u30c9\\n\\n\u3092\u533a\u5225\u3057\u3001\u524d\u8005\u3067\u306f\u95a2\u6570\u5074\u3067\u30a8\u30e9\u30fc\u306b\u60c5\u5831\u3092\u4ed8\u4e0e\u3055\u305b\u308b\u4e00\u65b9\u3001\u5f8c\u8005\u3067\u306f\u547c\u3073\u51fa\u3057\u5143\u3067\u60c5\u5831\u3092\u4ed8\u4e0e\u3055\u305b\u308b\u3068\u3044\u3046\u3075\u3046\u306b\u3057\u3066\u3044\u307e\u3057\u305f\u3002\\n\\nv0.2 \u3067\u306f\u4e21\u8005\u3092\u533a\u5225\u305b\u305a\u3001\u3069\u3061\u3089\u306e\u5834\u5408\u3067\u3082\u547c\u3073\u51fa\u3057\u5143\u306b\u4ed8\u4e0e\u3055\u305b\u308b\u3068\u3044\u3046\u3075\u3046\u306b\u3059\u308b\u3053\u3068\u3067\u3088\u308a\u30eb\u30fc\u30eb\u304c\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308a\u307e\u3059\u3002"},{"id":"/terraform-provider-graylog-import","metadata":{"permalink":"/terraform-provider-graylog-import","source":"@site/blog/terraform-provider-graylog-import.md","title":"Terraform Provider\u3067 import \u3092\u5b9f\u88c5\u3059\u308b\u65b9\u6cd5","description":"terraform provider graylog \u3067 alert condition \u3068 stream rule \u306e import \u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002","date":"2019-01-25T13:38:28.000Z","formattedDate":"January 25, 2019","tags":[{"label":"terraform","permalink":"/tags/terraform"},{"label":"graylog","permalink":"/tags/graylog"}],"readingTime":1.955,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Terraform Provider\u3067 import \u3092\u5b9f\u88c5\u3059\u308b\u65b9\u6cd5","date":"2019-01-25T13:38:28.000Z","draft":false,"tags":["terraform","graylog"],"archives":["2019/01"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"go-error-handling-logging-practice v0.2","permalink":"/golang-logging-error-handling-practice-0.2.0"},"nextItem":{"title":"Github\u3092Free Plan\u306b\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u3057\u305f","permalink":"/downgrade-github-plan"}},"content":"terraform provider graylog \u3067 alert condition \u3068 stream rule \u306e import \u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\\n\\n* https://github.com/suzuki-shunsuke/go-graylog/pull/59\\n* https://github.com/suzuki-shunsuke/go-graylog/pull/60\\n\\n\u305d\u3053\u3067 import \u3092\u5b9f\u88c5\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nterraform \u3067\u30ea\u30bd\u30fc\u30b9\u3092import\u3059\u308b\u306b\u306f\u30ea\u30bd\u30fc\u30b9\u304cimport\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n[schema.Resource \u306e Importer \u30d5\u30a3\u30fc\u30eb\u30c9](https://godoc.org/github.com/hashicorp/terraform/helper/schema#Resource)\u3067\u3059\u306d\u3002\u30ea\u30bd\u30fc\u30b9\u304cID\u3060\u3051\u3067Get\u51fa\u6765\u308b\u5834\u5408\u3001[schema.ImportStatePassthrough](https://godoc.org/github.com/hashicorp/terraform/helper/schema#ImportStatePassthrough)\u3092\u4f7f\u3048\u3070\u7d42\u308f\u308a\u3067\u3059\u3002\\n\u4e00\u65b9\u3001Graylog\u306ealert condition \u3084 stream rule \u306fID\u3060\u3051\u3067\u306a\u304f\u3001stream id \u3082\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\\nterraform import \u30b3\u30de\u30f3\u30c9\u306f1\u3064\u306e\u5f15\u6570\u3057\u304b\u53d6\u3089\u306a\u3044\u305f\u3081\u3001\u30b5\u30dd\u30fc\u30c8\u3067\u304d\u306a\u3044\u306e\u3067\u306f\uff1f\u3068\u4ee5\u524d\u307e\u3067\u601d\u3063\u3066\u3044\u307e\u3057\u305f\u3002\\n\u305d\u3046\u3044\u3063\u305f\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306bStateFunc\u3092\u5b9f\u88c5\u3059\u308c\u3070\u30b5\u30dd\u30fc\u30c8\u3067\u304d\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-graylog/pull/59/commits/baee1165f49d2bc21b6ea7551ceff6b7daf01543#diff-f41be2a3640efd12ad4e808d77c5c8d5\\n\\n```\\n# \\"/\\" \u3067\u533a\u5207\u3063\u3066 stream id \u3068 ID \u3092\u6e21\u3059\\n$ terraform import graylog_alarm_callback.test 5bb1b4b5c9e77bbbbbbbbbbb/5c4acaefc9e77bbbbbbbbbbb\\n```\\n\\n\u533a\u5207\u308a\u6587\u5b57\u306f\u4f55\u3067\u3082\u826f\u3044\u306e\u3067\u3057\u3087\u3046\u304c\u3001\u516c\u5f0f\u306eprovider \u304c \\"/\\" \u3067\u533a\u5207\u3063\u3066\u3044\u305f\u306e\u3067\u305d\u308c\u306b\u5f93\u3046\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://www.terraform.io/docs/providers/google/r/spanner_database.html#import\\n\\nhttps://godoc.org/github.com/hashicorp/terraform/helper/schema#ImportStatePassthrough \u306e\u5b9f\u88c5\u3092\u898b\u3066\u307f\u308c\u3070\u5206\u304b\u308a\u307e\u3059\u304c\u3001\\nStateFunc \u306e\u4e2d\u3067\u306f GET API \u3092\u53e9\u3044\u3066\u30ea\u30bd\u30fc\u30b9\u3092\u53d6\u5f97\u3057\u305f\u308a\u306f\u3057\u307e\u305b\u3093\u3002\\n`terraform import` \u30b3\u30de\u30f3\u30c9\u306e\u6a19\u6e96\u51fa\u529b\u3092\u898b\u308b\u3068\u5206\u304b\u308a\u307e\u3059\u304c refresh \u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u305d\u3053\u3067GET\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\\nStateFunc \u306f *schema.ResourceData \u306e\u914d\u5217\u3092\u8fd4\u3057\u307e\u3059\u304c\u3001\u3053\u308c\u306f1\u5ea6\u306eGET\u3067\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306aAPI\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u305f\u3081\u306e\u3088\u3046\u3067\u3059\u3002\\n\\n\u4ee5\u4e0a\u3001terraform import \u306e\u5b9f\u88c5\u65b9\u6cd5\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002"},{"id":"/downgrade-github-plan","metadata":{"permalink":"/downgrade-github-plan","source":"@site/blog/downgrade-github-plan.md","title":"Github\u3092Free Plan\u306b\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u3057\u305f","description":"GitHub \u306e\u30d7\u30e9\u30f3\u4f53\u7cfb\u304c\u5909\u308f\u308a\u3001\u7121\u6599\u30d7\u30e9\u30f3\u3067\u3082\u7121\u5236\u9650\u3067private repository\u304c\u4f5c\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002","date":"2019-01-20T03:27:26.000Z","formattedDate":"January 20, 2019","tags":[{"label":"github","permalink":"/tags/github"}],"readingTime":3.35,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Github\u3092Free Plan\u306b\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u3057\u305f","date":"2019-01-20T03:27:26.000Z","tags":["github"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Terraform Provider\u3067 import \u3092\u5b9f\u88c5\u3059\u308b\u65b9\u6cd5","permalink":"/terraform-provider-graylog-import"},"nextItem":{"title":"Go \u306b\u304a\u3051\u308b\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30ed\u30ae\u30f3\u30b0\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","permalink":"/golang-logging-error-handling-practice"}},"content":"GitHub \u306e\u30d7\u30e9\u30f3\u4f53\u7cfb\u304c\u5909\u308f\u308a\u3001\u7121\u6599\u30d7\u30e9\u30f3\u3067\u3082\u7121\u5236\u9650\u3067private repository\u304c\u4f5c\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\nhttps://github.blog/2019-01-07-new-year-new-github/\\n\\n\u305d\u3053\u3067\u7121\u6599\u30d7\u30e9\u30f3\u306b\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n* https://help.github.com/articles/downgrading-your-github-billing-plan/\\n* https://blog.jnito.com/entry/2019/01/09/081913\\n\\n\u7121\u6599\u30d7\u30e9\u30f3\u3067\u306fwiki\u306fpublic repository\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u306e\u3067\u3001\\nprivate repository \u306e wiki \u3092 \u79fb\u884c\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\nprivate \u306a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9(\u30b5\u30fc\u30d3\u30b9)\u306e\u305f\u3081\u306ewiki\u3067\u306f\u306a\u304f\u3001\\n\u500b\u4eba\u7684\u306a\u30e1\u30e2\u304c\u66f8\u3044\u3066\u3042\u308b\u3060\u3051\u3060\u3063\u305f\u306e\u3067\u79fb\u884c\u3059\u308b\u3053\u3068\u306b\u7279\u306b\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\\n## \u5168 private repository \u306e wiki \u3092 clone\\n\\n\u305d\u3053\u3067\u307e\u305a\u306f\u305d\u3046\u3044\u3063\u305f wiki \u3092 clone \u3057\u3066\u4e00\u3064\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u307e\u3068\u3081\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/foo \u306e wiki \u306f\\nhttps://github.com/suzuki-shunsuke/foo.wiki \u3067 clone \u3067\u304d\u307e\u3059\u3002\\n\\n\u6b21\u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001private repository\u306ewiki\u3092\u5168\u90e8clone\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://developer.github.com/v3/repos/#list-your-repositories\\n\\n```sh\\ncurl \\"https://api.github.com/user/repos?access_token=$GITHUB_TOKEN&visibility=private\\" | jq -r \'.[].html_url\' | xargs -I{} -n 1 git clone {}.wiki\\n```\\n\\nwiki\u304c\u5b58\u5728\u3057\u306a\u3044\u3082\u306e\u306b\u95a2\u3057\u3066\u306f clone \u306b\u5931\u6557\u3057\u307e\u3059\u3002\\nAPI \u3067 wiki \u306e\u30ea\u30b9\u30c8\u304c\u53d6\u5f97\u3067\u304d\u308b\u3068\u826f\u304b\u3063\u305f\u3093\u3067\u3059\u304c\u3001\\nwiki\u306b\u95a2\u3059\u308bAPI\u306f\u306a\u3055\u305d\u3046\u3067\u3059\u3002\\n\\n\u307e\u305f `/user/repos` API \u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306e `has_wiki` \u306fwiki\u304c\u5b58\u5728\u3057\u306a\u304f\u3066\u3082\u3001wiki\u304c\u7121\u52b9\u5316\u3055\u308c\u3066\u306a\u3051\u308c\u3070 true \u306a\u3088\u3046\u3067\u3059\u3002\\n\\n## wiki \u3092 notable \u306b\u79fb\u690d\\n\\nclone \u3057\u305f wiki \u3092 [notable](https://github.com/fabiospampinato/notable) \u306b\u79fb\u690d\u3057\u307e\u3059\u3002\\n\\nnotable \u306f [moon gift \u3067\u6700\u8fd1\u7d39\u4ecb\u3055\u308c\u3066\u3044\u3066\u826f\u3055\u305d\u3046\u3060\u3063\u305f](https://www.moongift.jp/2019/01/notable-%E6%B7%BB%E4%BB%98%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%82%E4%BD%BF%E3%81%88%E3%82%8Bmarkdown%E8%A8%98%E6%B3%95%E3%81%AE%E3%83%A1%E3%83%A2/)\u306e\u3067\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\\n\\nHugo \u306b\u79fb\u690d\u3057\u3066\u3082\u826f\u304b\u3063\u305f\u306e\u3067\u3059\u304c notable \u304c\u6c17\u306b\u306a\u3063\u305f\u306e\u3067 notable \u306b\u3057\u307e\u3057\u305f\u3002\\nnotable \u3092\u4f7f\u3063\u3066\u307f\u3066\u30c0\u30e1\u305d\u3046\u3060\u3063\u305f\u3089 Hugo \u3082\u691c\u8a0e\u3057\u307e\u3059\u3002\\n\\nHugo \u306b\u6bd4\u3079\u3066notable\u304c\u826f\u3044\u3068\u3053\u308d\u306f\\n\\n* \u30b7\u30f3\u30bf\u30af\u30b9\u30cf\u30a4\u30e9\u30a4\u30c8\\n* tag\u306b\u3088\u308b\u7d5e\u308a\u8fbc\u307f\\n* \u691c\u7d22\\n\\n\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067(\u7279\u306b\u624b\u3092\u52a0\u3048\u305f\u308a\u3057\u306a\u304f\u3066\u3082)\u3044\u3044\u611f\u3058\u306b\u4f7f\u3048\u308b\u3053\u3068\u3067\u3059\u3002\\n\\nnotable \u306e data directory \u3092 private repository \u3067\u7ba1\u7406\u3057\u307e\u3059(Dropbox \u306a\u3069\u306e\u30af\u30e9\u30a6\u30c9\u30b9\u30c8\u30ec\u30fc\u30b8\u3067\u7ba1\u7406\u3057\u3066\u3082\u826f\u3044\u3068\u601d\u3044\u307e\u3059)\u3002\\n\\n\u5c02\u7528\u306e private repository \u30921\u3064\u4f5c\u6210\u3057\u3001data directory \u3092\u4f5c\u6210\u3057\u3001notable \u306e\u8a2d\u5b9a\u3067\u4f5c\u6210\u3057\u305fdata directory \u3092notable \u306e data directory \u306b\u3057\u307e\u3059\u3002\\n\\nnotable \u306e data directory \u306b\u306f\u30d0\u30a4\u30ca\u30ea\u3067\u306f\u306a\u304f\u3001plain text \u3068\u3057\u3066 wiki \u304c\u4f5c\u3089\u308c\u308b\u3088\u3046\u306a\u306e\u3067\u79fb\u690d\u3082 header \u306e\u90e8\u5206\u3092 notable \u306b\u5408\u308f\u305b\u3066 data directory \u306b\u653e\u308a\u8fbc\u3080\u3060\u3051\u3067\u826f\u3044\u306e\u3067\u7c21\u5358\u3067\u3057\u305f\u3002\\n\\nheader \u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\\n\\n```\\n---\\ntitle: Ansible action plugin \u306b\u3064\u3044\u3066\\ntags: [ansible]\\n---\\n```\\n\\n\u610f\u5916\u3068\u79fb\u884c\u5bfe\u8c61\u306ewiki\u304c\u5c11\u306a\u304b\u3063\u305f\u306e\u30671, 2\u6642\u9593\u3067\u7d42\u308f\u308a\u307e\u3057\u305f\u3002\\n\u7d42\u308f\u3063\u305f\u3042\u3068\u30d7\u30e9\u30f3\u3092\u7121\u6599\u30d7\u30e9\u30f3\u306b\u5909\u66f4\u3057\u3066\u4f5c\u696d\u306f\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002"},{"id":"/golang-logging-error-handling-practice","metadata":{"permalink":"/golang-logging-error-handling-practice","source":"@site/blog/golang-logging-error-handling-practice.md","title":"Go \u306b\u304a\u3051\u308b\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30ed\u30ae\u30f3\u30b0\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","description":"2018-12-30 \u8ffd\u8a18","date":"2018-12-25T12:51:41.000Z","formattedDate":"December 25, 2018","tags":[{"label":"golang","permalink":"/tags/golang"},{"label":"logging","permalink":"/tags/logging"}],"readingTime":10.48,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Go \u306b\u304a\u3051\u308b\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30ed\u30ae\u30f3\u30b0\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","date":"2018-12-25T12:51:41.000Z","tags":["golang","logging"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Github\u3092Free Plan\u306b\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u3057\u305f","permalink":"/downgrade-github-plan"},"nextItem":{"title":"Graylog\u306eAlert\u306e\u8ab2\u984c","permalink":"/graylog-alert-issue"}},"content":"## 2018-12-30 \u8ffd\u8a18\\n\\n\u3053\u306e\u8a18\u4e8b\u3092\u5143\u306b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-error-handling-logging-practice\\n\\n\u8ffd\u8a18\u3053\u3053\u307e\u3067\\n\\n---\\n\\nGo \u3067\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30ed\u30ae\u30f3\u30b0\u3092\u3057\u3066\u304d\u3066\u81ea\u5206\u306e\u4e2d\u3067\u56fa\u307e\u308a\u3064\u3064\u3042\u308b\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3092\u660e\u6587\u5316\u3057\u307e\u3059\u3002\\n\u660e\u6587\u5316\u3059\u308b\u3053\u3068\u3067\u4ee5\u4e0b\u306e\u3053\u3068\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\\n\\n* \u8ff7\u3044\u3092\u306a\u304f\u3059\\n* \u30b3\u30fc\u30c9\u306e\u4e00\u8cab\u6027\u3092\u4fdd\u3064\\n* \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u3068\u3059\u308b\u3053\u3068\u3067\u30ec\u30d3\u30e5\u30fc\u306e\u54c1\u8cea\u3092\u4e0a\u3052\u308b(\u81ea\u52d5\u5316\u306f\u51fa\u6765\u306a\u3044\u3051\u3069)\\n* \u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u3092\u4e0a\u3052\u308b(\u30b3\u30fc\u30c9\u304c\u30b4\u30c1\u30e3\u3064\u304b\u306a\u304f\u306a\u308b)\\n* \u9069\u5207\u306b\u30a8\u30e9\u30fc\u3092\u30ed\u30ae\u30f3\u30b0\u3059\u308b(\u5fc5\u8981\u5341\u5206\u306a\u60c5\u5831\u3092\u30ed\u30b0\u3068\u3057\u3066\u6b8b\u3059)\\n\\n\u307e\u305f\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30ed\u30ae\u30f3\u30b0\u306e\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u81ea\u4f5c\u3057\u3066\u3044\u308b\u306e\u3067\u305d\u308c\u3082\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-errlog\\n\\n## \u30ed\u30ae\u30f3\u30b0\u306b\u95a2\u3059\u308b\u95a2\u9023\u8a18\u4e8b\\n\\n\u3053\u306e\u8a18\u4e8b\u3092\u66f8\u304f\u524d\u306b\u8efd\u304f\u30b0\u30b0\u3063\u3066\u307f\u305f\u3060\u3051\u3067\u3061\u3083\u3093\u3068\u8aad\u3093\u3067\u306a\u3044\u306e\u3067\u3059\u304c\u3001\\n\u8208\u5473\u306e\u3042\u308b\u4eba\u306f\u8aad\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n* https://www.loggly.com/blog/think-differently-about-what-to-log-in-go-best-practices-examined/\\n* https://dave.cheney.net/2015/11/05/lets-talk-about-logging\\n* https://postd.cc/go-best-practices-2016/#logging-and-instrumentation\\n\\n## \u30ed\u30b0\u30ec\u30d9\u30eb\u306f\u5206\u3051\u308b\\n\\n\u30ed\u30b0\u30ec\u30d9\u30eb\u3067warning\u3068\u304b\u3044\u3089\u306a\u3044\u3068\u3044\u3046\u610f\u898b\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u81ea\u5206\u306f\u5fc5\u8981\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\u81ea\u5206\u306f\u4ee5\u4e0b\u306e\u30ed\u30b0\u30ec\u30d9\u30eb\u3092\u4f7f\u3044\u5206\u3051\u307e\u3059\u3002\\n\\n* debug: \u3042\u307e\u308a\u4f7f\u308f\u306a\u3044\u3002\u8abf\u67fb\u76ee\u7684\u3067\u4e00\u6642\u7684\u306b\u57cb\u3081\u8fbc\u3080\u30ed\u30b0\u3002\u8abf\u67fb\u304c\u7d42\u308f\u3063\u305f\u3089\u51fa\u529b\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\u4e00\u6642\u7684\u3067\u306a\u3044\u3082\u306e\u306finfo\u306b\u3059\u308b\\n* info: \u30a8\u30e9\u30fc\u3067\u306a\u3044\u30ed\u30b0\u3002\u30a4\u30d9\u30f3\u30c8\u3001\u51e6\u7406\u306e\u958b\u59cb\u6642\u3084\u7d42\u4e86\u3092\u8a18\u9332\u3059\u308b\u306e\u306b\u4f7f\u3046\u3053\u3068\u304c\u591a\u3044\\n* warn: 4xx\u7cfb\u306e\u30a8\u30e9\u30fc\u3002\u305d\u308c\u304c\u8d77\u3053\u3063\u305f\u3060\u3051\u3067\u306f\u30a2\u30e9\u30fc\u30c8\u3092\u98db\u3070\u3055\u306a\u3044\u304c\u3001\u6570\u304c\u901a\u5e38\u6642\u3088\u308a\u591a\u3044\u5834\u5408\u306f\u30d0\u30b0\u304bUI\u306b\u554f\u984c\u304c\u3042\u3063\u3066\u30e6\u30fc\u30b6\u30fc\u304c\u9593\u9055\u3048\u3084\u3059\u304f\u306a\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u306e\u3067\u30a2\u30e9\u30fc\u30c8\u3092\u98db\u3070\u3059\\n* error: 5xx\u7cfb\u306e\u30a8\u30e9\u30fc\u3002\u30a2\u30e9\u30fc\u30c8\u3092\u98db\u3070\u3059(\u95be\u5024\u306f\u8abf\u6574)\\n* fatal: \u51e6\u7406\u7d99\u7d9a\u304c\u4e0d\u53ef\u80fd\u306a\u81f4\u547d\u7684\u306a\u30a8\u30e9\u30fc\u3002\u30b7\u30b9\u30c6\u30e0\u3092\u6b62\u3081\u308b\\n\\n\u66f8\u3044\u3066\u304b\u3089\u601d\u3044\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u306b\u95a2\u3057\u3066\u306f\u6a19\u6e96\u7684\u306a\u4f7f\u3044\u5206\u3051\u306e\u30eb\u30fc\u30eb\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u306d(\u8981\u8abf\u67fb)\u3002\u3002\\n\\n## logrus \u3092\u4f7f\u3063\u3066\u30ed\u30b0\u3092\u69cb\u9020\u5316\u3059\u308b\\n\\n\u524d\u63d0\u3068\u3057\u3066web\u30b7\u30b9\u30c6\u30e0\u3084\u30d0\u30c3\u30c1\u30b7\u30b9\u30c6\u30e0\u306a\u3069\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002CLI\u30c4\u30fc\u30eb\u306a\u3089\u3070\u8a71\u306f\u5909\u308f\u308b\u3067\u3057\u3087\u3046\u3002\\nJSON\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u51fa\u529b\u3057\u3066fluentd\u3067Elasticsearch\u306b\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\u306e\u304c\u500b\u4eba\u7684\u306b\u3088\u304f\u3042\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\\n\\ngo-errlog\u3082logrus\u306e\u4f7f\u7528\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u30ed\u30ae\u30f3\u30b0\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4ed6\u306b\u3082\u8272\u3005\u3042\u308b\u306e\u3067\u3001logrus\u3067\u6e80\u8db3\u3067\u304d\u306a\u3044\u4eba\u306f\u4ee5\u4e0b\u304b\u3089\u63a2\u3057\u3066\u307f\u308b\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\\n\\nhttps://github.com/avelino/awesome-go#logging\\n\\n## \u30a8\u30e9\u30fc\u30ed\u30b0\u306f\u4e2d\u592e\u96c6\u6a29\u7684\u306b main \u306b\u8fd1\u3044\u6240\u3067\u51fa\u529b\u3059\u308b\\n\\n\u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u3069\u3053\u3067\u51fa\u529b\u3059\u308b\u304b\u3067\u3059\u304c\u3001\u539f\u5247\u4e2d\u592e\u96c6\u6a29\u7684\u306b main \u306b\u8fd1\u3044\u6240\u3067\u51fa\u529b\u3057\u307e\u3059\u3002\\n\u56e0\u307f\u306b\u4e2d\u592e\u96c6\u6a29\u7684\u3068\u3044\u3046\u8868\u73fe\u306f echo \u306e centralized error handling \u304b\u3089\u3082\u3058\u3063\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://echo.labstack.com/guide/error-handling\\n\\nerror \u304c\u767a\u751f\u3057\u3066\u3082\u3059\u3050\u30ed\u30b0\u3092\u5410\u304f\u306e\u3067\u306f\u306a\u304f\u3001error \u3092\u95a2\u6570\u306e\u623b\u308a\u5024\u3068\u3057\u3066\u8fd4\u3057\u3001\u30ed\u30ae\u30f3\u30b0\u3059\u308b\u8cac\u52d9\u3092\u89aa\u306b\u59d4\u8b72\u3057\u307e\u3059\u3002\\nGo\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a4\u30c7\u30a3\u30aa\u30e0\u304c\u3088\u304f\u898b\u3089\u308c\u307e\u3059\u306d\u3002\\n\\n```go\\nif err != nil {\\n\\treturn err\\n}\\n```\\n\\n## \u30ed\u30ae\u30f3\u30b0\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u623b\u308a\u5024\u306eerror\u306b\u542b\u3081\u308b\\n\\n\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u3067\u554f\u984c\u306a\u306e\u306f\u3001\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u60c5\u5831\u304c\u6b20\u640d\u3059\u308b\u3053\u3068\u304c\u3042\u308b\u3053\u3068\u3067\u3059\u3002\\n\\n\u3053\u308c\u306b\u95a2\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u8a18\u4e8b\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\\n\\nhttps://deeeet.com/writing/2016/04/25/go-pkg-errors/\\n\\n\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u60c5\u5831\u306b\u306f2\u7a2e\u985e\u3042\u308b\u3068\u500b\u4eba\u7684\u306b\u8003\u3048\u3066\u3044\u3066\u300c\u30e1\u30c3\u30bb\u30fc\u30b8\u300d\u3068\u300c\u30e1\u30bf\u60c5\u5831\u300d\u306a\u3093\u3066\u98a8\u306b\u8133\u5185\u3067\u547c\u3093\u3067\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n* \u30e1\u30c3\u30bb\u30fc\u30b8: \u30a8\u30e9\u30fc\u306e\u539f\u56e0\u3092\u793a\u3059human readable \u306a\u30c6\u30ad\u30b9\u30c8([pkg/errors](https://github.com/pkg/errors)\u306f\u3053\u308c\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b)\\n  * \u30ea\u30b9\u30c8\u306b\u306a\u308b\\n* \u30e1\u30bf\u60c5\u5831: \u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u69cb\u9020\u5316\u3055\u308c\u305f\u30c7\u30fc\u30bf\\n  * \u30cf\u30c3\u30b7\u30e5\u306b\u306a\u308b\\n\\n\u4f8b\u3048\u3070 foo \u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u540d\u304c\u65e2\u306b\u4f7f\u308f\u308c\u3066\u3044\u3066\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u305f\u5834\u5408\\n\\n* \u30e1\u30c3\u30bb\u30fc\u30b8\\n  * username is already used\\n  * invalid username\\n  * failed to create a user\\n* \u30e1\u30bf\u60c5\u5831\\n  * username: foo\\n\\n\u3068\u8a00\u3063\u305f\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u30e1\u30bf\u60c5\u5831\u3092\u542b\u3081\u3066 `\\"foo\\" is invalid username` \u3068\u3044\u3063\u305f\u98a8\u306b\u3082\u51fa\u6765\u307e\u3059\u304c\u3001\u305d\u3046\u3059\u308b\u3068\u691c\u7d22\u30fb\u96c6\u8a08\u3057\u3065\u3089\u304b\u3063\u305f\u308a\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u6210\u306b\u4e00\u624b\u9593\u304b\u304b\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u306f\u30e1\u30bf\u60c5\u5831\u3092\u542b\u3081\u307e\u305b\u3093\u3002\\n\\npkg/errors \u3060\u3068\u30e1\u30bf\u60c5\u5831\u306b\u306f\u5bfe\u5fdc\u3067\u304d\u306a\u3044\u306e\u3067\u81ea\u5206\u3067\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-errlog\\n\\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```go\\nreturn errlog.Wrap(err, logrus.Fields{\\"username\\": \\"foo\\"}, \\"failed to create a user\\")\\n```\\n\\n## error \u306b\u542b\u3081\u308b\u60c5\u5831\u306e\u8cac\u52d9\\n\\n\u4e0a\u8a18\u306e\u3088\u3046\u306b error \u306b\u60c5\u5831\u3092\u542b\u3081\u308b\u5834\u5408\u3001\u3069\u3053\u307e\u3067\u542b\u3081\u308b\u304b\u3068\u3044\u3046\u306e\u304c\u554f\u984c\u306b\u306a\u308a\u307e\u3059\u3002\\n\u3053\u3053\u3067\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3068\u3057\u3066\u3001\\n**\u95a2\u6570\u304cerror\u3092\u8fd4\u3059\u5834\u5408\u3001\u305d\u306e\u95a2\u6570\u304c\u3082\u3063\u3066\u3044\u308b\u60c5\u5831\u306f\u5168\u3066\u542b\u3081\u308b\u8cac\u52d9\u304c\u3042\u308a\u3001\\n\u9006\u306b\u5b50\u95a2\u6570\u304b\u3089\u8fd4\u3063\u3066\u304d\u305ferror\u306b\u306f\u5b50\u95a2\u6570\u306b\u6e21\u3063\u3066\u3044\u308b\u60c5\u5831\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u547c\u3073\u51fa\u3057\u5143\u3067\u4ed8\u4e0e\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044**\u3068\u3044\u3046\u3075\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```go\\nfunc createUser(name string, age int) error {\\n\\tif err := checkName(name); err != nil {\\n\\t\\treturn errlog.Wrap(err, logrus.Fields{\\"age\\": age}, \\"failed to create a user\\")\\n\\t}\\n}\\n```\\n\\n\u3064\u307e\u308a\u4e0a\u306e\u30b3\u30fc\u30c9\u3067\u306f\u5b50\u95a2\u6570\u306b\u6e21\u3063\u3066\u3044\u308b\u30e1\u30bf\u60c5\u5831`name`\u3084\u3001`invalid username` \u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092 `errlog.Wrap` \u306b\u6e21\u3059\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\u4e0a\u8a18\u306e\u4f8b\u3060\u3068\u30a8\u30e9\u30fc\u306b\u95a2\u4fc2\u306a\u3044 `age` \u3082\u6e21\u3059\u5fc5\u8981\u306f\u306a\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3082\u8003\u3048\u3089\u308c\u307e\u3059\u304c\u3001\u539f\u5247\u30ed\u30b0\u306b\u6b8b\u3059\u3053\u3068\u3068\u3057\u307e\u3059\u3002\\n\\n\u305f\u3060\u3057\u3001\u5b50\u95a2\u6570\u304c\u6a19\u6e96\u95a2\u6570\u3084\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3069\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5916\u90e8\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u95a2\u6570\u3067\u3042\u308c\u3070\u8a71\u306f\u5225\u3067\u3059\u3002\\n\u305d\u308c\u3089\u304c\u3069\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3092\u8fd4\u3059\u304b\u306f\u4fdd\u8a3c\u304c\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n```go\\nif f, err := os.Open(filename); err != nil {\\n\\treturn errlog.Wrap(err, logrus.Fields{\\"filename\\": filename}, \\"failed to open a file\\", \\"failed to create a user\\")\\n}\\n```\\n\\n\u4e0a\u8a18\u306e\u4f8b\u3060\u3068\u3001`os.Open`\u306b\u6e21\u3057\u305f\u30e1\u30bf\u60c5\u5831 `filename` \u3084 os.Open\u306b\u5931\u6557\u3057\u305f\u3053\u3068\u3092\u793a\u3059 `failed to open a file` \u3068\u3044\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3082`errlog.Wrap`\u306b\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n`errlog.Wrap` \u306f\u8907\u6570\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6e21\u305b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9806\u756a\u306f\u5de6\u304b\u3089\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u751f\u3057\u305f\u9806\u306b\u306a\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\\n\u4e0a\u8a18\u306e\u4f8b\u3060\u3068\u300c\u30d5\u30a1\u30a4\u30eb\u306e\u30aa\u30fc\u30d7\u30f3\u306b\u5931\u6557\u300d\u3057\u305f\u7d50\u679c\u3001\u300c\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\u306b\u5931\u6557\u300d\u3059\u308b\u3068\u3044\u3046\u9806\u5e8f\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n## \u30a8\u30e9\u30fc\u306e\u30ed\u30ae\u30f3\u30b0\u306f\u30b7\u30f3\u30d7\u30eb\u306b\\n\\ngo-errlog\u3067\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u30ed\u30ae\u30f3\u30b0\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\\n\\n```go\\nlogger := errlog.NewLogger(nil)\\n// err != nil \u306a\u3089 logging \u3059\u308b\\n// err \u304c\u30e1\u30bf\u60c5\u5831\u3092\u6301\u3063\u3066\u305f\u3089 logrus\u3067\u69cb\u9020\u5316\u3057\u3066\u30ed\u30ae\u30f3\u30b0\u3059\u308b\\n// \u30e1\u30c3\u30bb\u30fc\u30b8\u3082 pkg/errors \u306e\u3088\u3046\u306b\u4e00\u3064\u306e\u30c6\u30ad\u30b9\u30c8\u306b\u9023\u7d50\u3057\u3066\u30ed\u30ae\u30f3\u30b0\\nlogger.Fatal(createUser(\\"foo\\", 10))\\n```\\n\\n## \u305d\u306e\u4ed6 go-errlog \u306e\u6a5f\u80fd\\n\\n\u30e1\u30bf\u60c5\u5831\u3084\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u3088\u3063\u3066\u6761\u4ef6\u5206\u5c90\u3057\u305f\u308a\u51fa\u6765\u308b\u3088\u3046\u306b\u30d8\u30eb\u30d1\u30fc\u95a2\u6570\u3092\u5e7e\u3064\u304b\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n* CheckField\\n* HasField\\n* HasMsg\\n\\n\u8a73\u7d30\u306f[GoDoc](https://godoc.org/github.com/suzuki-shunsuke/go-errlog)\u3084\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n## \u6700\u5f8c\u306b\\n\\n\u8272\u3005\u66f8\u3044\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304c\u3001\u4e00\u756a\u8a00\u3044\u305f\u304b\u3063\u305f\u3053\u3068\u306f\\n\\n> **\u95a2\u6570\u304cerror\u3092\u8fd4\u3059\u5834\u5408\u3001\u305d\u306e\u95a2\u6570\u304c\u3082\u3063\u3066\u3044\u308b\u60c5\u5831\u306f\u5168\u3066\u542b\u3081\u308b\u8cac\u52d9\u304c\u3042\u308a\u3001\\n> \u9006\u306b\u5b50\u95a2\u6570\u304b\u3089\u8fd4\u3063\u3066\u304d\u305ferror\u306b\u306f\u5b50\u95a2\u6570\u306b\u6e21\u3063\u3066\u3044\u308b\u60c5\u5831\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u547c\u3073\u51fa\u3057\u5143\u3067\u4ed8\u4e0e\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044**\u3068\u3044\u3046\u3075\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n> \\n> \u305f\u3060\u3057\u3001\u5b50\u95a2\u6570\u304c\u6a19\u6e96\u95a2\u6570\u3084\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3069\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5916\u90e8\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u95a2\u6570\u3067\u3042\u308c\u3070\u8a71\u306f\u5225\u3067\u3059\u3002\\n\\n\u306e\u90e8\u5206\u3067\u3059\u3002\u3053\u306e\u8fba\u306f\u5143\u3005\u81ea\u5206\u306e\u4e2d\u3067\u30eb\u30fc\u30eb\u304c\u6c7a\u307e\u3063\u3066\u306a\u304f\u3066\u305a\u3063\u3068\u30e2\u30e4\u30e2\u30e4\u3057\u3066\u3066\u3001\\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u305f\u3073\u306b\u3076\u308c\u3066\u305f\u306e\u3067\u3059\u304c\u3001\u300c\u3053\u3046\u3059\u308c\u3070\u3044\u3051\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u300d\u3068\u601d\u3044\u3064\u304d\u3001\u305d\u306e\u5b9f\u88c5\u3092\u88dc\u52a9\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u958b\u767a\u3057\u3001\\n\u5b9f\u8df5\u3057\u305f\u3068\u3053\u308d\u4eca\u306e\u6240\u305d\u3053\u305d\u3053\u3046\u307e\u304f\u884c\u3063\u3066\u3044\u307e\u3059\u3002\\n\u305f\u3060\u307e\u3060\u65e5\u304c\u6d45\u3044\u306e\u3067\u5c11\u3057\u305a\u3064\u30d6\u30e9\u30c3\u30b7\u30e5\u30a2\u30c3\u30d7\u3055\u308c\u3066\u3044\u304f\u90e8\u5206\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\\n\u305d\u306e\u5834\u5408\u3067\u3082\u300c\u306a\u3093\u3068\u306a\u304f\u300d\u3067\u306f\u306a\u304f\u3001\u53ef\u80fd\u306a\u9650\u308a\u660e\u6587\u5316\u3057\u3066\u3044\u304f\u3053\u3068\u3067\u3001\u8ff7\u3044\u3092\u306a\u304f\u3057\u3001\u30b3\u30fc\u30c9\u3068\u30ed\u30b0\u306e\u54c1\u8cea\u3092\u4e0a\u3052\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"/graylog-alert-issue","metadata":{"permalink":"/graylog-alert-issue","source":"@site/blog/graylog-alert-issue.md","title":"Graylog\u306eAlert\u306e\u8ab2\u984c","description":"Graylog\u3092\u904b\u7528\u3057\u3066\u304d\u3066\u611f\u3058\u3066\u3044\u308bAlert\u6a5f\u80fd\u5468\u308a\u306e\u8ab2\u984c\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002","date":"2018-12-19T12:02:11.000Z","formattedDate":"December 19, 2018","tags":[{"label":"graylog","permalink":"/tags/graylog"}],"readingTime":2.505,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Graylog\u306eAlert\u306e\u8ab2\u984c","date":"2018-12-19T12:02:11.000Z","tags":["graylog"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Go \u306b\u304a\u3051\u308b\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u30ed\u30ae\u30f3\u30b0\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","permalink":"/golang-logging-error-handling-practice"},"nextItem":{"title":"Graylog \u306e Terraform \u3092 CI/CD\u3067\u5b9f\u884c\u3059\u308b","permalink":"/graylog-terraform-ci"}},"content":"Graylog\u3092\u904b\u7528\u3057\u3066\u304d\u3066\u611f\u3058\u3066\u3044\u308bAlert\u6a5f\u80fd\u5468\u308a\u306e\u8ab2\u984c\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002\\n\u81ea\u5206\u306eGraylog\u306e\u7406\u89e3\u304c\u4e0d\u5341\u5206\u3067\u52d8\u9055\u3044\u3057\u3066\u3044\u308b\u90e8\u5206\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u3054\u4e86\u627f\u304f\u3060\u3055\u3044\u3002\\nGraylog\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2.5.0 \u3067\u3059\u3002\\n\u3053\u3053\u3067\u3044\u3046\u300c\u30e1\u30f3\u30b7\u30e7\u30f3\u300d\u3068\u306f\u3001Slack\u306e\u3088\u3046\u306a\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u306e\u30e1\u30f3\u30b7\u30e7\u30f3\u3092\u6307\u3057\u307e\u3059\u3002\\n\u30ea\u30b9\u30c8\u306e\u8a73\u7d30\u3092\u66f8\u304d\u3060\u3057\u3066\u307f\u305f\u3082\u306e\u306e\u3001\u30ea\u30b9\u30c8\u3060\u3051\u3067\u3060\u3044\u305f\u3044\u8a00\u3044\u305f\u3044\u3053\u3068\u304c\u8a00\u3048\u3066\u3057\u307e\u3063\u3066\u3044\u305f\u306e\u3068\u3001\u5358\u306a\u308b\u611a\u75f4\u3063\u307d\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\\n\u30ea\u30b9\u30c8\u3060\u3051\u306b\u7559\u3081\u307e\u3059\u3002\\n\\n## 2018-12-31 \u8ffd\u8a18\\n\\n\u5143\u3005 Alert Condition, Notification \u306e API\u304c\u306a\u3044\u3068\u52d8\u9055\u3044\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\\n\u5b9f\u306f\u3061\u3083\u3093\u3068\u3042\u3063\u305f\u306e\u3067 terraform \u3067\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b go-graylog \u3092\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002\\n\\n* https://github.com/suzuki-shunsuke/go-graylog/pull/50\\n* https://github.com/suzuki-shunsuke/go-graylog/pull/52\\n* https://github.com/suzuki-shunsuke/go-graylog/blob/v11.0.0/docs/resources/alarm_callback.md\\n* https://github.com/suzuki-shunsuke/go-graylog/blob/v11.0.0/docs/resources/alert_condition.md\\n\\n## \u8ab2\u984c\u30ea\u30b9\u30c8\\n\\n* ~~API\u3067Alert Condition, Notification\u3092\u7ba1\u7406\u3067\u304d\u306a\u3044~~\\n  * ~~API\u304c\u306a\u3044\u306e\u3067 terraform \u3067\u30b5\u30dd\u30fc\u30c8\u3082\u51fa\u6765\u306a\u3044~~\\n  * ~~\u6570\u304c\u5897\u3048\u308b\u3068Web UI\u3067\u306f\u7ba1\u7406\u304c\u8f9b\u3044\u30fb\u4fee\u6b63\u6f0f\u308c\u3084\u8a2d\u5b9a\u30df\u30b9\u304c\u51fa\u3084\u3059\u3044~~\\n* Condition, Notification\u304cStream\u306b\u7d10\u3065\u304f\\n  * Condition\u306b\u3088\u3063\u3066Notification\u3092\u5909\u3048\u3089\u308c\u306a\u3044\\n    * \u6761\u4ef6\u306b\u5fdc\u3058\u3066\u30a2\u30e9\u30fc\u30c8\u306e\u6587\u9762\u30fb\u901a\u77e5\u5148\u30fb\u30e1\u30f3\u30b7\u30e7\u30f3\u5148\u30fb\u30e1\u30f3\u30b7\u30e7\u30f3\u306e\u6709\u7121\u3092\u5909\u3048\u3089\u308c\u306a\u3044\\n      (\u6b63\u78ba\u306b\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3067\u9811\u5f35\u308c\u3070\u3042\u308b\u7a0b\u5ea6\u5bfe\u5fdc\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u500b\u4eba\u7684\u306b\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u305d\u306e\u3082\u306e\u3092\u5207\u308a\u66ff\u3048\u305f\u3044)\\n  * Condition\u3084Notification\u3092\u8907\u6570\u306eStream\u3067\u4f7f\u3044\u56de\u305b\u306a\u3044\\n* (\u5c11\u306a\u304f\u3068\u3082\u6a19\u6e96\u6a5f\u80fd\u3067\u306f)\u6642\u9593\u5e2f\u306b\u3088\u3063\u3066\u30a2\u30e9\u30fc\u30c8\u306e\u6319\u52d5\u3092\u5909\u66f4\u3067\u304d\u306a\u3044\\n  * \u591c\u4e2d\u306b\u306f\u30a2\u30e9\u30fc\u30c8\u3092\u98db\u3070\u3055\u306a\u3044\u30fb\u30e1\u30f3\u30b7\u30e7\u30f3\u3092\u3064\u3051\u306a\u3044\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u51fa\u6765\u306a\u3044\\n  * [\u4e00\u6642\u7684\u306b\u30a2\u30e9\u30fc\u30c8\u3092\u6b62\u3081\u3089\u308c\u306a\u3044](https://github.com/Graylog2/graylog2-server/issues/3182)\\n* Plugin\u3092\u4f7f\u3046\u306b\u3057\u3066\u3082\u3069\u308c\u3092\u4f7f\u3063\u305f\u3089\u826f\u3044\u304b\u5206\u304b\u3089\u306a\u3044\\n  * \u3082\u3063\u3068Graylog\u304c\u30e1\u30b8\u30e3\u30fc\u306b\u306a\u308c\u3070\u72b6\u6cc1\u3082\u5909\u308f\u308b\u304b\u3082\u3057\u308c\u306a\u3044"},{"id":"/graylog-terraform-ci","metadata":{"permalink":"/graylog-terraform-ci","source":"@site/blog/graylog-terraform-ci.md","title":"Graylog \u306e Terraform \u3092 CI/CD\u3067\u5b9f\u884c\u3059\u308b","description":"\u4ee5\u524d Graylog \u3092 Terraform \u3067\u7ba1\u7406\u3059\u308b\u8a18\u4e8b\u3092\u66f8\u304d\u307e\u3057\u305f\u3002","date":"2018-12-06T23:22:49.000Z","formattedDate":"December 6, 2018","tags":[{"label":"graylog","permalink":"/tags/graylog"},{"label":"terraform","permalink":"/tags/terraform"},{"label":"ci","permalink":"/tags/ci"}],"readingTime":5.98,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Graylog \u306e Terraform \u3092 CI/CD\u3067\u5b9f\u884c\u3059\u308b","date":"2018-12-06T23:22:49.000Z","tags":["graylog","terraform","ci"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Graylog\u306eAlert\u306e\u8ab2\u984c","permalink":"/graylog-alert-issue"},"nextItem":{"title":"molecule \u3067ansible \u306e role \u3068 playbook \u3092\u30c6\u30b9\u30c8\u3059\u308b","permalink":"/ansible-molecule"}},"content":"\u4ee5\u524d Graylog \u3092 Terraform \u3067\u7ba1\u7406\u3059\u308b\u8a18\u4e8b\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\\n\\nhttps://suzuki-shunsuke.github.io/graylog-terraform/\\n\\n\u4eca\u56de\u306f\u305d\u308c\u3092 CI/CD \u3067\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u8a71\u3067\u3059\u3002\\n\\n\u305f\u3060\u3057\u3001\u4eca\u56de\u306e\u5185\u5bb9\u306f Graylog \u306b\u9650\u3089\u305a Terraform \u3092 CI/CD \u3067\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u3068\u3057\u3066\u4f7f\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u4eca\u56de\u5b9f\u73fe\u3057\u305f\u306e\u306f\u4ee5\u4e0b\u306e\u3053\u3068\u3067\u3059\u3002\\n\\n* PR\u6642\u306b\u30c6\u30b9\u30c8\u3092\u3059\u308b\\n* `plan/*` tag \u3092 push \u3059\u308b\u3068 `terraform plan` \u304c\u5b9f\u884c\u3055\u308c\u308b\\n* `apply/*` tag \u3092 push \u3059\u308b\u3068 `terraform apply` \u304c\u5b9f\u884c\u3055\u308c\u3001tfstate \u304c\u30b3\u30df\u30c3\u30c8\u3001\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u308b\\n\\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\\n\\nhttps://github.com/suzuki-shunsuke/example/tree/master/graylog-terraform \u306b\u7f6e\u3044\u3066\u304a\u304d\u307e\u3057\u305f\u3002\\n\\n* https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/role.tf#L13-L25\\n* https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/user.tf#L12-L21\\n* https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/.drone.yml\\n* https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/terraform.tfvars.tpl\\n* https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/drone_pipeline_commands/git.sh\\n\\n## CI/CD\u7528\u306e user, role \u3092\u4f5c\u6210\u3059\u308b\\n\\n\u307e\u305a\u306f role \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n```\\nresource \\"graylog_role\\" \\"terraform\\" {\\n  name        = \\"terraform\\"\\n  description = \\"terraform\\"\\n\\n  permissions = [\\n    \\"dashboards:*\\",\\n    \\"indexsets:*\\",\\n    \\"inputs:*\\",\\n    \\"roles:*\\",\\n    \\"streams:*\\",\\n    \\"users:*\\",\\n  ]\\n}\\n```\\n\\npermission \u306f terraform \u3067\u7ba1\u7406\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u307f\u4ed8\u4e0e\u3057\u307e\u3059\u304c\u3001\\n\u305d\u308c\u3067\u3082\u7d50\u69cb\u5f37\u3044\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u306e\u3067\u53d6\u6271\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u3088\u308a\u3061\u3083\u3093\u3068\u6a29\u9650\u7ba1\u7406\u3059\u308b\u306e\u3067\u3042\u308c\u3070 project \u3054\u3068\u306b role, user \u3092\u5206\u3051\u308b\u3068\u3044\u3046\u624b\u3082\u3042\u308a\u305d\u3046\u3067\u3059\u304c\u3001\u305d\u3046\u3059\u308b\u3068\u7ba1\u7406\u3082\u5927\u5909\u305d\u3046\u3067\u3059\u3002\\n\\n\u6b21\u306b user \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n```\\nresource \\"graylog_user\\" \\"terraform\\" {\\n  username  = \\"terraform\\"\\n  email     = \\"terraform@example.com\\"\\n  full_name = \\"terraform\\"\\n\\n  roles = [\\n    \\"terraform\\",\\n    \\"Reader\\",\\n  ]\\n}\\n```\\n\\nReader \u304b Admin \u306f\u5fc5\u9808\u3089\u3057\u3044\u306e\u3067Reader\u3092\u4ed8\u4e0e\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nhttp://docs.graylog.org/en/2.5/pages/users_and_roles/permission_system.html\\n\\n> Every user needs to at least have the standard \u201cReader\u201d permissions \\n> but those do not provide any access to data or maintenance functionalities.\\n\\n\u6b21\u306b\u3053\u306e\u30e6\u30fc\u30b6\u30fc\u306e token \u3092\u767a\u884c\u3057\u307e\u3059\u3002\\n\\nhttp://docs.graylog.org/en/2.5/pages/configuration/rest_api.html#creating-and-using-access-token\\n\\n```\\n$ curl -u <username>:<password> -H \'Accept: application/json\' -X POST \'https://graylog.example.com/api/users/<username>/tokens/<tokenname>?pretty=true\'\\n```\\n\\n\u767a\u884c\u3057\u305f\u30c8\u30fc\u30af\u30f3\u3092 CI/CD \u306b\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3068\u3057\u3066\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\\n\u3084\u308a\u65b9\u306f\u5229\u7528\u3059\u308bCI/CD\u306b\u3088\u3063\u3066\u5909\u308f\u308a\u307e\u3059\u3002\\n\\n\u4ee5\u964d\u306f [drone ci](https://drone.io/) \u3068\u3044\u3046 CI/CD \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u524d\u63d0\u306b\u66f8\u304d\u307e\u3059\u304c\u3001\\ntravis ci \u3084 circle ci, jenkins \u306a\u3069\u4ed6\u306eCI/CD\u3067\u3082\u8003\u3048\u65b9\u306f\u4e00\u7dd2\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n.drone.yml \u306f \u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```yaml\\n---\\npipeline:\\n  envsubst:\\n    image: suzukishunsuke/alpine-envsubst:0.1.0\\n    commands:\\n    - envsubst < terraform.tfvars.tpl > terraform.tfvars\\n    secrets:\\n    - source: terraform_token_prod\\n      target: graylog_auth_name\\n    when:\\n      event: tag\\n  plan:\\n    image: &terraform_image \\"suzukishunsuke/terraform-graylog:0.1.2\\"\\n    commands:\\n    - terraform init\\n    - terraform validate\\n    - terraform fmt -check\\n    - terraform plan\\n    when:\\n      event: tag\\n      ref: refs/tags/plan/*\\n  apply:\\n    image: *terraform_image\\n    commands:\\n    - terraform init\\n    - terraform validate\\n    - terraform plan\\n    - terraform fmt -check\\n    - terraform apply -auto-approve\\n    when:\\n      event: tag\\n      ref: refs/tags/apply/*\\n  git:\\n    image: plugins/git\\n    commands:\\n    - sh drone_pipeline_commands/git.sh\\n    when:\\n      event: tag\\n      ref: refs/tags/apply/*\\n  validate:\\n    image: *terraform_image\\n    environment:\\n    - \\"TF_VAR_auth_name=dummy\\"\\n    - \\"TF_VAR_auth_password=token\\"\\n    - \\"TF_VAR_web_endpoint_uri=https://graylog.example.com/api\\"\\n    commands:\\n    - terraform init\\n    - terraform validate\\n    - terraform fmt -check\\n    when:\\n      event: pull_request\\n```\\n\\n\u307e\u305a\u306f terraform \u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e Docker Image \u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://hub.docker.com/r/suzukishunsuke/terraform-graylog/\\n\\nPR\u6642\u306e\u30c6\u30b9\u30c8\u3067\u306f terraform validate \u3068 terraform fmt \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n```yaml\\n  validate:\\n    image: *terraform_image\\n    environment:\\n    - \\"TF_VAR_auth_name=dummy\\"\\n    - \\"TF_VAR_auth_password=token\\"\\n    - \\"TF_VAR_web_endpoint_uri=https://graylog.example.com/api\\"\\n    commands:\\n    - terraform init\\n    - terraform validate\\n    - terraform fmt -check\\n    when:\\n      event: pull_request\\n```\\n\\n`TF_VAR_` \u3067\u59cb\u307e\u308b\u306e\u304c terraform \u306e\u5909\u6570\u3067\u3059\u3002\\n\\nhttps://www.terraform.io/docs/configuration/variables.html#environment-variables\\n\\ntoken \u306f\u9069\u5f53\u306a\u6587\u5b57\u5217\u3092\u30bb\u30c3\u30c8\u3057\u3066\u304f\u3060\u3055\u3044\u3002PR\u6642\u306b\u306f\u5b9f\u969b\u306bgraylog \u306e API \u3092\u547c\u3070\u306a\u3044\u306e\u3067\u9069\u5f53\u306a\u306e\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n\u6b21\u306b `plan/*` \u3068 tag \u3092 push \u3059\u308b\u3068 `terraform plan` \u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\n\u3053\u306e\u7d50\u679c\u3092\u898b\u3066 `terraform apply` \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n\u3053\u308c\u306f [drone \u306e secrets](https://0-8-0.docs.drone.io/manage-secrets/) \u306e\u90fd\u5408\u306a\u306e\u3067\u3059\u304c\u3001secrets \u306e\u74b0\u5883\u5909\u6570\u306f\u5168\u90e8\u5927\u6587\u5b57\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u305f\u3081 `TF_VAR_auth_name` \u3068\u3044\u3046\u74b0\u5883\u5909\u6570\u3092\u30bb\u30c3\u30c8\u3067\u304d\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081 [envsubst](https://www.gnu.org/software/gettext/manual/html_node/envsubst-Invocation.html) \u3092\u4f7f\u3063\u3066 terraform.tfvars \u306b token \u3092\u66f8\u304d\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\\n\\n```yaml\\n  envsubst:\\n    image: suzukishunsuke/alpine-envsubst:0.1.0\\n    commands:\\n    - envsubst < terraform.tfvars.tpl > terraform.tfvars\\n    secrets:\\n    - source: terraform_token_prod\\n      target: graylog_auth_name\\n    when:\\n      event: tag\\n```\\n\\nterraform.tfvars.tpl \u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\\n\\n```\\nweb_endpoint_uri = \\"https://graylog.example.com/api\\"\\nauth_name = \\"$GRAYLOG_AUTH_NAME\\"\\nauth_password = \\"token\\"\\n```\\n\\nplan \u3092\u5b9f\u884c\u3059\u308b step \u3067\u3059\u3002\\n\\n```yaml\\n  plan:\\n    image: &terraform_image \\"suzukishunsuke/terraform-graylog:0.1.2\\"\\n    commands:\\n    - terraform init\\n    - terraform validate\\n    - terraform fmt -check\\n    - terraform plan\\n    when:\\n      event: tag\\n      ref: refs/tags/plan/*\\n```\\n\\n`apply/*` \u3068 tag \u3092 push \u3059\u308b\u3068 `terraform apply` \u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\\n\\n```yaml\\n  apply:\\n    image: *terraform_image\\n    commands:\\n    - terraform init\\n    - terraform validate\\n    - terraform plan\\n    - terraform fmt -check\\n    - terraform apply -auto-approve\\n    when:\\n      event: tag\\n      ref: refs/tags/apply/*\\n```\\n\\nterraform.tfstate \u3092\u30b3\u30df\u30c3\u30c8, \u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002\\n\\n```yaml\\n  git:\\n    image: plugins/git\\n    commands:\\n    - sh drone_pipeline_commands/git.sh\\n    when:\\n      event: tag\\n      ref: refs/tags/apply/*\\n```\\n\\ndrone_pipeline_commands/git.sh \u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\\n\\n```sh\\ngit status --porcelain || exit 1\\nif `git diff --exit-code --quiet terraform.tfstate`; then\\n  echo \\"terraform.tfstate isn\'t changed\\"\\n  exit 0\\nelse\\n  git config user.name drone\\n  git config user.email drone@example.com\\n  git add . || exit 1\\n  git commit -m \\"build: commit by drone\\" || exit 1\\n  git push origin HEAD:master || exit 1\\nfi\\n```\\n\\nterraform.tfstate \u306b\u5909\u5316\u304c\u3042\u3063\u305f\u5834\u5408\u306e\u307f \u30b3\u30df\u30c3\u30c8\u30fb\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3053\u306e\u8fba\u306e\u3084\u308a\u65b9\u306f\u3082\u3063\u3068\u3046\u307e\u3044\u3084\u308a\u65b9\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\\n(\u81ea\u5206\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u529b\u304c\u4f4e\u3044\u305f\u3081)\u3002\\n\\n`terraform plan` \u306e `-detailed-exitcode` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u6c17\u304c\u3057\u307e\u3059\u3002\\n\\n```\\n  -detailed-exitcode  Return detailed exit codes when the command exits. This\\n                      will change the meaning of exit codes to:\\n                      0 - Succeeded, diff is empty (no changes)\\n                      1 - Errored\\n                      2 - Succeeded, there is a diff\\n```\\n\\n\u4ee5\u4e0a Graylog \u306e Terraform \u3092 CI/CD \u3067\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\\nGraylog \u306b\u9650\u3089\u305a\u3001 Terraform \u3092 CI/CD \u3067\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u3068\u3057\u3066\u4f7f\u3048\u308b\u3068\u601d\u3046\u306e\u3067\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002"},{"id":"/ansible-molecule","metadata":{"permalink":"/ansible-molecule","source":"@site/blog/ansible-molecule.md","title":"molecule \u3067ansible \u306e role \u3068 playbook \u3092\u30c6\u30b9\u30c8\u3059\u308b","description":"ansible \u5c02\u7528\u306e testing \u30c4\u30fc\u30eb molecule \u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2018-12-06T14:08:04.000Z","formattedDate":"December 6, 2018","tags":[{"label":"ansible","permalink":"/tags/ansible"},{"label":"molecule","permalink":"/tags/molecule"}],"readingTime":5.41,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"molecule \u3067ansible \u306e role \u3068 playbook \u3092\u30c6\u30b9\u30c8\u3059\u308b","date":"2018-12-06T14:08:04.000Z","authors":["suzuki-shunsuke"],"tags":["ansible","molecule"]},"prevItem":{"title":"Graylog \u306e Terraform \u3092 CI/CD\u3067\u5b9f\u884c\u3059\u308b","permalink":"/graylog-terraform-ci"},"nextItem":{"title":"Graylog\u3092Terraform\u3067\u7ba1\u7406\u3059\u308b","permalink":"/graylog-terraform"}},"content":"ansible \u5c02\u7528\u306e testing \u30c4\u30fc\u30eb [molecule](https://molecule.readthedocs.io/en/latest/index.html) \u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\nmolecule \u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4ee5\u5916\u306e\u60c5\u5831\u306f\u5c11\u306a\u3044\u306e\u3067\u3001\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\\n\\n\u4ee5\u524d Docker \u3092\u4f7f\u3063\u3066 ansible \u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\\n\\nhttps://suzuki-shunsuke.github.io/test-ansible-on-docker/\\n\\n\u3053\u306e\u969b\u306f Docker Compose \u3068\u7c21\u5358\u306a\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u3063\u3066\u5b9f\u73fe\u3057\u307e\u3057\u305f\u3002\\n\u3053\u308c\u306f\u3053\u308c\u3067\u30d6\u30e9\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306a\u90e8\u5206\u304c\u306a\u304f\u3001\u5b66\u7fd2\u30b3\u30b9\u30c8\u3082\u4f4e\u304f\u3066\u60aa\u304f\u306a\u3044\u306e\u3067\u8208\u5473\u306e\u3042\u308b\u65b9\u306f\u305d\u3061\u3089\u3082\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\\n\\nmolecule \u306f ansible \u5c02\u7528\u306e testing \u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\u57fa\u672c\u7684\u306b playbook \u3068\u3044\u3046\u3088\u308a role \u7528\u306e\u30c4\u30fc\u30eb\u3067\u3059\u304c\u3001playbook\u306e\u30c6\u30b9\u30c8\u3082\u5de5\u592b\u3059\u308c\u3070\u51fa\u6765\u307e\u3059\u3002\\n\\n* \u60c5\u5831\u304c\u5c11\u306a\u3044\\n* \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u5206\u304b\u308a\u3065\u3089\u3044\u90e8\u5206\u304c\u3042\u308b\\n* \u30b3\u30de\u30f3\u30c9\u304c\u30a8\u30e9\u30fc\u5410\u3044\u3066\u5931\u6557\u3057\u305f\u969b\u306b\u3001\u30b0\u30b0\u3063\u3066\u3082\u60c5\u5831\u304c\u51fa\u3066\u3053\u306a\u3044\u306e\u3067\u8f9b\u3044\\n\\n\u3068\u3044\u3046\u98a8\u306b\u8f9b\u3044\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\u304c\u3001\\n\\n* star\u6570\u306f\u305d\u308c\u306a\u308a\u306b\u3042\u308b\\n* ansible \u306e\u516c\u5f0f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3042\u308b https://github.com/ansible/molecule/\\n* [geerlingguy](https://github.com/geerlingguy) \u3055\u3093\u3082\u4f7f\u3063\u3066\u308b\\n\\n\u3068\u3044\u3046\u98a8\u306b\u826f\u3044\u9762\u3082\u3042\u308a\u307e\u3059\u3002\\n\\n\u305d\u308c\u3067\u306f\u4f7f\u3063\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\\n\\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n\\nhttps://molecule.readthedocs.io/en/latest/installation.html\\n\\n```\\n$ pip install molecule\\n```\\n\\nDocker \u3092\u4f7f\u3046\u5834\u5408 `docker-py` \u3082\u5fc5\u8981\u3067\u3059\u3002\\n\\n```\\n$ pip install docker-py\\n```\\n\\n## role \u306e\u30c6\u30b9\u30c8\\n\\nplaybook\u306b\u6bd4\u3079\u3066 role \u306e\u30c6\u30b9\u30c8\u306f\u7c21\u5358\u3067\u3059\u3002\\n\\nrole \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea(tasks\u3084files\u306a\u3069\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea)\u306b\u79fb\u52d5\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n```\\n$ molecule init scenario -r <role name>\\n```\\n\\n\u3053\u3046\u3059\u308b\u3068 `molecule` \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\\n\\n`molecule/default/molecule.yml` \u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\\n\\nhttps://molecule.readthedocs.io/en/latest/configuration.html\\n\\n```yaml\\n---\\ndependency:\\n  name: galaxy\\n  # \u4f9d\u5b58\u3059\u308b role \u304c\u3042\u308b\u5834\u5408\\n  options:\\n    role-file: roles.yml\\ndriver:\\n  name: docker\\nlint:\\n  name: yamllint\\n# https://molecule.readthedocs.io/en/latest/configuration.html#platforms\\nplatforms:\\n  - name: server  # \u30b3\u30f3\u30c6\u30ca\u306e\u540d\u524d\u306b\u306a\u308b\\n    # \u5fc5\u8981\u306b\u5fdc\u3058\u3066 image \u3092\u5909\u66f4\\n    # \u4eca\u56de\u306f ansible\u306eremote user \u3092\u975eroot\u306b\u3059\u308b\u305f\u3081\u306b\u81ea\u4f5c\u306e Docker Image \u3092\u6307\u5b9a\\n    # https://hub.docker.com/r/suzukishunsuke/ansible-test-centos/\\n    image: suzukishunsuke/ansible-test-centos:0.1.0\\n    # systemd \u3092\u4f7f\u3063\u305f\u308a\u3059\u308b\u5834\u5408\\n    # https://molecule.readthedocs.io/en/latest/examples.html#systemd-container\\n    privileged: true\\n    command: /sbin/init  # systemd \u3092\u4f7f\u3046\u5834\u5408\u5fc5\u8981\\n    env:\\n      USER: foo # Docker\u3060\u3068USER\u74b0\u5883\u5909\u6570\u304c\u7a7a\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3088\u3046\u306a\u306e\u3067\u660e\u793a\u7684\u306b\u8a2d\u5b9a\\nprovisioner:\\n  # https://molecule.readthedocs.io/en/latest/configuration.html#id12\\n  name: ansible\\n  lint:\\n    name: ansible-lint\\n  options:\\n    user: foo # \u975eroot\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\\n  inventory:\\n    group_vars:\\n      # variables \u3092\u6307\u5b9a\\n      all:\\n        nginx_server_name: localhost\\n        mysql_host: localhost\\n        mysql_port: 3306\\n        mysql_database: grafana\\n        mysql_user: root\\n        mysql_password: password\\nscenario:\\n  name: default\\nverifier:\\n  name: testinfra\\n  lint:\\n    name: flake8\\n```\\n\\ntest \u306e\u524d\u306b\u307e\u305a\u306f lint \u3057\u307e\u3059\u3002\\n\\n```\\n$ molecule lint [-s <senario name>]\\n```\\n\\n\u3059\u308b\u3068 yamllint \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb `.yamllint` \u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u4fee\u6b63\u3057\u307e\u3059\u3002\\n\\nhttps://yamllint.readthedocs.io/en/stable/configuration.html\\n\\nansible-lint \u3067\u5f15\u3063\u304b\u304b\u3063\u305f\u4eba\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\nhttps://github.com/ansible/ansible-lint\\n\\n\u305d\u3057\u3066 test \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n```\\n$ molecule test [-s <senario name>]\\n```\\n\\n`test` \u30b3\u30de\u30f3\u30c9\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u304c\u524a\u9664\u3055\u308c\u308b\u305f\u3081\u3001\u30c7\u30d0\u30c3\u30b0\u304c\u96e3\u3057\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u305d\u306e\u5834\u5408\u3001 `converge` \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308c\u3070\u30b3\u30f3\u30c6\u30ca\u306f\u6d88\u3048\u307e\u305b\u3093\u3002\\n\\n```\\n$ molecule converge [-s <senario name>]\\n```\\n\\n\u6d88\u3057\u305f\u304f\u306a\u3063\u305f\u3089 destroy \u30b3\u30de\u30f3\u30c9\u3067\u6d88\u3057\u307e\u3057\u3087\u3046\u3002\\n\\n```\\n$ molecule destroy [-s <senario name>]\\n```\\n\\n## playbook \u306e\u30c6\u30b9\u30c8\\n\\n\u6b21\u306b playbook \u306e\u30c6\u30b9\u30c8\u3067\u3059\u3002\u5272\u3068\u3053\u308c\u304c\u672c\u984c\u3060\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\nmolecule \u306f\u57fa\u672c\u7684\u306b playbook \u3068\u3044\u3046\u3088\u308a role \u7528\u306e\u30c4\u30fc\u30eb\u306a\u306e\u3067\u82e5\u5e72\u5de5\u592b\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\\n\u81ea\u5206\u306f\u3088\u304f ansible playbook \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\\n\\n```\\nhello-molecule/  # \u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\\n  agent.yml # agent \u30b0\u30eb\u30fc\u30d7\u7528\u306e playbook\\n  group_vars/\\n    all.yml  # \u5171\u901a\u306evariables\\n    agent.yml  # agent \u30b0\u30eb\u30fc\u30d7\u7528\u306e variables\\n  roles/  # role\\n  inventories/\\n    prod.yml # production\u7528\u306einventory\\n  roles.yml  # \u4f9d\u5b58\u3059\u308b role \u306e\u30ea\u30b9\u30c8\\n  ansible.cfg\\n```\\n\\n\u3053\u306e\u3068\u304d\u306b playbook `agent.yml` \u306e\u30c6\u30b9\u30c8\u304c\u3057\u305f\u3044\u3068\u3057\u307e\u3059\u3002\\nmolecule \u306e\u305f\u3081\u306b\u3053\u306e\u69cb\u6210\u3092\u5f04\u3063\u305f\u308a\u306f\u6975\u529b\u3057\u305f\u304f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\nplaybook \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067 `molecule init` \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\ndefault \u30b7\u30ca\u30ea\u30aa\u306f\u5fc5\u9808\u306e\u3088\u3046\u3067\u3059\u3002\\n\\n```\\n$ molecule init scenario -r hello-molecule\\n$ molecule init scenario -s agent -r hello-molecule\\n```\\n\\n\u3059\u308b\u3068\u3053\u3046\u306a\u308a\u307e\u3059\u3002\\n\\n```\\nhello-molecule/\\n  agent.yml\\n  group_vars/\\n    all.yml\\n    agent.yml\\n  roles/\\n  inventories/\\n    prod.yml\\n  roles.yml\\n  ansible.cfg\\n  molecule/\\n    default/\\n    agent/\\n      molecule.yml\\n      playbook.yml # \u3053\u308c\u306f\u4f7f\u308f\u306a\u3044\u3002\u6d88\u3059\\n```\\n\\n\u3053\u3053\u304b\u3089 molecule.yml \u3092\u4fee\u6b63\u3057\u3066\u3044\u304d\u307e\u3059\u3002\\n\u4e00\u90e8\u629c\u7c8b\u3057\u307e\u3059\u3002\\n\\n```yaml\\n---\\ndependency:\\n  name: galaxy\\n  options:\\n    role-file: roles.yml # \u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u306e\u76f8\u5bfe\u30d1\u30b9\\nplatforms:\\n  - name: server  # group\u540d\\n    image: centos:7\\nprovisioner:\\n  name: ansible\\n  playbooks:\\n    converge: ../../server.yml # \u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308b playbook\u3092\u6307\u5b9a\\n  env:\\n    ANSIBLE_ROLES_PATH: ../../roles:../../_roles  # role\u306e\u30d1\u30b9\u3092\u4fee\u6b63\\nscenario:\\n  name: server\\n```\\n\\n\u3053\u306e\u3088\u3046\u306b playbook\u3084 role \u306e\u30d1\u30b9\u3092\u4fee\u6b63\u3059\u308c\u3070\u3042\u3068\u306f role \u306e\u30c6\u30b9\u30c8\u3068\u540c\u3058\u8981\u9818\u3067\u3044\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u4ee5\u4e0a\u3001\u7c21\u5358\u3067\u3059\u304c molecule \u306e\u4f7f\u3044\u65b9\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002"},{"id":"/graylog-terraform","metadata":{"permalink":"/graylog-terraform","source":"@site/blog/graylog-terraform.md","title":"Graylog\u3092Terraform\u3067\u7ba1\u7406\u3059\u308b","description":"Graylog\u306e\u30ea\u30bd\u30fc\u30b9\u3092 terraform \u3067\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b\u4f5c\u3063\u305f terraform provider \u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2018-12-01T05:56:00.000Z","formattedDate":"December 1, 2018","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"graylog","permalink":"/tags/graylog"},{"label":"terraform","permalink":"/tags/terraform"}],"readingTime":4.09,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Graylog\u3092Terraform\u3067\u7ba1\u7406\u3059\u308b","date":"2018-12-01T05:56:00.000Z","tags":["oss","graylog","terraform"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"molecule \u3067ansible \u306e role \u3068 playbook \u3092\u30c6\u30b9\u30c8\u3059\u308b","permalink":"/ansible-molecule"},"nextItem":{"title":"Graylog \u3067 log \u3092\u7ba1\u7406\u3059\u308b","permalink":"/graylog"}},"content":"Graylog\u306e\u30ea\u30bd\u30fc\u30b9\u3092 terraform \u3067\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b\u4f5c\u3063\u305f terraform provider \u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n[Graylog](https://www.graylog.org/)\u3068\u306f\u4f55\u304b\u306f[\u3053\u3061\u3089](/graylog/)\u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\\n\\nGraylog\u306b\u306f\u69d8\u3005\u306a\u30ea\u30bd\u30fc\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* User\\n* Role\\n* Input\\n* Index Set\\n* Stream\\n* Stream Rule\\n* Dashboard\\n* Alert\\n* etc\\n\\n\u3053\u308c\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u306fWeb UI\u304b\u3089\u4f5c\u6210\u3057\u305f\u308a\u51fa\u6765\u308b\u308f\u3051\u3067\u3059\u304c\u3001\\nWeb UI\u3067\u30dd\u30c1\u30dd\u30c1\u3059\u308b\u306e\u306f\u75b2\u308c\u307e\u3059\u3057\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u7ba1\u7406\u3057\u305f\u3044\u3082\u306e\u3067\u3059(Infrastructure as Code)\u3002\\n\u307e\u305f\u3001Web UI\u304b\u3089\u3067\u306f\u7d30\u304b\u306a\u6a29\u9650\u7ba1\u7406\u306f\u51fa\u6765\u305a(\u9650\u3089\u308c\u305f\u6a29\u9650\u7ba1\u7406\u3057\u304b\u51fa\u6765\u306a\u3044)\u3001API\u3092\u4f7f\u3063\u3066\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\nAPI\u3092\u4f7f\u3063\u3066\u7ba1\u7406\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3092\u63a2\u3057\u305f\u3082\u306e\u306e\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3001\\nAPI\u3092\u4f7f\u3063\u3066Graylog\u7528\u306eterraform provider\u3092\u81ea\u4f5c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-graylog\\n\\nGraylog\u306eAPI\u306e\u7a2e\u985e\u306f\u975e\u5e38\u306b\u591a\u304f\u3001\u6b8b\u5ff5\u306a\u304c\u3089\u30ab\u30d0\u30fc\u3067\u304d\u3066\u3044\u308b\u306e\u306f\u4e00\u90e8\u3060\u3051\u3067\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n* Alert Condition\\n* Alert Notification (Alarm Callback)\\n* Input\\n* User\\n* Role\\n* Index Set\\n* Stream\\n* Stream Rule\\n* Dashboard\\n* Ldap Setting\\n\\nRole \u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u306e\u3067\u6a29\u9650\u7ba1\u7406\u306f\u554f\u984c\u306a\u304f\u51fa\u6765\u307e\u3059\u3002\\nDashboard Widget \u3082\u30b5\u30dd\u30fc\u30c8\u3057\u305f\u3044\u3067\u3059\u3002\\n\\n~~\u51fa\u6765\u308c\u3070 Alert \u306e\u8a2d\u5b9a\u3082\u51fa\u6765\u308b\u3068\u826f\u3044\u306e\u3067\u3059\u304c\u3001Alert\u306b\u95a2\u3059\u308bCRUD API\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u306a\u3044(GET\u306e\u307f)\u306e\u3067\u3001\u30b5\u30dd\u30fc\u30c8\u3067\u304d\u307e\u305b\u3093\u3002~~\\n\\n## terraform \u3092\u4f7f\u3063\u305f\u7ba1\u7406\u65b9\u6cd5\\n\\n\u4ee5\u4e0b\u3067\u306f\u81ea\u5206\u306e\u7ba1\u7406\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/example/tree/master/graylog-terraform\\n\\n\u306b\u30b5\u30f3\u30d7\u30eb\u304c\u7f6e\u3044\u3066\u3042\u308a\u307e\u3059\u3002\\n\\n\u57fa\u672c\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b\\n\\n1. Index Set, Stream, Role \u3068\u3044\u3063\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\\n2. User \u306b Role \u3092\u4ed8\u4e0e\\n\\n\u3068\u3044\u3046\u6d41\u308c\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n1\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306e\u8a2d\u5b9a\u306f [terraform \u306e module](https://www.terraform.io/docs/modules/index.html) \u3068\u3044\u3046\u5f62\u3067\u307e\u3068\u3081\u3066\u3057\u307e\u3044\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n## terraform provider \u306e\u958b\u767a\u306b\u3064\u3044\u3066\\n\\nterraform provider \u306e\u958b\u767a\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u5c11\u306a\u304f\u52d5\u304b\u3057\u3064\u3064\u624b\u63a2\u308a\u3067\u66f8\u3044\u3066\u3044\u305f\u308a\u3057\u3066\u3044\u307e\u3059\u3002\\nterraform provider \u306e\u958b\u767a\u306b\u8208\u5473\u306e\u3042\u308b\u65b9\u306f\u3053\u306e\u8fba\u3092\u898b\u3066\u307f\u308b\u3068\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n* https://www.terraform.io/docs/plugins/provider.html\\n* https://www.terraform.io/guides/writing-custom-terraform-providers.html\\n* https://godoc.org/github.com/hashicorp/terraform/helper/schema\\n* https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCase\\n\\n\u3042\u3068\u306f https://github.com/terraform-providers/terraform-provider-google \u306e\u3088\u3046\u306a\u516c\u5f0f\u306e provider \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n## \u6700\u5f8c\u306b\\n\\nAPI \u3092\u4f7f\u3063\u3066 terraform provider \u3092\u958b\u767a\u3059\u308b\u3053\u3068\u3067\u3001Infrastructure as Code \u3092\u3042\u308b\u7a0b\u5ea6\u5b9f\u73fe\u3067\u304d\u307e\u3057\u305f\u3002\\n\\n* ~~Stream Rule \u3068 Dashboard \u3092\u30b5\u30dd\u30fc\u30c8\u3067\u304d\u3066\u3044\u306a\u3044~~\\n* ~~Alert\u306b\u95a2\u3059\u308bCRUD API\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u306a\u3044(GET\u306e\u307f)\u306e\u3067\u3001\u30b5\u30dd\u30fc\u30c8\u3067\u304d\u306a\u3044~~\\n\\n\u3068\u3044\u3046\u554f\u984c\u304c\u30af\u30ea\u30a2\u51fa\u6765\u3066\u306a\u3044\u306e\u3067\u3001\u305d\u3053\u3092\u30af\u30ea\u30a2\u3057\u305f\u3044\u3067\u3059\u3002\\n\\n\u307e\u305f\u3001\\n\\n* ~~\u307e\u3060 terraform \u3092 CI \u3067\u51fa\u6765\u3066\u3044\u306a\u3044(\u30ed\u30fc\u30ab\u30eb\u304b\u3089\u5b9f\u884c\u3057\u3066\u3044\u308b)~~\\n* \u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u30e6\u30fc\u30b6\u30fc\u306e\u8ffd\u52a0\u306e\u969b\u306b\u96db\u5f62\u3092\u81ea\u52d5\u751f\u6210\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u305f\u3044(\u7279\u306b\u3001\u65b0\u3057\u304f\u53c2\u753b\u3057\u305f\u4eba\u306e\u305f\u3081\u306b\u3042\u308b\u3068\u826f\u3044)\\n\\n\u3068\u3044\u3063\u305f\u70b9\u3082\u6539\u5584\u3057\u305f\u3044\u3067\u3059(\u51fa\u6765\u305f\u3089\u8a18\u4e8b\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059)\u3002\\n\\n## 2018-12-03 \u8ffd\u8a18\\n\\n* Stream Rule \u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\\n* [terraform \u3092 CI \u3067\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f(\u6c17\u304c\u5411\u3044\u305f\u3089\u8a18\u4e8b\u66f8\u304d\u307e\u3059)](/graylog-terraform-ci)\\n\\n## 2018-12-31 \u8ffd\u8a18\\n\\n* Alert Condition, Notification \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f"},{"id":"/graylog","metadata":{"permalink":"/graylog","source":"@site/blog/graylog.md","title":"Graylog \u3067 log \u3092\u7ba1\u7406\u3059\u308b","description":"Java \u88fd\u306e OSS \u30ed\u30b0\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Graylog \u306e\u7d39\u4ecb\u3067\u3059\u3002","date":"2018-11-27T07:40:33.000Z","formattedDate":"November 27, 2018","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"graylog","permalink":"/tags/graylog"}],"readingTime":9.93,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Graylog \u3067 log \u3092\u7ba1\u7406\u3059\u308b","date":"2018-11-27T07:40:33.000Z","tags":["oss","graylog"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Graylog\u3092Terraform\u3067\u7ba1\u7406\u3059\u308b","permalink":"/graylog-terraform"},"nextItem":{"title":"akoi - binary installer","permalink":"/akoi"}},"content":"Java \u88fd\u306e OSS \u30ed\u30b0\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Graylog \u306e\u7d39\u4ecb\u3067\u3059\u3002\\nGraylog \u306b\u3064\u3044\u3066\u306f\u5e7e\u3064\u304b\u306b\u5206\u3051\u3066\u8a18\u4e8b\u3092\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\u4eca\u56de\u306fGraylog\u306e\u5165\u9580\u7684\u306a\u5185\u5bb9\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n\u306a\u304a\u3001\u672c\u8a18\u4e8b\u4e2d\u3067\u300c\u73fe\u5728\u300d\u300c\u73fe\u6642\u70b9\u300d\u3068\u3044\u3063\u305f\u5834\u5408\u3001\u7279\u306b\u65ad\u308a\u304c\u306a\u3051\u308c\u3070\u8a18\u4e8b\u57f7\u7b46\u6642\u70b9 2018-11-27 \u3092\u6307\u3057\u307e\u3059\u3002\\n\\n## Graylog \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\\n\\n\u691c\u8a3c\u306b\u7528\u3044\u308bGraylog\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2.4.6 \u306b\u306a\u308a\u307e\u3059\u3002\\n\\nOSS\u30d0\u30fc\u30b8\u30e7\u30f3\u3068Enterprise\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u672c\u8a18\u4e8b\u3067\u306fOSS\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\\n\\n## Graylog \u3068\u306f\\n\\n* https://www.graylog.org/\\n* https://github.com/Graylog2/graylog2-server\\n\\nKibana \u3068 Elasticsearch(\u4ee5\u4e0bES) \u3092\u4f7f\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u4eba\u306f\u3001Kibana\u306b\u4ee3\u308f\u308b\u3082\u306e\u3060\u3068\u601d\u3063\u3066\u3044\u305f\u3060\u304f\u3068\u30a4\u30e1\u30fc\u30b8\u3057\u3084\u3059\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\n\u30ed\u30b0\u306fGraylog\u305d\u306e\u3082\u306e\u304c\u4fdd\u6301\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001ES\u306b\u30a4\u30f3\u30c7\u30ad\u30b7\u30f3\u30b0\u3055\u308c\u307e\u3059\u3002\\nKibana\u540c\u69d8\u3001ES\u306b\u53ce\u96c6\u3055\u308c\u305f\u30ed\u30b0\u3092\u691c\u7d22\u3057\u305f\u308a\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u3063\u305f\u308a\u51fa\u6765\u307e\u3059\u3002\\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u95a2\u3057\u3066\u306fKibana\u306e\u307b\u3046\u304c\u512a\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3082\u601d\u3048\u307e\u3059\u304c\u3001\\nGraylog\u306f\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u306b\u3088\u308a\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3084\u30ed\u30b0\u3092\u64cd\u4f5c\u3067\u304d\u308b\u4eba\u3092\u5236\u9650\u30fb\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\nGraylog\u3067\u30ed\u30b0\u3092\u7ba1\u7406\u3059\u308b\u5834\u5408\u3001\u30e6\u30fc\u30b6\u30fc\u306f\u76f4\u63a5ES\u306b\u306f\u30ed\u30b0\u3092\u9001\u3089\u305a\u3001Graylog\u3092\u7d4c\u7531\u3057\u3066\u9001\u308a\u307e\u3059\u3002\\nES\u306b\u5bfe\u3059\u308bGraylog\u4ee5\u5916\u306e\u30a2\u30af\u30bb\u30b9\u3092\u5236\u9650\u3057\u76f4\u63a5ES\u306b\u30a2\u30af\u30bb\u30b9\u3055\u308c\u308b\u306e\u3092\u9632\u3050\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\\nGraylog \u306f\u591a\u6a5f\u80fd\u306a\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u308a\u3001\u30ed\u30b0\u3092\u6574\u5f62\u3057\u305f\u308a\u3001\u30a2\u30e9\u30fc\u30c8\u3092\u98db\u3070\u3057\u305f\u308a\u3001\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u306b\u30ed\u30b0\u3092\u30d5\u30a9\u30ef\u30fc\u30c9\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\\n[marketplace](http://docs.graylog.org/en/2.5/pages/marketplace.html) \u3067\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e plugin \u304c\u516c\u958b\u3055\u308c\u3066\u304a\u308a\u3001\u6a5f\u80fd\u3092\u62e1\u5f35\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n[API](http://docs.graylog.org/en/2.5/pages/configuration/rest_api.html)\u3082\u63d0\u4f9b\u3055\u308c\u3066\u304a\u308a\u3001\u3042\u308b\u7a0b\u5ea6\u81ea\u52d5\u5316\u304c\u53ef\u80fd\u3067\u3059\u3002\\n\\n## \u8a8d\u8a3c\u30fb\u8a8d\u53ef\\n\\n\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u3067\u30ed\u30b0\u3092\u7ba1\u7406\u3059\u308b\u5834\u5408\u3001\u793e\u5916\u304b\u3089\u306f\u52ff\u8ad6\u793e\u5185\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u3082\u5236\u9650\u3057\u305f\u3044\u3067\u3059\u3002\\nGraylog \u3067\u306f LDAP \u3084 Active Directory \u306b\u3088\u3063\u3066\u30a2\u30af\u30bb\u30b9\u3092\u5236\u9650\u3067\u304d\u307e\u3059\u3002\\n\u30ea\u30bd\u30fc\u30b9\u6bce\u306b\u8ab0\u304c\u4f55\u3092\u51fa\u6765\u308b\u304b\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\\n\\nhttp://docs.graylog.org/en/2.5/pages/users_and_roles/external_auth.html\\n\\n## \u30ed\u30b0\u306e\u53ce\u96c6\\n\\n\u30ed\u30b0\u306e\u53ce\u96c6\u3092\u3059\u308b\u306b\u306f Graylog \u3067\u5e7e\u3064\u304b\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n* Input\\n* Index Set\\n* Stream\\n* Stream Rule\\n\\nInput \u306f\u30ed\u30b0\u306e\u5165\u529b\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u8a2d\u5b9a\u3067\u3042\u308a\u3001\\n\u3069\u306e\u30dd\u30fc\u30c8\u3067\u3069\u3046\u3044\u3063\u305f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u30ed\u30b0\u3092\u53d7\u3051\u4ed8\u3051\u308b\u304b\u3068\u3044\u3046\u8a2d\u5b9a\u306b\u306a\u308a\u307e\u3059\u3002\\n\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f\u69d8\u3005\u306a\u3082\u306e\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n* AWS Flow Logs\\n* AWS Cloud Watch Logs\\n* AWS Cloud Trail\\n* Beats\\n* CEF AMQP\\n* CEF Kafka\\n* CEF TCP\\n* CEF UDP\\n* Fake HTTP Message\\n* GELF AMQP\\n* GELF HTTP\\n* GELF Kafka\\n* GELF TCP\\n* GELF UDP\\n* JSON Path\\n* NetFlow UDP\\n* Raw AMQP\\n* Syslog AMQP\\n* Syslog Kafka\\n* Syslog TCP\\n* Syslog UDP\\n\\n\u3053\u306e\u8a2d\u5b9a\u306f\u30ed\u30b0\u3092\u53ce\u96c6\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3054\u3068\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3044\u3046\u3088\u308a\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u8a2d\u5b9a\u306a\u306e\u3067\u3001\u4ed6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u65e2\u306b\u540c\u3058\u5f62\u5f0f\u3067\u30ed\u30b0\u3092\u53ce\u96c6\u3057\u3066\u3044\u305f\u3089\u65b0\u305f\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n[Index Set](http://docs.graylog.org/en/2.5/pages/streams.html#index-sets)\u306fES\u306eIndex\u306e\u8ad6\u7406\u7684\u306a\u30bb\u30c3\u30c8\u3067\u3059\u3002\\nGraylog\u306fES\u306e\u8907\u6570\u306eIndex\u30921\u3064\u306e\u30bb\u30c3\u30c8\u3068\u3057\u3066\u7ba1\u7406\u3057\u307e\u3059\u3002\\nIndex Set\u306e\u8a2d\u5b9a\u3067\u53e4\u3044\u30ed\u30b0\u3092\u81ea\u52d5\u3067close\u3057\u305f\u308a\u524a\u9664\u3057\u305f\u308a\u3059\u308b\u4e8b\u304c\u3067\u304d\u308b\u306e\u3067\u30ed\u30b0\u306e\u7ba1\u7406\u304c\u697d\u306b\u306a\u308a\u307e\u3059\u3002\\nES\u306e\u30ed\u30b0\u306f\u53ce\u96c6\u3057\u3066\u3044\u308b\u3060\u3051\u3060\u3068\u3069\u3093\u3069\u3093\u80a5\u5927\u5316\u3057\u3066\u3044\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001[Curator\u306a\u3069\u3092\u4f7f\u3063\u3066\u53e4\u3044\u3082\u306e\u3092\u6d88\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c](https://dev.classmethod.jp/server-side/elasticsearch/elastic-curator/)\u3001\u305d\u3046\u3044\u3063\u305f\u3053\u3068\u3092Graylog\u304c\u81ea\u52d5\u3067\u3084\u3063\u3066\u304f\u308c\u307e\u3059\u3002\\n\\n[Stream](http://docs.graylog.org/en/2.5/pages/streams.html) \u306fGraylog\u306b\u53ce\u96c6\u3055\u308c\u305f\u30ed\u30b0\u3092\u5206\u985e\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\\nStream\u6bce\u306b\u691c\u7d22\u3057\u305f\u308a\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u3063\u305f\u308a\u30a2\u30e9\u30fc\u30c8\u3092\u98db\u3070\u3057\u305f\u308a\u30ed\u30b0\u306e\u95b2\u89a7\u3092\u5236\u9650\u3057\u305f\u308a\u3057\u307e\u3059\u3002\\n\u5206\u985e\u306e\u4ed5\u65b9\u306f\u81ea\u7531\u3067\u3059\u304c\u3001\u81ea\u5206\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6bce\u306bStream\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\\nStream\u6bce\u306bStream Rule\u3092\u5b9a\u7fa9\u3057\u3001Stream Rule\u306e\u6761\u4ef6\u306b\u30de\u30c3\u30c1\u3057\u305f\u30ed\u30b0\u306f\u305d\u306eStream\u306b\u632f\u308a\u5206\u3051\u3089\u308c\u307e\u3059\u3002\\n\u81ea\u5206\u306ffluentd\u304b\u3089\u9001\u3063\u305f\u30ed\u30b0\u306e tag \u306b\u3088\u3063\u3066Stream\u3092\u5206\u3051\u3066\u3044\u307e\u3059\u3002\\n\\n## \u30ed\u30b0\u3092\u9001\u308b\\n\\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5e7e\u3064\u304b\u30ed\u30b0\u306e\u9001\u308a\u65b9\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nhttp://docs.graylog.org/en/2.5/pages/sending_data.html\\n\\n\u81ea\u5206\u304c\u4e3b\u306b\u3084\u3063\u3066\u3044\u308b\u306e\u304c\\n\\n* [Docker \u306e GELF log driver](https://docs.docker.com/config/containers/logging/gelf/) \u3092\u4f7f\u3046\\n* k8s \u306e Pod \u3067 fluentd \u3092 side car \u3068\u3057\u3066\u52d5\u304b\u3059([fluentd\u306b\u306fout_gelf plugin \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](https://hub.docker.com/r/suzukishunsuke/fluentd-gelf/))\\n\\n\\n\u3053\u3053\u307e\u3067\u3084\u308c\u3070\u30ed\u30b0\u3092[\u691c\u7d22](http://docs.graylog.org/en/2.5/pages/queries.html)\u3057\u305f\u308a\u51fa\u6765\u307e\u3059\u3002\\n\\n## Alert\\n\\nhttp://docs.graylog.org/en/2.5/pages/streams/alerts.html\\n\\n\u30a2\u30e9\u30fc\u30c8\u306e\u8a2d\u5b9a\u306f\\n\\n* Condition: \u30a2\u30e9\u30fc\u30c8\u306e\u6761\u4ef6\\n* Notification: \u30a2\u30e9\u30fc\u30c8\u5148(\u3069\u3053\u306b\u30a2\u30e9\u30fc\u30c8\u3092\u98db\u3070\u3059\u304b)\\n\\n\u306e2\u3064\u306b\u5206\u304b\u308c\u307e\u3059\u3002\u305d\u308c\u305e\u308cStream\u306b\u95a2\u9023\u3065\u3044\u305f\u8a2d\u5b9a\u3067\u3059\u3002\\n\\nCondition \u3067\u306f\\n\\n* Field content condition\\n* Field aggregation condition\\n* Message count condition\\n\\n\u3068\u3044\u3063\u305f\u6761\u4ef6\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\\n\\nNotification \u306f\u6a19\u6e96\u3067\u306f\\n\\n* HTTP(Webhook)\\n* Email\\n\\n\u306e2\u7a2e\u985e\u3057\u304b\u306a\u3044\u306e\u3067\u3059\u304c\u3001plugin\u3067 Slack \u306a\u3069\u306b\u3082\u901a\u77e5\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\\n\u81ea\u5206\u306f https://github.com/graylog-labs/graylog-plugin-slack \u3092\u4f7f\u3063\u3066 Slack \u306b\u901a\u77e5\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nNotification \u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u81ea\u7531\u306b\u5909\u3048\u3089\u308c\u307e\u3059\u304c\u3001\u3069\u3046\u3044\u3063\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u826f\u3044\u304b\u306f\u96e3\u3057\u3044\u3067\u3059\u3002\\n\u81ea\u5206\u306f\u6b21\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```\\n${alert_condition.title}\\n\\n${foreach backlog message}\\n<https://graylog.example.com/streams/${stream.id}/search?rangetype=absolute&from=${message.timestamp}&to=${message.timestamp} | link> ${message.message}\\n${end}\\n```\\n\\ngraylog \u306e URL \u306f\u9069\u5b9c\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\\n`link` \u306e\u90e8\u5206\u3092\u5909\u6570(`${message.message}`\u3068\u304b)\u306b\u3059\u308b\u3068\u30ea\u30f3\u30af\u304c\u58ca\u308c\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u56fa\u5b9a\u6587\u5b57\u5217\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\ngraylog-plugin-slack \u306e\u8a2d\u5b9a\u3067 `Graylog URL (optional)`\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3068 `${stream_url}` \u306a\u3069\u304c\u7a7a\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\u81ea\u5206\u306f optional \u306a\u306e\u3067\u5143\u3005\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u30cf\u30de\u308a\u307e\u3057\u305f(\u30b0\u30b0\u3063\u3066\u3082\u5206\u304b\u3089\u306a\u304b\u3063\u305f)\u3002\\n`Graylog URL`\u3068\u3044\u3046\u8a2d\u5b9a\u306f notification \u6bce\u306b\u5909\u3048\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u3082\u306a\u3044\u306e\u3067global\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u3068\u3088\u3044\u306e\u3067\u3059\u304c\u3001\u3069\u3046\u3082\u51fa\u6765\u306a\u305d\u3046\u3067\u3059\u3002\\n\\n\u307e\u305f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4e2d\u3067\u4f7f\u3048\u308b\u5909\u6570\u306e\u4e2d\u306bmessage\u306eURL\u306f\u306a\u3044\u305d\u3046\u3067\u3059\u3002\\n\\nhttps://community.graylog.org/t/message-url-in-alert-notification/1916\\n\\n\u305d\u306e\u305f\u3081\u3001message.timestamp \u3092 from \u3068 to \u306b\u6307\u5b9a\u3057\u3066\u691c\u7d22\u3059\u308b\u3068\u3044\u3046\u56de\u308a\u304f\u3069\u3044(?)\u3053\u3068\u3092\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n## \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u4f5c\u6210\\n\\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u4f5c\u6210\u306f\\n\\n1. Dashboard\u30da\u30fc\u30b8: \u7a7a\u306eDashboard\u3092\u4f5c\u308b\\n2. Stream \u30da\u30fc\u30b8: \u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u305f\u308a\u3057\u3066\u30b0\u30e9\u30d5\u3092\u4f5c\u308b\\n3. Stream \u30da\u30fc\u30b8: \u30b0\u30e9\u30d5\u3092Dashboard\u306b\u8ffd\u52a0\u3059\u308b\\n4. Dashboard\u30da\u30fc\u30b8: \u30b0\u30e9\u30d5\u3092\u4e26\u3073\u66ff\u3048\u305f\u308a\u3059\u308b\\n\\n\u8a73\u7d30\u306f\u5272\u611b\u3059\u308b\u306e\u3067 http://docs.graylog.org/en/2.5/pages/dashboards.html \u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\\n\\n## \u6a29\u9650\u7ba1\u7406\\n\\nGraylog\u306e\u6a29\u9650\u7ba1\u7406\u3067\u306f User \u3068 Role \u3068\u3044\u3046\u6982\u5ff5\u304c\u3042\u308a\u3001\\nRole \u306e permissions \u3068\u3057\u3066\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u3069\u3046\u3044\u3063\u305f\u64cd\u4f5c\u3092\u8a31\u53ef\u3059\u308b\u304b\u5b9a\u7fa9\u3057\u3001\\nUser \u306b Role \u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002\\n\\nhttp://docs.graylog.org/en/2.5/pages/users_and_roles/permission_system.html#permissions\\n\\npermissions \u3068\u3057\u3066\u5b9a\u7fa9\u3067\u304d\u308b\u3082\u306e\u306f\u516c\u5f0f\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u306e\u3067\u3059\u304c\u3001API\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\\n\\nhttps://gist.github.com/suzuki-shunsuke/e371f1bd2716cde31d6fa89bf39f0e77\\n\\n\u4f8b\u3048\u3070 `streams:read` \u306f\u5168\u3066\u306eStream\u3092read\u3059\u308b\u6a29\u9650\u3068\u306a\u308a\u307e\u3059\u3057\u3001\\n`streams:read:<stream id>` \u3068\u3059\u308c\u3070\u7279\u5b9a\u306eStream\u306e\u307fread\u3059\u308b\u6a29\u9650\u3068\u306a\u308a\u307e\u3059\u3002\\n\\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306brole\u3092\u5b9a\u7fa9\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u95a2\u4fc2\u8005\u306b\u4ed8\u4e0e\u3057\u305f\u308a\u3001\u30a2\u30eb\u30d0\u30a4\u30c8\u3084\u6b63\u793e\u54e1\u3068\u3044\u3063\u305f\u96c7\u7528\u5f62\u614b\u306b\u5fdc\u3058\u3066role\u3092\u5b9a\u7fa9\u3057\u305f\u308a\u3001\u8272\u3005\u306a\u5229\u7528\u65b9\u6cd5\u306f\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u3053\u3046\u3044\u3063\u305fRole\u306epermission\u306e\u5b9a\u7fa9\u306fWeb UI\u304b\u3089\u3082\u51fa\u6765\u307e\u3059\u304c\u3001\\n\u6b8b\u5ff5\u306a\u304c\u3089Web UI\u304b\u3089\u3067\u306f\u306a\u304fAPI\u3092\u7528\u3044\u306a\u3044\u3068\u5b9a\u7fa9\u3067\u304d\u306a\u3044permission\u3082\u3042\u308a\u307e\u3059\u3002\\n\u305d\u306e\u305f\u3081\u3001\u81ea\u5206\u306f Graylog API\u3092\u7528\u3044\u3066 terraform provider \u3092\u958b\u767a\u3057\u3001terraform \u3067 Role\u306e\u4f5c\u6210\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n## \u6700\u5f8c\u306b\\n\\n\u4ee5\u4e0a\u3001\u81ea\u5206\u304c\u4e3b\u306b\u4f7f\u3063\u3066\u3044\u308bGraylog\u306e\u6a5f\u80fd\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\\nGraylog\u306f\u591a\u6a5f\u80fd\u3067\u81ea\u5206\u304c\u4f7f\u3063\u3066\u3044\u306a\u3044\u3001\u5206\u304b\u3063\u3066\u3044\u306a\u3044\u6a5f\u80fd\u304c\u8272\u3005\u3042\u308a\u307e\u3059\u3002\\n\u8208\u5473\u306e\u3042\u308b\u65b9\u306f\u8abf\u3079\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002"},{"id":"/akoi","metadata":{"permalink":"/akoi","source":"@site/blog/akoi.md","title":"akoi - binary installer","description":"\u81ea\u4f5c\u306eOSS akoi \u306e\u7d39\u4ecb\u3092\u3057\u307e\u3059\u3002","date":"2018-10-30T23:56:04.000Z","formattedDate":"October 30, 2018","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"ansible","permalink":"/tags/ansible"}],"readingTime":5.725,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"akoi - binary installer","date":"2018-10-30T23:56:04.000Z","authors":["suzuki-shunsuke"],"tags":["oss","ansible"]},"prevItem":{"title":"Graylog \u3067 log \u3092\u7ba1\u7406\u3059\u308b","permalink":"/graylog"},"nextItem":{"title":"gomic - Go\u306e\u30e2\u30c3\u30af\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf","permalink":"/gomic"}},"content":"\u81ea\u4f5c\u306eOSS [akoi](https://github.com/suzuki-shunsuke/akoi) \u306e\u7d39\u4ecb\u3092\u3057\u307e\u3059\u3002\\n\\n* \u306a\u305c\u3053\u3093\u306a\u3082\u306e\u3092\u4f5c\u3063\u305f\u306e\u304b\\n* akoi \u3068 ansible \u3092\u4f7f\u3063\u3066\u30b5\u30fc\u30d0\u306b\u30d0\u30a4\u30ca\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u65b9\u6cd5\\n\\n\u306b\u3064\u3044\u3066\u4e3b\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n## \u307e\u3068\u3081\\n\\n* akoi \u306f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u7ba1\u7406\u3067\u304d\u308b\\n* \u51aa\u7b49\u3067\u3042\u308a\u3001\u52b9\u7387\u3088\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\\n  * \u4e26\u5217\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n  * Accept-Ranges \u306b\u3088\u308b\u5206\u6563\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\\n* ansible\u3067\u30b5\u30fc\u30d0\u306b\u30d0\u30a4\u30ca\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u3092\u88dc\u52a9\u3057\u3066\u304f\u308c\u308b\\n  * ansible \u3067\u771f\u9762\u76ee\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u3066\u52b9\u7387\u3088\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u306f\u96e3\u3057\u3044(\u307b\u3068\u3093\u3069\u306e ansible role \u306f\u51fa\u6765\u3066\u3044\u306a\u3044)\\n\\n## akoi \u3068\u306f\\n\\nakoi \u306f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3067\u3059\u3002\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9URL\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u3092\u8a18\u8ff0\u3057\u3066\u7ba1\u7406\u3057\u307e\u3059\u3002\\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30d0\u30a4\u30ca\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u304c\u53ef\u80fd\u3067\u3042\u308a\u3001\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3042\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3078\u306e\u5207\u308a\u66ff\u3048\u306f\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u3092\u4f5c\u308a\u76f4\u3059\u3060\u3051\u306a\u306e\u3067\u4e00\u77ac\u3067\u7d42\u308f\u308a\u307e\u3059\u3002\u7121\u99c4\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3092\u3057\u305f\u308a\u306f\u3057\u307e\u305b\u3093\u3002\\n\u8907\u6570\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u4e26\u5217\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u308a\u3001Accept-Ranges \u30d8\u30c3\u30c0\u306b\u3088\u308b\u5206\u6563\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u5206\u6563\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u3064\u3044\u3066\u306f\\n\\nhttps://qiita.com/codehex/items/d0a500ac387d39a34401\\n\\n\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\\n\\nGo\u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/akoi/releases \u304b\u3089\u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\\n\\n\u8a73\u7d30\u306f[README](https://github.com/suzuki-shunsuke/akoi)\u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\\n\\n## \u306a\u305c\u4f5c\u3063\u305f\u306e\u304b\\n\\n\u30b5\u30fc\u30d0\u306b\u30d0\u30a4\u30ca\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b ansible role \u3092\u66f8\u304f\u306e\u304c\u8f9b\u304b\u3063\u305f\u304b\u3089\u3067\u3059\u3002\\n\u6700\u8fd1\u306f\u8272\u3005\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304cGo\u3067\u66f8\u304b\u308c\u3001\u30d0\u30a4\u30ca\u30ea\u3067\u914d\u5e03\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\u305d\u3046\u3044\u3063\u305f\u30d0\u30a4\u30ca\u30ea\u3092\u30b5\u30fc\u30d0\u3078\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u306f\\nansible \u3067\u884c\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u65b9\u3082\u5c11\u306a\u304f\u306a\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\\n\u6709\u540d\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b ansible role \u306f\u5927\u62b5[Ansible Galaxy](https://galaxy.ansible.com) \u3067\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n\u3057\u304b\u3057\u3001\u307b\u3068\u3093\u3069\u306e role \u306f\u300c\u771f\u9762\u76ee\u306b\u300d\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\n\u3053\u3053\u3067\u3044\u3046\u300c\u771f\u9762\u76ee\u306b\u300d\u3068\u306f\\n\\n1. \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3067\u304d\u308b\\n2. \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u66f4\u3067\u304d\u308b\\n3. \u6307\u5b9a\u3057\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u7121\u99c4\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u308a\u3057\u306a\u3044\\n\\n\u3068\u3044\u3063\u305f\u3053\u3068\u3067\u3059\u3002\\n\\n\u3053\u308c\u3089\u3092 ansible \u3067\u3084\u308d\u3046\u3068\u3059\u308b\u3068\u7d50\u69cb\u9762\u5012\u306a\u3093\u3067\u3059\u3002\\n\\n\u65e2\u5b58\u306erole\u3067\u3088\u304f\u3042\u308b\u306e\u304c\\n\\n1. \u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u304b\u304b\u308f\u3089\u305a\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u305f\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3044(\u30d0\u30fc\u30b8\u30e7\u30f3\u5909\u66f4\u3067\u304d\u306a\u3044)\\n2. 1\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u3001\u5f37\u5236\u7684\u306b\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30d5\u30e9\u30b0\u304c\u3042\u308b(\u540c\u3058\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u3082\u306e\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u3066\u3082\u7121\u99c4\u306b\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b)\\n\\n\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u771f\u9762\u76ee\u306b\u3084\u308d\u3046\u3068\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308b\u6c17\u304c\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/ansible_role_akoi/blob/master/tasks/install_binary.yml\\n\\n\u3053\u308c\u3089\u306e\u30ed\u30b8\u30c3\u30af\u306f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306b\u95a2\u308f\u3089\u305a\u307b\u3068\u3093\u3069\u5171\u901a\u3067\u3059\u3002\\n\u305d\u308c\u3092\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3054\u3068\u306b\u5b9f\u88c5\u3057\u3066\u30c6\u30b9\u30c8\u3057\u3066\u306a\u3093\u3066\u306e\u306f\u9762\u5012\u3067\u3059\u3002\\n\\n\u305d\u3053\u3067 akoi \u3092\u4f5c\u308b\u524d\u306b\u6c4e\u7528\u7684\u306a ansible role \u3068\u3057\u3066\u958b\u767a\u3057\u3066\u307f\u305f\u306e\u304c\\n\\nhttps://github.com/suzuki-shunsuke/ansible-role-general-installer\\n\\n\u3067\u3059\u3002\\n\\n\u3057\u304b\u3057\u3053\u308c\u306f ansible \u306e\u30d0\u30b0\u3067\u3046\u307e\u304f\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\\n\\nhttps://github.com/ansible/ansible/issues/34736\\n\\n\u305d\u3053\u3067\u4f5c\u3089\u308c\u305f\u306e\u304c akoi \u3067\u3059\u3002\\n\u7d50\u679c\u7684\u306b ansible \u3067\u3084\u308b\u3088\u308a\u9ad8\u901f\u304b\u3064\u6c4e\u7528\u7684\u306a\u306e\u3067\u4f5c\u3063\u3066\u826f\u304b\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## akoi \u3068 ansible \u3092\u4f7f\u3063\u3066\u30b5\u30fc\u30d0\u306b\u30d0\u30a4\u30ca\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n\\nakoi \u3092\u4f7f\u3046\u306b\u3057\u3066\u3082 ansible \u304c\u4e0d\u8981\u306b\u306a\u308b\u3068\u3044\u3046\u8a71\u3067\u306f\u306a\u304f\u3001ansible \u3067akoi\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\\n[README](https://github.com/suzuki-shunsuke/akoi#use-akoi-at-ansible) \u306b\u3082\u66f8\u304d\u307e\u3057\u305f\u304c\u3001 akoi\u3092 ansible \u306e shell \u30e2\u30b8\u30e5\u30fc\u30eb\u304b\u3089\u547c\u3073\u51fa\u3057\u3066\u6a19\u6e96\u51fa\u529b\u3092\u30d1\u30fc\u30b9\u3059\u308b\u3053\u3068\u3067 task \u306e `changed` \u3092\u5224\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n```yaml\\ntasks:\\n- name: install consul\\n  shell: \\"/usr/local/bin/akoi install -f ansible 2>&1\\"\\n  register: result\\n  changed_when: (result.stdout|from_json)[\\"changed\\"]\\n```\\n\\nakoi \u3092\u4f7f\u3063\u3066\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u305f\u3081\u306b\u3001\u305d\u3082\u305d\u3082\u3069\u3046\u3084\u3063\u3066\u30b5\u30fc\u30d0\u306b akoi \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u304b\u3067\u3059\u304c(\u5404\u30b5\u30fc\u30d0\u306b akoi \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059)\u3001\\nakoi \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b ansible role \u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/ansible_role_akoi\\n\\n\u3053\u308c\u3067 akoi \u3092\u4f7f\u3063\u3066\u30d0\u30a4\u30ca\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u304c\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u30d0\u30a4\u30ca\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308c\u3070\u7d42\u308f\u308a\u3068\u3044\u3046\u3053\u3068\u3067\u306f\u306a\u304f\u3001\u30e6\u30fc\u30b6\u30fc\u3084\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u305f\u308a\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u308a\u3001systemd \u306e\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3057\u305f\u308a\u3068\u8272\u3005\u3042\u308a\u307e\u3059\u3002\\n\\n\u81ea\u5206\u306f\u305d\u308c\u3089\u306e\u51e6\u7406\u306f\u5225\u306e ansible role \u3068\u3057\u3066\u958b\u767a\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n* [suzuki-shunsuke.consul_config](https://galaxy.ansible.com/suzuki-shunsuke/consul_config)\\n* [suzuki-shunsuke.prometheus_node_exporter_config](https://galaxy.ansible.com/suzuki-shunsuke/prometheus_node_exporter_config)\\n\\n\u30d0\u30a4\u30ca\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f akoi \u3067\u3084\u308a\u3001\u305d\u308c\u4ee5\u5916\u306e\u90e8\u5206\u306f\u5225\u9014 ansible role \u3092\u958b\u767a\u3059\u308b\u3068\u3044\u3046\u30b9\u30bf\u30a4\u30eb\u3067\u3059\u3002\\n\u305d\u308c\u3089\u306e role \u3067\u306f\u3044\u3061\u3044\u3061\u30d0\u30a4\u30ca\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u51e6\u7406\u3092\u66f8\u304b\u306a\u304f\u3066\u826f\u3044\u306e\u3067\u3060\u3044\u3076\u958b\u767a\u304c\u697d\u306b\u306a\u308a\u307e\u3057\u305f\u3002"},{"id":"/gomic","metadata":{"permalink":"/gomic","source":"@site/blog/gomic.md","title":"gomic - Go\u306e\u30e2\u30c3\u30af\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf","description":"\u81ea\u4f5c\u306eOSS gomic \u306e\u7d39\u4ecb\u3092\u3057\u307e\u3059\u3002","date":"2018-10-29T23:35:16.000Z","formattedDate":"October 29, 2018","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"golang","permalink":"/tags/golang"},{"label":"gomic","permalink":"/tags/gomic"}],"readingTime":8.18,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"gomic - Go\u306e\u30e2\u30c3\u30af\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf","date":"2018-10-29T23:35:16.000Z","tags":["oss","golang","gomic"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"akoi - binary installer","permalink":"/akoi"},"nextItem":{"title":"Docker\u3092\u4f7f\u3063\u3066ansible playbook\u3092\u30c6\u30b9\u30c8\u3059\u308b","permalink":"/test-ansible-on-docker"}},"content":"\u81ea\u4f5c\u306eOSS [gomic](https://github.com/suzuki-shunsuke/gomic) \u306e\u7d39\u4ecb\u3092\u3057\u307e\u3059\u3002\\n\\n* \u306a\u305c\u308f\u3056\u308f\u3056\u3053\u3093\u306a\u3082\u306e\u3092\u4f5c\u3063\u305f\u306e\u304b\\n* \u751f\u6210\u3055\u308c\u305f\u30e2\u30c3\u30af\u306e\u7c21\u5358\u306a\u4f7f\u3044\u65b9\\n\\n\u3092\u4e3b\u306b\u8aac\u660e\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## \u307e\u3068\u3081\\n\\n* gomic \u306f Go\u306einterface\u3092\u5b9f\u88c5\u3057\u305f\u30e2\u30c3\u30af\u3092\u751f\u6210\u3059\u308bCLI\u30c4\u30fc\u30eb\\n* \u30e2\u30c3\u30af\u3092\u624b\u3067\u66f8\u304f\u306e\u304c\u8f9b\u3059\u304e\u305f & \u65e2\u5b58\u30c4\u30fc\u30eb\u3067\u6e80\u8db3\u3067\u304d\u306a\u304b\u3063\u305f\u305f\u3081\u4f5c\u3063\u305f\\n  * \u81ea\u52d5\u751f\u6210\u3067\u304d\u308b\u30b3\u30fc\u30c9\u306f\u81ea\u52d5\u751f\u6210\u3059\u3079\u304d\\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u7ba1\u7406\u3059\u308b\u305f\u3081\u3001interface\u306e\u66f4\u65b0\u306b\u5408\u308f\u305b\u3066mock\u306e\u66f4\u65b0\u304c\u5bb9\u6613\\n* \u751f\u6210\u3055\u308c\u308b\u30e2\u30c3\u30af\u306f\u30b7\u30f3\u30d7\u30eb\u306aAPI\u306e\u307f\u63d0\u4f9b\u3059\u308b\u306e\u3067\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u4f4e\u3044\\n\\n## gomic \u3068\u306f\\n\\ngomic \u306f Go\u306einterface\u3092\u5b9f\u88c5\u3057\u305f\u30e2\u30c3\u30af\u3092\u751f\u6210\u3059\u308bCLI\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\u3053\u308c\u306b\u3088\u3063\u3066\u30e2\u30c3\u30af\u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u306e\u4f5c\u6210\u3092\u52b9\u7387\u5316\u3057\u307e\u3059\u3002\\n\u5358\u8abf\u306a\u4f5c\u696d\u3092\u81ea\u52d5\u5316\u3057\u3001\u672c\u6765\u6ce8\u529b\u3059\u3079\u304d\u3053\u3068\u306b\u6ce8\u529b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\\nGo\u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://github.com/suzuki-shunsuke/gomic/releases \u304b\u3089\u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\\n\\n\u540c\u69d8\u306e\u30c4\u30fc\u30eb\u306f\u5e7e\u3064\u304b\u3042\u308a\u307e\u3059\u3002\\n\\n* https://github.com/avelino/awesome-go#testing\\n* https://github.com/golang/mock (\u4ee5\u4e0b gomock)\\n* https://github.com/gojuno/minimock (\u4ee5\u4e0b minimock)\\n\\n\u7279\u306b gomock \u306f\u6709\u540d\u3067\u3059\u306d\u3002\\n\\n## \u306a\u305c\u4f5c\u3063\u305f\u306e\u304b\\n\\n\u4e0a\u8ff0\u306e\u3088\u3046\u306b\u65e2\u306b\u540c\u69d8\u306e\u30c4\u30fc\u30eb\u306f\u3042\u308a\u307e\u3059\u3057\u3001 gomock \u3068 minimock \u306f\u8a66\u3057\u307e\u3057\u305f\u3002\\n\u3057\u304b\u3057\u3042\u307e\u308a\u6e80\u8db3\u306e\u3044\u304f\u3082\u306e\u3067\u306f\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u81ea\u5206\u3067\u4f5c\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\\n\\n\u81ea\u5206\u304c\u6b32\u3057\u304b\u3063\u305f\u306e\u306f\u5b66\u7fd2\u30b3\u30b9\u30c8\u306e\u4f4e\u3044\u30b7\u30f3\u30d7\u30eb\u306aAPI\u3067\u3059\u3002\\ninterface\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3057\u305f\u95a2\u6570\u3092\u30e2\u30c3\u30af\u306b\u6e21\u3059\u3053\u3068\u3067\\n\u7c21\u5358\u306b\u30e1\u30bd\u30c3\u30c9\u306e\u5b9f\u88c5\u3092\u5207\u308a\u66ff\u3048\u305f\u3044\u306e\u3067\u3059\u3002\\n\\n```go\\n// Getwd \u30e1\u30bd\u30c3\u30c9\u306e\u30e2\u30c3\u30af\\nmock.SetFuncGetwd(func() (string, error) {\\n\\treturn \\"/tmp\\", nil\\n})\\n\\nmock.Getwd() // \\"/tmp\\", nil\\n```\\n\\n\u3053\u308c\u306f\u975e\u5e38\u306b\u30b7\u30f3\u30d7\u30eb\u3067\u5206\u304b\u308a\u3084\u3059\u304f\u3001\u67d4\u8edf\u6027\u306e\u3042\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059(minimock\u306f\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059)\u3002\\n\\ngomock \u3084 minimock \u3067\u306f\\n\\n```go\\nmockSample.EXPECT().Method(\\"hoge\\").Return(1)\\n```\\n\\n\u306e\u3088\u3046\u306b \u95a2\u6570\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u623b\u308a\u5024\u306e\u30da\u30a2\u3092\u6e21\u3057\u3066\u30e2\u30c3\u30af\u3092\u5b9f\u88c5\u3059\u308b\u30d1\u30bf\u30fc\u30f3(\u4f55\u304b\u540d\u524d\u304c\u3042\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f)\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u3092 gomic \u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306f\u3054\u304f\u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u6709\u52b9\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u5b9f\u969b\u306b\u306f\u4f7f\u3048\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u304b\u306a\u3068\u611f\u3058\u3066\u3044\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001gomock \u306f\u305d\u308c\u4ee5\u5916\u306b\u3082 [gomock.InOrder](https://godoc.org/github.com/golang/mock/gomock#InOrder) \u3084 [gomock#Call.After](https://godoc.org/github.com/golang/mock/gomock#Call.After) \u306a\u3069\u3001\u8272\u3005\u4fbf\u5229\u306aAPI\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\\n\u305d\u308c\u3089\u306f\u5b66\u7fd2\u30b3\u30b9\u30c8\u3092\u4e0a\u3052\u3066\u3057\u307e\u3046\u8981\u56e0\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\ngomic\u306f\u305d\u3046\u3044\u3063\u305fAPI\u306f\u63d0\u4f9b\u3057\u3066\u3044\u307e\u305b\u3093\u3002\\n\\n### \u7d20\u306eGo\u3067\u826f\u3044\u306e\u3067\u306f(gomic\u3044\u3089\u306a\u304f\u306a\u3044)?\\n\\n\u4e0a\u8ff0\u306e\u3088\u3046\u306b\u95a2\u6570\u3092\u6e21\u3059\u3060\u3051\u306e\u5b9f\u88c5\u306a\u3089 gomic \u306a\u3093\u3066\u4f7f\u308f\u306a\u304f\u3066\u3082\u7d20\u306eGo\u3067\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3044\u3046\u610f\u898b\u3082\u3042\u308a\u305d\u3046\u3067\u3059\u306d\u3002\\n\\nhttp://haya14busa.com/golang-how-to-write-mock-of-interface-for-testing/\\n\\n\u3067\u3082\u4f3c\u305f\u3088\u3046\u306a\u30e2\u30c3\u30ad\u30f3\u30b0\u306e\u65b9\u6cd5\u304c\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u4f9d\u5b58\u3057\u306a\u3044\u3067mock\u3092\u66f8\u304f\u30d1\u30bf\u30fc\u30f3\u3068\u3057\u3066\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\\n(\u4f3c\u305f\u3088\u3046\u306a\u3068\u3044\u3046\u304b\u3001[gomic\u3082 v0.4.0 \u307e\u3067\u306f\u69cb\u9020\u4f53\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u4ee3\u5165\u3057\u3066\u3044\u307e\u3057\u305f](https://github.com/suzuki-shunsuke/gomic/blob/v0.4.0/examples/os_mock_test.go#L20-L22))\u3002\\n\\nGo\u3067\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u4f9d\u5b58\u3057\u306a\u3044\u3067\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u3060\u3051\u3067\u66f8\u304f\u306e\u304c\u826f\u3044\u3068\u3044\u3046\u601d\u60f3\u30fb\u610f\u898b\u304c\u3088\u304f\u898b\u3089\u308c\u307e\u3059\u3002\\n\u305d\u306e\u305f\u3081\u3001gomic\u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3092\u597d\u307e\u306a\u3044\u65b9\u304c\u3044\u308b\u306e\u306f\u627f\u77e5\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u305f\u3060\u3001\u81ea\u5206\u306f\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5\u3092\u624b\u3067\u611a\u76f4\u306b\u66f8\u304f\u306e\u306f\u8f9b\u3044\u3057\u3001\u751f\u7523\u7684\u3067\u306f\u306a\u3044\u306e\u3067\u30c4\u30fc\u30eb\u306b\u3088\u3063\u3066\u81ea\u52d5\u751f\u6210\u3059\u3079\u304d\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n\u4ee5\u4e0b\u306f2\u3064\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u307f\u6301\u3064\u30b7\u30f3\u30d7\u30eb\u306a\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3068\u305d\u306e\u30e2\u30c3\u30af\u3067\u3059\u3002\\n\\n* https://github.com/suzuki-shunsuke/gomic/blob/master/examples/os.go\\n* https://github.com/suzuki-shunsuke/gomic/blob/master/examples/os_mock.go\\n\\n\u3068\u3066\u3082\u30b7\u30f3\u30d7\u30eb\u306a interface \u3068\u305d\u306e\u30e2\u30c3\u30af\u3067\u3059\u304c\u3001\u305d\u308c\u3067\u3082\u30e2\u30c3\u30af\u3092\u5b9f\u88c5\u3059\u308b\u306e\u306f\u305d\u3053\u305d\u3053\u9762\u5012\u3067\u3059\u3002\\n\u30e1\u30bd\u30c3\u30c9\u3001interface\u306e\u6570\u306b\u6bd4\u4f8b\u3057\u3066\u3069\u3093\u3069\u3093\u9762\u5012\u306b\u306a\u308a\u307e\u3059\u3002\\ngolint\u306e\u3088\u3046\u306alinter\u3067\u30a8\u30e9\u30fc\u306b\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u30b3\u30fc\u30c9\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u306e\u3082\u5730\u5473\u306b\u5927\u5909\u3067\u3059\u3002\\n\\ninterface\u3092\u66f4\u65b0\u3059\u308c\u3070mock\u3082\u66f4\u65b0\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\\n\\n\u30c4\u30fc\u30eb\u306b\u3088\u3063\u3066\u81ea\u52d5\u5316\u3059\u3079\u304d\u3067\u3059\u3002\\n\\n## \u30e2\u30c3\u30af\u306e\u4f7f\u3044\u65b9\\n\\n\u751f\u6210\u3055\u308c\u305f\u30e2\u30c3\u30af\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u8efd\u304f\u8aac\u660e\u3057\u307e\u3059\u3002\\n[v0.5.0](https://github.com/suzuki-shunsuke/gomic/releases/tag/v0.5.0) \u6642\u70b9\u306e\u3082\u306e\u306a\u306e\u3067\u53e4\u304f\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\u6700\u65b0\u306e\u4f7f\u3044\u65b9\u306f\\n\\n* https://github.com/suzuki-shunsuke/gomic\\n* https://github.com/suzuki-shunsuke/gomic/tree/master/examples\\n\\n\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002\\n\\n\u4ee5\u4e0b\u306e\u30b5\u30f3\u30d7\u30eb\u306f [v0.5.0\u306e\u30b5\u30f3\u30d7\u30eb](https://github.com/suzuki-shunsuke/gomic/tree/v0.5.0/examples) \u3092\u5143\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u307e\u305a mock \u3092\u751f\u6210\u3057\u307e\u3059(\u4ee5\u4e0b\u3053\u306e\u30e2\u30c3\u30af\u3092\u751f\u6210\u3059\u308b\u95a2\u6570\u3092\\"\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\\"\u3068\u547c\u3073\u307e\u3059)\u3002\\n\\n```go\\nmock := examples.NewOSMock(nil, nil)\\n```\\n\\n\u7b2c\u4e00\u5f15\u6570\u306f *testing.T \u3067\u3001\u901a\u5e38\u306e\u30c6\u30b9\u30c8\u306a\u3089\u30c6\u30b9\u30c8\u95a2\u6570\u306e\u5f15\u6570\u3092\u305d\u306e\u307e\u307e\u6e21\u305b\u3070\u826f\u3044\u3057\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 nil \u3092\u6e21\u305b\u3070\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\u7b2c\u4e8c\u5f15\u6570\u306f `func(t *testing.T, intfName, methodName string)` \u578b\u306e\u95a2\u6570\u3067\u3001interface\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u5b9f\u88c5\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306b\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002nil \u3092\u6e21\u3059\u3068\u4ee3\u308f\u308a\u306b[gomic.DefaultCallbackNotImplemented](https://godoc.org/github.com/suzuki-shunsuke/gomic/gomic#DefaultCallbackNotImplemented) \u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\\n\\nmock\u306f interface \u3092\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u6b21\u306binterface\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3057\u305f\u95a2\u6570\u3092mock\u306b\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\\n\\n```go\\nmock.SetFuncGetwd(func() (string, error) {\\n\\treturn \\"/tmp\\", fmt.Errorf(\\"\\")\\n})\\n```\\n\\n`mock.Getwd` \u3092\u547c\u3073\u51fa\u3059\u3068 `SetFuncGetwd` \u306b\u6e21\u3057\u305f\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\\n\\n\u4e0a\u8a18\u306e\u30b5\u30f3\u30d7\u30eb\u306e\u3088\u3046\u306b\u6c7a\u307e\u3063\u305f\u5024\u3092\u8fd4\u3059\u3060\u3051\u306e fake \u306f\u3088\u304f\u3042\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7c21\u5358\u306b\u66f8\u3051\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```go\\nmock.SetReturnGetwd(\\"/tmp\\", fmt.Errorf(\\"\\"))\\n```\\n\\n\u30e2\u30c3\u30af\u306e `SetFuncXXX` \u53ca\u3073 `SetReturnXXX` \u306f\u30e2\u30c3\u30af\u81ea\u8eab\u3092\u8fd4\u3059\u306e\u3067\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\\n\\n```go\\nmock := examples.NewOSMock(nil, nil).\\n  SetReturnMkdir(nil).\\n\\tSetFuncGetwd(func() (string, error) {\\n\\t\\treturn \\"/tmp\\", fmt.Errorf(\\"\\")\\n\\t})\\n```\\n\\n\u5b9f\u88c5\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u72b6\u614b\u3067\u30e2\u30c3\u30af\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3059\u3068\\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u7b2c\u4e8c\u5f15\u6570\u3067\u6e21\u3057\u305f\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\\n\\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u7b2c\u4e8c\u5f15\u6570\u304cnil\u3060\u3068 [gomic.DefaultCallbackNotImplemented](https://godoc.org/github.com/suzuki-shunsuke/gomic/gomic#DefaultCallbackNotImplemented) \u304c\u547c\u3073\u3060\u3055\u308c\u307e\u3059\u3002\\ngomic.DefaultCallbackNotImplemented \u306f \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u7b2c\u4e00\u5f15\u6570\u304c nil \u3060\u3068 [log.Fatal](https://golang.org/pkg/log/#Fatal) \u3092\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 [testing.T#Fatal](https://golang.org/pkg/testing/#T.Fatal) \u3092\u547c\u3073\u51fa\u3057\u3001\u305d\u3053\u3067\u51e6\u7406\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\\n\\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u7b2c\u4e8c\u5f15\u6570\u3067\u6e21\u3057\u305f\u95a2\u6570\u3067 log.Fatal \u3084 testing.Fatal \u306b\u3088\u3063\u3066\u51e6\u7406\u3092\u6b62\u3081\u306a\u3051\u308c\u3070\u3001interface\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u3001[zero value](https://golang.org/ref/spec#The_zero_value) \u3092\u8fd4\u3059 fake \u306b\u306a\u308a\u307e\u3059\u3002\\n\\n\u4e00\u756a\u7c21\u5358\u306a\u306e\u306f [gomic.DoNothing](https://godoc.org/github.com/suzuki-shunsuke/gomic/gomic#DoNothing) \u3092\u6e21\u3059\u3053\u3068\u3067\u3059\u3002\\n\\n```go\\ns, err := mock.Getwd(nil, gomic.DoNothing)\\n```\\n\\n\u4e0a\u3067\u8aac\u660e\u3057\u305f\u3053\u3068\u306f\\n\\nhttps://github.com/suzuki-shunsuke/gomic/blob/v0.5.0/examples/os_mock.go#L27-L67\\n\\n\u3092\u898b\u3066\u3082\u3089\u3048\u3070\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"/test-ansible-on-docker","metadata":{"permalink":"/test-ansible-on-docker","source":"@site/blog/test-ansible-on-docker.md","title":"Docker\u3092\u4f7f\u3063\u3066ansible playbook\u3092\u30c6\u30b9\u30c8\u3059\u308b","description":"ansible playbook\u3092(VM\u306e\u4ee3\u308f\u308a\u306b)Docker\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u52b9\u7387\u3088\u304f\u52d5\u4f5c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u3044\u3046\u304a\u8a71\u3067\u3059\u3002","date":"2018-10-12T12:02:51.000Z","formattedDate":"October 12, 2018","tags":[{"label":"ansible","permalink":"/tags/ansible"}],"readingTime":2.77,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Docker\u3092\u4f7f\u3063\u3066ansible playbook\u3092\u30c6\u30b9\u30c8\u3059\u308b","date":"2018-10-12T12:02:51.000Z","draft":false,"tags":["ansible"],"archives":["2018/10"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"gomic - Go\u306e\u30e2\u30c3\u30af\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf","permalink":"/gomic"},"nextItem":{"title":"Project site \u3092 User site \u306b\u79fb\u884c\u3057\u307e\u3057\u305f (GitHub Pages)","permalink":"/migrate-to-user-gh-pages"}},"content":"ansible playbook\u3092(VM\u306e\u4ee3\u308f\u308a\u306b)Docker\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u52b9\u7387\u3088\u304f\u52d5\u4f5c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u3044\u3046\u304a\u8a71\u3067\u3059\u3002\\nansible playbook\u306e\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306bvagrant\u3067VM\u3092\u8d77\u52d5\u3057\u305f\u308a\u3057\u3066\u3044\u308b\u3068\u52d5\u4f5c\u78ba\u8a8d\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3057\u3001\u5bb9\u91cf\u3082\u55b0\u3044\u307e\u3059\u3002\\nDocker\u30b3\u30f3\u30c6\u30ca\u3092\u4f7f\u3063\u3066\u52d5\u4f5c\u78ba\u8a8d\u3067\u304d\u308c\u3070\u3053\u308c\u3089\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3067\u304d\u307e\u3059\u3002\\n\\n\u305f\u3060\u3057\u3001Docker\u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u3001\u4e00\u90e8\u306eansible \u306etask\u304c\u5931\u6557\u3059\u308b\u3053\u3068\u304c\u3042\u308b\u306e\u3067\\nansible playbook\u306b\u3088\u3063\u3066\u306fDocker\u30b3\u30f3\u30c6\u30ca\u3067\u306f\u30c6\u30b9\u30c8\u306b\u306a\u3089\u306a\u3044\u5834\u5408\u3082\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## \u30b5\u30f3\u30d7\u30eb\\n\\nhttps://github.com/suzuki-shunsuke/example/tree/master/ansible/test-on-docker\\n\\n\u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\\n\\nansible playbook\u306b\u52a0\u3048\u3001\\n\\n* docker-compose.yml\\n* test_docker.sh: \u7c21\u5358\u306a\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\\n\\n\u3092\u4f5c\u6210\u3057\u3066\u3042\u308a\u307e\u3059\u3002\\n\\n```console\\n$ bash test_docker.sh\\n```\\n\\n\u3068\u3059\u308b\u3053\u3068\u3067\u52d5\u4f5c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n## \u8aac\u660e\\n\\n\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\\n\\n1. Docker Compose \u3067\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\\n2. \u30b3\u30f3\u30c6\u30ca\u306eID\u3092\u53d6\u5f97\u3057\u3001inventory \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\\n3. Docker Connection Plugin\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u306bplaybook\u3092\u5b9f\u884c\\n\\n\u3067\u3059\u3002\\n\\nDocker Connection Plugin \u3092\u4f7f\u3046\u3068Docker\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3057\u3066ansible playbook\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\\n\\n* https://docs.ansible.com/ansible/2.6/plugins/connection.html\\n* https://docs.ansible.com/ansible/2.6/plugins/connection/docker.html\\n\\n\u307e\u305f\u3001Docker Hub\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u591a\u304f\u306eDocker\u30a4\u30e1\u30fc\u30b8\u306eUSER\u306f root \u3067\u3059\u304c\u3001\\nansible playbook\u306e\u52d5\u4f5c\u78ba\u8a8d\u3068\u3057\u3066\u306f\u90fd\u5408\u304c\u60aa\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\\n\\n\u305d\u3053\u3067\u81ea\u5206\u306f\u975eroot\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u305fDocker Image\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://hub.docker.com/r/suzukishunsuke/ansible-test-centos/\\n\\n## \u95a2\u4fc2\u3042\u308a\u305d\u3046\u306a\u30c4\u30fc\u30eb\\n\\n\u4eca\u56de\u306f\u7c21\u5358\u306a\u30b9\u30af\u30ea\u30d7\u30c8\u3068docker-compose.yml\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u304c\u3001\\n\u3082\u3063\u3068\u30a4\u30b1\u3066\u308b\u3084\u308a\u65b9\u304c\u3042\u308a\u305d\u3046\u306a\u3082\u306e\u3067\u3059\u3002\\n\\n### Vagrant Docker Provider\\n\\nhttps://www.vagrantup.com/docs/docker/\\n\\n\u306a\u3093\u304b\u3042\u307e\u308a\u4f7f\u3048\u306a\u3055\u305d\u3046\u3067\u3059\u3002\\nLinux\u4ee5\u5916\u3060\u3068\u7d50\u5c40VM\u304c\u5fc5\u8981\u3067\u3001\u65e2\u306b\u975e\u63a8\u5968\u306a boot2docker \u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u4f7f\u3046\u3089\u3057\u304f\u3060\u3081\u305d\u3046\u3060\u306a\u3063\u3066\u601d\u3044\u307e\u3057\u305f\u3002\\n\u3042\u307e\u308a\u8abf\u3079\u3066\u307e\u305b\u3093\u3002\\n\\nhttps://www.vagrantup.com/docs/docker/basics.html#host-vm\\n\\n> By default, the host VM Vagrant spins up is backed by boot2docker, because it launches quickly and uses little resources. \\n\\n### Ansible Container\\n\\nhttps://docs.ansible.com/ansible-container/\\n\\n\u3088\u304f\u77e5\u308a\u307e\u305b\u3093\u3002\u52d5\u4f5c\u78ba\u8a8d\u3057\u305f\u3044\u3060\u3051\u3060\u3068\u30aa\u30fc\u30d0\u30fc\u30b9\u30da\u30c3\u30af\u306a\u5370\u8c61\u306f\u53d7\u3051\u307e\u3059\u3002\\n\\n### Packer\\n\\n* https://www.packer.io/docs/builders/docker.html\\n* https://www.packer.io/docs/provisioners/ansible.html\\n\\n\u8a18\u4e8b\u3092\u66f8\u304d\u7d42\u308f\u3063\u3066\u304b\u3089\u305d\u3046\u3044\u3048\u3070 Packer \u304c\u3042\u3063\u305f\u306a\u3068\u601d\u3044\u51fa\u3057\u307e\u3057\u305f\u3002"},{"id":"/migrate-to-user-gh-pages","metadata":{"permalink":"/migrate-to-user-gh-pages","source":"@site/blog/migrate-to-user-gh-pages.md","title":"Project site \u3092 User site \u306b\u79fb\u884c\u3057\u307e\u3057\u305f (GitHub Pages)","description":"\u306a\u3093\u3068\u306a\u304f\u8a66\u9a13\u7684\u306b Project site \u3067\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u3044\u305f GitHub Pages \u3092 User site \u306b\u79fb\u884c\u3057\u307e\u3057\u305f\u3002","date":"2018-10-10T12:14:03.000Z","formattedDate":"October 10, 2018","tags":[{"label":"hugo","permalink":"/tags/hugo"}],"readingTime":0.4,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Project site \u3092 User site \u306b\u79fb\u884c\u3057\u307e\u3057\u305f (GitHub Pages)","date":"2018-10-10T12:14:03.000Z","tags":["hugo"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Docker\u3092\u4f7f\u3063\u3066ansible playbook\u3092\u30c6\u30b9\u30c8\u3059\u308b","permalink":"/test-ansible-on-docker"},"nextItem":{"title":"Hugo\u88fd\u30d6\u30ed\u30b0\u3092GitHub Pages\u3078CI\u3067\u30c7\u30d7\u30ed\u30a4","permalink":"/how-to-host-hugo-at-github-pages"}},"content":"\u306a\u3093\u3068\u306a\u304f\u8a66\u9a13\u7684\u306b Project site \u3067\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u3044\u305f GitHub Pages \u3092 User site \u306b\u79fb\u884c\u3057\u307e\u3057\u305f\u3002\\n\\nsource code \u306f [source branch](https://github.com/suzuki-shunsuke/suzuki-shunsuke.github.io/tree/source) \u306b\u3042\u308a\u307e\u3059\u3002\\n\\nCI\u306b\u95a2\u3057\u3066\u306f [Hugo\u88fd\u30d6\u30ed\u30b0\u3092GitHub Pages\u3078CI\u3067\u30c7\u30d7\u30ed\u30a4](https://suzuki-shunsuke.github.io/how-to-host-hugo-at-github-pages/) \u306b\u3082\u66f8\u304d\u307e\u3057\u305f\u304c\u53c2\u8003\u306b\u306a\u308b\u90e8\u5206\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002"},{"id":"/how-to-host-hugo-at-github-pages","metadata":{"permalink":"/how-to-host-hugo-at-github-pages","source":"@site/blog/how-to-host-hugo-at-github-pages.md","title":"Hugo\u88fd\u30d6\u30ed\u30b0\u3092GitHub Pages\u3078CI\u3067\u30c7\u30d7\u30ed\u30a4","description":"https//pages.github.com/ \u306e\u8a71\u3067\u3059\u3002","date":"2018-09-30T23:04:16.000Z","formattedDate":"September 30, 2018","tags":[{"label":"hugo","permalink":"/tags/hugo"}],"readingTime":1.365,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Hugo\u88fd\u30d6\u30ed\u30b0\u3092GitHub Pages\u3078CI\u3067\u30c7\u30d7\u30ed\u30a4","date":"2018-09-30T23:04:16.000Z","tags":["hugo"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Project site \u3092 User site \u306b\u79fb\u884c\u3057\u307e\u3057\u305f (GitHub Pages)","permalink":"/migrate-to-user-gh-pages"},"nextItem":{"title":"travis ci \u304b\u3089 circle ci \u3078\u306e\u79fb\u884c\u306e\u3059\u3059\u3081","permalink":"/migrate-from-travis-ci-to-circle-ci"}},"content":"https://gohugo.io/ \u3068 https://pages.github.com/ \u306e\u8a71\u3067\u3059\u3002\\nmaster \u306b push \u3057\u305f\u3089 GitHub Pages \u306b circle ci\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u65b9\u6cd5\u306e\u7d39\u4ecb\u3067\u3059\u3002\\n\\n## \u524d\u63d0\\n\\n* \u30c6\u30fc\u30de\u306f master branch \u306b\u542b\u3081\u306a\u3044(CI\u3067clone\u3059\u308b)\\n* build\u3057\u305f\u3082\u306e\u306f gh-pages \u30d6\u30e9\u30f3\u30c1\u306b\u30c7\u30d7\u30ed\u30a4\\n\\n## \u30b3\u30fc\u30c9\\n\\n.circleci/config.yml\\n\\n```yaml\\n---\\nversion: 2\\njobs:\\n  build:\\n    docker:\\n    - image: suzukishunsuke/hugo-ci:0.1.2\\n    steps:\\n    - checkout\\n    - run: git config user.name \\"***\\"\\n    - run: git config user.email \\"***@example.com\\"\\n    # --depth 1 \u3067\u9ad8\u901f\u5316\\n    - run: git clone --depth 1 https://github.com/suzuki-shunsuke/tale-hugo themes/tale\\n    - run: hugo\\n    - run: sh release.sh\\nworkflows:\\n  version: 2\\n  build:\\n    jobs:\\n    - build:\\n        filters:\\n          branches:\\n            only: master\\n```\\n\\nrelease.sh\\n\\n```sh\\ngit checkout gh-pages\\nmv .git .circleci public\\ncd public\\n\\n# \u751f\u6210\u7269\u306b\u5dee\u5206\u304c\u3042\u3063\u305f\u3068\u304d\u306e\u307f\u30c7\u30d7\u30ed\u30a4\\ngit status --porcelain\\nif [ -n \\"`git status --porcelain`\\" ]; then\\n  git add .\\n  git commit -m \\"update\\"\\n  git push origin gh-pages\\nfi\\n```\\n\\nhugo \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f Docker Image \u3092\u7528\u610f\u3057\u3066\u304a\u304d\u307e\u3059\u3002\\n\\nhttps://hub.docker.com/r/suzukishunsuke/hugo-ci/\\n\\n\u30d3\u30eb\u30c9\u3057\u305f\u3082\u306e\u3092 gh-pages \u30d6\u30e9\u30f3\u30c1\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u65b9\u6cd5\u3092\u5de5\u592b\u3057\u3066\u3044\u3066\u3001\\n`.git` \u3092 `public` \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```sh\\ngit checkout gh-pages\\nmv .git .circleci public\\ncd public\\n```\\n\\n\u3042\u3068\u3001\u30d3\u30eb\u30c9\u3055\u308c\u305f\u3082\u306e\u306b\u5dee\u5206\u304c\u3042\u3063\u305f\u3068\u304d\u306e\u307f\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```sh\\nif [ -n \\"`git status --porcelain`\\" ]; then\\n```"},{"id":"/migrate-from-travis-ci-to-circle-ci","metadata":{"permalink":"/migrate-from-travis-ci-to-circle-ci","source":"@site/blog/migrate-from-travis-ci-to-circle-ci.md","title":"travis ci \u304b\u3089 circle ci \u3078\u306e\u79fb\u884c\u306e\u3059\u3059\u3081","description":"travis ci \u3068 circle ci \u306e\u7121\u511fSaaS \u7248\u3092\u6bd4\u8f03\u3057\u3066\u3044\u307e\u3059\u3002","date":"2018-09-30T22:23:15.000Z","formattedDate":"September 30, 2018","tags":[{"label":"circleci","permalink":"/tags/circleci"},{"label":"travisci","permalink":"/tags/travisci"}],"readingTime":1.56,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"travis ci \u304b\u3089 circle ci \u3078\u306e\u79fb\u884c\u306e\u3059\u3059\u3081","date":"2018-09-30T22:23:15.000Z","tags":["circleci","travisci"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Hugo\u88fd\u30d6\u30ed\u30b0\u3092GitHub Pages\u3078CI\u3067\u30c7\u30d7\u30ed\u30a4","permalink":"/how-to-host-hugo-at-github-pages"},"nextItem":{"title":"metabase \u3092\u4f7f\u3063\u3066 drone \u306e\u5229\u7528\u72b6\u6cc1\u3092\u53ef\u8996\u5316\u3059\u308b","permalink":"/visualize-drone-usage-by-metabase"}},"content":"travis ci \u3068 circle ci \u306e\u7121\u511fSaaS \u7248\u3092\u6bd4\u8f03\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nOSS \u306e CI \u3067\u306f travis ci \u304c\u3088\u304f\u4f7f\u308f\u308c\u308b\u5370\u8c61\u304c\u3042\u308a\u307e\u3059\u304c\u3001\\n\u5834\u5408\u306b\u3088\u3063\u3066\u306f circle CI \u306b\u79fb\u884c\u3059\u308b\u3068CI\u306e\u6642\u9593\u304c\u5927\u5e45\u306b\u77ed\u304f\u306a\u3063\u305f\u308a\u3057\u3066\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\u305f\u3060\u3057\u3001\u8907\u6570\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u4e26\u5217\u306b\u30c6\u30b9\u30c8\u3057\u305f\u3044\u5834\u5408\u3001circle ci \u306e\u7121\u511fplan\u3060\u3068\u4e26\u5217\u306b\u5b9f\u884c\u3067\u304d\u306a\u3044\u305f\u3081\u3001\\ntravis \u3067\u3084\u3063\u305f\u307b\u3046\u304c\u901f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n## Circle CI \u306e\u826f\u3044\u3068\u3053\u308d\\n\\n* \u597d\u304d\u306a Docker Image \u304c\u4f7f\u3048\u308b\\n* \u30ed\u30fc\u30ab\u30eb\u3067\u30c6\u30b9\u30c8\u304c\u51fa\u6765\u308b\\n* Pending \u6642\u9593\u304c travis ci \u306b\u6bd4\u3079\u3066\u77ed\u3044\u6c17\u304c\u3059\u308b(\u4e3b\u89b3)\\n* private repository \u306e CI \u3082\u51fa\u6765\u308b\\n\\n\u597d\u304d\u306a Docker Image \u304c\u4f7f\u3048\u308b\u306e\u304c\u5927\u304d\u3044\u3067\u3059\u306d\u3002\\n\u4e88\u3081 CI \u306b\u5fc5\u8981\u306a\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f Image \u3092\u7528\u610f\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u5927\u5e45\u306b\u9ad8\u901f\u5316\u51fa\u6765\u307e\u3059\u3057\u3001\\n\u30c4\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5909\u308f\u3063\u3066\u3057\u307e\u3063\u305f\u308a\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u3082\u907f\u3051\u3089\u308c\u307e\u3059\u3002\\n\u540c\u3058Image\u3092\u4f7f\u3063\u3066\u30ed\u30fc\u30ab\u30eb\u3067\u30c6\u30b9\u30c8\u3067\u304d\u308b\u306e\u3067\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u691c\u8a3c\u3082\u3057\u3084\u3059\u3044\u3067\u3059\u3002\\n\\n\u81ea\u5206\u306e\u5834\u5408 Golang \u306e\u30c4\u30fc\u30eb\u306e CI\u7528\u306b Docker Image \u3092\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://hub.docker.com/r/suzukishunsuke/go-ci/"},{"id":"/visualize-drone-usage-by-metabase","metadata":{"permalink":"/visualize-drone-usage-by-metabase","source":"@site/blog/visualize-drone-usage-by-metabase.md","title":"metabase \u3092\u4f7f\u3063\u3066 drone \u306e\u5229\u7528\u72b6\u6cc1\u3092\u53ef\u8996\u5316\u3059\u308b","description":"drone OSS 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002","date":"2018-09-30T13:55:57.000Z","formattedDate":"September 30, 2018","tags":[{"label":"drone","permalink":"/tags/drone"},{"label":"metabase","permalink":"/tags/metabase"}],"readingTime":0.81,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"metabase \u3092\u4f7f\u3063\u3066 drone \u306e\u5229\u7528\u72b6\u6cc1\u3092\u53ef\u8996\u5316\u3059\u308b","date":"2018-09-30T13:55:57.000Z","draft":false,"tags":["drone","metabase"],"archives":["2018/09"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"travis ci \u304b\u3089 circle ci \u3078\u306e\u79fb\u884c\u306e\u3059\u3059\u3081","permalink":"/migrate-from-travis-ci-to-circle-ci"},"nextItem":{"title":"drone \u306e\u7ba1\u7406\u306e\u305f\u3081\u306b portainer \u3092\u5c0e\u5165\u3057\u305f","permalink":"/use-portainer-for-drone-admin"}},"content":"drone OSS 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://drone.io/ \u3068 https://www.metabase.com/ \u306e\u8a71\u3067\u3059\u3002\\n\\ndrone \u306e\u5229\u7528\u72b6\u6cc1\u3092\u53ef\u8996\u5316\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001\\ndrone \u306e DB(MySQL) \u306e\u30c7\u30fc\u30bf\u3092 metabase \u3067\u53ef\u8996\u5316\u3057\u307e\u3057\u305f\u3002\\n\\n## \u3069\u3093\u306a\u30b0\u30e9\u30d5\u3092\u4f5c\u3063\u305f\u306e\u304b\\n\\n\u3044\u3056\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3059\u308b\u3068\u306a\u308b\u3068\u3001\u4f55\u3092\u4f5c\u3063\u305f\u3089\u3044\u3044\u306e\u304b\u8ff7\u3044\u307e\u3057\u305f\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u3092\u3068\u308a\u3042\u3048\u305a\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n* \u30e6\u30fc\u30b6\u30fc\u6570\\n* \u6709\u52b9\u5316\u3055\u308c\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u6570\\n* build\u306e\u591a\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\\n* build\u3092\u3088\u304f\u5b9f\u884c\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\\n* \u30d3\u30eb\u30c9\u6642\u9593\u306e\u5206\u5e03\\n* build event \u306e\u5272\u5408(push, tag, pull request, deployment)\\n* \u30ea\u30dd\u30b8\u30c8\u30ea\u306esecrets\u306e\u6570\u306e\u5206\u5e03"},{"id":"/use-portainer-for-drone-admin","metadata":{"permalink":"/use-portainer-for-drone-admin","source":"@site/blog/use-portainer-for-drone-admin.md","title":"drone \u306e\u7ba1\u7406\u306e\u305f\u3081\u306b portainer \u3092\u5c0e\u5165\u3057\u305f","description":"drone OSS 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002","date":"2018-09-30T12:56:42.000Z","formattedDate":"September 30, 2018","tags":[{"label":"drone","permalink":"/tags/drone"},{"label":"portainer","permalink":"/tags/portainer"}],"readingTime":3.205,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"drone \u306e\u7ba1\u7406\u306e\u305f\u3081\u306b portainer \u3092\u5c0e\u5165\u3057\u305f","date":"2018-09-30T12:56:42.000Z","draft":false,"tags":["drone","portainer"],"archives":["2018/09"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"metabase \u3092\u4f7f\u3063\u3066 drone \u306e\u5229\u7528\u72b6\u6cc1\u3092\u53ef\u8996\u5316\u3059\u308b","permalink":"/visualize-drone-usage-by-metabase"},"nextItem":{"title":"drone \u3067\u975eroot\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3055\u308c\u308bImage\u3092\u4f7f\u3048\u306a\u3044","permalink":"/drone-cant-use-nonroot-image"}},"content":"drone OSS 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\nhttps://drone.io/ \u3068 https://portainer.io/ \u306e\u8a71\u3067\u3059\u3002\\n\\ndrone \u306f\u304b\u306a\u308a\u5b89\u5b9a\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\\n\u30e6\u30fc\u30b6\u30fc\u304c\u597d\u304d\u306a\u30a4\u30e1\u30fc\u30b8\u3067\u597d\u304d\u306a\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3067\u304d\u308b\u4ee5\u4e0a\u3001\u30c8\u30e9\u30d6\u30eb\u304c\u8d77\u3053\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u3059\u3002\\n\\n\u305d\u306e\u7d50\u679c\u3001 \u7279\u5b9a\u306e build \u304c\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306b\u306a\u3089\u305a\u306b\u5ef6\u3005\u3068\u5b9f\u884c\u3055\u308c\u7d9a\u3051\u308b\u306a\u3093\u3066\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u305d\u306e\u5834\u5408\u3001\\n\\n1. \u3069\u306e\u30ce\u30fc\u30c9\u306e\u3069\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u30c8\u30e9\u30d6\u30eb\u304c\u8d77\u304d\u3066\u3044\u308b\u306e\u304b\\n2. \u305d\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u306e\u304b\\n\\n\u3068\u3044\u3046\u306e\u3092\u77e5\u308a\u305f\u3044\u306e\u3067\u3059\u304c\u3001 drone \u306b\u306f\u305d\u3046\u3044\u3063\u305f\u7ba1\u7406\u6a5f\u80fd\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n\u305d\u3053\u3067 \u8907\u6570\u306e\u30b5\u30fc\u30d0\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b Docker \u30b3\u30f3\u30c6\u30ca\u3092\u7ba1\u7406\u3067\u304d\u308b\u30c4\u30fc\u30eb\u306f\u306a\u3044\u304b\u3068\u63a2\u3057\u305f\u3068\u3053\u308d\u3001\\n[portainer](https://portainer.readthedocs.io/en/stable/) \u304c\u826f\u3055\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u5c0e\u5165\u3057\u307e\u3057\u305f\u3002\\n\\nportainer \u3092\u4f7f\u3046\u3068\u8907\u6570\u306e\u30b5\u30fc\u30d0\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4e00\u89a7\u3067\u898b\u308b\u3053\u3068\u304c\u51fa\u6765\u3001\\n\u30b3\u30f3\u30c6\u30ca\u3092\u64cd\u4f5c(\u524a\u9664\u3001\u505c\u6b62\u3001\u518d\u8d77\u52d5etc)\u51fa\u6765\u307e\u3059\u3002\\n\u30b3\u30f3\u30c6\u30ca\u306e\u30ed\u30b0\u3084\u7c21\u5358\u306a\u30e1\u30c8\u30ea\u30c3\u30af\u30b9(CPU, memory, network usage) \u304c\u898b\u308c\u307e\u3059\u3002\\n\u30b3\u30f3\u30c6\u30ca\u3060\u3051\u3067\u306a\u304f\u3001network \u3084 volume, image \u3068\u3044\u3063\u305f\u30ea\u30bd\u30fc\u30b9\u3082\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002\\n\\n## portainer \u306e\u5c0e\u5165\\n\\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3001 swarm cluster \u3092\u69cb\u7bc9\u3057\u3066\u305d\u3053\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308c\u3070\u3088\u3044\u3067\u3059\u3002\\n\\n* https://docs.docker.com/engine/swarm/swarm-tutorial/\\n* https://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\\n\\n## \u56f0\u3063\u3066\u3044\u308b\u3053\u3068\\n\\n### \u6bce\u56de\u691c\u7d22\u3067\u7d5e\u308a\u8fbc\u307f\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\\n\\n\u691c\u7d22\u3067\u7d5e\u308a\u8fbc\u3093\u3060\u5f8c\u306b\u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u8a73\u7d30\u753b\u9762\u98db\u3093\u3060\u5f8c\u4e00\u89a7\u306b\u623b\u308b\u3068\\n\u691c\u7d22\u304c\u30af\u30ea\u30a2\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3082\u3046\u4e00\u5ea6\u691c\u7d22\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u304c\u9762\u5012\u3067\u3059\u3002\\n\\n### \u3082\u3046\u5c11\u3057\u9ad8\u5ea6\u306a\u691c\u7d22\u304c\u3057\u305f\u3044\\n\\n\u81ea\u7531\u5165\u529b\u306e\u691c\u7d22\u30dc\u30c3\u30af\u30b9\u304c1\u3064\u3042\u308b\u3060\u3051\u3067\u3001\u7279\u306b\u30af\u30a8\u30ea\u304c\u66f8\u3051\u308b\u308f\u3051\u3067\u3082\u306a\u3055\u305d\u3046\u306a\u306e\u3067\u3001\\n\u3082\u3046\u5c11\u3057\u9ad8\u5ea6\u306a\u691c\u7d22\u304c\u3057\u305f\u3044\u3067\u3059\u3002\\n\u4f8b\u3048\u3070 Created At \u3067 1\u6642\u9593\u4ee5\u4e0a\u524d\u306b\u7279\u5b9a\u306e\u30ce\u30fc\u30c9\u3067\u4f5c\u3089\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u306e\u4e00\u89a7\u3068\u304b\u3002\\n\\n### docker API \u3067\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u64cd\u4f5c\u3067\u304d\u306a\u3044\\n\\n\u3053\u308c\u306f\u591a\u5206\u4e0d\u5177\u5408\u3068\u304b\u3067\u306f\u306a\u304f\u81ea\u5206\u306e\u8a2d\u5b9a\u304c\u826f\u304f\u306a\u3044\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\u3053\u306e\u8fba\u306e issue \u304c\u95a2\u4fc2\u3057\u3066\u305d\u3046\u3067\u3059\u304c\u3001\u307e\u3060\u89e3\u6d88\u3067\u304d\u3066\u3044\u307e\u305b\u3093\u3002\\n\\n* https://github.com/portainer/portainer/issues/831\\n* https://github.com/portainer/portainer/issues/1897\\n\\n```\\nhttp error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\\n```\\n\\n```\\ncron error: endpoint snapshot error (endpoint=primary, URL=tcp://tasks.agent:9001) (err=Cannot connect to the Docker daemon at tcp://tasks.agent:9001. Is the docker daemon running?)\\n```\\n\\n```\\nhttp error: Unable to execute cluster operation (err=Get https://192.160.0.16:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\\n```"},{"id":"/drone-cant-use-nonroot-image","metadata":{"permalink":"/drone-cant-use-nonroot-image","source":"@site/blog/drone-cant-use-nonroot-image.md","title":"drone \u3067\u975eroot\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3055\u308c\u308bImage\u3092\u4f7f\u3048\u306a\u3044","description":"drone \u3067\u975eroot\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3055\u308c\u308bDocker Image\u3092\u4f7f\u304a\u3046\u3068\u3059\u308b\u3068build\u306b\u5931\u6557\u3057\u307e\u3059\u3002","date":"2018-09-30T12:42:16.000Z","formattedDate":"September 30, 2018","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":0.48,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"drone \u3067\u975eroot\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3055\u308c\u308bImage\u3092\u4f7f\u3048\u306a\u3044","date":"2018-09-30T12:42:16.000Z","authors":["suzuki-shunsuke"],"tags":["drone"]},"prevItem":{"title":"drone \u306e\u7ba1\u7406\u306e\u305f\u3081\u306b portainer \u3092\u5c0e\u5165\u3057\u305f","permalink":"/use-portainer-for-drone-admin"},"nextItem":{"title":"drone \u306e step \u3092\u5b9f\u884c\u3059\u308b\u304b\u5426\u304b\u3092\u30bf\u30b0\u540d\u3067\u5224\u5b9a\u3059\u308b\u65b9\u6cd5","permalink":"/drone-tag-conditional-step"}},"content":"drone \u3067\u975eroot\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3055\u308c\u308bDocker Image\u3092\u4f7f\u304a\u3046\u3068\u3059\u308b\u3068build\u306b\u5931\u6557\u3057\u307e\u3059\u3002\\n\\n```\\n/bin/sh: 3: cannot create /root/.netrc: Permission denied\\n```\\n\\n\u3053\u308c\u306b\u3064\u3044\u3066\u306f drone \u306e\u958b\u767a\u8005\u304c\u56de\u7b54\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n* https://discourse.drone.io/t/solved-netrc-permission-denied/171/2\\n* https://discourse.drone.io/t/solved-netrc-permission-denied/171/4\\n\\n\u7d50\u8ad6\u3092\u8a00\u3046\u3068\u3001\\n\u4ed6\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3046\u304b\u3001\\nroot\u3067\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u30a4\u30e1\u30fc\u30b8\u3092\u4fee\u6b63\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002"},{"id":"/drone-tag-conditional-step","metadata":{"permalink":"/drone-tag-conditional-step","source":"@site/blog/drone-tag-conditional-step.md","title":"drone \u306e step \u3092\u5b9f\u884c\u3059\u308b\u304b\u5426\u304b\u3092\u30bf\u30b0\u540d\u3067\u5224\u5b9a\u3059\u308b\u65b9\u6cd5","description":"drone 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002","date":"2018-09-30T12:30:06.000Z","formattedDate":"September 30, 2018","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":0.53,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"drone \u306e step \u3092\u5b9f\u884c\u3059\u308b\u304b\u5426\u304b\u3092\u30bf\u30b0\u540d\u3067\u5224\u5b9a\u3059\u308b\u65b9\u6cd5","date":"2018-09-30T12:30:06.000Z","tags":["drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"drone \u3067\u975eroot\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3055\u308c\u308bImage\u3092\u4f7f\u3048\u306a\u3044","permalink":"/drone-cant-use-nonroot-image"},"nextItem":{"title":"drone \u306e project visibility \u3068\u306f","permalink":"/drone-project-visibility"}},"content":"drone 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\ntag \u540d\u306b\u3088\u308b\u5224\u5b9a\u65b9\u6cd5\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306f\u66f8\u3044\u3066\u306a\u3044\u306e\u3067\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\\n\\n```\\nwhen:\\n  ref: refs/tags/foo-*  # \u30bf\u30b0\u540d\u304c foo-* \u306a\u3089\u30b9\u30c6\u30c3\u30d7\u3092\u5b9f\u884c\\n```\\n\\n\u30b0\u30ed\u30d6 `*` \u306b\u306f `/` \u306f\u542b\u307e\u308c\u306a\u3044\u3053\u3068\u306b\u306f\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u4e0a\u8a18\u306e\u4f8b\u3060\u3068\u3001 tag `foo/bar/0.1.0` \u306f\u30de\u30c3\u30c1\u3057\u307e\u305b\u3093\u3002\\n\u3053\u308c\u306f Go \u306e [filepath.Match](https://golang.org/pkg/path/filepath/#Match) \u3092\u4f7f\u3063\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002\\n\\n* https://github.com/cncd/pipeline/blob/f8c48fc9fb9fd113c6e7dd941d63bb9f86a623cb/pipeline/frontend/yaml/constraint.go#L70\\n* https://github.com/cncd/pipeline/blob/f8c48fc9fb9fd113c6e7dd941d63bb9f86a623cb/pipeline/frontend/yaml/constraint.go#L80"},{"id":"/drone-project-visibility","metadata":{"permalink":"/drone-project-visibility","source":"@site/blog/drone-project-visibility.md","title":"drone \u306e project visibility \u3068\u306f","description":"\u6050\u3089\u304f\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8aac\u660e\u304c\u306a\u3044\u6c17\u304c\u3059\u308b\u306e\u3067\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002","date":"2018-09-30T11:32:20.000Z","formattedDate":"September 30, 2018","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":0.635,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"drone \u306e project visibility \u3068\u306f","date":"2018-09-30T11:32:20.000Z","tags":["drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"drone \u306e step \u3092\u5b9f\u884c\u3059\u308b\u304b\u5426\u304b\u3092\u30bf\u30b0\u540d\u3067\u5224\u5b9a\u3059\u308b\u65b9\u6cd5","permalink":"/drone-tag-conditional-step"},"nextItem":{"title":"drone \u306e matrix build \u304c27\u500b\u3057\u304b\u5b9f\u884c\u3055\u308c\u306a\u3044","permalink":"/drone-matrix-build-run-only-27"}},"content":"\u6050\u3089\u304f\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8aac\u660e\u304c\u306a\u3044\u6c17\u304c\u3059\u308b\u306e\u3067\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\\n\u3068\u8a00\u3063\u3066\u3082\u3001\u4ee5\u4e0b\u306eissue\u306b\u5168\u90e8\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3002\\n\\nhttps://github.com/drone/drone/issues/2042\\n\\ndrone\u306e web ui \u304b\u3089\u30ea\u30dd\u30b8\u30c8\u30ea\u3054\u3068\u306b\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\\n\u305d\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u8ab0\u306b\u898b\u3048\u308b\u304b\u306e\u8a2d\u5b9a\u3067\u3059\u3002\\n\\n* public: \u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u304f\u3066\u3082\u8ab0\u3067\u3082\u898b\u308c\u308b(public\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30d5\u30a9\u30eb\u30c8)\\n* private: \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u4eba\u3057\u304b\u898b\u308c\u306a\u3044(private\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30d5\u30a9\u30eb\u30c8)\\n* internal: \u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308c\u3070\u8ab0\u3067\u3082\u898b\u308c\u308b"},{"id":"/drone-matrix-build-run-only-27","metadata":{"permalink":"/drone-matrix-build-run-only-27","source":"@site/blog/drone-matrix-build-run-only-27.md","title":"drone \u306e matrix build \u304c27\u500b\u3057\u304b\u5b9f\u884c\u3055\u308c\u306a\u3044","description":"drone 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002","date":"2018-09-30T11:26:11.000Z","formattedDate":"September 30, 2018","tags":[],"readingTime":1.26,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"drone \u306e matrix build \u304c27\u500b\u3057\u304b\u5b9f\u884c\u3055\u308c\u306a\u3044","date":"2018-09-30T11:26:11.000Z","authors":["suzuki-shunsuke"]},"prevItem":{"title":"drone \u306e project visibility \u3068\u306f","permalink":"/drone-project-visibility"},"nextItem":{"title":"drone \u306e build \u306e timeout \u304c\u5909\u66f4\u3067\u304d\u306a\u3044","permalink":"/drone-build-timeout"}},"content":"drone 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```yaml\\nmatrix:\\n  ZOO:\\n  - 1\\n  - 2\\n  - 3\\n  - 4\\n  FOO:\\n  - 1\\n  - 2\\n  - 3\\n  - 4\\n  - 5\\n  - 6\\n  - 7\\n  - 8\\n  BAR:\\n  - 1\\n  - 2\\n```\\n\\n\u4e0a\u8a18\u306e\u5834\u5408\u3001\u672c\u6765 4 * 8 * 2 = 64 \u500b\u5b9f\u884c\u3055\u308c\u308b\u306f\u305a\u306ematrix builds \u304c27\u500b\u3057\u304b\u5b9f\u884c\u3055\u308c\u306a\u304b\u3063\u305f\u306e\u3067\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u305f\u3068\u3053\u308d\u3001\\n27\u500b\u3057\u304b\u5b9f\u884c\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u30cf\u30fc\u30c9\u30b3\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n* https://github.com/cncd/pipeline/blob/d4e09fd3021a16408bc3ebdd3500efd28f51e72c/pipeline/frontend/yaml/matrix/matrix.go#L11\\n* https://github.com/cncd/pipeline/blob/d4e09fd3021a16408bc3ebdd3500efd28f51e72c/pipeline/frontend/yaml/matrix/matrix.go#L93\\n\\n\u95a2\u4fc2\u3042\u308b\u90e8\u5206\u3060\u3051\u62bd\u51fa\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```go\\nlimitAxis = 25\\n\\naxisList := []Axis{}\\nfor p := 0; p < perm; p++ {\\n\\taxisList = append(axisList, axis)\\n\\tif p > limitAxis {\\n\\t\\tbreak\\n\\t}\\n}\\n```\\n\\n\u5236\u9650\u3092\u304b\u3051\u308b\u306e\u306f\u4ed5\u65b9\u306a\u3044\u3067\u3059\u304c\u3001\\n\u30a8\u30e9\u30fc\u3082 warning \u3082\u306a\u304f\u6b63\u5e38\u7d42\u4e86\u3057\u3001\u3067\u3082\u3088\u304f\u898b\u308b\u3068 27 \u500b\u3057\u304b\u5b9f\u884c\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\\n\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u306f\u6df7\u4e71\u3057\u307e\u3059\u306d\u3002\\nbuild \u306e\u7d50\u679c\u306e\u753b\u9762\u306e\u4e0a\u306e\u65b9\u306b warning \u304c\u3042\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\u3002"},{"id":"/drone-build-timeout","metadata":{"permalink":"/drone-build-timeout","source":"@site/blog/drone-build-timeout.md","title":"drone \u306e build \u306e timeout \u304c\u5909\u66f4\u3067\u304d\u306a\u3044","description":"drone 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002","date":"2018-09-30T11:16:28.000Z","formattedDate":"September 30, 2018","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":0.5,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"drone \u306e build \u306e timeout \u304c\u5909\u66f4\u3067\u304d\u306a\u3044","date":"2018-09-30T11:16:28.000Z","tags":["drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"drone \u306e matrix build \u304c27\u500b\u3057\u304b\u5b9f\u884c\u3055\u308c\u306a\u3044","permalink":"/drone-matrix-build-run-only-27"},"nextItem":{"title":"Drone \u306e build \u5b9f\u884c\u6642\u306e\u8a8d\u8a3c\u65b9\u6cd5","permalink":"/drone-git-authentication"}},"content":"drone 0.8.5 \u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\\n\\ndrone \u306e build \u306e \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u306e settings \u304b\u3089\u5909\u66f4\u3067\u304d\u305d\u3046\u3067\u3059\u304c\u3001\\n\u5b9f\u306f drone \u306e admin \u3057\u304b\u5909\u66f4\u3067\u304d\u307e\u305b\u3093\u3002\\n\\n\u30d6\u30e9\u30a6\u30b6\u306e\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\u30c4\u30fc\u30eb\u3092\u4f7f\u3046\u3068\u3001\u3053\u306e Timeout \u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u305f\u969b\u306b\\n\\n```\\nPATCH /api/repos/:owner/:name\\n```\\n\\n\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u98db\u3093\u3067\u3044\u308b\u306e\u3067\u3001\u305d\u3053\u304b\u3089\u30b3\u30fc\u30c9\u3092\u8ffd\u3044\u304b\u3051\u308b\u3068\u5206\u304b\u308a\u307e\u3059\u3002\\n\\n* https://github.com/drone/drone/blob/29785b86f6534ded974120de0fcf7c21397a9d0d/router/router.go#L109\\n* https://github.com/drone/drone/blob/29785b86f6534ded974120de0fcf7c21397a9d0d/server/repo.go#L117"},{"id":"/drone-git-authentication","metadata":{"permalink":"/drone-git-authentication","source":"@site/blog/drone-git-authentication.md","title":"Drone \u306e build \u5b9f\u884c\u6642\u306e\u8a8d\u8a3c\u65b9\u6cd5","description":"drone \u306e build \u306b\u304a\u3051\u308b GitHub (GitHub\u524d\u63d0\u3067\u66f8\u304d\u307e\u3059\u304c\u3001GitHub\u4ee5\u5916\u3067\u3082\u540c\u3058\u3060\u3068\u601d\u3044\u307e\u3059) \u306e\u8a8d\u8a3c\u306e\u8a71(\u3069\u3046\u3084\u3063\u3066\u8a8d\u8a3c\u3057\u3066\u3044\u308b\u304b)\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u304a\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002","date":"2018-09-30T10:44:27.000Z","formattedDate":"September 30, 2018","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":3.98,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Drone \u306e build \u5b9f\u884c\u6642\u306e\u8a8d\u8a3c\u65b9\u6cd5","date":"2018-09-30T10:44:27.000Z","tags":["drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"drone \u306e build \u306e timeout \u304c\u5909\u66f4\u3067\u304d\u306a\u3044","permalink":"/drone-build-timeout"},"nextItem":{"title":"Drone \u3068 Circle CI \u306e workspace \u306e\u6271\u3044\u306e\u9055\u3044\u306b\u3064\u3044\u3066","permalink":"/drone-circle-volume-difference"}},"content":"drone \u306e build \u306b\u304a\u3051\u308b GitHub (GitHub\u524d\u63d0\u3067\u66f8\u304d\u307e\u3059\u304c\u3001GitHub\u4ee5\u5916\u3067\u3082\u540c\u3058\u3060\u3068\u601d\u3044\u307e\u3059) \u306e\u8a8d\u8a3c\u306e\u8a71(\u3069\u3046\u3084\u3063\u3066\u8a8d\u8a3c\u3057\u3066\u3044\u308b\u304b)\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u304a\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\\ndrone \u306e build \u306f clone step \u3067\u5bfe\u8c61\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092 GitHub \u304b\u3089 clone \u3057\u3066\u304d\u3066\u3044\u307e\u3059\u3002\\n\u3053\u306e\u969b\u306b\u4f55\u304b\u3057\u3089\u306e\u65b9\u6cd5\u3067\u8a8d\u8a3c\u3057\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\\n\\n\u7d50\u8ad6\u3092\u8a00\u3046\u3068\u3001\\n\\n\u3042\u308b\u30ea\u30dd\u30b8\u30c8\u30eaA\u306ebuild\u3067\u306f\u3001\\n\u30ea\u30dd\u30b8\u30c8\u30eaA\u306e **drone\u9023\u643a\u3092\u6709\u52b9\u5316\u3057\u305f\u30e6\u30fc\u30b6\u30fc** B\u306e access token \u3092 **.netrc** \u306b\u66f8\u304d\u8fbc\u3093\u3067\u8a8d\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3088\u3063\u3066\u30e6\u30fc\u30b6\u30fcB\u306bclone\u3059\u308b\u6a29\u9650\u304c\u3042\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u306fclone\u3067\u304d\u308b\u3057\u3001\\n\u30e6\u30fc\u30b6\u30fcB\u306bclone\u3059\u308b\u6a29\u9650\u304c\u306a\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\u306fclone\u3067\u304d\u307e\u305b\u3093\u3002\\n\u3064\u307e\u308a\u3001 **\u8ab0\u304c\u9023\u643a\u3092\u6709\u52b9\u5316\u3059\u308b\u304b\u304c\u91cd\u8981** \u306b\u306a\u308a\u307e\u3059(\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u5f8c\u8ff0\u3057\u307e\u3059)\u3002\\n\u306a\u304a\u3001drone\u9023\u643a\u306e\u6709\u52b9\u5316\u306f\u305d\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306eowner\u4ee5\u4e0a\u3067\u306a\u3044\u3068\u51fa\u6765\u307e\u305b\u3093\u3002\\n\\ndrone\u4e0a\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u9023\u643a\u3092\u6709\u52b9\u5316\u3059\u308b\u3068\u3001\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306eHook\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e settings > Hooks \u304b\u3089\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\u3053\u306e Hook \u306e Payload URL \u3092\u898b\u308b\u3068 access_token \u30af\u30a8\u30ea\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\nJWT\u306e\u3088\u3046\u3067\u3059\u306d\u3002\u3053\u308c\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u9023\u643a\u3092\u6709\u52b9\u5316\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306etoken\u3067\u3059\u3002\\n\\n\u3053\u306etoken\u304c GitHub \u304b\u3089 drone \u3078\u306e webhook \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u9001\u3089\u308c\u3066\u304f\u308b\u306e\u3067\u3001\\ndrone \u5074\u3067\u8a8d\u8a3c\u3057\u3001\u8a8d\u8a3c\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306eGitHub  \u306eaccess token \u3092\u53d6\u5f97\u3057\u3001\\nbuild \u6642\u306b\u30b3\u30f3\u30c6\u30ca\u306e /root/.netrc \u306b\u66f8\u304d\u8fbc\u3080\u3088\u3046\u3067\u3059\u3002\\n\\n.netrc\u306b\u66f8\u304d\u8fbc\u307e\u308c\u3066\u3044\u308b\u306e\u306f\u8a66\u3057\u306b\u500b\u4eba\u306e private repository \u3067 .netrc \u3092cat\u3057\u3066\u307f\u308c\u3070\u308f\u304b\u308a\u307e\u3059\u3002\\n\u4ed6\u4eba\u3082\u898b\u3048\u308brepository\u3067cat\u3059\u308b\u3068\u60aa\u7528\u3055\u308c\u304b\u306d\u306a\u3044\u306e\u3067\u6c17\u3092\u3064\u3051\u307e\u3057\u3087\u3046\u3002\\n\\n```\\npipeline:\\nnetrc:\\nimage: alpine:3.6\\ncommands:\\n- cat ~/.netrc\\n```\\n\\n```\\n+ cat ~/.netrc\\nmachine gihub.com\\nlogin **************\\npassword x-oauth-basic\\n```\\n\\n## clone\u30b9\u30c6\u30c3\u30d7\u4ee5\u5916\u3067\u306e .netrc\u306e\u6d3b\u7528\\n\\n.netrc \u306e\u304a\u304b\u3052\u3067\u96e3\u3057\u3044\u3053\u3068\u8003\u3048\u305a\u306b clone \u51fa\u6765\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u304c\u3001\u3053\u306e .netrc \u306f\u5f53\u7136 clone \u30b9\u30c6\u30c3\u30d7\u4ee5\u5916\u3067\u3082\u4f7f\u3048\u307e\u3059\u3002\\n\u4f8b\u3048\u3070 private repository \u306e ansible role \u306e install \u3067\u3059\u3002\\n\\nroles.yml\\n \\n```yaml\\n- src: https://github.com/<owner>/<repo>\\n  name: foo.bar\\n  scm: git\\n```\\n\\n.drone.yml\\n\\n```yaml\\ncommands:\\n- ansible-galaxy install -r roles.yml\\n```\\n\\n## \u8ab0\u304c\u9023\u643a\u3092\u6709\u52b9\u5316\u3059\u308b\u3079\u304d\u304b\\n\\n\u7d50\u8ad6\u3092\u8a00\u3046\u3068\u3001\u30d9\u30b9\u30c8\u306a\u65b9\u6cd5\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u3002\\n\\n\u9023\u643a\u3092\u6709\u52b9\u5316\u3057\u305f\u4eba\u304c\u9000\u8077\u3057\u3066\u3057\u307e\u3063\u305f\u308a\u3001organization\u304b\u3089\u629c\u3051\u3066\u3057\u307e\u3063\u305f\u5834\u5408\u3001\u6025\u306b\u30d3\u30eb\u30c9\u304c\u5931\u6557\u3059\u308b\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002\\n\u7406\u60f3\u3092\u8a00\u3048\u3070\u7279\u5b9a\u306e\u500b\u4eba\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u9023\u643a\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u9023\u643a\u7528\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7528\u610f\u3059\u308b\u306e\u304c\u826f\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\\n\u305d\u308c\u306f\u305d\u308c\u3067\u904b\u7528\u304c\u96e3\u3057\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\ndrone API \u306a\u3044\u3057 CLI \u3067\u6709\u52b9\u5316\u306f\u51fa\u6765\u308b\u306e\u3067\u3001CI\u3067\u9023\u643a\u3092\u81ea\u52d5\u5316\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n* https://0-8-0.docs.drone.io/cli-repository-add/\\n* https://0-8-0.docs.drone.io/api-repo-create/\\n\\n\u81ea\u5206\u306e\u3068\u3053\u308d\u3067\u306f\u307e\u3060\u305d\u3053\u307e\u3067\u3084\u3063\u3066\u306a\u304f\u3001\u500b\u4eba\u3067\u6709\u52b9\u5316\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\\n\u81ea\u52d5\u5316\u3057\u305f\u3089\u307e\u305f\u8a18\u4e8b\u306b\u3067\u3082\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"/drone-circle-volume-difference","metadata":{"permalink":"/drone-circle-volume-difference","source":"@site/blog/drone-circle-volume-difference.md","title":"Drone \u3068 Circle CI \u306e workspace \u306e\u6271\u3044\u306e\u9055\u3044\u306b\u3064\u3044\u3066","description":"drone \u306f\u540c\u3058 pipeline \u306e step \u9593\u3067\u540c\u3058 workspace \u3092 docker \u306e volume \u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3053\u3068\u3067 workspace \u3092\u5171\u6709\u3057\u307e\u3059\u3002","date":"2018-09-30T10:27:59.000Z","formattedDate":"September 30, 2018","tags":[{"label":"drone","permalink":"/tags/drone"},{"label":"circleci","permalink":"/tags/circleci"}],"readingTime":2.765,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"Drone \u3068 Circle CI \u306e workspace \u306e\u6271\u3044\u306e\u9055\u3044\u306b\u3064\u3044\u3066","date":"2018-09-30T10:27:59.000Z","tags":["drone","circleci"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Drone \u306e build \u5b9f\u884c\u6642\u306e\u8a8d\u8a3c\u65b9\u6cd5","permalink":"/drone-git-authentication"},"nextItem":{"title":"drone exec \u3092\u4e26\u5217\u5b9f\u884c\u3057\u305f\u969b\u306edocker network name \u306e\u885d\u7a81\u306b\u3064\u3044\u3066","permalink":"/drone-exec-network-name-collision"}},"content":"drone \u306f\u540c\u3058 pipeline \u306e step \u9593\u3067\u540c\u3058 workspace \u3092 docker \u306e volume \u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3053\u3068\u3067 workspace \u3092\u5171\u6709\u3057\u307e\u3059\u3002\\n\\nhttp://docs.drone.io/workspace/\\n\\ncircle ci \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 job \u9593\u3067 workspace \u3092\u5171\u6709\u3057\u307e\u305b\u3093\u3002\\npersist_to_workspace \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u5171\u6709\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\\n\\nhttps://circleci.com/docs/2.0/workflows/#using-workspaces-to-share-data-among-jobs\\n\\ncircle ci \u306e\u5834\u5408\u306f volume \u3092\u5171\u6709\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092 archive \u3057\u3001\u6b21\u306e job \u3067\u5c55\u958b\u3059\u308b\u3053\u3068\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u5171\u6709\u3059\u308b\u3088\u3046\u3067\u3059\u3002\\n\\n\u3053\u306e\u9055\u3044\u306b\u306f\u4e00\u9577\u4e00\u77ed\u304c\u3042\u308a\u307e\u3059\u3002\\n\\ncircle ci \u306e\u5834\u5408\u306f archive, unarchive \u3059\u308b\u5206\u3001volume \u5171\u6709\u306b\u6bd4\u3079\u3066\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u3002\\n\\n\u305d\u306e\u305f\u3081\u3001\u4e0b\u624b\u306b job \u3092\u5206\u3051\u308b\u3088\u308a\u4e00\u3064\u306e job \u3067\u51e6\u7406\u3057\u305f\u307b\u3046\u304c\u51e6\u7406\u6642\u9593\u304c\u77ed\u304f\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u304c\u3001\\nbuild \u3084 test \u3068\u3044\u3063\u305f\u51e6\u7406\u306f\u51fa\u6765\u308c\u3070\u5225\u306e job \u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u3067\u3057\u3087\u3046\u3057\u3001\u305d\u308c\u3067\u306f workflow \u304c\u4f7f\u3048\u307e\u305b\u3093\u3002\\n\\n\u305f\u3060\u3057\u3001\u5171\u6709\u3059\u308b\u30d1\u30b9\u306f\u81ea\u7531\u306b\u9078\u3079\u308b\u306e\u3067\u5fc5\u8981\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b\u3053\u3068\u3067\u6642\u9593\u3092\u77ed\u7e2e\u3067\u304d\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001circle ci \u306e\u5834\u5408\u306f archive \u3059\u308b\u30d1\u30b9\u53ca\u3073\u5c55\u958b\u5148\u306e\u30d1\u30b9\u3092\u81ea\u7531\u306b\u9078\u3079\u308b\u306e\u3067\u81ea\u7531\u5ea6\u304c\u9ad8\u3044\u3067\u3059\u3002\\ndrone \u306e\u5834\u5408\u3001 workspace \u4ee5\u5916\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5171\u6709\u3067\u304d\u307e\u305b\u3093\u3002\\n\\n\u307e\u305f\u3001drone \u306e\u5834\u5408 volume \u3092\u5171\u6709\u3059\u308b\u306e\u3067\u540c\u3058 pipeline \u306e step \u306f\u540c\u3058\u30ce\u30fc\u30c9\u3067\u5b9f\u884c\u3055\u308c\u308b\u3068\u3044\u3046\u5236\u7d04\u304c\u3042\u308a\u307e\u3059\u304c\u3001\\ncircle ci \u306e\u5834\u5408\u3001\u5225\u306e\u30ce\u30fc\u30c9\u3067\u306e\u5b9f\u884c\u304c\u53ef\u80fd\u3067\u3059\u3002\\ndrone \u306e group \u3092\u4f7f\u3063\u3066\u4e26\u5217\u306b\u5b9f\u884c\u3059\u308b\u5834\u5408\u3001\u8907\u6570\u306e\u30ce\u30fc\u30c9\u306b\u5206\u6563\u3067\u304d\u307e\u305b\u3093\u304c\u3001 circle ci \u306e\u5834\u5408\u5206\u6563\u3067\u304d\u308b\u306e\u3067\u3088\u308a\u30b9\u30b1\u30fc\u30eb\u3057\u3084\u3059\u3044\u3068\u8a00\u3048\u308b\u3067\u3057\u3087\u3046\u3002\\n\\n## \u7d50\u5c40\u3069\u3063\u3061\u306e\u307b\u3046\u304c\u3044\u3044\u306e\u304b\\n\\n\u4e00\u9577\u4e00\u77ed\u304c\u3042\u308b\u3068\u8a00\u3063\u305f\u3068\u304a\u308a\u3001\u4e00\u6982\u306b\u3069\u3063\u3061\u304c\u826f\u3044\u3068\u306f\u8a00\u3048\u307e\u305b\u3093\u304c\u3001\u500b\u4eba\u7684\u306b\u306f drone \u306e\u3084\u308a\u65b9\u306e\u307b\u3046\u304c\u76f4\u611f\u7684\u3060\u3057\u3001\\n\u4f55\u3088\u308a\u901f\u3044\u306e\u3067\u597d\u304d\u3067\u3059\u3002\u540c\u3058 pipeline \u306e\u51e6\u7406\u3092\u8907\u6570\u306e\u30ce\u30fc\u30c9\u306b\u5206\u6563\u3055\u305b\u305f\u3044\u3053\u3068\u3063\u3066\u500b\u4eba\u7684\u306b\u306f\u3042\u307e\u308a\u3042\u308a\u307e\u305b\u3093\u3002"},{"id":"/drone-exec-network-name-collision","metadata":{"permalink":"/drone-exec-network-name-collision","source":"@site/blog/drone-exec-network-name-collision.md","title":"drone exec \u3092\u4e26\u5217\u5b9f\u884c\u3057\u305f\u969b\u306edocker network name \u306e\u885d\u7a81\u306b\u3064\u3044\u3066","description":"drone exec \u3092\u4e26\u5217\u5b9f\u884c\u3059\u308b\u3068 docker network name \u304c\u885d\u7a81\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002","date":"2018-09-30T09:52:34.000Z","formattedDate":"September 30, 2018","tags":[{"label":"drone","permalink":"/tags/drone"}],"readingTime":1.75,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"drone exec \u3092\u4e26\u5217\u5b9f\u884c\u3057\u305f\u969b\u306edocker network name \u306e\u885d\u7a81\u306b\u3064\u3044\u3066","date":"2018-09-30T09:52:34.000Z","tags":["drone"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"Drone \u3068 Circle CI \u306e workspace \u306e\u6271\u3044\u306e\u9055\u3044\u306b\u3064\u3044\u3066","permalink":"/drone-circle-volume-difference"},"nextItem":{"title":"go-gencfg - viper\u306e\u500b\u3005\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30e9\u30c3\u30d1\u30fc\u306e\u30b3\u30fc\u30c9\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf","permalink":"/go-gencfg"}},"content":"drone exec \u3092\u4e26\u5217\u5b9f\u884c\u3059\u308b\u3068 docker network name \u304c\u885d\u7a81\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n```\\n$ drone exec --local & drone exec --local\\n[1] 42934\\n2018/06/06 01:58:12 Error response from daemon: network drone_default is ambiguous (4 matches found on name)\\n2018/06/06 01:58:12 Error response from daemon: Conflict. The container name \\"/drone_step_0\\" is already in use by container \\"464a29b0726d6ff1a352d81df9c837330501085be550bb16abac3d338dfad887\\". You have to remove (or rename) that container to be able to reuse that name.\\n[1]  + exit 1     drone exec --local\\n```\\n\\ndrone \u306f pipeline \u5b9f\u884c\u6642\u306b network \u3092\u4f5c\u6210\u3057\u3001pipeline \u304c\u7d42\u4e86\u3059\u308b\u3068 network \u3092\u524a\u9664\u3057\u307e\u3059\u3002\\n\\n* https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/pipeline.go#L58\\n* https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/pipeline.go#L62\\n* https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/backend/docker/docker.go#L50\\n* https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/backend/docker/docker.go#L179\\n\\n\u524a\u9664\u3059\u308b\u306e\u3067\u3001\u4e26\u5217\u3067\u5b9f\u884c\u3057\u306a\u3044\u9650\u308a\u57fa\u672c\u7684\u306b\u885d\u7a81\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n\u306a\u304a\u3001 docker \u306e\u4ed5\u69d8\u3067\u306f\u540c\u3058\u540d\u524d\u306e network \u3092\u4f5c\u6210\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\\n\\n* https://github.com/moby/moby/issues/20648\\n* https://github.com/moby/moby/issues/18864\\n\\n`drone exec` \u306f `{prefix}_default` \u3068\u3044\u3046\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\nhttps://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/frontend/yaml/compiler/compiler.go#L85\\n\\n`{prefix}` \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 `drone` \u3067\u3059\u304c\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\\n\\nhttps://github.com/drone/drone-cli/blob/800d6949bd96847b4d5c400e261b18386ea2226f/drone/exec/exec.go#L62\\n\\n\u3053\u306eprefix\u3092\u5909\u3048\u308c\u3070\u885d\u7a81\u306f\u56de\u907f\u3067\u304d\u307e\u3059\u3002\\nbash, zsh\u306a\u3089\u6b21\u306e\u3088\u3046\u306b\u4e71\u6570\u3092\u6307\u5b9a\u3059\u308c\u3070\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n```\\n$ drone exec --local --prefix drone_${RANDOM}\\n```\\n\\n\u306a\u304a\u3001 `drone exec --help` \u306e\u4e2d\u306b `--prefix` \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u306f\u660e\u793a\u7684\u306bhelp\u304b\u3089\u6d88\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002\\n\\nhttps://github.com/drone/drone-cli/blob/eca37514c1c3a441dbb0618531b91e05f56067e8/drone/exec/exec.go#L65\\n\\n\u306a\u305c\u6d88\u3057\u3066\u3044\u308b\u304b\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u3002\\n\\n\u306a\u304a\u3001 drone \u306e build \u3067\u306f prefix \u306b \u30d7\u30ed\u30bb\u30b9ID\u3068\u4e71\u6570\u3092\u4f7f\u3046\u3053\u3068\u3067\u885d\u7a81\u3092\u907f\u3051\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\\n\\nhttps://github.com/drone/drone/blob/29785b86f6534ded974120de0fcf7c21397a9d0d/server/hook.go#L552"},{"id":"/go-gencfg","metadata":{"permalink":"/go-gencfg","source":"@site/blog/go-gencfg.md","title":"go-gencfg - viper\u306e\u500b\u3005\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30e9\u30c3\u30d1\u30fc\u306e\u30b3\u30fc\u30c9\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf","description":"\u81ea\u4f5c\u306eOSS go-gencfg \u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2018-09-06T14:59:35.000Z","formattedDate":"September 6, 2018","tags":[{"label":"oss","permalink":"/tags/oss"},{"label":"golang","permalink":"/tags/golang"}],"readingTime":0.47,"truncated":false,"authors":[{"name":"Shunsuke Suzuki","title":"SRE / OSS Contributor / Tool Maker / Go / Terraform","url":"https://github.com/suzuki-shunsuke","imageURL":"https://github.com/suzuki-shunsuke.png","key":"suzuki-shunsuke"}],"frontMatter":{"title":"go-gencfg - viper\u306e\u500b\u3005\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30e9\u30c3\u30d1\u30fc\u306e\u30b3\u30fc\u30c9\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf","date":"2018-09-06T14:59:35.000Z","tags":["oss","golang"],"authors":["suzuki-shunsuke"]},"prevItem":{"title":"drone exec \u3092\u4e26\u5217\u5b9f\u884c\u3057\u305f\u969b\u306edocker network name \u306e\u885d\u7a81\u306b\u3064\u3044\u3066","permalink":"/drone-exec-network-name-collision"}},"content":"\u81ea\u4f5c\u306eOSS [go-gencfg](https://github.com/suzuki-shunsuke/go-gencfg) \u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\nGolang \u3067 [viper](https://github.com/spf13/viper) \u3068\u3044\u3046\u6c4e\u7528\u7684\u306a\u8a2d\u5b9a\u7ba1\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308a\u307e\u3059\u304c\u3001\\n\u7279\u5b9a\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u306b viper \u306e\u30e9\u30c3\u30d1\u30fc\u3092\u751f\u6210\u3059\u308bCLI\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\\n\u4f7f\u3044\u65b9\u3084\u958b\u767a\u306e\u80cc\u666f\u3092\u66f8\u3053\u3046\u304b\u3068\u601d\u3044\u307e\u3057\u305f\u304c\u3001\u3060\u3044\u305f\u3044 README \u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\\n\u305d\u3061\u3089\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\u3002\\n\\nhttps://github.com/suzuki-shunsuke/go-gencfg/blob/master/README.md"}]}')}}]);