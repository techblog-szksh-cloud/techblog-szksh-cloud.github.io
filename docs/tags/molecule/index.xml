<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>molecule on melody</title>
    <link>https://techblog-szksh-cloud.github.io/tags/molecule/</link>
    <description>Recent content in molecule on melody</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>jp</language>
    <lastBuildDate>Thu, 06 Dec 2018 23:08:04 +0900</lastBuildDate><atom:link href="https://techblog-szksh-cloud.github.io/tags/molecule/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>molecule でansible の role と playbook をテストする</title>
      <link>https://techblog-szksh-cloud.github.io/ansible-molecule/</link>
      <pubDate>Thu, 06 Dec 2018 23:08:04 +0900</pubDate>
      
      <guid>https://techblog-szksh-cloud.github.io/ansible-molecule/</guid>
      <description>ansible 専用の testing ツール molecule を紹介します。 molecule の公式ドキュメント以外の情報は少ないので、参考になれば幸いです。
以前 Docker を使って ansible のテストをする方法を紹介しました。
https://suzuki-shunsuke.github.io/test-ansible-on-docker/
この際は Docker Compose と簡単なシェルスクリプトを使って実現しました。 これはこれでブラックボックスな部分がなく、学習コストも低くて悪くないので興味のある方はそちらもご参照ください。
molecule は ansible 専用の testing ツールです。 基本的に playbook というより role 用のツールですが、playbookのテストも工夫すれば出来ます。
 情報が少ない 公式ドキュメントも分かりづらい部分がある コマンドがエラー吐いて失敗した際に、ググっても情報が出てこないので辛い  という風に辛い部分もありますが、
 star数はそれなりにある ansible の公式のプロジェクトである https://github.com/ansible/molecule/ geerlingguy さんも使ってる  という風に良い面もあります。
それでは使っていきましょう。
インストール https://molecule.readthedocs.io/en/latest/installation.html
$ pip install molecule Docker を使う場合 docker-py も必要です。
$ pip install docker-py role のテスト playbookに比べて role のテストは簡単です。
role のディレクトリ(tasksやfilesなどがあるディレクトリ)に移動してコマンドを実行します。
$ molecule init scenario -r &amp;lt;role name&amp;gt; こうすると molecule ディレクトリが生成されます。</description>
    </item>
    
  </channel>
</rss>
