<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Melody Blog</title>
        <link>https://techblog.szksh.cloud/</link>
        <description>Melody Blog</description>
        <lastBuildDate>Sat, 31 Dec 2022 13:13:55 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <copyright>Copyright Â© 2018 Shunsuke Suzuki.</copyright>
        <item>
            <title><![CDATA[2022 å¹´æŒ¯ã‚Šè¿”ã‚Š]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022</guid>
            <pubDate>Sat, 31 Dec 2022 13:13:55 GMT</pubDate>
            <description><![CDATA[2022 å¹´ã‚’æŒ¯ã‚Šè¿”ã£ã¦ã„ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>2022 å¹´ã‚’æŒ¯ã‚Šè¿”ã£ã¦ã„ãã¾ã™ã€‚</p><ul><li><a href="https://zenn.dev/shunsuke_suzuki/articles/what-i-did-2022-01" target="_blank" rel="noopener noreferrer">2022-01</a></li><li><a href="/what-i-did-2022-02">2022-02</a></li><li><a href="/what-i-did-2022-03">2022-03</a></li><li><a href="/what-i-did-2022-04">2022-04</a></li><li><a href="/what-i-did-2022-05">2022-05</a></li><li><a href="/what-i-did-2022-06">2022-06</a></li><li><a href="/what-i-did-2022-07">2022-07</a></li><li><a href="/what-i-did-2022-08">2022-08</a></li><li><a href="/what-i-did-2022-09">2022-09</a></li><li><a href="/what-i-did-2022-10">2022-10</a></li><li><a href="/what-i-did-2022-11">2022-11</a></li><li><a href="/what-i-did-2022-12">2022-12</a></li></ul><p>--</p><ul><li><a href="https://suzuki-shunsuke.github.io/profile/oss-contribution" target="_blank" rel="noopener noreferrer">https://suzuki-shunsuke.github.io/profile/oss-contribution</a></li><li><a href="https://suzuki-shunsuke.github.io/profile/oss-development" target="_blank" rel="noopener noreferrer">https://suzuki-shunsuke.github.io/profile/oss-development</a></li></ul><p>è©³ç´°ã«ã¤ã„ã¦ã¯ä¸Šè¨˜ã®ãƒªãƒ³ã‚¯ã«è­²ã‚‹ã¨ã—ã¦ã€å¤§ããªå‡ºæ¥äº‹ã¨ã—ã¦ã¯</p><ul><li><a href="https://zenn.dev/shunsuke_suzuki/articles/tfaction-introduction" target="_blank" rel="noopener noreferrer">2022-01 tfaction ã®ãƒªãƒªãƒ¼ã‚¹</a></li><li>2022-01 tfaction ã¨ tfcmt ãŒ weekly.tf ã§ç´¹ä»‹ã•ã‚Œã‚‹<ul><li><a href="https://weekly.tf/issues/weekly-tf-issue-69-tools-for-terraform-workflow-tfcmt-compost-trunk-tfnotify-multi-end-deploy-hcl2json-984084" target="_blank" rel="noopener noreferrer">weekly.tf - Issue #69</a></li><li><a href="https://weekly.tf/issues/weekly-tf-issue-70-monorepos-platform-infra-team-terraform-scale-environment-as-code-995507" target="_blank" rel="noopener noreferrer">weekly.tf - Issue #70</a></li></ul></li><li>ğŸš€ <a href="/job-change-2022-06">2022-07-01 Mercari ã«è»¢è·</a></li><li><a href="https://zenn.dev/shunsuke_suzuki/articles/gha-trigger-action" target="_blank" rel="noopener noreferrer">2022-09 gha-trigger ã®ãƒªãƒªãƒ¼ã‚¹</a></li><li>ğŸš€ 2022-11 ä¸€äººæš®ã‚‰ã—ã‚’å§‹ã‚ãŸ</li><li>2022-12 aqua ã® Standard Registry ã® package æ•°ãŒ 1,000 ã«åˆ°é”</li><li>aqua ãŒ <a href="https://github.com/aquaproj/aqua/releases/tag/v0.8.11" target="_blank" rel="noopener noreferrer">v0.8.11</a> ã‹ã‚‰ <a href="https://github.com/aquaproj/aqua/releases/tag/v1.28.0" target="_blank" rel="noopener noreferrer">v1.28.0</a> ã¾ã§ update ã•ã‚Œã€æ§˜ã€…ãªæ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã‚‹</li><li>tfaction ãŒã„ãã¤ã‹ã®ä¼æ¥­ã§å°å…¥ã•ã‚Œã‚‹<ul><li><a href="https://zenn.dev/luup/articles/sre-nakanishi-20221218" target="_blank" rel="noopener noreferrer">https://zenn.dev/luup/articles/sre-nakanishi-20221218</a></li><li><a href="https://twitter.com/kekekenta/status/1584860647556546560" target="_blank" rel="noopener noreferrer">https://twitter.com/kekekenta/status/1584860647556546560</a></li></ul></li><li><a href="https://aquaproj.github.io/docs/slide-blog#non-official-blogs" target="_blank" rel="noopener noreferrer">aqua ãŒå¹¾ã¤ã‹ã® blog ã§ç´¹ä»‹ã•ã‚Œã‚‹</a></li></ul><p>è‰²ã€…æŒ™ã’ã¾ã—ãŸãŒã€ç’°å¢ƒã®å¤‰åŒ–ã¨ã„ã†æ„å‘³ã§ã¯è»¢è·ã¨ä¸€äººæš®ã‚‰ã—ãŒéå¸¸ã«å¤§ãã‹ã£ãŸã§ã™ã­ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è»¢è·">è»¢è·<a href="#è»¢è·" class="hash-link" aria-label="Direct link to è»¢è·" title="Direct link to è»¢è·">â€‹</a></h3><p>è»¢è·ã—ã¦ã‹ã‚‰ã¯åŸºæœ¬è‹±èªã§ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ(ã¨ã„ã£ã¦ã‚‚æ—¥æœ¬äººã—ã‹ã„ãªã„ã‚ˆã†ãªå ´ã§ã¯æ—¥æœ¬èªã§è©±ã—ã¾ã™ãŒ)ã€‚
OSS æ´»å‹•ãªã©ã‚’é€šã˜ã¦è‹±èªã®èª­ã¿æ›¸ãã¯ã“ã‚Œã¾ã§ã‚‚ã—ã¦ããŸã®ã§ã•ã»ã©è‹¦ã§ã¯ãªã„ã®ã§ã™ãŒã€ Listening, Speaking ã«ã¯çµæ§‹è‹¦åŠ´ã‚’ã—ã¦ã„ã¾ã™ã€‚è‹±èªã®å­¦ç¿’ãŒé‡è¦ãªã®ã¯ã‚ã‹ã£ã¦ã„ãªãŒã‚‰ã‚‚ã€ã©ã†ã—ã¦ã‚‚ OSS æ´»å‹•ã®æ–¹ã«æ™‚é–“ã¨æ°—åŠ›ã‚’è²»ã‚„ã—ã¦ã—ã¾ã„ãŒã¡ã§ã™ã€‚ã¨ã¯ã„ãˆã€è‡ªèº«ã®ä»Šå¾Œã®ã‚­ãƒ£ãƒªã‚¢ã‚’è€ƒãˆã‚‹ã¨è‹±èªã¯å¤šåˆ†é¿ã‘ã‚‰ã‚Œãªã„ã—ãªã‚“ã¨ã‹ã‚„ã£ã¦ã„ãã—ã‹ãªã„ã§ã™ã­ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸€äººæš®ã‚‰ã—">ä¸€äººæš®ã‚‰ã—<a href="#ä¸€äººæš®ã‚‰ã—" class="hash-link" aria-label="Direct link to ä¸€äººæš®ã‚‰ã—" title="Direct link to ä¸€äººæš®ã‚‰ã—">â€‹</a></h3><p>ã“ã‚Œã¾ã§ãšã£ã¨å®Ÿå®¶ãã‚‰ã—ã ã£ãŸã®ã§ã™ãŒã€ã‚ˆã†ã‚„ãå®Ÿå®¶ã‚’å‡ºã¦ä¸€äººæš®ã‚‰ã—ã‚’å§‹ã‚ã¾ã—ãŸã€‚ç”Ÿæ´»åŠ›0ã®è‡ªåˆ†ã«çœŸã£å½“ãªæš®ã‚‰ã—ãŒå‡ºæ¥ã‚‹ã®ã‹ã‚ã¾ã‚Šè‡ªä¿¡ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€æ„å¤–ã¨ã¡ã‚ƒã‚“ã¨ã—ãŸç”Ÿæ´»ã‚’é€ã£ã¦ã„ã¾ã™ã€‚ 3 é£Ÿè‡ªç‚Šã—ã¦ã‚‹ã—ã€‚
é‹å‹•ã‚‚ã—ã¦æ¯æ—¥ä½“çµ„æˆè¨ˆã«ã‚‚ä¹—ã‚‹ã‚ˆã†ã«ãªã‚Šã€ 1 å¹´å‰ã‚ˆã‚Š 3, 4 kg ãã‚‰ã„ç—©ã›ã¾ã—ãŸã€‚ã„ã„è©±ã§ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gha-trigger">gha-trigger<a href="#gha-trigger" class="hash-link" aria-label="Direct link to gha-trigger" title="Direct link to gha-trigger">â€‹</a></h3><p>(å‡ºæ¥ã‚Œã° A ã‚’ä½¿ã„ãŸã„ãŒ) A ã§ã¯ B ã¯å‡ºæ¥ãªã„ã‹ã‚‰ C ã‚’ä½¿ã„ã¾ã™ã€ã¨è¨€ã‚ã‚ŒãŸã‚‰ã€ã„ã‚„ A ã§ã‚‚ B ã¯å‡ºæ¥ã‚‹ã‚ˆã¨è¨€ã„ãŸããªã‚‹ã®ãŒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã„ã†ã‚‚ã®ã§ã™(?)ã€‚
ã¤ã¾ã‚Šã€ä½œã£ãŸèƒŒæ™¯ã¨ã—ã¦ã¯å¿…è¦ã ã‹ã‚‰ä½œã£ãŸã¨ã„ã†ã‚ˆã‚Šã¯ã€ GitHub Actions ã§ã‚‚å‡ºæ¥ã‚‹ã¨ã„ã†ã“ã¨ã‚’ç¤ºã™ãŸã‚ã«ä½œã£ã¦ã¿ã›ãŸã¨ã„ã†ã¨ã“ã‚ãŒå¤§ãã„ã§ã™ã€‚
ã¾ãã€Œã“ã†ã™ã‚Œã°å‡ºæ¥ã‚‹ã‚ˆã€ã£ã¦è¨€ã†ã®ã ã‘ã§ã‚ã‚Œã°ç°¡å˜ã§ã™ãŒã€å®Ÿéš›ã«å‹•ãã‚‚ã®ã‚’ä½œã£ã¦ã¿ã›ã‚‹ã®ã¯è‡ªåˆ†ã‚‰ã—ã„ã¨ã“ã‚ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå«ã‚ã¦æŠ˜è§’åŠ›ã‚’å…¥ã‚Œã¦ä½œã£ãŸã®ã§æ´»ç”¨ã—ãŸã„ã¨ã“ã‚ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ç¾çŠ¶è‡ªåˆ†ã®æ–¹ã§ã¯æ´»ç”¨ã§ãã¦ã„ã¾ã›ã‚“ã€‚
ç’°å¢ƒå¤‰æ•° <code>GITHUB_*</code> ã‚’å¤‰æ›´ã§ããªã„(run step å†…éƒ¨ã§ã¯å¤‰æ›´ã§ãã‚‹ã‘ã©) ã¨ã„ã† GitHub Actions ã®åˆ¶ç´„ãŒçµæ§‹å³ã—ãã€æ—¢å­˜ã® Action ã‚’æ´»ç”¨ã—ã¥ã‚‰ã„ã¨ã„ã†ã®ãŒãƒãƒƒã‚¯ã‹ãªã¨æ€ã„ã¾ã™ã€‚
ä¸€æ–¹ã§ Google Cloud Build ã‚„ AWS CodeBuild ã‹ã‚‰ã®ç§»è¡Œå…ˆã¨ã—ã¦ã¯ã‚ã‚Šã‹ãªã¨ã¯æ€ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfaction">tfaction<a href="#tfaction" class="hash-link" aria-label="Direct link to tfaction" title="Direct link to tfaction">â€‹</a></h3><p>Terraform ã® Workflow ã¯å„ç¤¾ã§å€‹åˆ¥ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¦ OSS ã®ã‚ˆã†ãªå†åˆ©ç”¨å¯èƒ½ãªå½¢ã§å…¬é–‹ã•ã‚Œã‚‹ã“ã¨ã¯å°‘ãªã„ã¨æ€ã†ã®ã§ (atlantis ãªã‚“ã‹ã¯ã‚ã‚Šã¾ã™ãŒã€ã‚ã¾ã‚Šè‰¯ãã—ã‚Šã¾ã›ã‚“) ã€ tfaction ã®ãƒªãƒªãƒ¼ã‚¹ã¯æ„ç¾©æ·±ã„ã‚‚ã®ã ã£ãŸã¨æ€ã£ã¦ã„ã¾ã™ã€‚
tfaction ã‚’ä½¿ã‚ãªã„ã‚‚ã®ã®ã€ tfaction ã®ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢ã‚’å‚è€ƒã« Terraform Workflow ã‚’å®Ÿè£…ã—ãŸã¨ã„ã†è©±ã‚‚ãŸã¾ã«èãã¾ã™ã€‚ (tfaction ä½¿ãˆã°ã„ã„ã®ã«ãªã¨ã¯æ€ã„ã¤ã¤) ãã‚Œã‚‚æƒ³å®šã•ã‚ŒãŸ tfaction ã®ä½¿ã‚ã‚Œæ–¹ã§ã€å˜ã« blog ã§ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢ã‚’å…¬é–‹ã™ã‚‹ã‚ˆã‚Šã‚‚ OSS ã®ã‚ˆã†ã«å®Ÿè¡Œå¯èƒ½ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ãƒ¡ãƒ³ãƒ†å¯èƒ½ãªå½¢ã§å…¬é–‹ã§ããŸã“ã¨ã«æº€è¶³ã—ã¦ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua">aqua<a href="#aqua" class="hash-link" aria-label="Direct link to aqua" title="Direct link to aqua">â€‹</a></h3><p>2022 å¹´ã¯ aqua ä¸­å¿ƒã®å¹´ã¨è¨€ã£ã¦ã‚‚éè¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã‹ãªã‚Šã®æ™‚é–“ã‚’è²»ã‚„ã—ã¾ã—ãŸã€‚
çµæœã¨ã—ã¦å˜ã«ã€Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®æ‰‹é–“ãŒã¡ã‚‡ã£ã¨çœã‘ã¦ä¾¿åˆ©ã€ãªãƒ„ãƒ¼ãƒ«ã¨ã¯æ¬¡å…ƒãŒé•ã†ãƒ„ãƒ¼ãƒ«ã«ãªã£ãŸã¨æ€ã£ã¦ã„ã¾ã™ã€‚
ãã®å‰²ã« GitHub Star æ•°ãŒå°‘ãªãã€è‡ªåˆ†ã®è€ƒãˆã¦ã„ã‚‹ aqua ã®è‰¯ã•ãŒååˆ†ã«ç†è§£ã•ã‚Œã¦ã„ãªã„ç‚¹ã‚’æ®‹å¿µã«æ€ã„ã¾ã™ã€‚
ãã‚Œã§ã‚‚å¹¾ã¤ã‹ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã§ç´¹ä»‹ã„ãŸã ã„ãŸã‚Šã€ã„ã‚ã„ã‚ãªæ–¹ã« contribution ã—ã¦ã„ãŸã ã„ãŸã‚Šã€ Sponsor ã«ãªã‚ŠãŸã„ã¨è¨€ã£ã¦ã„ãŸã ã‘ãŸã‚Šã€è‘—åãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ–¹ã«èˆˆå‘³ã‚’æŒã£ã¦ã‚‚ã‚‰ã£ã¦ contribution ã—ã¦ã„ãŸã ã‘ãŸã‚Šã¨ã€ã‚ã‚ŠãŒãŸã„ã“ã¨ã‚‚æ²¢å±±ã‚ã‚Šã¾ã—ãŸã€‚
Sigstore ã‚„ SLSA ã¨ã„ã£ãŸè‡ªåˆ†ã«å–ã£ã¦æ–°ã—ã„æŠ€è¡“ã‚’å­¦ã‚“ã§å–ã‚Šå…¥ã‚ŒãŸã‚Šã€æŠ€è¡“çš„ãªãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚‚è‰²ã€…å‡ºæ¥ã¾ã—ãŸã€‚</p><p>Standard Registry ãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹ package ã®æ•°ãŒé‚ã« 1,000 ã«åˆ°é”ã—ã¾ã—ãŸã€‚ã“ã‚Œã¯ã‹ãªã‚Šã™ã”ã„ã“ã¨ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚æœ€è¿‘ã¯è‡ªåˆ†ã‚ˆã‚Šã‚‚ã‚€ã—ã‚ä»–ã® contributor ã®æ–¹ã€…ã‹ã‚‰è¿½åŠ ã—ã¦ã„ãŸã ãã“ã¨ã‚‚å¤šã 2022-12-31 ç¾åœ¨ aqua-registry ã® contributor ã®æ•°ã¯ 34 äººã«ãªã£ã¦ã„ã¾ã™ã€‚ã‚ã‚ŠãŒãŸã„è©±ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2022-12-31-æ™‚ç‚¹ã®-github-status">2022-12-31 æ™‚ç‚¹ã® GitHub Status<a href="#2022-12-31-æ™‚ç‚¹ã®-github-status" class="hash-link" aria-label="Direct link to 2022-12-31 æ™‚ç‚¹ã® GitHub Status" title="Direct link to 2022-12-31 æ™‚ç‚¹ã® GitHub Status">â€‹</a></h2><p>Followers: 180</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/13323303/210130405-7096c36a-a39c-4097-b064-450174dc092a.png" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://user-images.githubusercontent.com/13323303/210130410-a5dfdf9a-6094-4371-9cd1-102ad13cb0e5.png" alt="image" class="img_ev3q"></p><p><a href="/job-change-2022-06/#%E3%81%8A%E3%81%BE%E3%81%91-oss-%E6%B4%BB%E5%8B%95%E3%81%AE%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A">7 ãƒ¶æœˆå‰</a>ã¨æ¯”ã¹ã‚‹ã¨ã¾ãã¾ãå¢—ãˆã¾ã—ãŸã­ã€‚ commit æ•°ã¯çµæ§‹æ¸›ã£ã¦ã—ã¾ã£ã¦ã¾ã™ãŒã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ¥å¹´å–ã‚Šçµ„ã¿ãŸã„ã“ã¨">æ¥å¹´å–ã‚Šçµ„ã¿ãŸã„ã“ã¨<a href="#æ¥å¹´å–ã‚Šçµ„ã¿ãŸã„ã“ã¨" class="hash-link" aria-label="Direct link to æ¥å¹´å–ã‚Šçµ„ã¿ãŸã„ã“ã¨" title="Direct link to æ¥å¹´å–ã‚Šçµ„ã¿ãŸã„ã“ã¨">â€‹</a></h2><p>æ¥å¹´ã‚‚å¼•ãç¶šãã€ OSS æ´»å‹•ã‚’ä¸­å¿ƒã«é ‘å¼µã‚Šã¾ã™ã€‚</p><ul><li>aqua<ul><li>Registry ã® checksum æ¤œè¨¼ (æœªå®š)</li><li>v2 ãƒªãƒªãƒ¼ã‚¹</li><li>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã‚‚å«ã‚ãŸãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°</li><li>ç¤¾å†…ã§ã‚‚ã‚‚ã£ã¨å°å…¥ã—ã¦ã„ããŸã„ (å€‹äººã®é¡˜æœ›ã§ã™)</li></ul></li><li>tfaction<ul><li>ã‚ˆã‚Šæ±ç”¨çš„ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ (æœªå®š)<ul><li>ç¾çŠ¶æ±ºã‚æ‰“ã¡ã•ã‚Œã¦ã„ã‚‹éƒ¨åˆ†ã‚’ä¸€éƒ¨è¨­å®šå¯èƒ½ã«ã§ããªã„ã‹</li></ul></li><li>Reusable Workflow ã®æä¾› (æœªå®š)<ul><li>éœ€è¦ã‚ã‚‹ã®ã‹(?)</li></ul></li></ul></li><li>æ–°ã—ã„ OSS ã®é–‹ç™º<ul><li>tfcmt, aqua, tfaction ã«æ¬¡ã OSS ã‚’ä½œã‚ŠãŸã„</li></ul></li><li>GitHub Sponsor å§‹ã‚ã‚‹</li><li>è‹±èª<ul><li>Listening, Speaking é ‘å¼µã‚‹<ul><li>ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚­ãƒ£ãƒ³ãƒ—å§‹ã‚ã‚ˆã†ã‹ãªã</li></ul></li><li>æ–‡æ³•ã‚‚å‹‰å¼·ã—ç›´ã—ãŸã»ã†ãŒã„ã„æ°—ã‚‚ã™ã‚‹ãŒã€ã©ã†ã™ã‚‹ã®ãŒã„ã„ã‚“ã ã‚ã†ã‹</li></ul></li></ul>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[Looking back at Dec 2022]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-12</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-12</guid>
            <pubDate>Fri, 30 Dec 2022 13:13:55 GMT</pubDate>
            <description><![CDATA[Blog posts]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog-posts">Blog posts<a href="#blog-posts" class="hash-link" aria-label="Direct link to Blog posts" title="Direct link to Blog posts">â€‹</a></h2><ul><li>2022-12-27: <a href="https://zenn.dev/shunsuke_suzuki/articles/aqua-cosign-slsa" target="_blank" rel="noopener noreferrer">Cosign ã¨ SLSA ã«ã‚ˆã‚‹ aqua CLI Version Manager ã® Security æ”¹å–„</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution">OSS Contribution<a href="#oss-contribution" class="hash-link" aria-label="Direct link to OSS Contribution" title="Direct link to OSS Contribution">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="issue">Issue<a href="#issue" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">â€‹</a></h3><table><thead><tr><th>created date</th><th>repository</th><th>short description</th></tr></thead><tbody><tr><td>2022-12-18</td><td><a href="https://github.com/sigstore/cosign" target="_blank" rel="noopener noreferrer">sigstore/cosign</a></td><td><a href="https://github.com/sigstore/cosign/issues/2554" target="_blank" rel="noopener noreferrer">Improve the document for new users to understand quickly that Cosign supports blobs signing</a></td></tr><tr><td>2022-12-01</td><td><a href="https://github.com/cloudflare/cloudflared" target="_blank" rel="noopener noreferrer">cloudflare/cloudflared</a></td><td><a href="https://github.com/cloudflare/cloudflared/issues/831" target="_blank" rel="noopener noreferrer">cloudflared-darwin-amd64.tgz of the version 2022.11.1 is empty</a></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pull-request">Pull Request<a href="#pull-request" class="hash-link" aria-label="Direct link to Pull Request" title="Direct link to Pull Request">â€‹</a></h3><table><thead><tr><th>merged date</th><th>repository</th><th>lang</th><th>PR's short description</th></tr></thead><tbody><tr><td>2022-12-29</td><td><a href="https://github.com/bufbuild/protoc-gen-validate" target="_blank" rel="noopener noreferrer">bufbuild/protoc-gen-validate</a></td><td>document</td><td><a href="https://github.com/bufbuild/protoc-gen-validate/pull/765" target="_blank" rel="noopener noreferrer">docs: fix installation</a></td></tr><tr><td>2022-12-28</td><td><a href="https://github.com/crazy-max/diun" target="_blank" rel="noopener noreferrer">crazy-max/diun</a></td><td>dockerfile</td><td><a href="https://github.com/crazy-max/diun/pull/743" target="_blank" rel="noopener noreferrer">chore: fix the file extension</a></td></tr><tr><td>2022-12-22</td><td><a href="https://github.com/x-motemen/blogsync" target="_blank" rel="noopener noreferrer">x-motemen/blogsync</a></td><td>go</td><td><a href="https://github.com/x-motemen/blogsync/pull/56" target="_blank" rel="noopener noreferrer">chore: build assets for Windows</a></td></tr><tr><td>2022-12-03</td><td><a href="https://github.com/mercari/github-app-token-generator" target="_blank" rel="noopener noreferrer">mercari/github-app-token-generator</a></td><td>go</td><td><a href="https://github.com/mercari/github-app-token-generator/pull/5" target="_blank" rel="noopener noreferrer">fix: use GITHUB_OUTPUT instead of deprecated set-output command</a></td></tr><tr><td>2022-12-03</td><td><a href="https://github.com/slsa-framework/slsa-verifier" target="_blank" rel="noopener noreferrer">slsa-framework/slsa-verifier</a></td><td>go</td><td><a href="https://github.com/slsa-framework/slsa-verifier/pull/376" target="_blank" rel="noopener noreferrer">docs: fix go install</a></td></tr><tr><td>2022-12-02</td><td><a href="https://github.com/slsa-framework/slsa-verifier" target="_blank" rel="noopener noreferrer">slsa-framework/slsa-verifier</a></td><td>go</td><td><a href="https://github.com/slsa-framework/slsa-verifier/pull/375" target="_blank" rel="noopener noreferrer">docs: refer v2.0.0 in README</a></td></tr><tr><td>2022-12-02</td><td><a href="https://github.com/slsa-framework/slsa-verifier" target="_blank" rel="noopener noreferrer">slsa-framework/slsa-verifier</a></td><td>go</td><td><a href="https://github.com/slsa-framework/slsa-verifier/pull/373" target="_blank" rel="noopener noreferrer">fix: fix the Go package version to v2</a></td></tr><tr><td>2022-12-02</td><td><a href="https://github.com/slsa-framework/slsa-verifier" target="_blank" rel="noopener noreferrer">slsa-framework/slsa-verifier</a></td><td>go</td><td><a href="https://github.com/slsa-framework/slsa-verifier/pull/374" target="_blank" rel="noopener noreferrer">docs: add the checksum of v2.0.0</a></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-development">OSS Development<a href="#oss-development" class="hash-link" aria-label="Direct link to OSS Development" title="Direct link to OSS Development">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua">aqua<a href="#aqua" class="hash-link" aria-label="Direct link to aqua" title="Direct link to aqua">â€‹</a></h3><p>The notable change is <a href="https://aquaproj.github.io/docs/reference/cosign-slsa/" target="_blank" rel="noopener noreferrer">Cosign and SLSA Provenance support</a>.
You can install aqua and tools securely.
And the Improvement of <code>aqua update-checksum</code> command is also important.</p><p>Please see Document and Release Notes for the detail.</p><ul><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.28.0" target="_blank" rel="noopener noreferrer">v1.28.0</a><ul><li>Improved aqua update-checksum command<ul><li>Ignore unrelated files' checksums in checksum files</li><li>Support pruning unused checksums in aqua-checksums.json</li></ul></li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.27.0" target="_blank" rel="noopener noreferrer">v1.27.0</a><ul><li>Support a new field <code>private</code> for private packages and registries</li><li>Support template in <code>go_install</code> package's <code>path</code> attribute</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.26.2" target="_blank" rel="noopener noreferrer">v1.26.2</a><ul><li>Install Cosign asset for correct platform even if <code>AQUA_GOOS</code> and <code>AQUA_GOARCH</code> are set</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.26.1" target="_blank" rel="noopener noreferrer">v1.26.1</a><ul><li>Skip installing Cosign and verify with Cosign in windows/arm64</li><li>Check if Cosign is supported</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.26.0" target="_blank" rel="noopener noreferrer">v1.26.0</a><ul><li>Support package verification by Cosign and slsa-verifier</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.25.2" target="_blank" rel="noopener noreferrer">v1.25.2</a><ul><li>generate: fix a bug of <code>--pin</code> option</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-registry">aqua-registry<a href="#aqua-registry" class="hash-link" aria-label="Direct link to aqua-registry" title="Direct link to aqua-registry">â€‹</a></h3><ul><li>version: v3.100.0 =&gt; <a href="https://github.com/aquaproj/aqua-registry/releases/tag/v3.114.0" target="_blank" rel="noopener noreferrer">v3.114.0</a></li><li>the number of packages: 961 =&gt; 1000 (+39)</li></ul><p>Thank you, all contributors!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-installer">aqua-installer<a href="#aqua-installer" class="hash-link" aria-label="Direct link to aqua-installer" title="Direct link to aqua-installer">â€‹</a></h3><ul><li><a href="https://github.com/aquaproj/aqua-installer/releases/tag/v2.0.2" target="_blank" rel="noopener noreferrer">v2.0.2</a><ul><li>Update aqua for bootstrap to v1.26.2</li></ul></li><li><a href="https://github.com/aquaproj/aqua-installer/releases/tag/v2.0.1" target="_blank" rel="noopener noreferrer">v2.0.1</a><ul><li>Use <code>shasum</code> instead of <code>sha256sum</code> if <code>sha256sum</code> isn't found and skip checksum verification if they aren't found</li></ul></li><li><a href="https://github.com/aquaproj/aqua-installer/releases/tag/v2.0.0" target="_blank" rel="noopener noreferrer">v2.0.0</a><ul><li>Verify aqua with slsa-verifier</li></ul></li><li><a href="https://github.com/aquaproj/aqua-installer/releases/tag/v1.2.0" target="_blank" rel="noopener noreferrer">v1.2.0</a><ul><li>GitHub Action: Support Windows PowerShell</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-renovate-config">aqua-renovate-config<a href="#aqua-renovate-config" class="hash-link" aria-label="Direct link to aqua-renovate-config" title="Direct link to aqua-renovate-config">â€‹</a></h3><ul><li><a href="https://github.com/aquaproj/aqua-renovate-config/releases/tag/1.5.0" target="_blank" rel="noopener noreferrer">1.5.0</a><ul><li>Refactor presets with Jsonnet</li></ul></li><li><a href="https://github.com/aquaproj/aqua-renovate-config/releases/tag/1.4.0" target="_blank" rel="noopener noreferrer">1.4.0</a><ul><li>Support mongodb/mongodb-atlas-cli/atlascli and ipinfo/cli</li></ul></li><li><a href="https://github.com/aquaproj/aqua-renovate-config/releases/tag/1.3.0" target="_blank" rel="noopener noreferrer">1.3.0</a><ul><li>installer-script: Support updating aqua</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-checksum-action">update-checksum-action<a href="#update-checksum-action" class="hash-link" aria-label="Direct link to update-checksum-action" title="Direct link to update-checksum-action">â€‹</a></h3><ul><li><a href="https://github.com/aquaproj/update-checksum-action/releases/tag/v0.1.1" target="_blank" rel="noopener noreferrer">v0.1.1</a><ul><li>Add an input prune to support aqua update-checksum's -prune option</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="#news" class="hash-link" aria-label="Direct link to News" title="Direct link to News">â€‹</a></h2><ul><li>GitHub<ul><li><a href="https://www.publickey1.jp/blog/22/githubsecret_scanning_1.html" target="_blank" rel="noopener noreferrer">GitHubã€ç„¡æ–™ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒªãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚‚ã€ã‚³ãƒ¼ãƒ‰å†…ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’æ¤œçŸ¥ã—ã¦ãã‚Œã‚‹ã€ŒSecret scanningã€ã‚’ç„¡æ–™æä¾›ã¸</a></li><li><a href="https://github.blog/changelog/2022-12-14-github-actions-sharing-actions-and-reusable-workflows-from-private-repositories-is-now-ga/" target="_blank" rel="noopener noreferrer">GitHub Actions â€“ Sharing actions and reusable workflows from private repositories is now GA</a></li></ul></li><li>AWS<ul><li><a href="https://www.publickey1.jp/blog/22/awssiersiersi.html" target="_blank" rel="noopener noreferrer">AWSã®SIerä¸–ç•Œä¸€ã«æ—¥æœ¬ã®ã€Œã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã€ãŒé¸å‡ºã€ã‚¢ã‚¸ã‚¢å¤ªå¹³æ´‹ã§ã¯ã€Œã‚¢ã‚¤ãƒ¬ãƒƒãƒˆã€ãŒé¸å‡ºã€‚ã‚¯ãƒ©ã‚¦ãƒ‰å°‚é–€ã®SIerãŒãƒªãƒ¼ãƒ‰ã™ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ã®SIãƒ“ã‚¸ãƒã‚¹</a></li><li><a href="https://www.publickey1.jp/blog/22/awsidecicdamazon_codecatalystaws_reinvent_2022.html" target="_blank" rel="noopener noreferrer">ï¼»é€Ÿå ±ï¼½AWSä¸Šã§é–‹ç™ºç’°å¢ƒä¸€å¼ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€åˆæœŸã‚³ãƒ¼ãƒ‰ã€IDEã€ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã€CI/CDãªã©æä¾›ã™ã‚‹ã€ŒAmazon CodeCatalystã€ç™ºè¡¨ã€‚AWS re:Invent 2022</a></li></ul></li><li>aqua<ul><li><a href="https://engineer.retty.me/entry/2022/12/14/130000" target="_blank" rel="noopener noreferrer">CLI ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ aqua ã®ã‚¹ã‚¹ãƒ¡</a></li><li><a href="https://blog.framinal.life/entry/aqua" target="_blank" rel="noopener noreferrer">asdf ã¨æ¯”è¼ƒã—ã¦ã‚‚ä½¿ã„ã‚„ã™ã„CLI ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ã€Œaquaã€</a></li><li><a href="https://tech.gunosy.io/entry/snyk_iac_reviewdog_aqua_devsecops" target="_blank" rel="noopener noreferrer">Snyk IaC + reviewdog + aquaã§ã¯ã˜ã‚ã‚‹DevSecOps</a></li></ul></li></ul>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[My Activity in 2022-11]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-11</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-11</guid>
            <pubDate>Thu, 01 Dec 2022 13:13:55 GMT</pubDate>
            <description><![CDATA[Blog posts]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog-posts">Blog posts<a href="#blog-posts" class="hash-link" aria-label="Direct link to Blog posts" title="Direct link to Blog posts">â€‹</a></h2><ul><li>2022-11-15: <a href="https://zenn.dev/shunsuke_suzuki/articles/aqua-policy-as-code" target="_blank" rel="noopener noreferrer">aqua ã® Policy as Code</a></li><li>2022-11-08: <a href="https://dev.to/suzukishunsuke/checksum-verification-by-aqua-5038" target="_blank" rel="noopener noreferrer">Checksum Verification by aqua</a></li><li>2022-11-07: <a href="https://zenn.dev/shunsuke_suzuki/articles/aqua-release-notes-v1200-v1220" target="_blank" rel="noopener noreferrer">aqua Release Notes (v1.20.0 ~ v1.22.0)</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution">OSS Contribution<a href="#oss-contribution" class="hash-link" aria-label="Direct link to OSS Contribution" title="Direct link to OSS Contribution">â€‹</a></h2><table><thead><tr><th>merged date</th><th>repository</th><th>lang</th><th>PR's short description</th></tr></thead><tbody><tr><td>2022-11-12</td><td><a href="https://github.com/slsa-framework/slsa-verifier" target="_blank" rel="noopener noreferrer">slsa-framework/slsa-verifier</a></td><td>go</td><td><a href="https://github.com/slsa-framework/slsa-verifier/pull/356" target="_blank" rel="noopener noreferrer">fix: fix error logs</a></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-development">OSS Development<a href="#oss-development" class="hash-link" aria-label="Direct link to OSS Development" title="Direct link to OSS Development">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua">aqua<a href="#aqua" class="hash-link" aria-label="Direct link to aqua" title="Direct link to aqua">â€‹</a></h3><p>The notable change is <a href="https://aquaproj.github.io/docs/tutorial-extras/policy-as-code/" target="_blank" rel="noopener noreferrer">the support of Policy as Code</a>.
I'm working on <a href="https://github.com/aquaproj/aqua/pull/1413" target="_blank" rel="noopener noreferrer">the release of aqua v2</a> and <a href="https://github.com/aquaproj/aqua/issues/1391" target="_blank" rel="noopener noreferrer">signing of aqua and aqua-installer</a>.</p><p>Please see Release Notes for the detail.</p><ul><li>WIP<ul><li><a href="https://github.com/aquaproj/aqua/releases/tag/v2.0.0-0" target="_blank" rel="noopener noreferrer">v2.0.0-0</a><ul><li>Only standard registry is allowed by default</li><li>etc</li></ul></li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.25.0" target="_blank" rel="noopener noreferrer">v1.25.0</a><ul><li>Replace <code>$HOME</code> to the home directory in local registry path</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.24.0" target="_blank" rel="noopener noreferrer">v1.24.0</a><ul><li>Support defining the policy of package installation and execution for security</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.23.1" target="_blank" rel="noopener noreferrer">v1.23.1</a><ul><li>generate: Fix a panic when unknown packages are specified</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.23.0" target="_blank" rel="noopener noreferrer">v1.23.0</a><ul><li>Support filtering packages with tags</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.22.0" target="_blank" rel="noopener noreferrer">v1.22.0</a><ul><li>Add <code>update-aqua</code> command</li><li>generate: Support specifying version</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-registry">aqua-registry<a href="#aqua-registry" class="hash-link" aria-label="Direct link to aqua-registry" title="Direct link to aqua-registry">â€‹</a></h3><ul><li>version: v3.85.0 =&gt; <a href="https://github.com/aquaproj/aqua-registry/releases/tag/v3.100.0" target="_blank" rel="noopener noreferrer">v3.100.0</a></li><li>the number of packages: 923 =&gt; 961 (+38)</li></ul><p>Thank you, all contributors!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-i-learned">What I learned<a href="#what-i-learned" class="hash-link" aria-label="Direct link to What I learned" title="Direct link to What I learned">â€‹</a></h2><p>I'm investigating the signing of aqua and aqua-installer.</p><ul><li><a href="https://www.sigstore.dev/" target="_blank" rel="noopener noreferrer">Sigstore</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="#news" class="hash-link" aria-label="Direct link to News" title="Direct link to News">â€‹</a></h2><ul><li>AWS<ul><li><a href="https://www.publickey1.jp/blog/22/aws_lambdaaws_lambda_snapstartaws_reinvent_2022.html" target="_blank" rel="noopener noreferrer">ï¼»é€Ÿå ±ï¼½AWS Lambdaã®ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆã‚’åŠ‡çš„ã«é€Ÿãã™ã‚‹ã€ŒAWS Lambda SnapStartã€ç™ºè¡¨ã€‚AWS re:Invent 2022</a></li><li><a href="https://aws.amazon.com/about-aws/whats-new/2022/10/amazon-virtual-private-cloud-vpc-transfer-elastic-ip-addresses-between-aws-accounts/" target="_blank" rel="noopener noreferrer">Amazon Virtual Private Cloud (VPC) now supports the transfer of Elastic IP addresses between AWS accounts</a></li><li><a href="https://aws.amazon.com/about-aws/whats-new/2022/11/aws-app-runner-supports-privately-accessible-services-amazon-vpc/" target="_blank" rel="noopener noreferrer">AWS App Runner now supports privately accessible services within Amazon VPC</a></li></ul></li><li>GitHub<ul><li><a href="https://github.blog/changelog/2022-11-23-repository-archive-date-now-shown-in-ui/" target="_blank" rel="noopener noreferrer">Repository archive date now shown in UI</a></li><li><a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/about-tasklists" target="_blank" rel="noopener noreferrer">About Tasklists - You can use Tasklists to divide your issues into smaller subtasks</a></li><li><a href="https://github.blog/changelog/2022-10-31-dependabot-now-updates-comments-in-github-actions-workflows-referencing-action-versions/" target="_blank" rel="noopener noreferrer">Dependabot now updates comments in GitHub Actions workflows referencing action versions</a></li></ul></li><li><a href="https://www.publickey1.jp/blog/22/awsdocker_desktopfinch.html" target="_blank" rel="noopener noreferrer">AWSã€Docker Desktopä»£æ›¿ã¨ãªã‚Šå¾—ã‚‹ã€ŒFinchã€ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã§å…¬é–‹ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³ã«ä»®æƒ³ç’°å¢ƒã¨ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã€ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ãªã©ä¸€å¼ã‚’å°å…¥</a></li><li><a href="https://google.github.io/styleguide/go/" target="_blank" rel="noopener noreferrer">Go Style Guide from Google</a></li><li><a href="https://engineer.retty.me/entry/2022/11/18/130000" target="_blank" rel="noopener noreferrer">Retty ã® Terraform CI/CD è§£ä½“æ–°æ›¸</a><ul><li>In this blog, many my OSS and blog posts are referred</li></ul></li><li><a href="https://www.docker.com/blog/announcing-docker-hub-oci-artifacts-support/" target="_blank" rel="noopener noreferrer">Announcing Docker Hub OCI Artifacts Support</a></li><li><a href="https://gigazine.net/news/20221104-github-copilot-lawsuit/" target="_blank" rel="noopener noreferrer">ã¤ã„ã«GitHubã®ã‚³ãƒ¼ãƒ‰ã§å­¦ç¿’ã—ãŸAIã€ŒGitHub Copilotã€ãŒé›†å›£è¨´è¨Ÿã«ç›´é¢</a></li><li><a href="https://gigazine.net/news/20221101-openssl-critical-vulnerability-fix/" target="_blank" rel="noopener noreferrer">OpenSSLã§å²ä¸Š2åº¦ç›®ã®ã€Œè‡´å‘½çš„ã€ãƒ¬ãƒ™ãƒ«ã®è„†å¼±æ€§ãŒç™ºè¦‹ã•ã‚Œã‚‹ã€2022å¹´11æœˆ1æ—¥å¤œé–“ã«ä¿®æ­£ç‰ˆãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ãŸã‚å³æ›´æ–°ã‚’</a></li></ul>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[My Activity in 2022-10]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-10</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-10</guid>
            <pubDate>Tue, 01 Nov 2022 13:13:55 GMT</pubDate>
            <description><![CDATA[Blog posts]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog-posts">Blog posts<a href="#blog-posts" class="hash-link" aria-label="Direct link to Blog posts" title="Direct link to Blog posts">â€‹</a></h2><ul><li>2022-10-10: <a href="https://zenn.dev/shunsuke_suzuki/articles/aqua-checksum-verification" target="_blank" rel="noopener noreferrer">aqua CLI Version Manager ãŒ checksum ã®æ¤œè¨¼ã‚’ã‚µãƒãƒ¼ãƒˆ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution">OSS Contribution<a href="#oss-contribution" class="hash-link" aria-label="Direct link to OSS Contribution" title="Direct link to OSS Contribution">â€‹</a></h2><table><thead><tr><th>merged date</th><th>repository</th><th>lang</th><th>PR's short description</th></tr></thead><tbody><tr><td>2022-10-21</td><td><a href="https://github.com/slsa-framework/slsa-github-generator" target="_blank" rel="noopener noreferrer">slsa-framework/slsa-github-generator</a></td><td>go</td><td><a href="https://github.com/slsa-framework/slsa-github-generator/pull/1066" target="_blank" rel="noopener noreferrer">fix: use GITHUB_OUTPUT instead of deprecated set-output command</a></td></tr><tr><td>2022-10-17</td><td><a href="https://github.com/slsa-framework/slsa-github-generator" target="_blank" rel="noopener noreferrer">slsa-framework/slsa-github-generator</a></td><td>go</td><td><a href="https://github.com/slsa-framework/slsa-github-generator/pull/1061" target="_blank" rel="noopener noreferrer">fix: use GITHUB_OUTPUT instead of deprecated set-output command</a></td></tr><tr><td>2022-10-04</td><td><a href="https://github.com/shipyard-run/shipyard" target="_blank" rel="noopener noreferrer">shipyard-run/shipyard</a></td><td>go (shell script)</td><td><a href="https://github.com/shipyard-run/shipyard/pull/182" target="_blank" rel="noopener noreferrer">ci: fix checksums.txt</a></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-development">OSS Development<a href="#oss-development" class="hash-link" aria-label="Direct link to OSS Development" title="Direct link to OSS Development">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua">aqua<a href="#aqua" class="hash-link" aria-label="Direct link to aqua" title="Direct link to aqua">â€‹</a></h3><p>â­ Over 200 stars â­</p><p>The notable change is <a href="https://aquaproj.github.io/docs/reference/checksum/" target="_blank" rel="noopener noreferrer">the support of checksum verification</a>.</p><p>Please see <a href="https://github.com/orgs/aquaproj/projects/8" target="_blank" rel="noopener noreferrer">the GitHub Project</a> to check prioritized issues.</p><ul><li>WIP<ul><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.22.0-1" target="_blank" rel="noopener noreferrer">v1.22.0-1</a><ul><li>ğŸš€ Support filtering packages with tags</li></ul></li><li><a href="https://github.com/aquaproj/aqua/issues/1306" target="_blank" rel="noopener noreferrer">#1306</a> Support restricting registries and packages globally for security</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.21.0" target="_blank" rel="noopener noreferrer">v1.21.0</a><ul><li>Support changing <code>type</code> in <code>overrides</code></li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.20.2" target="_blank" rel="noopener noreferrer">v1.20.2</a><ul><li>cp: Skip creating links</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.20.1" target="_blank" rel="noopener noreferrer">v1.20.1</a><ul><li>update-checksum: Fix the checksum of http package calculated by <code>-deep</code> option</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.20.0" target="_blank" rel="noopener noreferrer">v1.20.0</a><ul><li>ğŸ‰ Support the checksum verification</li><li>ğŸ‰ cp: Support coping all packages</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.19.5" target="_blank" rel="noopener noreferrer">v1.19.5</a><ul><li>nil check to avoid panic</li><li>Improve error log: Output download url when it failed to download a file</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-registry">aqua-registry<a href="#aqua-registry" class="hash-link" aria-label="Direct link to aqua-registry" title="Direct link to aqua-registry">â€‹</a></h3><p>ğŸ‰ Supported over 900 packages ğŸ‰</p><p>ğŸ‰ 30 Contributors ğŸ‰</p><p>I've updated aqua-registry from <a href="https://github.com/aquaproj/aqua-registry/releases/tag/v3.64.0" target="_blank" rel="noopener noreferrer">v3.64.0</a> to <a href="https://github.com/aquaproj/aqua-registry/releases/tag/v3.85.0" target="_blank" rel="noopener noreferrer">v3.85.0</a>.
The number of packages has increased from 870 to 923 (+53).
Thank you, all contributors!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfaction">tfaction<a href="#tfaction" class="hash-link" aria-label="Direct link to tfaction" title="Direct link to tfaction">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.19" target="_blank" rel="noopener noreferrer">v0.5.19</a><ul><li>Use GITHUB_OUTPUT instead of deprecated set-output command (<a href="https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/" target="_blank" rel="noopener noreferrer">ref</a>)</li><li>Replace <a href="https://github.com" target="_blank" rel="noopener noreferrer">https://github.com</a> to <code>$GITHUB_SERVER_URL</code> for GitHub Enterprise</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-i-learned">What I learned<a href="#what-i-learned" class="hash-link" aria-label="Direct link to What I learned" title="Direct link to What I learned">â€‹</a></h2><p>I'm interested in the supply chain security and the improvement of local development and CI/CD pipeline.</p><ul><li><a href="https://slsa.dev/" target="_blank" rel="noopener noreferrer">SLSA</a><ul><li><a href="https://zenn.dev/shunsuke_suzuki/scraps/68dc8e47093af6" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/68dc8e47093af6</a></li></ul></li><li><a href="https://containers.dev/" target="_blank" rel="noopener noreferrer">Development Containers</a><ul><li><a href="https://zenn.dev/shunsuke_suzuki/scraps/3910ea414e0c8d" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/3910ea414e0c8d</a></li></ul></li><li><a href="https://dagger.io/" target="_blank" rel="noopener noreferrer">Dagger</a></li><li><a href="https://earthly.dev/" target="_blank" rel="noopener noreferrer">Earthly</a><ul><li><a href="https://earthly.dev/blog/platform-values/" target="_blank" rel="noopener noreferrer">The Platform Values of Earthly</a> - The blog post is awesome</li><li><a href="https://github.com/suzuki-shunsuke/example-earthly-terraform" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-earthly-terraform</a></li><li><a href="https://zenn.dev/shunsuke_suzuki/scraps/5d1f5984defe9c" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/5d1f5984defe9c</a></li></ul></li><li><a href="https://oras.land/" target="_blank" rel="noopener noreferrer">ORAS</a></li></ul><hr><ul><li><a href="https://zenn.dev/shunsuke_suzuki/scraps/eae73a2513d8c6" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/eae73a2513d8c6</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="#news" class="hash-link" aria-label="Direct link to News" title="Direct link to News">â€‹</a></h2><ul><li><a href="https://github.blog/" target="_blank" rel="noopener noreferrer">GitHub Blog</a><ul><li><a href="https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/" target="_blank" rel="noopener noreferrer">GitHub Actions: Deprecating save-state and set-output commands</a></li><li><a href="https://github.blog/changelog/2022-10-31-dependabot-now-updates-comments-in-github-actions-workflows-referencing-action-versions/" target="_blank" rel="noopener noreferrer">Dependabot now updates comments in GitHub Actions workflows referencing action versions</a><ul><li><a href="https://docs.renovatebot.com/modules/manager/github-actions/#additional-information" target="_blank" rel="noopener noreferrer">Renovate supports the similar feature</a></li></ul></li><li><a href="https://github.blog/2022-10-18-introducing-fine-grained-personal-access-tokens-for-github/" target="_blank" rel="noopener noreferrer">Introducing fine-grained personal access tokens for GitHub</a></li><li><a href="https://github.blog/changelog/2022-10-20-new-branch-protections-last-pusher-and-locked-branch/" target="_blank" rel="noopener noreferrer">New Branch Protections: Last Pusher and Locked Branch</a></li></ul></li><li><a href="https://github.com/community/community/discussions/32566" target="_blank" rel="noopener noreferrer">The bug of GitHub Actions <code>GITHUB_STEP_SUMMARY</code> has been fixed</a><ul><li><a href="https://twitter.com/szkdash/status/1568607299266281475" target="_blank" rel="noopener noreferrer">https://twitter.com/szkdash/status/1568607299266281475</a></li></ul></li><li><a href="https://dagger.io/blog/go-sdk" target="_blank" rel="noopener noreferrer">Your CI pipelines should be code: introducing the Dagger Go SDK</a></li><li><a href="https://www.docker.com/pricing/october-2022-pricing-change-faq/" target="_blank" rel="noopener noreferrer">Docker Hub: October 2022 Pricing Change FAQ</a></li><li><a href="https://cloud.google.com/iam/docs/deny-overview" target="_blank" rel="noopener noreferrer">GCP IAM's Deny Policies has become GA finally</a></li><li><a href="https://www.publickey1.jp/blog/22/google_cloudcloud_workstationsgoogle_cloud_next_22.html" target="_blank" rel="noopener noreferrer">ï¼»é€Ÿå ±ï¼½Google Cloudã€ã€ŒCloud Workstationsã€ç™ºè¡¨ã€‚ã‚»ã‚­ãƒ¥ã‚¢ãªé–‹ç™ºç’°å¢ƒä¸€å¼ã‚’ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§æä¾›ã€‚Google Cloud Next '22</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">â€‹</a></h2><p><a href="https://github.com/features/copilot" target="_blank" rel="noopener noreferrer">GitHub Copilot</a>'s License issue</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/DocSparse/status/1581461734665367554" width="300" height="150" frameborder="0" scrolling="no"></iframe><p><a href="https://tekton.dev/docs/pipelines/hermetic/" target="_blank" rel="noopener noreferrer">Tekton's Hermetic Execution Mode</a></p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/rung/status/1581616187607506944" width="300" height="150" frameborder="0" scrolling="no"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="markdown-style-guide">Markdown Style Guide<a href="#markdown-style-guide" class="hash-link" aria-label="Direct link to Markdown Style Guide" title="Direct link to Markdown Style Guide">â€‹</a></h3><ul><li><a href="https://github.com/markdownlint/markdownlint/blob/main/docs/RULES.md#md014---dollar-signs-used-before-commands-without-showing-output" target="_blank" rel="noopener noreferrer">https://github.com/markdownlint/markdownlint/blob/main/docs/RULES.md#md014---dollar-signs-used-before-commands-without-showing-output</a></li><li><a href="https://cirosantilli.com/markdown-style-guide/#dollar-signs-in-shell-code" target="_blank" rel="noopener noreferrer">https://cirosantilli.com/markdown-style-guide/#dollar-signs-in-shell-code</a></li><li><a href="https://arcticicestudio.github.io/styleguide-markdown/rules/code.html#no-shell-code-dollar-sign" target="_blank" rel="noopener noreferrer">https://arcticicestudio.github.io/styleguide-markdown/rules/code.html#no-shell-code-dollar-sign</a></li></ul>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[My Activity in 2022-09]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-09</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-09</guid>
            <pubDate>Sat, 24 Sep 2022 09:30:55 GMT</pubDate>
            <description><![CDATA[Work]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="work">Work<a href="#work" class="hash-link" aria-label="Direct link to Work" title="Direct link to Work">â€‹</a></h2><p>I've improved the experience of a huge Terraform Monorepo by introducing my OSS tfcmt and github-comment.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-development">OSS Development<a href="#oss-development" class="hash-link" aria-label="Direct link to OSS Development" title="Direct link to OSS Development">â€‹</a></h2><p>Mainly I focused on the release of <a href="https://gha-trigger.github.io/" target="_blank" rel="noopener noreferrer">gha-trigger</a>.
After the release, mainly I'm working on the improvement of <a href="https://aquaproj.github.io/" target="_blank" rel="noopener noreferrer">aqua</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua">aqua<a href="#aqua" class="hash-link" aria-label="Direct link to aqua" title="Direct link to aqua">â€‹</a></h3><ul><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.19.4" target="_blank" rel="noopener noreferrer">v1.19.4</a><ul><li>generate-registry: set <code>complete_windows_ext</code></li><li>Support MD5 for the checksum verification</li><li>Improve a log creating a symbolic link</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.19.3" target="_blank" rel="noopener noreferrer">v1.19.3</a><ul><li>generate-registry: fix the regular expression to extract checksums</li><li>exec: set config file path</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-registry">aqua-registry<a href="#aqua-registry" class="hash-link" aria-label="Direct link to aqua-registry" title="Direct link to aqua-registry">â€‹</a></h3><p>I've updated aqua-registry from <a href="https://github.com/aquaproj/aqua-registry/releases/tag/v3.42.0" target="_blank" rel="noopener noreferrer">v3.42.0</a> to <a href="https://github.com/aquaproj/aqua-registry/releases/tag/v3.64.0" target="_blank" rel="noopener noreferrer">v3.64.0</a>.
The number of packages has increased from 803 to 870.
Thank you, all contributors!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfcmt">tfcmt<a href="#tfcmt" class="hash-link" aria-label="Direct link to tfcmt" title="Direct link to tfcmt">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.4.1" target="_blank" rel="noopener noreferrer">v3.4.1</a><ul><li>fix: Fix links to GitHub Actions jobs in GitHub Enterprise</li><li>chore: Update Go from v1.18.5 to v1.19.1</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.4.2" target="_blank" rel="noopener noreferrer">v3.4.2</a><ul><li>fix: Add pull request labels properly even if a pull request number isn't passed as an argument or an environment variable</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v4.0.0" target="_blank" rel="noopener noreferrer">v4.0.0</a><ul><li>breaking change: Remove features to output environment variables for security</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-comment">github-comment<a href="#github-comment" class="hash-link" aria-label="Direct link to github-comment" title="Direct link to github-comment">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/github-comment/releases/tag/v4.5.1" target="_blank" rel="noopener noreferrer">v4.5.1</a><ul><li>fix: Fix links to GitHub Actions jobs in GitHub Enterprise</li><li>chore: Update Go from v1.18.5 to v1.19.1</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/github-comment/releases/tag/v4.5.2" target="_blank" rel="noopener noreferrer">v4.5.2</a><ul><li>fix: Check if the configuration <code>base</code> is nil</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/github-comment/releases/tag/v5.0.0" target="_blank" rel="noopener noreferrer">v5.0.0</a><ul><li>breaking change: Remove features to output environment variables for security</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="go-ci-env">go-ci-env<a href="#go-ci-env" class="hash-link" aria-label="Direct link to go-ci-env" title="Direct link to go-ci-env">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/go-ci-env/releases/tag/v3.0.1" target="_blank" rel="noopener noreferrer">v3.0.1</a><ul><li>fix: fix GitHub Actions JobURL for GitHub Enterprise</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfaction">tfaction<a href="#tfaction" class="hash-link" aria-label="Direct link to tfaction" title="Direct link to tfaction">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.17" target="_blank" rel="noopener noreferrer">v0.5.17</a><ul><li>feat: Show how to create a scaffold pull request with $GITHUB_STEP_SUMMARY</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.18" target="_blank" rel="noopener noreferrer">v0.5.18</a><ul><li>tfmigrate-plan: Support testing with Conftest</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-oss-">New OSS ğŸš€<a href="#new-oss-" class="hash-link" aria-label="Direct link to New OSS ğŸš€" title="Direct link to New OSS ğŸš€">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gha-trigger">gha-trigger<a href="#gha-trigger" class="hash-link" aria-label="Direct link to gha-trigger" title="Direct link to gha-trigger">â€‹</a></h3><p>I've released gha-trigger, which is Webhook Server and Actions to run GitHub Actions securely.</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://gha-trigger.github.io" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://dev.to/suzukishunsuke/gha-trigger-webhook-server-and-actions-for-secure-github-actions-538a" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://zenn.dev/shunsuke_suzuki/articles/gha-trigger-action" width="300" height="150" frameborder="0" scrolling="no"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution-guide">oss-contribution-guide<a href="#oss-contribution-guide" class="hash-link" aria-label="Direct link to oss-contribution-guide" title="Direct link to oss-contribution-guide">â€‹</a></h3><p>I've published <a href="https://github.com/suzuki-shunsuke/oss-contribution-guide" target="_blank" rel="noopener noreferrer">OSS Contribution Guide</a>, which is a guide to creating GitHub Issues and Pull Requests for OSS Contribution.</p>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[2022-08 æŒ¯ã‚Šè¿”ã‚Š]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-08</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-08</guid>
            <pubDate>Wed, 24 Aug 2022 09:30:55 GMT</pubDate>
            <description><![CDATA[ä»•äº‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><p>ä»•äº‹ã¯ã‚ã¾ã‚Šæ›¸ã‘ã‚‹ã“ã¨ã‚‚ãªã„ã‚“ã§ã™ãŒã€å…ƒæ°—ã«ã‚„ã£ã¦ã„ã¾ã™ã€‚
tfcmt, github-comment, aqua ã‚’ã¨ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã«å°å…¥ã—ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-é–‹ç™º">OSS é–‹ç™º<a href="#oss-é–‹ç™º" class="hash-link" aria-label="Direct link to OSS é–‹ç™º" title="Direct link to OSS é–‹ç™º">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aquaprojaqua">aquaproj/aqua<a href="#aquaprojaqua" class="hash-link" aria-label="Direct link to aquaproj/aqua" title="Direct link to aquaproj/aqua">â€‹</a></h3><p>ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã« checksum ã‚’æ¤œè¨¼ã™ã‚‹æ©Ÿèƒ½ã®é–‹ç™ºã‚’é€²ã‚ã¦ã„ã¾ã™ã€‚
åŸºæœ¬çš„ãªæ©Ÿèƒ½ã®é–‹ç™ºã¯æ—¢ã«å‡ºæ¥ã¦ã„ã¦ prerelease ã‚‚å‡ºã—ã¦ã„ã¾ã™ã€‚
ã‚ã¨ã¯ç¾è·ã«å°å…¥ã—ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚‚ã‚‰ã„ãªãŒã‚‰æ­£å¼ãƒªãƒªãƒ¼ã‚¹ã«æŒã£ã¦ã„ããŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://github.com/aquaproj/aqua/issues/427" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/aquaclivm/status/1559535842061733894" width="300" height="150" frameborder="0" scrolling="no"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-registry">aqua-registry<a href="#aqua-registry" class="hash-link" aria-label="Direct link to aqua-registry" title="Direct link to aqua-registry">â€‹</a></h3><p>v3.20.0 =&gt; <a href="https://github.com/aquaproj/aqua-registry/releases/tag/v3.42.0" target="_blank" rel="noopener noreferrer">3.42.0</a></p><p>Package æ•°ãŒ 702 ã‹ã‚‰ 803 ã¾ã§å¢—ãˆã¾ã—ãŸã€‚
Contribution ã—ã¦ãã ã•ã£ãŸæ–¹ã€…ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p><p>ä»Šæœˆã¯ Pull Request ã®æ•°ãŒã™ã”ãã¦ 91 å€‹ã® PR ãŒãƒãƒ¼ã‚¸ã•ã‚Œã¾ã—ãŸã€‚</p><ul><li>Renovate ä»¥å¤– 132 å€‹ <a href="https://github.com/aquaproj/aqua-registry/pulls?q=is%3Apr+is%3Aclosed+merged%3A2022-08-01..2022-08-31+-author%3Aapp%2Frenovate+" target="_blank" rel="noopener noreferrer">Merged Pull Requests</a></li><li>suzuki-shunsuke 41 å€‹ <a href="https://github.com/aquaproj/aqua-registry/pulls?q=is%3Apr+is%3Aclosed+merged%3A2022-08-01..2022-08-31+author%3Asuzuki-shunsuke" target="_blank" rel="noopener noreferrer">Merged Pull Requests</a></li></ul><p>ã‚ã‚ŠãŒãŸã„è©±ã§ã™ã—ã€ã“ã‚Œã»ã©ã® PR ãŒæ¥ã‚‹ OSS ã‚’é–‹ç™ºã§ããŸã“ã¨ã‚’èª‡ã‚Šã«æ€ã„ã¾ã™ã€‚</p><p>aqua-registry ãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®æ•°ãŒ 800 ã‚’è¶…ãˆã¾ã—ãŸã€‚
ã¡ãªã¿ã« asdf-plugins ãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹æ•°ã¯ 2022-08-30 æ™‚ç‚¹ã§ 514 ãªã®ã§ã€ asdf ã‚ˆã‚Šã ã„ã¶å¤šããªã‚Šã¾ã—ãŸã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ asdf plugin list all | wc -l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     514</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/szkdash/status/1564617121111621674" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>ã¾ãŸã€ GitHub ã® API rate limit ã«å¼•ã£ã‹ã‹ã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§å¯¾å¿œã—ã¾ã—ãŸã€‚</p><ul><li>github.token ã‚’ä½¿ã†</li><li>main branch ã§ test ã™ã‚‹ã®ã‚„ã‚ã‚‹</li><li>ci-info ã®çµæœã‚’ cache</li></ul><p>å¾Œè¿°ã™ã‚‹ aqua registry ã®ãŸã‚ã® framework ã‚’ä½¿ã£ã¦ CI ã¨ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚’å¤§ããæ”¹å–„ã—ã¾ã—ãŸã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-registry-ã®ãŸã‚ã®-framework">aqua registry ã®ãŸã‚ã® framework<a href="#aqua-registry-ã®ãŸã‚ã®-framework" class="hash-link" aria-label="Direct link to aqua registry ã®ãŸã‚ã® framework" title="Direct link to aqua registry ã®ãŸã‚ã® framework">â€‹</a></h3><p>aqua Registry ã‚’é–‹ç™ºã™ã‚‹ãŸã‚ã® Framework ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚
ä¸»ãª aqua Registry ã¨ã„ãˆã° <a href="https://github.com/aquaproj/aqua-registry" target="_blank" rel="noopener noreferrer">Standard Registry</a> ã§ã™ãŒã€
çµ„ç¹”å†…ã® private ãªãƒ„ãƒ¼ãƒ«ã®ãŸã‚ã® Private Registry ã‚’ä½œã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚
aqua-registry ã‚’é–‹ç™ºã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã¯å…ƒã€… aqua-registry ã®ãƒªãƒã‚¸ãƒˆãƒªå†…ã«ç½®ã„ã¦ã‚ã‚Šã¾ã—ãŸãŒã€
ãã‚Œã‚’ Private Registry ã‚’é–‹ç™ºã™ã‚‹ã®ã«ã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã€åˆ¥ã® OSS ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ã¾ã—ãŸã€‚
ã¾ãŸã€ Private Registry ã® Template Repository ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚æ•´å‚™ã—ã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/aquaproj/registry-tool" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/registry-tool</a></li><li><a href="https://github.com/aquaproj/template-private-aqua-registry" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/template-private-aqua-registry</a></li><li><a href="https://github.com/aquaproj/registry-action" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/registry-action</a></li><li><a href="https://aquaproj.github.io/docs/reference/create-private-registry" target="_blank" rel="noopener noreferrer">https://aquaproj.github.io/docs/reference/create-private-registry</a></li></ul><p>è‡ªåˆ†ã‚‚ç¤¾å†…ã®ãƒ„ãƒ¼ãƒ«ã®ãŸã‚ã® Private Registry ã‚’ä½œã‚‹ã®ã«ã“ã‚Œã‚‰ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-installer">aqua-installer<a href="#aqua-installer" class="hash-link" aria-label="Direct link to aqua-installer" title="Direct link to aqua-installer">â€‹</a></h3><p>aqua-installer ã‚’ GopherJS ã‚’ä½¿ã£ã¦ JavaScript Action ã«å‡ºæ¥ãªã„ã‹æ¤œè¨¼ã—ã¾ã—ãŸã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://zenn.dev/shunsuke_suzuki/scraps/3b7eee7ca8d3ad" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://github.com/aquaproj/aqua-installer/pull/144" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>çµè«–ã‚’è¨€ã†ã¨ä»Šã¯ã¾ã ã‚„ã‚ãŸã»ã†ãŒè‰¯ã•ãã†ã¨ã„ã†ã“ã¨ã§è«¦ã‚ã¾ã—ãŸã€‚
èˆˆå‘³ã®ã‚ã‚‹äººã¯ zenn ã® scrap ã‚’è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚
å°†æ¥çš„ã« GopherJS ãŒã‚ˆã‚Šæˆç†Ÿã—ã¦ããŸã‚‰ã¾ãŸæ¤œè¨ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-renovate-config">aqua-renovate-config<a href="#aqua-renovate-config" class="hash-link" aria-label="Direct link to aqua-renovate-config" title="Direct link to aqua-renovate-config">â€‹</a></h3><p><code>go</code> datasource ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã‚‰ warning ãŒå¤§é‡ã«å‡ºã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§å¯¾å¿œã—ã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/aquaproj/aqua-renovate-config/releases/tag/1.2.1" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/aqua-renovate-config/releases/tag/1.2.1</a></li><li><a href="https://github.com/aquaproj/aqua-renovate-config/releases/tag/1.2.2" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/aqua-renovate-config/releases/tag/1.2.2</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfcmt">tfcmt<a href="#tfcmt" class="hash-link" aria-label="Direct link to tfcmt" title="Direct link to tfcmt">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.4.0" target="_blank" rel="noopener noreferrer">v3.4.0</a><ul><li>commit hash ã«é–¢é€£ã—ãŸ PR ã‚’å–å¾—ã—ã¦ PR ã«ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸ</li></ul></li></ul><p>GitHub å´ã®ä»•æ§˜å¤‰æ›´ã§ã€ä»Šæœˆã«ãªã£ã¦ commit ã«å¯¾ã™ã‚‹ comment ãŒ PR ã® timeline ã«è¡¨ç¤ºã•ã‚Œãªããªã‚Šã¾ã—ãŸã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://github.blog/changelog/2022-08-04-commit-comments-no-longer-appear-in-the-pull-request-timeline/" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>ãã®ãŸã‚ã€ CI ã§ push event ã‚’ hook ã—ã¦ commit ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’ã—ã¦ã„ã‚‹å ´åˆã€ tfcmt plan ã®çµæœãŒ PR ã«è¡¨ç¤ºã•ã‚Œãªããªã‚‹ã¨ã„ã†ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã—ãŸã€‚</p><p>ãã“ã§ commit hash ã«é–¢é€£ã—ãŸ PR ã‚’å–å¾—ã—ã¦ PR ã«ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
ãªãŠã€å…ƒã€… pull_request event ã‚’ hook ã™ã‚‹ãªã©ã—ã¦ PR ç•ªå·ãŒ tfcmt ã«æ¸¡ã£ã¦ã„ã‚‹å ´åˆã¯é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfaction">tfaction<a href="#tfaction" class="hash-link" aria-label="Direct link to tfaction" title="Direct link to tfaction">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.15" target="_blank" rel="noopener noreferrer">v0.5.15</a>: tfmigrate-apply ä¸­ã® typo ã®ä¿®æ­£</li><li><a href="https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.16" target="_blank" rel="noopener noreferrer">v0.5.16</a><ul><li>tfmigrate ãŒ history ã®ä¿å­˜å…ˆã« GCS ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã“ã¨ã®ã«åˆã‚ã›ã¦ã€ tfmigrate-plan job ã§ .tfmigrate.hcl ã‚’ scaffold ã™ã‚‹éš›ã« GCS ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li><li>gsutil ãŒ Workload Identity Federation ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã“ã¨ã«åˆã‚ã›ã¦ã€ setup job ã®ä¸­ã§æœ€æ–°ã® gsutil ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li><li>ã“ã‚Œã«ã‚ˆã‚Šã€ãã‚Œã¾ã§ AWS ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå‰æã ã£ãŸã®ãŒã€ AWS ã®ä»£ã‚ã‚Šã« GCP ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-comment">github-comment<a href="#github-comment" class="hash-link" aria-label="Direct link to github-comment" title="Direct link to github-comment">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v4.5.0" target="_blank" rel="noopener noreferrer">v4.5.0</a></li></ul><p>ä¸Šè¨˜ã® tfcmt ã¨åŒæ§˜ã®å¤‰æ›´ã‚’ github-comment ã«ã‚‚ã—ã¾ã—ãŸã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-info">ci-info<a href="#ci-info" class="hash-link" aria-label="Direct link to ci-info" title="Direct link to ci-info">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/ci-info/releases/tag/v2.1.0" target="_blank" rel="noopener noreferrer">v2.1.0</a><ul><li>public repository ãªã‚‰ GitHub Access Token ãªã—ã§å‹•ãã‚ˆã†ã«ã—ã¾ã—ãŸ</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/ci-info/releases/tag/v2.1.1" target="_blank" rel="noopener noreferrer">v2.1.1</a><ul><li>arm64 support</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-ã®æ–°è¦é–‹ç™º-">OSS ã®æ–°è¦é–‹ç™º ğŸš€<a href="#oss-ã®æ–°è¦é–‹ç™º-" class="hash-link" aria-label="Direct link to OSS ã®æ–°è¦é–‹ç™º ğŸš€" title="Direct link to OSS ã®æ–°è¦é–‹ç™º ğŸš€">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gha-trigger">gha-trigger<a href="#gha-trigger" class="hash-link" aria-label="Direct link to gha-trigger" title="Direct link to gha-trigger">â€‹</a></h3><p>ã¾ã é–‹ç™ºä¸­ã§ã™ãŒã€æ–°ã—ã„ OSS ã‚’é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚è©³ç´°ã¯ã¾ãŸã„ãšã‚Œæ›¸ã‘ãŸã‚‰ã¨æ€ã„ã¾ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://github.com/suzuki-shunsuke/gha-trigger" width="300" height="150" frameborder="0" scrolling="no"></iframe><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–">ãã®ä»–<a href="#ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–" title="Direct link to ãã®ä»–">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-picker-third-party">Aqua Picker (Third Party)<a href="#aqua-picker-third-party" class="hash-link" aria-label="Direct link to Aqua Picker (Third Party)" title="Direct link to Aqua Picker (Third Party)">â€‹</a></h3><p>å…¬å¼ã§ã¯ãªã„ã§ã™ãŒã€ aqua ã«è‰²ã€… Contribution ã—ã¦ãã ã•ã£ã¦ã„ã‚‹ <a href="https://twitter.com/4513echo" target="_blank" rel="noopener noreferrer">4513echo</a> ã•ã‚“ãŒä½œã‚‰ã‚Œã¦ã„ã‚‹ã‚µã‚¤ãƒˆã§ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://aqua-picker.deno.dev/" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/4513echo/status/1556953063365025798" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/4513echo/status/1558711976741572608" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/4513echo/status/1560054691827855360" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>ã‚ã‚ŠãŒãŸã„è©±ã§ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="chrome-ã®-tab-ã‚’æ‰‹å‹•ã§-group-ä½œã£ã¦æ•´ç†ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ãŸ">Chrome ã® tab ã‚’æ‰‹å‹•ã§ group ä½œã£ã¦æ•´ç†ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ãŸ<a href="#chrome-ã®-tab-ã‚’æ‰‹å‹•ã§-group-ä½œã£ã¦æ•´ç†ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ãŸ" class="hash-link" aria-label="Direct link to Chrome ã® tab ã‚’æ‰‹å‹•ã§ group ä½œã£ã¦æ•´ç†ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ãŸ" title="Direct link to Chrome ã® tab ã‚’æ‰‹å‹•ã§ group ä½œã£ã¦æ•´ç†ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ãŸ">â€‹</a></h3><p>tab ãŸãã•ã‚“é–‹ãã™ãã¦ç›®çš„ã®ãƒšãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚‰ãªããªã£ã¦æ‰‹å½“ãŸã‚Šã—ã ã„ã«é–‰ã˜ã‚‹ã¿ãŸã„ãªã®ã‚’ãªã‚“ã¨ã‹ã—ãŸã„ã¨ã¯å‰ã‹ã‚‰æ€ã£ã¦ã¾ã—ãŸã€‚</p><p>ãŸã¾ã« Chrome ã®æ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚°ã‚°ã£ãŸã‚Šã—ã¤ã¤ã‚‚ã©ã‚Œã‚‚ã—ã£ãã‚Šã“ãšã€ç‰¹ã«ä½•ã‚‚å¯¾ç­–ã‚’æ‰“ãŸãšã«æ¥ã¾ã—ãŸãŒã€
æœ€è¿‘ Chrome æ¨™æº–ã® Grouping æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã€æ¥­å‹™ã®ãƒˆãƒ”ãƒƒã‚¯ã”ã¨ã« Group ã‚’ä½¿ã£ã¦æ•´ç†ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¾ã—ãŸã€‚</p><p>ãã‚Œãªã‚Šã«ã†ã¾ãã„ã£ã¦ã¾ã™ãŒã€ã¾ã æ”¹å–„ã®ä½™åœ°ã¯ã‚ã‚Šãã†ãªæ„Ÿã˜ã¯ã™ã‚‹ã®ã§ã€æ¨¡ç´¢ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–ã®ãã®ä»–">ãã®ä»–ã®ãã®ä»–<a href="#ãã®ä»–ã®ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–ã®ãã®ä»–" title="Direct link to ãã®ä»–ã®ãã®ä»–">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua">aqua<a href="#aqua" class="hash-link" aria-label="Direct link to aqua" title="Direct link to aqua">â€‹</a></h3><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://github.com/aquaproj/aqua/issues/1076" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>GitHub Sponsor ã«ãªã‚‹ã¨è¨€ã£ã¦ã‚‚ã‚‰ãˆã¦ã‚ã‚ŠãŒãŸã„ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/hiro_o918/status/1554845898194108418" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>é›‘ã«ä½¿ãˆã‚‹ã¨ã„ã†ã®ã¯ã€å­¦ç¿’ã‚³ã‚¹ãƒˆã®ä½ã•ã®è¡¨ã‚Œã‹ãªã¨æ€ã„ã¾ã™ã€‚
ã“ã‚Œã¯ team ã‚„ project ã«ãƒ„ãƒ¼ãƒ«ã‚’å°å…¥ã—ã€æ™®åŠã—ã¦ã„ãä¸Šã§ã¯ã¨ã¦ã‚‚é‡è¦ãªã“ã¨ã§ã™ã€‚
å€‹äººã§ä½¿ã†åˆ†ã«ã¯å¤šå°‘å­¦ç¿’ã‚³ã‚¹ãƒˆãŒé«˜ãã¦ã‚‚å¥½ããªã‚‚ã®ã‚’ä½¿ãˆã°è‰¯ã„ã§ã™ãŒã€
ä»–ã®äººã«ã‚‚åºƒã‚ã¦ã„ãä¸Šã§ã¯å­¦ç¿’ã‚³ã‚¹ãƒˆã®ä½ã•ã¯æ¥µã‚ã¦é‡è¦ã§ã™ã€‚
ä»•äº‹ã§ä½¿ã†å ´åˆã«ã¯å­¦ç¿’ã™ã‚‹ã“ã¨ãŒç›®çš„ã§ã¯ãªãã€ä»–ã«ã‚‚ã‚„ã‚‹ã¹ãã“ã¨ãŒã‚ã‚‹ã¯ãšãªã®ã§ã€
ãã†ã„ã†çŠ¶æ…‹ã§ã‚‚ã‚¹ãƒˆãƒ¬ã‚¹ãªãã€ç°¡å˜ã«ä½¿ãˆã‚‹ã“ã¨ãŒã‚¹ãƒ ãƒ¼ã‚ºã«å°å…¥ã‚’é€²ã‚ã‚‹ä¸Šã§å¤§äº‹ã§ã™ã€‚
ãªã®ã§ã€å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ãã¦ team ã‚„ project ã«å°å…¥ã—ã‚„ã™ã„ã¨ã„ã†æ„å‘³ã§ã‚‚ã€ å€‹äººã® dotfiles ã ã‘ã§ãªã team, project ã§ä½¿ã†ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«ã‚‚ aqua ãŒåºƒãŒã£ã¦ã„ãã¨è‰¯ã„ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãŸã€é›‘ã«ä½¿ãˆã‚‹ã¨è¨€ã£ã¦ã‚‚ã€ aqua ã§ã¯ registry ã‚‚å«ã‚ã¦ version ã‚’å³æ ¼ã«å›ºå®šã—ç®¡ç†ã•ã‚Œã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å·®ç•°ã«ã‚ˆã‚‹å•é¡ŒãŒèµ·ã“ã‚‰ãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/LGUG2Z/status/1562129310219059200" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>ã“ã†ã‚„ã£ã¦å¾ã€…ã«èªçŸ¥ã•ã‚Œã¦ã„ãã®ã¯ã„ã„è©±ã§ã™ã­ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/ponkio_o/status/1562352036028461056" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/ponkio_o/status/1562356254991089669" width="300" height="150" frameborder="0" scrolling="no"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-registry-1">aqua-registry<a href="#aqua-registry-1" class="hash-link" aria-label="Direct link to aqua-registry" title="Direct link to aqua-registry">â€‹</a></h3><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/ponkio_o/status/1556532831324884992" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/kei711_/status/1561855780424679425" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/sukukyon/status/1560587208025063425" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/ryodocx/status/1562847088006021121" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>PR ãŠå¾…ã¡ã—ã¦ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfcmt-1">tfcmt<a href="#tfcmt-1" class="hash-link" aria-label="Direct link to tfcmt" title="Direct link to tfcmt">â€‹</a></h3><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/szkdash/status/1557334525381730304" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/koki_develop/status/1560188434227965952" width="300" height="150" frameborder="0" scrolling="no"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfaction-1">tfaction<a href="#tfaction-1" class="hash-link" aria-label="Direct link to tfaction" title="Direct link to tfaction">â€‹</a></h3><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/practainc/status/1555430142545399809" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/sonic883b/status/1557060143312805888" width="300" height="150" frameborder="0" scrolling="no"></iframe><blockquote><p>GCPã§ã®workload identityã¨é€£æºã§ãã‚‹ã‹</p></blockquote><p>ã§ãã¾ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/Kengo_TODA/status/1564576050671075329" width="300" height="150" frameborder="0" scrolling="no"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-comment-1">github-comment<a href="#github-comment-1" class="hash-link" aria-label="Direct link to github-comment" title="Direct link to github-comment">â€‹</a></h3><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/ponkio_o/status/1555119431260729344" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>github-comment ã§ã‚³ãƒ¡ãƒ³ãƒˆãŒé•·ã™ããŸå ´åˆã«ã€ä»£ã‚ã‚Šã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’ post ã™ã‚‹è¨­å®šã§ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/ponkio_o/status/1561046628269961216" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>inspire ã—ã¾ã—ãŸã€‚</p><blockquote><p>It is inspired from <a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/github-comment</a>.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-info-1">ci-info<a href="#ci-info-1" class="hash-link" aria-label="Direct link to ci-info" title="Direct link to ci-info">â€‹</a></h3><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/szkdash/status/1561735944213958661" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>ci-info ãŒè‡ªå‹•ã§ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ commit hash ãªã©ã®æƒ…å ±ã‚’å–å¾—ã—ã¦ãã‚Œã‚‹ã¨ã„ã†è©±ã§ã™ã­ã€‚
å†…éƒ¨çš„ã«ã¯ go-ci-env ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://github.com/suzuki-shunsuke/go-ci-env" width="300" height="150" frameborder="0" scrolling="no"></iframe>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[2022-07 æŒ¯ã‚Šè¿”ã‚Š]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-07</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-07</guid>
            <pubDate>Sat, 30 Jul 2022 09:30:55 GMT</pubDate>
            <description><![CDATA[ä»•äº‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><p>ä»Šæœˆã‹ã‚‰ Mercari ã® Platform Group ã® Platform DX team ã®ãƒ¡ãƒ³ãƒãƒ¼ã¨ã—ã¦ä»•äº‹ã‚’ã—ã¦ã„ã¾ã™ã€‚
è‹±èªã§è‹¥å¹²è‹¦åŠ´ã—ã¦ã„ã‚‹éƒ¨åˆ†ã¯ã‚ã‚Šã¾ã™ãŒãªã‚“ã¨ã‹ã‚„ã£ã¦ã„ã¾ã™ã€‚</p><p>ã“ã®ã”æ™‚ä¸–ãªã®ã§åŒåƒšã®æ–¹ã¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ä¼šã†ã“ã¨ã¯å½“åˆ†ç„¡ã„ã ã‚ã†ãªã¨æ€ã£ã¦ã„ã¾ã—ãŸãŒã€
2 å›ãã‚‰ã„æ­“è¿ä¼šã‚’ã—ã¦é ‚ã(ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚’å«ã‚ã‚‹ã¨ã‚‚ã£ã¨ã‚ã‚‹)ã€é¡”ã‚’åˆã‚ã›ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p><p>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã‹ãªã‚Šæ•´ã£ã¦ã¾ã™ã—ã€ã‚ã‹ã‚‰ãªã„ã“ã¨ã¯èã‘ã°æ•™ãˆã¦ã‚‚ã‚‰ãˆã¾ã™ã—ã€æ¯æ—¥ãƒ¡ãƒ³ã‚¿ãƒ¼ã¨ 10 ~ 15 åˆ†ç¨‹åº¦ 1on1 ã‚’ã‚„ã£ã¦ã„ã‚‹ã®ã§é †èª¿ã«ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’é€²ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã‹ãªã¨ã„ã†æ°—ãŒã—ã¦ã„ã¾ã™ã€‚</p><p>è‡ªå‹•åŒ–ã®ä»•çµ„ã¿ã¨ã‹ã¯ã‹ãªã‚Šæ•´ã£ã¦ã„ã¾ã™ãŒã€
<a href="https://aquaproj.github.io/" target="_blank" rel="noopener noreferrer">aqua</a> ã‚„ <a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">tfcmt</a>, <a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">github-comment</a> ã¨ã„ã£ãŸè‡ªåˆ†ãŒé–‹ç™ºã—ã¦ã„ã‚‹ OSS ã‚’æ´»ç”¨ã—ã¦æ›´ã« DX ã‚’é«˜ã‚ãŸã‚Šã‚³ãƒ¼ãƒ‰ã‚’ç¶ºéº—ã«ã—ã¦ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã¯ãªã„ã‹ãªã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚</p><p>ç¾åœ¨å¹¾ã¤ã‹ã®ã‚¿ã‚¹ã‚¯ã«å–ã‚Šçµ„ã¿ã¤ã¤ã€ä¸Šè¨˜ã®ãƒ„ãƒ¼ãƒ«ã‚’å°å…¥ã™ã‚‹ãŸã‚ã«ãƒ„ãƒ¼ãƒ«å´ã‚’è‹¥å¹²ä¿®æ­£ã—ã¦ã„ã¾ã™ã€‚
æ–°ã—ã„ç’°å¢ƒã«ç§»ã‚‹ã“ã¨ã§ä»Šã¾ã§è¦‹ãˆã¦ãªã‹ã£ãŸéƒ¨åˆ†ãŒè¦‹ãˆã¦ãƒ„ãƒ¼ãƒ«ã‚’é€²åŒ–ã•ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã¦ã„ã¦ã„ã„è©±ã ãªã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-é–‹ç™º">OSS é–‹ç™º<a href="#oss-é–‹ç™º" class="hash-link" aria-label="Direct link to OSS é–‹ç™º" title="Direct link to OSS é–‹ç™º">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aquaprojaqua">aquaproj/aqua<a href="#aquaprojaqua" class="hash-link" aria-label="Direct link to aquaproj/aqua" title="Direct link to aquaproj/aqua">â€‹</a></h3><p>v1.15.1 =&gt; v1.18.0</p><ul><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.16.0" target="_blank" rel="noopener noreferrer">v1.16.0</a><ul><li><code>aqua g</code> ã®æ¤œç´¢çµæœã®è¡¨ç¤ºã‚’æ”¹å–„</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.17.0" target="_blank" rel="noopener noreferrer">v1.17.0</a><ul><li>log ã®ã‚«ãƒ©ãƒ¼å‡ºåŠ›ã‚’ç’°å¢ƒå¤‰æ•°ã§åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li><li>progress bar ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç„¡åŠ¹åŒ–ã—ãŸã€‚ç’°å¢ƒå¤‰æ•°ã§æœ‰åŠ¹åŒ–ã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.18.0" target="_blank" rel="noopener noreferrer">v1.18.0</a><ul><li><code>aqua cp</code> ã‚³ãƒãƒ³ãƒ‰ã®ã‚µãƒãƒ¼ãƒˆ<ul><li>Docker image ãªã©ã«ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ aqua ãªã—ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹éš›ã«ä¾¿åˆ©</li></ul></li></ul></li></ul><p>aqua cp ã‚’ä½¿ã£ãŸ Docker image ã® build ã«é–¢ã—ã¦ã¯ä»¥ä¸‹ã«æ›¸ãã¾ã—ãŸã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://aquaproj.github.io/docs/tutorial-extras/build-container-image/" width="300" height="150" frameborder="0" scrolling="no"></iframe><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-registry">aqua-registry<a href="#aqua-registry" class="hash-link" aria-label="Direct link to aqua-registry" title="Direct link to aqua-registry">â€‹</a></h3><p>v3.5.0 =&gt; v3.20.0</p><p>Package æ•°ãŒ 637 ã‹ã‚‰ 702 ã¾ã§å¢—ãˆã¾ã—ãŸã€‚
Contribution ã—ã¦ãã ã•ã£ãŸæ–¹ã€…ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p><p>ã‚ã¨ã€ aqua-registry ã« contribution ã™ã‚‹ãŸã‚ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ <code>generate-registry.sh</code> ã‚„ <code>scaffold.sh</code> ã‚’ Go ã§æ›¸ãç›´ã—ãŸã‚Šã€æ–°ãŸã« <code>create-pr-new-pkg</code> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ ã—ãŸã‚Šã—ã¾ã—ãŸã€‚
Go ã§æ›¸ãç›´ã™ã“ã¨ã§ Windows ã§ã‚‚å‹•ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
scaffold ã—ã¦ã‹ã‚‰ PR ã‚’ä½œæˆã™ã‚‹ã¾ã§ãŒè‡ªå‹•åŒ–ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€ã‚ˆã‚Šç°¡å˜ã« contribution ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã‹ãªã‚Šä¾¿åˆ©ã§ã™ã€‚</p><p>ä¾‹ãˆã°ä»¥ä¸‹ã® 3 ã‚³ãƒãƒ³ãƒ‰ã§ <a href="https://github.com/kevwan/depu" target="_blank" rel="noopener noreferrer">kevwan/depu</a> ã‚’è¿½åŠ ã™ã‚‹ PR ã‚’ä½œæˆã§ãã¦ã—ã¾ã„ã¾ã—ãŸã€‚ <a href="https://github.com/aquaproj/aqua-registry/pull/4992" target="_blank" rel="noopener noreferrer">#4992</a></p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ go run ./cmd/scaffold kevwan/depu # scaffold</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ depu --help # å‹•ä½œç¢ºèª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ go run ./cmd/create-pr-new-pkg kevwan/depu # PR ä½œæˆ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¾ãŸ Style Guide ã‚’æ•´ãˆã¾ã—ãŸã€‚</p><p><a href="https://aquaproj.github.io/docs/reference/registry-style-guide" target="_blank" rel="noopener noreferrer">https://aquaproj.github.io/docs/reference/registry-style-guide</a></p><p>ãã—ã¦æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ Style Guide ã«åˆã‚ã›ã¦ä¿®æ­£ã—ã¾ã—ãŸã€‚</p><p>Package æ•°ãŒ 700 ã‚’è¶…ãˆã€é †èª¿ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ•°ã¯å¢—ãˆç¶šã‘ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã‚‚ç°¡å˜ã«æ–°ã—ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã§ãã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚‚å«ã‚ãŸä»•çµ„ã¿ä½œã‚Šã®è³œç‰©ã§ã™ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã¯è¦‹ãˆã«ãã„éƒ¨åˆ†ã§ã™ãŒã€ã“ã®è¾ºã®è‰¯ã•ã‚‚ä¼ã‚ã‚Œã°ã„ã„ãªã¨æ€ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfcmt">tfcmt<a href="#tfcmt" class="hash-link" aria-label="Direct link to tfcmt" title="Direct link to tfcmt">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.3.0" target="_blank" rel="noopener noreferrer">v3.3.0</a><ul><li>Google Cloud Build ã‚’æ¨™æº–ã§ã‚µãƒãƒ¼ãƒˆ</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-comment">github-comment<a href="#github-comment" class="hash-link" aria-label="Direct link to github-comment" title="Direct link to github-comment">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v4.3.0" target="_blank" rel="noopener noreferrer">v4.3.0</a><ul><li>post command ã§æ—¢å­˜ã®ã‚³ãƒãƒ³ãƒ‰ã®æ›´æ–°ã‚’ã‚µãƒãƒ¼ãƒˆ</li><li>ARM64 ã‚’ã‚µãƒãƒ¼ãƒˆ</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v4.4.0" target="_blank" rel="noopener noreferrer">v4.4.0</a><ul><li>Google Cloud Build ã‚’æ¨™æº–ã§ã‚µãƒãƒ¼ãƒˆ</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="go-ci-env">go-ci-env<a href="#go-ci-env" class="hash-link" aria-label="Direct link to go-ci-env" title="Direct link to go-ci-env">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/go-ci-env/releases/tag/v3.0.0" target="_blank" rel="noopener noreferrer">v3.0.0</a><ul><li>API ã‚’å¤§å¹…ã«ä¿®æ­£ã—ã€ä½¿ã„ã‚„ã™ãã—ãŸ</li><li><code>generic</code> package ã‚’å‰Šé™¤</li><li><code>Add</code> function ã‚’è¿½åŠ ã—ã€ç‹¬è‡ªã® Platform ã‚’ã‚µãƒãƒ¼ãƒˆã—ã‚„ã™ãã—ãŸ</li><li><code>JobURL</code> ã‚’è¿½åŠ </li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfaction">tfaction<a href="#tfaction" class="hash-link" aria-label="Direct link to tfaction" title="Direct link to tfaction">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.13" target="_blank" rel="noopener noreferrer">v0.5.13</a><ul><li>tfaction.yaml ã¨ tfaction-root.yaml ã§ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ç‰¹å®šã® working directory ã§ terraform ã® <code>-parallelism</code> ã‚’å¤‰ãˆãŸã„ã¨ãã¨ã‹ã«ä¾¿åˆ©ã§ã™</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/tfaction/releases/tag/v0.5.14" target="_blank" rel="noopener noreferrer">v0.5.14</a><ul><li>v0.5.13 ã§ç”Ÿã˜ãŸã€ terraform apply ã‚’å®Ÿè¡Œã™ã‚‹éš›ã« GCS ã‹ã‚‰ plan file ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã«å¤±æ•—ã™ã‚‹ãƒã‚°ã‚’ä¿®æ­£ã—ã¾ã—ãŸ (GCS ã˜ã‚ƒãªãã¦ S3 ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“)</li></ul></li></ul><p>tfaction, ã‚‚ã—ã‹ã—ã¦æŸWç¤¾ã§ã‚‚ä½¿ã‚ã‚Œã¦ã„ã‚‹(?)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–">ãã®ä»–<a href="#ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–" title="Direct link to ãã®ä»–">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-ã®-twitter-ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã£ã¦ã¿ãŸ">aqua ã® Twitter ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã£ã¦ã¿ãŸ<a href="#aqua-ã®-twitter-ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã£ã¦ã¿ãŸ" class="hash-link" aria-label="Direct link to aqua ã® Twitter ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã£ã¦ã¿ãŸ" title="Direct link to aqua ã® Twitter ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã£ã¦ã¿ãŸ">â€‹</a></h3><p><a href="https://twitter.com/aquaclivm" target="_blank" rel="noopener noreferrer">@aquaclivm</a>
ã‚ã¨ã¯ hash tag <a href="https://twitter.com/hashtag/aquaclivm" target="_blank" rel="noopener noreferrer">#aquaclivm</a> ã‚’æ´»ç”¨ã—å§‹ã‚ã¾ã—ãŸ(ã¡ã‚‡ãã¡ã‚‡ãã¤ã‘ã‚‹ã®å¿˜ã‚Œã¾ã™ãŒ)ã€‚
<code>aqua</code> ã¨ã„ã†ãƒ¯ãƒ¼ãƒ‰ãŒã‚ã¾ã‚Šã«ã‚‚ä¸€èˆ¬çš„ã™ãã¦æ¤œç´¢ã—ã¦ã‚‚ aqua ãŒåŸ‹ã‚‚ã‚Œã¦è¦‹ã¤ã‘ã‚‰ã‚Œãªã„ã®ã§ã€ aqua ã«é–¢ã—ã¦å‘Ÿãã¨ãã¯ @aquaclivm ã‚’ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã™ã‚‹ãªã‚Š hash tag ã‚’ã¤ã‘ã‚‹ãªã‚Šã—ã¦ã‚‚ã‚‰ãˆã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="starship-yggdrootleaderf-ã‚’å°å…¥">starship, Yggdroot/LeaderF ã‚’å°å…¥<a href="#starship-yggdrootleaderf-ã‚’å°å…¥" class="hash-link" aria-label="Direct link to starship, Yggdroot/LeaderF ã‚’å°å…¥" title="Direct link to starship, Yggdroot/LeaderF ã‚’å°å…¥">â€‹</a></h3><p>ä»•äº‹ç”¨ã® PC ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãŸéš›ã€ä»Šã¾ã§ä½¿ã£ã¦ãŸ denite.nvim ã‚„ kube-ps1 ãŒã†ã¾ãå‹•ã‹ãšã€èª¿ã¹ã‚‹ã®ã‚‚é¢å€’ãªã®ã§åˆ¥ã®ãƒ„ãƒ¼ãƒ«ã«ä¹—ã‚Šæ›ãˆã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/Yggdroot/LeaderF" target="_blank" rel="noopener noreferrer">https://github.com/Yggdroot/LeaderF</a></li><li><a href="https://github.com/starship/starship" target="_blank" rel="noopener noreferrer">https://github.com/starship/starship</a></li><li><a href="https://github.com/yuru7/HackGen" target="_blank" rel="noopener noreferrer">https://github.com/yuru7/HackGen</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–ã®ãã®ä»–">ãã®ä»–ã®ãã®ä»–<a href="#ãã®ä»–ã®ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–ã®ãã®ä»–" title="Direct link to ãã®ä»–ã®ãã®ä»–">â€‹</a></h2><p><code>aqua gr</code> ã‚³ãƒãƒ³ãƒ‰ã™ã”ã„ä¾¿åˆ©ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/tadayosi/status/1542803440837234688" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>fish ã§ aqua ã‚’è£œå®Œã§ãã‚‹ã‚ˆã†ã«ã—ãŸè©±ã§ã™ã€‚ã„ã„è©±</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://weblog.grimoh.net/entry/2022/07/31/135537" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>ã„ã„è©±</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/gr1m0h/status/1553043965166755840" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>ã‚ã‹ã‚‹ã€‚ã¿ã‚“ãªã«ã“ã®è‰¯ã•ã‚’çŸ¥ã£ã¦ã»ã—ã„</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/dubs11kt/status/1549372407017721856" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>åˆç‰©ç†å‡ºç¤¾æ™‚ã®è¨˜å¿µå†™çœŸ</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/13323303/182027235-161a89a8-e6c1-4bd7-bb00-71675f203942.png" alt="image" class="img_ev3q"></p>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[2022-06 æŒ¯ã‚Šè¿”ã‚Š]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-06</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-06</guid>
            <pubDate>Tue, 28 Jun 2022 05:16:55 GMT</pubDate>
            <description><![CDATA[ä»•äº‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><p>05-18 ãŒãƒªã‚¯ãƒ«ãƒ¼ãƒˆã§ã®æœ€çµ‚å‡ºç¤¾æ—¥ã§ã—ãŸã€‚ <a href="https://techblog.szksh.cloud/job-change-2022-06/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/job-change-2022-06/</a></p><p>ãªã®ã§ä»Šæœˆã¯ä¸¸ã€…ä¼‘ã¿ã§ã™ã€‚æ¥æœˆ 07-01 ã‹ã‚‰åƒãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ—¥å ±">æ—¥å ±(?)<a href="#æ—¥å ±" class="hash-link" aria-label="Direct link to æ—¥å ±(?)" title="Direct link to æ—¥å ±(?)">â€‹</a></h2><p><a href="https://zenn.dev/shunsuke_suzuki/scraps/dbfdeb67518c52" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/dbfdeb67518c52</a></p><p>zenn ã§æ—¥å ±ã®ã‚ˆã†ãªã‚‚ã®ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚ä¼‘ã¿ä¸­ãªã®ã«å‰ã„ã€‚
06-07 ã ã‘ä½•ã‚‚æ›¸ã„ã¦ãªã„ã§ã™ã­ã€‚ã“ã®æ—¥ã¯ã‚°ãƒ€ã‚°ãƒ€æ¼«ç”»èª­ã‚“ã§ãŸã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ã§ã‚‚åŸºæœ¬ã¯ä¼‘ã¿ä¸­ã‚‚ãšã£ã¨ OSS ã®ãƒ¡ãƒ³ãƒ†ã—ã¦ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog">Blog<a href="#blog" class="hash-link" aria-label="Direct link to Blog" title="Direct link to Blog">â€‹</a></h2><ul><li><a href="https://zenn.dev/shunsuke_suzuki/articles/aqua-windows-support" target="_blank" rel="noopener noreferrer">2022-06-23 CLI Version Manager ã® aqua ãŒ Windows ã‚’ã‚µãƒãƒ¼ãƒˆ</a></li><li><a href="https://zenn.dev/shunsuke_suzuki/articles/aqua-go-build-support" target="_blank" rel="noopener noreferrer">2022-06-08 aqua ãŒ Go è£½ã®ãƒ„ãƒ¼ãƒ«ã®ãƒ“ãƒ«ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-é–‹ç™º">OSS é–‹ç™º<a href="#oss-é–‹ç™º" class="hash-link" aria-label="Direct link to OSS é–‹ç™º" title="Direct link to OSS é–‹ç™º">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aquaprojaqua">aquaproj/aqua<a href="#aquaprojaqua" class="hash-link" aria-label="Direct link to aquaproj/aqua" title="Direct link to aquaproj/aqua">â€‹</a></h3><p>Windows å¯¾å¿œã¯éå¸¸ã«å¤§ããªæ”¹ä¿®ã§ã—ãŸãŒã€åéŸ¿ãŒã»ã¼ãªãã¦æ®‹å¿µã§ã—ãŸã€‚</p><p>v1.9.0 =&gt; v1.15.0</p><ul><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.10.0" target="_blank" rel="noopener noreferrer">v1.10.0</a><ul><li>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã®ãŸã‚ã« <code>-trace</code> ã¨ <code>-cpu-profile</code> option ã‚’è¿½åŠ </li><li><code>go install</code> ã«ã‚ˆã‚‹ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆ</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.10.0" target="_blank" rel="noopener noreferrer">v1.10.1</a>, <a href="https://github.com/aquaproj/aqua/releases/tag/v1.10.2" target="_blank" rel="noopener noreferrer">v1.10.2</a><ul><li>ç•°å¸¸ç³»ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’æ”¹å–„</li><li>aqua ã¯ãƒ„ãƒ¼ãƒ«ã®æ€§è³ªä¸Šã€ invalid ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãªã‚‹ã¹ãè¨±å®¹ã—ãªã„ã¨ã„ã‘ãªã„</li><li><a href="https://zenn.dev/link/comments/bb67b39f122f25" target="_blank" rel="noopener noreferrer">https://zenn.dev/link/comments/bb67b39f122f25</a></li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.11.0" target="_blank" rel="noopener noreferrer">v1.11.0</a><ul><li>Bash, Zsh ã§ã‚³ãƒãƒ³ãƒ‰ã‚’è£œå®Œã‚’ã‚µãƒãƒ¼ãƒˆ</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.12.0" target="_blank" rel="noopener noreferrer">v1.12.0</a><ul><li>Windows ã‚’æ­£å¼ã«ã‚µãƒãƒ¼ãƒˆ</li><li><code>supported_envs</code> ã®è¿½åŠ </li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.12.1" target="_blank" rel="noopener noreferrer">v1.12.1</a><ul><li><code>supported_envs</code> ã«é–¢ã™ã‚‹ãƒã‚°ä¿®æ­£</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.13.0" target="_blank" rel="noopener noreferrer">v1.13.0</a><ul><li>Windows ã§ãƒ­ã‚°ã«è‰²ãŒã¤ãã‚ˆã†ã«ä¿®æ­£</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.14.0" target="_blank" rel="noopener noreferrer">v1.14.0</a><ul><li>JSON Schema ã®ä¿®æ­£</li><li>Registry ã®ã‚³ãƒ¼ãƒ‰ã‚’ scaffold ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ <code>aqua gr</code> ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ <ul><li>Registry ã®è¨­å®šã‚’è‡ªåˆ†ã§æ›¸ãäººã«ã¨ã£ã¦ã¯éå¸¸ã«ä¾¿åˆ©</li></ul></li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.14.1" target="_blank" rel="noopener noreferrer">v1.14.1</a><ul><li>Windows é–¢é€£ã®ãƒã‚°ã‚’ä¿®æ­£</li></ul></li><li><a href="https://github.com/aquaproj/aqua/releases/tag/v1.15.0" target="_blank" rel="noopener noreferrer">v1.15.0</a><ul><li><code>aqua g</code> ã« <code>-s</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¦ã€ version ã‚’ interactive ã«é¸æŠã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li><li>ãƒ„ãƒ¼ãƒ«ã® download æ™‚ã« progress bar ã‚’è¡¨ç¤º</li></ul></li><li>å‹•ç”»åéŒ²<ul><li>å®£ä¼ã®ãŸã‚ã«å‹•ç”»åéŒ²</li><li><a href="https://zenn.dev/shunsuke_suzuki/scraps/210234e8fa39bf" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/210234e8fa39bf</a></li><li>è‹±èªã§çŸ­ã„ã®æ’®ã‚Šã¾ã—ãŸ: <a href="https://www.youtube.com/watch?v=adX_lloB3mY" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=adX_lloB3mY</a></li><li>æ—¥æœ¬èªã§é•·ã‚(10 ~ 30 åˆ†) ãã‚‰ã„ã®å‹•ç”»ã‚‚æº–å‚™ã—ã¦ã„ã¾ã™<ul><li><a href="https://zenn.dev/shunsuke_suzuki/scraps/c5e0da3c378e97" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/c5e0da3c378e97</a></li><li>ãŸã ã€ aqua ã‚’ rename ã™ã‚‹ãªã‚‰ãã®å¾Œã®ã»ã†ãŒè‰¯ã„ã‹ãªã¨æ€ã£ã¦ä¿ç•™</li></ul></li></ul></li><li>aqua ã®ãƒªãƒãƒ¼ãƒ ã‚’æ¤œè¨&amp;æº–å‚™<ul><li><a href="https://zenn.dev/shunsuke_suzuki/scraps/fe8807a0296f33" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/fe8807a0296f33</a></li><li><a href="https://github.com/aquaproj/aqua/issues/881" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/aqua/issues/881</a></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-registry">aqua-registry<a href="#aqua-registry" class="hash-link" aria-label="Direct link to aqua-registry" title="Direct link to aqua-registry">â€‹</a></h3><p>v2.19.0 =&gt; v3.5.0</p><p>Package æ•°ãŒ 515 ã‹ã‚‰ 637 ã¾ã§å¢—ãˆã¾ã—ãŸã€‚
<a href="https://github.com/aquaproj/aqua-registry/issues/4181" target="_blank" rel="noopener noreferrer">#4181</a> binenv ãŒå¯¾å¿œã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã«é–¢ã—ã¦ã€ aqua-registry ã§ã‚‚ã ã„ãŸã„å¯¾å¿œã—ã¾ã—ãŸã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfcmt">tfcmt<a href="#tfcmt" class="hash-link" aria-label="Direct link to tfcmt" title="Direct link to tfcmt">â€‹</a></h3><ul><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.2.4" target="_blank" rel="noopener noreferrer">v3.2.4</a>: <code>-auto-approve</code> ãªã—ã§ tfcmt apply å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</li><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.2.5" target="_blank" rel="noopener noreferrer">v3.2.5</a>: Windows ã«å¯¾å¿œã—ã¾ã—ãŸ</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="asciinema-trim">asciinema-trim<a href="#asciinema-trim" class="hash-link" aria-label="Direct link to asciinema-trim" title="Direct link to asciinema-trim">â€‹</a></h3><p><a href="https://github.com/suzuki-shunsuke/asciinema-trim/releases/tag/v0.1.2" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/asciinema-trim/releases/tag/v0.1.2</a></p><p>Windows ã«å¯¾å¿œã—ã¾ã—ãŸ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–">ãã®ä»–<a href="#ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–" title="Direct link to ãã®ä»–">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-ãŒç´¹ä»‹ã•ã‚Œã¾ã—ãŸ">aqua ãŒç´¹ä»‹ã•ã‚Œã¾ã—ãŸ<a href="#aqua-ãŒç´¹ä»‹ã•ã‚Œã¾ã—ãŸ" class="hash-link" aria-label="Direct link to aqua ãŒç´¹ä»‹ã•ã‚Œã¾ã—ãŸ" title="Direct link to aqua ãŒç´¹ä»‹ã•ã‚Œã¾ã—ãŸ">â€‹</a></h3><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://zenn.dev/zoetro/articles/9454a6231a1273" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>è‘—è€…ã® zoetro ã•ã‚“ã¯ä»¥å‰ã‚‚ aqua ã«é–¢ã™ã‚‹è¨˜äº‹ã‚’æ›¸ã„ã¦ãã ã•ã„ã¾ã—ãŸã€‚ã‚ã‚ŠãŒãŸã„è©±ã§ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://zenn.dev/zoetro/articles/eee98d772c2483" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>Terraform ã‚„ Kubernetes ã§ã¯æ§˜ã€…ãªå‘¨è¾ºãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Šã€ãã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†ã« aqua ã¯éå¸¸ã«ä¾¿åˆ©ã ã¨æ€ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="windows-ç’°å¢ƒã‚’ç”¨æ„ã™ã‚‹ãªã‚‰-amazon-workspaces-ãŒä¾¿åˆ©">Windows ç’°å¢ƒã‚’ç”¨æ„ã™ã‚‹ãªã‚‰ Amazon Workspaces ãŒä¾¿åˆ©<a href="#windows-ç’°å¢ƒã‚’ç”¨æ„ã™ã‚‹ãªã‚‰-amazon-workspaces-ãŒä¾¿åˆ©" class="hash-link" aria-label="Direct link to Windows ç’°å¢ƒã‚’ç”¨æ„ã™ã‚‹ãªã‚‰ Amazon Workspaces ãŒä¾¿åˆ©" title="Direct link to Windows ç’°å¢ƒã‚’ç”¨æ„ã™ã‚‹ãªã‚‰ Amazon Workspaces ãŒä¾¿åˆ©">â€‹</a></h3><p><a href="https://zenn.dev/shunsuke_suzuki/scraps/6859774d379414" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/6859774d379414</a></p><p>aqua ã® Windows å¯¾å¿œã§ Windows ç’°å¢ƒãŒå¿…è¦ã ã£ãŸã®ã§ Amazon Workspaces ã‚’ä½¿ã„ã¾ã—ãŸã€‚
ã¨ã¦ã‚‚ç°¡å˜ã« Windows ç’°å¢ƒã‚’ç”¨æ„ã§ãã‚‹ã®ã§ä¾¿åˆ©ã§ã—ãŸã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfcmt-plan-ã¯-plan-ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã‚‚å®Ÿè¡Œã§ãã‚‹">tfcmt plan ã¯ plan ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã‚‚å®Ÿè¡Œã§ãã‚‹<a href="#tfcmt-plan-ã¯-plan-ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã‚‚å®Ÿè¡Œã§ãã‚‹" class="hash-link" aria-label="Direct link to tfcmt plan ã¯ plan ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã‚‚å®Ÿè¡Œã§ãã‚‹" title="Direct link to tfcmt plan ã¯ plan ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã‚‚å®Ÿè¡Œã§ãã‚‹">â€‹</a></h3><p>terraform plan ã®ä»£ã‚ã‚Šã« terraform show ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ãˆã° plan file ã‚’ä½¿ã£ã¦ tfcmt ã§ã‚³ãƒ¡ãƒ³ãƒˆã§ãã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/tfcmt/issues/316" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tfcmt/issues/316</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfaction-ã®-star-æ•°ãŒãªãœã‹å¢—ãˆãŸ">tfaction ã® Star æ•°ãŒãªãœã‹å¢—ãˆãŸ<a href="#tfaction-ã®-star-æ•°ãŒãªãœã‹å¢—ãˆãŸ" class="hash-link" aria-label="Direct link to tfaction ã® Star æ•°ãŒãªãœã‹å¢—ãˆãŸ" title="Direct link to tfaction ã® Star æ•°ãŒãªãœã‹å¢—ãˆãŸ">â€‹</a></h3><p>ç†ç”±ã¯ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€çµæ§‹ star æ•°ãŒå¢—ãˆã¾ã—ãŸã€‚</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/737521634e44-20220605.png" alt="image" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="renovate-ãŒ-github-actions-xyz-0-ã‚’-xyz-ã«-update-ã—ã¦ãã‚Œãªã„åŸå› ã¨ä¿®æ­£æ–¹æ³•">Renovate ãŒ GitHub Actions x.y.z-0 ã‚’ x.y.z ã« update ã—ã¦ãã‚Œãªã„åŸå› ã¨ä¿®æ­£æ–¹æ³•<a href="#renovate-ãŒ-github-actions-xyz-0-ã‚’-xyz-ã«-update-ã—ã¦ãã‚Œãªã„åŸå› ã¨ä¿®æ­£æ–¹æ³•" class="hash-link" aria-label="Direct link to Renovate ãŒ GitHub Actions x.y.z-0 ã‚’ x.y.z ã« update ã—ã¦ãã‚Œãªã„åŸå› ã¨ä¿®æ­£æ–¹æ³•" title="Direct link to Renovate ãŒ GitHub Actions x.y.z-0 ã‚’ x.y.z ã« update ã—ã¦ãã‚Œãªã„åŸå› ã¨ä¿®æ­£æ–¹æ³•">â€‹</a></h3><p><a href="https://zenn.dev/shunsuke_suzuki/scraps/9b4a3e5e8f6925#comment-09bfe96f8a2c1d" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/9b4a3e5e8f6925#comment-09bfe96f8a2c1d</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="slide-ä½œæˆã¯-google-slide-ãŒè‡ªåˆ†ã«ã‚ã£ã¦ã‚‹">Slide ä½œæˆã¯ Google Slide ãŒè‡ªåˆ†ã«ã‚ã£ã¦ã‚‹<a href="#slide-ä½œæˆã¯-google-slide-ãŒè‡ªåˆ†ã«ã‚ã£ã¦ã‚‹" class="hash-link" aria-label="Direct link to Slide ä½œæˆã¯ Google Slide ãŒè‡ªåˆ†ã«ã‚ã£ã¦ã‚‹" title="Direct link to Slide ä½œæˆã¯ Google Slide ãŒè‡ªåˆ†ã«ã‚ã£ã¦ã‚‹">â€‹</a></h3><p>Slide ã‚’ãªã«ã§ä½œã‚‹ã‹è€ƒãˆãŸã‚Šã—ã¾ã—ãŸãŒã€çµå±€ Google Slide ãŒè‡ªåˆ†ã«ã¯åˆã£ã¦ã‚‹ã®ã§ã¯ãªã„ã‹ã¨ã„ã†çµè«–ã«è‡³ã‚Šã¾ã—ãŸã€‚
ã‚‚ã£ã¨ã‚‚ Slide ã£ã¦ã‚ã¾ã‚Šã‚³ã‚¹ãƒ‘ãŒè‰¯ããªã„ã®ã§ã€ãƒ–ãƒ­ã‚°ã¨ã‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã»ã†ãŒè‰¯ã„æ°—ã¯ã—ã¾ã™ã­ã€‚</p><p><a href="https://zenn.dev/link/comments/888dbb8af3ca0a" target="_blank" rel="noopener noreferrer">https://zenn.dev/link/comments/888dbb8af3ca0a</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒã‚¤ã‚¯è²·ã£ã¦ã¿ãŸ">ãƒã‚¤ã‚¯è²·ã£ã¦ã¿ãŸ<a href="#ãƒã‚¤ã‚¯è²·ã£ã¦ã¿ãŸ" class="hash-link" aria-label="Direct link to ãƒã‚¤ã‚¯è²·ã£ã¦ã¿ãŸ" title="Direct link to ãƒã‚¤ã‚¯è²·ã£ã¦ã¿ãŸ">â€‹</a></h3><p><a href="https://www.amazon.co.jp/gp/product/B099ZZMGJ5" target="_blank" rel="noopener noreferrer">https://www.amazon.co.jp/gp/product/B099ZZMGJ5</a></p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/3a302e3c9ba5-20220609.png" alt="image" class="img_ev3q"></p><p>aqua ã®å‹•ç”»ã‚’æ’®ã‚‹ã®ã«å†…è‡“ã®ãƒã‚¤ã‚¯ã ã¨ã‚¤ãƒã‚¤ãƒãªæ°—ãŒã—ãŸã®ã§ãƒã‚¤ã‚¯ã‚’è²·ã£ã¦ã¿ã¾ã—ãŸã€‚
æœ‰ç·šã®ãƒ˜ãƒƒãƒ‰ãƒ›ãƒ³ã—ãªã„ã¨ã„ã‘ãªã„ã®ãŒã¡ã‚‡ã£ã¨ãƒã‚¤ãƒŠã‚¹ã§ã™ã­ã€‚
QuickTime Player ã§éŒ²ç”»ã—ã¦ã¿ãŸã‚‰ã€ã¾ãå†…è‡“ã®ãƒã‚¤ã‚¯ã‚ˆã‚Šã¯ã‚¯ãƒªã‚¢ãªæ°—ãŒã—ã¾ã™ãŒã€
éŸ³ã‚’æ‹¾ã„ã™ãã¦ã„ã‚‹æ°—ã‚‚ã—ã¾ã™ã€‚</p><p>è²·ã£ãŸã‚ã¨ã¡ã‚‡ã£ã¨å‹•ç”»åéŒ²ã«ä½¿ã£ãŸã ã‘ã§ã‚ã¾ã‚Šä½¿ã£ã¦ãªã„ã§ã™ãŒã€æ¥æœˆã‹ã‚‰ä»•äº‹ã§ã‚‚ä½¿ã†æ©Ÿä¼šã‚ã‚‹ã®ã‹ãªï¼Ÿå†…è”µãƒã‚¤ã‚¯ã§ååˆ†ãªæ°—ã‚‚ã™ã‚‹ã‘ã©ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é‹å‹•">é‹å‹•<a href="#é‹å‹•" class="hash-link" aria-label="Direct link to é‹å‹•" title="Direct link to é‹å‹•">â€‹</a></h3><p>ã‚¢ã‚­ãƒ¬ã‚¹è…±ãŒç—›ãã¦èµ°ã‚Œãªã„ã‚“ã§ã™ãŒã€å“çƒã¯ãªã‚“ã¨ã‹å‡ºæ¥ã¾ã™ã€‚
ãƒã‚¤ãƒ©ã‚±ãƒƒãƒˆã¨ãƒã‚¤ã‚·ãƒ¥ãƒ¼ã‚ºã‚’è²·ã„ã¾ã—ãŸã€‚
é€±1, 2 ãã‚‰ã„ã§ã‚„ã£ã¦ã¾ã™ãŒã€ä»•äº‹å§‹ã¾ã£ãŸã‚‰é€±1ã«ãªã‚‹ã‹ã‚‚ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–ã®ãã®ä»–">ãã®ä»–ã®ãã®ä»–<a href="#ãã®ä»–ã®ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–ã®ãã®ä»–" title="Direct link to ãã®ä»–ã®ãã®ä»–">â€‹</a></h2><p>tweet ã®åŸ‹ã‚è¾¼ã¿ã€ã‚‚ã†ã¡ã‚‡ã„ã„ã„æ„Ÿã˜ã«ã—ãŸã„ã§ã™ã­ã€‚</p><p>tfaction ã«é–¢ã™ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã™ã”ã„è‡ªå‹•åŒ–ã•ã‚Œã¦ã„ã‚‹æ„Ÿã˜ãŒã—ã¦ã„ã„ã§ã™ã‚ˆã­ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/irotoris/status/1536953830306287617" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>è‡ªåˆ†ãŒ LINE ã§ Corporate Engineer ã‚„ã£ã¦ãŸé ƒã«ä½œã£ãŸ Slack App ãŒæœªã ã«ç¾å½¹ã‚‰ã—ãã¦æ„Ÿå‹•ã—ã¾ã—ãŸã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/szkdash/status/1537674427269545984" width="300" height="150" frameborder="0" scrolling="no"></iframe><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã•ã„ã”ã«">ã•ã„ã”ã«<a href="#ã•ã„ã”ã«" class="hash-link" aria-label="Direct link to ã•ã„ã”ã«" title="Direct link to ã•ã„ã”ã«">â€‹</a></h2><p>05-19 ã‹ã‚‰ 1 ãƒ¶æœˆä»¥ä¸Šã«æ¸¡ã‚‹æœ‰çµ¦æ¶ˆåŒ–ãŒçµ‚ã‚ã‚Šã¾ã—ãŸã€‚
é•·ã„ä¼‘ã¿ã®é–“ã«æ–°ã—ã„ OSS ã‚’ä½œã£ãŸã‚Šã—ãŸã„ã¨ã‚‚æ€ã£ã¦ã¾ã—ãŸãŒã€æ—¢å­˜ã® OSS (ä¸»ã« aqua) ã®ãƒ¡ãƒ³ãƒ†ã§æ‰‹ä¸€æ¯ã§ã—ãŸã€‚
ãã‚Œã§ã‚‚ aqua ã‚„ tfcmt ãªã©ã‚’æ”¹å–„ã§ããŸã®ã§è‰¯ã‹ã£ãŸã§ã™ã€‚</p><p>æ¥æœˆã‹ã‚‰ Mercari ã§åƒãã¾ã™ã€‚
ç’°å¢ƒãŒå¤§ããå¤‰ã‚ã‚‹ã¯ãš(ç‰¹ã«è‹±èª)ãªã®ã§ã€æ¥½ã—ã¿ãªåŠé¢ã¡ã‚‡ã£ã¨ç·Šå¼µã—ã¾ã™ã€‚</p>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[2022-05 æŒ¯ã‚Šè¿”ã‚Š]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-05</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-05</guid>
            <pubDate>Sat, 28 May 2022 05:16:55 GMT</pubDate>
            <description><![CDATA[ä»•äº‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><p>05-18 ãŒãƒªã‚¯ãƒ«ãƒ¼ãƒˆã§ã®æœ€çµ‚å‡ºç¤¾æ—¥ã§ã—ãŸã€‚</p><p><a href="https://twitter.com/szkdash/status/1526875250646204417" target="_blank" rel="noopener noreferrer">https://twitter.com/szkdash/status/1526875250646204417</a></p><p><a href="https://twitter.com/szkdash/status/1527235538951974912" target="_blank" rel="noopener noreferrer">https://twitter.com/szkdash/status/1527235538951974912</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog">Blog<a href="#blog" class="hash-link" aria-label="Direct link to Blog" title="Direct link to Blog">â€‹</a></h2><ul><li><a href="https://dev.to/suzukishunsuke/support-building-tools-written-in-go-2l10" target="_blank" rel="noopener noreferrer">aqua supports building tools with Go</a></li><li><a href="https://techblog.szksh.cloud/github-re-request-review" target="_blank" rel="noopener noreferrer">Pull Request ã‚’å†åº¦ review ã—ã¦ã»ã—ã„å ´åˆã¯ Re-request review ã‚’ã—ã¾ã—ã‚‡ã†</a></li><li><a href="https://techblog.szksh.cloud/job-change-2022-06" target="_blank" rel="noopener noreferrer">è»¢è·ã—ã¾ã™</a></li><li><a href="https://zenn.dev/shunsuke_suzuki/articles/renovate-issue-action" target="_blank" rel="noopener noreferrer">automerge ã§ããªã‹ã£ãŸ Renovate ã® Pull Request ã‚’ Issue ã¨ã—ã¦ç®¡ç†</a></li><li><a href="https://zenn.dev/shunsuke_suzuki/articles/cli-structured-logging" target="_blank" rel="noopener noreferrer">CLI ã§ã®æ§‹é€ åŒ–ãƒ­ã‚®ãƒ³ã‚°ã®ã™ã™ã‚</a></li><li><a href="https://zenn.dev/shunsuke_suzuki/articles/tfcmt-apply-v322" target="_blank" rel="noopener noreferrer">tfcmt apply ã§é€šçŸ¥å…ˆã®å–å¾—æ–¹æ³•ã‚’æ”¹å–„</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution">OSS Contribution<a href="#oss-contribution" class="hash-link" aria-label="Direct link to OSS Contribution" title="Direct link to OSS Contribution">â€‹</a></h2><table><thead><tr><th>merged date</th><th>repository</th><th>lang</th><th>PR's short description</th></tr></thead><tbody><tr><td>2022-05-07</td><td><a href="https://github.com/terraform-linters/tflint-ruleset-aws" target="_blank" rel="noopener noreferrer">terraform-linters/tflint-ruleset-aws</a></td><td>go</td><td><a href="https://github.com/terraform-linters/tflint-ruleset-aws/pull/342" target="_blank" rel="noopener noreferrer">feat: support provider aliases</a></td></tr></tbody></table><p>Terraform ã® AWS Provider ã® Alias ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã§ã‚‚ tflint ã® AWS Plugin ã® Deep Check ãŒæ­£ã—ãå‹•ãã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p><p><a href="https://github.com/terraform-linters/tflint-ruleset-aws/issues/331" target="_blank" rel="noopener noreferrer">https://github.com/terraform-linters/tflint-ruleset-aws/issues/331</a> ã‚’èª­ã‚€ã¨åˆ†ã‹ã‚Šã‚„ã™ã„ã‹ã‚‚ã€‚
ã“ã‚Œã‚’å®Ÿè£…ã™ã‚‹éš›ã«ã¯ãƒ¡ãƒ³ãƒ†ãƒŠã® <a href="https://github.com/wata727" target="_blank" rel="noopener noreferrer">@wata727</a> ã•ã‚“ã«çµæ§‹ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã„ãŸã ãã€åŠ©ã‹ã‚Šã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-é–‹ç™º">OSS é–‹ç™º<a href="#oss-é–‹ç™º" class="hash-link" aria-label="Direct link to OSS é–‹ç™º" title="Direct link to OSS é–‹ç™º">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°è¦">æ–°è¦<a href="#æ–°è¦" class="hash-link" aria-label="Direct link to æ–°è¦" title="Direct link to æ–°è¦">â€‹</a></h3><p>ç‰¹ã«ãªã—</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update">Update<a href="#update" class="hash-link" aria-label="Direct link to Update" title="Direct link to Update">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="demo">Demo<a href="#demo" class="hash-link" aria-label="Direct link to Demo" title="Direct link to Demo">â€‹</a></h4><p><a href="https://twitter.com/szkdash/status/1531555164800557056" target="_blank" rel="noopener noreferrer">https://twitter.com/szkdash/status/1531555164800557056</a></p><p>è‹¥å¹²æƒ…å ±ãŒå¤ããªã£ã¦ã„ãŸã®ã§ã€ãƒ‡ãƒ¢å‹•ç”»ã‚’ä½œã‚Šç›´ã—ã¾ã—ãŸã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://zenn.dev/shunsuke_suzuki/scraps/37c85ae936a651" width="300" height="150" frameborder="0" scrolling="no"></iframe><h4 class="anchor anchorWithStickyNavbar_LWe7" id="aquaprojaquaprojgithubio">aquaproj/aquaproj.github.io<a href="#aquaprojaquaprojgithubio" class="hash-link" aria-label="Direct link to aquaproj/aquaproj.github.io" title="Direct link to aquaproj/aquaproj.github.io">â€‹</a></h4><p><a href="https://github.com/aquaproj/aquaproj.github.io" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/aquaproj.github.io</a></p><p>zenn ã¨é•ã£ã¦ dev.to, medium ã§æ›¸ã„ãŸè¨˜äº‹ã¯ GitHub ã§ç®¡ç†ã•ã‚Œã¦ã„ãªã‹ã£ãŸã®ãŒå«Œã ã£ãŸã®ã§ã€
aquaproj.github.io ã§ Blog ã‚’æœ‰åŠ¹åŒ–ã—ã¦ dev.to, medium ã®è¨˜äº‹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã¾ã—ãŸã€‚
Canonical URL ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚
æ–°ãŸã«è‹±èªã§è¨˜äº‹ã‚’æ›¸ãéš›ã«ã¯ã“ã¡ã‚‰ã§æ›¸ã„ã¦ã€ dev.to ã«ã‚¯ãƒ­ã‚¹ãƒã‚¹ãƒˆã—ã¦ Canonical URL ã‚’è¨­å®šã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>é–¢é€£: <a href="https://zenn.dev/shunsuke_suzuki/scraps/43b8f553d08b6f" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/43b8f553d08b6f</a></p><p>ã‚ã¨ DocSearch ã«ã‚ˆã‚‹æ¤œç´¢ãŒã„ã¤ã®é–“ã«ã‹å‹•ã‹ãªããªã£ã¦ã„ãŸã®ã§ã‚µãƒãƒ¼ãƒˆã«å•ã„åˆã‚ã›ã¾ã—ãŸã€‚ <a href="https://github.com/aquaproj/aquaproj.github.io/issues/76" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/aquaproj.github.io/issues/76</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="aquaprojaqua-registry">aquaproj/aqua-registry<a href="#aquaprojaqua-registry" class="hash-link" aria-label="Direct link to aquaproj/aqua-registry" title="Direct link to aquaproj/aqua-registry">â€‹</a></h4><p><a href="https://github.com/aquaproj/aqua-registry" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/aqua-registry</a></p><p>v2.11.0 =&gt; v2.19.0 (ãƒ„ãƒ¼ãƒ«æ•°: 470 =&gt; 515)</p><p>æ§˜ã€…ãªãƒ„ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚
package type <code>go</code> ã®ãƒ„ãƒ¼ãƒ«ã‚‚è¿½åŠ ã—ã¾ã—ãŸã€‚ <a href="https://github.com/aquaproj/aqua-registry/pull/3713" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/aqua-registry/pull/3713</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="aquaprojaqua">aquaproj/aqua<a href="#aquaprojaqua" class="hash-link" aria-label="Direct link to aquaproj/aqua" title="Direct link to aquaproj/aqua">â€‹</a></h4><p><a href="https://github.com/aquaproj/aqua" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/aqua</a></p><ul><li>v1.5.0-0 =&gt; v1.9.0</li><li>v1.5.0: package åã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆ<ul><li>ãƒªãƒã‚¸ãƒˆãƒªåãŒå¤‰ã‚ã£ãŸã‚Šã€åˆ¥ã® org ã« transfer ã•ã‚ŒãŸã‚Šã—ãŸã¨ãã®ãŸã‚ã®æ©Ÿèƒ½</li></ul></li><li>v1.5.1<ul><li>åŒã˜ãƒ„ãƒ¼ãƒ«ã‚’è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆ(åŸºæœ¬ãã‚“ãªã“ã¨ã—ãªã„ã‘ã©)ã®ãƒã‚°ã‚’ä¿®æ­£</li><li>Registry ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ãŒ .json ã®å ´åˆã€ JSON ã¨ã—ã¦ãƒ‘ãƒ¼ã‚¹</li><li>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°</li></ul></li><li>v1.6.0<ul><li>standard registry ã® override ã®ã‚µãƒãƒ¼ãƒˆ: registry.yaml ã®ä»£ã‚ã‚Šã« registry.json ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§è‹¥å¹²ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ”¹å–„ã™ã‚‹</li><li>experimental feature ã¨ã„ã†æ¦‚å¿µã®å°å…¥<ul><li>execve(2) ã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚’ã‚µãƒãƒ¼ãƒˆã€‚æ®‹å¿µãªãŒã‚‰ macOS ã§æ­£å¸¸ã«å‹•ä½œã—ãªã„ã‚±ãƒ¼ã‚¹ãŒè¦‹ã‚‰ã‚Œã‚‹ã®ã§ experimental feature ã¨ã—ã¦ãƒªãƒªãƒ¼ã‚¹</li></ul></li><li>retry ã® limit ã«å¼•ã£ã‹ã‹ã£ãŸå ´åˆã«ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã‚ˆã†ã«ã—ãŸ</li><li>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°</li></ul></li><li>v1.6.1<ul><li>log ã« GOOS ã¨ GOARCH ã‚’è¿½åŠ ã€‚å•ã„åˆã‚ã›æ™‚ã«ä¾¿åˆ©</li><li>å¤§å¹…ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°</li><li>unit test ã®å¤§å¹…ãªè¿½åŠ </li></ul></li><li>v1.6.2<ul><li>v1.6.1 ã®ãƒã‚°ä¿®æ­£ã€‚ aqua g ã¨ aqua list ã§ global configuration ã‚’èª­ã¾ãªããªã£ã¦ã„ãŸã®ã‚’ä¿®æ­£</li></ul></li><li>v1.6.3<ul><li>aqua g ã§ 1 ä»¶ã‚‚ãƒãƒƒãƒã—ãªã‹ã£ãŸå ´åˆã« panic ãŒç™ºç”Ÿã™ã‚‹ã®ã‚’ä¿®æ­£</li></ul></li><li>v1.7.0<ul><li>Go è£½ã®ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã« go build ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã®ã‚’ã‚µãƒãƒ¼ãƒˆ</li></ul></li><li>v1.8.0<ul><li>aqua g ã§ GitHub Tag ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul></li><li>v1.9.0<ul><li>github_archive, go ã§ commit SHA ã‚’ version ã¨ã—ã¦æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul></li></ul><p>checksum ã®æ¤œè¨¼ã‚‚ POC ã¨ã—ã¦å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚
ã—ã‹ã— checksum ã®ãƒªã‚¹ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Git ã§ç®¡ç†ã—ãªã„ã¨ã„ã‘ãªã„ã®ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½“é¨“ã‚’æãªã†ã®ã§ã€ã©ã†ã™ã‚‹ã®ãŒè‰¯ã„ã®ã‹ã‚ˆãåˆ†ã‹ã‚‰ãšä¸€æ—¦ç½®ã„ã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/aquaproj/aqua/issues/427" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj/aqua/issues/427</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tfcmt">tfcmt<a href="#tfcmt" class="hash-link" aria-label="Direct link to tfcmt" title="Direct link to tfcmt">â€‹</a></h4><p><a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tfcmt</a></p><ul><li>v3.2.1 =&gt; v3.2.3</li><li>v3.2.2: apply ã® merge commit ã«é–¢é€£ã™ã‚‹ Pull Request ã‚’ API ã§å–å¾—</li><li>v3.2.3: GitHub Enterprise Support ã®ä¿®æ­£ã€‚ Graph QL API ã® Endpoint ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="github-comment">github-comment<a href="#github-comment" class="hash-link" aria-label="Direct link to github-comment" title="Direct link to github-comment">â€‹</a></h4><p><a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/github-comment</a></p><ul><li>v4.1.1 =&gt; v4.2.0</li><li>v4.2.0: GitHub Enterprise ã®ã‚µãƒãƒ¼ãƒˆ</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="renovate-issue-action">renovate-issue-action<a href="#renovate-issue-action" class="hash-link" aria-label="Direct link to renovate-issue-action" title="Direct link to renovate-issue-action">â€‹</a></h4><p><a href="https://github.com/suzuki-shunsuke/renovate-issue-action" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/renovate-issue-action</a></p><p>Project ã«è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã“ã¨ã§ã€ã ã„ã¶å®Ÿç”¨ãƒ¬ãƒ™ãƒ«ã«é”ã—ãŸæ°—ãŒã—ã¾ã™ã€‚</p><p>v0.2.1 =&gt; v0.3.1</p><ul><li>v0.2.2<ul><li>Issue ã® title ã¨ body ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’æ”¹å–„</li><li>additional_body field ã®è¿½åŠ </li></ul></li><li>v0.2.3<ul><li>Issue ã‚’ Project ã«è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul></li><li>v0.3.0<ul><li>Issue ã® body é–¢é€£ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ•´ç†</li></ul></li><li>v0.3.1<ul><li>ç´›ã‚‰ã‚ã—ã„ãƒ­ã‚°ã‚’å‰Šé™¤</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="asciinema-trim">asciinema-trim<a href="#asciinema-trim" class="hash-link" aria-label="Direct link to asciinema-trim" title="Direct link to asciinema-trim">â€‹</a></h4><p><a href="https://github.com/suzuki-shunsuke/asciinema-trim" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/asciinema-trim</a></p><p>v0.1.0 =&gt; v0.1.1</p><p>å†ç”Ÿé€Ÿåº¦ã®å¤‰æ›´ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚</p><p><a href="https://twitter.com/szkdash/status/1531563963057852416" target="_blank" rel="noopener noreferrer">https://twitter.com/szkdash/status/1531563963057852416</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–">ãã®ä»–<a href="#ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–" title="Direct link to ãã®ä»–">â€‹</a></h2><ul><li>CLAS ã§ã‚ªãƒ•ã‚£ã‚¹ãƒã‚§ã‚¢ã‚’ãƒ¬ãƒ³ã‚¿ãƒ«ã—ã¾ã—ãŸ</li><li><a href="https://www.amazon.co.jp/gp/product/B00FS9DK3C" target="_blank" rel="noopener noreferrer">è‹±èªã€Œãªã‚‹ã»ã©ï¼ã€ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã€€é€šã˜ã‚‹è‹±æ–‡ã¸ã®15ã‚¹ãƒ†ãƒƒãƒ—</a> ã‚’ Kindle ã§èª­ã¿ã¾ã—ãŸ<ul><li><a href="https://twitter.com/szkdash/status/1530421071903858689" target="_blank" rel="noopener noreferrer">https://twitter.com/szkdash/status/1530421071903858689</a></li></ul></li><li><a href="https://open.spotify.com/show/1PUdFj8hXIZdyFat3nk3Af" target="_blank" rel="noopener noreferrer">ã‚‚ã†ä¸€åº¦èª­ã‚€ SRE</a> ã‚’ spotify ã§ 1.5 å€é€Ÿã§èã„ã¦ã„ã¾ã™</li><li>é‹å‹•ã‚’é ‘å¼µã£ã¦ã„ã¾ã™</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clas-ã§ã‚ªãƒ•ã‚£ã‚¹ãƒã‚§ã‚¢ã‚’ãƒ¬ãƒ³ã‚¿ãƒ«ã—ã¾ã—ãŸ">CLAS ã§ã‚ªãƒ•ã‚£ã‚¹ãƒã‚§ã‚¢ã‚’ãƒ¬ãƒ³ã‚¿ãƒ«ã—ã¾ã—ãŸ<a href="#clas-ã§ã‚ªãƒ•ã‚£ã‚¹ãƒã‚§ã‚¢ã‚’ãƒ¬ãƒ³ã‚¿ãƒ«ã—ã¾ã—ãŸ" class="hash-link" aria-label="Direct link to CLAS ã§ã‚ªãƒ•ã‚£ã‚¹ãƒã‚§ã‚¢ã‚’ãƒ¬ãƒ³ã‚¿ãƒ«ã—ã¾ã—ãŸ" title="Direct link to CLAS ã§ã‚ªãƒ•ã‚£ã‚¹ãƒã‚§ã‚¢ã‚’ãƒ¬ãƒ³ã‚¿ãƒ«ã—ã¾ã—ãŸ">â€‹</a></h3><p>ä»¥å‰ã‹ã‚‰ã‚ªãƒ•ã‚£ã‚¹ãƒã‚§ã‚¢ã«èˆˆå‘³ã¯ã‚ã£ãŸã‚‚ã®ã®ã€çµæ§‹é«˜ã„ã§ã™ã—ã„ããªã‚Šé«˜ã„ã‚‚ã®ã‚’è²·ã£ã¦å¤±æ•—ã™ã‚‹ã®ã¯å«Œã ã£ãŸã®ã§ãƒ¬ãƒ³ã‚¿ãƒ«ã§è©¦ã™ã“ã¨ã«ã—ã¾ã—ãŸã€‚
ãƒ¬ãƒ³ã‚¿ãƒ«ã‚‚ã¯ã˜ã‚ã¦ãªã®ã§ä¸€ç•ªå®‰ã„ (1,650 å†† / æœˆ) ã®ã‹ã‚‰è©¦ã™ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><ul><li>MS-13 ãƒã‚§ã‚¢ ã²ã˜ç„¡ã— ãƒ–ãƒ©ãƒƒã‚¯</li><li><a href="https://clas.style/619" target="_blank" rel="noopener noreferrer">https://clas.style/619</a></li></ul><p>æ³¨æ–‡ã—ã¦ã‹ã‚‰å±Šãã¾ã§ã« 2 é€±é–“ä»¥ä¸Šã‹ã‹ã‚Šã¾ã—ãŸã€‚ Amazon ã¨ã‹ã®ç¿Œæ—¥é…é€ã«æ…£ã‚Œã¦ã„ãŸã®ã§ã€ 2 é€±é–“ä»¥ä¸Šã‹ã‹ã‚‹ã“ã¨ã«é©šãã¾ã—ãŸãŒã€ãã†ã„ã†ã‚‚ã®ã‹ã¨æ€ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>ä¸€ç•ªå®‰ã„ã®ã«ã—ãŸã‚‚ã®ã®ã€åº§ã‚Šå¿ƒåœ°ã¯ä»Šã¾ã§ã®ã‚ˆã‚Šã ã„ã¶è‰¯ã„ã§ã™ã€‚
ä»Šã¾ã§è‡ªåˆ†ã¯èƒŒã‚‚ãŸã‚Œã«å¯„ã‚Šã‹ã‹ã£ã¦ã„ã‚‹æ„Ÿè¦šãŒã‚ã¾ã‚Šãªã‹ã£ãŸã®ã§ã™ãŒã€æ–°ã—ã„ã®ã ã¨è‡ªç„¶ã¨è…°ã«èƒŒã‚‚ãŸã‚ŒãŒå½“ãŸã£ã¦æ”¯ãˆã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªæ„Ÿã˜ãŒã—ã¾ã™ã€‚
ã¨è¨€ã„ã¤ã¤ã€ä¸€ç•ªå®‰ã„ã‚‚ã®ãªã®ã§ã‚‚ã£ã¨ã„ã„ã‚„ã¤ã‚‚è©¦ã—ãŸã„ã¨ã¯æ€ã£ã¦ã„ã¾ã™ã€‚è‚˜æ›ã‘ãŒè‹¥å¹²ã»ã—ã„ã§ã™ã€‚</p><p>ã‚ªãƒ•ã‚£ã‚¹ãƒã‚§ã‚¢ã®ä»–ã«èˆˆå‘³ã‚ã‚‹ã‚‚ã®ã¨ã—ã¦ã¯ã€ãƒ™ãƒƒãƒ‰ã‚‚èˆˆå‘³ã‚ã‚Šã¾ã™ã€‚
ãƒ™ãƒƒãƒ‰ã®ãƒ¬ãƒ³ã‚¿ãƒ«ã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚ãŸã ãƒ™ãƒƒãƒ‰ã®å ´åˆã¯ã€ä»Šä½¿ã£ã¦ã‚‹ã‚„ã¤ã‚’ã©ã†ã™ã‚Œã°ã„ã„ã®ã‹ã‚ˆãã‚ã‹ã‚‰ãªã„ã—ã€ã‚ªãƒ•ã‚£ã‚¹ãƒã‚§ã‚¢ã‚ˆã‚Šã‚‚é¢å€’ãªæ°—ã‚‚ã—ã¾ã™ã€‚</p><p><a href="https://clas.style/furniture/bed/" target="_blank" rel="noopener noreferrer">https://clas.style/furniture/bed/</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é‹å‹•">é‹å‹•<a href="#é‹å‹•" class="hash-link" aria-label="Direct link to é‹å‹•" title="Direct link to é‹å‹•">â€‹</a></h3><p>æœ‰çµ¦æ¶ˆåŒ–ã§æ™‚é–“ã«ä½™è£•ã‚‚ã‚ã‚Šã¾ã™ã—ã€é‹å‹•ã‚’é€± 5, 6 ãã‚‰ã„ã§ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
å…ƒã€…é£Ÿäº‹ã«ã¯æ°—ã‚’ä½¿ã£ã¦ã„ã¦ãŠé…’ã‚‚é£²ã¾ãªã„ã—é–“é£Ÿã‚‚ã—ãªã„ã®ã§ã™ãŒã€å¼•ãã“ã‚‚ã£ã¦ã„ãŸã‚‰æ°—ã¥ã‹ã¬ã†ã¡ã«çµæ§‹å¤ªã£ã¦ã„ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–ã®ãã®ä»–">ãã®ä»–ã®ãã®ä»–<a href="#ãã®ä»–ã®ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–ã®ãã®ä»–" title="Direct link to ãã®ä»–ã®ãã®ä»–">â€‹</a></h2><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://zenn.dev/shunsuke_suzuki/scraps/3fa8e603c3bf09" width="300" height="150" frameborder="0" scrolling="no"></iframe><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/szkdash/status/1529707316991660032" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>go-yaml ã¯åˆ¥ã« watch ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã§ã™ãŒã€ v3.0.0 ã® tag ãŒæ‰“ãŸã‚Œã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚ v3 ã¯é•·ã„ã“ã¨ tag ãŒæ‰“ãŸã‚Œã¦ãªãã¦ä½¿ã†æ°—ã«ãªã‚Œã¾ã›ã‚“ã§ã—ãŸãŒã€
tag ãŒæ‰“ãŸã‚ŒãŸã¨ã„ã†ã“ã¨ã¯ stable ã«ãªã£ã¦ãã¦å®‰å¿ƒã—ã¦ä½¿ãˆã‚‹ã¨ã„ã†ã“ã¨ãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ
v2 ã¨ v3 ã§ã©ã†å¤‰ã‚ã£ã¦ã‚‹ã‹æŠŠæ¡ã—ã¦ãªã„ã®ã§ã€èª¿ã¹ã¦ã¿ã¦ã‚‚è‰¯ã„ã‹ã‚‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/szkdash/status/1529463196062347264" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>WhiteSource ãŒ MEND ã«åç§°ãŒå¤‰ã‚ã£ãŸã‚‰ã—ã„ã§ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/szkdash/status/1527834722029965312" width="300" height="150" frameborder="0" scrolling="no"></iframe><p><a href="https://github.com/spf13/afero" target="_blank" rel="noopener noreferrer">https://github.com/spf13/afero</a> ä¾¿åˆ©</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/szkdash/status/1527281850355359745" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>GitHub Actions ã® pull_request closed event ã§ã¯ workflow ãŒ trigger ã—ãªã„ã“ã¨ãŒã‚ã‚‹</p><blockquote><p>GitHub doesnâ€™t queue the merge commit job for closed PRs; So workflows using on: { pull_request: { types: <!-- -->[â€œclosedâ€]<!-- --> } } will not consistently be triggered.</p></blockquote><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/szkdash/status/1523544052008112128" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>Bot ãŒ team ã«å¯¾ã—ã¦ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã™ã‚‹ã«ã¯ team ã‚’ read ã™ã‚‹æ¨©é™ãŒå¿…è¦</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://twitter.com/deeeet/status/1527460224189181952" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>Mercari ã® Security Team ã® Blog Series èª­ã¾ã­ã°</p>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[è»¢è·ã—ã¾ã™]]></title>
            <link>https://techblog.szksh.cloud/job-change-2022-06</link>
            <guid>https://techblog.szksh.cloud/job-change-2022-06</guid>
            <pubDate>Thu, 19 May 2022 10:22:40 GMT</pubDate>
            <description><![CDATA[è»¢è·ã™ã‚‹ã“ã¨ã«ãªã£ãŸã®ã§ãã®çµŒç·¯ã¨ã‹ã‚’æ›¸ã“ã†ã‹ãªã¨æ€ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>è»¢è·ã™ã‚‹ã“ã¨ã«ãªã£ãŸã®ã§ãã®çµŒç·¯ã¨ã‹ã‚’æ›¸ã“ã†ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¾è·ã§ã¯ãªã«ã‚’ã‚„ã£ã¦ã„ãŸã®ã‹">ç¾è·ã§ã¯ãªã«ã‚’ã‚„ã£ã¦ã„ãŸã®ã‹<a href="#ç¾è·ã§ã¯ãªã«ã‚’ã‚„ã£ã¦ã„ãŸã®ã‹" class="hash-link" aria-label="Direct link to ç¾è·ã§ã¯ãªã«ã‚’ã‚„ã£ã¦ã„ãŸã®ã‹" title="Direct link to ç¾è·ã§ã¯ãªã«ã‚’ã‚„ã£ã¦ã„ãŸã®ã‹">â€‹</a></h2><p>ç¾è·ã§ã¯ Recruit ã§ã‚¹ã‚¿ãƒ‡ã‚£ã‚µãƒ—ãƒªåŠã³ Quipper Product (Quipper School, Quipper Video) ã® SRE ã‚’ã‚„ã£ã¦ã„ã¾ã—ãŸã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://brand.studysapuri.jp/career/position/sre" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>2019-10-01 ã‹ã‚‰ Quipper Japan Branch ã® SRE team ã« Join ã—ã€
Quipper Japan Branch ãŒ 2021-10-01 ã« Recruit ã«çµ±åˆã•ã‚Œã¦ã‹ã‚‰ã¯ Recruit ã® SRE ã‚’ã‚„ã£ã¦ã„ã¾ã—ãŸã€‚
çµ±åˆã•ã‚Œã¦ã‹ã‚‰ã‚‚æºã‚ã£ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚„æ¥­å‹™å†…å®¹ã¯ç‰¹ã«å¤‰ã‚ã£ã¦ãªã„ã®ã§ã€ 2 å¹´ 9 ãƒ¶æœˆã»ã©åœ¨ç±ã—ã¦ã„ãŸã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/resume" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/resume</a> ã«è·å‹™çµŒæ­´æ›¸ã‚’ç½®ã„ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚‚å‚ç…§ã—ã¦ãã ã•ã„ã€‚
ã¡ãªã¿ã«ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ä»Šå›ã®è»¢è·ã®éš›ã«ä½œã£ãŸã®ã§ã™ãŒã€ã“ã®ãƒªãƒã‚¸ãƒˆãƒªãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã®ã«æ°—ã¥ã„ã¦è‡ªåˆ†ã®è»¢è·ã‚’ã„ã¡æ—©ãå¯Ÿã—ãŸæ–¹ã‚‚ã„ãŸã‚ˆã†ã§ã—ãŸã€‚</p><p>SRE ã¨ã—ã¦æ§˜ã€…ãªã“ã¨ã‚’çµŒé¨“ã—ã¾ã—ãŸãŒã€ç‰¹ã«è‡ªåˆ†ã¯ Terraform ã® CI/CD Pipeline ã®æ”¹å–„ã«æ³¨åŠ›ã—ã¦ãã¾ã—ãŸã€‚
ãã—ã¦ãã®éç¨‹ã§æ§˜ã€…ãª OSS ã‚’é–‹ç™ºã—ã¦ãã¾ã—ãŸã€‚
è©³ç´°ã¯ãƒ–ãƒ­ã‚°ã‚„è·å‹™çµŒæ­´æ›¸ã«æ›¸ã„ã¦ã‚ã‚‹ã®ã§å‰²æ„›ã—ã¾ã™ã€‚</p><p>ã‚³ãƒ­ãƒŠã®æµè¡Œã«ä¼´ã„é€”ä¸­ã‹ã‚‰ä»Šã«è‡³ã‚‹ã¾ã§ãƒ•ãƒ«ãƒªãƒ¢ãƒ¼ãƒˆã«ãªã‚Šã€ãƒ•ãƒ«ãƒªãƒ¢ãƒ¼ãƒˆã ã£ãŸæœŸé–“ã®ã»ã†ãŒé•·ã„ã§ã™ã€‚
ãƒ•ãƒ«ãƒªãƒ¢ãƒ¼ãƒˆã«ãªã£ã¦ã‹ã‚‰ã¯ã‚ªãƒ•ã‚£ã‚¹ã«ã¯ãƒ¯ã‚¯ãƒãƒ³ã®è·åŸŸæ¥ç¨®ã‚’é™¤ã 1 å›ã—ã‹è¡Œã£ã¦ãªã„ã§ã™ã—ã€
åŒã˜ãƒãƒ¼ãƒ ã§ã‚‚è‡ªåˆ†ã®å¾Œã«å…¥ç¤¾ã—ãŸæ–¹ã¨ã¯ç›´æ¥ä¼šã£ãŸã“ã¨ã¯ãªã„ã§ã™ã€‚
ã§ã™ãŒã€ Slack ã‚„ Google Meet ãªã©ã§ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–ã£ã¦ã„ãŸã®ã§è‡ªåˆ†ã¨ã—ã¦ã¯ç‰¹ã«ä¸ä¾¿ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¹ã‚¿ã‚µãƒ—-sre-ã®ã™ã™ã‚">ã‚¹ã‚¿ã‚µãƒ— SRE ã®ã™ã™ã‚<a href="#ã‚¹ã‚¿ã‚µãƒ—-sre-ã®ã™ã™ã‚" class="hash-link" aria-label="Direct link to ã‚¹ã‚¿ã‚µãƒ— SRE ã®ã™ã™ã‚" title="Direct link to ã‚¹ã‚¿ã‚µãƒ— SRE ã®ã™ã™ã‚">â€‹</a></h3><p>IT ã®åŠ›ã§æ•™è‚²ã«å¤‰é©ã‚’èµ·ã“ã—ã€å­¦ã³ãŸã„äººãŒã‚ˆã‚Šè‡ªç”±ã«å­¦ã¹ã‚‹ä¸–ç•Œã‚’ç›®æŒ‡ã™ã‚¹ã‚¿ãƒ‡ã‚£ã‚µãƒ—ãƒªåŠã³ Quipper Product ã«é–¢ã‚ã‚Œã¦å¬‰ã—ãæ€ã£ã¦ã„ã¾ã™ã€‚
è»¢è·ã™ã‚‹è‡ªåˆ†ãŒè¨€ã†ã®ã‚‚ãªã‚“ã§ã™ãŒã€ã‚¹ã‚¿ã‚µãƒ—ã® SRE ãƒãƒ¼ãƒ ã¯æœ¬å½“ã«æµã¾ã‚ŒãŸç’°å¢ƒã§ã™ã€‚è»¢è·ã‚’è€ƒãˆã¦ã„ã‚‹äººã¯æ˜¯éå€™è£œã«å…¥ã‚Œã¦ã¿ã¦ãã ã•ã„ã€‚</p><p>ã‚¹ã‚¿ã‚µãƒ— SRE ã®è‰¯ã„ã¨ã“ã‚:</p><ul><li>åŒåƒš(SRE ä»¥å¤–ã‚‚å«ã‚€)ãŒå„ªç§€<ul><li>ãƒ–ãƒ­ã‚°ã‚‚æ˜¯éèª­ã‚“ã§ãã ã•ã„: <a href="https://blog.studysapuri.jp/" target="_blank" rel="noopener noreferrer">https://blog.studysapuri.jp/</a></li></ul></li><li>ç¾çŠ¶ã«æº€è¶³ã™ã‚‹ã“ã¨ãªãã€æ—¥ã€…æ”¹å–„ã«å–ã‚Šçµ„ã‚“ã§ã„ã‚‹<ul><li>æŠ€è¡“çš„ãªéƒ¨åˆ†ã ã§ãªãã€ MTG ãªã©ã®ã‚ã‚Šæ–¹ãªã©ã‚‚æ—¥ã€…è¦‹ç›´ã—ã¦ã„ã‚‹</li><li>æŒ¯ã‚Šè¿”ã‚Šã‚’ã—ã€èª²é¡Œã¨æ”¹å–„æ¡ˆã‚’è€ƒãˆå®Ÿè¡Œã™ã‚‹ã¨ã„ã†ã‚µã‚¤ã‚¯ãƒ«ã‚’æ—¥ã€…å›ã—ã¦ã„ã‚‹</li></ul></li><li>è‡ªå·±å®Œçµãªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ã®ãŸã‚ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®é–‹ç™ºã‚’è¡Œã£ã¦ã„ã‚‹<ul><li>SRE ãŒãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ã«ä¾é ¼ã‚’å—ã‘ã¦ã‚¤ãƒ³ãƒ•ãƒ©ã‚’æ§‹ç¯‰ã™ã‚‹ã®ã§ã¯ãªã„</li></ul></li><li>è£é‡ãŒå¤§ããã€è‡ªåˆ†ã§èª²é¡Œã‚’è¦‹ã¤ã‘ã¦æ”¹å–„ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹<ul><li>ãªãœãã‚ŒãŒå¿…è¦ãªã®ã‹ Issue ã‚’æ›¸ããªã©ã€èª¬æ˜è²¬ä»»ã¯ä¼´ã†ãŒã€ã¡ã‚ƒã‚“ã¨èª¬æ˜ã§ãã‚Œã° No ã¨ã¯ã‚ã¾ã‚Šè¨€ã‚ã‚Œãªã„</li><li>è‡ªèµ°å‡ºæ¥ãªã„äººã«ã¯å‘ãã¾ã›ã‚“</li></ul></li><li>æƒ…å ±ãŒæ¯”è¼ƒçš„ã‚ªãƒ¼ãƒ—ãƒ³<ul><li>Slack ã® Private channel ã‚„ DM ã§ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã»ã¼ãªã„</li><li>GitHub ãƒªãƒã‚¸ãƒˆãƒªã‚‚ã‚¹ã‚¿ã‚µãƒ—é–¢é€£ã®ã‚‚ã®ãªã‚‰ã»ã¼å…¨éƒ¨è¦‹ã‚Œã‚‹</li><li>GitHub ã‚’æ¤œç´¢ã™ã‚Œã°ã ã„ãŸã„æƒ…å ±ãŒè¦‹ã¤ã‹ã‚‹</li></ul></li><li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãæ–‡åŒ–ã‚‚ã‚ã‚‹</li><li>Postomortem ã‚„ Design Doc, Production Readiness Check, SLI/SLO ã¨ã„ã£ãŸ SRE ã®åŸºæœ¬çš„ãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãŒæ—¢ã«å®šç€ã—ã¦ã„ã‚‹</li><li>ã‚µãƒ¼ãƒ“ã‚¹ãŒå®‰å®šã—ã¦ã„ã‚‹<ul><li>ã‚µãƒ¼ãƒ“ã‚¹ã®æ€§è³ªä¸Šãƒ» SNS ã§ãƒã‚ºã£ã¦æ€¥ã«ã‚¹ãƒ‘ã‚¤ã‚¯ã™ã‚‹ã‚ˆã†ãªã“ã¨ãŒã»ã¼ãªã„</li><li>åŸºæœ¬çš„ã«ã¯ k8s ã® Cluster Autoscaler ã‚„ Horizontal Pod Autoscaler ã§å¯¾å¿œã§ãã‚‹(é•·æœŸçš„ãªã‚µãƒ¼ãƒ“ã‚¹æ‹¡å¤§ã®ãŸã‚ã«ä»–ã«ã‚‚ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™)</li><li>éšœå®³ã¯å°‘ãªãã€æ·±å¤œã‚„ä¼‘æ—¥ã«ç¨¼åƒã—ãªã„ã¨ã„ã‘ãªã„ã“ã¨ã‚‚å°‘ãªã„ã®ã§ã€ QOL ã‚’æãªã‚ãªã„</li></ul></li></ul><p><a href="https://brand.studysapuri.jp/career/position/sre" target="_blank" rel="noopener noreferrer">https://brand.studysapuri.jp/career/position/sre</a> ã«ã‚‚ã„ã„ã“ã¨ãŒæ›¸ã„ã¦ã‚ã‚‹ã®ã§ã€èª­ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚</p><p>ã‚ã¨ã€ Security ã«ç‰¹åŒ–ã—ãŸãƒã‚¸ã‚·ãƒ§ãƒ³ã‚‚ã‚ã‚‹ã®ã§ã€ãã¡ã‚‰ã‚‚èˆˆå‘³ãŒã‚ã‚Œã°æ˜¯éã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://brand.studysapuri.jp/career/position/product-security-engineer" width="300" height="150" frameborder="0" scrolling="no"></iframe><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è»¢è·ã¸ã®æµã‚Œ">è»¢è·ã¸ã®æµã‚Œ<a href="#è»¢è·ã¸ã®æµã‚Œ" class="hash-link" aria-label="Direct link to è»¢è·ã¸ã®æµã‚Œ" title="Direct link to è»¢è·ã¸ã®æµã‚Œ">â€‹</a></h2><p>è»¢è·ã®ãã£ã‹ã‘ã¯ã€ <a href="https://twitter.com/deeeet" target="_blank" rel="noopener noreferrer">@deeeet</a> ã•ã‚“ã‹ã‚‰ Twitter DM ã§å£°ã‚’ã‹ã‘ã¦ã„ãŸã ã„ãŸã“ã¨ã§ã—ãŸã€‚
deeeet ã•ã‚“ã¨ã¯éå»ã« 2 å›ã»ã©é¢è­˜ãŒã‚ã‚Šã€æœ€åˆã¯ã€Œ<a href="https://twitter.com/deeeet/status/1192410426413182977" target="_blank" rel="noopener noreferrer">çªæ’ƒ Terraform</a>ã€ã€2 å›ç›®ã¯ <a href="https://mercari.connpass.com/event/211073/" target="_blank" rel="noopener noreferrer">Open Policy Agent Rego Knowledge Sharing Meetup</a> ã¨ã„ã†ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ LT ä¼šã§ã—ãŸã€‚
ãŸã ã€é¢è­˜ãŒã‚ã‚‹ã¨ã¯ã„ãˆ deeeet ã•ã‚“ãŒè‡ªåˆ†ã®ã“ã¨ã‚’èªè­˜ã—ã¦ã„ã‚‹ã¨ã¯æ€ã£ã¦ã„ãªã‹ã£ãŸã®ã§é©šãã¾ã—ãŸã€‚
ã“ã“ä½•å¹´ã‹ OSS ã®é–‹ç™ºã‚„ blog ã®åŸ·ç­†ãªã©ã‚’ç²¾åŠ›çš„ã«è¡Œã£ã¦ããŸã®ãŒåŠŸã‚’å¥ã—ãŸã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>DM ã§å£°ã‚’ã‹ã‘ã¦ã„ãŸã ã„ã¦ã‹ã‚‰ç›´ãã«ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«é¢è«‡ã‚’ã—ã¦é ‚ãã€ãã®å¾Œç›´ãæ¡ç”¨ãƒšãƒ¼ã‚¸ã‹ã‚‰å¿œå‹Ÿã—ã¾ã—ãŸã€‚
è·å‹™çµŒæ­´æ›¸ã®è¨€èªã®æŒ‡å®šã¯ç‰¹ã«ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€æ¡ç”¨ãƒšãƒ¼ã‚¸ã«æ—¥æœ¬èªã® JD ãŒãªã„ã“ã¨ã‹ã‚‰ã€è‹±èªã§æ›¸ãã¾ã—ãŸã€‚
markdown ã§æ›¸ã„ã¦ <a href="https://github.com/simonhaenisch/md-to-pdf" target="_blank" rel="noopener noreferrer">md-to-pdf</a> ã§ PDF ã«å¤‰æ›ã—ã¾ã—ãŸã€‚
markdown ã§è·å‹™çµŒæ­´æ›¸ã‚’æ›¸ã„ãŸã®ã¯ã¯ã˜ã‚ã¦ã§ã™ãŒã€è‡ªåˆ†ã«ã¨ã£ã¦ã¯ Word ãªã©ã¨æ¯”ã¹ã¦ãšã£ã¨æ›¸ãã‚„ã™ã‹ã£ãŸã§ã™ã€‚</p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://github.com/suzuki-shunsuke/resume" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>è‡ªåˆ†ã¯ä»Šå›ã®ã‚‚å«ã‚ã¦éå»ã« 3 å›è»¢è·ã‚’ã—ã¦ã„ã¾ã™ãŒã€
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä»‹ã•ãšã«ç›´æ¥å¿œå‹Ÿã—ãŸã®ã¯ã¯ã˜ã‚ã¦ã§ã—ãŸã€‚
éå» 2 å›ã®è»¢è·æ´»å‹•ã¯è‰²ã€…ãªä¼šç¤¾ã®å‹Ÿé›†è¦é …ã«ç›®ã‚’é€šã—ã¦è¤‡æ•°ç¤¾ã®é¢æ¥ã‚’å—ã‘ã¦æ—¥ç¨‹ã‚’èª¿æ•´ã—ã¦é¢æ¥ã‚’å—ã‘ã«è¡Œã£ã¦ã¨ã€ãªã‹ãªã‹ç²¾ç¥çš„ã«ã‚‚è‚‰ä½“çš„ã«ã‚‚å¤§å¤‰ã§ã—ãŸã€‚
ä¸€æ–¹ã€ä»Šå›ã¯ 1 ç¤¾ã—ã‹å—ã‘ãªã‹ã£ãŸã“ã¨ã€ã¾ãŸã“ã®ã”æ™‚ä¸–ãªã®ã§é¢æ¥ã‚‚å…¨ã¦ãƒªãƒ¢ãƒ¼ãƒˆã ã£ãŸã“ã¨ã‚‚ã‚ã‚Šã ã„ã¶è² æ‹…ã¯å°‘ãªã‹ã£ãŸã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã©ã“ã«è»¢è·ã™ã‚‹ã®ã‹">ã©ã“ã«è»¢è·ã™ã‚‹ã®ã‹<a href="#ã©ã“ã«è»¢è·ã™ã‚‹ã®ã‹" class="hash-link" aria-label="Direct link to ã©ã“ã«è»¢è·ã™ã‚‹ã®ã‹" title="Direct link to ã©ã“ã«è»¢è·ã™ã‚‹ã®ã‹">â€‹</a></h2><p>2022-07-01 ã‹ã‚‰ã€ Mercari ã® <a href="https://apply.workable.com/mercari/j/111722DA96/" target="_blank" rel="noopener noreferrer">Platform Group</a> ã« Join ã—ã¾ã™ã€‚ã¾ã 1ãƒ¶æœˆä»¥ä¸Šå…ˆã§ã™ãŒã€ä»Šã‹ã‚‰æ¥½ã—ã¿ã§ã™ã€‚</p><p>Mercari ã«ã¯å„ªç§€ãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒé›†ã¾ã£ã¦ã¾ã™ã—ã€ <a href="https://twitter.com/deeeet/status/1482879967977684996" target="_blank" rel="noopener noreferrer">Platform Group ã® Blog Series</a> ã‚’èª­ã‚“ã§æŠ€è¡“çš„ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ãªã“ã¨ã‚’ã‚„ã£ã¦ã„ã¦é¢ç™½ãã†ã ã¨æ„Ÿã˜ã¾ã—ãŸã€‚
è‡ªåˆ†ãŒç¾è·ã§å–ã‚Šçµ„ã‚“ã§ã„ãŸ Terraform CI/CD Pipeline ãªã©ã®æ”¹å–„ã«ã‚‚é€šã˜ã‚‹éƒ¨åˆ†ãŒã‚ã‚Šã€è‡ªåˆ†ã®çµŒé¨“ãƒ»å¼·ã¿ã‚’æ´»ã‹ã—ã¤ã¤æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã§ãã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã—ãŸã€‚
Blog Series ã‚„ OSS ã®å…¬é–‹ãªã©ã€ç¤¾å¤–ã«ã‚‚æŠ€è¡“ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã«ã—ã¦ã„ã‚‹ã®ã‚‚è‰¯ã„æ–‡åŒ–ã ã¨æ„Ÿã˜ã¾ã—ãŸã€‚</p><p>ç¾è·ã§ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®ã‚ˆã†ãªã“ã¨ã‚’ã‚„ã£ã¦ã„ãä¸­ã§ã€
æŠ½è±¡åŒ–ã•ã‚ŒãŸ UI/UX ã‚’æä¾›ã™ã‚‹ã“ã¨ãƒ»ç”Ÿç”£æ€§ã‚’æãªã‚ãšã«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’æ‹…ä¿ã™ã‚‹ã“ã¨ãŒã¨ã¦ã‚‚é‡è¦ã‹ã¤é›£ã—ã„èª²é¡Œã ã¨æ„Ÿã˜ã¦ã„ã¦ã€
<a href="https://engineering.mercari.com/en/blog/entry/20220125-developer-experience-at-mercari/" target="_blank" rel="noopener noreferrer">Developer Experience at Mercari</a> ã‚„ <a href="https://engineering.mercari.com/en/blog/entry/20220121-securing-terraform-monorepo-ci/" target="_blank" rel="noopener noreferrer">Securing Terraform monorepo CI</a> ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã“ã¨ã«å…±æ„Ÿã—ã¾ã—ãŸã€‚</p><p>ä½™è«‡ã§ã™ãŒã€ã¨ã‚ã‚‹æ–¹ã‹ã‚‰è»¢è·ã™ã‚‹ãªã‚‰ Hashicorp ã«è»¢è·ã—ã¦æ¬²ã—ã„ã¨è¨€ã‚ã‚Œã¾ã—ãŸã€‚
è‡ªåˆ†ã®ã“ã‚Œã¾ã§ã® OSS ã®é–‹ç™ºã®çµŒé¨“ã‚’æ´»ã‹ã—ã€ã‚ˆã‚Šå¤šãã®äººãƒ»çµ„ç¹”ã«ä½¿ã£ã¦ã‚‚ã‚‰ãˆã‚‹ OSS ã®é–‹ç™ºã«æºã‚ã£ã¦ã»ã—ã„(ãã®ã»ã†ãŒã‚ˆã‚Šå¤§ããªãƒãƒªãƒ¥ãƒ¼ãŒå‡ºã›ã‚‹)ã¨ã„ã†æ„å›³ã ã¨æ€ã„ã¾ã™ãŒã€
å…·ä½“çš„ãªç¤¾åãŒå‡ºã¦ãã‚‹ã¨ã¯æ€ã£ã¦ã„ãªã‹ã£ãŸã®ã§ã³ã£ãã‚Šã—ã¾ã—ãŸã€‚
ã©ã“ã«æ‰€å±ã™ã‚‹ã«ã›ã‚ˆã€ã‚ˆã‚Šå¤šãã®äººãƒ»çµ„ç¹”ã«ä½¿ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã‚ˆã†ãª OSS ã®é–‹ç™ºã‚’ã—ã¦ã„ããŸã„ã§ã™ã­ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãŠã¾ã‘-oss-æ´»å‹•ã®æŒ¯ã‚Šè¿”ã‚Š">ãŠã¾ã‘: OSS æ´»å‹•ã®æŒ¯ã‚Šè¿”ã‚Š<a href="#ãŠã¾ã‘-oss-æ´»å‹•ã®æŒ¯ã‚Šè¿”ã‚Š" class="hash-link" aria-label="Direct link to ãŠã¾ã‘: OSS æ´»å‹•ã®æŒ¯ã‚Šè¿”ã‚Š" title="Direct link to ãŠã¾ã‘: OSS æ´»å‹•ã®æŒ¯ã‚Šè¿”ã‚Š">â€‹</a></h2><p>è»¢è·ã®è©±ã¨ã¯é–¢ä¿‚ãªã„ã§ã™ãŒã€ã¤ã„ã§ã«ã“ã“æ•°å¹´ã® OSS æ´»å‹•ãªã©ã«ã¤ã„ã¦ã‚‚æŒ¯ã‚Šè¿”ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke?tab=followers" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://img.shields.io/github/followers/suzuki-shunsuke.svg?style=social&amp;label=Follow&amp;maxAge=2592000" alt="GitHub followers" class="img_ev3q"></a></p><p>2022-05-19 æ™‚ç‚¹ã®çŠ¶æ³</p><p><a href="https://github.com/suzuki-shunsuke?tab=followers" target="_blank" rel="noopener noreferrer">GitHub Followers: 139</a></p><p><img loading="lazy" src="https://user-images.githubusercontent.com/13323303/169187254-97423eb7-cdbf-485c-bcb5-6852c89b8669.png" alt="image" class="img_ev3q"></p><p>ã‚„ã¯ã‚Š Star æ•°ä¸Šä½ 3 ã¤ã¯æ€ã„å…¥ã‚ŒãŒã‚ã‚Šã¾ã™ã—ã€ <a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">github-comment</a> ã‚„ <a href="https://github.com/suzuki-shunsuke/ci-info" target="_blank" rel="noopener noreferrer">ci-info</a> ã‚‚ä¾¿åˆ©ãªã®ã§ã‚‚ã£ã¨è©•ä¾¡ã•ã‚Œã¦ã»ã—ã„ã¨æ€ã„ã¾ã™ã€‚
è‰²ã€…ãªã‚‚ã®ã‚’ä½œã£ã¦ãã¾ã—ãŸãŒã€ã“ã“ã§ã¯ã“ã‚Œã‚‰ã«çµã£ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqua">aqua<a href="#aqua" class="hash-link" aria-label="Direct link to aqua" title="Direct link to aqua">â€‹</a></h3><p>ä¸€ç•ªæ€ã„å…¥ã‚ŒãŒã‚ã‚‹ã®ã¯ <a href="https://aquaproj.github.io/" target="_blank" rel="noopener noreferrer">aqua</a> ã§ã™ã€‚
æ±ç”¨çš„ãª CLI ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ã¯è‰²ã€…ã‚ã‚Šãã†ã§æ„å¤–ã¨ã‚ã¾ã‚Šã‚ã‚Šã¾ã›ã‚“(å¤šåˆ†)ã€‚
æœ‰åãªã®ã¯ <a href="https://asdf-vm.com/" target="_blank" rel="noopener noreferrer">asdf</a> ãã‚‰ã„ã§ã™ãŒã€ã“ã‚Œã¯è‡ªåˆ†ãŒæ±‚ã‚ã¦ã„ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ (<a href="https://nixos.org/" target="_blank" rel="noopener noreferrer">Nix</a> ã¨ã‹ã‚‚ã‚ã‚‹ã‘ã©ã€è‰¯ãçŸ¥ã‚Šã¾ã›ã‚“) ã€‚</p><p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®šã™ã‚‹ã“ã¨ã§ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®é•ã„ã«ã‚ˆã‚‹ãƒˆãƒ©ãƒ–ãƒ«ã‚’èµ·ã“ã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
aqua ã¯ä½¿ã†ã®ãŒã¨ã¦ã‚‚ç°¡å˜ã§ã€ (symbolic link ã•ãˆä½œã‚‰ã‚Œã¦ã„ã‚Œã°) ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§æŒ‡å®šã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚
aqua g ã«ã‚ˆã‚‹æ¤œç´¢ã¯ä½¿ã„å‹æ‰‹ãŒã‚ˆã„ã§ã™ã€‚ GitHub Actions ã§ç°¡å˜ã«å°å…¥ãŒã§ãã‚‹ã‚ˆã† Action ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>aqua ã¯ Renovate ã® Preset Config ã‚’æä¾›ã—ã¦ãŠã‚Šã€ Renovate ã‚’ä½¿ã£ã¦ç°¡å˜ã« update ã®è‡ªå‹•åŒ–ãŒã§ãã¾ã™ã€‚
aqua ã¯ Renovate ã‚’æœ€ã‚‚ä¸Šæ‰‹ãæ´»ç”¨ã—ãŸ OSS ã®ä¸€ã¤ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>aqua ã«ã¯ Registry ã¨ã„ã† Ecosystem ãŒã‚ã‚Šã¾ã™ã€‚
aqua æœ¬ä½“ã¸ã® contribution ã«ã¯ãã‚Œãªã‚Šã®ãƒãƒ¼ãƒ‰ãƒ«ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ãŒã€ <a href="https://github.com/aquaproj/aqua-registry" target="_blank" rel="noopener noreferrer">aqua-registry</a> ã¨ã„ã†å…¬å¼ã® Registry ã«ã¯ç°¡å˜ã« Contribution ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
2022-05-19 æ™‚ç‚¹ã§ã‚ã‚ŠãŒãŸã„ã“ã¨ã«è‡ªåˆ†ä»¥å¤–ã« <a href="https://github.com/aquaproj/aqua-registry/graphs/contributors" target="_blank" rel="noopener noreferrer">13 äººã®æ–¹ã« Contribution é ‚ã„ã¦ã„ã¾ã™</a>ã€‚
æœ¬ä½“ã¨ã¯ç‹¬ç«‹ã—ãŸæ‹¡å¼µæ©Ÿæ§‹ã‚’æŒã£ãŸ OSS ã‚’ä½œã‚‹ã“ã¨ãŒã§ããŸã“ã¨ã«ã‚‚æº€è¶³ã—ã¦ã„ã¾ã™ã€‚</p><p>aqua-registry ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã®æ•°ã¯ã€ 2022-05-19 ç¾åœ¨ <a href="https://github.com/asdf-vm/asdf-plugins" target="_blank" rel="noopener noreferrer">asdf-plugins</a> ã‚’è¶…ãˆã¾ã—ãŸã€‚
ã ã‹ã‚‰ aqua ã®ã»ã†ãŒå„ªã‚Œã¦ã„ã‚‹ã¨ã„ã†è©±ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ asdf ã¨åŒç­‰ä»¥ä¸Šã«å¤šãã®ãƒ„ãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã¨ã¯è¨€ãˆã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ asdf plugin list all | wc -l   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     470</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ aqua list | wc -l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     499</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>aqua ã¯ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ç¶™ç¶šçš„ update ã‚’éå¸¸ã«å®¹æ˜“ã«ã—ã¾ã™ã€‚
ãƒ„ãƒ¼ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å±•é–‹ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚ˆã†ãªå®šå‹çš„ãªã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãå¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã—ã€ã„ã¤ã¾ã§ã‚‚å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä½¿ã‚ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ã¾ãŸã€ Go ã§ GitHub Actions ã® Action ã‚’ä½œã‚ŠãŸã„ã¨è¡Œã£ãŸå ´åˆã«ã€æ…‹ã€… Action ã¨ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ã›ãšã« aqua ã§ install ã—ã¦ run step ã§å®Ÿè¡Œã™ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚„ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚
ä¾‹ãˆã°è‡ªåˆ†ã¯ <a href="https://github.com/suzuki-shunsuke/renovate-issue-action" target="_blank" rel="noopener noreferrer">renovate-issue-action</a> ã¨ã„ã† GitHub Actions ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’å‰æã¨ã—ãŸ CLI ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã„ã¾ã™ãŒã€
ã“ã‚Œã‚‚æ…‹ã€… Action ã¨ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ã›ãšã« aqua ã§ install ã—ã¦ run step ã§å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><p>e.g.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> aquaproj/aqua</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">installer@v1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">aqua_version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1.6.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> renovate</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">issue</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfaction">tfaction<a href="#tfaction" class="hash-link" aria-label="Direct link to tfaction" title="Direct link to tfaction">â€‹</a></h3><p><a href="https://github.com/suzuki-shunsuke/tfaction" target="_blank" rel="noopener noreferrer">tfaction</a> ã¯ GitHub Actions ã§ Terraform ã® CI/CD Pipeline ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã® Action ã® Collection ã§ã™ã€‚
ä¾¿åˆ©ãªå˜ä½“ã® Action ã¯è‰²ã€…ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ workflow å…¨ä½“ã‚’ã‚«ãƒãƒ¼ã™ã‚‹ã‚‚ã®ã¯ã‚ã¾ã‚Šä»–ã«ãªã„ã®ã§ã¯ãªã„ã‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
ã“ã†ã„ã† CI/CD Pipeline ã¯ã‚ã¾ã‚Šã‚ªãƒ¼ãƒ—ãƒ³ã«ã•ã‚Œãªã„é¢ã‚‚ã‚ã‚‹ã¨æ€ã†ã®ã§ã€ãã‚Œã‚’ OSS ã«ã§ããŸã“ã¨ã¯æœ‰æ„ç¾©ãªã“ã¨ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfcmt">tfcmt<a href="#tfcmt" class="hash-link" aria-label="Direct link to tfcmt" title="Direct link to tfcmt">â€‹</a></h3><p><a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">tfcmt</a> ã¯ CI ã§å®Ÿè¡Œã—ãŸ terraform plan, apply ã®çµæœã‚’ Pull Request ã«åˆ†ã‹ã‚Šã‚„ã™ãé€šçŸ¥ã™ã‚‹ CLI ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
<a href="https://github.com/mercari/tfnotify" target="_blank" rel="noopener noreferrer">tfnotify</a> ã®ãƒ•ã‚©ãƒ¼ã‚¯ã§ã™ãŒã€ GitHub ã¸ã®é€šçŸ¥ã«ç‰¹åŒ–ã™ã‚‹ä»£ã‚ã‚Šã«æ§˜ã€…ãªæ©Ÿèƒ½æ”¹å–„ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚
GitHub ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã‚ã‚Œã° tfcmt ã‚’å€‹äººçš„ã«ã¯ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚
OSS ã¯æ°—ã«å…¥ã‚‰ãªã‘ã‚Œã°ãƒ•ã‚©ãƒ¼ã‚¯ã™ã‚Œã°ã„ã„ã¨ã¯ã‚ˆãè¨€ã£ãŸã‚‚ã®ã§ã™ãŒ(?)ã€å®Ÿéš›ã«ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¦å€‹äººã§ã“ã“ã¾ã§é–‹ç™ºã™ã‚‹ã¨ã¯ã€æˆ‘ãªãŒã‚‰ã‚ˆãã‚„ã£ãŸãªã¨æ€ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-comment">github-comment<a href="#github-comment" class="hash-link" aria-label="Direct link to github-comment" title="Direct link to github-comment">â€‹</a></h3><p><a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">github-comment</a> ã¯ Pull Request, Issue ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’ã—ãŸã‚Šã‚³ãƒ¡ãƒ³ãƒˆã‚’éè¡¨ç¤ºã«ã—ãŸã‚Šã™ã‚‹ CLI ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ä½¿ã„æ–¹æ¬¡ç¬¬ã§ã™ãŒã€ CI ã‚’ã‚ˆã‚Šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã«ã—ã€ Developer ã¨ DevOps Engineer ã®åŒæ–¹ã®ç”Ÿç”£æ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p><a href="https://zenn.dev/shunsuke_suzuki/articles/improve-cicd-with-github-comment" target="_blank" rel="noopener noreferrer">github-comment ã§ PR ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’ã—ã¦ CI ã®çµæœã‚’åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-info">ci-info<a href="#ci-info" class="hash-link" aria-label="Direct link to ci-info" title="Direct link to ci-info">â€‹</a></h3><p><a href="https://github.com/suzuki-shunsuke/ci-info" target="_blank" rel="noopener noreferrer">ci-info</a> ã¯åœ°å‘³ãªãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ CI ã«é–¢é€£ã—ãŸæƒ…å ±ã‚’å–å¾—ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã—ãŸã‚Šç’°å¢ƒå¤‰æ•°ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ CLI ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
CI ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã¨ã€ push event ã«é–¢é€£ã™ã‚‹ Pull Request ã¨ã‹ã€ Pull Request ã® label ã® list ã¨ã‹ã€ Pull Request ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã¨ã‹ã€ Pull Request ã® Author ã¨ã‹æ¬²ã—ããªã£ãŸã‚Šã™ã‚‹ã®ã§ã™ãŒã€ãã†ã„ã£ãŸæƒ…å ±ã‚’å–å¾—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ¯å›æ›¸ãã®ã¯åœ°å‘³ã«é¢å€’ã§ã™ã€‚ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‹ã‚‚è€ƒãˆã‚‹ã¨ãªãŠã•ã‚‰ã§ã™ã€‚
ã¾ãŸã€ CircleCI ã‚„ GitHub Actions ãªã©è¤‡æ•°ã® CI Platform ã«å¯¾å¿œã—ã¦ã„ã¦ã€ãã‚Œã‚‰ã®é•ã„ã‚’å¸åã™ã‚‹æ„å‘³åˆã„ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã•ã„ã”ã«">ã•ã„ã”ã«<a href="#ã•ã„ã”ã«" class="hash-link" aria-label="Direct link to ã•ã„ã”ã«" title="Direct link to ã•ã„ã”ã«">â€‹</a></h2><p>ä»¥ä¸Šã€ç¾è·ã§ã‚„ã£ã¦ããŸã“ã¨ã€è»¢è·ã®çµŒç·¯ã€ã“ã“æ•°å¹´ã‚„ã£ã¦ããŸ OSS é–‹ç™ºã«ã¤ã„ã¦æ›¸ãã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[Pull Request ã‚’å†åº¦ review ã—ã¦ã»ã—ã„å ´åˆã¯ Re-request review ã‚’ã—ã¾ã—ã‚‡ã†]]></title>
            <link>https://techblog.szksh.cloud/github-re-request-review</link>
            <guid>https://techblog.szksh.cloud/github-re-request-review</guid>
            <pubDate>Sun, 08 May 2022 06:47:40 GMT</pubDate>
            <description><![CDATA[Pull Request ã‚’å†åº¦ review ã—ã¦ã»ã—ã„å ´åˆã«ã¯ã€ mention ã¤ãã§ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã®ã§ã¯ãªãã€]]></description>
            <content:encoded><![CDATA[<p>Pull Request ã‚’å†åº¦ review ã—ã¦ã»ã—ã„å ´åˆã«ã¯ã€ mention ã¤ãã§ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã®ã§ã¯ãªãã€
Re-request review ã‚’ã—ã¾ã—ã‚‡ã†ã€‚
GitHub ã«ã¯å†åº¦ review ä¾é ¼ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/13323303/167285404-c9a1a1ee-1a81-41b3-9b68-1a5dc0fc95f3.png" alt="image" class="img_ev3q"></p><iframe class="hatenablogcard" style="width:100%;height:155px;max-width:680px" src="https://hatenablog-parts.com/embed?url=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/about-pull-request-reviews#re-requesting-a-review" width="300" height="150" frameborder="0" scrolling="no"></iframe><p>mention ã¤ãã®ã‚³ãƒ¡ãƒ³ãƒˆã§ã¯ã€ä¸€åº¦é€šçŸ¥ã‚’è¦‹é€ƒã—ãŸã‚Šã€å¾Œã§å¯¾å¿œã—ã‚ˆã†ã¨æ€ã£ã¦æ™‚é–“ãŒçµŒã£ã¦ã—ã¾ã£ãŸå ´åˆã«ã€
å¿˜ã‚Œã‚‰ã‚Œã‚„ã™ã„ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚</p><p>Re-request review ã‚’ä½¿ã†ã¨ mention åŒæ§˜ã«é€šçŸ¥ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§é€šçŸ¥ãŒè¡Œãã®ã«åŠ ãˆã€ review å¾…ã¡ã® pull request ã‚’æ¤œç´¢ã§çµã‚Šè¾¼ã‚ãŸã‚Šã€è‡ªåˆ†ã® review å¾…ã¡ã® pull request ã‚’ä¸€è¦§ã§ããŸã‚Šã—ã¾ã™ã€‚</p><p>è‡ªåˆ†ã® review å¾…ã¡ã® pull request ä¸€è¦§: <a href="https://github.com/pulls/review-requested" target="_blank" rel="noopener noreferrer">https://github.com/pulls/review-requested</a></p><p>æ¤œç´¢ã§çµã‚Šè¾¼ã¿</p><ul><li>Awaiting review from you</li><li>Awaiting review from you or your team</li></ul><p><img loading="lazy" src="https://user-images.githubusercontent.com/13323303/167285469-59caf353-ecc8-4f59-82eb-220077254cea.png" alt="image" class="img_ev3q"></p><p>ã¾ãŸã€ Slack ã® integration ã§å®šæœŸçš„ã«é€šçŸ¥ã‚’é£›ã°ã—ã¦ãƒªãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ã“ã¨ã§ã€å¿˜ã‚Œã‚‹ã®ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚</p>]]></content:encoded>
            <category>practice</category>
        </item>
        <item>
            <title><![CDATA[2022-04 æŒ¯ã‚Šè¿”ã‚Š]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-04</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-04</guid>
            <pubDate>Thu, 05 May 2022 05:16:55 GMT</pubDate>
            <description><![CDATA[ä»•äº‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><ul><li>GitHub Discussions ã®æ¤œè¨¼</li><li>renovate-issue-action ã®å°å…¥</li><li>tfcmt ã§ patch option ã®æœ‰åŠ¹åŒ–</li><li>etc</li></ul><p>GitHub Discussions ã«ä»•äº‹ã®ãƒŠãƒ¬ãƒƒã‚¸ã‚’è“„ç©ã§ããªã„ã‹æ¤œè¨¼ã—ãŸã‚Šã—ã¾ã—ãŸã€‚
Slack ã¨æ¯”ã¹ã¦ãƒŠãƒ¬ãƒƒã‚¸ã‚’è“„ç©ã—ã‚„ã™ã„ã®ã§ã¯ãªã„ã‹ã¨æœŸå¾…ã™ã‚‹ä¸€æ–¹ã€
Slack ã®ã‚ˆã†ã«ãã®å ´ã§è³ªå•ã‚’ã—ã¦ã™ãè§£æ±ºã™ã‚‹ã®ã«ã¯å‘ã‹ãªã„ã‹ãªã¨ã„ã†æ°—ã‚‚ã—ã¾ã—ãŸã€‚
ã¡ã‚ƒã‚“ã¨ã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›¸ãã‚ˆã‚Šã¯ã¨ã‚Šã‚ãˆãš Discussions ã« Q&amp;A å½¢å¼ã§ãƒŠãƒ¬ãƒƒã‚¸ã‚’æ®‹ã—ã¦ãŠãã®ã¯ä½ã‚³ã‚¹ãƒˆã§ã‚„ã‚Œã‚‹ã‹ãªã¨æ€ã†åé¢ã€æ‰‹é–“ã‚‚ã‹ã‹ã‚Šãã†ã§ã™ã€‚
æ´»ç”¨ã®ä»•æ–¹ã‚’æ¨¡ç´¢ã™ã‚‹ã“ã¨ã€ç„¡ç†ãªãé‹ç”¨ã§ãã‚‹ãƒ«ãƒ¼ãƒ«ã‚’å®šã‚ã‚‹ã“ã¨ã€çµ„ç¹”ãƒ»ãƒãƒ¼ãƒ ã§ãƒ„ãƒ¼ãƒ«ã®æ´»ç”¨æ–¹æ³•ãƒ»ä½¿ã„åˆ†ã‘ã®èªè­˜ã‚’åˆã‚ã›ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog">Blog<a href="#blog" class="hash-link" aria-label="Direct link to Blog" title="Direct link to Blog">â€‹</a></h2><ul><li><a href="https://zenn.dev/shunsuke_suzuki/articles/tfcmt-plan-patch" target="_blank" rel="noopener noreferrer">tfcmt ãŒã‚³ãƒ¡ãƒ³ãƒˆã®æ›´æ–°ã‚’ã‚µãƒãƒ¼ãƒˆ</a></li><li><a href="https://dev.to/suzukishunsuke/tfcmt-supports-updating-comments-ebg" target="_blank" rel="noopener noreferrer">tfcmt supports updating comments</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-é–‹ç™º">OSS é–‹ç™º<a href="#oss-é–‹ç™º" class="hash-link" aria-label="Direct link to OSS é–‹ç™º" title="Direct link to OSS é–‹ç™º">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°è¦é–‹ç™º">æ–°è¦é–‹ç™º<a href="#æ–°è¦é–‹ç™º" class="hash-link" aria-label="Direct link to æ–°è¦é–‹ç™º" title="Direct link to æ–°è¦é–‹ç™º">â€‹</a></h3><table><thead><tr><th>first release date</th><th>name</th><th>badges</th><th>lang</th><th>type</th><th>short description</th></tr></thead><tbody><tr><td>2022-04-23</td><td><a href="https://github.com/suzuki-shunsuke/renovate-issue-action" target="_blank" rel="noopener noreferrer">renovate-issue-action</a></td><td><a href="https://github.com/suzuki-shunsuke/renovate-issue-action" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://img.shields.io/github/last-commit/suzuki-shunsuke/renovate-issue-action.svg" alt="GitHub last commit" class="img_ev3q"></a></td><td>go</td><td>cli for GitHub Actions</td><td>Create, update, and close GitHub Issues with GitHub Actions according to Renovate Pull Requests</td></tr><tr><td>2022-04-21</td><td><a href="https://github.com/suzuki-shunsuke/zap-error" target="_blank" rel="noopener noreferrer">zap-error</a></td><td><a href="https://github.com/suzuki-shunsuke/zap-error" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://img.shields.io/github/last-commit/suzuki-shunsuke/zap-error.svg" alt="GitHub last commit" class="img_ev3q"></a></td><td>go</td><td>library</td><td>Embed zap.Field into error</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="zap-error">zap-error<a href="#zap-error" class="hash-link" aria-label="Direct link to zap-error" title="Direct link to zap-error">â€‹</a></h4><p>zap-error ã¯ Go ã® error ã« zap.Field ã‚’åŸ‹ã‚è¾¼ã¿ã€æ§‹é€ åŒ–ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ error ã«æŒãŸã›ã¦ãƒ­ã‚®ãƒ³ã‚°ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚
Go ã§ã¯ <code>fmt.Errorf</code> ã‚’ä½¿ã£ã¦ã‚¨ãƒ©ãƒ¼ã«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä»˜ä¸ã•ã›ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ãŒã€ <code>fmt.Errorf</code> ã§ã¯æ§‹é€ åŒ–ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä»˜ä¸ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚
ã¾ãŸã€ uber-go/zap ã‚’å§‹ã‚ã¨ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ãŸæ§‹é€ åŒ–ãƒ­ã‚®ãƒ³ã‚°ã‚‚ä¸€èˆ¬çš„ã«è¡Œã‚ã‚Œã‚‹ã“ã¨ã§ã™ã€‚
ã§ã‚ã‚Œã° error ã«æ§‹é€ åŒ–ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä»˜ä¸ã—ãƒ­ã‚®ãƒ³ã‚°ã«æ´»ç”¨ã—ãŸã„ã¨æ€ã†ã®ã¯å€‹äººçš„ã«ã¯è‡ªç„¶ãªã“ã¨ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
zap-error ã¯ãã®ãŸã‚ã®è–„ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ error ã« zap.Fields ã‚’ä»˜ä¸ã™ã‚‹é–¢æ•°ã¨ã€ error ã‚’ zap.Fields ã«å¤‰æ›ã™ã‚‹é–¢æ•°ã® 2 ã¤ã® API ã—ã‹æä¾›ã—ã¦ã„ã¾ã›ã‚“ã€‚
zap ã® logger ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ã‚ˆã†ãªã“ã¨ã¯ã—ã¦ã„ãªã„ã®ã§ zap ã¯ãã®ã¾ã¾ä½¿ãˆã¾ã™ã€‚</p><p>ã¡ãªã¿ã« logrus ç”¨ã® <a href="https://github.com/suzuki-shunsuke/logrus-error" target="_blank" rel="noopener noreferrer">logrus-error</a> ã¨ã„ã†ã®ã‚‚å…ƒã€…ä½œã£ã¦ã„ã¾ã™ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="renovate-issue-action">renovate-issue-action<a href="#renovate-issue-action" class="hash-link" aria-label="Direct link to renovate-issue-action" title="Direct link to renovate-issue-action">â€‹</a></h4><p>Renovate ã§ã™ã‚“ãªã‚Š automerge å‡ºæ¥ãªã‹ã£ãŸ Pull Request ã‚’ Issue ã¨ã—ã¦ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã® GitHub Action ã§ã™(æ­£ç¢ºã«ã¯ Action ã§ã¯ãªãã¦ CLI ã§ã™ãŒ)ã€‚
ã“ã‚Œã¯ã„ãšã‚Œã¡ã‚ƒã‚“ã¨ãƒ–ãƒ­ã‚°ã‚’æ›¸ããŸã„ã§ã™ã­ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update">Update<a href="#update" class="hash-link" aria-label="Direct link to Update" title="Direct link to Update">â€‹</a></h3><ul><li><a href="https://github.com/aquaproj/aqua-registry" target="_blank" rel="noopener noreferrer">aquaproj/aqua-registry</a><ul><li>é‚ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã®æ•°ã§ asdf-plugins ã‚’è¶…ãˆã¾ã—ãŸ: <a href="https://twitter.com/szkdash/status/1518895119205683201" target="_blank" rel="noopener noreferrer">https://twitter.com/szkdash/status/1518895119205683201</a></li><li>v1.11.0 =&gt; v2.10.0</li></ul></li><li><a href="https://github.com/aquaproj/aqua" target="_blank" rel="noopener noreferrer">aquaproj/aqua</a><ul><li>v1.3.0-0 =&gt; v1.5.0-0</li><li>v1.3.0: overrides ã®ã‚µãƒãƒ¼ãƒˆ</li><li>v1.4.0: Registry ã®ãƒ†ã‚¹ãƒˆå‘ã‘ã«ã€ GOOS ã¨ GOARCH ã‚’ç’°å¢ƒå¤‰æ•°ã§å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸ<ul><li>aqua-registry ã® CI ã§ã‚‚ä½¿ã‚ã‚Œã¦ã„ã¦ã€æœ¬æ¥ CI ã§ãƒ†ã‚¹ãƒˆãŒé›£ã—ã„ ARM64 å‘ã‘ã®ãƒ†ã‚¹ãƒˆã«æ´»ç”¨ã•ã‚Œã¦ã„ã¾ã™</li><li>JSON Schema ã‚’è¿½åŠ ã—ã¾ã—ãŸ</li></ul></li></ul></li><li><a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/tfcmt</a><ul><li>v3.1.0 =&gt; v3.2.1</li><li>plan ã®ã‚³ãƒ¡ãƒ³ãƒˆã®æ›´æ–°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/tfaction" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/tfaction</a><ul><li>v0.5.7 =&gt; v0.5.11</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution">OSS Contribution<a href="#oss-contribution" class="hash-link" aria-label="Direct link to OSS Contribution" title="Direct link to OSS Contribution">â€‹</a></h2><table><thead><tr><th>merged date</th><th>repository</th><th>lang</th><th>PR's short description</th></tr></thead><tbody><tr><td>2022-04-29</td><td><a href="https://github.com/shuaibiyy/awesome-terraform" target="_blank" rel="noopener noreferrer">shuaibiyy/awesome-terraform</a></td><td>document</td><td><a href="https://github.com/shuaibiyy/awesome-terraform/pull/164" target="_blank" rel="noopener noreferrer">tools: add tfaction</a></td></tr><tr><td>2022-04-29</td><td><a href="https://github.com/shuaibiyy/awesome-terraform" target="_blank" rel="noopener noreferrer">shuaibiyy/awesome-terraform</a></td><td>document</td><td><a href="https://github.com/shuaibiyy/awesome-terraform/pull/165" target="_blank" rel="noopener noreferrer">fix: update links to some tools</a></td></tr><tr><td>2022-04-22</td><td><a href="https://github.com/kreuzwerker/terraform-provider-docker" target="_blank" rel="noopener noreferrer">kreuzwerker/terraform-provider-docker</a></td><td>go</td><td><a href="https://github.com/kreuzwerker/terraform-provider-docker/pull/371" target="_blank" rel="noopener noreferrer">chore: remove the workflow to close stale issues and pull requests</a></td></tr><tr><td>2022-04-21</td><td><a href="https://github.com/mitchellh/mapstructure" target="_blank" rel="noopener noreferrer">mitchellh/mapstructure</a></td><td>go</td><td><a href="https://github.com/mitchellh/mapstructure/pull/265" target="_blank" rel="noopener noreferrer">fix: panic when Decode's input is array and output is a slice</a></td></tr><tr><td>2022-04-12</td><td><a href="https://github.com/rhysd/actionlint" target="_blank" rel="noopener noreferrer">rhysd/actionlint</a></td><td>go</td><td><a href="https://github.com/rhysd/actionlint/pull/131" target="_blank" rel="noopener noreferrer">fix: add permissions "pages" and "discussions" and remove invalid permission "metadata"</a></td></tr><tr><td>2022-04-06</td><td><a href="https://github.com/terraform-linters/tflint-ruleset-aws" target="_blank" rel="noopener noreferrer">terraform-linters/tflint-ruleset-aws</a></td><td>go</td><td><a href="https://github.com/terraform-linters/tflint-ruleset-aws/pull/333" target="_blank" rel="noopener noreferrer">style: format rules/api/rule.go.tmpl and run go generate ./...</a></td></tr></tbody></table><p>tfaction ãŒ awesome-terraform ã«è¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[2022-03 æŒ¯ã‚Šè¿”ã‚Š]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-03</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-03</guid>
            <pubDate>Sat, 02 Apr 2022 05:16:55 GMT</pubDate>
            <description><![CDATA[3 æœˆã¯ blog ã‚’çµæ§‹èª­ã¿ã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>3 æœˆã¯ blog ã‚’çµæ§‹èª­ã¿ã¾ã—ãŸã€‚</p><p><a href="https://zenn.dev/shunsuke_suzuki/scraps/602d6f6b803168" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/602d6f6b803168</a></p><p>å¾Œã¯è·å ´ã®ã‚¤ãƒ³ãƒ•ãƒ©å‘¨ã‚Šã®ã‚³ãƒ¼ãƒ‰ã¨ã‹ã‚’èª­ã¿è¿”ã—ã¦å¾©ç¿’ã—ã¾ã—ãŸã€‚</p><p>æœ€è¿‘ã¯ OSS é–‹ç™ºã‚„ãƒ–ãƒ­ã‚°ã®åŸ·ç­†ãªã©ã® output ãŒä¸­å¿ƒã§ã€ input ã‚’ã™ã‚‹æ™‚é–“ãŒã‚ã¾ã‚Šå–ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ãƒ–ãƒ­ã‚°ãªã©ã‚’èª­ã‚€ã¨ã„ã†å½¢ã§ input ã‚’ã—ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><ul><li>Blog åŸ·ç­†</li><li>Terraform<ul><li>Module ã‚’ Monorepo ã«é›†ç´„: <a href="https://blog.studysapuri.jp/entry/2022/03/30/080000" target="_blank" rel="noopener noreferrer">Terraform Modules ã‚’ Monorepo ã§ versioning ã—ã¦ç®¡ç†</a></li></ul></li><li>AWS Account åˆ†å‰²</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog">Blog<a href="#blog" class="hash-link" aria-label="Direct link to Blog" title="Direct link to Blog">â€‹</a></h2><table><thead><tr><th>date</th><th>title</th></tr></thead><tbody><tr><td>2022-03-30</td><td><a href="https://blog.studysapuri.jp/entry/2022/03/30/080000" target="_blank" rel="noopener noreferrer">Terraform Modules ã‚’ Monorepo ã§ versioning ã—ã¦ç®¡ç†</a></td></tr><tr><td>2022-03-29</td><td><a href="https://devs.quipper.com/2022/03/29/automate-handling-a-number-of-pull-requests-by-renovate-in-terraform-monorepo.html" target="_blank" rel="noopener noreferrer">Automate handling a number of Pull Requests by Renovate in Terraform Monorepo</a></td></tr><tr><td>2022-03-05</td><td><a href="https://zenn.dev/shunsuke_suzuki/articles/tfaction-v050" target="_blank" rel="noopener noreferrer">tfaction v0.5.0 ã® update</a></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-é–‹ç™º">OSS é–‹ç™º<a href="#oss-é–‹ç™º" class="hash-link" aria-label="Direct link to OSS é–‹ç™º" title="Direct link to OSS é–‹ç™º">â€‹</a></h2><ul><li>aqua v1.2.0 ~ v1.3.0</li><li>aqua-registry v1.6.0 ~ v1.11.0</li><li>tfaction v0.5.0 ~ v0.5.7</li><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v3.1.0" target="_blank" rel="noopener noreferrer">tfcmt v3.1.0</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–">ãã®ä»–<a href="#ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–" title="Direct link to ãã®ä»–">â€‹</a></h2><p>AWS CodeDeploy ã‚’ç”¨ã„ãŸ AWS Lambda ã® Progressive Delivery ã«é–¢ã—ã¦æ¤œè¨ã—ã¾ã—ãŸã€‚</p><p><a href="https://zenn.dev/shunsuke_suzuki/scraps/64bf029c5eeb7b" target="_blank" rel="noopener noreferrer">https://zenn.dev/shunsuke_suzuki/scraps/64bf029c5eeb7b</a></p><p>PipeCD ã‚‚è€ƒãˆã¾ã—ãŸãŒã€ CodeDeploy ã§å‡ºæ¥ã‚‹ã‚“ãªã‚‰ãã‚Œã§ã„ã„æ°—ãŒã™ã‚‹ã®ã§ã€ã¾ãšã¯ CodeDeploy ã§æ¤œè¨ã—ã¦ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[2022-02 æŒ¯ã‚Šè¿”ã‚Š]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2022-02</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2022-02</guid>
            <pubDate>Mon, 14 Mar 2022 05:16:55 GMT</pubDate>
            <description><![CDATA[ã¾ã¨ã‚]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã¾ã¨ã‚">ã¾ã¨ã‚<a href="#ã¾ã¨ã‚" class="hash-link" aria-label="Direct link to ã¾ã¨ã‚" title="Direct link to ã¾ã¨ã‚">â€‹</a></h2><p>aqua, aqua-registry, aqua-installer ã® v1 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚
v1 ã«ä¼´ã†å¤‰æ›´ã¯ç‰¹ã«ã‚ã‚Šã¾ã›ã‚“ã€‚
aqua v1.1.0 ã§ã¯ <code>aqua g -i</code> ã«ã‚ˆã£ã¦ aqua.yaml ã« package ã‚’è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ã—ã€ä½¿ã„å‹æ‰‹ã‚’è‰¯ãã—ã¾ã—ãŸã€‚
tfaction ã¯çµæ§‹è‰²ã€…æ©Ÿèƒ½è¿½åŠ ã‚„ãƒã‚°ä¿®æ­£ãŒå…¥ã£ã¦ã¾ã™ã€‚
ä»•äº‹ã§ã¯ãƒ–ãƒ­ã‚°ã«ã‚‚æ›¸ã„ãŸã‚ˆã†ã« Renovate ã®å¤§é‡ PR ã‚’è‡ªå‹•ã§å‡¦ç†ã§ãã‚‹ã‚ˆã†ã«æ”¹å–„ã‚’è¡Œã„ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><ul><li>Terraform<ul><li>tfaction ãƒã‚°ä¿®æ­£</li><li>GITHUB_TOKEN rate limit å¼•ã£ã‹ã‹ã£ãŸã®ã§ GitHub App ã® token ã«ç½®ãæ›ãˆ</li><li>CI ã“ã‘ãŸ renovate PR ã®è‡ªå‹• close æ¤œè¨</li><li>tfsec ã‚„ AWS Provider v4 ã® update å¯¾å¿œã‚’ã©ã†ã™ã‚‹ã‹æ¤œè¨ã—ãŸã‚Šã€å¯¾å¿œã—ãŸã‚Šã—ã¦ãŸ</li></ul></li><li>AWS Account åˆ†å‰²</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog">Blog<a href="#blog" class="hash-link" aria-label="Direct link to Blog" title="Direct link to Blog">â€‹</a></h2><ul><li><a href="https://devs.quipper.com/2022/02/25/terraform-github-actions.html" target="_blank" rel="noopener noreferrer">Migrate Terraform CI from AWS CodeBuild to GitHub Actions</a></li><li><a href="https://blog.studysapuri.jp/entry/2022/02/18/080000" target="_blank" rel="noopener noreferrer">Renovate ã®å¤§é‡ã® Pull Request ã‚’å‡¦ç†ã™ã‚‹æŠ€è¡“</a></li><li><a href="https://blog.studysapuri.jp/entry/2022/02/04/080000" target="_blank" rel="noopener noreferrer">Terraform ã® CI ã‚’ AWS CodeBuild ã‹ã‚‰ GitHub Actions + tfaction ã«ç§»è¡Œã—ã¾ã—ãŸ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-é–‹ç™º">OSS é–‹ç™º<a href="#oss-é–‹ç™º" class="hash-link" aria-label="Direct link to OSS é–‹ç™º" title="Direct link to OSS é–‹ç™º">â€‹</a></h2><ul><li>aqua v1.0.0 ~ v1.1.0</li><li>aqua-registry v1.0.0 ~ v1.5.0</li><li>aqua-installer v1.0.0</li><li>tfaction v0.4.0 ~ v0.4.12</li><li>New<ul><li><a href="https://github.com/suzuki-shunsuke/reenable-automerge-action" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/reenable-automerge-action</a></li><li><a href="https://github.com/suzuki-shunsuke/renovate-autoclose-action" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/renovate-autoclose-action</a></li></ul></li></ul>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[2021-11 ã‚„ã£ãŸã“ã¨]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2021-11</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2021-11</guid>
            <pubDate>Sun, 28 Nov 2021 06:45:55 GMT</pubDate>
            <description><![CDATA[Job]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="job">Job<a href="#job" class="hash-link" aria-label="Direct link to Job" title="Direct link to Job">â€‹</a></h2><ul><li>AWS Control Tower<ul><li>ç™»éŒ²ã§ãã¦ãªã‹ã£ãŸ Account ã‚’ç™»éŒ²ã§ããŸ</li></ul></li><li>AWS SSO<ul><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®æ¡ˆå†…ãƒ»å‚¬ä¿ƒã‚’è¡Œã„ã€ IAM User ã‹ã‚‰ SSO ã«ç§»è¡Œã—ã¦ã‚‚ã‚‰ã£ãŸ</li><li>ãƒ­ãƒ¼ã‚«ãƒ«ã®é–‹ç™ºã§ Access Key ã«ä¾å­˜ã—ã¦ã„ãŸéƒ¨åˆ†ã«é–¢ã—ã¦ä¿®æ­£ã—ã€ Access Key ãªã—ã§ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã§ãã‚‹ã‚ˆã†ã«ã—ãŸ(äººã«ã‚ˆã£ã¦ã¯ã¾ã  Access Key ã«ä¾å­˜ã—ãŸãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã„ã‚‹<ul><li>S3 Browser ãŒ SSO ã§ãªãœã‹å‹•ã‹ãªã„ã‚‰ã—ã„(è‡ªåˆ†ãŒ Windows æŒã£ã¦ãªã„ã®ã§ç¢ºèªã§ãã¦ãªã„ã‘ã©</li><li>Cyberduck ãŒ SSO ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„</li></ul></li><li>ä¸€éƒ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® Access Key ã® deactivate</li><li>ä¸è¦ãª IAM User ã®ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°</li><li>æ¥æœˆä¸­ã«ã¯ä¸€éƒ¨ã®ä¾‹å¤–ã‚’é™¤ãã€ç§»è¡Œã‚’å®Œäº†ã•ã›ãŸã„</li><li>SSO å‡ºæ¥ãªã„äººã‚’ SSO ã§ãã‚‹ã‚ˆã†ã«å¯¾å¿œã—ãŸ (åŒæœŸå¯¾è±¡ã® Group ã‚„ã€ Permission Set ã‚’è¿½åŠ ã—ãŸã‚Š)</li><li>SSO ã«é–¢ã™ã‚‹ User å‘ã‘ã€ SRE å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‹±èªã§æ›¸ã„ãŸ</li></ul></li><li>aqua ã‚’æ›´æ–°ã—ã€ Access Token ãªã—ã§ã‚‚å‹•ãã‚ˆã†ã«ã—ãŸ(API call ã‚’æ¸›ã‚‰ã—ã€ rate limit ã®å•é¡Œã‚’è§£æ±ºã—ãŸ</li><li>Self Hosted Renovate in GitHub Actions<ul><li><a href="https://github.com/renovatebot/github-action" target="_blank" rel="noopener noreferrer">https://github.com/renovatebot/github-action</a></li><li>ç„¡äº‹ Self Hosted ã§å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ãªã£ãŸ</li><li>çµæœçš„ã« Self Hosted ã˜ã‚ƒãªãã¦ã‚‚è‰¯ã‹ã£ãŸã®ã§ã¯ã¨ã„ã†æ°—ã¯ã—ã¦ã„ã‚‹</li></ul></li><li>AWS WAF<ul><li>COUNT, BLOCK log ã‚’ Lambda ã§æŠ½å‡ºã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ãŒã€ãªãœã‹ COUNT log ãŒæŠ½å‡ºã§ãã¦ã„ãªã„</li><li>ã‚ã¾ã‚Šæ™‚é–“å–ã‚Œã¦ãªã„</li></ul></li><li>Route53 ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ç§»ç®¡</li><li>Lambda ã® CI/CD<ul><li>å®Ÿç¾ã—ãŸã„ã“ã¨ã‚’è¨€èªåŒ–: <a href="https://github.com/suzuki-shunsuke/issue/issues/70" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/issue/issues/70</a></li><li>æ¤œè¨(ã‚ã¾ã‚Šé€²ã‚“ã§ãªã„</li></ul></li><li>git-secrets ã‹ã‚‰ secretlint ã¸ã®ç§»è¡Œ</li><li>circleci-config-merge ã‚’ CI ã§å®Ÿè¡Œã—ã¦è‡ªå‹•ä¿®æ­£ã™ã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="èª²é¡Œ">èª²é¡Œ<a href="#èª²é¡Œ" class="hash-link" aria-label="Direct link to èª²é¡Œ" title="Direct link to èª²é¡Œ">â€‹</a></h3><ul><li>Renovate ã® Automerge ãŒ base branch ãŒæ›´æ–°ã•ã‚ŒãŸã“ã¨ã§ disable ã«ãªã‚Šã€çµå±€æ‰‹ã§ãƒãƒ¼ã‚¸ã—ãªã„ã¨ã„ã‘ãªããªã£ã¦ã„ã‚‹<ul><li>è‡ªå‹•åŒ–ã®æ¤œè¨</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog-slide">Blog, Slide<a href="#blog-slide" class="hash-link" aria-label="Direct link to Blog, Slide" title="Direct link to Blog, Slide">â€‹</a></h2><ul><li><a href="https://techblog.szksh.cloud/archives/2021/11/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/archives/2021/11/</a><ul><li><a href="https://techblog.szksh.cloud/update-aqua-v0.7.16/" target="_blank" rel="noopener noreferrer">aqua ã®æœ€è¿‘ã® update (v0.7.4 ~ v0.7.16)</a></li></ul></li><li><a href="https://dev.to/suzukishunsuke/opa-policy-testing-by-table-driven-test-289e" target="_blank" rel="noopener noreferrer">OPA Policy Testing by Table Driven Test</a></li><li><a href="https://suzuki-shunsuke.github.io/slides/aqua/introduction-5min/" target="_blank" rel="noopener noreferrer">https://suzuki-shunsuke.github.io/slides/aqua/introduction-5min/</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss">OSS<a href="#oss" class="hash-link" aria-label="Direct link to OSS" title="Direct link to OSS">â€‹</a></h2><p>aqua ã®å…¬å¼ã‚µã‚¤ãƒˆã‚’ç«‹ã¡ä¸Šã’ã¾ã—ãŸã€‚</p><p><a href="https://aquaproj.github.io/" target="_blank" rel="noopener noreferrer">https://aquaproj.github.io/</a></p><p><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus v2</a> ã§ç”Ÿæˆã—ã¦ã€ GitHub Pages ã§ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ã¾ã™ã€‚</p><p>aqua ç”¨ã® GitHub Organization ã‚’ä½œã‚Šã€é–¢é€£ãƒªãƒã‚¸ãƒˆãƒªã‚’ transfer ã—ã¾ã—ãŸã€‚</p><p><a href="https://github.com/aquaproj" target="_blank" rel="noopener noreferrer">https://github.com/aquaproj</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution">OSS Contribution<a href="#oss-contribution" class="hash-link" aria-label="Direct link to OSS Contribution" title="Direct link to OSS Contribution">â€‹</a></h3><p><a href="https://github.com/tfmigrator/cli" target="_blank" rel="noopener noreferrer">tfmigrator</a> ã¨ <a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">tfcmt</a> ã‚’ <a href="https://github.com/shuaibiyy/awesome-terraform" target="_blank" rel="noopener noreferrer">awesome-terraform</a> ã«è¿½åŠ ã—ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/shuaibiyy/awesome-terraform/pull/139" target="_blank" rel="noopener noreferrer">https://github.com/shuaibiyy/awesome-terraform/pull/139</a></li><li><a href="https://github.com/shuaibiyy/awesome-terraform/pull/138" target="_blank" rel="noopener noreferrer">https://github.com/shuaibiyy/awesome-terraform/pull/138</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–">ãã®ä»–<a href="#ãã®ä»–" class="hash-link" aria-label="Direct link to ãã®ä»–" title="Direct link to ãã®ä»–">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã“ã®ãƒ–ãƒ­ã‚°ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’åˆ¥ã®-github-organization-ã«-transfer-ã—ã¾ã—ãŸ">ã“ã®ãƒ–ãƒ­ã‚°ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’åˆ¥ã® GitHub Organization ã« transfer ã—ã¾ã—ãŸ<a href="#ã“ã®ãƒ–ãƒ­ã‚°ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’åˆ¥ã®-github-organization-ã«-transfer-ã—ã¾ã—ãŸ" class="hash-link" aria-label="Direct link to ã“ã®ãƒ–ãƒ­ã‚°ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’åˆ¥ã® GitHub Organization ã« transfer ã—ã¾ã—ãŸ" title="Direct link to ã“ã®ãƒ–ãƒ­ã‚°ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’åˆ¥ã® GitHub Organization ã« transfer ã—ã¾ã—ãŸ">â€‹</a></h3><p><a href="https://github.com/techblog-szksh-cloud/techblog-szksh-cloud.github.io" target="_blank" rel="noopener noreferrer">https://github.com/techblog-szksh-cloud/techblog-szksh-cloud.github.io</a></p><p>ç†ç”±ã¯ techblog.szksh.cloud ãŒ suzuki-shunsuke.github.io ã® CNAME ã«ãªã£ã¦ã„ã¦ã€
OSS ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãªã©ã‚’ GitHub Pages ã§å…¬é–‹ã—ãŸã„ã¨ãã«éƒ½åˆãŒæ‚ªã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚</p><p>ã¤ã„ã§ã« CI ã‚’ Drone ã‹ã‚‰ GitHub Actions ã«ç§»è¡Œã—ã¾ã—ãŸã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="suzuki-shunsukeissue-ã®æ´»ç”¨">suzuki-shunsuke/issue ã®æ´»ç”¨<a href="#suzuki-shunsukeissue-ã®æ´»ç”¨" class="hash-link" aria-label="Direct link to suzuki-shunsuke/issue ã®æ´»ç”¨" title="Direct link to suzuki-shunsuke/issue ã®æ´»ç”¨">â€‹</a></h3><p><a href="https://github.com/suzuki-shunsuke/issue/issues" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/issue/issues</a> ã«è¨˜éŒ²ã‚’æ®‹ã™ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/issue/issues?q=is%3Aissue+updated%3A2021-11-01..2021-11-30" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/issue/issues?q=is%3Aissue+updated%3A2021-11-01..2021-11-30</a></p><p>å‰ã‹ã‚‰ä½¿ã£ã¦ã¾ã—ãŸãŒã€ã‚ã¾ã‚Šæ´»ç”¨ã§ãã¦ãªã‹ã£ãŸã®ã§ã€æ„è­˜çš„ã«æ´»ç”¨ã—ã¦ã„ã“ã†ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
ã›ã£ã‹ããƒ„ãƒ¼ãƒ«ã¨ã‹ã‚’æ¤œè¨¼ã—ã¦ã‚‚ã€ã¡ã‚ƒã‚“ã¨è¨˜éŒ²ãŒæ®‹ã£ã¦ãªã„ã¨å¿˜ã‚Œã¦ã—ã¾ã„ã‚‚ã£ãŸã„ãªã„ã¨ã„ã†ã®ã¨ã€
issue ã«æ®‹ã™ã¨è‡ªç„¶ã¨æ¤œè¨¼ã¨ã‹ãŒé€²ã‚€ã‚ˆã†ãªæ°—ãŒã—ã¦ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docusaurus">Docusaurus<a href="#docusaurus" class="hash-link" aria-label="Direct link to Docusaurus" title="Direct link to Docusaurus">â€‹</a></h3><p>Docusaurus ã¯ã„ã„æ„Ÿã˜ãªã®ã§ <a href="https://github.com/suzuki-shunsuke/profile" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/profile</a> ã‚„ã“ã®ãƒ–ãƒ­ã‚°ã‚’ Docusaurus ã«ç§»è¡Œã™ã‚‹ã®ã‚‚ã‚ã‚Šã‹ã‚‚ã—ã‚Œãªã„ãªã¨æ€ã„ã¾ã—ãŸ
(æ€ã£ãŸã ã‘ã§ã¾ã ä½•ã‚‚ã—ã¦ã¾ã›ã‚“</p><p>ãŸã ã€ OSS ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã« Docusaurus ã‚’ä½¿ã†å ´åˆã€å€‹äººçš„ã«ã¯ package.json ã‚’åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã«ç½®ããŸããªã„ã®ã§ã€
åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç®¡ç†ã—ã«ãã„ã‹ãªã¨ã„ã†æ°—ã¯ã—ã¦ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[aqua ã®æœ€è¿‘ã® update (v0.7.4 ~ v0.7.16)]]></title>
            <link>https://techblog.szksh.cloud/update-aqua-v0.7.16</link>
            <guid>https://techblog.szksh.cloud/update-aqua-v0.7.16</guid>
            <pubDate>Thu, 18 Nov 2021 11:21:57 GMT</pubDate>
            <description><![CDATA[ä»¥å‰ aqua v0.7.3 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸéš›ã« aqua ã§çµ„ç¹”ãƒ»ãƒãƒ¼ãƒ ã®ãƒ„ãƒ¼ãƒ«ç¾¤ã‚’ç®¡ç† ã¨ã„ã†è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>ä»¥å‰ aqua <a href="https://github.com/suzuki-shunsuke/aqua/releases/tag/v0.7.3" target="_blank" rel="noopener noreferrer">v0.7.3</a> ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸéš›ã« <a href="/aqua-global-configs/">aqua ã§çµ„ç¹”ãƒ»ãƒãƒ¼ãƒ ã®ãƒ„ãƒ¼ãƒ«ç¾¤ã‚’ç®¡ç†</a> ã¨ã„ã†è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚
ã‚ã‚Œã‹ã‚‰ã‚‚ã†ã™ã 2 ãƒ¶æœˆã«ãªã‚Šã€æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ <a href="https://github.com/suzuki-shunsuke/aqua/releases/tag/v0.7.16" target="_blank" rel="noopener noreferrer">v0.7.16</a> ã«ãªã‚Šã¾ã—ãŸã€‚
ãã“ã§ v0.7.4 ~ v0.7.16 ã®é–“ã®æ›´æ–°ã¨ã€é–¢é€£ repository ã®æ›´æ–°ã‚’å¹¾ã¤ã‹(å…¨éƒ¨ã§ã¯ãªã„)ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>åŸºæœ¬çš„ã« <a href="https://github.com/suzuki-shunsuke/aqua/releases" target="_blank" rel="noopener noreferrer">Release Note</a> ã«æ›¸ã„ã¦ã‚ã‚‹å†…å®¹ã§ã™ã€‚</p><ul><li>GitHub ã® Access Token ãŒåŸºæœ¬çš„ã«ä¸è¦ã«ãªã‚Šã¾ã—ãŸ</li><li>Homebrew ã§ install ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li><li>aqua.yaml ãŒã‚ˆã‚Šç°¡æ½”ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li><li>aqua.yaml ã® packages ã‚’ä»–ã®ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ import ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li><li>aqua.yaml ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®éšå±¤çš„ã«ãƒã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li><li>aqua which ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ</li><li>github_archive, github_content type ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ</li><li>(advanced) ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® type ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li><li><a href="https://github.com/suzuki-shunsuke/aqua-registry" target="_blank" rel="noopener noreferrer">Standard Registry</a> ã® package ã®æ•°ãŒ 139 =&gt; 220 ã«ãªã‚Šã¾ã—ãŸã€‚</li><li><a href="https://circleci.com/developer/orbs/orb/suzuki-shunsuke/aqua" target="_blank" rel="noopener noreferrer">aqua ã®ãŸã‚ã® CircleCI Orb</a> ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-ã®-access-token-ãŒåŸºæœ¬çš„ã«ä¸è¦ã«ãªã‚Šã¾ã—ãŸ">GitHub ã® Access Token ãŒåŸºæœ¬çš„ã«ä¸è¦ã«ãªã‚Šã¾ã—ãŸ<a href="#github-ã®-access-token-ãŒåŸºæœ¬çš„ã«ä¸è¦ã«ãªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to GitHub ã® Access Token ãŒåŸºæœ¬çš„ã«ä¸è¦ã«ãªã‚Šã¾ã—ãŸ" title="Direct link to GitHub ã® Access Token ãŒåŸºæœ¬çš„ã«ä¸è¦ã«ãªã‚Šã¾ã—ãŸ">â€‹</a></h2><p>private repository ã‹ã‚‰ package ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å ´åˆã¯å½“ç„¶å¿…è¦ã§ã™ãŒã€ãã†ã§ãªã‘ã‚Œã°ä¸è¦ã«ãªã‚Šã¾ã—ãŸã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ aqua ã‚’å°å…¥ã™ã‚‹ãƒãƒ¼ãƒ‰ãƒ«ãŒä¸‹ãŒã‚Šã¾ã—ãŸã—ã€ GitHub API ã® Rate Limit ã«å¼•ã£ã‹ã‹ã‚‹ã“ã¨ãŒåŸºæœ¬çš„ã«ãªããªã‚Šã¾ã—ãŸã€‚</p><p>ä½™è«‡ã§ã™ãŒã€ private repository ã®ãƒ„ãƒ¼ãƒ«ã‚’ç°¡å˜ã« install ã§ãã‚‹ã®ã‚‚ aqua ã®ä¾¿åˆ©ãªç‚¹ã ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="homebrew-ã§-install-ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">Homebrew ã§ install ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ<a href="#homebrew-ã§-install-ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to Homebrew ã§ install ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" title="Direct link to Homebrew ã§ install ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">â€‹</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ brew install suzuki-shunsuke/aqua/aqua</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Homebrew ã§ install ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šæ‰‹è»½ã«å°å…¥ã—ã¦ã‚‚ã‚‰ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ã¡ãªã¿ã« aqua ã‚’ aqua ã§ç®¡ç†å‡ºæ¥ãªã„ã®ã‹ã¨ã„ã†ã¨ã€ç¾çŠ¶ã§ãã¾ã›ã‚“(ç„¡é™ãƒ«ãƒ¼ãƒ—ã«ãªã£ã¦ã—ã¾ã†)ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aquayaml-ãŒã‚ˆã‚Šç°¡æ½”ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">aqua.yaml ãŒã‚ˆã‚Šç°¡æ½”ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ<a href="#aquayaml-ãŒã‚ˆã‚Šç°¡æ½”ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to aqua.yaml ãŒã‚ˆã‚Šç°¡æ½”ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" title="Direct link to aqua.yaml ãŒã‚ˆã‚Šç°¡æ½”ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">â€‹</a></h2><p>AS IS</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> direnv/direnv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v2.28.0 </span><span class="token comment" style="color:#999988;font-style:italic"># renovate: depName=direnv/direnv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>TO BE</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> direnv/direnv@v2.28.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>registry: standard</code> ãŒçœç•¥å¯èƒ½</li><li>version ã‚’ name ã« @ ã®ã‚ã¨ã«æ›¸ã‘ã‚‹<ul><li>ã“ã‚Œã«ã‚ˆã‚Šã€ <a href="https://docs.renovatebot.com/modules/manager/regex" target="_blank" rel="noopener noreferrer">Renovate ã® Regex Manager</a> ç”¨ã«ã‚³ãƒ¡ãƒ³ãƒˆ <code># renovate: depName=direnv/direnv</code> ã‚’æ›¸ãå¿…è¦ãŒãªããªã‚Šã¾ã—ãŸ</li></ul></li></ul><p>ã“ã‚Œã«ã‚ˆã‚Š 1 è¡Œã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ãŸã ç°¡æ½”ã«ã‹ã‘ã¦æ¥½ã¨ã„ã†ã ã‘ã§ãªãã€ Renovate ç”¨ã®ã‚³ãƒ¡ãƒ³ãƒˆã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’é–“é•ãˆã¦æŒ‡å®šã™ã‚‹ãƒªã‚¹ã‚¯ãŒãªããªã‚Šã¾ã—ãŸã€‚</p><p>e.g. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’é–“é•ãˆã¦ã„ã‚‹ä¾‹</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> direnv/direnv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v2.28.0 </span><span class="token comment" style="color:#999988;font-style:italic"># renovate: depName=cli/cli</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/suzuki-shunsuke/aqua-renovate-config" target="_blank" rel="noopener noreferrer">aqua-renovate-config</a> ã‚’ä½¿ãˆã°ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã‹ãªãã¦ã‚‚ version ã‚’ä¸Šã’ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aquayaml-ã®-packages-ã‚’ä»–ã®ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰-import-ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">aqua.yaml ã® packages ã‚’ä»–ã®ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ import ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ<a href="#aquayaml-ã®-packages-ã‚’ä»–ã®ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰-import-ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to aqua.yaml ã® packages ã‚’ä»–ã®ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ import ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" title="Direct link to aqua.yaml ã® packages ã‚’ä»–ã®ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ import ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">â€‹</a></h2><p>e.g.</p><p>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aqua.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aqua/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  reviewdog.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  golangci-lint.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>aqua.yaml </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">packages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">import</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> aqua/</span><span class="token important">*.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>aqua/reviewdog.yaml</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">packages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> reviewdog/reviewdog@v0.13.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã®ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹ã“ã¨ã§ã€ç‰¹å®šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒ update ã•ã‚ŒãŸå ´åˆã®ã¿ CI ã§ç‰¹å®šã® job ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã„ã£ãŸã“ã¨ãŒã‚„ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚
ä¾‹ãˆã° GitHub Actions ã® <a href="https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions#onpushpull_requestpaths" target="_blank" rel="noopener noreferrer"><code>on.&lt;push|pull_request&gt;.paths</code></a> ã®å ´åˆã€</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'**.go'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> aqua/golangci</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lint.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aquayaml-ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®éšå±¤çš„ã«ãƒã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">aqua.yaml ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®éšå±¤çš„ã«ãƒã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ<a href="#aquayaml-ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®éšå±¤çš„ã«ãƒã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to aqua.yaml ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®éšå±¤çš„ã«ãƒã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" title="Direct link to aqua.yaml ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®éšå±¤çš„ã«ãƒã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">â€‹</a></h2><p>aqua ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é¡ã£ã¦ <code>^\.?aqua\.ya?ml$</code> ã‚’æ¢ç´¢ã—ã¾ã™ã€‚
ã“ã®ã¨ãã€ãã‚Œã¾ã§ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€ã¤è¦‹ã¤ã‘ãŸæ™‚ç‚¹ã§æ¢ç´¢ã‚’ã‚„ã‚ã¦ã„ã¾ã—ãŸãŒã€å…¨ã¦ã®éšå±¤ã‚’æ¢ç´¢ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå®šç¾©ã•ã‚Œã¦ã„ãŸå ´åˆã€å…ˆã«è¦‹ã¤ã‹ã£ãŸè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã® version ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ Monorepo ã§ã‚‚ aqua ãŒä½¿ã„ã‚„ã™ããªã‚Šã¾ã—ãŸã€‚
Monorepo ç›´ä¸‹ã« aqua.yaml ã‚’ç½®ãã¤ã¤ã€ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« aqua.yaml ã‚’ç½®ã„ã¦ã‚‚ã€ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã§ Monorepo ç›´ä¸‹ã® aqua.yaml ã‚‚å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-which-ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ">aqua which ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ<a href="#aqua-which-ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ" class="hash-link" aria-label="Direct link to aqua which ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ" title="Direct link to aqua which ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ">â€‹</a></h2><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ which gh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/Users/shunsuke-suzuki/.aqua/bin/gh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ aqua which gh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/Users/shunsuke-suzuki/.aqua/pkgs/github_release/github.com/cli/cli/v2.2.0/gh_2.2.0_macOS_amd64.tar.gz/gh_2.2.0_macOS_amd64/bin/gh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>aqua ã¯ <code>~/.aqua/bin</code> é…ä¸‹ã«ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆã—ã€ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«å‹•çš„ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ±ºå®šã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
ã‚ˆã£ã¦ <code>which</code> ã‚„ <code>command -v</code> ã§ã¯å®Ÿéš›ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã®ãƒ‘ã‚¹ãŒåˆ†ã‹ã‚Šã¾ã›ã‚“ãŒã€ aqua which ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã¨ãƒ‘ã‚¹ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚
ã¡ãªã¿ã« aqua ã§ç®¡ç†ã•ã‚Œã¦ãªã„ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚ãƒ‘ã‚¹ã‚’å–å¾—ã§ãã¾ã™ã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ aqua which git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/bin/git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å°‘ã€…å¤‰ã‚ã£ãŸä½¿ã„æ–¹ã§ã™ãŒã€ aqua ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ¥ã®ãƒ‘ã‚¹ã«ã‚³ãƒ”ãƒ¼ã—ãŸã„å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cp "$(aqua which gh)" src/gh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github_archive-github_content-type-ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ">github_archive, github_content type ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ<a href="#github_archive-github_content-type-ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ" class="hash-link" aria-label="Direct link to github_archive, github_content type ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ" title="Direct link to github_archive, github_content type ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ">â€‹</a></h2><p>Standard Registry ã«ã‚ã‚‹ package ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã ã‘ã®æ–¹ã¯ã€ãã‚‚ãã‚‚ package ã® type ã¨ã„ã†ã‚‚ã®ã‚’æ°—ã«ã™ã‚‹å¿…è¦ã‚‚ãªã„ã®ã§
ã‚ã¾ã‚Šé–¢ä¿‚ãªã„è©±ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ <code>http</code>, <code>github_release</code> package ã«åŠ ãˆã¦ã€ <code>github_archive</code>, <code>github_content</code> package ã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸã€‚
<code>github_archive</code> ã¯ GitHub Repository ã® Archive ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦æ‰±ã†ã‚‚ã®ã§ã€ <a href="https://github.com/tfutils/tfenv" target="_blank" rel="noopener noreferrer">tfenv</a> ã‚’ aqua ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹éš›ãªã‚“ã‹ã«ä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚
<code>github_content</code> ã¯ GitHub Content API ã‚’ä½¿ã£ã¦ GitHub Repository ã®å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦æ‰±ã†ã‚‚ã®ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®-type-ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">(advanced) ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® type ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ<a href="#advanced-ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®-type-ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to (advanced) ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® type ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" title="Direct link to (advanced) ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® type ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">â€‹</a></h2><p>ã“ã‚Œã¾ãŸ advanced ãªå†…å®¹ã§å¤šãã®æ–¹ã«ã¯ã‚ã¾ã‚Šé–¢ä¿‚ãªã„è£å´ã®ä»•çµ„ã¿ã®è©±ã§ã™ãŒã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã£ã¦ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ type ãŒå¤‰ã‚ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™(ã‹ãªã‚Šã¾ã‚Œã§ã™ãŒ)ã€‚
ã‚ã¨ã¯ repository ã® owner ãŒå¤‰ã‚ã£ãŸã‚Šãªã‚“ã‹ã‚‚ã‚ã‚Šã¾ã™ãŒã€ãã†ã„ã£ãŸå ´åˆã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ã¡ãªã¿ã« GitHub Release ã® asset ã®ãƒ•ã‚¡ã‚¤ãƒ«åã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚„ã€ asset ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆãŒå¤‰ã‚ã‚‹ã“ã¨ã¯æ™‚ã€…ã‚ã‚Šã¾ã™ãŒã€ãã‚Œã‚‰ã«ã¯å…ƒã€…å¯¾å¿œã§ãã¦ã„ã¾ã™ã€‚</p><p>e.g.  <a href="https://github.com/suzuki-shunsuke/aqua-registry/blob/v0.10.7/registry.yaml#L486-L492" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/aqua-registry/blob/v0.10.7/registry.yaml#L486-L492</a></p><p><a href="https://github.com/suzuki-shunsuke/aqua/blob/v0.7.16/docs/registry_config.md#version_constraint-version_overrides" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/aqua/blob/v0.7.16/docs/registry_config.md#version_constraint-version_overrides</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="standard-registry-package-ã®æ•°ãŒ-139--220-ã«ãªã‚Šã¾ã—ãŸ">Standard Registry package ã®æ•°ãŒ 139 =&gt; 220 ã«ãªã‚Šã¾ã—ãŸã€‚<a href="#standard-registry-package-ã®æ•°ãŒ-139--220-ã«ãªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to Standard Registry package ã®æ•°ãŒ 139 => 220 ã«ãªã‚Šã¾ã—ãŸã€‚" title="Direct link to Standard Registry package ã®æ•°ãŒ 139 => 220 ã«ãªã‚Šã¾ã—ãŸã€‚">â€‹</a></h2><p>Standard Registry ã¯ <a href="https://github.com/suzuki-shunsuke/aqua-registry/releases/tag/v0.8.6" target="_blank" rel="noopener noreferrer">v0.8.6</a> ã‹ã‚‰ <a href="https://github.com/suzuki-shunsuke/aqua-registry/releases/tag/v0.10.7" target="_blank" rel="noopener noreferrer">v0.10.7</a> ã«ãªã‚Šã¾ã—ãŸãŒã€ãã®çµæœ package ã®æ•°ã¯ 139 ã‹ã‚‰ 220 ã«ãªã‚Šã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-ã®ãŸã‚ã®-circleci-orb-ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ">aqua ã®ãŸã‚ã® CircleCI Orb ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ<a href="#aqua-ã®ãŸã‚ã®-circleci-orb-ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ" class="hash-link" aria-label="Direct link to aqua ã®ãŸã‚ã® CircleCI Orb ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ" title="Direct link to aqua ã®ãŸã‚ã® CircleCI Orb ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ">â€‹</a></h2><p>CircleCI ã§ Orb ã‚’ä½¿ã£ã¦ aqua ã‚’ install ã—ãŸã‚Š aqua ã‚’ä½¿ã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
aqua ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ cache ã—ã¦ãã‚Œã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>aqua</category>
        </item>
        <item>
            <title><![CDATA[2021-10 ã‚„ã£ãŸã“ã¨]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2021-10</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2021-10</guid>
            <pubDate>Tue, 26 Oct 2021 11:43:03 GMT</pubDate>
            <description><![CDATA[Job]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="job">Job<a href="#job" class="hash-link" aria-label="Direct link to Job" title="Direct link to Job">â€‹</a></h2><ul><li>AWS SSO ã®å°å…¥<ul><li>Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ AWS ã¸ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã§ãã‚‹ã‚ˆã†ã«è¨­å®š</li><li>AWS SSO ã® Terraform ç®¡ç†</li><li>ssosync ã‚’ Lambda ã§å®šæœŸå®Ÿè¡Œ</li><li>é–‹ç™ºè€…å‘ã‘ã®ç§»è¡Œã‚¬ã‚¤ãƒ‰ã®ä½œæˆã—ã€å®Ÿéš›ã«æ¡ˆå†…</li><li>terraform, kubectl ãªã©ã®ãƒ„ãƒ¼ãƒ«ã§ AWS ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹ã®æ¤œè¨¼</li></ul></li><li>AWS WAF ã® COUNT, BLOCK ã® log ã‚’ Firehose, Lambda ã§æŠ½å‡º</li><li><a href="http://github.com/suzuki-shunsuke/akoi" target="_blank" rel="noopener noreferrer">akoi</a> ã‚’ <a href="https://github.com/suzuki-shunsuke/aqua" target="_blank" rel="noopener noreferrer">aqua</a> ã«ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog">Blog<a href="#blog" class="hash-link" aria-label="Direct link to Blog" title="Direct link to Blog">â€‹</a></h2><ul><li><a href="https://blog.studysapuri.jp/entry/2021/10/13/080000" target="_blank" rel="noopener noreferrer">2021-10-13: HashiTalks Japan 2021 ã§å¼Šãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã® Terraform Platform ã«ã¤ã„ã¦ç™»å£‡ã—ã¾ã—ãŸ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss">OSS<a href="#oss" class="hash-link" aria-label="Direct link to OSS" title="Direct link to OSS">â€‹</a></h2><p><a href="https://github.com/pulls?q=is%3Aclosed+is%3Apublic+is%3Apr+author%3Asuzuki-shunsuke+archived%3Afalse+created%3A2021-10-01..2021-10-31+" target="_blank" rel="noopener noreferrer">https://github.com/pulls?q=is%3Aclosed+is%3Apublic+is%3Apr+author%3Asuzuki-shunsuke+archived%3Afalse+created%3A2021-10-01..2021-10-31+</a></p><ul><li>Profile ãªã©ã®æ›´æ–°: <a href="https://github.com/suzuki-shunsuke/suzuki-shunsuke" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/suzuki-shunsuke</a></li><li>GitHub Actions ã®é–‹ç™º</li><li>è‡ªä½œãƒ„ãƒ¼ãƒ«ã‚’ Homebrew ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li><li>aqua: v0.7.3 =&gt; v0.7.10<ul><li>aqua-registry: v0.8.8 =&gt; v0.10.3</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution">OSS Contribution<a href="#oss-contribution" class="hash-link" aria-label="Direct link to OSS Contribution" title="Direct link to OSS Contribution">â€‹</a></h3><ul><li><a href="https://github.com/hashicorp/terraform-provider-aws/pull/21385" target="_blank" rel="noopener noreferrer">hashicorp/terraform-provider-aws: fix make testacc</a></li></ul>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[2021-09 ã‚„ã£ãŸã“ã¨]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2021-09</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2021-09</guid>
            <pubDate>Sat, 02 Oct 2021 12:46:15 GMT</pubDate>
            <description><![CDATA[ä»•äº‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><p>ä»Šæœˆã¯æœ‰ä¼‘æ¶ˆåŒ–ã‚„ã‚·ãƒ«ãƒãƒ¼ã‚¦ã‚£ãƒ¼ã‚¯ã‚‚ã‚ã‚Šã€ç¨¼åƒãŒå°‘ãªãã€ã‚ã¾ã‚Šä»•äº‹ãŒé€²ã¾ãªã‹ã£ãŸã§ã™ã€‚</p><ul><li>AWS SSO ã‚„ Organizations ã‚’å°å…¥ã™ã‚‹ãŸã‚ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã®ç­–å®š</li><li>AWS SSO ã®æ¤œè¨¼</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç™»å£‡">ç™»å£‡<a href="#ç™»å£‡" class="hash-link" aria-label="Direct link to ç™»å£‡" title="Direct link to ç™»å£‡">â€‹</a></h2><ul><li>2021-09-30 <a href="https://events.hashicorp.com/hashitalksjapan" target="_blank" rel="noopener noreferrer">HashiTalks Japan 2021</a> (<a href="https://www.youtube.com/watch?v=Cl9S-uzkuLc" target="_blank" rel="noopener noreferrer">youtube</a>)<ul><li><a href="https://speakerdeck.com/szksh/terraform-platform-in-quipper" target="_blank" rel="noopener noreferrer">Terraform Platform in Quipper</a> (<a href="https://www.youtube.com/watch?v=KpYwcwxnzbY" target="_blank" rel="noopener noreferrer">youtube</a>)</li><li>Talk (30 min)</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°ãŸã«ä½œã£ãŸ-oss">æ–°ãŸã«ä½œã£ãŸ OSS<a href="#æ–°ãŸã«ä½œã£ãŸ-oss" class="hash-link" aria-label="Direct link to æ–°ãŸã«ä½œã£ãŸ OSS" title="Direct link to æ–°ãŸã«ä½œã£ãŸ OSS">â€‹</a></h2><ul><li><a href="https://github.com/suzuki-shunsuke/aqua-renovate-config" target="_blank" rel="noopener noreferrer">aqua-renovate-config</a><ul><li><a href="https://docs.renovatebot.com/config-presets/" target="_blank" rel="noopener noreferrer">Renovate Configuration</a> to update packages and registries of <a href="https://github.com/suzuki-shunsuke/aqua" target="_blank" rel="noopener noreferrer">aqua</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog">Blog<a href="#blog" class="hash-link" aria-label="Direct link to Blog" title="Direct link to Blog">â€‹</a></h2><ul><li>English<ul><li><a href="https://dev.to/suzukishunsuke/tips-about-renovate-38bd" target="_blank" rel="noopener noreferrer">Tips about Renovate</a></li><li><a href="https://dev.to/suzukishunsuke/aqua-declarative-cli-version-manager-1ibe" target="_blank" rel="noopener noreferrer">2021-09-08 aqua - Declarative CLI Version Manager</a></li></ul></li><li><a href="https://techblog.szksh.cloud/archives/2021/09/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/archives/2021/09/</a><ul><li><a href="/aqua-global-configs/">2021-09-25 aqua ã§çµ„ç¹”ãƒ»ãƒãƒ¼ãƒ ã®ãƒ„ãƒ¼ãƒ«ç¾¤ã‚’ç®¡ç†</a></li><li><a href="/aqua-generate/">2021-09-05 aqua ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«ç”Ÿæˆã™ã‚‹ generate ã‚³ãƒãƒ³ãƒ‰</a></li><li><a href="/aqua-v0.5/">2021-09-04 aqua v0.1.0 ã‹ã‚‰ v0.5.0 ã§ã®å¤‰æ›´ç‚¹</a></li></ul></li></ul>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[aqua ã§çµ„ç¹”ãƒ»ãƒãƒ¼ãƒ ã®ãƒ„ãƒ¼ãƒ«ç¾¤ã‚’ç®¡ç†]]></title>
            <link>https://techblog.szksh.cloud/aqua-global-configs</link>
            <guid>https://techblog.szksh.cloud/aqua-global-configs</guid>
            <pubDate>Sat, 25 Sep 2021 03:01:56 GMT</pubDate>
            <description><![CDATA[aqua v0.7.3 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã€]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/suzuki-shunsuke/aqua" target="_blank" rel="noopener noreferrer">aqua</a> <a href="https://github.com/suzuki-shunsuke/aqua/releases/tag/v0.7.3" target="_blank" rel="noopener noreferrer">v0.7.3</a> ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã€
è¤‡æ•°ã® global configuration ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚</p><p>å€‹äººã§ä½¿ã†åˆ†ã«ã¯ã‚ã¾ã‚Šå¬‰ã—ã„æ©Ÿèƒ½ã§ã‚‚ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€
ä¼šç¤¾ãƒ»çµ„ç¹”ãƒ»ãƒãƒ¼ãƒ ã¨ã„ã£ãŸé›†å›£(ä»¥ä¸‹<code>çµ„ç¹”</code>ã§çµ±ä¸€)ã§è¨­å®šã‚’å…±æœ‰ã™ã‚‹ã«ã¯ä¾¿åˆ©ãªæ©Ÿèƒ½ã ã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã‚Œã¾ã§ aqua ã§ã¯ 2 ã¤ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã—ãŸã€‚</p><ul><li>-c ã§æŒ‡å®šã—ãŸå ´åˆã¯ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã€ãã†ã§ãªã‘ã‚Œã°ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰æ¢ç´¢ã—ã¦æœ€åˆã«è¦‹ã¤ã‹ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«<ul><li>ãƒªãƒã‚¸ãƒˆãƒªç›´ä¸‹ã«ãã®ãƒªãƒã‚¸ãƒˆãƒªç”¨ã® aqua.yaml ã‚’ãŠã</li></ul></li><li>global configuration (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ <code>~/.aqua/global/[.]aqua.y[a]ml</code>)<ul><li>å€‹äººã® dotfiles ã¨ã‹ã§ aqua.yaml ã‚’ç®¡ç†ã—ã¦ãŠã</li></ul></li></ul><p>ã“ã†ã™ã‚‹ã“ã¨ã§ç‰¹å®šã®ãƒªãƒã‚¸ãƒˆãƒªç”¨ã®è¨­å®šã¨å€‹äººã®è¨­å®šã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã—ã‹ã—ã€ç¬¬ä¸‰ã®è¨­å®šã‚’å‚ç…§ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚
ä¾‹ãˆã°ã‚ã‚‹çµ„ç¹”ã§ä½¿ã†ãƒ„ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã‚’ aqua ã§ç®¡ç†ã—ã‚ˆã†ã¨æ€ã£ã¦ã‚‚ã“ã‚Œã¾ã§ã¯é›£ã—ã‹ã£ãŸã§ã™ã€‚</p><p>ãã“ã§ <code>AQUA_GLOBAL_CONFIG</code> ã¨ã„ã†ç’°å¢ƒå¤‰æ•°ã« <code>:</code> åŒºåˆ‡ã‚Šã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§å…ˆé ­ã‹ã‚‰é †ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å„ªå…ˆé †ä½ã¯é«˜ã„æ–¹ã‹ã‚‰é †ã«æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><ol><li>-c ã§æŒ‡å®šã—ãŸå ´åˆã¯ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã€ãã†ã§ãªã‘ã‚Œã°ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰æ¢ç´¢ã—ã¦æœ€åˆã«è¦‹ã¤ã‹ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«</li><li><code>AQUA_GLOBAL_CONFIG</code></li><li>global configuration (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ <code>~/.aqua/global/[.]aqua.y[a]ml</code>)</li></ol><p>ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã¯</p><ol><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(ãƒªãƒã‚¸ãƒˆãƒª)ã®è¨­å®š</li><li>çµ„ç¹”ã®è¨­å®š</li><li>å€‹äººã®è¨­å®š</li></ol><p>ã¨ã„ã†æ„Ÿã˜ã§ã™ã€‚</p><p>ä¾‹ãˆã° GitHub Organizations ã« aqua-config ã¨ã„ã†ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ãŸã¨ã—ã¾ã—ã‚‡ã†ã€‚</p><ul><li>all.yaml: å…¨ Developer ç”¨ã®è¨­å®š</li><li>sre.yaml: SRE Team ç”¨ã®è¨­å®š</li></ul><p>ãã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ« <code>/home/foo/aqua-config</code> ã« checkout ã—ãŸã¨ã—ã¾ã—ã‚‡ã†ã€‚
ã‚ãªãŸãŒ SRE ã®å ´åˆã€ AQUA_GLOBAL_CONFIG ã‚’æ¬¡ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export AQUA_GLOBAL_CONFIG=/home/foo/aqua-config/sre.yaml:/home/foo/aqua-config/all.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã†ã™ã‚‹ã“ã¨ã§ç‰¹å®šã®ãƒªãƒã‚¸ãƒˆãƒªç”¨ã®è¨­å®šã¨å€‹äººã®è¨­å®š(dotfiles)ã«åŠ ãˆã¦ã€
è‡ªåˆ†ãŒæ‰€å±ã™ã‚‹çµ„ç¹”ç”¨ã®è¨­å®šã‚‚å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>çµ„ç¹”ã¨ã—ã¦ã¯çµ„ç¹”ã«å¿…è¦ãªãƒ„ãƒ¼ãƒ«ç¾¤ã‚’ aqua ã§å®£è¨€çš„ã«ç®¡ç†ã§ãã‚‹ãŸã‚ã€
ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã‚³ã‚¹ãƒˆã‚‚ä¸‹ãŒã‚Šã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚çµ„ç¹”ã§çµ±ä¸€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-install-ã«è¿½åŠ ã•ã‚ŒãŸ--a-option"><code>aqua install</code> ã«è¿½åŠ ã•ã‚ŒãŸ <code>-a</code> option<a href="#aqua-install-ã«è¿½åŠ ã•ã‚ŒãŸ--a-option" class="hash-link" aria-label="Direct link to aqua-install-ã«è¿½åŠ ã•ã‚ŒãŸ--a-option" title="Direct link to aqua-install-ã«è¿½åŠ ã•ã‚ŒãŸ--a-option">â€‹</a></h2><p>v0.7.3 ã§ã¯ <code>aqua install</code> ã« <code>-a</code> option ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚
<code>aqua install</code> ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ global configuration ã¯å‚ç…§ã—ã¾ã›ã‚“ã€‚
global configuration ã‚’å‚ç…§ã™ã‚‹ã®ã¯ <code>aqua exec</code> åŠã³ aqua ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã—ãŸã¨ã(å†…éƒ¨çš„ã« <code>aqua exec</code> ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹)ã ã‘ã§ã™ã€‚</p><p><code>-a</code> option ã‚’ã¤ã‘ã‚‹ã¨ global configuration ã‚‚å«ã‚ã¦å…¨ã¦ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã— install ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><p>aqua.yaml ã‚’ Git ã§ç®¡ç†ã—ã¦ã„ã‚‹å ´åˆã¯å®šæœŸçš„ã« ãƒªãƒã‚¸ãƒˆãƒªã‚’ pull ã—ã¦ <code>aqua i -a -l</code> ã‚’å®Ÿè¡Œã™ã‚‹ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚
ç°¡å˜ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ãŸã‚Šã€ cron ã§å®šæœŸå®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨ã‚ˆã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>aqua</category>
        </item>
        <item>
            <title><![CDATA[aqua ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«ç”Ÿæˆã™ã‚‹ generate ã‚³ãƒãƒ³ãƒ‰]]></title>
            <link>https://techblog.szksh.cloud/aqua-generate</link>
            <guid>https://techblog.szksh.cloud/aqua-generate</guid>
            <pubDate>Sun, 05 Sep 2021 01:17:39 GMT</pubDate>
            <description><![CDATA[* aqua - CLI ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†]]></description>
            <content:encoded><![CDATA[<ul><li><a href="/aqua">aqua - CLI ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</a></li><li><a href="/aqua-v0.5">aqua v0.1.0 ã‹ã‚‰ v0.5.0 ã§ã®å¤‰æ›´ç‚¹</a></li></ul><p>aqua v0.5.1 ã§è¿½åŠ ã•ã‚ŒãŸ generate ã¨ã„ã†ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>aqua ã§ã¯ Registry ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§è¨­å®šã‚’è¨˜è¿°ã™ã‚‹æ‰‹é–“ã‚’çœãã“ã¨ãŒã§ãã¾ã™ãŒã€
Registry ã‚’æ´»ç”¨ã™ã‚‹ã«ã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„ãƒ„ãƒ¼ãƒ«ãŒ Registry ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ã€ã•ã‚Œã¦ã„ã‚‹ã¨ã—ãŸã‚‰ name ã¯ãªã«ã‹èª¿ã¹ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
Registry ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ã«è¦‹é€ƒã—ã¦ã—ã¾ã†ã“ã¨ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ã¾ãŸã€ aqua ã§ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ version ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€å¤šãã®å ´åˆã¯ã¨ã‚Šã‚ãˆãšæœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ãªã«ã‹ã‚’èª¿ã¹ã‚‹ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ã“ã‚Œã‚‰ã®æ‰‹é–“ã‚’æ¸›ã‚‰ã™ãŸã‚ã« generate ã¨ã„ã†ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚
ã“ã‚Œã¯ aqua.yaml ã§æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ Registry ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ packages ã®ä¸€è¦§ã‹ã‚‰ package ã‚’ fuzzy search ã«ã‚ˆã£ã¦é¸æŠã—ã€
æ›´ã« <code>github_release</code> package ã®å ´åˆã¯ release version ã®ä¸€è¦§ã‚’ fuzzy search ã«ã‚ˆã£ã¦é¸æŠã™ã‚‹ã“ã¨ã§ package ã® YAML å®šç¾©ã‚’å‡ºåŠ›ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚</p><p>ä½¿ã£ã¦ã¿ã‚‹ã®ãŒæ—©ã„ã§ã—ã‚‡ã†ã€‚ aqua.yaml ã« Standard Registry ã‚’è¿½åŠ ã—ãŸä¸Šã§ <code>aqua g</code> ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v0.2.1 </span><span class="token comment" style="color:#999988;font-style:italic"># renovate: depName=suzuki-shunsuke/aqua-registry</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã™ã‚‹ã¨ fuzzy search ãŒèµ·å‹•ã—ã€ package ãŒé¸æŠã§ãã¾ã™ã€‚
è‡ªåˆ†ãŒä½¿ã„ãŸã„ãƒ„ãƒ¼ãƒ«åã§æ¤œç´¢ã—ã¦ã¿ã¦ã€ã‚ã‚Œã°ãã‚Œã‚’é¸æŠã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  direnv (standard)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  consul (standard)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  conftest (standard)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; golangci-lint (standard)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  47/47</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>golangci-lint ã‚’é¸ã‚“ã§ã¿ã¾ã—ã‚‡ã†ã€‚
ã™ã‚‹ã¨ golangci-lint ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸€è¦§ãŒé¸æŠã§ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  v1.40.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  v1.40.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  v1.41.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  v1.41.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; v1.42.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  30/30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>version ã‚’é¸ã¶ã¨ YAML ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ aqua g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: golangci-lint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  registry: standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version: v1.42.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã® YAML ã‚’ <code>aqua.yaml</code> ã® <code>packages</code> ã«è¿½è¨˜ã™ã‚Œã° OK ã§ã™ã€‚</p><p>helm ã®ã‚ˆã†ã« GitHub Release ã‹ã‚‰ã§ã¯ãªãå…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹ã®ãŒé›£ã—ã„ã®ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®é¸æŠã¯ã§ãã¾ã›ã‚“ã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ aqua g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: helm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  registry: standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version: ""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãã‚Œã§ã‚‚ helm ãŒ <code>helm</code> ã¨ã„ã† name ã§ standard registry ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã¯ã‚ã‹ã‚‹ã®ã§ã€ååˆ†ä¾¿åˆ©ã§ã™ã€‚</p><p>ã¡ãªã¿ã« fuzzy search ã«ã¯ <a href="https://github.com/ktr0731/go-fuzzyfinder" target="_blank" rel="noopener noreferrer">ktr0731/go-fuzzyfinder</a> ã‚’ä½¿ã‚ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚éå¸¸ã«ç°¡å˜ã« fuzzy search ãŒå®Ÿè£…ã§ãã¦ã¨ã¦ã‚‚ä¾¿åˆ©ã§ã—ãŸã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>aqua</category>
        </item>
        <item>
            <title><![CDATA[aqua v0.1.0 ã‹ã‚‰ v0.5.0 ã§ã®å¤‰æ›´ç‚¹]]></title>
            <link>https://techblog.szksh.cloud/aqua-v0.5</link>
            <guid>https://techblog.szksh.cloud/aqua-v0.5</guid>
            <pubDate>Sat, 04 Sep 2021 02:58:42 GMT</pubDate>
            <description><![CDATA[å…ˆæ—¥ aqua v0.1.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸè¨˜äº‹ã‚’æ›¸ã„ãŸã°ã‹ã‚Šã§ã™ãŒã€]]></description>
            <content:encoded><![CDATA[<p><a href="/aqua/">å…ˆæ—¥ aqua v0.1.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸè¨˜äº‹ã‚’æ›¸ã„ãŸ</a>ã°ã‹ã‚Šã§ã™ãŒã€
ãã“ã‹ã‚‰æ›´ã«é–‹ç™ºã‚’ç¶šã‘ã¦ v0.5.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã®ã§ã€å¤‰æ›´ç‚¹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>åŸºæœ¬çš„ã« <a href="https://github.com/suzuki-shunsuke/aqua/releases" target="_blank" rel="noopener noreferrer">Release Note</a> ã«æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Šã§ã™ã€‚</p><ul><li>PATH ã‚’ project (aqua.yaml) æ¯ã«è¨­å®šã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã—ãŸ<ul><li><code>~/.aqua/bin</code> ã‚’ PATH ã«è¿½åŠ ã™ã‚Œã°ã‚ˆããªã‚Šã¾ã—ãŸ</li><li>direnv ãªã©ã‚’ä½¿ã£ã¦ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã—ãŸ</li></ul></li><li><code>install</code> ã‚³ãƒãƒ³ãƒ‰ã« <code>--test</code> option ã‚’è¿½åŠ ã—ã€ <code>file.src</code> ã®è¨­å®šãŒæ­£ã—ã„ã‹ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ<ul><li>CI ã§ aqua ã®è¨­å®šã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã®ã«ä¾¿åˆ©</li></ul></li><li>GitHub Release ã ã‘ã§ãªãã€ä»»æ„ã® URL ã‹ã‚‰ tool ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ<ul><li>Go ã‚„ helm, Hashicorp ã® product ã®ã‚ˆã†ãªå…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚¿ã‚¤ãƒ—ã®ãƒ„ãƒ¼ãƒ«ã‚‚ install ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li></ul></li><li>Breaking Change: <code>inline_registry</code> ã®è¨­å®šã®å½¢å¼ã‚’å¤‰æ›´ã—ã¾ã—ãŸ</li><li>aqua ã®è¨­å®šã®å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹ <code>Registry</code> ã¨ã„ã†ä»•çµ„ã¿ã‚’å°å…¥ã—ã¾ã—ãŸ<ul><li>standard <code>Registry</code> ã‚’å…¬é–‹ã—ã¾ã—ãŸ <a href="https://github.com/suzuki-shunsuke/aqua-registry" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/aqua-registry</a></li></ul></li><li>ç°¡å˜ãª slide ã‚’å…¬é–‹ã—ã¾ã—ãŸ: <a href="https://speakerdeck.com/szksh/introduction-of-aqua" target="_blank" rel="noopener noreferrer">https://speakerdeck.com/szksh/introduction-of-aqua</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="path-ã‚’-project-aquayaml-æ¯ã«è¨­å®šã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã—ãŸ">PATH ã‚’ project (aqua.yaml) æ¯ã«è¨­å®šã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã—ãŸ<a href="#path-ã‚’-project-aquayaml-æ¯ã«è¨­å®šã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to PATH ã‚’ project (aqua.yaml) æ¯ã«è¨­å®šã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã—ãŸ" title="Direct link to PATH ã‚’ project (aqua.yaml) æ¯ã«è¨­å®šã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã—ãŸ">â€‹</a></h2><p>aqua v0.1.0 ã§ã¯ symbolic link ã‚’ aqua.yaml ã®ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® <code>.aqua/bin</code> é…ä¸‹ã«ä½œæˆã—ã¦ãŠã‚Šã€ã“ã“ã‚’ PATH ã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚
direnv ã¨ã‹ã‚’ä½¿ã†ã¨ä¾¿åˆ©ã§ã™ãŒã€é–“æ¥çš„ã«(?) aqua ãŒ direnv ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã«ä¾å­˜ã—ã¦ã„ã‚‹å½¢ã«ãªã‚Šã€å¾®å¦™ã§ã—ãŸã€‚</p><p>aqua v0.5.0 ã§ã¯ symbolic link ã‚’ <code>~/.aqua/bin</code> é…ä¸‹ã«ä½œæˆã™ã‚‹ãŸã‚ã€ .bashrc ãªã©ã§ <code>~/.aqua/bin</code> ã‚’ PATH ã«è¿½åŠ ã—ã¦ãŠã‘ã° project ã”ã¨ã«ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ã¯ãªããªã‚Šã¾ã—ãŸã€‚
ã¡ãªã¿ã«ä½œæˆã•ã‚Œã‚‹ symbolic link ã¯ aqua-proxy ã¸ã®ãƒªãƒ³ã‚¯ã§ã‚ã‚Šã€ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¯ä¾å­˜ã—ãªã„ã®ã§ <code>~/.aqua/bin</code> ã‚’å…±æœ‰ã—ã¦ã‚‚å¹²æ¸‰ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¿œç”¨-aquabin-é…ä¸‹ã«-symbolic-link-ã‚’ä½œã‚‹ä¸Šã§ã®èª²é¡Œã¨ãã‚Œã®è§£æ±ºæ³•">[å¿œç”¨]<!-- --> <code>~/.aqua/bin</code> é…ä¸‹ã« symbolic link ã‚’ä½œã‚‹ä¸Šã§ã®èª²é¡Œã¨ãã‚Œã®è§£æ±ºæ³•<a href="#å¿œç”¨-aquabin-é…ä¸‹ã«-symbolic-link-ã‚’ä½œã‚‹ä¸Šã§ã®èª²é¡Œã¨ãã‚Œã®è§£æ±ºæ³•" class="hash-link" aria-label="Direct link to å¿œç”¨-aquabin-é…ä¸‹ã«-symbolic-link-ã‚’ä½œã‚‹ä¸Šã§ã®èª²é¡Œã¨ãã‚Œã®è§£æ±ºæ³•" title="Direct link to å¿œç”¨-aquabin-é…ä¸‹ã«-symbolic-link-ã‚’ä½œã‚‹ä¸Šã§ã®èª²é¡Œã¨ãã‚Œã®è§£æ±ºæ³•">â€‹</a></h3><p><code>~/.aqua/bin</code> é…ä¸‹ã« symbolic link ã‚’ä½œã£ã¦ PATH ã«è¿½åŠ ã™ã‚‹å ´åˆã€ä¸€ã¤å¤§ããªèª²é¡ŒãŒã‚ã‚Šã¾ã™
(ã ã‹ã‚‰ã“ã v0.1.0 ã§ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã« symbolic link ã‚’ä½œã£ã¦ã„ã¾ã—ãŸ)ã€‚
<code>~/.aqua/bin</code> é…ä¸‹ã« symbolic link ã‚’ä½œã£ã¦ PATH ã«è¿½åŠ ã™ã‚‹ã¨ã€åŸºæœ¬çš„ã«ãã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå‘¼ã°ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
ãã®ãƒ„ãƒ¼ãƒ«ã‚’ aqua ã§ç®¡ç†ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé…ä¸‹ãªã‚‰ãã‚Œã§è‰¯ã„ã§ã™ãŒã€ãã†ã§ãªã„å ´åˆã€æœ¬æ¥ aqua ä»¥å¤–ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‚ã®ã‚’å®Ÿè¡Œã—ãŸãã¦ã‚‚å®Ÿè¡Œã§ãã¾ã›ã‚“ã€‚
ä¾‹ãˆã° homebrew ã§ jq ã‚’ install ã—ã¦ã„ã¦ã€ã‚ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ aqua ã‚’ä½¿ã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®šã—ãŸã‚‚ã®ã‚’ä½¿ã„ãŸã„ãŒã€ãã‚Œä»¥å¤–ã§ã¯ homebrew ã§ install ã—ãŸã‚‚ã®ã‚’ä½¿ã„ãŸã„ã¨ã„ã£ãŸå ´åˆã«å•é¡Œã«ãªã‚Šã¾ã™ã€‚</p><p>ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã€ aqua ã§ã¯ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã™éš›ã« <code>PATH</code> ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ aqua-proxy ã¸ã®ãƒªãƒ³ã‚¯ã¨ãªã£ã¦ã„ã‚‹ã‚‚ã®ã¯é™¤å¤–ã™ã‚‹ã¨ã„ã†ãƒãƒƒã‚¯(?)ã®ã‚ˆã†ãªã“ã¨ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-ã‚³ãƒãƒ³ãƒ‰ã«---test-option-ã‚’è¿½åŠ ã—-filesrc-ã®è¨­å®šãŒæ­£ã—ã„ã‹ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ"><code>install</code> ã‚³ãƒãƒ³ãƒ‰ã« <code>--test</code> option ã‚’è¿½åŠ ã—ã€ <code>file.src</code> ã®è¨­å®šãŒæ­£ã—ã„ã‹ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ<a href="#install-ã‚³ãƒãƒ³ãƒ‰ã«---test-option-ã‚’è¿½åŠ ã—-filesrc-ã®è¨­å®šãŒæ­£ã—ã„ã‹ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to install-ã‚³ãƒãƒ³ãƒ‰ã«---test-option-ã‚’è¿½åŠ ã—-filesrc-ã®è¨­å®šãŒæ­£ã—ã„ã‹ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" title="Direct link to install-ã‚³ãƒãƒ³ãƒ‰ã«---test-option-ã‚’è¿½åŠ ã—-filesrc-ã®è¨­å®šãŒæ­£ã—ã„ã‹ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">â€‹</a></h2><p>åœ°å‘³ãªæ›´æ–°ã§ã™ãŒã€ aqua ã®è¨­å®šã‚’æ›´æ–°ã—ãŸéš›ã« CI ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ã®ã«ä¾¿åˆ©ã§ã™ã€‚
<code>--test</code> option ãªã—ã ã¨ã€ warning ã¯å‡ºåŠ›ã—ã¾ã™ãŒã€ exit code ã¯ 0 ã«ãªã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-release-ã ã‘ã§ãªãä»»æ„ã®-url-ã‹ã‚‰-tool-ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">GitHub Release ã ã‘ã§ãªãã€ä»»æ„ã® URL ã‹ã‚‰ tool ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ<a href="#github-release-ã ã‘ã§ãªãä»»æ„ã®-url-ã‹ã‚‰-tool-ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" class="hash-link" aria-label="Direct link to GitHub Release ã ã‘ã§ãªãã€ä»»æ„ã® URL ã‹ã‚‰ tool ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ" title="Direct link to GitHub Release ã ã‘ã§ãªãã€ä»»æ„ã® URL ã‹ã‚‰ tool ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ">â€‹</a></h2><p>ã¡ãªã¿ã«ã€ GitHub Release ã§å…¬é–‹ã•ã‚Œã¦ãªã„ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã§ã‚‚ã€
GitHub ãƒªãƒã‚¸ãƒˆãƒªã§ versioning ã•ã‚Œã¦ã„ã¦ Renovate ã® <code>github_release</code> data source ã§è‡ªå‹•æ›´æ–°ã§ãã‚‹ã‚±ãƒ¼ã‚¹ã¯å°‘ãªããªã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-change-inline_registry-ã®è¨­å®šã®å½¢å¼ã‚’å¤‰æ›´ã—ã¾ã—ãŸ">Breaking Change: <code>inline_registry</code> ã®è¨­å®šã®å½¢å¼ã‚’å¤‰æ›´ã—ã¾ã—ãŸ<a href="#breaking-change-inline_registry-ã®è¨­å®šã®å½¢å¼ã‚’å¤‰æ›´ã—ã¾ã—ãŸ" class="hash-link" aria-label="Direct link to breaking-change-inline_registry-ã®è¨­å®šã®å½¢å¼ã‚’å¤‰æ›´ã—ã¾ã—ãŸ" title="Direct link to breaking-change-inline_registry-ã®è¨­å®šã®å½¢å¼ã‚’å¤‰æ›´ã—ã¾ã—ãŸ">â€‹</a></h2><p>å°ã•ãª breaking change ã§ã™ãŒã€<code>inline_registry</code> ã®å½¢å¼ãŒå¤‰ã‚ã‚Šã¾ã—ãŸã€‚</p><p>AS IS</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">inline_registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github_release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stedolan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">asset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'jq-{{if eq .OS "darwin"}}osx{{else}}{{.OS}}{{end}}-{{.Arch}}'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">files</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>TO BE</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">inline_registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">packages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github_release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">repo_owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stedolan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">repo_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">asset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'jq-{{if eq .OS "darwin"}}osx{{else}}{{.OS}}{{end}}-{{.Arch}}'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">files</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-ã®è¨­å®šã®å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹-registry-ã¨ã„ã†ä»•çµ„ã¿ã‚’å°å…¥ã—ã¾ã—ãŸ">aqua ã®è¨­å®šã®å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹ <code>Registry</code> ã¨ã„ã†ä»•çµ„ã¿ã‚’å°å…¥ã—ã¾ã—ãŸ<a href="#aqua-ã®è¨­å®šã®å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹-registry-ã¨ã„ã†ä»•çµ„ã¿ã‚’å°å…¥ã—ã¾ã—ãŸ" class="hash-link" aria-label="Direct link to aqua-ã®è¨­å®šã®å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹-registry-ã¨ã„ã†ä»•çµ„ã¿ã‚’å°å…¥ã—ã¾ã—ãŸ" title="Direct link to aqua-ã®è¨­å®šã®å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹-registry-ã¨ã„ã†ä»•çµ„ã¿ã‚’å°å…¥ã—ã¾ã—ãŸ">â€‹</a></h2><p>ã“ã‚ŒãŒä¸€ç•ªå¤§ããªæ›´æ–°ã§ã™ã€‚
aqua ã‚’ä½¿ã†ã«ã¯ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’ YAML ã§è¨˜è¿°ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ãŒã€
ã“ã‚Œã¯ã¡ã‚‡ã£ã¨ã—ãŸæ‰‹é–“ã§ã™ã—ã€æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦éšœå£ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ãƒ„ãƒ¼ãƒ«ã¨ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å®šç¾©ã—ãŸã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¦ã»ã—ã„ã‚‚ã®ã§ã™ã€‚
ãƒ„ãƒ¼ãƒ«ã¨ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å®šç¾©ã¯ <code>aqua.yaml</code> ã® <code>packages</code> ã®éƒ¨åˆ†ãªã®ã§ã€ãã‚Œä»¥å¤–ã®è¨­å®šã‚’å¦‚ä½•ã«ç°¡ç•¥åŒ–ã™ã‚‹ã‹ã¨ã„ã†è©±ã«ãªã‚Šã¾ã™ã€‚</p><p>Registry ã¯ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã®è¨­å®šã‚’ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¨­å®šã¨ã¯ç‹¬ç«‹ã•ã›ã€å†åˆ©ç”¨å¯èƒ½ãªå½¢ã§å…±æœ‰ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚</p><p>Registry ã«ã¯ç¾çŠ¶ 4 ç¨®é¡ã‚ã‚Šã¾ã™ã€‚</p><ul><li>inline regisry: aqua.yaml ã®ä¸­ã«ç›´æ¥ install æ–¹æ³•ã‚’å®šç¾©ã™ã‚‹ã€‚ v0.1.0 ã‹ã‚‰ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹æ–¹æ³•</li><li>github_content registry: GitHub Repository ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Registry ã¨ã—ã¦å‚ç…§ã™ã‚‹æ–¹æ³•</li><li>local registry: GitHub Repository ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Regisry ã¨ã—ã¦å‚ç…§ã™ã‚‹æ–¹æ³•</li><li>standard registry: è‡ªåˆ†ãŒãƒ¡ãƒ³ãƒ†ã—ã¦ã„ã‚‹ github_content registry ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inline-registry">inline registry<a href="#inline-registry" class="hash-link" aria-label="Direct link to inline registry" title="Direct link to inline registry">â€‹</a></h3><p>inline registry ã¯å¾“æ¥ã‹ã‚‰ã‚ã‚‹ã‚„ã¤ã§ã€ aqua.yaml å†…ã«å®šç¾©ã™ã‚‹æ–¹æ³•ã§ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">inline_registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">packages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github_release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">repo_owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stedolan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">repo_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">asset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'jq-{{if eq .OS "darwin"}}osx{{else}}{{.OS}}{{end}}-{{.Arch}}'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">files</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚·ãƒ³ãƒ—ãƒ«ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ã‚³ãƒ”ãƒšã™ã‚‹ä»¥å¤–ã«å†åˆ©ç”¨æ€§ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="local-registry">local registry<a href="#local-registry" class="hash-link" aria-label="Direct link to local registry" title="Direct link to local registry">â€‹</a></h2><p>local registry ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã™ã‚‹ registry ã§ã™ã€‚
çµ¶å¯¾ãƒ‘ã‚¹ã‹ã€ aqua.yaml ã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github_content-registry">github_content registry<a href="#github_content-registry" class="hash-link" aria-label="Direct link to github_content registry" title="Direct link to github_content registry">â€‹</a></h2><p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã¯æ¬¡ã®ã‚ˆã†ã« Registry ã‚’å®šç¾©ã™ã‚Œã°ã‚ã¨ã¯ <code>packages</code> ã§ Registry ã‚’å‚ç…§ã§ãã¾ã™ã€‚
GitHub Access Token ã‚’ç’°å¢ƒå¤‰æ•° <code>GITHUB_TOKEN</code> ã¨ã—ã¦è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> suzuki</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">shunsuke/aqua</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github_content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> suzuki</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">shunsuke</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> aqua</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v0.2.0 </span><span class="token comment" style="color:#999988;font-style:italic"># renovate: depName=suzuki-shunsuke/aqua-registry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> registry.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">packages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conftest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v0.27.0 </span><span class="token comment" style="color:#999988;font-style:italic"># renovate: depName=open-policy-agent/conftest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="registry-ã‚’å…¬é–‹ã™ã‚‹">Registry ã‚’å…¬é–‹ã™ã‚‹<a href="#registry-ã‚’å…¬é–‹ã™ã‚‹" class="hash-link" aria-label="Direct link to Registry ã‚’å…¬é–‹ã™ã‚‹" title="Direct link to Registry ã‚’å…¬é–‹ã™ã‚‹">â€‹</a></h3><p>è‡ªåˆ†ã§ Registry ã‚’å…¬é–‹ã—ãŸã„å ´åˆã¯ GitHub Repository ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãã ã‘ã§ OK ã§ã™ã€‚
e.g. <a href="https://github.com/suzuki-shunsuke/aqua-registry/blob/main/registry.yaml" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/aqua-registry/blob/main/registry.yaml</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="standard-registry">Standard Registry<a href="#standard-registry" class="hash-link" aria-label="Direct link to Standard Registry" title="Direct link to Standard Registry">â€‹</a></h2><p>Standard Registry ã‚‚ä½œã‚Šã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/aqua-registry" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/aqua-registry</a></p><p>jq ã‚„ gh, kubectl, Terraform ãªã©æœ‰åãªãƒ„ãƒ¼ãƒ«ã¯ã“ã® Registry ã‚’ä½¿ãˆã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ãŒã€
å½“ç„¶ PR ã‚‚å—ã‘ä»˜ã‘ã¦ã„ã‚‹ã®ã§ã€è¿½åŠ ã—ã¦ã»ã—ã„ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Œã° PR ã‚’æŠ•ã’ã¦ãã ã•ã„ã€‚</p><p>Official Registry ã‚’ github_content Registry ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚å½“ç„¶ã§ãã¾ã™ãŒã€
ã‚ˆã‚Šç°¡æ½”ã«æ›¸ã‘ã‚‹ã‚ˆã†ã« <code>type: standard</code> ã¨ã„ã† Registry ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>AS IS</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github_content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> suzuki</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">shunsuke</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> aqua</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v0.2.0 </span><span class="token comment" style="color:#999988;font-style:italic"># renovate: depName=suzuki-shunsuke/aqua-registry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> registry.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>TO BE</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v0.2.0 </span><span class="token comment" style="color:#999988;font-style:italic"># renovate: depName=suzuki-shunsuke/aqua-registry</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Š 2 ã¤ã¯ç­‰ä¾¡ã§ã¯ã‚ã‚Šã¾ã™ãŒã€å¾Œè€…ã®ã»ã†ãŒç°¡æ½”ã§ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>aqua</category>
        </item>
        <item>
            <title><![CDATA[2021-08 ã‚„ã£ãŸã“ã¨]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2021-08</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2021-08</guid>
            <pubDate>Thu, 02 Sep 2021 05:33:16 GMT</pubDate>
            <description><![CDATA[ä»•äº‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><ul><li>AWS IAM User ã‚’å‰Šé™¤ã™ã‚‹éš›ã« force_destroy ãŒ true ã«ãªã£ã¦ã„ã‚‹ã‹ Conftest ã§ãƒ†ã‚¹ãƒˆ</li><li>Terraform ã® State åˆ†å‰²</li><li>Terraform Modules ã‚’åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ versioning</li><li>git-secrets ã‚’ secretlint ã«ç§»è¡Œ<ul><li>git-secrets ãŒãƒ¡ãƒ³ãƒ†ã•ã‚Œã¦ãªãã¦ã€æ—¢çŸ¥ãƒã‚°ãŒæ”¾ç½®ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‰</li></ul></li><li>CI ã§ terraform fmt ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®è‡ªå‹•åŒ–</li><li>WIP: AWS WAF ã® COUNT, BLOCK ãƒ­ã‚°ã‚’ Firehose ã§æŠ½å‡º</li><li>WIP: AWS CodeBuild ã§ Provisioning Error ãŒç™ºç”Ÿã—ãŸã‚‰è‡ªå‹•ã§ Retry</li><li>WIP: AWS CodeBuild ã®ãŸã‚ã® GitHub App ã®é–‹ç™º</li><li>WIP: AWS SSO ã«ã¤ã„ã¦èª¿æŸ»</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution">OSS Contribution<a href="#oss-contribution" class="hash-link" aria-label="Direct link to OSS Contribution" title="Direct link to OSS Contribution">â€‹</a></h2><p>Renovate ã® GitHub Actions ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä¿®æ­£ã‚’ã—ã¾ã—ãŸã€‚
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸­ã«æ›¸ã‹ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ Renovate ã§è‡ªå‹• update ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/renovatebot/github-action/pull/556" target="_blank" rel="noopener noreferrer">docs: fix broken links and update GitHub Actions</a></li><li><a href="https://github.com/renovatebot/github-action/pull/557" target="_blank" rel="noopener noreferrer">chore: update GitHub Actions in README by Renovate</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°ãŸã«ä½œã£ãŸ-oss">æ–°ãŸã«ä½œã£ãŸ OSS<a href="#æ–°ãŸã«ä½œã£ãŸ-oss" class="hash-link" aria-label="Direct link to æ–°ãŸã«ä½œã£ãŸ OSS" title="Direct link to æ–°ãŸã«ä½œã£ãŸ OSS">â€‹</a></h2><ul><li><a href="https://github.com/suzuki-shunsuke/logrus-error" target="_blank" rel="noopener noreferrer">logrus-error</a>: <a href="https://github.com/sirupsen/logrus" target="_blank" rel="noopener noreferrer">logrus</a>.Fields ã‚’ error ã«åŸ‹ã‚è¾¼ã‚€ Go ã®è–„ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li><li><a href="https://github.com/suzuki-shunsuke/aqua" target="_blank" rel="noopener noreferrer">aqua</a>: Command Line Tools Version Manager<ul><li><a href="https://github.com/suzuki-shunsuke/aqua-proxy" target="_blank" rel="noopener noreferrer">aqua-proxy</a>: aqua ã®å†…éƒ¨ãƒ„ãƒ¼ãƒ« </li><li><a href="https://github.com/suzuki-shunsuke/aqua-installer" target="_blank" rel="noopener noreferrer">aqua-installer</a>: aqua ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ GitHub Actions</li></ul></li><li><a href="https://github.com/suzuki-shunsuke/go-checkout-github-merged-commit" target="_blank" rel="noopener noreferrer">go-checkout-github-merged-commit</a>: PR ã® merged commit ã‚’ checkout ã™ã‚‹ Go ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li><li><a href="https://github.com/suzuki-shunsuke/aws-codebuild-retry" target="_blank" rel="noopener noreferrer">aws-codebuild-retry</a>: AWS CodeBuild ã‚’ Retry ã™ã‚‹ Lambda Function</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog">Blog<a href="#blog" class="hash-link" aria-label="Direct link to Blog" title="Direct link to Blog">â€‹</a></h2><ul><li><a href="https://techblog.szksh.cloud/archives/2021/08/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/archives/2021/08/</a><ul><li><a href="https://techblog.szksh.cloud/aqua/" target="_blank" rel="noopener noreferrer">aqua - CLI ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</a></li><li><a href="https://techblog.szksh.cloud/github-app-for-codebuild/" target="_blank" rel="noopener noreferrer">AWS CodeBuild ã‚’å®Ÿè¡Œã™ã‚‹ Github App ã‚’ä½œã‚‹</a></li></ul></li><li>Quipper<ul><li><a href="https://blog.studysapuri.jp/entry/2021/08/11/080000" target="_blank" rel="noopener noreferrer">Terraform ã® CI ã« tfmigrate ã‚’å°å…¥ã—ãŸè©±</a></li><li><a href="https://blog.studysapuri.jp/entry/2021/08/02/080000" target="_blank" rel="noopener noreferrer">AWS IAM ã®ç®¡ç†ã‚’ miam ã‹ã‚‰ Terraform ã«ç§»è¡Œã—ãŸè©±</a></li></ul></li></ul>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[aqua - CLI ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†]]></title>
            <link>https://techblog.szksh.cloud/aqua</link>
            <guid>https://techblog.szksh.cloud/aqua</guid>
            <pubDate>Sat, 28 Aug 2021 00:07:38 GMT</pubDate>
            <description><![CDATA[2021-09-04 è¿½è¨˜: aqua v0.1.0 ã‹ã‚‰ v0.5.0 ã§ã®å¤‰æ›´ç‚¹]]></description>
            <content:encoded><![CDATA[<p>2021-09-04 è¿½è¨˜: <a href="/aqua-v0.5">aqua v0.1.0 ã‹ã‚‰ v0.5.0 ã§ã®å¤‰æ›´ç‚¹</a></p><p><a href="https://github.com/suzuki-shunsuke/aqua" target="_blank" rel="noopener noreferrer">aqua</a> ã¨ã„ã† OSS ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>è¨˜äº‹ã®å†…å®¹ã¯ aqua v0.1.0 ã«åŸºã¥ãã¾ã™ã€‚å°†æ¥çš„ã«ä»•æ§˜ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-ã¨ã¯">aqua ã¨ã¯<a href="#aqua-ã¨ã¯" class="hash-link" aria-label="Direct link to aqua ã¨ã¯" title="Direct link to aqua ã¨ã¯">â€‹</a></h2><p>aqua ã¯ CLI ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã®ãŸã‚ã® CLI ã§ã™ã€‚
aqua ã§ç®¡ç†ã™ã‚‹ä¸»ãªå¯¾è±¡ã¯ GitHub Release ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
YAML ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨æŒ‡å®šã—ãŸãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãã€ <code>aqua install</code> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨
<a href="https://stedolan.github.io/jq/" target="_blank" rel="noopener noreferrer">jq</a>, <a href="https://www.conftest.dev/" target="_blank" rel="noopener noreferrer">conftest</a> ãªã©ãŒ GitHub Release ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">packages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> inline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1.6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conftest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> inline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v0.27.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">inline_registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github_release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stedolan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">asset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'jq-{{if eq .OS "darwin"}}osx-amd64{{else}}{{if eq .OS "linux"}}linux64{{else}}win64.exe{{end}}{{end}}'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">files</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conftest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github_release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> open</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">policy</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conftest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">asset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'conftest_{{trimPrefix "v" .Package.Version}}_{{title .OS}}_x86_64.tar.gz'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">files</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conftest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¡ãªã¿ã«ä¸Šè¨˜ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">asset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'conftest_{{trimPrefix "v" .Package.Version}}_{{title .OS}}_x86_64.tar.gz'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã®éƒ¨åˆ†ã§ã¯ Go ã® <a href="https://pkg.go.dev/text/template" target="_blank" rel="noopener noreferrer">text/template</a> ã¨ <a href="http://masterminds.github.io/sprig/" target="_blank" rel="noopener noreferrer">sprig</a> ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ãƒ„ãƒ¼ãƒ«ã”ã¨ã« URL ã‚’èª¿ã¹ã¦ download ã—ã¦ tarball ãªã©ã‚’å±•é–‹ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãªã©ã®é¢å€’ãªä½œæ¥­ã‚’ aqua ã§è‡ªå‹•åŒ–ã§ãã¾ã™ã€‚
update ã‚‚åŸºæœ¬çš„ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã® version ã‚’æ›´æ–°ã™ã‚‹ã ã‘ã§ OK ã§ã™ã€‚</p><p>aqua ã‚’ä½¿ã†ã¨åŒã˜ãƒ„ãƒ¼ãƒ«ã®è¤‡æ•°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ã„ã£ãŸã“ã¨ã‚‚å®¹æ˜“ã«ã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-ã¤ã®ä¸»ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹">3 ã¤ã®ä¸»ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹<a href="#3-ã¤ã®ä¸»ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹" class="hash-link" aria-label="Direct link to 3 ã¤ã®ä¸»ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹" title="Direct link to 3 ã¤ã®ä¸»ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹">â€‹</a></h2><p>aqua ã§ã¯ä»¥ä¸‹ã® 3 ã¤ã®ä¸»ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚</p><ul><li>CI/CD ã§å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ç®¡ç†</li><li>ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã«å¿…è¦ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(ãƒªãƒã‚¸ãƒˆãƒª)å›ºæœ‰ã®ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†</li><li>ç‰¹å®šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(ãƒªãƒã‚¸ãƒˆãƒª)ã«ã‚ˆã‚‰ãªã„ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1-cicd-ã§å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ç®¡ç†">ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: CI/CD ã§å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ç®¡ç†<a href="#ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1-cicd-ã§å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ç®¡ç†" class="hash-link" aria-label="Direct link to ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: CI/CD ã§å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ç®¡ç†" title="Direct link to ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: CI/CD ã§å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ç®¡ç†">â€‹</a></h3><p>ä¾‹ãˆã° Terraform ã® Monorepo ã® CI ã§ä»¥ä¸‹ã®ã‚ˆã†ãªæ§˜ã€…ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã„ãŸã¨ã—ã¾ã—ã‚‡ã†ã€‚</p><ul><li><a href="https://cli.github.com/" target="_blank" rel="noopener noreferrer">gh</a></li><li><a href="https://stedolan.github.io/jq/" target="_blank" rel="noopener noreferrer">jq</a></li><li><a href="https://tfsec.dev/" target="_blank" rel="noopener noreferrer">tfsec</a></li><li><a href="https://github.com/terraform-linters/tflint" target="_blank" rel="noopener noreferrer">tflint</a></li><li><a href="https://github.com/minamijoyo/tfmigrate" target="_blank" rel="noopener noreferrer">tfmigrate</a></li><li><a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">tfcmt</a></li><li><a href="https://github.com/open-policy-agent/opa" target="_blank" rel="noopener noreferrer">opa</a></li><li><a href="https://www.conftest.dev/" target="_blank" rel="noopener noreferrer">conftest</a></li><li><a href="https://github.com/mvdan/sh" target="_blank" rel="noopener noreferrer">shfmt</a></li><li><a href="https://github.com/koalaman/shellcheck" target="_blank" rel="noopener noreferrer">shellcheck</a></li><li><a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">github-comment</a></li></ul><p>ã“ã‚Œã‚‰ã‚’1å€‹1å€‹ curl ãªã©ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã®ã¯é¢å€’ã§ã™ãŒã€
aqua ã§ã‚ã‚Œã°è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®£è¨€çš„ã«æ›¸ã„ã¦ <code>aqua i</code> ã‚’å®Ÿè¡Œã™ã‚Œã°çµ‚ã‚ã‚Šã§ã™ã€‚
æ–°ãŸã«ãƒ„ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹å ´åˆã§ã‚‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜ã™ã‚Œã°ã‚ˆãã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã§ãã‚‹ã®ã§ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ãªã„ã®ã«æ€¥ã«ãƒ„ãƒ¼ãƒ«ãŒæ›´æ–°ã•ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã›ã‚“ã—ã€ <a href="https://docs.renovatebot.com/modules/manager/regex/" target="_blank" rel="noopener noreferrer">Renovate ã® Regex Manager</a> ãªã©ã‚’ä½¿ãˆã°æ›´æ–°ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2-ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã«å¿…è¦ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒã‚¸ãƒˆãƒªå›ºæœ‰ã®ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†">ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã«å¿…è¦ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(ãƒªãƒã‚¸ãƒˆãƒª)å›ºæœ‰ã®ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†<a href="#ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2-ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã«å¿…è¦ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒã‚¸ãƒˆãƒªå›ºæœ‰ã®ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†" class="hash-link" aria-label="Direct link to ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã«å¿…è¦ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(ãƒªãƒã‚¸ãƒˆãƒª)å›ºæœ‰ã®ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†" title="Direct link to ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã«å¿…è¦ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(ãƒªãƒã‚¸ãƒˆãƒª)å›ºæœ‰ã®ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†">â€‹</a></h3><p>ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã«å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚’ aqua ã§ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ãƒªãƒã‚¸ãƒˆãƒªç›´ä¸‹ã« <code>aqua.yaml</code> ã‚’ç½®ã„ã¦ãŠã‘ã° OK ã§ã™ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€äººã«ã‚ˆã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒé•ã£ãŸã‚Šã™ã‚‹å•é¡Œã‚‚è§£æ¶ˆã§ãã¾ã™ã€‚
<code>aqua.yaml</code> ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« <code>.aqua</code> ãŒä½œæˆã•ã‚Œã‚‹ã®ã§ãã‚Œã‚’ .gitignore ã«è¿½åŠ ã—ã€ <code>.aqua/bin</code> ã‚’ PATH ã«è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚
direnv ã‚’ä½¿ã„ã€ãƒªãƒã‚¸ãƒˆãƒªç›´ä¸‹ã« .envrc ã‚’ç½®ã„ã¦ <code>.aqua/bin</code> ã‚’ PATH ã«è¿½åŠ ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aqua.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.aqua/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.envrc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>.envrc</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PATH_add .aqua/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>.aqua/bin</code> ã‚’ PATH ã«è¿½åŠ ã—ãªãã¦ã‚‚ <code>aqua exec -- &lt;ã‚³ãƒãƒ³ãƒ‰&gt; ...</code> ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹3-ç‰¹å®šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ã‚ˆã‚‰ãªã„ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†">ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹3: ç‰¹å®šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(ãƒªãƒã‚¸ãƒˆãƒª)ã«ã‚ˆã‚‰ãªã„ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†<a href="#ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹3-ç‰¹å®šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ã‚ˆã‚‰ãªã„ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†" class="hash-link" aria-label="Direct link to ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹3: ç‰¹å®šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(ãƒªãƒã‚¸ãƒˆãƒª)ã«ã‚ˆã‚‰ãªã„ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†" title="Direct link to ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹3: ç‰¹å®šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(ãƒªãƒã‚¸ãƒˆãƒª)ã«ã‚ˆã‚‰ãªã„ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†">â€‹</a></h3><p>ç‰¹å®šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã‚‰ãšã«ãƒ„ãƒ¼ãƒ«ã‚’ laptop ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆã«ã‚‚ä½¿ãˆã¾ã™ã€‚
<code>~/.aqua/global/aqua.yaml</code> ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨˜è¿°ã—ã€ <code>~/.aqua/global/.aqua/bin</code> ã‚’ PATH ã«è¿½åŠ ã—ã¦ãã ã•ã„ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$HOME/.aqua/global/.aqua/bin:$PATH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãã—ã¦ <code>~/.aqua/global</code> é…ä¸‹ã§ <code>aqua i</code> ã‚’å®Ÿè¡Œã™ã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã§ãã¾ã™ã€‚
<code>~/.aqua/global</code> ã‚’ Git ã§ç®¡ç†ã—ã¦ GitHub ãªã©ã§ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã®ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/my-aqua-config" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/my-aqua-config</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="akoi-ã¨ã®é•ã„">akoi ã¨ã®é•ã„<a href="#akoi-ã¨ã®é•ã„" class="hash-link" aria-label="Direct link to akoi ã¨ã®é•ã„" title="Direct link to akoi ã¨ã®é•ã„">â€‹</a></h2><p>ã¨ã“ã‚ã§ã€è‡ªåˆ†ã¯ aqua ã«ä¼¼ãŸãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ <a href="http://github.com/suzuki-shunsuke/akoi" target="_blank" rel="noopener noreferrer">akoi</a> ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’å…¬é–‹ã—ã¦ã„ã¦ã€è‡ªåˆ†ã‚‚ã“ã‚Œã¾ã§ã“ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ãã¾ã—ãŸã€‚
aqua ã¨ akoi ã¯ã€ŒCLI ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€ã¨ã„ã†ç›®çš„ãƒ»ã‚´ãƒ¼ãƒ«ã¯åŒã˜ã§ã™ã€‚
akoi ã‚‚çµæ§‹ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ akoi ãŒæŠ±ãˆã‚‹æ§˜ã€…ãªèª²é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã« aqua ã‚’é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚
aqua ã¯ akoi ã®ã„ã‚ã°å¾Œç¶™ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ãŸã ã—ã‚³ãƒ¼ãƒ‰ã¯å…¨ãåˆ¥ç‰©ã§ã™ã—ã€äº’æ›æ€§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="akoi-ã¨æ¯”ã¹ãŸ-aqua-ã®è‰¯ã„ç‚¹">akoi ã¨æ¯”ã¹ãŸ aqua ã®è‰¯ã„ç‚¹<a href="#akoi-ã¨æ¯”ã¹ãŸ-aqua-ã®è‰¯ã„ç‚¹" class="hash-link" aria-label="Direct link to akoi ã¨æ¯”ã¹ãŸ aqua ã®è‰¯ã„ç‚¹" title="Direct link to akoi ã¨æ¯”ã¹ãŸ aqua ã®è‰¯ã„ç‚¹">â€‹</a></h3><ul><li>GitHub Access Token ã‚’ä½¿ã£ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆ<ul><li>private repository ã‚’ã‚µãƒãƒ¼ãƒˆ</li><li>akoi ã¯ anonymous ãªã‚¢ã‚¯ã‚»ã‚¹ãªã®ã§ rate limit ã«å¼•ã£ã‹ã‹ã‚Šã‚„ã™ã„</li></ul></li><li>ç®¡ç†å¯¾è±¡ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¯èƒ½</li><li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ãŸã‚ã¨ã« install ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒãªã„<ul><li>akoi ã¯ symbolic link ã‚’ä½œã‚Šç›´ã™ãŸã‚ã« install ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li></ul></li><li>ç®¡ç†å¯¾è±¡ã®ãƒ„ãƒ¼ãƒ«ã®å®Ÿä½“ã‚’å…±æœ‰ã§ãã‚‹<ul><li>project ã”ã¨ã«ãƒ„ãƒ¼ãƒ«ã‚’ install ã™ã‚‹å¿…è¦ãŒãªã„(è¨ˆç®—è³‡æºã®åŠ¹ç‡åŒ–)</li><li>akoi ã¨é•ã£ã¦ ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦å®Ÿä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã¯ä¸€æ„ã«æ±ºã¾ã‚‹ã®ã§ã€å¹²æ¸‰ã™ã‚‹ã“ã¨ãŒãªãå®‰å…¨ã«å…±æœ‰ã§ãã‚‹</li></ul></li><li>äº‹å‰ã« archive ã®ä¸­ã®ãƒ‘ã‚¹ã‚’çŸ¥ã£ã¦ã„ã‚‹å¿…è¦ãŒãªã„<ul><li>akoi ã¯ install æ™‚ã« archive ã‚’å±•é–‹ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆã™ã‚‹<ul><li>ãƒ‘ã‚¹ãŒé–“é•ã£ã¦ã„ã‚‹ã¨å¤±æ•—ã—ã€ download ã‹ã‚‰ã‚„ã‚Šç›´ã—ã«ãªã‚‹</li><li>ãã®ãŸã‚ã€æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã‚’ akoi ã§ç®¡ç†ã™ã‚‹å ´åˆã¯ã¾ãš archive ã®æ§‹é€ ã‚’èª¿ã¹ã‚‹å¿…è¦ãŒã‚ã‚‹</li></ul></li><li>aqua ã¯ install ã—ãŸã‚ã¨ã« ~/.aqua é…ä¸‹ã‚’è¦‹ã¦ file.src ã‚’ä¿®æ­£ã™ã‚Œã°è‰¯ã„ã—ã€é–“é•ã£ã¦ã¦ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã«å¤±æ•—ã—ã¦ã‚‚ download ã®ã‚„ã‚Šç›´ã—ã¨ã‹ã¯ãªã„</li></ul></li><li><code>bin_path</code>, <code>link_path</code> ã‚ˆã†ãªè¨­å®šã«ã¤ã„ã¦è€ƒãˆãªãã¦è‰¯ã„<ul><li>akoi ã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆãªã©ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹</li><li>ã©ã†è¨­å®šã™ã¹ãã‹æ‚©ã¾ã—ã„ã—ã€ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ˆã£ã¦è¨­å®šãŒé•ã£ãŸã‚Šã—ã¦è¨­å®šã‚’çµ±ä¸€ã™ã‚‹ã®ãŒé›£ã—ã„</li><li>aqua ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆãªã©ãŒè¨­å®šã§ããªã„ã®ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¿·ã†å¿…è¦ãŒãªã„</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ç®¡ç†å¯¾è±¡ã®ãƒ„ãƒ¼ãƒ«ã®å®Ÿä½“ã‚’å…±æœ‰ã§ãã‚‹">ç®¡ç†å¯¾è±¡ã®ãƒ„ãƒ¼ãƒ«ã®å®Ÿä½“ã‚’å…±æœ‰ã§ãã‚‹<a href="#ç®¡ç†å¯¾è±¡ã®ãƒ„ãƒ¼ãƒ«ã®å®Ÿä½“ã‚’å…±æœ‰ã§ãã‚‹" class="hash-link" aria-label="Direct link to ç®¡ç†å¯¾è±¡ã®ãƒ„ãƒ¼ãƒ«ã®å®Ÿä½“ã‚’å…±æœ‰ã§ãã‚‹" title="Direct link to ç®¡ç†å¯¾è±¡ã®ãƒ„ãƒ¼ãƒ«ã®å®Ÿä½“ã‚’å…±æœ‰ã§ãã‚‹">â€‹</a></h4><p>aqua ã¯ãƒ„ãƒ¼ãƒ«ã®å®Ÿä½“ã‚’ AQUA_ROOT_DIR <code>~/.aqua</code> ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€å…±æœ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
è¤‡æ•°ã®ãƒªãƒã‚¸ãƒˆãƒªã§åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®åŒã˜ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†å ´åˆã«å…±æœ‰ã§ãã‚‹ã®ã§ã€
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã‹ã‹ã‚‹æ™‚é–“ã‚’çŸ­ç¸®ã§ãã¾ã™ã—ã€ç„¡é§„ã«ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã‚’æ¶ˆè²»ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã£ã¦å‹•çš„ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã™ã‚‹ã®ã§ã€å…±æœ‰ã—ã¦ã„ã¦ã‚‚ãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã«ç•°ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><p>å®‰å…¨ã«å…±æœ‰ã§ãã‚‹ã‚ˆã†ã«ãƒ„ãƒ¼ãƒ«ã®å®Ÿä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å…ƒã«ã‚ˆã£ã¦ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‹ã¤ä¸€æ„ã«æ±ºã¾ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“(ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯å¤‰ãˆã‚‰ã‚Œã¾ã™ãŒã€ãƒ«ãƒ¼ãƒˆä»¥ä¸‹ã¯å¤‰ãˆã‚‰ã‚Œã¾ã›ã‚“)ã€‚</p><p>ä¾‹ãˆã° OSX ã§ jq-1.6 ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.aqua/pkgs/github_release/github.com/stedolan/jq/jq-1.6/jq-osx-amd64/jq-osx-amd64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã®ã‚ˆã†ã« GitHub Release ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆ</p><ul><li>ãƒªãƒã‚¸ãƒˆãƒªã®ã‚ªãƒ¼ãƒŠãƒ¼</li><li>ãƒªãƒã‚¸ãƒˆãƒªå</li><li>tag</li><li>GitHub Release ã®ã‚¢ã‚»ãƒƒãƒˆå</li></ul><p>ãªã©ã‹ã‚‰ä¸€æ„ã«æ±ºã¾ã‚‹ãŸã‚ã€ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã§ã¯ jq ã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã—ãŸã‚‚ã®ã‚’ä½¿ã†ã¨ã„ã£ãŸå ´åˆã§ã‚‚å®‰å…¨ã«å…±å­˜ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¾¿åˆ©ãª---only-link-option">ä¾¿åˆ©ãª <code>--only-link</code> option<a href="#ä¾¿åˆ©ãª---only-link-option" class="hash-link" aria-label="Direct link to ä¾¿åˆ©ãª---only-link-option" title="Direct link to ä¾¿åˆ©ãª---only-link-option">â€‹</a></h2><p><code>aqua install</code> ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒ„ãƒ¼ãƒ«ã”ã¨ã«ä»¥ä¸‹ã®ã“ã¨ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p><ol><li><code>.aqua/bin</code> é…ä¸‹ã«ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆ</li><li>ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</li><li>tarball ãªã©ã®å±•é–‹</li><li>~/.aqua é…ä¸‹ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li></ol><p>aqua.yaml ã® packages ã«å¤§é‡ã®ãƒ„ãƒ¼ãƒ«ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã¨ã€
å¤§é‡ã®ãƒ„ãƒ¼ãƒ«ãŒä¸€åº¦ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã€
ä¸¦åˆ—ã§å®Ÿè¡Œã•ã‚Œã‚‹ã¨ã¯ã„ãˆã€éƒ½åˆãŒæ‚ªã„ã“ã¨ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚</p><p><code>--only-link</code> option ã‚’ã¤ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã ã‘ä½œæˆã—ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãªã©ã¯è¡Œã‚ãªã„ã®ã§ç›´ãã«çµ‚ã‚ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ aqua install --only-link</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãã®çŠ¶æ…‹ã§ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ„ãƒ¼ãƒ«ãŒè‡ªå‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã‹ã‚‰å®Ÿè¡Œã•ã‚Œã‚‹ã®ã§
æœ¬å½“ã«å¿…è¦ã«ãªã£ã¦ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚Šã€ä½™è¨ˆãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒç™ºç”Ÿã—ãªã„ã®ã§ä¾¿åˆ©ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã®è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‹•çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆã®ä»•çµ„ã¿">ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã®è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€å‹•çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆã®ä»•çµ„ã¿<a href="#ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã®è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‹•çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆã®ä»•çµ„ã¿" class="hash-link" aria-label="Direct link to ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã®è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€å‹•çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆã®ä»•çµ„ã¿" title="Direct link to ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã®è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€å‹•çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆã®ä»•çµ„ã¿">â€‹</a></h2><p>aqua ã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã™ã‚‹ã¨ <code>aqua install</code> å®Ÿè¡Œã‚’ã—ãªãã¦ã‚‚æ›´æ–°ãŒåæ˜ ã•ã‚Œã‚‹ã€
ãƒ„ãƒ¼ãƒ«ãŒã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªãã¦ã‚‚ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã¨ã„ã†æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚</p><p>tfenv ã‚‚ .terraform-version ã‚’æ›´æ–°ã™ã‚Œã°ã™ãåæ˜ ã•ã‚Œã¾ã™ã—ã€
terraform ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œæ™‚ã«ã¾ã æŒ‡å®šã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ãªã‹ã£ãŸã‚‰è‡ªå‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ãŒã€ãã‚Œã«ä¼¼ã¦ã„ã¾ã™ã­
(ãŸã ã— tfenv ã®æ©Ÿèƒ½ãŒã©ã†å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹ã¯èª¿ã¹ã¦ã¾ã›ã‚“ã—ã€ aqua ã‚’å®Ÿè£…ã™ã‚‹ä¸Šã§å‚è€ƒã«ã—ãŸã‚Šã¯ã—ã¦ã„ã¾ã›ã‚“)ã€‚</p><p>ä¸Šè¨˜ã®æ©Ÿèƒ½ãŒ aqua ã§ã©ã†å®Ÿç¾ã•ã‚Œã¦ã„ã‚‹ã‹ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚</p><p>ä¾‹ãˆã° aqua ã§ jq ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ <code>jq -h</code> ã‚’å®Ÿè¡Œã—ãŸã¨ã—ã¾ã—ã‚‡ã†ã€‚
jq ã‚’å®Ÿè¡Œã™ã‚‹ã¨ aqua-proxy ã‚’çµŒç”±ã—ã¦ <code>aqua exec -- jq -h</code> ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
ã“ã®è¾ºã®è©³ç´°ã¯ <a href="#aqua-proxy-%E3%81%A8%E3%81%AF">aqua-proxy ã¨ã¯</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
<code>aqua exec</code> ã¯ aqua ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§æŒ‡å®šã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€ã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ã‚³ãƒãƒ³ãƒ‰ <code>jq -h</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aqua-proxy-ã¨ã¯">aqua-proxy ã¨ã¯<a href="#aqua-proxy-ã¨ã¯" class="hash-link" aria-label="Direct link to aqua-proxy ã¨ã¯" title="Direct link to aqua-proxy ã¨ã¯">â€‹</a></h2><p><a href="https://github.com/suzuki-shunsuke/aqua-proxy" target="_blank" rel="noopener noreferrer">aqua-proxy</a> ã¯ aqua ãŒå†…éƒ¨çš„ã«ä¾å­˜ã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã« aqua åŠã³ aqua ã§ç®¡ç†ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å‹•çš„ã«å¤‰æ›´ã™ã‚‹ãŸã‚ã«ä½œã‚‰ã‚Œã¾ã—ãŸã€‚
aqua ã®ãŸã‚ã«é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€ aqua ä»¥å¤–ã§ä½¿ã‚ã‚Œã‚‹ã“ã¨ã¯æƒ³å®šã—ã¦ã„ã¾ã›ã‚“ã€‚</p><p>aqua-proxy ã¯ <code>aqua install</code> ã‚„ <code>aqua exec</code> ã‚’å®Ÿè¡Œã—ãŸéš›ã«è‡ªå‹•ã§ <code>~/.aqua/bin/aqua-proxy</code> ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚
aqua ã¯ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹éš›ã« <code>.aqua/bin/&lt;ãƒ„ãƒ¼ãƒ«&gt;</code> ã‹ã‚‰ <code>~/.aqua/bin/aqua-proxy</code> ã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆã™ã‚‹ã®ã§ã€ <code>&lt;ãƒ„ãƒ¼ãƒ«&gt;</code> ã‚’å®Ÿè¡Œã™ã‚‹ã¨ <code>~/.aqua/bin/aqua-proxy</code> ãŒå‘¼ã°ã‚Œã¾ã™ã€‚</p><p>aqua-proxy ã¯ <a href="https://pkg.go.dev/os#Args" target="_blank" rel="noopener noreferrer">os#Args</a> ã‹ã‚‰ãƒ„ãƒ¼ãƒ«åã‚’å–å¾—ã—ã€
<code>aqua exec -- &lt;ãƒ„ãƒ¼ãƒ«å&gt; ...</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã« aqua åŠã³ <code>&lt;ãƒ„ãƒ¼ãƒ«&gt;</code> ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å‹•çš„ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚</p><p><code>.aqua/bin/&lt;ãƒ„ãƒ¼ãƒ«&gt;</code> ã‹ã‚‰ aqua-proxy ã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã¯é™çš„ã§ã‚ã‚Šã€ aqua-proxy ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ã¯é›£ã—ã„ã§ã™ã€‚
aqua-proxy ã®æ©Ÿèƒ½ãƒ»è²¬å‹™ãŒå¤§ãããªã‚‹ã¨ aqua-proxy ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚„ aqua ã¨ã®äº’æ›æ€§ã‚’è€ƒãˆãªãã¦ã¯ãªã‚‰ãªããªã‚Šã¾ã™ã€‚
aqua-proxy ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã»ã¼æ°—ã«ã—ãªãã¦è‰¯ã„ã‚ˆã†ã€ aqua-proxy ã¯æœ€å°é™ã®æ©Ÿèƒ½ãƒ»è²¬å‹™ã—ã‹æŒãŸãšã€å®‰å®šçš„ã§ã‚ã¾ã‚Šå¤‰æ›´ã•ã‚Œãªã„ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ—ãƒ­ã‚»ã‚¹ãƒ„ãƒªãƒ¼ã‚’ç¢ºèªã—ã¦ã¿ã‚‹">ãƒ—ãƒ­ã‚»ã‚¹ãƒ„ãƒªãƒ¼ã‚’ç¢ºèªã—ã¦ã¿ã‚‹<a href="#ãƒ—ãƒ­ã‚»ã‚¹ãƒ„ãƒªãƒ¼ã‚’ç¢ºèªã—ã¦ã¿ã‚‹" class="hash-link" aria-label="Direct link to ãƒ—ãƒ­ã‚»ã‚¹ãƒ„ãƒªãƒ¼ã‚’ç¢ºèªã—ã¦ã¿ã‚‹" title="Direct link to ãƒ—ãƒ­ã‚»ã‚¹ãƒ„ãƒªãƒ¼ã‚’ç¢ºèªã—ã¦ã¿ã‚‹">â€‹</a></h2><p>æ—¢ã«èª¬æ˜ã—ãŸã¨ãŠã‚Š <code>&lt;ãƒ„ãƒ¼ãƒ«&gt;</code> ã‚’å®Ÿè¡Œã—ãŸéš›ã«ã¯å®Ÿã¯ãƒ—ãƒ­ã‚»ã‚¹ãƒ„ãƒªãƒ¼çš„ã«ã¯
<code>aqua-proxy =&gt; aqua =&gt; &lt;ãƒ„ãƒ¼ãƒ«&gt;</code> ã¨ã„ã†é¢¨ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><p><code>&lt;ãƒ„ãƒ¼ãƒ«&gt;</code> ã‚’ç›´æ¥å®Ÿè¡Œã—ãŸå ´åˆã¨æŒ™å‹•ã«é•ã„ãŒå‡ºãªã„ã‚ˆã†ã«ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ã«æ°—ã‚’é…ã£ã¦ã„ã¾ã™ã€‚</p><ul><li>SIGINT, SIGTERM ãªã©ã®ã‚·ã‚°ãƒŠãƒ«ãŒé©åˆ‡ã« <code>&lt;ãƒ„ãƒ¼ãƒ«&gt;</code> ã®ãƒ—ãƒ­ã‚»ã‚¹ã¾ã§ä¼é”ã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹</li><li><code>&lt;ãƒ„ãƒ¼ãƒ«&gt;</code> ã® exit code ãŒä¼é”ã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹</li></ul><p>è©¦ã—ã« fzf ã‚’å®Ÿè¡Œã—ã¦ã¿ã¦åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒ—ãƒ­ã‚»ã‚¹ãƒ„ãƒªãƒ¼ã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ls | fzf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>fzf ãŒèµ·å‹•ã—ã¾ã™ãŒã€ãã®ã¾ã¾ã«ã—ã¦ãŠã„ã¦åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒ—ãƒ­ã‚»ã‚¹ãƒ„ãƒªãƒ¼ã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚
Mac ã® <code>pstree</code> ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-+- 83548 foo fzf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \-+- 83549 foo aqua exec -- fzf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   \--- 83550 foo /Users/foo/.aqua/pkgs/github_release/github.com/junegunn/fzf/0.27.2/fzf-0.27.2-darwin_amd64.zip/fzf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç´›ã‚‰ã‚ã—ã„ã®ã§ã™ãŒã€æœ€åˆã®ãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿä½“ã¯ fzf ã§ã¯ãªãã¦ aqua-proxy ã§ã™ã€‚ fzf ãŒ aqua-proxy ã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ã«ãªã£ã¦ã„ã‚‹ã®ã§ã“ã†ãªã£ã¦ã„ã¾ã™ã€‚
ã“ã“ã§ aqua-proxy ã« SIGTERM ã‚’é€ã‚‹ã¨æ‰‹å…ƒã® Mac ã§ã¯ã¡ã‚ƒã‚“ã¨å­ãƒ—ãƒ­ã‚»ã‚¹ã¾ã§çµ‚äº†ã—ã¾ã—ãŸã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kill 83548</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã®è¾ºã®ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯ Windows ã ã¨æ­£å¸¸ã«å‹•ã‹ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p><a href="https://pkg.go.dev/os#Signal" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/os#Signal</a></p><blockquote><p>The only signal values guaranteed to be present in the os package on all systems are os.Interrupt (send the process an interrupt) and os.Kill (force the process to exit).
On Windows, sending os.Interrupt to a process with os.Process.Signal is not implemented;
it will return an error instead of sending a signal.</p></blockquote>]]></content:encoded>
            <category>oss</category>
            <category>aqua</category>
        </item>
        <item>
            <title><![CDATA[AWS CodeBuild ã‚’å®Ÿè¡Œã™ã‚‹ Github App ã‚’ä½œã‚‹]]></title>
            <link>https://techblog.szksh.cloud/github-app-for-codebuild</link>
            <guid>https://techblog.szksh.cloud/github-app-for-codebuild</guid>
            <pubDate>Mon, 16 Aug 2021 00:10:51 GMT</pubDate>
            <description><![CDATA[GitHub Repository ã® CI ã« CodeBuild ã‚’ä½¿ã†å ´åˆã€ CodeBuild ã® Webhook integration (ä»¥ä¸‹ CodeBuild GitHub integration ã¨å‘¼ã¶ã“ã¨ã«ã—ã¾ã™) ã‚’ä½¿ã†ã®ãŒä¸€ç•ªè‡ªç„¶ã§ã—ã‚‡ã†ã€‚]]></description>
            <content:encoded><![CDATA[<p>GitHub Repository ã® CI ã« CodeBuild ã‚’ä½¿ã†å ´åˆã€ <a href="https://docs.aws.amazon.com/codebuild/latest/userguide/github-webhook.html" target="_blank" rel="noopener noreferrer">CodeBuild ã® Webhook integration</a> (ä»¥ä¸‹ <code>CodeBuild GitHub integration</code> ã¨å‘¼ã¶ã“ã¨ã«ã—ã¾ã™) ã‚’ä½¿ã†ã®ãŒä¸€ç•ªè‡ªç„¶ã§ã—ã‚‡ã†ã€‚
åŸºæœ¬çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãªã‚‰ã“ã‚Œã§ã‚ˆã„ã®ã§ã™ãŒã€ GitHub App ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã‚ˆã‚Šé«˜åº¦ãª CI ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è§£æ±ºã—ãŸã„èª²é¡Œ">è§£æ±ºã—ãŸã„èª²é¡Œ<a href="#è§£æ±ºã—ãŸã„èª²é¡Œ" class="hash-link" aria-label="Direct link to è§£æ±ºã—ãŸã„èª²é¡Œ" title="Direct link to è§£æ±ºã—ãŸã„èª²é¡Œ">â€‹</a></h2><ul><li>Batch Build ã®èª²é¡Œ<ul><li>èµ·å‹•ãƒ»çµ‚äº†ãŒé…ã„</li><li>å…¨ build ãŒæˆåŠŸã—ãŸ Batch Build ã‚’ Retry ã§ããªã„</li><li>Web UI ãŒã‚ã‹ã‚Šã«ãã„<ul><li>ä½™è¨ˆãª build ãŒèµ·å‹•ã™ã‚‹</li><li>build å˜ä½“ã‚’ Retry ã§ããªã„</li></ul></li><li>build ã”ã¨ã«æ¡ä»¶è¨­å®šã¨ã‹ã§ããªã„</li><li>buildspec ã‚’å‹•çš„ã«ç”Ÿæˆã§ããªã„</li></ul></li><li><code>CodeBuild GitHub integration</code> ã®èª²é¡Œ<ul><li>Build Project ã”ã¨ã« Repository Webhook ãŒ 1 ã¤ä½œã‚‰ã‚Œã‚‹<ul><li><a href="https://docs.github.com/en/developers/webhooks-and-events/webhooks/about-webhooks" target="_blank" rel="noopener noreferrer">webhook 1 repository ã‚ãŸã‚Š 20 å€‹ã¾ã§ã—ã‹ä½œã‚Œãªã„</a></li><li>(ã“ã‚Œã‚’è£ä»˜ã‘ã‚‹å®¢è¦³çš„ãªã‚½ãƒ¼ã‚¹ã¯ãªã„ã§ã™ãŒ) webhook ã®æ•°ãŒå¢—ãˆã‚‹ã¨ build ã®å‹•ä½œãŒä¸å®‰å®šã«ãªã‚‹ã®ã‚’è¦³æ¸¬ã—ã¦ã„ã¾ã™</li></ul></li><li>Filter ã®æ¡ä»¶ãŒé™ã‚‰ã‚Œã¦ã„ã‚‹(ä¾‹ãˆã° PR label ã§ filter ã¨ã‹ã§ããªã„)</li><li>è¤‡æ•°ã® build ã‚’å®Ÿè¡Œã§ããªã„(Batch Build ã‚‚ 1 ã¤ã¨ã¿ãªã—ãŸå ´åˆã®è©±)</li></ul></li><li>CodeBuild ã®èª²é¡Œ<ul><li>Retry ã—ãŸå ´åˆ webhook ã§èµ·å‹•ã—ãŸã¨ãã®ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œãªã„</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-app">GitHub App<a href="#github-app" class="hash-link" aria-label="Direct link to GitHub App" title="Direct link to GitHub App">â€‹</a></h2><p>Amazon API Gateway ã¨ Lambda ã‚’ä½¿ã£ã¦ GitHub App ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
Lambda ã§ webhook ã‚’å—ã‘å–ã‚Šã€ AWS SDK ã‚’ä½¿ã£ã¦ build ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/13323303/129534257-391da6ac-9690-46df-b6df-53605d3c0c6a.png" alt="codebuilder-architecture" class="img_ev3q"></p><p>GitHub App ã‚’ä½œæˆã—ã€ Webhook URL ã¨ã—ã¦ API Gateway ã® endpoint ã‚’æŒ‡å®šã—ã¾ã™ã€‚
internet facing ãª API Gateway ã¯ Repository ã”ã¨ã«ä½œã‚‹ã®ã§ã¯ãªãã€å…±æœ‰ã§ 1 ã¤ä½œã‚‹ã‚ˆã†ã«ã—ãŸã»ã†ãŒè‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚
Lambda ã¯ Repository ã”ã¨ã«åˆ†ã‘ãŸã»ã†ãŒæ¨©é™ã‚’çµã‚Œã‚‹ã—ã€ Function ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚‹ã—ã€ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®ãŸã‚ã®å¤‰æ›´ãŒä»–ã®ãƒªãƒã‚¸ãƒˆãƒªã«å½±éŸ¿ã™ã‚‹ã“ã¨ãŒãªã„ã®ã§è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><p>Batch Build ã‚’ä½¿ã†ä»£ã‚ã‚Šã« Build ã‚’è¤‡æ•°ä¸¦åˆ—ã§èµ·å‹•ã™ã‚‹ã“ã¨ã§ã€ Batch Build ã®èª²é¡Œã‚’è§£æ±ºã§ãã¾ã™ã€‚
å®Ÿè¡Œæ™‚ã«<a href="https://docs.aws.amazon.com/sdk-for-go/api/service/codebuild/#CodeBuild.StartBuildWithContext" target="_blank" rel="noopener noreferrer">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</a>ã‚’å¤‰ãˆã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
Webhook ã® Payload ã‚‚å‚ç…§ã§ãã‚‹ã®ã§ã€ Payload ã‹ã‚‰å¾—ãŸãƒ‡ãƒ¼ã‚¿(PR ç•ªå·ã€ labelã€PR Author åã€ etc)ã‚’ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ build ã«ã‚ãŸã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><p>å¾“æ¥ã¯ build å†…ã§ GitHub API ã‚’ä½¿ã£ã¦å–å¾—ã—ã¦ã„ãŸ PR ã®æƒ…å ±ã‚’ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦æ¸¡ã›ã‚‹ã“ã¨ã§
build ã®å‡¦ç†ãŒç°¡ç•¥åŒ–ã•ã‚Œã¾ã™ã—ã€ GitHub API ã® call æ•°ã‚’æ¸›ã‚‰ã™ã“ã¨ã‚‚ã§ãã¾ã™(ã“ã‚Œã¯ API ã® rate limit ãŒå•é¡Œã«ãªã‚‹å ´åˆã«é‡è¦ã§ã™)ã€‚</p><p>PR label ã«ã‚ˆã‚‹ build ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãªã©ã€ <code>CodeBuild GitHub integration</code> ã§ã¯é›£ã—ã„ã‚ˆã‚Šè¤‡é›‘ãª filter ã‚‚å®Ÿç¾ã§ãã¾ã™ã€‚</p><p>GitHub App ã§ã‚ã‚Œã° Repository Webhook ãŒä½œã‚‰ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã›ã‚“ã—ã€ Build Project ã”ã¨ã« webhook ã®è¨­å®šã‚’ã™ã‚‹å¿…è¦ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>Assume Role ã™ã‚‹ã“ã¨ã§åˆ¥ã® AWS Account ã® Build Project ã® build ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="merged-event-ã§-merged-commit-sha-ã§-build-ã‚’å®Ÿè¡Œ">merged event ã§ merged commit sha ã§ build ã‚’å®Ÿè¡Œ<a href="#merged-event-ã§-merged-commit-sha-ã§-build-ã‚’å®Ÿè¡Œ" class="hash-link" aria-label="Direct link to merged event ã§ merged commit sha ã§ build ã‚’å®Ÿè¡Œ" title="Direct link to merged event ã§ merged commit sha ã§ build ã‚’å®Ÿè¡Œ">â€‹</a></h2><p>PR ãŒãƒãƒ¼ã‚¸ã•ã‚ŒãŸã‚‰ merged commit ã® SHA ã§ CI ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆã€ push event ã‚’ hook ã™ã‚‹ã®ãŒãŠãã‚‰ãä¸€èˆ¬çš„ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p><code>CodeBuild GitHub integration</code> ã§ã¯ <code>merged</code> event ã‚’ hook ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€
ã“ã®å ´åˆ PR ã® head branch ã® SHA ã§ build ãŒå®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã—ã€ base branch ã® commit status ãŒæ›´æ–°ã•ã‚Œã¾ã›ã‚“ã€‚</p><p>ã—ã‹ã— <code>push</code> event ã§ã¯é–¢é€£ã™ã‚‹ PR ã®æƒ…å ±ãŒå–ã‚Œãªã„(build ã®ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ PR ã®æƒ…å ±ãŒæ¸¡ã•ã‚Œãªã„)ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚
<a href="https://docs.github.com/en/rest/reference/repos#list-pull-requests-associated-with-a-commit" target="_blank" rel="noopener noreferrer">GitHub API ã§ã‚³ãƒŸãƒƒãƒˆã¨é–¢é€£ã—ãŸ PR ã®ä¸€è¦§ãŒå–ã‚Œã¾ã™</a>ãŒã€è¤‡æ•°ã® PR ã¨é–¢é€£ã¥ã„ã¦ã„ã‚‹å ´åˆã€ã©ã® PR ãªã®ã‹ç‰¹å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“(ç‰¹å®šã®æ¡ä»¶ä»˜ãã§ã‚ã‚Œã°ã§ãã¾ã™ãŒ)ã€‚</p><p>ãã“ã§ GitHub App ã§ <code>merged</code> event (æ­£ç¢ºã«ã¯ <code>closed</code> event ã§ PR ãŒãƒãƒ¼ã‚¸æ¸ˆã®å ´åˆ) ã‚’ hook ã—ã¤ã¤ã€
build èµ·å‹•æ™‚ã« source version ã¨ã—ã¦ merged commit sha ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§
webhook ã‹ã‚‰ PR ã®æƒ…å ±ã‚’å–å¾—ã—ã¤ã¤ merged commit ã® SHA ã§ CI ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-ã®-personal-access-token-ã®ä»£ã‚ã‚Šã«-github-app-installation-access-token-ã‚’ä½¿ã†">GitHub ã® Personal Access Token ã®ä»£ã‚ã‚Šã« GitHub App installation access token ã‚’ä½¿ã†<a href="#github-ã®-personal-access-token-ã®ä»£ã‚ã‚Šã«-github-app-installation-access-token-ã‚’ä½¿ã†" class="hash-link" aria-label="Direct link to GitHub ã® Personal Access Token ã®ä»£ã‚ã‚Šã« GitHub App installation access token ã‚’ä½¿ã†" title="Direct link to GitHub ã® Personal Access Token ã®ä»£ã‚ã‚Šã« GitHub App installation access token ã‚’ä½¿ã†">â€‹</a></h2><p>CodeBuild ã® build å†…ã§ GitHub API ã‚’ä½¿ã„ãŸã„å ´åˆã€ Personal Access Token ã‚’ç™ºè¡Œã™ã‚‹ã®ãŒã‚·ãƒ³ãƒ—ãƒ«ã§ã™ãŒã€ Personal Access Token ã«ã¯ã„ãã¤ã‹èª²é¡ŒãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>token æµå‡ºã®ãƒªã‚¹ã‚¯<ul><li>rotation ãŒé›£ã—ã„ã®ã§æœ‰åŠ¹æœŸé™ãŒè¨­å®šã•ã‚Œã¦ãªã„å ´åˆãŒå¤šã„</li></ul></li><li>rate limit<ul><li>token ãŒ organization ã§åºƒãå…±æœ‰ã•ã‚ŒãŸã‚Šã™ã‚‹ã‚ˆã†ã«ãªã‚‹ã¨å•é¡Œã«ãªã‚Šã‚„ã™ã„</li><li>rate limit ã¯ account å˜ä½ãªã®ã§ã€åŒã˜ account ã® token ã‚’åˆ¥ã«ä½œã£ã¦ã‚‚æ„å‘³ãŒãªã„</li><li>account ã‚’å¢—ã‚„ã—ã¦ org ã«è¿½åŠ ã™ã‚‹ã¨ã€ org ã®ãƒ¡ãƒ³ãƒãƒ¼ãŒå¢—ãˆã‚‹ã®ã§ãŠé‡‘ãŒã‹ã‹ã‚‹(ã¾ãé‡‘é¡çš„ã«ç„¡è¦–ã—ã¦ã‚‚ã‚ˆã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒ)</li></ul></li></ul><p>GitHub App ã§ã¯ rotation ãªã©ã‚’è€ƒãˆãªãã¦ã‚‚ä¸€æ™‚çš„ãª token ã‚’ç™ºè¡Œã§ãã‚‹ã®ã§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çš„ã«ãƒªã‚¹ã‚¯ãŒä½ã„ã§ã™ã—ã€
GitHub App ã‚’ä½œã£ã¦ã‚‚ãŠé‡‘ã¯ã‹ã‹ã‚Šã¾ã›ã‚“ã€‚
token ã‚’ç™ºè¡Œã™ã‚‹ã«ã¯</p><ul><li>App ID</li><li>Installation ID (webhook ã® payload ã«å«ã¾ã‚Œã¦ã„ã‚‹)</li><li>Private key</li></ul><p>ãŒå¿…è¦ã§ã€ build å®Ÿè¡Œæ™‚ã« installation id ã‚’ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦æ¸¡ã™ã“ã¨ã§ Lambda ã ã‘ã§ãªã Codebuild ã§ã‚‚ installation access token ãŒä½¿ãˆã¾ã™ã€‚</p><p>ã‚‚ã¡ã‚ã‚“ GitHub App ã‚’ä½¿ã£ã¦ã‚‚ rate limit ã«å¼•ã£ã‹ã‹ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ãŒã€ Personal Access Token ã«æ¯”ã¹ã¦å›é¿ã—ã‚„ã™ã„ã‹ã¨ã¯æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lambda-ã‹ã‚‰-repository-ã®ã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§ã™ã‚‹">Lambda ã‹ã‚‰ Repository ã®ã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§ã™ã‚‹<a href="#lambda-ã‹ã‚‰-repository-ã®ã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§ã™ã‚‹" class="hash-link" aria-label="Direct link to Lambda ã‹ã‚‰ Repository ã®ã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§ã™ã‚‹" title="Direct link to Lambda ã‹ã‚‰ Repository ã®ã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§ã™ã‚‹">â€‹</a></h2><p><a href="https://blog.studysapuri.jp/entry/2020/12/03/080000" target="_blank" rel="noopener noreferrer">https://blog.studysapuri.jp/entry/2020/12/03/080000</a> ã§ã¯ CodeBuild ã§ãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒ¼ãƒ‰ã‚’ checkout ã—ã€
build ã®ä¸­ã§å‹•çš„ã« buildspec ã‚’ç”Ÿæˆã—ã¦ batch build ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚</p><p>åŒã˜ã‚ˆã†ãªã“ã¨ã‚’ Lambda ã§ã‚„ã‚ã†ã¨ã—ãŸå ´åˆã€è‰²ã€…åˆ¶ç´„ãŒã‚ã‚Šã¾ã™ã€‚
Lambda ã§ã¯ãƒªãƒã‚¸ãƒˆãƒªã‚’ checkout ã—ã¦ãã‚‹ä»£ã‚ã‚Šã«ã€ build ã‚’å®Ÿè¡Œã™ã‚‹ã®ã«å¿…è¦ãªæƒ…å ±ã‚’é™çš„ã«ç”Ÿæˆã—ã¦ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ã¦ãŠããã‚Œã‚’ GitHub API ã§å–å¾—ã™ã‚‹ã¨ã„ã†ã‚„ã‚Šæ–¹ãŒã‚ã‚Šã¾ã™ã€‚
ãã®å ´åˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒªãƒã‚¸ãƒˆãƒªã«ç”¨æ„ã—ã¦ãŠãã€ ã¡ã‚ƒã‚“ã¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒæœ€æ–°ã«ãªã£ã¦ã„ã‚‹ã‹ CI ã®ä¸­ã§ãƒã‚§ãƒƒã‚¯ã—ã€
ãªã£ã¦ã„ãªã‘ã‚Œã° CI ã‚’ fail ã•ã›ã‚‹ã‹è‡ªå‹•ã§æ›´æ–°ã—ã¦ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã¨ã„ã†ã®ã‚’ã‚„ã‚‹ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚
Git ã® pre-push hook ãªã©ã§ check ã™ã‚‹ã®ã‚‚ã‚ã‚Šã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-app-ã®é–‹ç™ºã‚’ã„ã‹ã«æ¥½ã«ã™ã‚‹ã‹">GitHub App ã®é–‹ç™ºã‚’ã„ã‹ã«æ¥½ã«ã™ã‚‹ã‹<a href="#github-app-ã®é–‹ç™ºã‚’ã„ã‹ã«æ¥½ã«ã™ã‚‹ã‹" class="hash-link" aria-label="Direct link to GitHub App ã®é–‹ç™ºã‚’ã„ã‹ã«æ¥½ã«ã™ã‚‹ã‹" title="Direct link to GitHub App ã®é–‹ç™ºã‚’ã„ã‹ã«æ¥½ã«ã™ã‚‹ã‹">â€‹</a></h2><p>ã‚ˆã†ã¯ webhook ã‚’å—ã‘å–ã£ã¦ build ã‚’å®Ÿè¡Œã™ã‚‹ Lambda Function ã‚’å®Ÿè£…ã™ã‚Œã°ã„ã„ã ã‘ãªã®ã§ã™ãŒã€
æ¯å› 0 ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã®ã¯ã¡ã‚‡ã£ã¨ã—ãŸæ‰‹é–“ãªã®ã§ã€ Go ã®ç°¡å˜ãª library ã‚’ä½œã£ã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-github-app-for-aws-codebuild" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-github-app-for-aws-codebuild</a></p><p>ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè‡ªä½“ã¯å¤§ã—ãŸã‚‚ã®ã§ã¯ãªã„ã®ã§ã€çš†ã•ã‚“ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚„è¨€èªã«åˆã‚ã›ã¦ç‹¬è‡ªã«ä½œã£ã¦ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚µãƒ³ãƒ—ãƒ«">ã‚µãƒ³ãƒ—ãƒ«<a href="#ã‚µãƒ³ãƒ—ãƒ«" class="hash-link" aria-label="Direct link to ã‚µãƒ³ãƒ—ãƒ«" title="Direct link to ã‚µãƒ³ãƒ—ãƒ«">â€‹</a></h2><p>ç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ã‚‚æ›¸ã„ã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example-github-app-for-aws-codebuild" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-github-app-for-aws-codebuild</a></p>]]></content:encoded>
            <category>aws</category>
            <category>codebuild</category>
            <category>github-app</category>
        </item>
        <item>
            <title><![CDATA[2021-07 ã‚„ã£ãŸã“ã¨]]></title>
            <link>https://techblog.szksh.cloud/what-i-did-2021-07</link>
            <guid>https://techblog.szksh.cloud/what-i-did-2021-07</guid>
            <pubDate>Tue, 27 Jul 2021 21:58:45 GMT</pubDate>
            <description><![CDATA[ä»Šã¾ã§ä»•äº‹ã«é™å®šã—ã¦æ›¸ã„ã¦ãã¾ã—ãŸãŒã€ OSS æ´»å‹•ãªã‚“ã‹ã«ã‚‚è§¦ã‚Œã¦ã‚‚ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã£ãŸã®ã§åˆ†ã‹ã‚‹ç¯„å›²ã§æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>ä»Šã¾ã§ä»•äº‹ã«é™å®šã—ã¦æ›¸ã„ã¦ãã¾ã—ãŸãŒã€ OSS æ´»å‹•ãªã‚“ã‹ã«ã‚‚è§¦ã‚Œã¦ã‚‚ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã£ãŸã®ã§åˆ†ã‹ã‚‹ç¯„å›²ã§æ›¸ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹">ä»•äº‹<a href="#ä»•äº‹" class="hash-link" aria-label="Direct link to ä»•äº‹" title="Direct link to ä»•äº‹">â€‹</a></h2><ul><li>Docker Image ã‚’ Docker Hub ã‹ã‚‰ ECR ã¸ç§»è¡Œ</li><li>Terraform<ul><li>.terraform.lock.hcl ã‚’ CI ã®ä¸­ã§è‡ªå‹•ã§æ›´æ–°(commit, push)ã§ãã‚‹ã‚ˆã†ã«ã—ãŸ<ul><li>Terraform ã«è©³ã—ããªã„äººã‚‚ä½¿ã†ã®ã§ã€è‡ªå‹•åŒ–ã—ãŸã»ã†ãŒè‰¯ã„ã¨åˆ¤æ–­</li></ul></li><li><a href="https://github.com/minamijoyo/tfmigrate" target="_blank" rel="noopener noreferrer">tfmigrate</a> ã‚’ CI ã«å°å…¥</li><li>(in progress) Terraform Modules ã‚’ Terraform ã® Monorepo ã¨ã¯åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ versioning ã™ã‚‹ã‚ˆã†ã«ã—ãŸ</li><li>Route53 ã®ç®¡ç†ã‚’ <a href="https://github.com/codenize-tools/roadworker" target="_blank" rel="noopener noreferrer">Roadworker</a> ã‹ã‚‰ Terraform ã¸ç§»è¡Œ</li><li>tfmigrate ã‚’ä½¿ã£ãŸãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="event">Event<a href="#event" class="hash-link" aria-label="Direct link to Event" title="Direct link to Event">â€‹</a></h2><ul><li><a href="https://mercari.connpass.com/event/211073/" target="_blank" rel="noopener noreferrer">Open Policy Agent Rego Knowledge Sharing Meetup</a> ã§ç™»å£‡<ul><li><a href="https://gist.github.com/suzuki-shunsuke/9372337aa62a6f8394bb136582ec068e" target="_blank" rel="noopener noreferrer">https://gist.github.com/suzuki-shunsuke/9372337aa62a6f8394bb136582ec068e</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oss-contribution">OSS Contribution<a href="#oss-contribution" class="hash-link" aria-label="Direct link to OSS Contribution" title="Direct link to OSS Contribution">â€‹</a></h2><p>AWS AppConfig ã‚’ Terraform ã§ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ PR ãŒç„¡äº‹ãƒãƒ¼ã‚¸ã•ã‚Œã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/hashicorp/terraform-provider-aws/pull/20172" target="_blank" rel="noopener noreferrer">feat: add aws_appconfig_deployment</a></li><li><a href="https://github.com/hashicorp/terraform-provider-aws/pull/20176" target="_blank" rel="noopener noreferrer">fix: add the attribute "environment_id" to aws_appconfig_environment</a></li><li><a href="https://github.com/hashicorp/terraform-provider-aws/pull/19359" target="_blank" rel="noopener noreferrer">feat: support AppConfig Deployment Strategy</a></li><li><a href="https://github.com/hashicorp/terraform-provider-aws/pull/19324" target="_blank" rel="noopener noreferrer">feat: support AppConfig Hosted Configuration Version</a></li><li><a href="https://github.com/hashicorp/terraform-provider-aws/pull/19320" target="_blank" rel="noopener noreferrer">feat: add appconfig_configuration_profile</a></li><li><a href="https://github.com/hashicorp/terraform-provider-aws/pull/19307" target="_blank" rel="noopener noreferrer">feat: add aws_appconfig_application and aws_appconfig_environment</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°ãŸã«ä½œã£ãŸ-oss">æ–°ãŸã«ä½œã£ãŸ OSS<a href="#æ–°ãŸã«ä½œã£ãŸ-oss" class="hash-link" aria-label="Direct link to æ–°ãŸã«ä½œã£ãŸ OSS" title="Direct link to æ–°ãŸã«ä½œã£ãŸ OSS">â€‹</a></h2><ul><li><a href="https://github.com/tfmigrator/cli" target="_blank" rel="noopener noreferrer">tfmigrator/cli</a>: CLI to Migrate Terraform Configuration and State with terraform state command and hcledit</li><li><a href="https://github.com/suzuki-shunsuke/renovate-github-tags-datasource-repositories" target="_blank" rel="noopener noreferrer">Renovate github-tags Datasource Repositories</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tfmigrator">tfmigrator<a href="#tfmigrator" class="hash-link" aria-label="Direct link to tfmigrator" title="Direct link to tfmigrator">â€‹</a></h3><p>Terraform Configuration ã¨ State ã‚’ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ tfmigrator ã® CLI ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚
tfmigrator ã«ã¯ç´†ä½™æ›²æŠ˜æœ‰ã‚Š(?)ã€æ™‚ç³»åˆ—çš„ã«</p><ul><li><a href="https://github.com/suzuki-shunsuke/tfmigrator" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/tfmigrator</a> ã‚’é–‹ç™ºã€‚ CLI</li><li>YAML ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è¡¨ç¾åŠ›ã«é™ç•Œã‚’æ„Ÿã˜ã€ suzuki-shunsuke/tfmigrator ã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¦ Go ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª <a href="https://github.com/tfmigrator/tfmigrator" target="_blank" rel="noopener noreferrer">tfmigrator/tfmigrator</a> ã‚’é–‹ç™º<ul><li>ç°¡å˜ã« CLI ã‚’å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã« API ã‚‚æä¾›</li><li>ã¤ã„ã§ã«è‰²ã€…æ”¹è‰¯<ul><li><a href="https://github.com/minamijoyo/hcledit" target="_blank" rel="noopener noreferrer">hcledit</a> ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒä¸è¦</li><li>ãƒ•ã‚¡ã‚¤ãƒ«ã® in place ã®æ›´æ–°ã‚’ã‚µãƒãƒ¼ãƒˆ</li><li>dry run ã®ã‚µãƒãƒ¼ãƒˆ</li><li>è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã¾ã¨ã‚ã¦æ‰±ãˆã‚‹ã‚ˆã†ãª API ã‚‚æä¾› <a href="https://pkg.go.dev/github.com/tfmigrator/tfmigrator@v0.5.1/tfmigrator#QuickRunBatch" target="_blank" rel="noopener noreferrer">QuickRunBatch</a></li><li>etc</li></ul></li></ul></li><li>å®Ÿéš›ã« tfmigrator/tfmigrator ã‚’ä½¿ã£ã¦ã¿ã‚‹ã¨ Go ã‚’æ›¸ãã®ãŒã¡ã‚‡ã£ã¨é¢å€’ãã•ã„<ul><li>ãã‚‚ãã‚‚è¤‡é›‘ãª rule ã‚’ä¸€åº¦ã«é©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã®ãŒé–“é•ã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ãŸ</li></ul></li><li>tfmigrator/tfmigrator ã‚’ä½¿ã„ã€ CLI ã‚‚å®Ÿè£… tfmigrator/cli<ul><li>ã‚„ã¯ã‚ŠåŸºæœ¬çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã¯ YAML æ›¸ãã»ã†ãŒæ¥½</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="renovate-github-tags-datasource-repositories">Renovate github-tags Datasource Repositories<a href="#renovate-github-tags-datasource-repositories" class="hash-link" aria-label="Direct link to Renovate github-tags Datasource Repositories" title="Direct link to Renovate github-tags Datasource Repositories">â€‹</a></h3><p>Renovate ã® Datasource ã‚„ Manager ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ package ã‚’ Renovate ã§ update ã™ã‚‹ãŸã‚ã«ã€
package ã‚ˆã†ã« GitHub Repository ã‚’ä½œã£ã¦ package ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åˆã‚ã›ã¦ GitHub tag ã‚’æ›´æ–°ã—ã€
<code>github-tags</code> Datasource ã¨ã—ã¦ä½¿ãŠã†ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
ç¾çŠ¶ AWS RDS ã‚„ AWS Elasticache ã® engine version ç”¨ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã£ã¦ã„ã¾ã™ã€‚
tag ã¯ GitHub Actions ã‚’æ¯æ—¥å®šæœŸå®Ÿè¡Œã™ã‚‹ã“ã¨ã§æ›´æ–°ã—ã¾ã™ã€‚
è©³ç´°ã¯ãƒªãƒã‚¸ãƒˆãƒªã® README ã§ã‚‚èª­ã‚“ã§ãã ã•ã„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸ-oss">æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸ OSS<a href="#æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸ-oss" class="hash-link" aria-label="Direct link to æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸ OSS" title="Direct link to æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸ OSS">â€‹</a></h2><ul><li><a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">tfcmt</a><ul><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v2.0.0-0" target="_blank" rel="noopener noreferrer">v2.0.0-0</a></li><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases/tag/v1.1.0" target="_blank" rel="noopener noreferrer">v1.1.0</a><ul><li><a href="https://twitter.com/szkdash/status/1416263752475836416" target="_blank" rel="noopener noreferrer">https://twitter.com/szkdash/status/1416263752475836416</a></li></ul></li></ul></li></ul><p>terraform v0.15.4 ã‹ã‚‰ Terraform ä»¥å¤–ã§ã®å¤‰æ›´ã‚‚ plan ã«å‡ºåŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦
ã‚ã‹ã‚Šã«ãã„ã¨æ„Ÿã˜ãŸã®ã§ã€ tfcmt ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°è¿½åŠ ã—ã¦è¦‹ã‚„ã™ãã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
Refreshing state ã®ãƒ­ã‚°ã‚’é™¤å¤–ã—ãŸã‚Šã€warning ç›®ç«‹ãŸã›ãŸã‚Šã‚‚ã§ãã¦ä¾¿åˆ©ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog">Blog<a href="#blog" class="hash-link" aria-label="Direct link to Blog" title="Direct link to Blog">â€‹</a></h2><ul><li><a href="https://techblog.szksh.cloud/archives/2021/07/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/archives/2021/07/</a></li></ul>]]></content:encoded>
            <category>job</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2021-06-01 ~ 2021-06-30]]></title>
            <link>https://techblog.szksh.cloud/2021/06/01/job-06-30</link>
            <guid>https://techblog.szksh.cloud/2021/06/01/job-06-30</guid>
            <pubDate>Mon, 12 Jul 2021 20:47:11 GMT</pubDate>
            <description><![CDATA[* GCP ã‚’ Terraform ã§ç®¡ç†ã™ã‚‹ãŸã‚ã® developer support]]></description>
            <content:encoded><![CDATA[<ul><li>GCP ã‚’ Terraform ã§ç®¡ç†ã™ã‚‹ãŸã‚ã® developer support</li><li>miam ã‚’ Terraform ã«ç§»è¡Œ</li><li>Docker Hub ã‹ã‚‰ ECR ã¸ã®ç§»è¡Œ</li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[OPA ã§ Table Driven Tests ã£ã½ã„ã“ã¨ã‚’ã—ã¦ã¿ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/opa-table-driven-test</link>
            <guid>https://techblog.szksh.cloud/opa-table-driven-test</guid>
            <pubDate>Fri, 09 Jul 2021 10:38:55 GMT</pubDate>
            <description><![CDATA[OPA ã§ Table Driven Tests ã£ã½ã Policy ã‚’ Test ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è€ƒãˆãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>OPA ã§ Table Driven Tests ã£ã½ã Policy ã‚’ Test ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è€ƒãˆãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯">èƒŒæ™¯<a href="#èƒŒæ™¯" class="hash-link" aria-label="Direct link to èƒŒæ™¯" title="Direct link to èƒŒæ™¯">â€‹</a></h2><p>å…ˆæ—¥ <a href="https://mercari.connpass.com/event/211073/" target="_blank" rel="noopener noreferrer">Open Policy Agent Rego Knowledge Sharing Meetup</a> ã§ç™ºè¡¨ã™ã‚‹æ©Ÿä¼šã‚’é ‚ãã¾ã—ãŸã€‚
ç™ºè¡¨ã®è³‡æ–™ã¯<a href="https://gist.github.com/suzuki-shunsuke/9372337aa62a6f8394bb136582ec068e" target="_blank" rel="noopener noreferrer">ã“ã¡ã‚‰</a>ã€‚
æ™®æ®µä»–ç¤¾ã®äº‹ä¾‹ã‚’èã„ãŸã‚Š OPA ã«ã¤ã„ã¦è©±ãŸã‚Šã™ã‚‹æ©Ÿä¼šãŒãªã„ã®ã§ã€éå¸¸ã«è²´é‡ãªæ™‚é–“ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ãã®ä¸­ã§ <a href="https://twitter.com/deeeet" target="_blank" rel="noopener noreferrer">deeeet</a> ã•ã‚“ãŒ <a href="https://github.com/golang/go/wiki/TableDrivenTests" target="_blank" rel="noopener noreferrer">Table Driven Tests</a> ã£ã½ããƒ†ã‚¹ãƒˆã—ãŸã„ã¨ã„ã†ã‚ˆã†ãªã“ã¨ã‚’ãŠã£ã—ã‚ƒã£ã¦ã„ã¾ã—ãŸã€‚</p><p>ã ã„ãŸã„ã“ã®è¾º: <a href="https://youtu.be/0YpJhrz6L0A?t=2990" target="_blank" rel="noopener noreferrer">https://youtu.be/0YpJhrz6L0A?t=2990</a></p><p>ãã®è©±ã‚’å—ã‘ã¦æ”¹ã‚ã¦è‡ªåˆ†ã§è€ƒãˆã¦ã¿ãŸã¨ã“ã‚ã€ã§ããªãã¯ãªã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨ã„ã†æ°—ãŒã—ãŸã®ã§ã¡ã‚‡ã£ã¨ã‚„ã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚µãƒ³ãƒ—ãƒ«">ã‚µãƒ³ãƒ—ãƒ«<a href="#ã‚µãƒ³ãƒ—ãƒ«" class="hash-link" aria-label="Direct link to ã‚µãƒ³ãƒ—ãƒ«" title="Direct link to ã‚µãƒ³ãƒ—ãƒ«">â€‹</a></h2><p>ã›ã£ã‹ããªã®ã§ç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ã‚’ GitHub ã«ç”¨æ„ã—ã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example-opa-table-driven-tests" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-opa-table-driven-tests</a></p><p>ä»Šå›ã¯ aws_cloud_watch_log_group ã® retention_in_days ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ Rule ã® Test ã‚’ã—ã¾ã™ã€‚</p><ul><li>Rule: <a href="https://github.com/suzuki-shunsuke/example-opa-table-driven-tests/blob/main/policy/cloudwatch_log_retention_in_days.rego" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-opa-table-driven-tests/blob/main/policy/cloudwatch_log_retention_in_days.rego</a></li><li>Policy Test: <a href="https://github.com/suzuki-shunsuke/example-opa-table-driven-tests/blob/main/policy/cloudwatch_log_retention_in_days_test.rego" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-opa-table-driven-tests/blob/main/policy/cloudwatch_log_retention_in_days_test.rego</a></li></ul><p>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ <code>seeds</code> ã¨ã„ã† list ã§å®šç¾©ã—ã€ã©ã‚Œã‹ä¸€ã¤ã§ã‚‚ false ã ã£ãŸã‚‰ fail ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¸­èº«ã¯</p><ul><li>msg: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ç¤ºã™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ãŸã¨ãã® trace ã«å«ã‚ã‚‹</li><li>resource: rule ã® input</li><li>exp: rule ã®è©•ä¾¡çµæœã®æœŸå¾…å€¤</li></ul><p>ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><p>test ã®ä¸­èº«ã¯åˆ¥ã® rule ã‚’å¦å®šã—ã¦ã„ã‚‹ã ã‘ã«ãªã£ã¦ã„ã¾ã™ã­ã€‚</p><div class="language-rego codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rego codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">test_deny_aws_cloudwatch_log_grop_retention_in_days {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    not any_deny_aws_cloudwatch_log_grop_retention_in_days</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã®æ›¸ãæ–¹ã¯ <a href="https://www.openpolicyagent.org/docs/latest/policy-language/#universal-quantification-for-all" target="_blank" rel="noopener noreferrer">Universal Quantification (FOR ALL)</a> ã§èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>Set ã®æ¯”è¼ƒã¯ <code>!=</code>, <code>==</code> ã§å¤§ä¸ˆå¤«ã§ã™ã€‚ <a href="https://www.openpolicyagent.org/docs/latest/policy-language/#sets" target="_blank" rel="noopener noreferrer">https://www.openpolicyagent.org/docs/latest/policy-language/#sets</a></p><div class="language-rego codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rego codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    result != seed.exp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>test ã«å¤±æ•—ã—ãŸå ´åˆã«ã€ã©ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ãªãœå¤±æ•—ã—ãŸã®ã‹ã‚ã‹ã‚Šã‚„ã™ã„ã‚ˆã†ã«å¿…è¦ãªæƒ…å ±ã‚’ trace ã§å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><div class="language-rego codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rego codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    trace(sprintf("FAIL %s (%d): %s, wanted %v, got %v", ["test_deny_aws_cloudwatch_log_grop_retention_in_days", i, seed.msg, seed.exp, result]))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Conftest ã®å ´åˆã€ <code>--trace</code> ã‚’ã¤ã‘ã‚‹ã¨å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ <code>Note</code> ã§ grep ã™ã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ conftest verify --trace | grep Note</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TRAC   | | | | Note "FAIL test_deny_aws_cloudwatch_log_grop_retention_in_days (1): retention_in_days should be greater than 0, wanted {\"aws_cloudwatch_log_group.main: retention_in_days should be set and greater than 0\"}, got set()"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸Šã€ç°¡å˜ã§ã™ãŒ Rego ã§ Table Driven Tests ã£ã½ã test ã‚’æ›¸ãæ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>opa</category>
            <category>conftest</category>
            <category>rego</category>
        </item>
        <item>
            <title><![CDATA[Terraform ã§ç©ºã® AWS Lambda Function ã‚’ä½œã‚‹æ–¹æ³•]]></title>
            <link>https://techblog.szksh.cloud/create-empty-lambda-by-terraform</link>
            <guid>https://techblog.szksh.cloud/create-empty-lambda-by-terraform</guid>
            <pubDate>Thu, 24 Jun 2021 12:25:24 GMT</pubDate>
            <description><![CDATA[Terraform ã§ç©ºã® AWS Lambda Function ã‚’ä½œã‚ã†ã¨ã—ãŸéš›ã«ã¡ã‚‡ã£ã¨ãƒãƒã£ãŸã®ã§ã‚„ã‚Šæ–¹ã‚’æ›¸ã„ã¦ãŠãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Terraform ã§ç©ºã® AWS Lambda Function ã‚’ä½œã‚ã†ã¨ã—ãŸéš›ã«ã¡ã‚‡ã£ã¨ãƒãƒã£ãŸã®ã§ã‚„ã‚Šæ–¹ã‚’æ›¸ã„ã¦ãŠãã¾ã™ã€‚</p><p>ã€Œç©ºã® Lambda Functionã€ã¨ã„ã†è¡¨ç¾ã¯é©åˆ‡ã§ã¯ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€
Lambda ã§å®Ÿè¡Œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ Terraform ä»¥å¤–ã®ãƒ„ãƒ¼ãƒ«ã§ã‚„ã‚‹ã‘ã©ã€
Lambda Function ã®ä½œæˆã¯ Terraform ã§è¡Œã†ã®ã§ã€ dummy ã®ã‚³ãƒ¼ãƒ‰ã‚’æŒ‡å®šã—ã¦ Terraform ã§ Lambda ã‚’ä½œã‚‹ã¨ã„ã†è©±ã§ã™ã€‚</p><p>è‡ªåˆ†ã¯ä»Šã¯ <a href="https://github.com/fujiwara/lambroll" target="_blank" rel="noopener noreferrer">lambroll</a> ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã§ Lambda ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã¾ã™ã€‚
lambroll ã¯ Lambda Function ã‚‚ä½œã£ã¦ãã‚Œã‚‹ã®ã§ Terraform ã§ä½œã‚‹å¿…è¦ã¯å¿…ãšã—ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ã—ã‹ã— Lambda Function ã«é–¢é€£ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚’ Terraform ã§ç®¡ç†ã™ã‚‹å ´åˆã€
Lambda Function ã‚‚ Terraform ã§ä½œã‚‹ã¨ Lambda Function ã® ARN ã‚„ Invoke ARN ã‚’å‚ç…§ã§ãã¾ã™ã€‚</p><p>ã¾ãŸ lambroll ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆã‚‚å…ˆã« Terraform ã§ IAM Role ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€
Terraform ã§ aws_lambda_permission ã®ã‚ˆã†ãªãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã«ã¯ Lambda Function ãŒå…ˆã«ä½œã‚‰ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€
äº’ã„ã«ä¾å­˜é–¢ä¿‚ãŒç™ºç”Ÿã—ã€é¢å€’ãªã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><p>ã¾ãŸ Lambda Function ã®å‰Šé™¤ã‚‚ Terraform ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>ãªã®ã§ã€ Terraform ã§ Lambda Function ã‚’ä½œã£ã¦ãŠã„ãŸã»ã†ãŒè‰²ã€…éƒ½åˆãŒè‰¯ã„ã§ã™ã€‚</p><p>Terraform ã§ä½œæˆã¨å‰Šé™¤ã¯è¡Œã†ã‚‚ã®ã®ã€æ›´æ–°ã‚’ã—ãŸã„ã‚ã‘ã§ã¯ãªã„ã®ã§ã€ <code>ignore_changes = all</code> ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><p><a href="https://www.terraform.io/docs/language/meta-arguments/lifecycle.html#ignore_changes" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/language/meta-arguments/lifecycle.html#ignore_changes</a></p><p>Lambda Function ã‚’ Web UI ãªã©ã‹ã‚‰ä½œã‚‹å ´åˆ Function code ã¯ãªãã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ãŒã€
Terraform ã§ Lambda Function ã‚’ä½œã‚‹å ´åˆã€ <code>filename</code> ã‚„ <code>image_uri</code>, <code>s3_bucket</code> ã®ã„ãšã‚Œã‹ãŒå¿…é ˆã«ãªã‚Šã¾ã™ã€‚
ã“ã‚Œã¯ issue ã‚‚ã‚ã‚Šã¾ã™ãŒã€ä»•æ§˜ã®ã‚ˆã†ã«ã¿ãˆã¾ã™ã€‚</p><p><a href="https://github.com/hashicorp/terraform-provider-aws/issues/5945" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-aws/issues/5945</a></p><p>ECR ã‚„ S3 ã« dummy ã®ã‚³ãƒ¼ãƒ‰ã‚’ç”¨æ„ã™ã‚‹ã¨ã„ã†ã®ã‚‚ä¸€ã¤ã®æ‰‹ã§ã™ãŒã€ç’°å¢ƒã«ä¾å­˜ã™ã‚‹ã®ãŒã‚ã¾ã‚Šè‰¯ã„æ°—ãŒã—ãªã„ã®ã§ã€
archive_file data source ã‚’ä½¿ã£ã¦ dummy ã® zip ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã¨ã„ã†æ–¹æ³•ã‚’å–ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p><a href="https://registry.terraform.io/providers/hashicorp/archive/latest/docs/data-sources/archive_file" target="_blank" rel="noopener noreferrer">https://registry.terraform.io/providers/hashicorp/archive/latest/docs/data-sources/archive_file</a></p><p>æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ CI ã§ terraform apply ã‚’å®Ÿè¡Œã—ã¾ã—ãŸãŒã€ zip file ãŒãªã„ã¨è¨€ã‚ã‚Œã¦å¤±æ•—ã—ã¾ã—ãŸã€‚</p><div class="language-tf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "aws_lambda_function" "main" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # https://www.terraform.io/docs/language/meta-arguments/lifecycle.html#ignore_changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Terraform can create and destroy the remote object but will never propose updates to it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lifecycle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ignore_changes = all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function_name = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  role          = aws_iam_role.main.arn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  handler  = "bootstrap"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  runtime  = "provided.al2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filename = data.archive_file.dummy.output_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data "archive_file" "dummy" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = "zip"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  output_path = "${path.module}/dummy.zip"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    content  = "dummy"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filename = "bootstrap"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Error: unable to load "lambda-base/dummy.zip": open lambda-base/dummy.zip: no such file or directory</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã—ã‹ã—ãƒ­ãƒ¼ã‚«ãƒ«ã§ terraform plan, apply ã‚’å®Ÿè¡Œã—ã¦ã¿ã¦ã‚‚å†ç¾ã—ã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>CI ã§ã¯ Pull Request ã§ plan file ã‚’ç”Ÿæˆã—ã¦ S3 ã« plan file ã‚’ upload ã—ã€ PR ã‚’ãƒãƒ¼ã‚¸ã—ãŸ default branch ã§ã¯ terraform plan ã‚’å®Ÿè¡Œã›ãšã« S3 ã‹ã‚‰ plan file ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ terraform apply ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://blog.studysapuri.jp/entry/2021/03/10/080000" target="_blank" rel="noopener noreferrer">Pull Request ã® terraform plan ã®å®Ÿè¡Œçµæœã‚’ S3 ã«ä¿å­˜ã—ã¦å®‰å…¨ã« apply | Quipper Product Team Blog</a></p><p>plan file ã‚’æŒ‡å®šã—ã¦ terraform apply ã‚’å®Ÿè¡Œã—ãŸéš›ã«ã¯ zip file ãŒä½œæˆã•ã‚Œãšã€ä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</p><p>é–¢é€£ã™ã‚‹ issue ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚ <a href="https://github.com/hashicorp/terraform-provider-archive/issues/39" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-archive/issues/39</a></p><p>ã“ã® issue ã§ã¯å¹¾ã¤ã‹ã®è§£æ±ºæ–¹æ³•ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¡ãªã¿ã« 2021-06-24 ç¾åœ¨ Hashicorp å´ã‹ã‚‰ã¯ç‰¹ã«åå¿œãŒãªã„ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚
random_uuid ã‚„ random_string ã‚’ä½¿ã£ãŸæ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€ Lambda ã‚’ä½œæˆã™ã‚‹ã ã‘ãªã‚‰ null_resource ã«ä¾å­˜ã•ã›ã‚‹ã ã‘ã§ååˆ†ã®ã‚ˆã†ã«æ€ãˆã¾ã—ãŸã€‚</p><div class="language-tf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data "archive_file" "dummy" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = "zip"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  output_path = "${path.module}/dummy.zip"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    content  = "dummy"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filename = "bootstrap"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depends_on = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    null_resource.main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource "null_resource" "main" {}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã®ã‚ˆã†ã« null_resource ã«ä¾å­˜ã•ã›ã‚‹ã¨ terraform plan ã§ã¯ zip file ãŒä½œã‚‰ã‚Œãšã€ terraform apply ã§ã¯ã˜ã‚ã¦ zip file ãŒä½œã‚‰ã‚Œã‚‹ãŸã‚ã€
terraform apply ãŒå¤±æ•—ã™ã‚‹ã“ã¨ã¯ãªããªã‚Šã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>terraform</category>
            <category>lambda</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2021-05-01 ~ 2021-05-31]]></title>
            <link>https://techblog.szksh.cloud/2021/05/01/job-05-31</link>
            <guid>https://techblog.szksh.cloud/2021/05/01/job-05-31</guid>
            <pubDate>Sat, 29 May 2021 23:19:32 GMT</pubDate>
            <description><![CDATA[* SRE ãƒãƒ¼ãƒ ã®æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ã‚µãƒãƒ¼ãƒˆ]]></description>
            <content:encoded><![CDATA[<ul><li>SRE ãƒãƒ¼ãƒ ã®æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ã‚µãƒãƒ¼ãƒˆ</li><li>GCP<ul><li>dev ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿œã˜ã¦æ¨©é™ä»˜ä¸ã—ãŸã‚Šå¯¾å¿œ</li><li>Terraform ã«ã‚ˆã‚‹ GCP ã®ç®¡ç† CI/CD ã®æ•´å‚™</li><li>Workload Identity Federation ã«ã¤ã„ã¦èª¿ã¹ãŸ</li><li>Terraform ã«ã‚ˆã‚‹ IAM ç®¡ç†ã®ä»•æ–¹ã‚’æ¤œè¨</li></ul></li><li>Conftest<ul><li><code>opa fmt</code> ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ(CI ã‚‚å°å…¥)</li><li>Policy Testing (CI ã‚‚å°å…¥)</li></ul></li><li>Upgrade Terraform to v0.15.4</li><li>miam ã® Terraform ç§»è¡Œã‚’æ¤œè¨¼</li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2021-04-01 ~ 2021-04-30]]></title>
            <link>https://techblog.szksh.cloud/2021/04/01/job-04-30</link>
            <guid>https://techblog.szksh.cloud/2021/04/01/job-04-30</guid>
            <pubDate>Wed, 28 Apr 2021 00:28:01 GMT</pubDate>
            <description><![CDATA[* SRE ãƒãƒ¼ãƒ ã®æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ã‚µãƒãƒ¼ãƒˆ]]></description>
            <content:encoded><![CDATA[<ul><li>SRE ãƒãƒ¼ãƒ ã®æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ã‚µãƒãƒ¼ãƒˆ</li><li>Lambda ã® Monorepo<ul><li>å¹¾ã¤ã‹å®Ÿéš›ã« Function ä½œã£ãŸ(developer support)</li><li>å¹¾ã¤ã‹ã® Release Strategy ã®å®Ÿè£…ãƒ»æ¤œè¨¼<ul><li>ã‚·ãƒ³ãƒ—ãƒ«ãª GitHub Flow</li><li>Git Flow ã‚’ã‚¢ãƒ¬ãƒ³ã‚¸ã—ãŸãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼</li><li>Canary Release</li><li>WIP: AWS AppConfig ã‚’ç”¨ã„ãŸ Dark Launch</li></ul></li></ul></li><li>IAM User ã®åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é€ä¿¡ã®è‡ªå‹•åŒ–</li><li>Terraform<ul><li>Renovate ã«ã‚ˆã‚‹ Terraform ã® patch update ã®è‡ªå‹•åŒ–</li><li>Docker ã‚’ä½¿ã£ãŸãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®æ”¹å–„</li><li>ãƒ­ãƒ¼ã‚«ãƒ«ã§ terraform init ã—ãŸã‚‰ .terraform.lock.hcl ãŒæ›´æ–°ã•ã‚Œã‚‹å•é¡Œã®å¯¾å¿œ <a href="https://techblog.szksh.cloud/terraform-providers-lock/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/terraform-providers-lock/</a></li></ul></li><li>GCP ã® Terraform ç®¡ç†<ul><li>èª¿æŸ»</li><li>WIP</li></ul></li><li>Conftest<ul><li>ç¤¾å†…ã® Rego ã®æ´»ç”¨äº‹ä¾‹ã‚’ã¾ã¨ã‚ãŸ</li><li><code>opa fmt</code> ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ(CI ã‚‚å°å…¥)</li><li>Policy Testing (CI ã‚‚å°å…¥)</li></ul></li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[PR ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚„ PR Label ã«å¿œã˜ã¦ matrix build ã‚’å®Ÿè¡Œã™ã‚‹ Github Actions ã® Workflow ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’æ›¸ã„ã¦ã¿ãŸ]]></title>
            <link>https://techblog.szksh.cloud/example-github-actions-dynamic-matrix</link>
            <guid>https://techblog.szksh.cloud/example-github-actions-dynamic-matrix</guid>
            <pubDate>Sun, 25 Apr 2021 07:09:47 GMT</pubDate>
            <description><![CDATA[GitHub Actions ã®å‹‰å¼·ãŒã¦ã‚‰ Pull Request (ä»¥ä¸‹ PR) ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚„ PR Label ã«å¿œã˜ã¦]]></description>
            <content:encoded><![CDATA[<p>GitHub Actions ã®å‹‰å¼·ãŒã¦ã‚‰ Pull Request (ä»¥ä¸‹ PR) ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚„ PR Label ã«å¿œã˜ã¦
Matrix build ã‚’å®Ÿè¡Œã™ã‚‹ Github Actions ã® Workflow ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example-github-actions-dynamic-matrix" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-github-actions-dynamic-matrix</a></p><p>Monorepo ã§åŒã˜ Job ã‚’ PR ã§å¤‰æ›´ã•ã‚ŒãŸã‚‚ã®ã«å¯¾ã—ã¦ã ã‘å®Ÿè¡Œã—ãŸã„ã€
ã‘ã© workflow ã‚’ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã«å®šç¾©ã™ã‚‹ã®ã¯ã‚ã‚“ã©ã„ã¿ãŸã„ãªå ´åˆã«ä½¿ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>å‹‰å¼·ãŒã¦ã‚‰ã¡ã‚‡ã£ã¨æ›¸ã„ã¦ã¿ã¦è»½ãå‹•ä½œç¢ºèªã—ãŸã ã‘ãªã®ã§ã€ãƒã‚°ã£ã¦ã‚‹ã€ã‚ã‚‹ã„ã¯å®Ÿç”¨çš„ã§ã¯ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ã“ã“ã§ã¯ Monorepo ã® CI ã‚’ GitHub Actions ã§å®Ÿè¡Œã™ã‚‹å ´åˆã‚’è€ƒãˆã¾ã™ã€‚</p><p>GitHub Actions ã§ã¯ path filter ã‚’ç”¨ã„ã¦ workflow ã®å®Ÿè¡Œæœ‰ç„¡ã‚’åˆ¶å¾¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ãã“ã§ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã« workflow ã‚’ä½œæˆã—ã€ path filter ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ãã®ã‚µãƒ¼ãƒ“ã‚¹ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã®ã¿ãã®ã‚µãƒ¼ãƒ“ã‚¹ã® CI ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã„ã†ã“ã¨ãŒç°¡å˜ã«ã§ãã¾ã™ã€‚</p><p>ã—ã‹ã—å¤šãã®ã‚µãƒ¼ãƒ“ã‚¹ãŒå«ã¾ã‚Œã‚‹ Monorepo ã§å„ã‚µãƒ¼ãƒ“ã‚¹ã«åŒã˜ Job ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ãã®å ´åˆã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã™ã‚‹ãŸã³ã« workflow ã‚’è¿½åŠ ã—ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ã .github/workflows é…ä¸‹ã« 1 ã¤ YAML ã‚’ã‚³ãƒ”ãƒšã§ä½œæˆã™ã‚‹ã ã‘ã¨ã„ãˆã°ãã‚Œã¾ã§ãªã®ã§ã™ãŒã€ãã‚Œã™ã‚‰ã‚‚çœç•¥ã—ãŸã„ã¨ã—ã¾ã—ã‚‡ã†ã€‚</p><p><a href="https://blog.studysapuri.jp/entry/2020/12/03/080000" target="_blank" rel="noopener noreferrer">Terraform ã® CI/CD ã‚’ CodeBuild ã«ç§»è¡Œã—ãŸè©±</a>ã§ã¯ CodeBuild ã® Batch Build ã® buildspec ã‚’
PR ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŠã‚ˆã³ PR Label ã«å¿œã˜ã¦å‹•çš„ã«ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã®è‰¯ã„ã¨ã“ã‚ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã—ãŸã‚Šã€ãƒªãƒãƒ¼ãƒ ã—ãŸã‚Šã€å‰Šé™¤ã—ãŸã‚Šã—ã¦ã‚‚ CI ã‚’ã‚¤ã‚¸ã‚‹å¿…è¦ãŒã¾ã£ãŸããªã„ã¨ã“ã‚ã§ã™ã€‚</p><p>ãã‚Œã¨ä¼¼ãŸã‚ˆã†ãªã“ã¨ã‚’ GitHub Actions ã§ã‚‚ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚</p><p>foo ã¨ bar ã¨ã„ã† 2 ã¤ã®ã‚µãƒ¼ãƒ“ã‚¹(Go ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³)ãŒã‚ã‚Šã€
CI ã§ã¯ setup job ã§ CI ã‚’å®Ÿè¡Œã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒªã‚¹ãƒˆã‚’å‹•çš„ã«ç”Ÿæˆã—ã€å¾Œç¶šã® build job ã§å¯¾è±¡ã‚µãƒ¼ãƒ“ã‚¹ã® build ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚
ä¾‹ãˆã°ãƒªãƒã‚¸ãƒˆãƒªç›´ä¸‹ã® README.md ã ã‘ã‚’æ›´æ–°ã—ãŸå ´åˆã€ã©ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ“ãƒ«ãƒ‰ã‚‚å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚
ã‚µãƒ¼ãƒ“ã‚¹ foo ã® main.go ã ã‘ã‚’æ›´æ–°ã—ãŸå ´åˆã€ã‚µãƒ¼ãƒ“ã‚¹ foo ã®ãƒ“ãƒ«ãƒ‰ã ã‘å®Ÿè¡Œã•ã‚Œã€ bar ã®ãƒ“ãƒ«ãƒ‰ã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚
<code>target/&lt;ã‚µãƒ¼ãƒ“ã‚¹å&gt;</code> ã¨ã„ã† PR Label ã‚’ã¤ã‘ã¦ CI ã‚’å®Ÿè¡Œã™ã‚‹ã¨æŒ‡å®šã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã®ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚Œã¦ã„ãªãã¦ã‚‚ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚</p><p>ä¸»ã«ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã„ã¤ã¤ã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/ci-info" target="_blank" rel="noopener noreferrer">ci-info</a></li><li><a href="https://github.com/suzuki-shunsuke/matchfile" target="_blank" rel="noopener noreferrer">matchfile</a></li><li>jq</li></ul><p>è©³ç´°ã¯ <a href="https://github.com/suzuki-shunsuke/example-github-actions-dynamic-matrix" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-github-actions-dynamic-matrix</a> ã®ã‚³ãƒ¼ãƒ‰ã¨ <a href="https://github.com/suzuki-shunsuke/example-github-actions-dynamic-matrix/pulls?q=is%3Apr+is%3Aopen+label%3Ademo" target="_blank" rel="noopener noreferrer">Demo ç”¨ã® PR</a> ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>]]></content:encoded>
            <category>github-actions</category>
        </item>
        <item>
            <title><![CDATA[terraform init ã§ lock ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚Œã‚‹å•é¡Œã®å¯¾å¿œ]]></title>
            <link>https://techblog.szksh.cloud/terraform-providers-lock</link>
            <guid>https://techblog.szksh.cloud/terraform-providers-lock</guid>
            <pubDate>Sat, 24 Apr 2021 12:57:27 GMT</pubDate>
            <description><![CDATA[Terraform v0.14 ã§ local ã§ terraform init ã™ã‚‹ã¨ lock ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚Œã¦ã—ã¾ã†å•é¡Œã«å¯¾å¿œã—ã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>Terraform v0.14 ã§ local ã§ <code>terraform init</code> ã™ã‚‹ã¨ lock ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚Œã¦ã—ã¾ã†å•é¡Œã«å¯¾å¿œã—ã¾ã—ãŸã€‚</p><p>çµè«–ã‚’æœ€åˆã«è¨€ã†ã¨ã€ <a href="https://blog.studysapuri.jp/entry/2021/03/12/080000" target="_blank" rel="noopener noreferrer">100 ä»¥ä¸Šã® Terraform ç’°å¢ƒã‚’ã„ã„æ„Ÿã˜ã« v0.14 ã« upgrade ã—ãŸæ–¹æ³•</a>ã§ç´¹ä»‹ã—ã¦ã„ã‚‹æ–¹æ³•ã§ Renovate ã§ Terraform Provider ã‚’ update ã™ã‚‹éš›ã« <code>terraform init -upgrade</code> ã‚’å®Ÿè¡Œã—ã¦ lock ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€
ãã®éš›ã« <code>terraform providers lock -platform=darwin_amd64</code> ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p><p>Terraform v0.14 ã§ lock ãƒ•ã‚¡ã‚¤ãƒ« <code>.terraform.lock.hcl</code> ãŒå°å…¥ã•ã‚Œã¾ã—ãŸã€‚
Renovate ã§ Terraform Provider ã‚’ update ã™ã‚‹éš›ã«ã‚‚ lock ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€
<code>terraform init -upgrade</code> ã‚’å®Ÿè¡Œã—ã¦ lock ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã„ã¾ã™ã€‚
ãªã®ã§ã™ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ <code>terraform init</code> ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãªã‚“ã‹ lock ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚Œã‚‹ã“ã¨ãŒè‰¯ãã‚ã‚Šã¾ã—ãŸã€‚ã—ã°ã‚‰ãæ”¾ç½®ã—ã¦ã„ãŸã®ã§ã™ãŒã€ developer ã‹ã‚‰ã€Œãªã‚“ã‹ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°ã•ã‚ŒãŸã‚“ã ã‘ã©ã€ã“ã‚Œã‚³ãƒŸãƒƒãƒˆã—ã¦ã„ã„ã®ï¼Ÿã€ã¨èã‹ã‚Œã€ã“ã®ã¾ã¾æ”¾ã£ã¦ãŠã„ã¦å›°æƒ‘ã•ã›ãŸã‚Šã‚‚ã‚„ã£ã¨ã•ã›ãŸã‚Šã™ã‚‹ã®ã¯è‰¯ããªã„ãªã¨æ€ã„ã€èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚</p><p>lock ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦ <a href="https://speakerdeck.com/minamijoyo/how-to-update-terraform-dot-lock-dot-hcl-efficiently" target="_blank" rel="noopener noreferrer">.terraform.lock.hcl å®Œå…¨ã«ç†è§£ã—ãŸ</a>ã§è©³ã—ãè§£èª¬ã•ã‚Œã¦ã„ãŸã®ã§å¤§å¤‰åŠ©ã‹ã‚Šã¾ã—ãŸã€‚</p><ul><li>lock ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ provider ã® hash å€¤ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹</li><li>lock ãƒ•ã‚¡ã‚¤ãƒ«ã¯ <code>terraform init</code> ã§è‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã‚‹</li><li>hash å€¤ã¯ platform (Mac, Linux, etc) ã«ã‚ˆã£ã¦é•ã†</li><li><code>terraform init</code> å®Ÿè¡Œæ™‚ã«ã€ãã® platform ã® hash å€¤ãŒ lock ãƒ•ã‚¡ã‚¤ãƒ«ã«ãªã‘ã‚Œã°è¿½åŠ ã•ã‚Œã‚‹<ul><li>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å®Ÿè¡Œç’°å¢ƒä»¥å¤–ã® Platform ã® hash å€¤ã¯è¿½åŠ ã•ã‚Œãªã„</li></ul></li><li>CI ã¯ Linux ä¸Šã§å®Ÿè¡Œã—ã¦ã„ã‚‹ã®ã§ã€ Linux ã® hash å€¤ã ã‘ãŒè¨˜éŒ²ã•ã‚Œã‚‹</li><li>ãƒ­ãƒ¼ã‚«ãƒ«ã§ Mac ä¸Šã§ <code>terraform init</code> ã™ã‚‹ã¨ Mac ã® hash å€¤ãŒè¿½åŠ ã•ã‚Œã€ lock ãƒ•ã‚¡ã‚¤ãƒ«ã«å·®åˆ†ãŒç”Ÿã˜ã‚‹</li></ul><p>ãªã®ã§å·®åˆ†ãŒå‡ºã¦ã—ã¾ã£ãŸå ´åˆã¯ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã§è‰¯ã„ã¨ã¯æ€ã„ã¾ã™ãŒã€ãã‚‚ãã‚‚ CI ã§ lock ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã™ã‚‹éš›ã« Mac ã® hash å€¤ã‚‚è¿½åŠ ã—ã¦ã—ã¾ãˆã°ãƒ­ãƒ¼ã‚«ãƒ«ã§ Mac ä¸Šã§ <code>terraform init</code> ã—ã¦ã‚‚å·®åˆ†ãŒå‡ºãªããªã‚Šã¾ã™ã€‚ã¡ãªã¿ã« Windows ä¸Šã§ <code>terraform init</code> ã™ã‚‹äººã¯è‡ªåˆ†ã®å‘¨ã‚Šã«ã¯ã„ãªã•ãã†ãªã®ã§ã€ Windows ã¯å¯¾å¿œã—ãªã„ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p><a href="https://blog.studysapuri.jp/entry/2021/03/12/080000" target="_blank" rel="noopener noreferrer">100 ä»¥ä¸Šã® Terraform ç’°å¢ƒã‚’ã„ã„æ„Ÿã˜ã« v0.14 ã« upgrade ã—ãŸæ–¹æ³•</a>ã§ç´¹ä»‹ã—ã¦ã„ã‚‹ã‚ˆã†ã«ã™ã§ã« lock ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ä»•çµ„ã¿ã¯ã‚ã‚‹ã®ã§ã€å¤‰æ›´ã¨ã—ã¦ã¯ 1 (æ­£ç¢ºã«ã¯ã‚³ãƒ¼ãƒ‰ã‚³ãƒ¡ãƒ³ãƒˆå…¥ã‚Œã¦4)è¡Œè¿½åŠ ã™ã‚‹ã ã‘ã§ã—ãŸã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">github-comment exec -- terraform providers lock -platform=darwin_amd64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>terraform</category>
        </item>
        <item>
            <title><![CDATA[Terraform Module ã® Template ã¨ã„ã†ä½¿ã„æ–¹]]></title>
            <link>https://techblog.szksh.cloud/terraform-module-template</link>
            <guid>https://techblog.szksh.cloud/terraform-module-template</guid>
            <pubDate>Sat, 03 Apr 2021 02:04:25 GMT</pubDate>
            <description><![CDATA[Terraform Module ã®ä½¿ã„æ–¹ã¨ã—ã¦ Terraform Module ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒšã—ã¦ä½¿ã†ã¨ã„ã†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Terraform Module ã®ä½¿ã„æ–¹ã¨ã—ã¦ Terraform Module ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒšã—ã¦ä½¿ã†ã¨ã„ã†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>Terraform ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(ä»¥ä¸‹ tfãƒ•ã‚¡ã‚¤ãƒ«) ã‚’æ›¸ãéš›ã€æ¯å›ä¸€ã‹ã‚‰æ›¸ãã®ã¯å¤§å¤‰ã§ã™ã€‚
å¤šãã®å ´åˆã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å†åˆ©ç”¨ã—ãŸã»ã†ãŒæ¥½ã§ã—ã‚‡ã†ã€‚</p><p>Terraform ã®ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨ã®ä»•çµ„ã¿ã¨ã—ã¦ã€ Module ãŒã‚ã‚Šã¾ã™ã€‚
Module ã¯å‹¿è«–ä¾¿åˆ©ãªã®ã§ã™ãŒã€ä½¿ã„æ–¹ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã€ã€Œå®‰æ˜“ã« Module åŒ–ã™ã‚‹ãªã€‚ä½¿ã†ãªã€ã¨ã„ã†ãµã†ãªè€ƒãˆæ–¹ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚
è‡ªåˆ†ã‚‚åŸºæœ¬çš„ã«åŒæ„è¦‹ã§ã€ Module ã‚’å…±ç”¨ã™ã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ Module ã¸ã®å¤‰æ›´ãŒã—ã¥ã‚‰ããªã£ãŸã‚Šã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã©ã‚“ã©ã‚“å¢—ãˆã¦è¤‡é›‘ã«ãªã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«å…±ç”¨ã® local Module ã‚’ä½œæˆã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒã‚ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lambda-base/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    variables.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outputs.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  foo/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    staging/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      main.tf # ãƒªãƒã‚¸ãƒˆãƒªç›´ä¸‹ã® modules/lambda-base ã‚’å‚ç…§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    production/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      main.tf # ãƒªãƒã‚¸ãƒˆãƒªç›´ä¸‹ã® modules/lambda-base ã‚’å‚ç…§</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã†ã™ã‚‹ã¨ modules é…ä¸‹ã® Module ã‚’å¤‰æ›´ã—ãŸéš›ã«ãã® Module ã‚’ä½¿ã£ã¦ã„ã‚‹ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã«å½±éŸ¿ãŒå‡ºã¦ã—ã¾ã„ã€
ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚ªãƒ¼ãƒŠãƒ¼ãŒæ§˜ã€…ã ã£ãŸã‚Šã€æ›–æ˜§ã ã£ãŸã‚Šä¸åœ¨ã ã£ãŸã‚Šã™ã‚‹ã¨å¤‰æ›´ãŒé›£ã—ã„ã§ã™ã—ã€ã©ã‚“ã©ã‚“ Module ãŒè¤‡é›‘ã«ãªã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>Module ã‚’åˆ¥ã®ãƒªãƒã‚¸ãƒˆãƒªã§ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã—ã¦ç®¡ç†ã—ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨ã„ã†ã‚„ã‚Šæ–¹ã‚‚ã‚ã‚Šã¾ã™ãŒã€
çµæ§‹è¤‡é›‘ã¨ã„ã†ã‹è€ƒãˆã‚‹ã“ã¨ãŒå¤šã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã ã¨ã¯æ€ã„ã¾ã™ã€‚</p><p>Terraform ã«ãã“ã¾ã§è©³ã—ããªã„ developer ã«ã‚‚æ›¸ã„ã¦ã‚‚ã‚‰ã†ã¨ãªã‚‹ã¨ã€ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã™ã‚‹ã®ãŒæœ›ã¾ã—ã„ã§ã—ã‚‡ã†(å½“ç„¶ã“ã‚Œã¯çµ„ç¹”ã«ã‚ˆã‚Šã¾ã™ãŒ)ã€‚</p><p>ãã“ã§ Module ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”¨æ„ã—ã€ Module ã‚’ä½¿ã„ãŸããªã£ãŸã‚‰ãã‚Œã‚’ã‚³ãƒ”ãƒšã—ã¦ä½¿ã†ã¨ã„ã†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒã‚ã‚Šã¾ã™ã€‚
ä¾‹ãˆã° <code>lambda-base</code> ã¨ã„ã† Module ã® Template ã‚’ foo ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã® staging ç’°å¢ƒã¨ production ç’°å¢ƒã§ä½¿ã†å ´åˆã€æ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">services/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  foo/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    staging/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lambda-base/ # templates ã‹ã‚‰ã‚³ãƒ”ãƒ¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      main.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    production/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lambda-base/ # templates ã‹ã‚‰ã‚³ãƒ”ãƒ¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      main.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">templates/ # Module ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç½®ã„ã¦ãŠã</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lambda-base/ # ä¸­èº«ã¯æ™®é€šã® Module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    variables.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outputs.tf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã†ã™ã‚‹ã¨ 2 ã¤ã® Module ã¯ãã‚Œãã‚Œç‹¬ç«‹ã—ã¦ã„ã‚‹ãŸã‚ã€å¤‰æ›´ãŒã—ã‚„ã™ããªã‚Šã¾ã™ã—ã€ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¤ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã¨ã‹ã¯ä½¿ã‚ãªã„">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã¨ã‹ã¯ä½¿ã‚ãªã„<a href="#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã¨ã‹ã¯ä½¿ã‚ãªã„" class="hash-link" aria-label="Direct link to ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã¨ã‹ã¯ä½¿ã‚ãªã„" title="Direct link to ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã¨ã‹ã¯ä½¿ã‚ãªã„">â€‹</a></h2><p>Module ã® Template ã‚’ã‚³ãƒ”ãƒšã™ã‚‹éš›ã«ã€ã‚³ãƒ¼ãƒ‰ã«å¤‰æ•°ã‚’åŸ‹ã‚è¾¼ã‚“ã§ã‚³ãƒ”ãƒšã™ã‚‹éš›ã«ç½®æ›ã—ãŸã‚Šã¨ã‹ã€é«˜åº¦ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½¿ã£ã¦å‹•çš„ã«å†…å®¹ã‚’å¤‰ãˆãŸã‚Šã¨ã„ã£ãŸã“ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ãŒã€
å€‹äººçš„ã«ã¯è¤‡é›‘åº¦ãŒä¸ŠãŒã‚‹ã®ã§ã‚„ã‚‰ãªã„ã»ã†ãŒè‰¯ã„ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚
å¤‰æ•°ã§ã‚ã‚Œã° Module ã® input variable ã¨ã—ã¦æ¸¡ã›ã°ã‚ˆã„ã—ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ä½¿ã„ãŸã„ã®ã§ã‚ã‚Œã°ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ†ã‘ãŸã‚Šã€ HCL ã§è¡¨ç¾ã—ãŸã‚Šã™ã‚Œã°ã‚ˆã„ã®ã§ã¯ã¨ã„ã†æ°—ãŒã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è€ƒãˆã‚‰ã‚Œã‚‹ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ">è€ƒãˆã‚‰ã‚Œã‚‹ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ<a href="#è€ƒãˆã‚‰ã‚Œã‚‹ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ" class="hash-link" aria-label="Direct link to è€ƒãˆã‚‰ã‚Œã‚‹ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ" title="Direct link to è€ƒãˆã‚‰ã‚Œã‚‹ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ">â€‹</a></h2><p>é€šå¸¸ã® Module ã¨æ¯”ã¹ã¦ã€ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><ul><li>ã‚³ãƒ¼ãƒ‰é‡ãŒå¢—ãˆã‚‹(DRY ã˜ã‚ƒãªã„)</li><li>Module ã‚’ä¸€ç®‡æ‰€ã§ç®¡ç†ã§ããªã„<ul><li>ä¸€æ‹¬ã—ã¦å¤‰æ›´ã‚’åŠ ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ãªã„</li><li>è¨­å®šã‚’å¼·åˆ¶ã™ã‚‹ã“ã¨ãŒã§ããªã„</li></ul></li></ul><p>ã—ã‹ã—ã€å€‹äººçš„ã«ã¯ã“ã‚Œã¯å¤§ã—ãŸå•é¡Œã˜ã‚ƒãªã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>ã‚³ãƒ¼ãƒ‰ãŒå¢—ãˆã‚‹ã“ã¨ã«é–¢ã—ã¦ã¯ã€ãã‚Œã¯ãã†ã¨ã—ã‹è¨€ã„ã‚ˆã†ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
ä¸€æ‹¬ã—ã¦å¤‰æ›´ã‚’åŠ ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ãªã„ã®ã¯ã€ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã ã¨æ€ã£ã¦ã„ã¦ã€ã‚€ã—ã‚å¯¾å‡¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’é™å®šã—ãªãŒã‚‰ Module ã«å¤‰æ›´ã‚’åŠ ãˆã‚‰ã‚Œã‚‹ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆã®ã»ã†ãŒå¤§ãã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
è¨­å®šã‚’å¼·åˆ¶ã™ã‚‹ã“ã¨ãŒã§ããªã„ã®ã¯ã€ãŸã—ã‹ã«ãã‚Œã¯ã‚ã‚‹ã¨æ€ã£ã¦ã„ã¦ã€ã‚³ãƒ”ãƒšã—ãŸ Module ã«ä¸€æ‹¬ã—ã¦å¤‰æ›´ã‚’åŠ ãˆãŸã‚Š Conftest ãªã©ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ä»•çµ„ã¿ãŒå¿…è¦ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>terraform</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2021-03-01 ~ 2021-03-31]]></title>
            <link>https://techblog.szksh.cloud/2021/03/01/job-03-31</link>
            <guid>https://techblog.szksh.cloud/2021/03/01/job-03-31</guid>
            <pubDate>Sun, 28 Mar 2021 14:36:55 GMT</pubDate>
            <description><![CDATA[* ãƒ–ãƒ­ã‚°ã®åŸ·ç­†]]></description>
            <content:encoded><![CDATA[<ul><li>ãƒ–ãƒ­ã‚°ã®åŸ·ç­†<ul><li><a href="https://blog.studysapuri.jp/entry/2021/03/12/080000" target="_blank" rel="noopener noreferrer">100 ä»¥ä¸Šã® Terraform ç’°å¢ƒã‚’ã„ã„æ„Ÿã˜ã« v0.14 ã« upgrade ã—ãŸæ–¹æ³•</a></li><li><a href="https://blog.studysapuri.jp/entry/2021/03/10/080000" target="_blank" rel="noopener noreferrer">Pull Request ã® terraform plan ã®å®Ÿè¡Œçµæœã‚’ S3 ã«ä¿å­˜ã—ã¦å®‰å…¨ã« apply</a></li></ul></li><li>Terraform ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ<ul><li>CI/CD ã§ã‚„ã£ã¦ã‚‹ã“ã¨</li><li>ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºç’°å¢ƒ setup</li><li>etc</li></ul></li><li>CI ã®æ”¹å–„<ul><li>CircleCI ã® job ã® branch filter ã‚’è¨­å®šã—ã¦ä½™è¨ˆãª job ãŒå®Ÿè¡Œã•ã‚Œãªã„ã‚ˆã†ã«ã—ãŸ</li><li>(é€²è¡Œä¸­) ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã«åˆ†å‰²</li></ul></li><li>(é€²è¡Œä¸­) Lambda ã‚’çˆ†é€Ÿã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¥ãã‚Š<ul><li>Terraform + lambroll + AWS CodeBuild</li></ul></li><li>MongoDB upgrade (Atlas)</li><li>On Boarding ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•´ç†</li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2021-02-01 ~ 2021-02-28]]></title>
            <link>https://techblog.szksh.cloud/2021/02/01/job-02-28</link>
            <guid>https://techblog.szksh.cloud/2021/02/01/job-02-28</guid>
            <pubDate>Sat, 27 Feb 2021 11:51:56 GMT</pubDate>
            <description><![CDATA[* Terraform ãƒªãƒã‚¸ãƒˆãƒªã®çµ±åˆ]]></description>
            <content:encoded><![CDATA[<ul><li>Terraform ãƒªãƒã‚¸ãƒˆãƒªã®çµ±åˆ</li><li><a href="https://blog.studysapuri.jp/entry/2021/03/12/080000" target="_blank" rel="noopener noreferrer">Terraform ã‚’ v0.14 ã¸ upgrade</a></li><li>ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã«åˆ†å‰²</li><li>CircleCI ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²<ul><li><a href="https://blog.studysapuri.jp/entry/2020/12/01/080000" target="_blank" rel="noopener noreferrer">https://blog.studysapuri.jp/entry/2020/12/01/080000</a> ã¨åŒæ§˜ã®ã“ã¨ã‚’åˆ¥ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã‚‚ã‚„ã£ãŸ</li></ul></li><li>Renovate ã®è¨­å®šã‚’æ”¹å–„ã—ã€å®‰å…¨æ€§ã¨é‹ç”¨ã®è² æ‹…è»½æ¸›ã€ã‚ªãƒ¼ãƒ—ãƒ³ãªã¾ã¾ã® PR ã®å‰Šæ¸›</li><li>miam ã® Rate Limit å•é¡Œã®è§£æ¶ˆ</li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2021-01-01 ~ 2021-01-31]]></title>
            <link>https://techblog.szksh.cloud/2021/01/01/job-01-31</link>
            <guid>https://techblog.szksh.cloud/2021/01/01/job-01-31</guid>
            <pubDate>Wed, 10 Feb 2021 23:13:10 GMT</pubDate>
            <description><![CDATA[* CI: PR ã‚³ãƒ¡ãƒ³ãƒˆã®éè¡¨ç¤º]]></description>
            <content:encoded><![CDATA[<ul><li>CI: PR ã‚³ãƒ¡ãƒ³ãƒˆã®éè¡¨ç¤º<ul><li>github-comment, tfcmt<ul><li>éè¡¨ç¤ºä»¥å¤–ã«ã‚‚ç´°ã‹ãªæ”¹å–„å…¥ã‚Œã¦ã„ã‚‹</li></ul></li></ul></li><li>Renovate<ul><li><a href="https://github.com/renovatebot/renovate/pull/8138" target="_blank" rel="noopener noreferrer">label ã‚’è¨­å®š</a></li><li><a href="/renovate-add-compare/">Renovate ã® PR ã«ä¾¿åˆ©ãªãƒªãƒ³ã‚¯ã‚’è¿½åŠ </a></li></ul></li><li>Terraform<ul><li>apply ã“ã‘ãŸã¨ãã« plan å†å®Ÿè¡Œã—ã¦ S3 ã«ä¿å­˜ã—ã¦ã„ã‚‹ plan file åŠã³ PR ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°</li><li><a href="https://github.com/mercari/tfnotify" target="_blank" rel="noopener noreferrer">tfnotify</a> ã‚’ <a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">tfcmt</a> ã«ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹<ul><li><a href="/fork-tfnotify/">tfnotify ã‚’ fork ã—ãŸ</a></li></ul></li></ul></li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2020-12-01 ~ 2020-12-31]]></title>
            <link>https://techblog.szksh.cloud/2020/12/01/job-12-31</link>
            <guid>https://techblog.szksh.cloud/2020/12/01/job-12-31</guid>
            <pubDate>Wed, 10 Feb 2021 23:02:11 GMT</pubDate>
            <description><![CDATA[2020-12-01 ã‹ã‚‰ 2020-12-31 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ã‘ã‚‹ç¯„å›²ã§æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>2020-12-01 ã‹ã‚‰ 2020-12-31 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ã‘ã‚‹ç¯„å›²ã§æ›¸ãã¾ã™ã€‚</p><ul><li>AWS SAM Application ã®é–‹ç™º</li><li><a href="/renovate-add-compare/">Renovate ã® PR ã«ãƒªãƒ³ã‚¯ã‚’è¿½åŠ </a></li><li>Terraform<ul><li>Terraform ã® CI ã«é–¢ã—ã¦æ—¥ã€…è¡Œã£ã¦ã„ã‚‹æ”¹å–„ç‚¹ãƒ»å¤‰æ›´ç‚¹ã‚’ãƒãƒ¼ãƒ ã«ã‚·ã‚§ã‚¢</li><li>Docker Compose ã‚’ç”¨ã„ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã—ã‚„ã™ã„ã‚ˆã†ã«æ”¹å–„</li><li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ã‚³ãƒ¼ãƒ‰ã‚³ãƒ¡ãƒ³ãƒˆã®è¿½åŠ </li><li>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°<ul><li>ä¸è¦ãªã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤</li><li>ä¸è¦ãª secret ã‚’å‰Šé™¤</li><li>ä¸è¦ãªå¤‰æ•°ã®å‰Šé™¤</li><li>data.terraform_remote_state ã‚’ local values ã«ç½®æ›</li><li>ãªãœã‹ç’°å¢ƒå¤‰æ•°ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¦ã„ãŸç®‡æ‰€ã‚’ã€ local value ã«ç½®æ›</li></ul></li><li>CI ã« tflint ã®å°å…¥</li><li>å¯¾è±¡ã® build ãŒ 1 ã¤ã®å ´åˆ batch build ã‚’å®Ÿè¡Œã—ãªã„ã‚ˆã†ã«ã™ã‚‹<ul><li><a href="https://blog.studysapuri.jp/entry/2020/12/03/080000" target="_blank" rel="noopener noreferrer">Terraform ã® CI/CD ã‚’ CodeBuild ã«ç§»è¡Œã—ãŸè©±</a> ã®æ”¹è‰¯</li><li>Batch Build ã®èµ·å‹•ã«æ™‚é–“ãŒã‹ã‹ã‚‹å•é¡Œã®è§£æ¶ˆ</li></ul></li><li>master ã® HEAD ã˜ã‚ƒãªãã¦ã‚‚ apply ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹</li><li>plan file ã‚’ S3 ã«ä¿å­˜</li><li>refactor: tfsec ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã†ã‚ˆã†ã«ã™ã‚‹</li><li>Renovate ã® PR ãŒå¤šã™ãã¦é¬±é™¶ã—ã„å•é¡Œã®å¯¾å¿œ<ul><li>automerge ã•ã‚Œã‚‹ã‚‚ã®ã¯ reviewer ã‚’è¨­å®šã—ãªã„ã‚ˆã†ã«ã—ãŸ</li><li><a href="https://docs.renovatebot.com/configuration-options/#prconcurrentlimit" target="_blank" rel="noopener noreferrer">prConcurrentLimit</a> ã‚’ 1 ã«ã—ãŸ</li><li>branch protection <code>Require branches to be up to date before merging</code> ã‚’ç„¡åŠ¹åŒ–</li></ul></li></ul></li><li><a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">kube-linter</a><ul><li>Rule ã«åŸºã¥ã„ã¦ manifest ã®ä¿®æ­£</li></ul></li><li><a href="https://github.com/codenize-tools/miam" target="_blank" rel="noopener noreferrer">miam</a> ã§ãƒªã‚½ãƒ¼ã‚¹ãŒå‰Šé™¤ã•ã‚Œãã†ãªã¨ãã«è­¦å‘Šã‚’ã™ã‚‹ã‚ˆã†ã«ã—ãŸ</li><li>ãƒ–ãƒ­ã‚°ã®åŸ·ç­†<ul><li><a href="https://blog.studysapuri.jp/entry/2020/12/10/080000" target="_blank" rel="noopener noreferrer">Renovate ã® Tips</a></li><li><a href="https://blog.studysapuri.jp/entry/2020/12/03/080000" target="_blank" rel="noopener noreferrer">Terraform ã® CI/CD ã‚’ CodeBuild ã«ç§»è¡Œã—ãŸè©±</a></li><li><a href="https://blog.studysapuri.jp/entry/2020/12/01/080000" target="_blank" rel="noopener noreferrer">å·¨å¤§ãª .circleci/config.yml ã‚’åˆ†å‰²ã—ãŸè©±</a></li></ul></li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[terraformer ã§é›‘ã«ç”Ÿæˆã—ãŸ tf ãƒ•ã‚¡ã‚¤ãƒ« ã¨ state ã‚’åˆ†å‰²ã—ãŸãã¦ãƒ„ãƒ¼ãƒ«ã‚’æ›¸ã„ãŸ]]></title>
            <link>https://techblog.szksh.cloud/tfmigrator</link>
            <guid>https://techblog.szksh.cloud/tfmigrator</guid>
            <pubDate>Sun, 31 Jan 2021 05:53:23 GMT</pubDate>
            <description><![CDATA[terraformer ã§é›‘ã«ç”Ÿæˆã—ãŸ Terraform ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (ä»¥ä¸‹ tf ãƒ•ã‚¡ã‚¤ãƒ«) ã¨ state ã‚’åˆ†å‰²ã—ãŸãã¦ãƒ„ãƒ¼ãƒ«ã‚’æ›¸ãã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/GoogleCloudPlatform/terraformer" target="_blank" rel="noopener noreferrer">terraformer</a> ã§é›‘ã«ç”Ÿæˆã—ãŸ Terraform ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (ä»¥ä¸‹ tf ãƒ•ã‚¡ã‚¤ãƒ«) ã¨ state ã‚’åˆ†å‰²ã—ãŸãã¦ãƒ„ãƒ¼ãƒ«ã‚’æ›¸ãã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/tfmigrator" target="_blank" rel="noopener noreferrer">tfmigrator</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="çµŒç·¯">çµŒç·¯<a href="#çµŒç·¯" class="hash-link" aria-label="Direct link to çµŒç·¯" title="Direct link to çµŒç·¯">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="miam-ã‹ã‚‰-terraform-ã¸ç§»è¡Œã—ãŸã„">miam ã‹ã‚‰ Terraform ã¸ç§»è¡Œã—ãŸã„<a href="#miam-ã‹ã‚‰-terraform-ã¸ç§»è¡Œã—ãŸã„" class="hash-link" aria-label="Direct link to miam ã‹ã‚‰ Terraform ã¸ç§»è¡Œã—ãŸã„" title="Direct link to miam ã‹ã‚‰ Terraform ã¸ç§»è¡Œã—ãŸã„">â€‹</a></h3><p><a href="https://github.com/codenize-tools/miam" target="_blank" rel="noopener noreferrer">miam</a> ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹å¤§é‡ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ Terraform ã§ç®¡ç†ã—ãŸããªã‚Šã¾ã—ãŸã€‚
å¤šãã® AWS Resource ã¯ Terraform ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ãŒã€ IAM ã«é–¢ã—ã¦ã¯ miam ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚
ãªãœ Terraform ã§ã¯ãªã miam ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã‹ã¨ã„ã†ã¨ã€å½“æ™‚ã®ã“ã¨ã¯è‡ªåˆ†ã«ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ãŒã€æ­´å²çš„ãªçµŒç·¯ã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
æ˜”ã¯ä»Šã‚ˆã‚Šã‚‚ Terraform ã®è¡¨ç¾åŠ›ãŒè±Šã‹ã§ã¯ãªãã€ Ruby ã§è‡ªç”±ã«ã‹ã‘ã‚‹ miam ã®ã»ã†ãŒæ‰±ã„ã‚„ã™ã‹ã£ãŸã¨ã‹ã€
miam ã ã¨ miam ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ã‚’å¼·åˆ¶ã§ãã‚‹ãŸã‚ã€æ¨©é™ç®¡ç†ã‚’å³æ ¼ã«ã‚„ã‚‹ã¨ã„ã†è¦³ç‚¹ã§ã¯éƒ½åˆãŒè‰¯ã„ã¨ã„ã†ç‚¹ã‚‚ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã§ã¯ãªãœ Terraform ã§ç®¡ç†ã—ãŸããªã£ãŸã‹ã¨ã„ã†ã¨ã€
ä¸€ç•ªå¤§ããªç†ç”±ã¯ miam ã§é »ç¹ã« rate limit ã«å¼•ã£ã‹ã‹ã‚‹ã‚ˆã†ã«ãªã£ãŸã‹ã‚‰ã§ã™ã€‚
Terraform ã«ã—ã‚ miam ã«ã—ã‚ CI/CD ã§ test, apply ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
miam ã§ã¯æ¯å›å…¨éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å¯¾è±¡ã«å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€ãƒªã‚½ãƒ¼ã‚¹ã®æ•°ãŒå¢—ãˆã‚‹ã«ã¤ã‚Œã¦ rate limit ã«å¼•ã£ã‹ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚
CI ã‚’ rerun ã™ã‚Œã°æˆåŠŸã™ã‚‹ã®ã§ã™ãŒã€æ‚ªã„ã¨ãã¯ 3 å›é€£ç¶šã§ rate limit ã«å¼•ã£ã‹ã‹ã‚Šã€ 4 å›ç›®ã§ã‚ˆã†ã‚„ãæˆåŠŸã™ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚</p><p>Terraform ã§ã¯ã‚µãƒ¼ãƒ“ã‚¹ã‚„ç’°å¢ƒå˜ä½ã§ State ãŒåˆ†å‰²ã•ã‚Œã¦ãŠã‚Šã€ CI ã‚‚ PR ã§ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸ state ã«å¯¾ã—ã¦ã®ã¿å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€
rate limit ã«å¼•ã£ã‹ã‹ã‚‹ã“ã¨ã¯åŸºæœ¬ãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><p>ä»–ã«ã‚‚è‰²ã€…ç†ç”±ã¯ã‚ã‚‹ã®ã§ã™ãŒã€æœ¬é¡Œã‹ã‚‰ãã‚Œã‚‹ã®ã§ã‚„ã‚ã¦ãŠãã¾ã™ã€‚
rate limit ã ã‘ãªã‚‰ miam ã§ã‚‚ exclude ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§é ‘å¼µã‚Œã°ãªã‚“ã¨ã‹ãªã‚‹æ°—ã¯ã—ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨">ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨<a href="#ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨" class="hash-link" aria-label="Direct link to ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨" title="Direct link to ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨">â€‹</a></h3><ul><li>Terraform ã§æ—¢å­˜ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ç®¡ç†ã—ãŸã„<ul><li>tf ãƒ•ã‚¡ã‚¤ãƒ« ã¨ state ã‚’ç”Ÿæˆã—ãŸã„</li></ul></li><li>Terraform ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« ã¨ state ã¯ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ç’°å¢ƒã”ã¨ã«åˆ†å‰²ã—ãŸã„</li><li>Terraform ã®ãƒªã‚½ãƒ¼ã‚¹ãƒ‘ã‚¹ã¯ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã«ã—ãŸã„<ul><li>ã“ã‚Œã¯é›£ã—ã‘ã‚Œã°è«¦ã‚ã‚‹ã®ã‚‚ã‚ã‚Šã ãŒã€ã§ãã‚Œã°ã‚„ã‚ŠãŸã„</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraformer-ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚‚è‰²ã€…å•é¡ŒãŒã‚ã£ãŸ">terraformer ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚‚è‰²ã€…å•é¡ŒãŒã‚ã£ãŸ<a href="#terraformer-ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚‚è‰²ã€…å•é¡ŒãŒã‚ã£ãŸ" class="hash-link" aria-label="Direct link to terraformer ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚‚è‰²ã€…å•é¡ŒãŒã‚ã£ãŸ" title="Direct link to terraformer ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚‚è‰²ã€…å•é¡ŒãŒã‚ã£ãŸ">â€‹</a></h3><p>ã¾ãšã¯ terraformer ã§é›‘ã« tf ãƒ•ã‚¡ã‚¤ãƒ« ã¨ state ã‚’ç”Ÿæˆã—ã¾ã—ãŸã€‚
ä»Šå› terraformer ã‚’ä½¿ã†ã®ã¯åˆã‚ã¦ã§ã€ terraformer ã§ä¸‡äº‹è§£æ±ºãªã‚‰è©±ã¯ç°¡å˜ã ã£ãŸã®ã§ã™ãŒã€è©±ã¯ãã‚“ãªç°¡å˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
ã“ã‚Œã«é–¢ã—ã¦ã¯ã€è‡ªåˆ†ã®å•é¡Œ(ä½¿ã„æ–¹ã‚’é–“é•ã£ã¦ã„ã‚‹ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã¡ã‚ƒã‚“ã¨èª­ã‚“ã§ã„ãªã„)ãªã®ã‹ã€ ã‚ã‚‹ã„ã¯ terraformer å´ã®å•é¡Œãªã®ã‹ã‚ˆãåˆ†ã‹ã£ã¦ãªã„éƒ¨åˆ†ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ã¾ãšãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã‚‚ã„ã¾ã„ã¡ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®ä»•æ–¹ãŒåˆ†ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
è©¦ã—ã« IAM role ã®åå‰ã‚’æŒ‡å®šã—ã¦ãã‚Œã ã‘ import ã—ã‚ˆã†ã¨ã—ã¾ã—ãŸãŒã€ãªãœã‹å…¨ IAM ãƒªã‚½ãƒ¼ã‚¹ãŒ import ã•ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€‚</p><p>è‰¯ãã‚ã‹ã‚‰ãªã„ã®ã§ã€ã“ã‚Œã¯å…¨ IAM ãƒªã‚½ãƒ¼ã‚¹ã‚’é›‘ã« import ã—ã¦ã‹ã‚‰ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ç’°å¢ƒã”ã¨ã«åˆ†å‰²ã™ã‚‹ã—ã‹ç„¡ã„ã‹ãªãã¨æ€ã„ã¾ã—ãŸã€‚</p><p>åŠ ãˆã¦ã€ãƒªã‚½ãƒ¼ã‚¹ãƒ‘ã‚¹ãŒå…¨ç„¶ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ terraformer ã¨ã—ã¦ã¯ã“ã‚Œã¯ä»•æ–¹ãªã„ã¨æ€ã„ã¾ã™ãŒã€ãªã‚“ã¨ã‹ãƒªãƒãƒ¼ãƒ ã—ãŸã„ã¨æ€ã„ã¾ã—ãŸã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€åˆæ‰‹ä½œæ¥­ã§å§‹ã‚ã‚‹ã‚‚è‡ªå‹•åŒ–ãŒå¿…è¦ã¨æ‚Ÿã‚‹">æœ€åˆæ‰‹ä½œæ¥­ã§å§‹ã‚ã‚‹ã‚‚ã€è‡ªå‹•åŒ–ãŒå¿…è¦ã¨æ‚Ÿã‚‹<a href="#æœ€åˆæ‰‹ä½œæ¥­ã§å§‹ã‚ã‚‹ã‚‚è‡ªå‹•åŒ–ãŒå¿…è¦ã¨æ‚Ÿã‚‹" class="hash-link" aria-label="Direct link to æœ€åˆæ‰‹ä½œæ¥­ã§å§‹ã‚ã‚‹ã‚‚ã€è‡ªå‹•åŒ–ãŒå¿…è¦ã¨æ‚Ÿã‚‹" title="Direct link to æœ€åˆæ‰‹ä½œæ¥­ã§å§‹ã‚ã‚‹ã‚‚ã€è‡ªå‹•åŒ–ãŒå¿…è¦ã¨æ‚Ÿã‚‹">â€‹</a></h3><p>æœ€åˆç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã—ã¦æ‰‹ä½œæ¥­ã§ tf ãƒ•ã‚¡ã‚¤ãƒ«, state ã‚’ç§»è¡Œã™ã‚‹ä½œæ¥­ã‚’è¡Œã£ã¦ã¿ã¾ã—ãŸã€‚
ç°¡å˜ãªã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦åŠè‡ªå‹•åŒ–ã—ã¦ã¿ã¾ã—ãŸã€‚
tf ãƒ•ã‚¡ã‚¤ãƒ«ã®æ“ä½œã«ã¯ <a href="https://github.com/minamijoyo/hcledit" target="_blank" rel="noopener noreferrer">hcledit</a> ãŒä¾¿åˆ©ã§ã™ã€‚</p><p>ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ã¾ã—ãŸã€‚</p><ul><li>terraform state mv</li><li>hcledit block get</li><li>hcledit block mv</li><li>hcledit block list</li></ul><p>ã§ã€ã‚„ã£ã¦ã¿ãŸã‚‚ã®ã®ã€ãªã«ã›å¯¾è±¡ãŒå¤šã„ã®ã§ã€ã“ã‚Œã‚’ä¸€ã¤ä¸€ã¤æ‰‹ä½œæ¥­ã§ã‚„ã‚‹ã®ã¯å¤§å¤‰ã ã—ã€ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ã‚¨ãƒ©ãƒ¼ã¯é¿ã‘ã‚‰ã‚Œãªã„ã¨æ„Ÿã˜ã¾ã—ãŸã€‚
ãã“ã§ã¡ã‚‡ã£ã¨ã—ãŸãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚
æ‰‹ä½œæ¥­ã§ä¸€å›ã‚„ã£ãŸåˆ†æ‰‹é †ã¯ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ãã¦ã„ã‚‹ã®ã§ã€å‰²ã¨ç°¡å˜ã«ã§ãã‚‹ã ã‚ã†ã¨æ€ã„ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tfmigrator">tfmigrator<a href="#tfmigrator" class="hash-link" aria-label="Direct link to tfmigrator" title="Direct link to tfmigrator">â€‹</a></h2><p>ãã“ã§ä½œã£ãŸã®ãŒ <a href="https://github.com/suzuki-shunsuke/tfmigrator" target="_blank" rel="noopener noreferrer">tfmigrator</a> ã§ã™ã€‚
ä»Šå›ã¯ AWS ã® IAM ãƒªã‚½ãƒ¼ã‚¹ã‚’æ‰±ã„ã¾ã™ãŒã€ tfmigrator ã¯ç‰¹å®šã® provider ãªã©ã«ã¯ä¾å­˜ã—ãªã„ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
Terraform CLI ã¨ hcledit ãŒå¿…è¦ã§ã™ã€‚</p><p>ã¾ãš terraformer ã§ IAM ãƒªã‚½ãƒ¼ã‚¹ã‚’å…¨éƒ¨ import ã—ã¦ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraformer import aws -r iam --compact --path-pattern .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã†ã™ã‚‹ã¨ resources.tf ã¨ terraform.tfstate ãŒä½œã‚‰ã‚Œã¾ã™ã€‚</p><p>tfmigrator ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« tfmigrator.yaml ã‚’æ›¸ãã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">items</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ—¢ã« Terraform ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯ç„¡è¦–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">rule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'"tags" in Values &amp;&amp; Values.tags.ManagedBy == "Terraform"'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">exclude</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">rule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'"name" not in Values'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">exclude</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># `name` ã« "foo" ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯ã‚µãƒ¼ãƒ“ã‚¹ foo ã®ãƒªã‚½ãƒ¼ã‚¹ã¨ã¿ãªã—ã¦åˆ†å‰²</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">rule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Values.name contains "foo"'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">state_out</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo/terraform.tfstate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"{{.Values.name}}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tf_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo/resource.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ä»¥ä¸‹ç•¥</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>tfmigrator ã®å‡¦ç†ã®æµã‚Œã‚’ãªã‚“ã¨ãªããã‚Œã£ã½ã„æ“¬ä¼¼è¨€èªã§è¡¨ç¾ã—ã¾ã™ã€‚
å®Ÿéš›ã®å‡¦ç†ã®æµã‚Œã¨ã¯è‹¥å¹²ç•°ãªã‚Šã¾ã™ãŒã€é›°å›²æ°—ãŒä¼ã‚ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for resource in state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for item config.items</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if item.rule.match(resource)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if item.exclude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # ã“ã®ãƒªã‚½ãƒ¼ã‚¹ã¯å‡¦ç†ã›ãšæ¬¡ã®ãƒªã‚½ãƒ¼ã‚¹ã®å‡¦ç†ã«ç§»ã‚‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # tf ã® migration (note: å…ƒã® tf ã¯ãã®ã¾ã¾)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      hcledit block get resource.path &lt; tf | hcledit block mv resource.path "${resource.type}.${item.resource_name(resource)}" &gt;&gt; item.tf_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      terraform state mv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # æ¬¡ã®ãƒªã‚½ãƒ¼ã‚¹ã®å‡¦ç†ã«ç§»ã‚‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      break</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å„ item ã®è¨­å®šã®æ„å‘³ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p><ul><li>rule: <a href="https://github.com/antonmedv/expr/blob/master/docs/Language-Definition.md" target="_blank" rel="noopener noreferrer">expr</a> ã® expression ã€‚ã“ã®æ¡ä»¶ã«ãƒãƒƒãƒã—ãŸãƒªã‚½ãƒ¼ã‚¹ã‚’ã“ã® item ã§å‡¦ç†ã™ã‚‹</li><li>exclude: true ã®å ´åˆã€ã“ã® item ã«ãƒãƒƒãƒã—ãŸãƒªã‚½ãƒ¼ã‚¹ã¯ç„¡è¦–ã™ã‚‹</li><li>state_out: <code>terraform state mv</code> ã® <code>-state-out</code></li><li>resource_name: æ–°ã—ã„ãƒªã‚½ãƒ¼ã‚¹åã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯åå‰ã¯ãã®ã¾ã¾ã€‚ Go ã® <a href="https://golang.org/pkg/text/template/" target="_blank" rel="noopener noreferrer">text/template</a> ã§å‡¦ç†ã•ã‚Œã¾ã™</li><li>tf_path: Terraform ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å‡ºåŠ›å…ˆ</li></ul><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ãŸã‚‰ tfmigrator ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
ã„ããªã‚Šãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã™ã‚‹ã¨ã„ã†ã‚ˆã‚Šã¯ã€ã¾ãšã¯ dry run ã¦ããªã“ã¨ã‚’ã—ã¦å‹•ä½œã‚’ç¢ºèªã—ãŸã„ã§ã™ã­ã€‚
<code>-skip-state</code> ã‚’ã¤ã‘ã‚‹ã¨ <code>terraform state mv</code> ã‚’ skip ã—ã€åˆ†å‰²ã•ã‚Œã‚‹ tf ãƒ•ã‚¡ã‚¤ãƒ« ã‚’æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã ã‘ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat *.tf | tfmigrator run -skip-state</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”Ÿæˆã•ã‚ŒãŸ tf ãƒ•ã‚¡ã‚¤ãƒ« ã‚’çœºã‚ã¦ã€è‰¯ã•ãã†ãªã‚‰ <code>-skip-state</code> ã‚’ã¨ã£ã¦å®Ÿè¡Œã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tf-ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆæ™‚ã®æ³¨æ„ç‚¹">tf ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆæ™‚ã®æ³¨æ„ç‚¹<a href="#tf-ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆæ™‚ã®æ³¨æ„ç‚¹" class="hash-link" aria-label="Direct link to tf ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆæ™‚ã®æ³¨æ„ç‚¹" title="Direct link to tf ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆæ™‚ã®æ³¨æ„ç‚¹">â€‹</a></h2><p>tf ãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆã¯ç¾çŠ¶è¿½è¨˜ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ãªã®ã§ <code>-skip-state</code> ã‚’ã¤ã‘ã¦è¤‡æ•°å›å®Ÿè¡Œã™ã‚‹ã¨åŒã˜è¨­å®šãŒé‡è¤‡ã—ã¦æ›¸ãè¾¼ã¾ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
ãã‚ŒãŒå›°ã‚‹å ´åˆã¯å®Ÿè¡Œå‰ã«å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¶ˆã—ã¦ã‹ã‚‰å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p><p>ã¾ãŸã€tf ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»è¡Œã¯æ—¢å­˜ã® tf ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ <code>hcledit block get</code>, <code>hcledit block mv</code> ã‚’å®Ÿè¡Œã—ã¦è¡Œã‚ã‚Œã‚‹ãŸã‚ã€
å…ƒã® tf ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãã®ã¾ã¾æ®‹ã‚‹ã“ã¨ã€ã¾ãŸ expression ã¯è©•ä¾¡ã•ã‚Œãªã„ã“ã¨ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
ä¾‹ãˆã° <code>name = var.name</code> ã®ã‚ˆã†ã«å¤‰æ•°ã‚’å‚ç…§ã—ã¦ã„ã‚‹å ´åˆã€ãã‚Œã‚‚ãã®ã¾ã¾è©•ä¾¡ã•ã‚Œãšã«æ®‹ã‚Šã¾ã™ã€‚
ã¨ã‚Šã‚ãˆãšè‡ªåˆ†ãŒã‚„ã‚ŠãŸã‹ã£ãŸã®ã¯ terraformer ã§ç”Ÿæˆã—ãŸ tf ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»è¡Œã ã£ãŸã®ã§ã€ãã‚“ãªã«å•é¡Œã«ã¯ãªã‚‰ãªã„ã ã‚ã†ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°">ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°<a href="#ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°" class="hash-link" aria-label="Direct link to ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°" title="Direct link to ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°">â€‹</a></h2><p>ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã£ãŸã‚‰å³åº§ã«ç•°å¸¸çµ‚äº†ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
(å½“ç„¶ã§ã™ãŒ)ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã‹ã¯ã—ã¾ã›ã‚“(ã—ã€ã§ãã¾ã›ã‚“)ã€‚
ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã—ã¤ã¤æ¬¡ã®ãƒªã‚½ãƒ¼ã‚¹ã®å‡¦ç†ã«ç§»ã‚‹ã€ã¨ã„ã†ã®ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ãŒã€é–“é•ã£ã¦ <code>terraform state mv</code> ã•ã‚Œã‚‹ã¨é¢å€’ãªã®ã§ã€ç¾çŠ¶å³åº§ã«çµ‚äº†ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
å•é¡Œã®ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚’ç„¡è¦–ã—ãŸã„å ´åˆã¯ã€ tfmigrator ã®è¨­å®šã§ãã®ãƒªã‚½ãƒ¼ã‚¹ã«ãƒãƒƒãƒã™ã‚‹ item ã‚’è¿½åŠ ã— <code>exclude: true</code> ã¨ã™ã‚Œã°ã‚ˆã„ã§ã—ã‚‡ã†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã“ã®ãƒ„ãƒ¼ãƒ«ã®ä¾¿åˆ©ãªã¨ã“ã‚">ã“ã®ãƒ„ãƒ¼ãƒ«ã®ä¾¿åˆ©ãªã¨ã“ã‚<a href="#ã“ã®ãƒ„ãƒ¼ãƒ«ã®ä¾¿åˆ©ãªã¨ã“ã‚" class="hash-link" aria-label="Direct link to ã“ã®ãƒ„ãƒ¼ãƒ«ã®ä¾¿åˆ©ãªã¨ã“ã‚" title="Direct link to ã“ã®ãƒ„ãƒ¼ãƒ«ã®ä¾¿åˆ©ãªã¨ã“ã‚">â€‹</a></h2><ul><li>expr ã‚’ç”¨ã„ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’åˆ†é¡ã§ãã‚‹</li><li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã—ã€ãƒ¯ãƒ³ãƒ»ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã§ãã‚‹<ul><li>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ãã‚‹</li><li>å¾Œã§è¦‹è¿”ã›ã‚‹</li></ul></li></ul><p>ãƒ­ãƒ¼ã‚«ãƒ«ã§è©¦è¡ŒéŒ¯èª¤ã—ãªãŒã‚‰è¤‡æ•°ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã¨ã€å¾Œã§ãªã«ã‚„ã£ãŸã‹ã‚ã‹ã‚‰ãªããªã‚ŠãŒã¡ã§ã™ã—ã€é€”ä¸­ã§ä½œæ¥­ã‚’ä¸­æ–­ã—ãŸã‚Šã™ã‚‹ã¨ã€ã‚ã¨ã§ä»Šã©ã†ã„ã†çŠ¶æ…‹ãªã®ã‹åˆ†ã‹ã‚‰ãªããªã£ãŸã‚Šã—ã¾ã™ã€‚
ãƒ¯ãƒ³ãƒ»ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã§ãã‚‹ã¨ãã†ã„ã†å•é¡ŒãŒãªãã¦ä¾¿åˆ©ã§ã™ã­ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è‚å¿ƒã®ç§»è¡Œã¯ã§ããŸã®ã‹">è‚å¿ƒã®ç§»è¡Œã¯ã§ããŸã®ã‹<a href="#è‚å¿ƒã®ç§»è¡Œã¯ã§ããŸã®ã‹" class="hash-link" aria-label="Direct link to è‚å¿ƒã®ç§»è¡Œã¯ã§ããŸã®ã‹" title="Direct link to è‚å¿ƒã®ç§»è¡Œã¯ã§ããŸã®ã‹">â€‹</a></h2><p>ã¾ã ã§ãã¦ã„ã¾ã›ã‚“ã€‚ç§»è¡Œã™ã‚‹ãŸã‚ã« tfmigrator ã‚’ä½œã£ãŸã®ã§ã€ã“ã‚Œã‹ã‚‰ç§»è¡Œã—ã¦ã„ã“ã†ã¨ã„ã†æ®µéšã§ã™ã€‚
ãªã®ã§ tfmigrator ã¯ã¾ã å…¨ç„¶ä½¿ã„è¾¼ã‚“ã§ãªã„ã§ã™ã—ã€ä½¿ã£ã¦ãä¸­ã§æ©Ÿèƒ½ä¿®æ­£ã—ãŸã‚Šã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€å¾Œã«">æœ€å¾Œã«<a href="#æœ€å¾Œã«" class="hash-link" aria-label="Direct link to æœ€å¾Œã«" title="Direct link to æœ€å¾Œã«">â€‹</a></h2><p>terraformer ã§é›‘ã« import ã—ã¦ããŸ tf ãƒ•ã‚¡ã‚¤ãƒ«ã¨ state ã‚’ã„ã„æ„Ÿã˜ã«åˆ†å‰²ã™ã‚‹ãŸã‚ã« tfmigrator ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚
tfmigrator ãŒå½¹ã«ç«‹ã¤ã‚±ãƒ¼ã‚¹ã¯å‰²ã¨é™ã‚‰ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã‹ã€æ—¥å¸¸çš„ã«ä½¿ã†ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã§ã‚‚ãªã„ã§ã™ãŒã€
terraformer ã§é›‘ã« import ã—ã¦ããŸã®ã¯è‰¯ã„ãŒã€æ‰±ã„ã«å›°ã£ã¦ã„ã‚‹ãªã‚“ã¦äººã«ã¯å½¹ã«ç«‹ã¤ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>terraform</category>
        </item>
        <item>
            <title><![CDATA[skaffold ã‚’ä½¿ã£ã¦ GitOps ã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/gitops-skaffold</link>
            <guid>https://techblog.szksh.cloud/gitops-skaffold</guid>
            <pubDate>Mon, 11 Jan 2021 07:24:44 GMT</pubDate>
            <description><![CDATA[skaffold ã‚’ç”¨ã„ã¦ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’å‹•çš„ã«ç”Ÿæˆã—ã¤ã¤ GitOps ã™ã‚‹æ–¹æ³•ã‚’è€ƒãˆãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>skaffold ã‚’ç”¨ã„ã¦ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’å‹•çš„ã«ç”Ÿæˆã—ã¤ã¤ GitOps ã™ã‚‹æ–¹æ³•ã‚’è€ƒãˆãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚
ãªãŠã€ç¾æ™‚ç‚¹ã§ã¯ã‚ãã¾ã§è€ƒãˆã¦ã¿ãŸã ã‘ã§å®Ÿéš›ã«å°å…¥ã—ãŸã‚Šã¯ã—ã¦ã„ã¾ã›ã‚“ã€‚</p><p>GitOps ã¯ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ Git ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã¨ã„ã‘ãªã„ã‚ã‘ã§ã™ãŒã€
Docker image ã‚’ãƒ“ãƒ«ãƒ‰ã€ãƒ—ãƒƒã‚·ãƒ¥ã—ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã® image tag ã‚’æ›¸ãæ›ãˆã‚‹ã¨ã„ã†ä¸€é€£ã®å‡¦ç†ã‚’ã©ã†ã‚„ã£ã¦ã‚„ã‚‹ã®ãŒã„ã„ã®ã‹
å€‹äººçš„ã«è€ƒãˆã¦ã„ã¾ã—ãŸã€‚</p><p>è‡ªåˆ†ã¯ FluxCD ã«ã¯è©³ã—ããªã„ã®ã§ã™ãŒã€
FluxCD ã§ã¯ registry ã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã—ã¦è‡ªå‹•ã§æœ€æ–°ã®ã‚¿ã‚°ã«æ›¸ãæ›ãˆã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹ãã†ã§ã™ã­ã€‚</p><p><a href="https://toolkit.fluxcd.io/guides/image-update/" target="_blank" rel="noopener noreferrer">https://toolkit.fluxcd.io/guides/image-update/</a></p><p>ãŸã ã—ã€ã¾ã  alpha ã§ã‚ã‚‹ã“ã¨ã¨ã€ semver ã«å¾“ã£ã¦ã„ãªã„ã¨ã„ã‘ãªã„ã‚ˆã†ã§ã™ã€‚
ã“ã‚Œã ã¨ master branch ãŒ update ã•ã‚Œã‚‹ãŸã³ã« image ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ sha ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹ã¿ãŸã„ãªé‹ç”¨ã¯é›£ã—ãã†ã§ã™ã€‚</p><p>Skaffold ã ã¨ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã® image tag ã‚’è‡ªå‹•ã§æ›¸ãæ›ãˆã¦ãã‚Œã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
åŠ ãˆã¦ <a href="https://skaffold.dev/docs/references/cli/#skaffold-render" target="_blank" rel="noopener noreferrer">skaffold render</a> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã¨ manifest ã® apply ã¯ã›ãšã«ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®å‡ºåŠ›ã ã‘ã‚„ã£ã¦ãã‚Œã¾ã™ã€‚
å‡ºåŠ›ã•ã‚ŒãŸ manifest ã‚’ Git ãƒªãƒã‚¸ãƒˆãƒªã« commit, push ã™ã‚Œã° GitOps ãŒå®Ÿç¾ã§ããã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how">How<a href="#how" class="hash-link" aria-label="Direct link to How" title="Direct link to How">â€‹</a></h2><p>ãƒªãƒã‚¸ãƒˆãƒªã‚’ 2 ã¤ç”¨æ„ã—ã¾ã™ã€‚</p><ul><li>app: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã¨ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ç®¡ç†ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒª</li><li>manifest: GitOps ãŒé€£æºã™ã‚‹ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ç®¡ç†ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒª</li></ul><p>app ã¯ Monorepo ã«ãªã£ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯æ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã¦ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">services/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  foo/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    skaffold.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      base/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        kustomization.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      overlays/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        develop/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          kustomization.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        production/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          kustomization.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>skaffold.yaml</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> skaffold/v2beta10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tagPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gitCommit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">prefix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> develop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">artifacts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kustomize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> kubernetes/overlays/develop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tagPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">gitCommit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">prefix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kustomize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> kubernetes/overlays/production</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://skaffold.dev/docs/environment/profiles/" target="_blank" rel="noopener noreferrer">profile</a> ã«ã‚ˆã£ã¦ develop ã¨ production ã‚’åŒºåˆ¥ã—ã¦ã„ã¾ã™ã€‚</p><p>manifest ã§ã¯ tag ã‚’æŒ‡å®šã—ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>skaffold render</code> ã§ manifest ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ skaffold render \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p production \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --default-repo xxx.dkr.ecr.ap-northeast-1.amazonaws.com \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --offline=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --loud=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --output manifest.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>--loud=true</code> ã‚’ã¤ã‘ãªã„ã¨ãªã«ã‚‚å‡ºåŠ›ã—ãªã„ã®ã§ãªã«ãŒèµ·ã“ã£ã¦ã‚‹ã®ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚</p><p>ç”Ÿæˆã•ã‚ŒãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ã¿ã‚‹ã¨ tag ãŒè‡ªå‹•ã§ä»˜ä¸ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx.dkr.ecr.ap</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">northeast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1.amazonaws.com/foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">production</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e3a42e0@sha256</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">7032af912c511ab0c8353c28604461d8960833144953fb50853f087db55ffdd0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”Ÿæˆã—ãŸ manifest ã‚’ <code>manifest</code> ãƒªãƒã‚¸ãƒˆãƒªã« commit, push ã—ã¾ã™ã€‚
manifest ãƒªãƒã‚¸ãƒˆãƒªã‚’ checkout ã—ã¦ãã¦ git ã‚³ãƒãƒ³ãƒ‰ã§ã‚„ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ <a href="https://github.com/int128/ghcp" target="_blank" rel="noopener noreferrer">ghcp</a> ã‚’ä½¿ã†ã¨ã‚³ãƒãƒ³ãƒ‰1ã¤ã§ã§ãã‚‹ã®ã§ä¾¿åˆ©ã§ã™ã€‚</p><p>manifest ãƒªãƒã‚¸ãƒˆãƒªã¯å¯¾è±¡ã®ã‚µãƒ¼ãƒ“ã‚¹åŠã³ç’°å¢ƒã”ã¨ã«ãƒ–ãƒ©ãƒ³ãƒã‚’åˆ†ã‘ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚
ãã†ã—ãŸã»ã†ãŒ push ã®éš›ã«å¤±æ•—ã—ã«ãã„ã¨æ€ã„ã¾ã™(å¤šåˆ†ã€‚åˆ†ã‹ã‚‰ãªã„ã‘ã©)ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ghcp commit -u suzuki-shunsuke -r manifest -b "foo/production" -m "message" manifest.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>message ã¯å®Ÿéš›ã«ã¯ã‚‚ã£ã¨è©³ç´°ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã™ã¹ãã§ã—ã‚‡ã†ã€‚ CI ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ãªã‚‹ã¨æ€ã†ã®ã§ã€ build URL ã‚’å«ã‚ãŸã‚Šã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><p>ã“ã†ã™ã‚‹ã¨ <code>foo/production</code> ãƒ–ãƒ©ãƒ³ãƒã« manifest.yaml ãŒ push ã•ã‚Œã¾ã™ã€‚
ã‚ã¨ã¯ ArgoCD ã‚„ FluxCD ã®ã‚ˆã†ãª GitOps ãƒ„ãƒ¼ãƒ« ã§ foo/production ã® manifest.yaml ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚Œã°ã‚ˆã„ã¯ãšã§ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> argoproj.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> argocd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">repoURL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/suzuki</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">shunsuke/manifest.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">targetRevision</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo/production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> manifest.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">destination</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//kubernetes.default.svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã•ã„ã”ã«">ã•ã„ã”ã«<a href="#ã•ã„ã”ã«" class="hash-link" aria-label="Direct link to ã•ã„ã”ã«" title="Direct link to ã•ã„ã”ã«">â€‹</a></h2><p>ä»¥ä¸Šã€ Skaffold ã‚’ä½¿ã£ã¦ã„ã„æ„Ÿã˜ã« tag ã‚’æ›¸ãæ›ãˆã¦ GitOps ã™ã‚‹ä»•çµ„ã¿ã‚’è€ƒãˆã¦ã¿ã¾ã—ãŸã€‚
Skaffold ä½¿ã†ã¨ Docker image ã® build, push ã¨ã„ã£ãŸä¸€é€£ã®æµã‚Œã‚‚å…¨éƒ¨ã‚„ã£ã¦ãã‚Œã‚‹ã®ã§æ¥½ã§è‰¯ã„ãªã¨æ„Ÿã˜ã¾ã—ãŸã€‚</p><p>GitOps ã˜ã‚ƒãªãã¦ã‚‚ CIOps ã§ã‚‚ Skaffold ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ä¾¿åˆ©ãã†ã ãªã¨æ€ã„ã¾ã—ãŸã€‚
ãã®å ´åˆã¯ <code>skaffold render</code> ã§ã¯ãªãã€ <a href="https://skaffold.dev/docs/references/cli/#skaffold-run" target="_blank" rel="noopener noreferrer">skaffold run</a> ã«ãªã‚Šãã†ã§ã™ã­ã€‚</p><p><a href="https://skaffold.dev/docs/workflows/ci-cd/" target="_blank" rel="noopener noreferrer">https://skaffold.dev/docs/workflows/ci-cd/</a></p>]]></content:encoded>
            <category>skaffold</category>
            <category>gitops</category>
            <category>k8s</category>
        </item>
        <item>
            <title><![CDATA[tfnotify ã‚’ fork ã—ãŸ]]></title>
            <link>https://techblog.szksh.cloud/fork-tfnotify</link>
            <guid>https://techblog.szksh.cloud/fork-tfnotify</guid>
            <pubDate>Sat, 02 Jan 2021 10:42:10 GMT</pubDate>
            <description><![CDATA[mercari/tfnotify ã‚’ Fork ã—ã¦ 2 ã¤ã»ã© OSS ã‚’ä½œã‚Šã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/mercari/tfnotify" target="_blank" rel="noopener noreferrer">mercari/tfnotify</a> ã‚’ Fork ã—ã¦ 2 ã¤ã»ã© OSS ã‚’ä½œã‚Šã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/tfnotify" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tfnotify</a> - tfnotify ã¨äº’æ›æ€§ã‚ã‚Š</li><li><a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tfcmt</a> - tfnotify ã¨äº’æ›æ€§ãŒãªã„</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é–‹ç™ºã®çµŒç·¯">é–‹ç™ºã®çµŒç·¯<a href="#é–‹ç™ºã®çµŒç·¯" class="hash-link" aria-label="Direct link to é–‹ç™ºã®çµŒç·¯" title="Direct link to é–‹ç™ºã®çµŒç·¯">â€‹</a></h2><p>ã“ã‚Œã¾ã§ tfnotify ã‚’ä¾¿åˆ©ã«ä½¿ã‚ã›ã¦ã‚‚ã‚‰ã£ã¦ãŸã®ã§ã™ãŒã€å¹¾ã¤ã‹æ”¹å–„ã—ãŸã„ã¨æ€ã†ã¨ã“ã‚ãŒã‚ã‚Šã€æœ¬å®¶ã« PR ã‚’æŠ•ã’ã¾ã—ãŸã€‚
ã—ã‹ã—æ®‹å¿µãªãŒã‚‰ã“ã‚Œã¾ã§ã®ã¨ã“ã‚åå¿œãŒãªãã€ãã“ã¾ã§æœ¬å®¶ãŒæ´»ç™ºã§ã¯ãªã„ã“ã¨ã€ã¾ãŸä»–ã«ã‚‚è‰²ã€…æ”¹ä¿®ã—ãŸã„ã¨ã“ã‚ãŒã‚ã£ãŸã“ã¨ã‹ã‚‰ã€è‡ªåˆ†ã§ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¦ãƒ¡ãƒ³ãƒ†ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚
æœ€åˆã¯äº’æ›æ€§ã‚’ç¶­æŒã—ãªãŒã‚‰ <a href="https://github.com/suzuki-shunsuke/tfnotify" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/tfnotify</a> ã‚’é–‹ç™ºã—ã¦ã„ã¾ã—ãŸ(ä»Šã‚‚ã—ã¦ã„ã¾ã™)ã€‚
ã—ã‹ã—ã€é–‹ç™ºã‚’é€²ã‚ã‚‹ã«é€£ã‚Œã€è‡ªåˆ†ã«ã¨ã£ã¦å¿…è¦ã®ãªã„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãªã©ã«é–¢ã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒé‚ªé­”ã§ã‚ã‚‹ã¨æ„Ÿã˜ã€ãã‚Œã‚‰ã‚’æ¶ˆã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ¥ã«é–‹ç™ºã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚
äº’æ›æ€§ãŒãªããªã‚‹ã“ã¨ã‹ã‚‰ã€åå‰ã‚‚å¤‰ãˆã¦ tfcmt ã¨ã—ã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/tfcmt" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tfcmt</a></p><p>ã“ã†ã„ã£ãŸçµŒç·¯ã‹ã‚‰ã€ tfcmt ã®ã»ã†ã‚’å„ªå…ˆçš„ã«é–‹ç™ºã—ã¦ã„ã¾ã™ãŒã€ tfcmt ã§å®Ÿè£…ã—ãŸæ©Ÿèƒ½ã‚’å¾Œã‹ã‚‰ suzuki-shunsuke/tfnotify ã«ã‚‚å®Ÿè£…ã—ã¦ãŸã‚Šã‚‚ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fork-å…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³">Fork å…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³<a href="#fork-å…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³" class="hash-link" aria-label="Direct link to Fork å…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³" title="Direct link to Fork å…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³">â€‹</a></h2><p><a href="https://github.com/suzuki-shunsuke/tfnotify" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/tfnotify</a> ã¯ <a href="https://github.com/mercari/tfnotify/releases/tag/v0.7.0" target="_blank" rel="noopener noreferrer">mercari/tfnotify v0.7.0</a> <a href="https://github.com/mercari/tfnotify/commit/fb178d8a5a51f88a51b7fda93ed5443ff56dfc8f" target="_blank" rel="noopener noreferrer">fb178d8</a> ã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¾ã—ãŸã€‚
ä¸€æ–¹ tfcmt ã¯ <a href="https://github.com/suzuki-shunsuke/tfnotify/releases/tag/v1.3.3" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/tfnotify v1.3.3</a> ã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mercaritfnotify-ã¨ã®é•ã„">mercari/tfnotify ã¨ã®é•ã„<a href="#mercaritfnotify-ã¨ã®é•ã„" class="hash-link" aria-label="Direct link to mercari/tfnotify ã¨ã®é•ã„" title="Direct link to mercari/tfnotify ã¨ã®é•ã„">â€‹</a></h2><p>æœ¬å®¶ã¨ã®é•ã„ã¯ Release Note ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><ul><li>suzuki-shunsuke/tfnotify<ul><li><a href="https://github.com/suzuki-shunsuke/tfnotify/releases" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tfnotify/releases</a></li><li><a href="https://github.com/suzuki-shunsuke/tfnotify/blob/master/COMPARED_WITH_TFNOTIFY.md" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tfnotify/blob/master/COMPARED_WITH_TFNOTIFY.md</a></li></ul></li><li>suzuki-shunsuke/tfcmt<ul><li><a href="https://github.com/suzuki-shunsuke/tfcmt/releases" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tfcmt/releases</a></li><li><a href="https://github.com/suzuki-shunsuke/tfcmt/blob/master/COMPARED_WITH_TFNOTIFY.md" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tfcmt/blob/master/COMPARED_WITH_TFNOTIFY.md</a></li></ul></li></ul>]]></content:encoded>
            <category>oss</category>
            <category>terraform</category>
        </item>
        <item>
            <title><![CDATA[2019-10 ã‹ã‚‰ä»Š(2020-12-31)ã«è‡³ã‚‹ã¾ã§ä»•äº‹ã§ã‚„ã£ã¦ã„ã‚‹ã“ã¨]]></title>
            <link>https://techblog.szksh.cloud/my-work-2020</link>
            <guid>https://techblog.szksh.cloud/my-work-2020</guid>
            <pubDate>Thu, 31 Dec 2020 02:00:40 GMT</pubDate>
            <description><![CDATA[2019-10-01 ã‹ã‚‰ä»Šã®è·å ´ã§ SRE ã¨ã—ã¦åƒã„ã¦ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>2019-10-01 ã‹ã‚‰ä»Šã®è·å ´ã§ SRE ã¨ã—ã¦åƒã„ã¦ã„ã¾ã™ã€‚
ãã®ä¸­ã§è‡ªåˆ†ãŒã©ã†ã„ã†ã“ã¨ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹ã¨ã„ã†è©±ã‚’ã—ã¾ã™ã€‚</p><p>2020-12-31 ç¾åœ¨ã®å†…å®¹ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¦ç´„">è¦ç´„<a href="#è¦ç´„" class="hash-link" aria-label="Direct link to è¦ç´„" title="Direct link to è¦ç´„">â€‹</a></h2><ul><li>ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ¨ªæ–­çš„ãª SRE ãƒãƒ¼ãƒ ã§ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’é‹ç”¨ãƒ»é–‹ç™ºã—ã¦ã„ã‚‹</li><li>ç‰¹ã« CI/CD ã®æ”¹å–„ãŒå¾—æ„</li><li>developer ã« CI/CD ã‚’ã„ã‚ã°ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦æä¾›ã—ã¦ãŠã‚Šã€ DX ã®æ”¹å–„ã«å–ã‚Šçµ„ã‚“ã§ã„ã‚‹</li><li>Monorepo ã®è² ã®å´é¢(CIãŒé…ã„ã€é–¢ä¿‚ãªã„TestãŒã“ã‘ã‚‹etc)ã®è§£æ¶ˆã«ã‚‚å–ã‚Šçµ„ã‚“ã§ã„ã‚‹</li><li>è‡ªåˆ†ãŒç›´é¢ã—ã¦ã„ã‚‹èª²é¡Œã‚’è§£æ±ºã™ã‚‹ OSS ã‚’è‰²ã€…é–‹ç™ºã—ã¦ã„ã‚‹</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰<a href="#ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰" class="hash-link" aria-label="Direct link to ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰" title="Direct link to ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰">â€‹</a></h2><ul><li>SRE</li><li>Monorepo</li><li>CI/CD</li><li>Developer Experience</li><li>Terraform</li><li>Go / Shell script</li><li>k8s</li><li>CircleCI / CodeBuild</li><li>Conftest</li><li>Renovate</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚ˆã‚Šå…·ä½“çš„ã«ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ã„ãŸè¨˜äº‹">ã‚ˆã‚Šå…·ä½“çš„ã«ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ã„ãŸè¨˜äº‹<a href="#ã‚ˆã‚Šå…·ä½“çš„ã«ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ã„ãŸè¨˜äº‹" class="hash-link" aria-label="Direct link to ã‚ˆã‚Šå…·ä½“çš„ã«ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ã„ãŸè¨˜äº‹" title="Direct link to ã‚ˆã‚Šå…·ä½“çš„ã«ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ã„ãŸè¨˜äº‹">â€‹</a></h2><ul><li>å€‹äººãƒ–ãƒ­ã‚°<ul><li><a href="https://techblog.szksh.cloud/job-2020-10-01-10-31/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/job-2020-10-01-10-31/</a></li><li><a href="https://techblog.szksh.cloud/job-2020-07-01-09-30/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/job-2020-07-01-09-30/</a></li><li><a href="https://techblog.szksh.cloud/job-2020-04-01-06-30/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/job-2020-04-01-06-30/</a></li><li><a href="https://techblog.szksh.cloud/job-2020-01-01-03-31/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/job-2020-01-01-03-31/</a></li><li><a href="https://techblog.szksh.cloud/job-2019-10-01-12-31/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/job-2019-10-01-12-31/</a></li></ul></li><li>ä¼šç¤¾ãƒ–ãƒ­ã‚°<ul><li><a href="https://blog.studysapuri.jp/entry/2020/12/10/080000" target="_blank" rel="noopener noreferrer">Renovate ã® Tips</a></li><li><a href="https://blog.studysapuri.jp/entry/2020/12/03/080000" target="_blank" rel="noopener noreferrer">Terraform ã® CI/CD ã‚’ CodeBuild ã«ç§»è¡Œã—ãŸè©±</a></li><li><a href="https://blog.studysapuri.jp/entry/2020/12/01/080000" target="_blank" rel="noopener noreferrer">å·¨å¤§ãª .circleci/config.yml ã‚’åˆ†å‰²ã—ãŸè©±</a></li><li><a href="https://blog.studysapuri.jp/entry/2020/11/02/080000" target="_blank" rel="noopener noreferrer">Docker Hub ã® Rate Limit å•é¡Œã«å¯¾å¿œã—ãŸè©±</a></li><li><a href="https://blog.studysapuri.jp/entry/2020/04/06/080000" target="_blank" rel="noopener noreferrer">CI ã®ä¿®æ­£ã‚’ãƒªãƒªãƒ¼ã‚¹å‰ã«æœ¬ç•ªã¨åŒã˜æ¡ä»¶ä¸‹ã§æ¤œè¨¼å‡ºæ¥ã‚‹ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã—ãŸè©±</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹">ä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹<a href="#ä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹" class="hash-link" aria-label="Direct link to ä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹" title="Direct link to ä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹">â€‹</a></h2><p>ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ¨ªæ–­çš„ãª SRE ãƒãƒ¼ãƒ ã§ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’é‹ç”¨ãƒ»é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚</p><p>SRE ã¨ä¸€è¨€ã§è¨€ã£ã¦ã‚‚ã€ãã®é ˜åŸŸã¯éå¸¸ã«å¤šå²ã«ã‚ãŸã‚Šã¾ã™ã€‚
çµ„ç¹”ã«ã‚ˆã£ã¦ <code>SRE</code> ã®å®Ÿæ…‹ã¯ç•°ãªã‚‹ã§ã—ã‚‡ã†ã€‚
ä¾‹ãˆã° SRE ã¨ã¯åˆ¥ã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å°‚é–€ãƒãƒ¼ãƒ ãŒã‚ã‚‹ã‚ˆã†ãªçµ„ç¹”ã‚‚ã‚ã‚‹ã¨ã¯æ€ã„ã¾ã™ãŒã€
ç¾è·ã§ã¯ãã®ã‚ˆã†ãªã‚‚ã®ã¯ãªã„ã®ã§ãã“ã‚‚ SRE ãŒè¦‹ã¦ã„ã¾ã™ã€‚
å…¨ã¦ã®é ˜åŸŸã«é–¢ã—ã¦å€‹äººãŒã‚¹ãƒšã‚·ãƒ£ãƒªãƒ†ã‚£ã‚’æŒã¤ã¨ã„ã†ã®ã¯éå¸¸ã«é›£ã—ã„ã®ã§ã€
å…¨ä½“çš„ã«ã‚ã‚‹ç¨‹åº¦ã‚«ãƒãƒ¼ã—ã¤ã¤ã‚‚ç‰¹å®šã®é ˜åŸŸã«å¯¾ã—ã‚¹ãƒšã‚·ãƒ£ãƒªãƒ†ã‚£ã‚’æŒã¤ã¨ã„ã†ã®ãŒå‰²ã¨ç¾å®Ÿçš„ãªè©±ã ã¨æ€ã„ã¾ã™ã€‚</p><p>è‡ªåˆ†ã®å ´åˆã€ CI/CD ã®æ”¹å–„ã‚’å¼·ã¿ã¨ã—ã€ãã“ã«ä¸»ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚
ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’é‹ç”¨ãƒ»é–‹ç™ºã—ã¦ã„ã‚‹ã¨è¨€ã„ã¾ã—ãŸãŒã€ãã‚Œã«ã¯ CI/CD ã‚‚å«ã¾ã‚Œã¾ã™ã€‚
ç¾è·ã§ã¯ Monorepo ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒæ¡ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
Monorepo ã«ã™ã‚‹ã“ã¨ã§è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã¾ãŸãŒã‚‹å¤‰æ›´ã‚’ 1 ã¤ã® Pull Request (ä»¥ä¸‹PR) ã§ã¾ã¨ã‚ã¦å‡ºæ¥ãŸã‚Šã€ CI/CD ãªã©ã®ä»•çµ„ã¿ã‚’å…±é€šåŒ–ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ç¾è·ã§ã¯å¹¾ã¤ã‹ã® Monorepo ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã¨ k8s manifest ã® Monorepo</li><li>Ansible ã® Monorepo</li><li>Terraform ã® Monorepo</li><li>ãªã©ãªã©</li></ul><p>Monorepo ã®ä¸­ã§ CI/CD ã«é–¢ã—ã¦ã¯ SRE ãŒ ownership ã‚’æŒã¡ã€è¨€ã‚ã°ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ developer ã«æä¾›ã—ã¦ã„ã¾ã™ã€‚
ã¨ã„ã£ã¦ã‚‚ Jenkins ã‚„ CircleCI ã®ã‚ˆã†ãªã‚‚ã®ã‚’è‡ªä½œã—ã¦ã„ã‚‹ã¨ã„ã†æ„å‘³ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
CI/CD ã«ã¯ä¸»ã« CircleCI ã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒã€CIã®è¨­å®šã‚„ CI/CD ã§ä½¿ã‚ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã©ã‚’ãƒ¡ãƒ³ãƒ†ã—ã¦ã„ã¾ã™ã€‚
å…¨ã¦ã‚’ SRE ãŒæ›¸ãã¨ã„ã†ã“ã¨ã§ã¯ãªãã€ã‚€ã—ã‚ developer ãŒæ–°ã—ã„ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã™ã‚‹éš›ã«ç°¡å˜ã« CI/CD ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><p>ä¾‹ãˆã° Terraform ã§ã¯ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ç’°å¢ƒ(staging, production, etc) ã”ã¨ã« State ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†ã‘ã¦ã„ã¾ã™ãŒã€æ–°ã—ã„ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã™ã‚‹éš›ã¯ã€ã¾ãšã¯ generator ã‚’å®Ÿè¡Œã—ã¦ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã—ã€ãã“ã« Terraform ã® configuration ã‚’æ›¸ã‘ã° CI/CD ã§ test ã‚„ lint, apply ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
å…ƒã€…æ–°ã—ã„ã‚µãƒ¼ãƒ“ã‚¹ã®è¿½åŠ æ™‚ã«ã¯ .circleci/config.yml ã«è¨­å®šã‚’æ›¸ãè¶³ã™å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸãŒã€
æœ€è¿‘ <a href="https://blog.studysapuri.jp/entry/2020/12/03/080000" target="_blank" rel="noopener noreferrer">Terraform ã® CI/CD ã‚’ CircleCI ã‹ã‚‰ CodeBuild ã«ç§»è¡Œã—ãŸ</a> ã“ã¨ã§ãã‚ŒãŒä¸€åˆ‡ä¸è¦ã«ãªã‚Šã¾ã—ãŸã€‚æ—¥ã€…é€²åŒ–ã—ã¦ã„ã¾ã™ã€‚
å˜ã« PR ã§ terraform plan ã—ã¦ master ã§ terraform apply ã™ã‚‹ã ã‘ãªã‚‰ç°¡å˜ã§ã™ãŒã€
ã‚ˆã‚Š DX ã®é«˜ã„ã‚‚ã®ã«ã™ã‚‹ã®ãŒè‡ªåˆ†ã®å¼·ã¿ãƒ»å°‚é–€æ€§ã§ã™ã€‚</p><p>Lint ã‚„ Test ã‚’å°å…¥ã—ãŸã‚Šã‚‚ã—ã¾ã™ã€‚å‹¿è«– Rails ãªã©ã§æ›¸ã‹ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¨ã„ã†ã“ã¨ã§ã¯ãªã(ãã‚Œã‚’æ›¸ãã®ã¯åŸºæœ¬ developer)ã€ä¾‹ãˆã° k8s ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ†ã‚¹ãƒˆã‚„ Terraform ã® lint ãªã©ã§ã™ã€‚
Lint ã‚„ Test ã¯ã€å°å…¥ã—ã¦ CI ãŒå¤±æ•—ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚‰çµ‚ã‚ã‚Šã€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ç¾è·ã§ã¯ developer ãŒ k8s ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚„ Terraform ã® configuration ã‚‚æ›¸ãã¾ã™ãŒã€å¿…ãšã—ã‚‚å…¨å“¡ãŒãã‚Œã‚‰ã«ç¿’ç†Ÿã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
å¤±æ•—ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã‚‚ã€developer ãŒå¤±æ•—ã—ãŸåŸå› ã‚’ç†è§£ã§ããªã‹ã£ãŸã‚‰ã€ç„¡é§„ã« rerun ã—ã¦ã¿ã¦çµå±€è§£æ±ºã—ãªãã¦ SRE ã«è³ªå•ã—ã¦ãã‚‹ã ã‘ã§ã™ã€‚
ãã†ã§ã¯ãªãã€ ãªãœ CI ãŒã“ã‘ãŸã®ã‹ã€ã©ã†ã™ã‚Œã°ã„ã„ã®ã‹ã€ãã® lint ã¯ã©ã†ã„ã†çµŒç·¯ã§å°å…¥ã•ã‚ŒãŸã®ã‹ãªã©ã‚’ developer ãŒè‡ªåˆ†ã§ç†è§£ã—ã€è‡ªå·±è§£æ±ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™(å‹¿è«–å¿…è¦ã«å¿œã˜ã¦å•ã„åˆã‚ã›ãŒç™ºç”Ÿã™ã‚‹ã®ã¯ä»•æ–¹ãªã„ã§ã™ã—ã€é æ…®ã¯ã—ã¦ã»ã—ãã¯ã‚ã‚Šã¾ã›ã‚“)ã€‚
ãã“ã§ PR ã«ãã‚Œã‚‰ã®æƒ…å ±ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰ç°¡å˜ã«ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹ã‚ˆã†ã« OSS ã¨ã—ã¦ãƒ„ãƒ¼ãƒ«ã‚‚é–‹ç™ºã—ã¦ã„ã¾ã™(<a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">gihtub-comment</a>)ã€‚ </p><p>Monorepo ã§ã¯å˜ç´”ã«å…¨ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆãƒ»ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Ÿè¡Œã™ã‚‹ã¨æ™‚é–“ãŒã‹ã‹ã£ãŸã‚Šã€ PR ã«é–¢ä¿‚ãªã„ãƒ†ã‚¹ãƒˆãŒè½ã¡ãŸã‚Šã—ã¾ã™ã€‚
ãã®ãŸã‚ã€å¿…è¦ãª job ã ã‘å®Ÿè¡Œã™ã‚‹ã‚ˆã†ãªä»•çµ„ã¿ãŒå¿…è¦ã§ã™ã€‚
ãã®ã¸ã‚“ã‚’ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ãšã«ã„ã„æ„Ÿã˜ã«å‡ºæ¥ã‚‹ã®ãŒç†æƒ³ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ Monorepo ã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã¯ãã“ã¾ã§é†¸æˆã—ã¦ã„ãªã„ã¨æ€ã£ã¦ãŠã‚Šã€è‡ªåˆ†ãŸã¡ã§ã‚ã‚‹ç¨‹åº¦ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
è‡ªåˆ†ã¯ Go ã‚„ Shell Script ã§ãã†ã„ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’æ™®æ®µæ›¸ãã¾ã™ã€‚</p><p>ç¾è·ã® Monorepo ã®ã†ã¡ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã¨ k8s manifest ã® Monorepo ã¯éå¸¸ã«å¤§ããã€ CI/CD ã‚’ãƒŠã‚¤ãƒ¼ãƒ–ã«å®Ÿè£…ã™ã‚‹ã¨éå¸¸ã«æ™‚é–“ãŒã‹ã‹ã£ãŸã‚ŠåŠ¹ç‡ãŒæ‚ªã‹ã£ãŸã‚Šã—ã¾ã™ã€‚
ãã†ã„ã£ãŸå•é¡Œç‚¹ã‚’è¦‹ã¤ã‘å‡ºã—ã€ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ã‚‚ã‚„ã‚Šã¾ã—ãŸã€‚</p><p>ãã®ä¸­ã§ç”Ÿã¾ã‚ŒãŸ OSS ã‚‚ã‚ã‚Šã¾ã™ã€‚
è‡ªåˆ†ãŒç›´é¢ã—ã¦ã„ã‚‹èª²é¡Œã‚’è§£æ±ºã™ã‚‹ OSS ã‚’é–‹ç™ºã™ã‚‹ã®ãŒè‡ªåˆ†ã®ãƒ©ã‚¤ãƒ•ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/profile#libraries" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/profile#libraries</a></p><p>ä»•äº‹ã§ã‚‚ä½¿ã£ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’å¹¾ã¤ã‹ç´¹ä»‹ã—ã¾ã™ã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">gihtub-comment</a> GitHub ã® PR, commit ã«ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ãƒ„ãƒ¼ãƒ«</li><li><a href="https://github.com/suzuki-shunsuke/circleci-config-merge" target="_blank" rel="noopener noreferrer">circleci-config-merge</a> åˆ†å‰²ã•ã‚ŒãŸ .circleci/config.yml ã‚’ãƒãƒ¼ã‚¸</li><li><a href="https://github.com/suzuki-shunsuke/github-ci-monitor" target="_blank" rel="noopener noreferrer">github-ci-monitor</a> CI ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ DataDog ã§ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ AWS SAM application</li><li><a href="https://github.com/suzuki-shunsuke/matchfile" target="_blank" rel="noopener noreferrer">matchfile</a> Monorepo ã® CI ã§ã€ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ãŒä¾å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›´ãŒã‚ã£ãŸã‹åˆ¤å®šã™ã‚‹ã®ã«ä¾¿åˆ©</li><li><a href="https://github.com/suzuki-shunsuke/ci-info" target="_blank" rel="noopener noreferrer">ci-info</a> GitHub API ã‚’ä½¿ã£ã¦ CI ã®æƒ…å ±ã‚’å–å¾—</li><li><a href="https://github.com/suzuki-shunsuke/dd-time" target="_blank" rel="noopener noreferrer">dd-time</a> ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚é–“ã‚’ DataDog ã«é€ã‚‹</li><li><a href="https://github.com/suzuki-shunsuke/akoi" target="_blank" rel="noopener noreferrer">akoi</a> ãƒã‚¤ãƒŠãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2020-11-01 ~ 2020-11-30]]></title>
            <link>https://techblog.szksh.cloud/2020/11/01/job-11-30</link>
            <guid>https://techblog.szksh.cloud/2020/11/01/job-11-30</guid>
            <pubDate>Tue, 29 Dec 2020 20:44:14 GMT</pubDate>
            <description><![CDATA[2020-11-01 ã‹ã‚‰ 2020-11-30 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ã‘ã‚‹ç¯„å›²ã§æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>2020-11-01 ã‹ã‚‰ 2020-11-30 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ã‘ã‚‹ç¯„å›²ã§æ›¸ãã¾ã™ã€‚</p><ul><li><a href="/github-ci-monitor/">github-ci-monitor ã‚’å°å…¥ã—ã€ CI ã®å¤±æ•—ã‚’é€šçŸ¥</a><ul><li><a href="https://github.com/suzuki-shunsuke/github-ci-monitor" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/github-ci-monitor</a></li></ul></li><li>Terraform<ul><li>Upgrade AWS Provider: Renovate ã§è‡ªå‹•æ›´æ–°ã™ã‚‹ä»•çµ„ã¿ã®æ”¹å–„</li><li>Upgrade Terraform from v0.12 to v0.13</li><li><a href="https://github.com/tfsec/tfsec" target="_blank" rel="noopener noreferrer">tfsec</a> ã®å°å…¥</li><li>PR ã® label ã«ã‚ˆã£ã¦ CI(plan/apply) ã®å®Ÿè¡Œå¯¾è±¡ã‚’è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li><li><a href="https://blog.studysapuri.jp/entry/2020/12/03/080000" target="_blank" rel="noopener noreferrer">CircleCI ã‹ã‚‰ CodeBuild ã¸ã®ç§»è¡Œ</a></li><li><a href="https://github.com/minamijoyo/tfmigrate" target="_blank" rel="noopener noreferrer">tfmigrate</a> ã®æ¤œè¨¼</li></ul></li><li>Monorepo ã® CI ã®é«˜é€ŸåŒ– (CircleCI)<ul><li>k8s manifest ã® test ã‚’ã€å¤‰æ›´ãŒã‚ã£ãŸã‚‚ã®ã«å¯¾ã—ã¦ã ã‘å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul></li><li><a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">kube-linter</a> ã®å°å…¥</li><li>Renovate<ul><li><a href="https://blog.studysapuri.jp/entry/2020/12/10/080000" target="_blank" rel="noopener noreferrer">https://blog.studysapuri.jp/entry/2020/12/10/080000</a></li><li>additionalBranchPrefix ã«ã‚ˆã‚‹ãƒ–ãƒ©ãƒ³ãƒã®åˆ†å‰²</li><li>depName ã‚’ä½¿ã£ãŸãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°</li></ul></li><li><a href="https://blog.studysapuri.jp/entry/2020/12/01/080000" target="_blank" rel="noopener noreferrer">.circleci/config.yml ã®åˆ†å‰²</a></li><li>ãƒ–ãƒ­ã‚°ã®åŸ·ç­†<ul><li><a href="https://blog.studysapuri.jp/entry/2020/11/02/080000" target="_blank" rel="noopener noreferrer">Docker Hub ã® Rate Limit å•é¡Œã«å¯¾å¿œã—ãŸè©±</a></li></ul></li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[Renovate ã® PR ã«ä¾¿åˆ©ãªãƒªãƒ³ã‚¯ã‚’è¿½åŠ ]]></title>
            <link>https://techblog.szksh.cloud/renovate-add-compare</link>
            <guid>https://techblog.szksh.cloud/renovate-add-compare</guid>
            <pubDate>Mon, 28 Dec 2020 05:32:31 GMT</pubDate>
            <description><![CDATA[Renovate ã«ã‚ˆã‚‹ PR ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹éš›ã€å·®åˆ†ãŒãªã‚“ãªã®ã‹åˆ†ã‹ã‚Šã¥ã‚‰ã„ã¨ããŒã‚ã‚Šã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Renovate ã«ã‚ˆã‚‹ PR ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹éš›ã€å·®åˆ†ãŒãªã‚“ãªã®ã‹åˆ†ã‹ã‚Šã¥ã‚‰ã„ã¨ããŒã‚ã‚Šã¾ã™ã€‚
ä¾‹ãˆã° data source ãŒ github-release ã®å ´åˆã€ PR ã® description ã« Release Note ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ã‚³ãƒ¼ãƒ‰ã®å·®åˆ†ã‚‚ link ãŒã‚ã‚‹ã®ã§ä¾¿åˆ©ã§ã™ã€‚
ä¸€æ–¹ helm data source ã®å ´åˆã€ ãã†ã„ã£ãŸã‚‚ã®ãŒãªãå·®åˆ†ãŒãªã‚“ãªã®ã‹åˆ†ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
ãã†ã„ã†å ´åˆã€ <a href="https://docs.renovatebot.com/configuration-options/#prbodynotes" target="_blank" rel="noopener noreferrer">prBodyNotes</a> ã‚’åˆ©ç”¨ã—ã¦ link ã‚’è¿½åŠ ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚</p><p>ä¾‹ãˆã°ã€ datadog helm chart ã®å ´åˆ</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"datasources"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"helm"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"packageNames"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"datadog"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"prBodyNotes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"[compare](https://github.com/DataDog/helm-charts/compare/datadog-{{currentVersion}}...datadog-{{newVersion}})"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¨ã™ã‚‹ã¨ã€ PR ã® description ã«ãƒªãƒ³ã‚¯ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚åœ°å‘³ã§ã™ãŒä¾¿åˆ©ã§ã™ã€‚
Release page ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¿½åŠ ã—ã¦ã‚‚ä¾¿åˆ©ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚</p><p>ex. <a href="https://github.com/suzuki-shunsuke/test-renovate-2/pull/28" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/test-renovate-2/pull/28</a></p><p>template ã§ä½¿ãˆã‚‹å¤‰æ•°ã¯ <a href="https://docs.renovatebot.com/templates/" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/templates/</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
helm chart ã”ã¨ã«è¨­å®šã‚’æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã®ãŒé¢å€’ã§ã™ãŒã€ä»•æ–¹ãªã„ã§ã™ã­ã€‚</p>]]></content:encoded>
            <category>renovate</category>
        </item>
        <item>
            <title><![CDATA[Renovate ã¨ Dependabot ã®æ¯”è¼ƒ]]></title>
            <link>https://techblog.szksh.cloud/compare-renovate-dependabot</link>
            <guid>https://techblog.szksh.cloud/compare-renovate-dependabot</guid>
            <pubDate>Sat, 05 Dec 2020 03:37:17 GMT</pubDate>
            <description><![CDATA[æ™®æ®µ Renovate ã‚’ä¸»ã«ä½¿ã£ã¦ã„ã‚‹è‡ªåˆ†ãŒã€ Dependabot ã¨ Renovate ã®é•ã„ã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>æ™®æ®µ Renovate ã‚’ä¸»ã«ä½¿ã£ã¦ã„ã‚‹è‡ªåˆ†ãŒã€ Dependabot ã¨ Renovate ã®é•ã„ã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚
æ™®æ®µ Renovate ã‚’ä¸»ã«ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€ Renovate å¯„ã‚Šã®å†…å®¹ã«ãªã£ã¦ã„ã¾ã™ã€‚
æ°—åˆ†ã‚’å®³ã™ã‚‹äººãŒã„ã¾ã—ãŸã‚‰ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚
Dependabot ã®ç†è§£ãŒæµ…ã„ã®ã§é–“é•ã£ã¦ãŸã‚‰æŒ‡æ‘˜ã—ã¦ã‚‚ã‚‰ãˆã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™ã€‚
2020-12-01 æ™‚ç‚¹ã®æƒ…å ±ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¨­å®šé …ç›®ã®æ•°">è¨­å®šé …ç›®ã®æ•°<a href="#è¨­å®šé …ç›®ã®æ•°" class="hash-link" aria-label="Direct link to è¨­å®šé …ç›®ã®æ•°" title="Direct link to è¨­å®šé …ç›®ã®æ•°">â€‹</a></h2><ul><li><a href="https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/configuration-options-for-dependency-updates#directory" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/configuration-options-for-dependency-updates#directory</a></li><li><a href="https://docs.renovatebot.com/configuration-options/" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/configuration-options/</a></li></ul><p>ã¾ãšã¯è¨­å®šã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹æ¯”ã¹ã‚‹ã¨ã€ Renovate ã®ã»ã†ãŒè¨­å®šé …ç›®ãŒå¤šã„ã§ã™ã€‚
Renovate ã¯ã‚ˆãè¨€ã†ã¨è¨­å®šé …ç›®ãŒå¤šãã€æŸ”è»Ÿãªè¨­å®šãŒã§ãã‚‹ã¨ã„ãˆã‚‹ä¸€æ–¹ã€ã™ã¹ã¦ã®è¨­å®šã‚’ç†è§£ã—ä½¿ã„ã“ãªã™ã®ã¯é›£ã—ã„ã§ã™ã€‚
æ±ºã—ã¦æ—¥æœ¬èªã®æƒ…å ±ã‚‚å¤šããªã„ã®ã§ã€è‰²ã€…è©¦è¡ŒéŒ¯èª¤ã—ãŸã‚Šã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚
Dependabot ã®å ´åˆã€è¨­å®šãŒãã‚“ãªã«å¤šããªãå‰²ã¨åˆ†ã‹ã‚Šã‚„ã™ã„å°è±¡ãŒã‚ã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="scheduling">scheduling<a href="#scheduling" class="hash-link" aria-label="Direct link to scheduling" title="Direct link to scheduling">â€‹</a></h2><ul><li><a href="https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/configuration-options-for-dependency-updates#scheduleinterval" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/configuration-options-for-dependency-updates#scheduleinterval</a></li><li><a href="https://docs.renovatebot.com/configuration-options/#prhourlylimit" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/configuration-options/#prhourlylimit</a></li><li><a href="https://docs.renovatebot.com/configuration-options/#schedule" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/configuration-options/#schedule</a></li></ul><p>Dependabot ã¯ schedule ã®è¨­å®šãŒå¿…é ˆã§ã™ã€‚
Renovate ã§ã‚‚ schedule ã®è¨­å®šã¯å‡ºæ¥ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependabot-ã¯-1-å€‹-1-å€‹è¨­å®šã—ãªã„ã¨ã„ã‘ãªã„">Dependabot ã¯ 1 å€‹ 1 å€‹è¨­å®šã—ãªã„ã¨ã„ã‘ãªã„ï¼Ÿ<a href="#dependabot-ã¯-1-å€‹-1-å€‹è¨­å®šã—ãªã„ã¨ã„ã‘ãªã„" class="hash-link" aria-label="Direct link to Dependabot ã¯ 1 å€‹ 1 å€‹è¨­å®šã—ãªã„ã¨ã„ã‘ãªã„ï¼Ÿ" title="Direct link to Dependabot ã¯ 1 å€‹ 1 å€‹è¨­å®šã—ãªã„ã¨ã„ã‘ãªã„ï¼Ÿ">â€‹</a></h2><p>Renovate ã¯ renovate.json ã•ãˆä½œã‚Œã°ä¸­èº«ãŒã»ã¼ç©ºã§ã‚‚å‹æ‰‹ã« update ã•ã‚Œã¾ã™ã€‚
é€†ã«å¯¾è±¡ã‚’çµã‚ŠãŸã‹ã£ãŸã‚‰æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä¸€æ–¹ã§ Dependabot ã¯å¯¾è±¡ã‚’ 1 ã¤ 1 ã¤æŒ‡å®šã—ãªã„ã¨ã„ã‘ãªã„ã‚ˆã†ã§ã™ã­ã€‚</p><p>ã‚‚ã¡ã‚ã‚“ã€ã“ã‚Œã¯å¿…ãšã—ã‚‚æ‚ªã„ã“ã¨ã§ã¯ãªã„ã§ã™ã—ã€è‰¯ã„é¢ã‚‚ã‚ã‚Šã¾ã™ã€‚
è¨­å®šãŒæ˜ç¤ºçš„ã«æ›¸ã‹ã‚Œã¦ã„ãŸã»ã†ãŒæŒ™å‹•ã‚’ç†è§£ã—ã‚„ã™ã„ã§ã™ã—ã­ã€‚</p><p>ãŸã ã—ã€æ•°ãŒå¤šã„ã¨å¤§å¤‰ã§ã™ã—ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã™ã‚‹ãŸã³ã«è¨­å®šã‚’è¿½åŠ ã—ãªã„ã¨ã„ã‘ãªã•ãã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="renovate-ã¯-circleciconfigyml-ãªã©ã®-update-ã‚‚ã‚µãƒãƒ¼ãƒˆ">Renovate ã¯ .circleci/config.yml ãªã©ã® update ã‚‚ã‚µãƒãƒ¼ãƒˆ<a href="#renovate-ã¯-circleciconfigyml-ãªã©ã®-update-ã‚‚ã‚µãƒãƒ¼ãƒˆ" class="hash-link" aria-label="Direct link to Renovate ã¯ .circleci/config.yml ãªã©ã® update ã‚‚ã‚µãƒãƒ¼ãƒˆ" title="Direct link to Renovate ã¯ .circleci/config.yml ãªã©ã® update ã‚‚ã‚µãƒãƒ¼ãƒˆ">â€‹</a></h2><ul><li><a href="https://docs.renovatebot.com/modules/manager/" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/modules/manager/</a></li><li><a href="https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/configuration-options-for-dependency-updates#package-ecosystem" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/configuration-options-for-dependency-updates#package-ecosystem</a></li></ul><p>Renovate ã¯ .circleci/config.yml ã‚„ .drone.yml ã® Docker image ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® update ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚
Dependabot ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã‚ˆã†ã§ã™ã­ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="renovate-ã¯æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹-update-ã‚’ã‚µãƒãƒ¼ãƒˆ">Renovate ã¯æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹ update ã‚’ã‚µãƒãƒ¼ãƒˆ<a href="#renovate-ã¯æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹-update-ã‚’ã‚µãƒãƒ¼ãƒˆ" class="hash-link" aria-label="Direct link to Renovate ã¯æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹ update ã‚’ã‚µãƒãƒ¼ãƒˆ" title="Direct link to Renovate ã¯æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹ update ã‚’ã‚µãƒãƒ¼ãƒˆ">â€‹</a></h2><p><a href="https://docs.renovatebot.com/modules/manager/regex/" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/modules/manager/regex/</a></p><p>GitHub Releases ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã¦ã„ã‚‹ã‚ˆã†ãªå ´åˆã§ã‚‚ã€
Renovate ã§ã¯ Regex Manager ã‚’ä½¿ãˆã° update å‡ºæ¥ã¾ã™ã€‚
CI ã§ä½¿ã£ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ GitHub Releases ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã®ã§é‡å®ã—ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="renovate-ã¯-grouping-ã‚’ã‚µãƒãƒ¼ãƒˆ">Renovate ã¯ Grouping ã‚’ã‚µãƒãƒ¼ãƒˆ<a href="#renovate-ã¯-grouping-ã‚’ã‚µãƒãƒ¼ãƒˆ" class="hash-link" aria-label="Direct link to Renovate ã¯ Grouping ã‚’ã‚µãƒãƒ¼ãƒˆ" title="Direct link to Renovate ã¯ Grouping ã‚’ã‚µãƒãƒ¼ãƒˆ">â€‹</a></h2><p>Renovate ã¯è¤‡æ•°ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’åŒã˜ PR ã§ã¾ã¨ã‚ã¦ update ã§ãã¾ã™ã€‚</p><p><a href="https://docs.renovatebot.com/configuration-options/#group" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/configuration-options/#group</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="renovate-ã§-pr-ã‚’ã¾ã¨ã‚ã‚‰ã‚ŒãŸããªã„å ´åˆã¯-additionalbranchprefix-ãªã©ã®è¨­å®šãŒå¿…è¦">Renovate ã§ PR ã‚’ã¾ã¨ã‚ã‚‰ã‚ŒãŸããªã„å ´åˆã¯ additionalBranchPrefix ãªã©ã®è¨­å®šãŒå¿…è¦<a href="#renovate-ã§-pr-ã‚’ã¾ã¨ã‚ã‚‰ã‚ŒãŸããªã„å ´åˆã¯-additionalbranchprefix-ãªã©ã®è¨­å®šãŒå¿…è¦" class="hash-link" aria-label="Direct link to Renovate ã§ PR ã‚’ã¾ã¨ã‚ã‚‰ã‚ŒãŸããªã„å ´åˆã¯ additionalBranchPrefix ãªã©ã®è¨­å®šãŒå¿…è¦" title="Direct link to Renovate ã§ PR ã‚’ã¾ã¨ã‚ã‚‰ã‚ŒãŸããªã„å ´åˆã¯ additionalBranchPrefix ãªã©ã®è¨­å®šãŒå¿…è¦">â€‹</a></h2><p><a href="https://docs.renovatebot.com/configuration-options/#additionalbranchprefix" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/configuration-options/#additionalbranchprefix</a></p><p>Renovate ã ã¨åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ä½¿ã£ã¦ã„ã‚‹å ´åˆã€ä½•ã‚‚è¨­å®šã—ãªã„ã¨ 1 ã¤ã® PR ã«æ›´æ–°ãŒã¾ã¨ã‚ã‚‰ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚
additionalBranchPrefix ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§å›é¿ãŒã§ãã¾ã™ãŒã€ã“ã®è§£æ±ºç­–ã‚’è¦‹ã¤ã‘ã‚‹ã¾ã§ã«å°‘ã€…è‹¦åŠ´ã—ã¾ã—ãŸã€‚
Renovate ã®é›£ã—ã„ã¨ã“ã‚ã§ã™ã­ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="renovate-ã¯è¨­å®šã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚ˆã†ã«å…±æœ‰ã§ãã‚‹">Renovate ã¯è¨­å®šã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚ˆã†ã«å…±æœ‰ã§ãã‚‹<a href="#renovate-ã¯è¨­å®šã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚ˆã†ã«å…±æœ‰ã§ãã‚‹" class="hash-link" aria-label="Direct link to Renovate ã¯è¨­å®šã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚ˆã†ã«å…±æœ‰ã§ãã‚‹" title="Direct link to Renovate ã¯è¨­å®šã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚ˆã†ã«å…±æœ‰ã§ãã‚‹">â€‹</a></h2><p><a href="https://docs.renovatebot.com/config-presets/" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/config-presets/</a></p><p>Renovate ã¯æ±ç”¨çš„ãªè¨­å®šã‚’ OSS ã®ã‚ˆã†ã«å…¬é–‹ã—å†åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ä»•äº‹ã ã¨ç‰¹ã«ä½¿ã£ã¦ãªã„ã§ã™ãŒã€
å€‹äººã® Go ã® Project ãªã‚“ã‹ã¯åŒã˜ã‚‚ã®ã‚’ä½¿ã£ã¦ã„ã¦ã€ä¾¿åˆ©ã§ã™ã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/renovate-config/blob/master/golang.json" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/renovate-config/blob/master/golang.json</a></li><li><a href="https://github.com/suzuki-shunsuke/github-comment/blob/master/renovate.json" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/github-comment/blob/master/renovate.json</a></li></ul>]]></content:encoded>
            <category>dependabot</category>
            <category>renovate</category>
        </item>
        <item>
            <title><![CDATA[Terraform ã® Docker Provider ã® Collaborator ã«ãªã‚Šã¾ã—ãŸ]]></title>
            <link>https://techblog.szksh.cloud/collaborator-of-terraform-docker-provider</link>
            <guid>https://techblog.szksh.cloud/collaborator-of-terraform-docker-provider</guid>
            <pubDate>Thu, 03 Dec 2020 00:07:32 GMT</pubDate>
            <description><![CDATA[å…ˆæ—¥ kreuzwerker/terraform-provider-docker ã® Collaborator ã«ãªã‚Šã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>å…ˆæ—¥ <a href="https://github.com/kreuzwerker/terraform-provider-docker" target="_blank" rel="noopener noreferrer">kreuzwerker/terraform-provider-docker</a> ã® Collaborator ã«ãªã‚Šã¾ã—ãŸã€‚
<a href="https://github.com/kreuzwerker/terraform-provider-docker" target="_blank" rel="noopener noreferrer">kreuzwerker/terraform-provider-docker</a> ã¯ Terraform ã® Docker Provider ã§ã‚ã‚Šã€ Docker ã‚³ãƒ³ãƒ†ãƒŠã‚„ image, network ãªã©ã‚’ç®¡ç†ã§ãã¾ã™ã€‚
å…ƒã€…ã¯ Hashicorp ã® Official Provider ã§ã‚ã£ãŸ <a href="https://github.com/terraform-providers/terraform-provider-docker" target="_blank" rel="noopener noreferrer">terraform-providers/terraform-provider-docker</a> ãŒ <a href="https://github.com/kreuzwerker/terraform-provider-docker" target="_blank" rel="noopener noreferrer">kreuzwerker/terraform-provider-docker</a> ã«ç§»ç®¡ã•ã‚Œã€ Community Provider ã«ãªã‚Šã¾ã—ãŸã€‚
å…ƒã®ãƒªãƒã‚¸ãƒˆãƒªã¯ hashicorp org ã«ç§»ã•ã‚Œ archive ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="collaborator-ã«ãªã£ãŸçµŒç·¯">Collaborator ã«ãªã£ãŸçµŒç·¯<a href="#collaborator-ã«ãªã£ãŸçµŒç·¯" class="hash-link" aria-label="Direct link to Collaborator ã«ãªã£ãŸçµŒç·¯" title="Direct link to Collaborator ã«ãªã£ãŸçµŒç·¯">â€‹</a></h2><p>ãƒªãƒã‚¸ãƒˆãƒªãŒç§»ç®¡ã•ã‚Œã‚‹éš›ã«ã€ãƒ¡ãƒ³ãƒ†ãƒŠã‚’å‹Ÿé›†ã—ã¦ã„ã¦éå»ã« contribution ã—ã¦ã„ãŸè‡ªåˆ†ã«ã‚‚å£°ã‚’ã‹ã‘ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p><p><a href="https://github.com/hashicorp/terraform-provider-docker/issues/306" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-docker/issues/306</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="contributor-ã«ãªã£ãŸçµŒç·¯">Contributor ã«ãªã£ãŸçµŒç·¯<a href="#contributor-ã«ãªã£ãŸçµŒç·¯" class="hash-link" aria-label="Direct link to Contributor ã«ãªã£ãŸçµŒç·¯" title="Direct link to Contributor ã«ãªã£ãŸçµŒç·¯">â€‹</a></h2><p>è‡ªåˆ†ãŒã“ã® provider ã« contribution ã—ãŸçµŒç·¯ã¯ã€ Terraform ã® Hands on ã‚’æ›¸ãã®ã«ä¸åº¦ã‚ˆã„ provider ã‚’æ¢ã—ã¦ã„ãŸã“ã¨ã§ã—ãŸã€‚</p><p>Hands on ã®é¡Œæã¨ã—ã¦ Docker ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œã£ãŸã‚Šã§ããŸã‚‰ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã£ã¦ Docker provider ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚
ã—ã‹ã—å½“æ™‚ã® docker_container ãƒªã‚½ãƒ¼ã‚¹ã¯ read ã‚’ã¡ã‚ƒã‚“ã¨ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚
ãªã®ã§ import ã‚„ update ãŒã¾ã¨ã‚‚ã«å‹•ãã¾ã›ã‚“ã§ã—ãŸã€‚
ãã‚Œã‚’è¦‹ã‹ã­ã¦ä¿®æ­£ã—ã¦ PR ã‚’æŠ•ã’ãŸã®ãŒæœ€åˆã§ã™ã€‚</p><ul><li><a href="https://github.com/hashicorp/terraform-provider-docker/pull/234" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-docker/pull/234</a></li><li><a href="https://github.com/hashicorp/terraform-provider-docker/pull/236" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-docker/pull/236</a></li></ul><p>ãã®å¾Œã‚‚å¹¾ã¤ã‹ contribution ã‚’ã—ã¾ã—ãŸã€‚</p><p>ãªãŠã€ PR ã‚’æŠ•ã’ãŸã‚‚ã®ã®ã€ Hands on ã¯ MySQL Provider ã‚’ä½¿ã£ã¦æ›¸ãã¾ã—ãŸã€‚</p><p><a href="https://techblog.szksh.cloud/terraform-hands-on-with-mysql-provider/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/terraform-hands-on-with-mysql-provider/</a></p>]]></content:encoded>
            <category>oss</category>
            <category>terraform</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2020-10-01 ~ 2020-10-31]]></title>
            <link>https://techblog.szksh.cloud/2020/10/01/job-10-31</link>
            <guid>https://techblog.szksh.cloud/2020/10/01/job-10-31</guid>
            <pubDate>Sun, 29 Nov 2020 02:48:17 GMT</pubDate>
            <description><![CDATA[2020-10-01 ã‹ã‚‰ 2020-10-31 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>2020-10-01 ã‹ã‚‰ 2020-10-31 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚
å‹¿è«–å…¨éƒ¨ã¯æ›¸ã‘ãªã„ã®ã§ã„ãã¤ã‹ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦æ›¸ãã¾ã™ã€‚</p><ul><li>Terraform<ul><li>CodeBuild Batch Build ã«ã‚ˆã‚‹ dynamic ãª build pipeline ã®å°å…¥</li><li>Conftest ã®å®Ÿè¡Œæ–¹æ³•ã‚’ä¿®æ­£<ul><li><a href="https://www.openpolicyagent.org/docs/latest/terraform/" target="_blank" rel="noopener noreferrer">https://www.openpolicyagent.org/docs/latest/terraform/</a></li><li>tf ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ conftest ã‚’å®Ÿè¡Œã™ã‚‹ã®ã§ã¯ãªãã€å…¬å¼ã®æ–¹æ³•ã«å¾“ã£ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul></li><li>aws_cloudwatch_log_group.retention_in_days ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ Conftest ã§ãƒ†ã‚¹ãƒˆ<ul><li>ã‚³ã‚¹ãƒˆå‰Šæ¸›</li></ul></li><li>tfnotify ãŒ parse ã«å¤±æ•—ã—ãŸå ´åˆã€ github-comment ã§ã‚³ãƒ¡ãƒ³ãƒˆ<ul><li><a href="https://techblog.szksh.cloud/post-tfnotify-parse-error/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/post-tfnotify-parse-error/</a></li></ul></li></ul></li><li>Docker Hub èªè¨¼ã™ã‚‹ã‚ˆã†ã«ã—ãŸ<ul><li><a href="https://blog.studysapuri.jp/entry/2020/11/02/080000" target="_blank" rel="noopener noreferrer">Docker Hub ã® Rate Limit å•é¡Œã«å¯¾å¿œã—ãŸè©±</a></li></ul></li><li>kustomize build ã®ãƒ†ã‚¹ãƒˆ(å¤±æ•—ã—ãŸã‚‰ PR ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’ã—ã¦ã€ãªãœå¤±æ•—ã—ãŸã‹åˆ†ã‹ã‚‹ã‚ˆã†ã«ã—ãŸ)<ul><li>å…ƒã€… kustomize build ã«å¤±æ•—ã—ã¦ CI ãŒã“ã‘ã¦ã‚‚ã€ãªãœã“ã‘ãŸã®ã‹åˆ†ã‹ã‚Šã«ããã€ SRE ã«å•ã„åˆã‚ã›ãŒæ¥ã¦èª¿ã¹ã‚‹ã¿ãŸã„ãªã“ã¨ãŒã‚ã£ãŸ</li><li>ã©ã® k8s manifest ã® kustomize build ã«å¤±æ•—ã—ãŸã®ã‹ã€ PR ã«åˆ†ã‹ã‚Šã‚„ã™ãã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul></li><li>CI ã§ kubectl apply --server-dry-run ã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆã‚’å°å…¥</li><li>Monorepo<ul><li>å·®åˆ†æ¤œçŸ¥ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ”¹å–„</li></ul></li><li>Renovate<ul><li>automerge ã®å°å…¥<ul><li><a href="https://github.com/apps/renovate-approve" target="_blank" rel="noopener noreferrer">renovate-approve</a> ä¾¿åˆ©</li></ul></li><li>CI ã§ renovate-config-validator ã«ã‚ˆã‚‹ validation ã®å°å…¥<ul><li><a href="https://docs.renovatebot.com/reconfigure-renovate/" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/reconfigure-renovate/</a></li></ul></li></ul></li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2020-07-01 ~ 2020-09-30]]></title>
            <link>https://techblog.szksh.cloud/2020/07/01/job-09-30</link>
            <guid>https://techblog.szksh.cloud/2020/07/01/job-09-30</guid>
            <pubDate>Sun, 29 Nov 2020 02:36:44 GMT</pubDate>
            <description><![CDATA[2020-07-01 ã‹ã‚‰ 2020-09-30 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>2020-07-01 ã‹ã‚‰ 2020-09-30 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚
å‹¿è«–å…¨éƒ¨ã¯æ›¸ã‘ãªã„ã®ã§ã„ãã¤ã‹ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦æ›¸ãã¾ã™ã€‚</p><ul><li>Terraform<ul><li>CircleCI ã‹ã‚‰ CodeBuild ã¸ã®ç§»è¡Œ<ul><li>Security + DX</li><li>10æœˆä»¥é™ã‚‚ç¶™ç¶š</li></ul></li><li>tfnotify ã®å°å…¥<ul><li>Monorepo ã§å°å…¥ã™ã‚‹ã«ã¯ä¸€å·¥å¤«ãŒå¿…è¦</li><li>ã‚³ãƒ¡ãƒ³ãƒˆãŒæ¶ˆãˆã‚‹æŒ™å‹•ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚Œã¦ãªãã¦è»½ããƒãƒã£ãŸ</li></ul></li></ul></li><li>Renovate ã®å°å…¥<ul><li>Regex Manager ä¾¿åˆ©</li></ul></li><li>Monorepo<ul><li>å·®åˆ†æ¤œçŸ¥ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ”¹å–„</li></ul></li><li>DataDog ã‹ã‚‰ã®ã‚¢ãƒ©ãƒ¼ãƒˆã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ¥­å‹™ã®æ”¹å–„<ul><li>ã©ã‚“ãªã‚¢ãƒ©ãƒ¼ãƒˆãŒã‚ã£ã¦ã€ã©ã†å¯¾å¿œã—ãŸã‹ãªã©ã®ãƒŠãƒ¬ãƒƒã‚¸ã®å…±æœ‰ã®æ”¹å–„</li><li>å‰²ã¨ã‚¢ãƒŠãƒ­ã‚°ãªæ‰‹æ³•ã ãŒã€ã¡ã‚ƒã‚“ã¨ work ã—ã¦ã„ã‚‹</li></ul></li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2020-04-01 ~ 2020-06-30]]></title>
            <link>https://techblog.szksh.cloud/2020/04/01/job-06-30</link>
            <guid>https://techblog.szksh.cloud/2020/04/01/job-06-30</guid>
            <pubDate>Sun, 29 Nov 2020 02:20:07 GMT</pubDate>
            <description><![CDATA[2020-04-01 ã‹ã‚‰ 2020-06-30 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>2020-04-01 ã‹ã‚‰ 2020-06-30 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚
å‹¿è«–å…¨éƒ¨ã¯æ›¸ã‘ãªã„ã®ã§ã„ãã¤ã‹ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦æ›¸ãã¾ã™ã€‚</p><ul><li>Monorepo<ul><li>CI ã§ <code>kustomize build</code> ã® diff ã‚’ PR ã«ã‚³ãƒ¡ãƒ³ãƒˆ</li><li>Conftest ã§ k8s manifest ã® validation ã®å°å…¥</li><li>Go ã§æ›¸ã‹ã‚ŒãŸå·®åˆ†æ¤œçŸ¥ã®ã‚³ãƒ¼ãƒ‰ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°</li><li>CI ã®é«˜é€ŸåŒ–ãƒ»ã‚³ã‚¹ãƒˆå‰Šæ¸›</li></ul></li><li>GitOps<ul><li>GitOps ã‚’å°å…¥ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã®é–‹ç™ºã®ã‚µãƒãƒ¼ãƒˆ</li></ul></li><li>Terraform<ul><li>input variables ã‚’ local value ã«ç½®ãæ›ãˆ</li></ul></li><li>GuardDuty ã®å°å…¥<ul><li>Terraform ã§ IaC</li><li>False Positive ãªã‚¢ãƒ©ãƒ¼ãƒˆãŒå¤šãã¦ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã§ãã¦ãªã„</li></ul></li><li>ãƒ–ãƒ­ã‚°ã®åŸ·ç­†<ul><li><a href="https://blog.studysapuri.jp/entry/2020/04/06/080000" target="_blank" rel="noopener noreferrer">CI ã®ä¿®æ­£ã‚’ãƒªãƒªãƒ¼ã‚¹å‰ã«æœ¬ç•ªã¨åŒã˜æ¡ä»¶ä¸‹ã§æ¤œè¨¼å‡ºæ¥ã‚‹ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã—ãŸè©±</a></li></ul></li><li>Argo Workflows ã®æ¤œè¨¼</li><li>MongoDB Atlas ã¸ã®ç§»è¡Œã‚µãƒãƒ¼ãƒˆ<ul><li>Go ã§ Restore Job ã®é–‹ç™º</li><li>ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</li></ul></li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2020-01-01 ~ 2020-03-31]]></title>
            <link>https://techblog.szksh.cloud/2020/01/01/job-03-31</link>
            <guid>https://techblog.szksh.cloud/2020/01/01/job-03-31</guid>
            <pubDate>Sun, 29 Nov 2020 01:50:11 GMT</pubDate>
            <description><![CDATA[2020-01-01 ã‹ã‚‰ 2020-03-31 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>2020-01-01 ã‹ã‚‰ 2020-03-31 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚
å‹¿è«–å…¨éƒ¨ã¯æ›¸ã‘ãªã„ã®ã§ã„ãã¤ã‹ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦æ›¸ãã¾ã™ã€‚</p><ul><li>Monorepo<ul><li>æ›´æ–°æ¤œçŸ¥ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ Go ã§ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹<ul><li><a href="https://blog.studysapuri.jp/entry/2020/04/06/080000" target="_blank" rel="noopener noreferrer">CI ã®ä¿®æ­£ã‚’ãƒªãƒªãƒ¼ã‚¹å‰ã«æœ¬ç•ªã¨åŒã˜æ¡ä»¶ä¸‹ã§æ¤œè¨¼å‡ºæ¥ã‚‹ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã—ãŸè©±</a></li></ul></li><li>CircleCI ã®ã‚³ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆã‚¢ã®æ”¹å–„(ã‚³ã‚¹ãƒˆå‰Šæ¸›ãƒ»é«˜é€ŸåŒ–)<ul><li>ãƒªãƒã‚¸ãƒˆãƒªãŒéå¸¸ã«ã§ã‹ã„ã®ã§å…¨éƒ¨ checkout, restore ã™ã‚‹ã¨æ™‚é–“ãŒã‹ã‹ã‚‹</li><li>Job ã”ã¨ã«å¿…è¦æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã ã‘ã‚’ãƒªã‚¹ãƒˆã‚¢ã™ã‚‹ã“ã¨ã§é«˜é€ŸåŒ–</li></ul></li></ul></li><li>ã‚µãƒ¼ãƒã® OS upgrade</li><li>Ansible<ul><li>CI ã®æ›´æ–°æ¤œçŸ¥ã§ã€ PR ã® label ã§å¯¾è±¡ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ãŸ(ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›´ãŒãªãã¦ã‚‚ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ãŸ)<ul><li>ãŸã¾ã«ãƒ†ã‚¹ãƒˆã—ãŸã„ã¨ãã¯ã‚ã‚‹</li><li>ãã‚Œã¾ã§ã¯ã¦ãã¨ã†ã«ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ãªã„ã¨ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œãªã‹ã£ãŸãŒã€ PR ã® label ã§å¯¾è±¡ã® playbook ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ãŸ</li></ul></li><li>key=value å½¢å¼ã‚’ YAML ã«å¤‰æ›<ul><li><a href="https://www.ansible.com/blog/ansible-best-practices-essentials" target="_blank" rel="noopener noreferrer">https://www.ansible.com/blog/ansible-best-practices-essentials</a></li><li><ol start="3"><li>Use Native YAML Syntax</li></ol></li></ul></li></ul></li><li>.circleci/config.yml ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°<ul><li>job ã‚’ parameterize ã—ã¦å…±é€šåŒ–ã—ãŸã‚Š</li><li>parameterize ã•ã‚ŒãŸ command ã‚’ä½¿ã£ã¦å…±é€šåŒ–ã—ãŸã‚Š</li><li>ã‚³ãƒ¼ãƒ‰é‡ã®å¤§å¹…ãªå‰Šæ¸›</li></ul></li><li>Terraform<ul><li>CircleCI ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ master ã§ã® CI ã‚’ä¸€æ™‚çš„ã«ç¦æ­¢ã§ãã‚‹ã‚ˆã†ã«ã—ãŸ<ul><li>State ã‚’å¼„ã£ã¦ãŸã‚Šã™ã‚‹ã¨ãã«äºˆæœŸã›ã¬ apply ãŒå®Ÿè¡Œã•ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚</li></ul></li><li>master branch ã® CI ãŒçµ‚ã‚ã‚‹ã¾ã§ wait<ul><li>master ã® CI ãŒèµ°ã£ã¦ã„ã‚‹é–“ã« PR ã® CI ã§ã¾ã  apply ã•ã‚Œã¦ã„ãªã„ãƒªã‚½ãƒ¼ã‚¹ãŒå·®åˆ†ã¨ã—ã¦å‡ºã‚‹ã®ã‚’é˜²ã</li></ul></li><li>shfmt, shellcheck ã®å°å…¥<ul><li>CI/CD ã§ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚‰ã‚’ lint</li></ul></li><li><a href="https://www.terraform.io/docs/state/locking.html" target="_blank" rel="noopener noreferrer">State Locking</a> ã®å°å…¥</li><li>Terraform Cloud ã®æ¤œè¨¼<ul><li>çµæœã€è¦‹é€ã‚Š</li><li>ã™ã§ã« CI/CD pipeline ã‚’æ§‹ç¯‰ã—ã¦ã„ã‚‹è‡ªåˆ†ãŸã¡ã«ã¨ã£ã¦ã¯ã€ã‚ã–ã‚ã–ç§»è¡Œã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒè–„ã„ã¨åˆ¤æ–­</li></ul></li></ul></li><li>MongoDB upgrade</li><li>Jenkins Alternative ã®æ¤œè¨¼<ul><li>RunDeck</li><li>Argo Workflows</li><li>çµå±€ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§æ¤œè¨¼ã—ãŸç¨‹åº¦</li></ul></li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ 2019-10-01 ~ 2019-12-31]]></title>
            <link>https://techblog.szksh.cloud/2019/10/01/job-12-31</link>
            <guid>https://techblog.szksh.cloud/2019/10/01/job-12-31</guid>
            <pubDate>Sun, 29 Nov 2020 01:38:57 GMT</pubDate>
            <description><![CDATA[2019-10-01 ã‹ã‚‰ 2019-12-31 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>2019-10-01 ã‹ã‚‰ 2019-12-31 ã«ã‹ã‘ã¦ä»•äº‹ã§ã‚„ã£ãŸã“ã¨ã‚’æ›¸ãã¾ã™ã€‚
å‹¿è«–å…¨éƒ¨ã¯æ›¸ã‘ãªã„ã®ã§ã„ãã¤ã‹ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦æ›¸ãã¾ã™ã€‚</p><ul><li>Terraform<ul><li><strong>terraform fmt ã®å°å…¥</strong></li><li><strong>Terraform ã® upgrade v0.11 =&gt; v0.12</strong></li><li><strong>State ã®åˆ†å‰² 3 =&gt; 40 å¼±(æ­£ç¢ºãªæ•°ã¯å¿˜ã‚ŒãŸ)</strong></li><li>Conftest ã«ã‚ˆã‚‹ lint: Remote Backend ã®ãƒ‘ã‚¹ã‚’é–“é•ãˆã‚‹ã¨ã¾ãšã„ã®ã§ test ã‚’å°å…¥</li><li>æ–°ã—ã„ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã¨ãã®ãŸã‚ã® generator (ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ)ã‚’é–‹ç™º</li><li>CODEOWNERS ã®è¨­å®š</li><li>çªæ’ƒéš£ã® Terraform</li><li><strong>ãƒªãƒªãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒã‚’ã‚„ã‚ã¦ GitHub Flow ã«ç§»è¡Œ</strong></li><li>å¤ã„ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ apply ã®å®Ÿè¡Œã®ç¦æ­¢(CI ãŒã“ã‘ã‚‹ã‚ˆã†ã«ã—ãŸ)</li></ul></li><li>Ansible<ul><li>CI ã®é«˜é€ŸåŒ–</li><li>Jenkins job ã‚’ CircleCI ã® scheduled job ã«ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹(è„± Jenkins)</li><li>ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºç’°å¢ƒã®æ”¹å–„<ul><li>ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ã„å›ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹</li></ul></li><li><a href="https://github.com/aelsabbahy/goss" target="_blank" rel="noopener noreferrer">goss</a> ã«ç½®ãæ›ãˆã¦é«˜é€ŸåŒ–</li></ul></li><li>CI ã®æ”¹å–„<ul><li>é«˜é€ŸåŒ–(ç„¡é§„ãªå‡¦ç†ã®å‰Šæ¸›)</li></ul></li></ul>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[Splitting .circleci/config.yml]]></title>
            <link>https://techblog.szksh.cloud/splitting-circleci-config</link>
            <guid>https://techblog.szksh.cloud/splitting-circleci-config</guid>
            <pubDate>Sat, 07 Nov 2020 05:43:10 GMT</pubDate>
            <description><![CDATA[In this post I introduce how to split a huge .circleci/config.yml.]]></description>
            <content:encoded><![CDATA[<p>In this post I introduce how to split a huge <code>.circleci/config.yml</code>.</p><p>CircleCI doesn't support to split .circleci/config.yml, so we manage all workflows and jobs configuration into one file .circleci/config.yml.
If the repository is <a href="https://en.wikipedia.org/wiki/Monorepo" target="_blank" rel="noopener noreferrer">Monorepo</a>, the more the number of services increases, the more the size of .circleci/config.yml becomes large and it's hard to maintain .circleci/config.yml.
By splitting .circleci/config.yml per service, it makes easy to maintain .circleci/config.yml and we can configure split file's <a href="https://docs.github.com/en/free-pro-team@latest/github/creating-cloning-and-archiving-repositories/about-code-owners" target="_blank" rel="noopener noreferrer">CODEOWNERS</a>.</p><p>To split .circleci/config.yml, you have to generate .circleci/config.yml by merging split files and commit both split files and .circleci/config.yml.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="circleci-config-pack">circleci config pack<a href="#circleci-config-pack" class="hash-link" aria-label="Direct link to circleci config pack" title="Direct link to circleci config pack">â€‹</a></h2><p>We can merge split files with the command <code>circleci config pack</code>, but I introduce the other tool <a href="https://github.com/suzuki-shunsuke/circleci-config-merge" target="_blank" rel="noopener noreferrer">circleci-config-merge</a>.</p><p>CircleCI CLI is an official tool so it's reliable, but I feel the restriction of the file name and the directory structure is a little strict.
We have to manage all files on the same directory, and the file path is reflected to generated YAML content.</p><p>For the detail of <code>circleci config pack</code>, please see the official document.</p><p><a href="https://circleci.com/docs/2.0/local-cli/#packing-a-config" target="_blank" rel="noopener noreferrer">https://circleci.com/docs/2.0/local-cli/#packing-a-config</a></p><p>If you can accept the restriction of <code>circleci config pack</code>, I recommend to use it because it is an official tool.
But if it is difficult to accept the restriction, maybe <a href="https://github.com/suzuki-shunsuke/circleci-config-merge" target="_blank" rel="noopener noreferrer">circleci-config-merge</a> would help you.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="circleci-config-merge">circleci-config-merge<a href="#circleci-config-merge" class="hash-link" aria-label="Direct link to circleci-config-merge" title="Direct link to circleci-config-merge">â€‹</a></h2><p>circleci-config-merge is a CLI tool to generate .circleci/config.yml by merging split files.</p><p>The usage of circleci-config-merge is like the following.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ circleci-config-merge merge &lt;file1&gt; [&lt;file2&gt; ...]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There is no restriction of file paths, and the format of split file is same as .circleci/config.yml.</p><p>For example, you can manage files on the same directory.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.circleci/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  config.yml # generated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service1.yml # split config per service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service2.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or you can also manage files on each service directory.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">service1/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  circleci/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workflow.yml # you can split file freely</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jobs.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service2/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  circleci/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>circleci-config-merge merges the list of workflow jobs.</p><p>For example,</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">workflows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> foo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">workflows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The workflow <code>build</code>'s jobs are merged as the following.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">workflows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># sort by job name for comparison</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> foo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-circleciconfigyml-in-ci">Test .circleci/config.yml in CI<a href="#test-circleciconfigyml-in-ci" class="hash-link" aria-label="Direct link to Test .circleci/config.yml in CI" title="Direct link to Test .circleci/config.yml in CI">â€‹</a></h2><p>If you split .circleci/config.yml, you should test in CI whether .circleci/config.yml is generated by merging split files.
circleci-config-merge doesn't provide such a feature, but you can implement the test with the other tool like <a href="https://github.com/homeport/dyff" target="_blank" rel="noopener noreferrer">dyff</a>.</p><p>I have created an example repository <a href="https://github.com/suzuki-shunsuke/example-circleci-config-merge" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/example-circleci-config-merge</a>.
You can use this example as a reference to split .circleci/config.yml and setup CI.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-case">Use case<a href="#use-case" class="hash-link" aria-label="Direct link to Use case" title="Direct link to Use case">â€‹</a></h2><p>Lastly, I introduce a use case of circleci-config-merge.
Recently, I split a huge .circleci/config.yml which is over 6,000 lines to about 60 files.
It was hard to maintain the original .circleci/config.yml, but by splitting it became easy to maintain .circleci/config.yml.
If you are suffer from a huge .circleci/config.yml, let's split it!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2><p>In this post I introduced how to split a huge .circleci/config.yml.
We can generate .circleci/config.yml by merging split files with <a href="https://github.com/suzuki-shunsuke/circleci-config-merge" target="_blank" rel="noopener noreferrer">circleci-config-merge</a>.
Please see the example <a href="https://github.com/suzuki-shunsuke/example-circleci-config-merge" target="_blank" rel="noopener noreferrer">suzuki-shunsuke/example-circleci-config-merge</a> as a reference to split .circleci/config.yml and setup CI.</p>]]></content:encoded>
            <category>circleci</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[github-ci-monitor: CI ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ DataDog ã§ç›£è¦–]]></title>
            <link>https://techblog.szksh.cloud/github-ci-monitor</link>
            <guid>https://techblog.szksh.cloud/github-ci-monitor</guid>
            <pubDate>Sun, 01 Nov 2020 08:51:44 GMT</pubDate>
            <description><![CDATA[è‡ªä½œã® OSS github-ci-monitor ã®ç´¹ä»‹ã§ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>è‡ªä½œã® OSS <a href="https://github.com/suzuki-shunsuke/github-ci-monitor" target="_blank" rel="noopener noreferrer">github-ci-monitor</a> ã®ç´¹ä»‹ã§ã™ã€‚</p><p>GitHub ãƒªãƒã‚¸ãƒˆãƒªã® CI ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å®šæœŸçš„ã«å–å¾—ã—ã€ DataDog ã«é€ã‚‹ã“ã¨ã§ã€ CI ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç›£è¦–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ç¾çŠ¶ã¯ AWS Lambda ã§å‹•ã‹ã™ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ãŒã€ä»–ã®æ–¹æ³•ã§ã‚‚å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¤ã‚‚ã‚Šã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">â€‹</a></h2><p>ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ PR ã‚’ãƒãƒ¼ã‚¸ã—ãŸã‚ã¨ã« CI ãŒã“ã‘ãŸå ´åˆã«é€šçŸ¥ãŒæ¬²ã—ã„ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚
ãƒãƒ¼ã‚¸ã—ãŸã‚ã¨ã« CI ãŒä¸€ç¬ã§çµ‚ã‚ã‚‹ãªã‚‰ç„¡äº‹çµ‚ã‚ã‚‹ã®ã‚’è¦‹å±Šã‘ã¦ã‚‚ã„ã„ã‚“ã§ã™ãŒã€
æ•°åˆ†ã‹ã‹ã‚‹ã¨å¾…ã£ã¦ã‚‹ã®ã‚‚æ™‚é–“ãŒã‚‚ã£ãŸã„ãªã„ã§ã™ã€‚
ã—ã°ã‚‰ãã—ãŸã‚ã¨ã«çµæœã‚’ç¢ºèªã™ã‚Œã°ã„ã„ã‚“ã§ã™ãŒã€ãã‚Œã‚‚é¢å€’ãã•ã„ã§ã™ã—ã€æ™®é€šã«å¿˜ã‚Œã¾ã™ã€‚
ãã†ã™ã‚‹ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã¤ã‚‚ã‚ŠãŒå®Ÿã¯ CI ãŒã“ã‘ã¦ãŸãªã‚“ã¦ã“ã¨ãŒæ™®é€šã«ã‚ã‚Šã¾ã™ã€‚</p><p>ãã†ã„ã†ã“ã¨ã«ã™ãæ°—ã¥ã‘ã‚‹ã‚ˆã†ã€ Slack ã«é€šçŸ¥ãŒã»ã—ã„ã¨æ€ã£ã¦ã„ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•çµ„ã¿">ä»•çµ„ã¿<a href="#ä»•çµ„ã¿" class="hash-link" aria-label="Direct link to ä»•çµ„ã¿" title="Direct link to ä»•çµ„ã¿">â€‹</a></h2><p>ä»•çµ„ã¿ã¯å˜ç´”ã§ã™ã€‚</p><p>GitHub API ã§å„ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å–å¾—ã—ã€ DataDog API ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’é€ä¿¡ã—ã¦ã„ã¾ã™ã€‚
DataDog API ã¯ <a href="https://docs.datadoghq.com/ja/api/v1/service-checks/" target="_blank" rel="noopener noreferrer">Service Check API</a> ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚
status ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><ul><li>0: æ­£å¸¸</li><li>1: ç•°å¸¸</li><li>3: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å–å¾—ã«å¤±æ•—</li></ul><p>ã¾ãŸä»¥ä¸‹ã® tag ãŒä»˜ãã¾ã™ã€‚</p><ul><li>owner: ãƒªãƒã‚¸ãƒˆãƒªã®ã‚ªãƒ¼ãƒŠãƒ¼</li><li>repo: ãƒªãƒã‚¸ãƒˆãƒªå</li><li>ref: ãƒ–ãƒ©ãƒ³ãƒå</li></ul><p>å„ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯ç¾çŠ¶ 3 ã¤ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><ul><li>Commit Status: <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/repos#get-the-combined-status-for-a-specific-reference" target="_blank" rel="noopener noreferrer">Get the combined status for a specific reference</a></li><li>Check API:<ul><li>Check Run: <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/checks#list-check-runs-for-a-git-reference" target="_blank" rel="noopener noreferrer">List check runs for a Git reference</a></li><li>Check Suite: <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/checks#list-check-suites-for-a-git-reference" target="_blank" rel="noopener noreferrer">List check suites for a Git reference</a></li></ul></li></ul><p>ãã‚Œãã‚Œ on/off ã‚’è¨­å®šã§ãã€è¤‡æ•°æŒ‡å®šã—ãŸå ´åˆã¯ã€ã©ã‚Œã‹ 1 ã¤ã§ã‚‚å¤±æ•—ã—ã¦ã„ãŸã‚‰ status ãŒ 1 ã«ãªã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lambda-ã§å‹•ã‹ã™å ´åˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£">Lambda ã§å‹•ã‹ã™å ´åˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£<a href="#lambda-ã§å‹•ã‹ã™å ´åˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£" class="hash-link" aria-label="Direct link to Lambda ã§å‹•ã‹ã™å ´åˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£" title="Direct link to Lambda ã§å‹•ã‹ã™å ´åˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£">â€‹</a></h2><p>CloudWatch Events ã§å®šæœŸçš„(5åˆ†æ¯ã¨ã‹)ã« Lambda Function ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
ãƒªãƒã‚¸ãƒˆãƒªã®ãƒªã‚¹ãƒˆãªã©ã®è¨­å®šã¯ç’°å¢ƒå¤‰æ•°ã§æ¸¡ã—ã€ GitHub Access Token ãªã©ã®ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¯ AWS Secrets Manager çµŒç”±ã§æ¸¡ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®Ÿè£…æ–¹é‡">å®Ÿè£…æ–¹é‡<a href="#å®Ÿè£…æ–¹é‡" class="hash-link" aria-label="Direct link to å®Ÿè£…æ–¹é‡" title="Direct link to å®Ÿè£…æ–¹é‡">â€‹</a></h2><p>CI ãŒã“ã‘ãŸã‚‰é€šçŸ¥ã—ã¦ã»ã—ã„ã¨ã„ã†è¦ä»¶ã‚’æº€ãŸã™æ–¹æ³•ã¯è‰²ã€…ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¾ãš CI ã®ä¸­ã§ã“ã‘ãŸå ´åˆã«é€šçŸ¥ã‚’é£›ã°ã™ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™(æ›¸ã„ã¦ã¿ãŸã‚‰çµæ§‹ã‚ã‚Šã¾ã™ã­)ã€‚</p><ul><li>ãƒ„ãƒ¼ãƒ«ã‚’ã©ã£ã‹ã§å‹•ã‹ã—ãŸã‚Šãƒ„ãƒ¼ãƒ«è‡ªä½“ã‚’ç›£è¦–ã—ãŸã‚Šã™ã‚‹å¿…è¦ãŒãªã„</li><li>ã‚ˆã‚Šè©³ç´°ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚Œã‚‹<ul><li>ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã‚’å«ã‚ãŸã‚Š</li><li>CI ã®ãƒªãƒ³ã‚¯è²¼ã£ãŸã‚Šã€ PR ã® author ã‚’ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã—ãŸã‚Šã‚‚ã—ã‚„ã™ã„</li></ul></li><li>CI ãŒã“ã‘ãŸã‚‰ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§é€šçŸ¥ã§ãã‚‹</li><li>ãƒãƒ¼ãƒªãƒ³ã‚°ã¨é•ã„ã€ç„¡é§„ã« API ã‚’å©ãå¿…è¦ãŒãªã„</li></ul><p>ä¸€æ–¹ã§ã€ã“ã‚Œã‚’æ¼ã‚Œãªãå®Ÿè£…ã™ã‚‹ã®ã¯ã‘ã£ã“ã†å¤§å¤‰ã ã¨æ€ã„ã¾ã™ã€‚
ä¾‹ãˆã° CircleCI ã ã¨å…¨ã¦ã® Job ã§ã¡ã‚ƒã‚“ã¨ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ãªã„ã¨ã„ã‘ãªã‹ã£ãŸã‚Šã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚
ãƒªãƒã‚¸ãƒˆãƒªãŒ 1 å€‹ã ã‘ãªã‚‰ãã‚Œã§ã‚‚ã„ã„ã§ã™ãŒã€ä½•åå€‹ã‚‚ã‚ã‚‹ã¨ãªã‚‹ã¨ã ã„ã¶å¤§å¤‰ã ã¨æ€ã„ã¾ã™ã€‚</p><p>ä»Šå›ã®ãƒ„ãƒ¼ãƒ«ã®ã‚ˆã†ãªæ–¹å¼ã ã¨å¯¾è±¡ã®ãƒªãƒã‚¸ãƒˆãƒªã® CI ã«ä¸€åˆ‡æ‰‹ã‚’åŠ ãˆãšã«å®Ÿè£…ã§ãã‚‹ã®ãŒå¤§ãã„ã§ã™ã€‚</p><p>ã¾ãŸã€ CI ã®çµæœã‚’å–å¾—ã™ã‚‹ API ã¨ã—ã¦ CI ã‚µãƒ¼ãƒ“ã‚¹ãŒæä¾›ã™ã‚‹ API ã‚’ä½¿ã£ã¦å–å¾—ã™ã‚‹ã“ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚
ã—ã‹ã—ã€ GitHub API ã‚’ä½¿ãˆã° CI ã‚µãƒ¼ãƒ“ã‚¹æ¯ã«å®Ÿè£…ã—ãŸã‚Šã™ã‚‹å¿…è¦ãŒãªãã¦æ¥½ã§ã™ã€‚</p><p>Slack API ã‚’ä½¿ã£ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŠ•ç¨¿ã™ã‚‹ã‚ˆã†ãªã“ã¨ã‚‚ä¸€ç¬è€ƒãˆã¾ã—ãŸãŒã€ DataDog ã‚’ä½¿ã†ã“ã¨ã§ä»¥ä¸‹ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>é€ä¿¡å…ˆã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã‹ã‚’ãƒ„ãƒ¼ãƒ«ã§ç®¡ç†ã—ãªãã¦è‰¯ã„</li><li>ä½•åº¦ã‚‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‰ãªã„ã‚ˆã†ã«çŠ¶æ…‹ã‚’ DB ã§æŒãŸãªãã¦è‰¯ã„</li><li>ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ä¸€æ™‚çš„ã«æ­¢ã‚ãŸã‚Šã™ã‚‹ã®ã‚‚ç°¡å˜</li></ul><p>ã¾ãŸã€æ™‚é–“è»¸ã§ã©ã‚Œã ã‘ CI ãŒå£Šã‚ŒãŸçŠ¶æ…‹ã ã£ãŸã‹ã€å¾©æ—§ã™ã‚‹ã®ã«ã©ã®ãã‚‰ã„æ™‚é–“ãŒã‹ã‹ã£ãŸã‹åˆ†ã‹ã‚‹ã®ã‚‚ãªã«ã‹ã«ä½¿ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ä»Šå›ã®ãƒ„ãƒ¼ãƒ«ã«é™ã‚‰ãšã€ Slack ã«ç›´æ¥é€šçŸ¥ã™ã‚‹ã‚ˆã‚Š DataDog ã‚„ Sentry ã‚’çµŒç”±ã—ãŸã»ã†ãŒä¸Šæ‰‹ãã„ãã“ã¨ã‚‚çµæ§‹ã‚ã‚‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãŸã€å®šæœŸå®Ÿè¡Œã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã¯ Lambda ä»¥å¤–ã«ã‚‚</p><ul><li>Jenkins</li><li>é©å½“ãªã‚µãƒ¼ãƒã§ cron</li><li>CI ã‚µãƒ¼ãƒ“ã‚¹</li><li>k8s ã® CronJob</li><li>k8s ã® Deployment</li></ul><p>ãªã©è‰²ã€…ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã†ã„ã†é¢¨ã«ã‚‚å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãƒã‚¤ãƒŠãƒªã‚’ä»Šå¾Œæä¾›ã—ãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
Lambda ã‚’ä½¿ã†ã¨ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ç®¡ç†ã—ãªãã¦è‰¯ã„ã®ãŒãƒ¡ãƒªãƒƒãƒˆã ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¾ãŸã€ DataDog API ã§çµæœã‚’é€ã‚‹ push å‹ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã¯åˆ¥ã«ã€
DataDog Agent + Prometheus Exporter ã® pull å‹ã‚‚ã‚ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚
ãã†ã™ã‚‹ã¨ãƒ„ãƒ¼ãƒ«å´ã§ DataDog API Key ãŒä¸è¦ã«ãªã‚‹ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚
ã“ã¡ã‚‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ä»Šå¾Œå®Ÿè£…ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[matchfile - å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã‹ã‚‰å¿…è¦ãªã‚¿ã‚¹ã‚¯ã‚’å°å‡ºã™ã‚‹ãŸã‚ã® CLI ãƒ„ãƒ¼ãƒ«]]></title>
            <link>https://techblog.szksh.cloud/matchfile</link>
            <guid>https://techblog.szksh.cloud/matchfile</guid>
            <pubDate>Tue, 27 Oct 2020 10:39:44 GMT</pubDate>
            <description><![CDATA[è‡ªä½œã® CLI ãƒ„ãƒ¼ãƒ« matchfile ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>è‡ªä½œã® CLI ãƒ„ãƒ¼ãƒ« matchfile ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/matchfile" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/matchfile</a></p><p>ã“ã®è¨˜äº‹ã®åŸ·ç­†æ™‚ç‚¹ã§æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ v0.1.1 ã§ã™ã€‚</p><p>å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã‹ã‚‰å®Ÿè¡Œã™ã‚‹å¿…è¦ã®ã‚ã‚‹ã‚¿ã‚¹ã‚¯ã‚’å°å‡ºã™ã‚‹ãŸã‚ã® CLI ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
Go ã§æ›¸ã‹ã‚Œã¦ã„ã¦ã€ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã‚Œã°ä½¿ãˆã¾ã™ã€‚</p><p>Pull Request (ä»¥ä¸‹ PR) ã® CI ã§ã¯ PR ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã«å¿œã˜ã¦
å¿…è¦ãªã‚¿ã‚¹ã‚¯(build, test, lint, etc) ã ã‘ã‚’å®Ÿè¡Œã—ãŸã‹ã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ãã“ã§ã€ <code>PR ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒªã‚¹ãƒˆ</code> ã¨ <code>ã‚¿ã‚¹ã‚¯ãŒä¾å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ¡ä»¶</code> ã‚’å…ƒã«ã€ãã®ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹åˆ¤å®šã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦ matchfile ã‚’é–‹ç™ºã—ã¾ã—ãŸã€‚</p><p>ãŸã ã—ã€ matchfile ã®æ©Ÿèƒ½ã¨ã—ã¦ã¯ PR ã‚„ CI ã¨ã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹ã®ã§ã€ã‚‚ã£ã¨åˆ¥ã®ç›®çš„ã§ã‚‚ä½¿ãˆã‚‹ã¨ã¯æ€ã„ã¾ã™ã€‚</p><p>matchfile ã¯ <code>PR ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒªã‚¹ãƒˆ</code> ã‚„ <code>ã‚¿ã‚¹ã‚¯ãŒä¾å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ¡ä»¶</code> ã‚’å–å¾—ã—ãŸã‚Šã™ã‚‹æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p><code>PR ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒªã‚¹ãƒˆ</code> ã¯ <a href="https://github.com/suzuki-shunsuke/ci-info" target="_blank" rel="noopener noreferrer">ci-info</a> ã¨ã„ã†è‡ªåˆ†ãŒä½œã£ãŸåˆ¥ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã¨å–å¾—ã§ãã¾ã™ã€‚</p><p><code>ã‚¿ã‚¹ã‚¯ãŒä¾å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ¡ä»¶</code> ã¯ã‚¿ã‚¹ã‚¯ã«å¤§ããä¾å­˜ã™ã‚‹ã®ã§ matchfile ã¯ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã›ã‚“ã€‚</p><p>matchfile ã®ä½¿ã„æ–¹ã¨ã—ã¦ã¯</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ matchfile run &lt;PR ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒªã‚¹ãƒˆãŒæ›¸ã‹ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹&gt; &lt;ã‚¿ã‚¹ã‚¯ãŒä¾å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ¡ä»¶ãŒæ›¸ã‹ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã§ã€ <code>PR ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒªã‚¹ãƒˆ</code> ã®ã†ã¡ä¸€ã¤ã§ã‚‚ <code>ã‚¿ã‚¹ã‚¯ãŒä¾å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ¡ä»¶</code> ã«ãƒãƒƒãƒã™ã‚Œã° <code>true</code> ã‚’ã€ãƒãƒƒãƒã—ãªã‘ã‚Œã° <code>false</code> ã‚’æ¨™æº–å‡ºåŠ›ã—ã¾ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰ã® exit code ã§çµæœã‚’è¡¨ç¾ã™ã‚‹ã“ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã—ãŸãŒã€ãã†ã™ã‚‹ã¨ <code>set -e</code> ã—ã¦ã„ã‚‹ã¨ãã«è‹¥å¹²é¢å€’ãã•ã„ã®ã§ã€æ¨™æº–å‡ºåŠ›ã§è¡¨ç¾ã—ã¾ã—ãŸã€‚</p><p>ã”ãç°¡å˜ãªä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo template/foo.tpl &gt; changed_files.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo template &gt; template_dependencies.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ matchfile run changed_files.txt template_dependencies.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>ã‚¿ã‚¹ã‚¯ãŒä¾å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ¡ä»¶</code> ã¯ç‹¬è‡ªã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§æŒ‡å®šã—ã¾ã™ã€‚
<a href="https://git-scm.com/docs/gitignore" target="_blank" rel="noopener noreferrer">gitignore ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ</a>ã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã•ã‚Œã¦ã„ã¾ã™ãŒã€æ­£è¦è¡¨ç¾ãŒä½¿ãˆã‚‹ãªã©ã€ç‹¬è‡ªã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãªã£ã¦ã„ã¾ã™ã€‚
CI ã®ä¸­ã§ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å‹•çš„ã«ç”Ÿæˆã™ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã€è¡ŒæŒ‡å‘ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãªã£ã¦ã„ã¾ã™ã€‚
Go å®Ÿè£…ã®ãƒ‘ãƒ¼ã‚µãƒ¼ãŒæä¾›ã•ã‚ŒãŸã‚ˆãçŸ¥ã‚‰ã‚ŒãŸè¡ŒæŒ‡å‘ã®(ã‚³ãƒãƒ³ãƒ‰ã§ç”Ÿæˆã—ã‚„ã™ã„)ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒã‚ã‚Œã°è‰¯ã‹ã£ãŸã‚“ã§ã™ãŒã€è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã®ã§ç°¡å˜ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å®šç¾©ã—ã¦ã¿ã¾ã—ãŸã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[#][!][&lt;kind&gt;,...] &lt;path&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1è¡Œã«1ã¤æ¡ä»¶ã‚’æ›¸ãã¾ã™ã€‚
ä¸Šã‹ã‚‰å…¨éƒ¨è©•ä¾¡ã•ã‚Œã¾ã™(ã©ã‚Œã‹ãƒãƒƒãƒã—ã¦ã‚‚çµ‚ã‚ã‚Šã¾ã›ã‚“)ã€‚
<code>#</code> ã¯ã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚è¡Œã®é€”ä¸­ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</p><p><code>!</code> ã¯ gitignore ã¨ä¼¼ã¦ã„ã¾ã™ãŒã€ãã®è¡Œã‚’è©•ä¾¡ã™ã‚‹æ™‚ç‚¹ã§è©•ä¾¡çµæœãŒ <code>true</code> ã§ã‚ã‚Šã€<code>!</code> ã‚’é™¤ã„ãŸãã®è¡Œã®è©•ä¾¡ãŒ <code>true</code> ã®å ´åˆã€è©•ä¾¡çµæœãŒ <code>false</code> ã«ãªã‚Šã¾ã™ã€‚
æ—¥æœ¬èªãŒä¸‹æ‰‹ããã§ã™ã­ã€‚</p><p>ç°¡å˜ãªä¾‹ã‚’ç¤ºã™ã¨ã€ <code>foo/foo.txt ä»¥å¤–ã® foo ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«</code> ã¨ã—ãŸã„å ´åˆã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">glob foo/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!glob foo/foo.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>kind</code> ã¯ <code>path</code> ã‚’ã©ã†æ‰±ã†ã‹ã‚’ç¤ºã—ã¦ã„ã¦ã€å¹¾ã¤ã‹ç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>equal: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãŒæ–‡å­—åˆ—ã¨ã—ã¦å®Œå…¨ã«ä¸€è‡´ã™ã‚Œã°ãƒãƒƒãƒ</li><li>dir: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãŒ <code>&lt;path&gt;/</code> ã§å§‹ã¾ã‚Œã°ãƒãƒƒãƒ</li><li>regexp: æ­£è¦è¡¨ç¾</li><li>glob: ã‚°ãƒ­ãƒ–ã€‚ <code>**</code> ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã¾ã›ã‚“</li></ul><p>kind ã¯ã‚«ãƒ³ãƒã¤ãªãã§è¤‡æ•°æŒ‡å®šã§ãã€è¤‡æ•°æŒ‡å®šã—ãŸå ´åˆã¯ã€å…ˆã«æŒ‡å®šã—ãŸã‚‚ã®ã‹ã‚‰ãƒãƒƒãƒã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã•ã‚Œã€ä¸€ã¤ã§ã‚‚ãƒãƒƒãƒã—ãŸã‚‰ãã®æ¡ä»¶ãŒãƒãƒƒãƒã™ã‚‹ã‚‚ã®ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚</p><p>kind ã®æŒ‡å®šã¯ä»»æ„ã§ã€æŒ‡å®šã—ãªã„å ´åˆã€ kind ã¯ <code>equal,dir,glob</code> ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚</p><p>ã¤ã¾ã‚Š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">foo.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¯</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">equal,dir,glob foo.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¨åŒã˜ã§ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[ãªãœ buildflow ã‚’ä½œã£ãŸã®ã‹]]></title>
            <link>https://techblog.szksh.cloud/buildflow-goal</link>
            <guid>https://techblog.szksh.cloud/buildflow-goal</guid>
            <pubDate>Sun, 18 Oct 2020 00:53:08 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ ãªãœ buildflow ã‚’ä½œã£ãŸã®ã‹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
é–‹ç™ºè€…ã§ã‚ã‚‹è‡ªåˆ†ã®å¥½ã¿ã‚„ç½®ã‹ã‚ŒãŸç’°å¢ƒãªã©ãŒæ‰€ã€…ã«åæ˜ ã•ã‚ŒãŸå†…å®¹ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è§£æ±ºã—ãŸã„èª²é¡Œ">è§£æ±ºã—ãŸã„èª²é¡Œ<a href="#è§£æ±ºã—ãŸã„èª²é¡Œ" class="hash-link" aria-label="Direct link to è§£æ±ºã—ãŸã„èª²é¡Œ" title="Direct link to è§£æ±ºã—ãŸã„èª²é¡Œ">â€‹</a></h2><p>è‡ªåˆ†ã¯ CI/CD ã® DX ã®æ”¹å–„ã«æ¥­å‹™ã¨ã—ã¦å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚
ãƒªãƒã‚¸ãƒˆãƒªã¯ãŸãã•ã‚“ã‚ã‚Šã€æ¨ªæ–­çš„ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã¦ã„ã¾ã™ã€‚
å¹¾ã¤ã‹ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ãƒ¢ãƒãƒ¬ãƒã«ãªã£ã¦ãŠã‚Šã€ CI ã®è¤‡é›‘ã•ãŒå¢—ã—ã¦ã„ãŸã‚Šã€ CI ã®å®Ÿè¡Œæ™‚é–“ãŒé•·ã‹ã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ç¾åœ¨ã® CI/CD ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå•é¡ŒãŒã‚ã‚‹ã¨æ„Ÿã˜ã¦ã„ã¾ã™(ä»–ã«ã‚‚ã‚ã‚‹ã‚“ã§ã™ãŒã€ buildflow ã¨é–¢ä¿‚ãªã„ã®ã§å‰²æ„›)ã€‚</p><ul><li>å®Ÿè¡Œæ™‚é–“ãŒé•·ã„<ul><li>PR ã¨ã¯é–¢ä¿‚ãªã„å‡¦ç†(test, build, etc) ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹</li></ul></li><li>é‡‘éŠ­çš„ã«é«˜ã„<ul><li>å®Ÿè¡Œæ™‚é–“ãŒé•·ã„ã®ã§ç„¡é§„ã«ãŠé‡‘ãŒã‹ã‹ã£ã¦ã„ã‚‹</li><li>CI ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚ˆã£ã¦ã¯ä¸¦åˆ—åº¦ã‚’ä¸Šã’ã‚‹ã“ã¨ã§å®Ÿè¡Œæ™‚é–“ãŒç¸®ã‚€å ´åˆãŒã‚ã‚‹ãŒã€ãã‚Œã§ã‚‚ãã®åˆ†ãŠé‡‘ãŒã‹ã‹ã‚‹</li></ul></li><li>PR ã¨ã¯ç›´æ¥é–¢ä¿‚ãªã„ã¨ã“ã‚ã§å¤±æ•—ã™ã‚‹<ul><li>PR ã¨ã¯é–¢ä¿‚ãªã„å‡¦ç†(test, build, etc) ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã¦ã€ãã‚Œã‚‰ãŒ flaky ã§å¤±æ•—ã™ã‚‹</li></ul></li><li>ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒæ‚ªã„<ul><li>å±äººåŒ–æ°—å‘³</li><li>ä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã®ã‹åˆ†ã‹ã‚Šã«ãã„</li></ul></li><li>åŒã˜ã‚ˆã†ãªæ©Ÿèƒ½ã‚’è¤‡æ•°ã®ãƒªãƒã‚¸ãƒˆãƒªã§å®Ÿè£…ãƒ»ãƒ¡ãƒ³ãƒ†ã—ãŸããªã„</li></ul><p>ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã« buildflow ã‚’é–‹ç™ºã—ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="buildflow-ã§å¿…è¦ãªå‡¦ç†ã ã‘ã‚’å®Ÿè¡Œã™ã‚‹">buildflow ã§å¿…è¦ãªå‡¦ç†ã ã‘ã‚’å®Ÿè¡Œã™ã‚‹<a href="#buildflow-ã§å¿…è¦ãªå‡¦ç†ã ã‘ã‚’å®Ÿè¡Œã™ã‚‹" class="hash-link" aria-label="Direct link to buildflow ã§å¿…è¦ãªå‡¦ç†ã ã‘ã‚’å®Ÿè¡Œã™ã‚‹" title="Direct link to buildflow ã§å¿…è¦ãªå‡¦ç†ã ã‘ã‚’å®Ÿè¡Œã™ã‚‹">â€‹</a></h2><p>buildflow ã§ã¯ PR ã®æƒ…å ±ã‚’è‡ªå‹•ã§å–å¾—ã—ã€ãã‚Œã‚‰ã«å¿œã˜ã¦å®Ÿè¡Œã™ã‚‹å‡¦ç†ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚
å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã«å¿œã˜ã¦ã ã‘ã§ãªãã€ label ã‚„ PR ã® author ãªã©ã§ã‚‚å¤‰æ›´ã§ãã¾ã™ã€‚
Tengo script ã‚’ç”¨ã„ã¦æŸ”è»Ÿãªãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã§ãã¾ã™ã€‚
JSON ã‚„ YAML ã®èª­ã¿è¾¼ã¿ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã®ã§ã€ä¾å­˜é–¢ä¿‚ãªã©ã®è¨­å®šã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚</p><p>ä¸€éƒ¨ã® CI ã‚µãƒ¼ãƒ“ã‚¹ã¯ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚
CodeBuild ã¯ Webhook ã® Filter ã§ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã®ã¿ build ã‚’å®Ÿè¡Œã§ãã¾ã™ã—ã€
GitHub Actions ã§ã‚‚ä¼¼ãŸã‚ˆã†ãªã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ </p><ul><li><a href="https://docs.github.com/ja/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#onpushpull_requestpaths" target="_blank" rel="noopener noreferrer">https://docs.github.com/ja/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#onpushpull_requestpaths</a></li></ul><p>ãã‚Œã‚‰ã§äº‹è¶³ã‚Šã‚‹ãªã‚‰ãã‚Œã§ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚
ãã‚Œã‚‰ã ã‘ã ã¨é›£ã—ã„å ´åˆã€ buildflow ã‚’ä½¿ã†ã¨ã‚ˆã‚ŠæŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸¦åˆ—å‡¦ç†ã«ã‚ˆã‚‹é«˜é€ŸåŒ–">ä¸¦åˆ—å‡¦ç†ã«ã‚ˆã‚‹é«˜é€ŸåŒ–<a href="#ä¸¦åˆ—å‡¦ç†ã«ã‚ˆã‚‹é«˜é€ŸåŒ–" class="hash-link" aria-label="Direct link to ä¸¦åˆ—å‡¦ç†ã«ã‚ˆã‚‹é«˜é€ŸåŒ–" title="Direct link to ä¸¦åˆ—å‡¦ç†ã«ã‚ˆã‚‹é«˜é€ŸåŒ–">â€‹</a></h2><p>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ for loop ãªã©ã§å‡¦ç†ã—ã¦ã„ã¦æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã‚‹å ´åˆã€
buildflow ã§ä¸¦åˆ—å‡¦ç†ã™ã‚‹ã¨é«˜é€ŸåŒ–ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§">ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§<a href="#ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§" class="hash-link" aria-label="Direct link to ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§" title="Direct link to ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§">â€‹</a></h2><p>buildflow ã‚’ä½¿ã‚ãªãã¦ã‚‚ã€Œå¿…è¦ãªå‡¦ç†ã ã‘ã‚’å®Ÿè¡Œã€ã—ãŸã‚Šã€Œä¸¦åˆ—å‡¦ç†ã§é«˜é€ŸåŒ–ã€ã—ãŸã‚Šã¯ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚
ãã‚Œã§ã‚‚ buildflow ã‚’é–‹ç™ºã—ãŸã®ã¯ã€æ¥½ã‚’ã™ã‚‹ãŸã‚ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã§ã™ã€‚</p><p>PR ã®æƒ…å ±ã¯ã‚ˆãå¿…è¦ã«ãªã‚‹ã®ã§è‡ªå‹•ã§å–å¾—ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><p>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è¤‡é›‘ãª CI ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã¨ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒæ‚ªããªã‚Šã¾ã™ã€‚
ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¸ã®ç¿’ç†Ÿåº¦ã«ä¾å­˜ã—ã¾ã™ãŒã€
ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãªã‚‰èª°ã§ã‚‚æ›¸ã‘ã‚‹åˆ†å…¨å“¡ãŒç¿’ç†Ÿã—ã¦ã„ã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ã—ã€
å®¹æ˜“ã«ãƒã‚°ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚
ãƒãƒ¼ãƒ ã«ã‚ˆã‚Šã¾ã™ãŒã€Python ã‚„ Ruby, Go ã¨ã„ã£ãŸä»–ã®è¨€èªã¨æ¯”ã¹ã€ lint ã‚„ test ãŒã•ã‚Œã¦ãªã„ã“ã¨ãŒå¤šã„ã›ã„ã‚‚ã‚ã‚‹ã¨ã¯æ€ã„ã¾ã™ã€‚
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã¯å½“ç„¶ CI ã§ test, lint ã™ã‚‹ã®ã«ã€
CI ã¨ã‹ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã—ãªã„ã¨ã„ã†ã®ã‚‚çã—ããªã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ã‚ã¨ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãŒè²§å¼±ã ã£ãŸã‚Šã€é–¢æ•°ã® I/F ãŒã‚ã‹ã‚Šã«ãã‹ã£ãŸã‚Šã€ã‚°ã‚°ã‚Šã«ãã„æ©Ÿèƒ½ãŒå¤šã‹ã£ãŸã‚Šã€
ã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é€ä¸€èª¿ã¹ãªã„ã¨ã‚ã‹ã‚‰ãªã‹ã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ä½™è«‡ã§ã™ãŒã€ shellcheck ã‚„ shfmt ã‚’ä½¿ã†ã“ã¨ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚
shellcheck ã‚’å§‹ã‚ã¦ä½¿ã†ã¨ã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã¯ã“ã‚“ãªã«è‰²ã€…ç½ ãŒã‚ã‚‹ã®ã‹ã¨æ°—ä»˜ã‹ã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p><a href="https://google.github.io/styleguide/shellguide.html" target="_blank" rel="noopener noreferrer">Google ã® Shell Style Guide</a> ã§ã¯æ¬¡ã®ã‚ˆã†ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p><blockquote><p>If you are writing a script that is more than 100 lines long, or that uses non-straightforward control flow logic, you should rewrite it in a more structured language now</p></blockquote><p>ã§ã¯ Ruby ã‚„ Python ã¨ã„ã£ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã§æ›¸ã„ãŸã‚‰ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ
ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§æŒ™ã’ãŸå•é¡Œã¯è§£æ±ºã™ã‚‹ã¨æ€ã„ã¾ã™ã—ã€éå¸¸ã«è‡ªç„¶ã§åˆç†çš„ãªé¸æŠã ã¨æ€ã„ã¾ã™ã€‚</p><p>ãã‚Œã§ã‚‚ buildflow ã‚’å®Ÿè£…ã—ãŸã®ã«ã¯ã€å¹¾ã¤ã‹èª²é¡Œæ„ŸãŒã‚ã£ãŸã‹ã‚‰ã§ã™ã€‚
ã¾ãšã¯å‡¦ç†ç³»ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ OS ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã™ã‚‹ã“ã¨ã§ã™ã€‚
ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä½¿ã‚ãªã‘ã‚Œã°ã„ã„è©±ã§ã™ãŒã€ Ruby ã‚„ Python ã‚’ä½¿ã£ã¦ã„ã‚Œã°ä½¿ã„ãŸã„ã¨ã„ã†å£°ã‚‚å‡ºã¦ãã‚‹ã“ã¨ã¯ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§åŒã˜è¨€èªã‚’ä½¿ã£ã¦ã„ã‚Œã°ãã‚Œã¨ã®å…±å­˜ã‚‚æ°—ã«ã—ãªã„ã¨ã„ã‘ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
buildflow ã«é™ã‚‰ãšã€è‡ªåˆ†ã¯ Go ã®ã€Œãƒ¯ãƒ³ãƒã‚¤ãƒŠãƒªã§å‹•ãã€ã¨ã„ã†ä¸–ç•Œè¦³ãŒéå¸¸ã«å¥½ãã§ã™ã€‚</p><p>è‡ªåˆ†ã¯ã“ã‚Œã¾ã§ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ Go ã§æ›¸ãç›´ã™ã¨ã„ã†ã“ã¨ã‚’ã‚„ã£ã¦ãã¾ã—ãŸã€‚
ãã®å ´åˆä»¥ä¸‹ã®2ã¤ãŒã‚ã‚Šã¾ã™ãŒã€ã©ã¡ã‚‰ã«ã›ã‚ˆèª²é¡Œæ„ŸãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã®ãƒã‚¤ãƒŠãƒªã‚’ä½¿ã†<ul><li>é…å¸ƒæ–¹æ³•ã‚’è€ƒãˆãªã„ã¨ã„ã‘ãªã„</li></ul></li><li>ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã®ã‚ˆã†ã« <code>go run</code> ã§å®Ÿè¡Œã™ã‚‹<ul><li>ä»–ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã¨åŒæ§˜ã®å•é¡ŒãŒã‚ã‚‹</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚³ãƒãƒ³ãƒ‰ã®åˆ†é›¢">ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚³ãƒãƒ³ãƒ‰ã®åˆ†é›¢<a href="#ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚³ãƒãƒ³ãƒ‰ã®åˆ†é›¢" class="hash-link" aria-label="Direct link to ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚³ãƒãƒ³ãƒ‰ã®åˆ†é›¢" title="Direct link to ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚³ãƒãƒ³ãƒ‰ã®åˆ†é›¢">â€‹</a></h2><p>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½•ã‹ã—ã‚‰ã®è¨€èªã§æ›¸ãç›´ã™å ´åˆã€
å…¨ã¦ã‚’ãã‚Œã‚‰ã§æ›¸ããŸã„ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ã ã‹ã‚‰ã“ãã€è¦æ¨¡ãŒå°ã•ã„ã†ã¡ã¯ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§æ›¸ãã®ã§ã—ã‚‡ã†ã€‚
ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§æ›¸ã„ãŸã»ã†ãŒæ¥½ãªéƒ¨åˆ†ã‚‚ã‚ã‚‹ã®ã§ã™ã€‚</p><p>buildflow ã§ã¯ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã®3ã¤ã«åˆ†é›¢ã—ã¾ã™ã€‚</p><ul><li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(YAML)</li><li>Tengo script</li><li>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ(ç´°ã‹ã„ã“ã¨è¨€ã†ã¨ã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆä»¥å¤–ã‚‚å®Ÿã¯ä½¿ãˆã‚‹ã‘ã©)</li></ul><p>ã“ã†ã—ã¦ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§æ›¸ãã«ãã„éƒ¨åˆ†ã‚’åˆ†é›¢ã—ã€é©åˆ‡ãªç²’åº¦ã§ç®¡ç†ã™ã‚‹ã“ã¨ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’é«˜ã‚ã‚‹ã¨ã„ã†ã®ãŒä¸€ã¤ã®ç‹™ã„ã§ã™ã€‚
Tengo script ã¯åŸºæœ¬çš„ã«ãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢ãªã©ã«å½¹å‰²ã‚’é™å®šã—ã€å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ‡ã‚Šå‡ºã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§
ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><p>buildflow ã«ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦ã®å´é¢ãŒã‚ã‚Šã€
buildflow ã«ä¹—ã£ã‹ã‚‹ã“ã¨ã§å…±é€šã®æ©Ÿèƒ½ã®å®Ÿè£…ã‚’çœã„ãŸã‚Šã€ã‚³ãƒ¼ãƒ‰ã‚’é©åˆ‡ã«åˆ†å‰²ã—ã¦ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’ç¶­æŒã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚</p><p>å°¤ã‚‚ã“ã“ã¯ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚
ä¸Šè¨˜ã® 3 ã¤ã‚’è¡Œãæ¥ã—ãªã„ã¨ã„ã‘ãªãã¦è¾›ã„ã¨ã„ã†ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚‚ã‚‰ã£ãŸã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚
ã‚³ãƒ¼ãƒ‰åˆ†å‰²ã¯å¿…é ˆã§ã¯ãªã„ã®ã§ YAML ã«ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§æ›¸ãã“ã¨ã‚‚å‡ºæ¥ã¾ã™ãŒã€ã‚ã¾ã‚ŠãŠã™ã™ã‚ã—ãªã„ã®ã¨ã€
ãã‚‚ãã‚‚ä¸Šè¨˜ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã®è¡Œãæ¥ã ã‘ã§ãªã</p><ul><li>buildflow ã®è¨­å®š</li><li>Tengo Script</li><li>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</li></ul><p>ã¨ã„ã† 3 ã¤ã®ç•°ãªã‚‹è¨€èªã‚’è¡Œãæ¥ã™ã‚‹ã¨ã„ã†æ„å‘³ã‚‚ã‚ã‚‹ã®ã§ã—ã‚‡ã†ã€‚</p><p>ãã‚Œã¯ãã†ã„ã†å´é¢ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚
ã“ã‚Œã¯ buildflow ã®æ ¹æœ¬çš„ãªéƒ¨åˆ†ãªã®ã§å¤‰æ›´ã•ã‚Œã‚‹ã“ã¨ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚
ã‚‚ã—å¤‰æ›´ã™ã‚‹ã‚ˆã†ãªã‚‰å¤šåˆ†åˆ¥ã®ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ä½œã£ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã¾ã¨ã‚">ã¾ã¨ã‚<a href="#ã¾ã¨ã‚" class="hash-link" aria-label="Direct link to ã¾ã¨ã‚" title="Direct link to ã¾ã¨ã‚">â€‹</a></h2><p>buildflow ã¯è‡ªåˆ†ãŒç›´é¢ã—ã¦ã„ã‚‹ CI/CD ã®èª²é¡Œ</p><ul><li>å¿…è¦ãªå‡¦ç†ã ã‘å®Ÿè¡Œã—ãŸã„</li><li>å…±é€šã®å‡¦ç†ã‚’é€ä¸€å®Ÿè£…ã—ãŸããªã„</li><li>ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’é«˜ã‚ãŸã„</li></ul><p>ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ä½œã‚Šã¾ã—ãŸã€‚</p><p>buildflow ã¯ãƒ¯ãƒ³ãƒã‚¤ãƒŠãƒªã§å‹•ãã¾ã™ã€‚
ã‚³ãƒ¼ãƒ‰ã‚’é©åˆ‡ã«åˆ†é›¢ã—ã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’é™¤å»ã™ã‚‹ã“ã¨ã§ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã®å®Ÿè¡Œçµæœã®å‡ºåŠ›å½¢å¼]]></title>
            <link>https://techblog.szksh.cloud/buildflow-result-output</link>
            <guid>https://techblog.szksh.cloud/buildflow-result-output</guid>
            <pubDate>Sat, 17 Oct 2020 23:36:09 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ã®å®Ÿè¡Œçµæœã®å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><p>ã¡ã‚‡ã£ã¨å‡ºåŠ›ã¯ã‚ã‹ã‚Šã«ãã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
æ”¹å–„ã—ãŸã„ã¨æ€ã„ã¤ã¤ã€ã©ã†ã‚ã‚‹ã¹ããªã®ã‹ã¾ã è¦‹ãˆã¦ãªã„ã®ã§ã“ã‚“ãªæ„Ÿã˜ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><p>task ã®æ¨™æº–å‡ºåŠ›ã€æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚
ã¾ãŸã€è¤‡æ•°ã®ã‚¿ã‚¹ã‚¯ã‚’ä¸¦åˆ—å®Ÿè¡Œã§ãã¾ã™ã€‚
è¤‡æ•°ã®ã‚¿ã‚¹ã‚¯ã®ãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å‡ºåŠ›ã™ã‚‹ã¨å½“ç„¶æ··ã˜ã‚‹ã®ã§ã€åŒºåˆ¥ãŒã¤ãã‚ˆã†ã«å„è¡Œã® prefix ã« <code>timestamp | task name | </code> ã‚’ã¤ã‘ã¦å‡ºåŠ›ã—ã¾ã™ã€‚
ãã‚Œã§ã‚‚æ··ã˜ã‚‹ã¨ã‚ã‹ã‚Šã«ãã„ã®ã§ã€ phase ãŒå®Œäº†å¾Œã«ã€ phase ã®å…¨ task ã®ãƒ­ã‚°ã‚’æ··ã–ã‚‰ãªã„ã‚ˆã†ã«ãã‚Œãã‚Œæ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã—ã¾ã™ã€‚
ã¤ã¾ã‚ŠåŒã˜ãƒ­ã‚°ãŒ 2 å›å‡ºåŠ›ã•ã‚Œã¾ã™ãŒ 2 å›å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==============</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">= Phase: phase å =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==============</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10:47:54UTC | task A | + /bin/sh -c echo hello # å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10:47:54UTC | task B | + /bin/sh -c echo foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10:47:54UTC | task A | hello # ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–(ã‚¨ãƒ©ãƒ¼)å‡ºåŠ›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10:47:54UTC | task A | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«å‡ºåŠ›ã•ã‚Œã‚‹ã®ã§è¤‡æ•°ã® task ã®ãƒ­ã‚°ãŒæ··ã–ã‚‹å ´åˆãŒã‚ã‚‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">= Phase Result: phase å = # è©²å½“ phase ã®å…¨ task å®Œäº†å¾Œã«å…¨ task ã®çµæœã¨æ¨™æº–(ã‚¨ãƒ©ãƒ¼)å‡ºåŠ›ã‚’å‡ºåŠ›ã™ã‚‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status: succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">task: task A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status: succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit code: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start time: 2020-10-14T10:47:54Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end time: 2020-10-14T10:47:54Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">duration: 4.818877ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ /bin/sh -c echo hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ãŒè‡ªå‹•ã§å–å¾—ã™ã‚‹ Pull Request ã®æƒ…å ±]]></title>
            <link>https://techblog.szksh.cloud/buildflow-pr-info</link>
            <guid>https://techblog.szksh.cloud/buildflow-pr-info</guid>
            <pubDate>Sat, 17 Oct 2020 23:13:48 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ãŒè‡ªå‹•ã§ Pull Request (ä»¥ä¸‹ PR) ã®æƒ…å ±ã‚’å–å¾—ã—ã¦ãã‚‹æ©Ÿèƒ½ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><p>ã“ã®æ©Ÿèƒ½ã¯ GitHub ã®ã¿ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ GitLab ã‚„ BitBucket ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
ã“ã‚Œã¯å˜ç´”ã«è‡ªåˆ†ãŒ GitHub ã—ã‹ä½¿ã‚ãªã„ã‹ã‚‰ã§ã™ã€‚</p><p>PR ã® CI ã§ã¯</p><ul><li>å¤‰æ›´ã•ã‚ŒãŸã‚‚ã®ã ã‘ãƒ†ã‚¹ãƒˆã™ã‚‹</li><li>ç‰¹å®šã® PR ãƒ©ãƒ™ãƒ«ãŒã¤ã„ã¦ã„ãŸã‚‰å®Ÿè¡Œã™ã‚‹</li><li>ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® PR ã ã‘å‡¦ç†ã‚’å¤‰ãˆã‚‹(bot ã¨ã‹)</li></ul><p>ã®ã‚ˆã†ã« PR ã®æƒ…å ±ã«åŸºã¥ã„ã¦æŒ™å‹•ã‚’å¤‰ãˆãŸããªã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ GitHub API å©ã„ã¦æƒ…å ±ã¨ã£ã¦ãã¦ jq ã§ãƒ‘ãƒ¼ã‚¹ã—ã¦ã¨ã‹ã€é ‘å¼µã‚Œã°åˆ¥ã«ã§ãã‚‹ã‚“ã§ã™ãŒã€
æ¯å›ãã†ã„ã†ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸããªã„ãªã¨æ„Ÿã˜ã¦ã„ã¾ã—ãŸã€‚</p><p>ãªãŠã€ PR ã®æƒ…å ±ã‚’ã¨ã£ã¦ãã‚‹æ©Ÿèƒ½ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™(GitHub Access Token å¿…è¦ã§ã™ã—ã­)ã€‚
è¨­å®šã§ <code>pr: true</code> ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚</p><p>PR ã®æƒ…å ±ã‚’ã¨ã£ã¦ãã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æƒ…å ±ãŒå¿…è¦ã§ã™ã€‚</p><ul><li>repository owner: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ <code>owner</code> ã‚’è¨­å®šã™ã‚‹ã‹ã€è‡ªå‹•å–å¾—ã€‚ <code>owner</code> ã‚’è¨­å®šã—ã¦ã‚ã‚‹å ´åˆã¯ãã¡ã‚‰ãŒå„ªå…ˆã•ã‚Œã‚‹</li><li>repository name: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ <code>repo</code> ã‚’è¨­å®šã™ã‚‹ã‹ã€è‡ªå‹•å–å¾—ã€‚ <code>repo</code> ã‚’è¨­å®šã—ã¦ã‚ã‚‹å ´åˆã¯ãã¡ã‚‰ãŒå„ªå…ˆã•ã‚Œã‚‹</li><li>pull request number: è‡ªå‹•å–å¾—</li><li>GitHub Access Token: ç’°å¢ƒå¤‰æ•° <code>GITHUB_TOKEN</code> ã¾ãŸã¯ <code>GITHUB_ACCESS_TOKEN</code> ã‚’æŒ‡å®šã—ã¦ãã ã•ã„</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å–å¾—ã•ã‚Œã‚‹æƒ…å ±">å–å¾—ã•ã‚Œã‚‹æƒ…å ±<a href="#å–å¾—ã•ã‚Œã‚‹æƒ…å ±" class="hash-link" aria-label="Direct link to å–å¾—ã•ã‚Œã‚‹æƒ…å ±" title="Direct link to å–å¾—ã•ã‚Œã‚‹æƒ…å ±">â€‹</a></h2><p>ä»¥ä¸‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚„ Tengo script ã«æ¸¡ã•ã‚Œã¾ã™ã€‚</p><ul><li>PR: PR ã®æƒ…å ±: <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/pulls#get-a-pull-request" target="_blank" rel="noopener noreferrer">GitHub API</a> ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ body</li><li>Files: PR ã§æ›´æ–°ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§: <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/pulls#list-pull-requests-files" target="_blank" rel="noopener noreferrer">GitHub API</a> ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ body</li></ul><p>Files ã«é–¢ã—ã¦ã¯ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚Œã¦ã„ã¦ã‚‚å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå–å¾—ã§ãã‚‹ã¾ã§ç¹°ã‚Šè¿”ã— API ã‚’å©ã„ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªå‹•å–å¾—ã®ä»•çµ„ã¿">è‡ªå‹•å–å¾—ã®ä»•çµ„ã¿<a href="#è‡ªå‹•å–å¾—ã®ä»•çµ„ã¿" class="hash-link" aria-label="Direct link to è‡ªå‹•å–å¾—ã®ä»•çµ„ã¿" title="Direct link to è‡ªå‹•å–å¾—ã®ä»•çµ„ã¿">â€‹</a></h2><p>å„ç¨® CI ã‚µãƒ¼ãƒ“ã‚¹ã®çµ„ã¿è¾¼ã¿ã®ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ãã‚Œã‚‰ã®æƒ…å ±ã‚’è‡ªå‹•ã§å–å¾—ã—ã¦ãã‚Œã¾ã™ã€‚</p><p>å†…éƒ¨çš„ã«ã¯ go-ci-env ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€ PR æƒ…å ±ã®è‡ªå‹•å–å¾—ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ CI ã‚µãƒ¼ãƒ“ã‚¹ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-ci-env#supported-ci-services" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-ci-env#supported-ci-services</a></p><p>PR ç•ªå·ãŒç’°å¢ƒå¤‰æ•°ã‹ã‚‰å–å¾—ã§ããªã„å ´åˆã€ revision ã‹ã‚‰é–¢é€£ã™ã‚‹ PR ã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã€ä¸€ç•ªæœ€åˆã® PR ã¨ã¿ãªã—ã¾ã™ã€‚
ã“ã‚Œã¯ PR ã®ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã® CI ã§ã¯ãƒãƒ¼ã‚¸ã•ã‚ŒãŸ PR ã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã“ã¨ã‚’æ„å›³ã—ã¦ã„ã¾ã™ã€‚</p><p>é–¢é€£ã™ã‚‹ PR ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯å–å¾—ã•ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ <code>nil</code> ã«ãªã‚‹ã ã‘ã§ã€ buildflow ã¯ç•°å¸¸çµ‚äº†ã—ãŸã‚Šã›ãšã«å‡¦ç†ã‚’ç¶šè¡Œã—ã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã§ã¯ãªãœ Tengo ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã‹]]></title>
            <link>https://techblog.szksh.cloud/buildflow-why-tengo</link>
            <guid>https://techblog.szksh.cloud/buildflow-why-tengo</guid>
            <pubDate>Sat, 17 Oct 2020 13:35:56 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ã§ãªãœ Tengo ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã‹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><p><a href="https://github.com/d5/tengo" target="_blank" rel="noopener noreferrer">https://github.com/d5/tengo</a></p><p>Tengo ã«é–¢ã—ã¦ã¯ <a href="https://techblog.szksh.cloud/buildflow-1/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/buildflow-1/</a> ã§ã‚‚å¤šå°‘è§¦ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ãªãœ Tengo ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã‹ã«é–¢ã—ã¦ã¯</p><ul><li>ãªãœã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã‹</li><li>ãªãœä»–ã®è¨€èªã§ã¯ãªã Tengo ãªã®ã‹</li></ul><p>ã® 2 ã¤ã®è¦³ç‚¹ã§è©±ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãªãœã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã‹">ãªãœã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã‹<a href="#ãªãœã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã‹" class="hash-link" aria-label="Direct link to ãªãœã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã‹" title="Direct link to ãªãœã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã‹">â€‹</a></h2><p>é€†ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã‚’æ¡ç”¨ã—ãªã„æ–¹æ³•ã¨ã—ã¦ã¯ã€ YAML ãªã©ã§ç‹¬è‡ª DSL ã®ã‚ˆã†ãªã‚‚ã®ã‚’å®šç¾©ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚
DSL ã¨è¨€ã†ã¨å¤§ã’ã•ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ AND, OR, NOT ã¨ã„ã£ãŸè«–ç†ã‚’ YAML ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿è¨˜è¿°è¨€èªã§è¡¨ç¾ã—ã‚ˆã†ã¨æ€ã†ã¨ãã‚“ãªæ„Ÿã˜ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã®æ–¹æ³•ã¯æ‰±ã„ãŸã„ãƒ­ã‚¸ãƒƒã‚¯ãŒå˜ç´”ãªã‚‚ã®ã«é™ã‚‰ã‚Œã‚‹ã®ã§ã‚ã‚Œã°å•é¡Œãªã„ã§ã™ãŒã€
ã‚ˆã‚ŠæŸ”è»Ÿãªãƒ­ã‚¸ãƒƒã‚¯ã‚’è¡¨ç¾ã—ãŸã„ã¨ãªã£ãŸå ´åˆã«ã€ç„¡ç†ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ã©ã†ã‚„ã£ã¦è¡¨ç¾ã™ã‚Œã°ã„ã„ã®ã‹è‡ªåˆ†ã§è€ƒãˆãªã„ã¨ã„ã‘ãªã„<ul><li>ã©ã†é ‘å¼µã£ã¦ã‚‚ç‹¬è‡ªãƒ«ãƒ¼ãƒ«ã«ãªã‚‹ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ç›´æ„Ÿçš„ã¨ã¯è¨€ãˆãªã„</li></ul></li><li>æ­£ã—ãå®Ÿè£…ã—ãªã„ã¨ã„ã‘ãªã„</li><li>ä»•æ§˜ã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã—ãªã„ã¨ã„ã‘ãªã„</li></ul><p>ä¸€æ–¹ã€ Go ã§ã¯å¹¾ã¤ã‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªãŒã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€ buildflow ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã«çµ„ã¿è¾¼ã‚€ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><p><a href="https://github.com/avelino/awesome-go#embeddable-scripting-languages" target="_blank" rel="noopener noreferrer">https://github.com/avelino/awesome-go#embeddable-scripting-languages</a></p><p>ã“ã‚Œã‚‰ã‚’æ´»ç”¨ã™ã‚Œã°ä¸Šè¨˜ã®å•é¡Œã¯è§£æ±ºã§ãã‚‹ã†ãˆã«ã€éå¸¸ã«æŸ”è»Ÿã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã§ãã¾ã™(å‹¿è«–è¨€èªã«ã‚ˆã‚Šã¾ã™ãŒ)ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãªãœä»–ã®è¨€èªã§ã¯ãªã-tengo-ãªã®ã‹">ãªãœä»–ã®è¨€èªã§ã¯ãªã Tengo ãªã®ã‹<a href="#ãªãœä»–ã®è¨€èªã§ã¯ãªã-tengo-ãªã®ã‹" class="hash-link" aria-label="Direct link to ãªãœä»–ã®è¨€èªã§ã¯ãªã Tengo ãªã®ã‹" title="Direct link to ãªãœä»–ã®è¨€èªã§ã¯ãªã Tengo ãªã®ã‹">â€‹</a></h2><p>å˜ç´”ã« <a href="https://github.com/avelino/awesome-go#embeddable-scripting-languages" target="_blank" rel="noopener noreferrer">https://github.com/avelino/awesome-go#embeddable-scripting-languages</a> ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸­ã§ä¸€ç•ªè¦ä»¶ã«ãƒãƒƒãƒã—ã¦ãã†ã ã£ãŸã‹ã‚‰ã§ã™ã€‚
ã¨ã„ã£ã¦ã‚‚å…¨ã¦ã‚’ã¡ã‚ƒã‚“ã¨ãƒã‚§ãƒƒã‚¯ã—ãŸã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€‚
Lua ã¨ã‹ã‚‚ã‚ã‚‹ã®ã§ãã‚Œã§ã‚‚è‰¯ã‹ã£ãŸã‹ã‚‚ã§ã™ãŒã€è‡ªåˆ†ã¯ Lua ã‚’å…¨ç„¶çŸ¥ã‚Šã¾ã›ã‚“ã€‚
ã‚ã¨ã¡ã‚ƒã‚“ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ‹ãƒ³ã‚°ã•ã‚Œã¦ã„ãŸã®ã‚‚ç†ç”±ã®ä¸€ã¤ã§ã™ã€‚
Tengo ã‚ˆã‚Šäººæ°—ã®ã‚ã‚‹è¨€èªã‚‚ã‚ã‚Šã¾ã—ãŸãŒã€ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã•ã‚Œã¦ãªã„ã¨ã„ã†ç†ç”±ã§è¦‹é€ã£ãŸã‚Šã—ã¾ã—ãŸã€‚</p><p>å®Ÿã¯ Tengo ã®å‰ã«ä»–ã®è¨€èª <a href="https://github.com/antonmedv/expr" target="_blank" rel="noopener noreferrer">antonmedv/expr</a> ã‚’æ¡ç”¨ã—ã¦ã„ãŸã®ã§ã™ãŒã€é€”ä¸­ã§è¡¨ç¾åŠ›ãŒè¶³ã‚Šã¦ãªã„ã®ã§ç§»è¡Œã—ã¾ã—ãŸã€‚
github-comment ã§ã‚‚ antonmedv/expr ã¯ä½¿ã£ã¦ã¾ã™ã—ã€ä¾¿åˆ©ã§ã¯ã‚ã‚‹ã®ã§ã™ãŒã€
å¤‰æ•°ãŒå®£è¨€ã§ããšã€åŸºæœ¬ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§æ›¸ãã—ã‹ãªã„ã®ã§ç„¡ç†ã ãªã¨åˆ¤æ–­ã—ã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/buildflow/issues/20" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/buildflow/issues/20</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="buildflow-ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã«æ±‚ã‚ã¦ã„ã‚‹ã‚‚ã®">buildflow ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã«æ±‚ã‚ã¦ã„ã‚‹ã‚‚ã®<a href="#buildflow-ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã«æ±‚ã‚ã¦ã„ã‚‹ã‚‚ã®" class="hash-link" aria-label="Direct link to buildflow ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã«æ±‚ã‚ã¦ã„ã‚‹ã‚‚ã®" title="Direct link to buildflow ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã«æ±‚ã‚ã¦ã„ã‚‹ã‚‚ã®">â€‹</a></h2><p>buildflow ã«ãŠã‘ã‚‹ Tengo ã®ç”¨é€”ã¯ã‚ãã¾ã§ãƒ­ã‚¸ãƒƒã‚¯ã®è¨˜è¿°ã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯æ‰±ã„ã«ãã„ map ç­‰ã®æ“ä½œã§ã™ã€‚
Tengo ã§å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã³å‡ºã—ãŸã‚Šã¨ã‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿æ›¸ãã—ãŸã‚Šã¨ã‹ãã†ã„ã†ã“ã¨ã¯è€ƒãˆã¦ã„ã¾ã›ã‚“
(ã¦ã£ãã‚Šãã†ã„ã†ã“ã¨ãŒå‡ºæ¥ãªã„è¨€èªãªã®ã‹ã¨å½“åˆæ€ã£ã¦ã„ã¾ã—ãŸãŒã€ã§ãã‚‹ã‚ˆã†ã§ã™ã­)ã€‚</p><p>Tengo ã¯ Python ã‚„ Ruby, Go ã¨ã„ã£ãŸè¨€èªã«æ¯”ã¹ã‚Œã°è¨€èªä»•æ§˜ãŒã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã§ã‚ã‚Šã€
ã‚ˆãçŸ¥ã‚‰ãªãã¦ã‚‚ãªã‚“ã¨ãªãèª­ã‚ã‚‹ã—ã€ç°¡å˜ã«ã‹ã‘ã‚‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãŸã€ Tengo ã§ã¯ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†ãªã©ã«ä½¿ãˆã‚‹æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™(ã“ã‚ŒãŒãªã„ã¨è¾›ã‹ã£ãŸã‘ã©ã€ã‚ã‚‹ã®ã§ååˆ†)ã€‚</p><p>ãªã®ã§ä»Šã®æ‰€ Tengo ã§ååˆ†ã ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ Tengo ã‚ˆã‚Šãƒªãƒƒãƒãªè¨€èªãŒã‚ã£ãŸã¨ã—ã¦ã‚‚ã€ä»Šã®æ‰€ã‚ã¾ã‚Šç§»è¡Œã™ã‚‹ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tengo-ã«é–¢ã™ã‚‹ä¸æº€">Tengo ã«é–¢ã™ã‚‹ä¸æº€<a href="#tengo-ã«é–¢ã™ã‚‹ä¸æº€" class="hash-link" aria-label="Direct link to Tengo ã«é–¢ã™ã‚‹ä¸æº€" title="Direct link to Tengo ã«é–¢ã™ã‚‹ä¸æº€">â€‹</a></h2><p>Tengo ã«é–¢ã™ã‚‹ä¸æº€ã‚’æŒ™ã’ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ã‚„ã¯ã‚ŠèªçŸ¥åº¦ãŒä½ã„</li><li>linter ãªã©ãŒãªã„</li><li>å„ç¨® editor ã§ syntax highlight ãŒãªã„(issue ã¯ã‚ã‚‹) <a href="https://github.com/d5/tengo/issues/146" target="_blank" rel="noopener noreferrer">https://github.com/d5/tengo/issues/146</a></li></ul><p>æƒ…å ±ãŒå°‘ãªã„ã®ã«é–¢ã—ã¦ã¯ã€è¨€èªä»•æ§˜ãŒã‚·ãƒ³ãƒ—ãƒ«ãªã®ã§å€‹äººçš„ã«ã¯ä»Šã®æ‰€å›°ã£ã¦ã¾ã›ã‚“(å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã‚ã°åˆ†ã‹ã‚‹</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tengo-script-ã®å®Ÿè¡Œ-test">Tengo script ã®å®Ÿè¡Œã€ Test<a href="#tengo-script-ã®å®Ÿè¡Œ-test" class="hash-link" aria-label="Direct link to Tengo script ã®å®Ÿè¡Œã€ Test" title="Direct link to Tengo script ã®å®Ÿè¡Œã€ Test">â€‹</a></h2><p>ã‚ˆãçŸ¥ã‚‰ãªã„è¨€èªã§ã‚ã‚Œã°ã€è©¦ã—ã«å®Ÿè¡Œã—ã¦ã¿ãŸã‚Šã€ã¡ã‚ƒã‚“ã¨ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ãŸã‚Šã—ãŸã„ã§ã™ã‚ˆã­ã€‚</p><p>å®Ÿè¡Œã«é–¢ã—ã¦ã¯å…¬å¼ã®æ–¹ã§ãƒ„ãƒ¼ãƒ«ãŒã‚ã£ãŸã‚Šã—ã¾ã™ã€‚</p><ul><li><a href="https://tengolang.com/" target="_blank" rel="noopener noreferrer">https://tengolang.com/</a></li><li><a href="https://github.com/d5/tengo/blob/master/docs/tengo-cli.md" target="_blank" rel="noopener noreferrer">https://github.com/d5/tengo/blob/master/docs/tengo-cli.md</a></li></ul><p>ãƒ†ã‚¹ãƒˆã«é–¢ã—ã¦ã¯ç°¡å˜ãªãƒ„ãƒ¼ãƒ«ã‚’åˆ¥ã«ä½œã‚Šã¾ã—ãŸ <a href="https://github.com/suzuki-shunsuke/tengo-tester" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/tengo-tester</a>
å¾“æ¥ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã“ã†ã„ã†ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¦ã‚‚ã€Œå‹•ã‘ã°ã„ã„ã€ç¨‹åº¦ã«è€ƒãˆã¦ã„ã¦ãƒ†ã‚¹ãƒˆã¯æ›¸ã‹ãªã„ã“ã¨ãŒå¤šã‹ã£ãŸã§ã™ãŒã€
ãƒ­ã‚¸ãƒƒã‚¯ã ã‘ã‚’ Tengo ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ã€ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã‚‚ç”¨æ„ã™ã‚‹ã“ã¨ã§ã¡ã‚ƒã‚“ã¨ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã‚ˆã†ã«ãªã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã® dynamic task]]></title>
            <link>https://techblog.szksh.cloud/buildflow-dynamic-task</link>
            <guid>https://techblog.szksh.cloud/buildflow-dynamic-task</guid>
            <pubDate>Sat, 17 Oct 2020 12:29:51 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ã® dynamic task ã¨ã„ã†æ©Ÿèƒ½ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
dynamic task ã§ã¯ task.items ã®å€¤ã§ãƒ«ãƒ¼ãƒ—ã‚’å›ã—ã€è¤‡æ•°ã® task ã‚’å‹•çš„ã«ç”Ÿæˆã§ãã¾ã™ã€‚
å‹¿è«– task.items ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã®ã§ã€æŒ‡å®šã—ãªã‘ã‚Œã°æ™®é€šã® task ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚
task.items ã‚’æŒ‡å®šã™ã‚‹å ´åˆã€ map ã‹ list ã‹ã€ãã‚Œã‚‰ã‚’è¿”ã™ Tengo script ã§ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">phases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"list {{.Item.Key}} {{.Item.Value.name}}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"echo {{.Item.Key}} {{.Item.Value.name}} {{.Item.Value.age}}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">items</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šè¨˜ã®è¨­å®šã¯ dynamic task ã‚’ä½¿ã‚ãªã„ã¨ã“ã†ãªã‚Šã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">phases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"list 0 foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"echo 0 foo 10"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"list 1 bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"echo 1 bar 20"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ <code>Item</code> ã¯ Key, Value ã‚’æŒã¡ã€ Items ãŒ map ã®å ´åˆã€ãã‚Œãã‚Œ map ã® key, value ãŒæ¸¡ã•ã‚Œã€ list ã®å ´åˆã€ index ã¨ value ãŒæ¸¡ã•ã‚Œã¾ã™ã€‚</p><p>ä¸Šè¨˜ã®ä¾‹ã¯å˜ç´”ã™ãã¦ã‚¤ãƒã‚¤ãƒã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€
ä¾‹ãˆã°ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã®ä¸€è¦§ã‚’è¿”ã™ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã‚’å…ƒã«
dynamic task ã§ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã«åˆ¥ã® task ã§ä¸¦åˆ—ã«å‡¦ç†ã™ã‚‹ã¨ã‹ãŒè€ƒãˆã‚‰ã‚Œãã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ¶ç´„">åˆ¶ç´„<a href="#åˆ¶ç´„" class="hash-link" aria-label="Direct link to åˆ¶ç´„" title="Direct link to åˆ¶ç´„">â€‹</a></h2><p>task.items ã¯ phase ã®æœ€åˆã«è©•ä¾¡ã•ã‚Œã¾ã™ã€‚
ã¤ã¾ã‚ŠåŒã˜ phase ã® task ã®çµæœã‚’å‚ç…§ã—ãŸã‚Šå‡ºæ¥ã¾ã›ã‚“ã€‚</p><p>ã“ã‚Œã¯ task.dependency ã®è©•ä¾¡æ™‚ã«ã€ task ã®ãƒªã‚¹ãƒˆãŒå®šã¾ã£ã¦ã„ãªã„ã¨è©•ä¾¡ã§ããªã„ãŸã‚ã§ã™ã€‚</p><p>ãŸã ã—ã€å‰ã® phase åŠã³ phase ã® task ã®å®Ÿè¡Œçµæœã¯å‚ç…§ã§ãã‚‹ãŸã‚ã€ items ã§ç‰¹å®šã® task ã®å®Ÿè¡Œçµæœã‚’å‚ç…§ã—ãŸã„å ´åˆã¯ã€phase ã‚’åˆ†ã‘ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><p>å®Ÿã¯ dynamic task ã‚’å®Ÿç¾ã™ã‚‹ä¸Šã§ä¸Šè¨˜ã®å•é¡Œã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ãŸã‚ã« phase ã¨ã„ã†æ¦‚å¿µã‚’å°å…¥ã—ãŸã¨ã„ã†çµŒç·¯ãŒã‚ã£ãŸã‚Šã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã® task ã® input, output ã¨ã„ã†æ©Ÿèƒ½]]></title>
            <link>https://techblog.szksh.cloud/buildflow-input-output</link>
            <guid>https://techblog.szksh.cloud/buildflow-input-output</guid>
            <pubDate>Sat, 17 Oct 2020 12:05:41 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ã® task ã® input, output ã¨ã„ã†æ©Ÿèƒ½ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
task ã® input, output ã¯ Tengo script ã§ task ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ•´å½¢ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚</p><p>task ã® command.command ã‚„ write_file.template ãªã©ã€å¹¾ã¤ã‹ã®è¨­å®šã§ã¯ Go ã® text/template ãŒä½¿ãˆã¾ã™ãŒã€ text/template ã¯è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã—ãŸã‚Šã™ã‚‹ã®ã«ã¯å‘ã„ã¦ã„ã¾ã›ã‚“ã€‚
ãã“ã§ task ã® input ã§ Tengo script ã‚’ä½¿ã£ã¦å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢ã‚’è¡Œã†ã“ã¨ã§ã€
template ã¯æ¯”è¼ƒçš„ãã‚Œã„ãªçŠ¶æ…‹ã«ä¿ã¤ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><p>ã“ã‚Œã¯ MVC ãƒ¢ãƒ‡ãƒ«ã§ View ã¨ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ†é›¢ã™ã‚‹ã¿ãŸã„ãªè€ƒãˆæ–¹ã¨ä¼¼ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>output ã§ã¯ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã‚’æ•´å½¢ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ä¾‹ãˆã°ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–å‡ºåŠ›ã‚’ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã«ã—ãŸã‚Šå‡ºæ¥ã¾ã™ã€‚</p><p>task.input ã¯ task.when ãŒè©•ä¾¡ã•ã‚ŒãŸã‚ã¨ã€ task ã® command ãªã©ãŒå®Ÿè¡Œã•ã‚Œã‚‹å‰ã«è©•ä¾¡ã•ã‚Œã¾ã™ã€‚
ã¤ã¾ã‚Šã€ task.when ã‚„ task.dependency ã§åŒã˜ task ã® input ã®çµæœã‚’å‚ç…§ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/buildflow-split-files</link>
            <guid>https://techblog.szksh.cloud/buildflow-split-files</guid>
            <pubDate>Sat, 17 Oct 2020 11:49:28 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã‹ãªã¨æ€ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><p>buildflow ã§ã¯ä¸€éƒ¨ã®è¨­å®šé …ç›®ã«ã¤ã„ã¦ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦èª­ã¿è¾¼ã‚€ã¨ã„ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
1 ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å…¨éƒ¨ã®è¨­å®šã‚’æ›¸ã„ã¦ã„ã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§ãããªã£ã¦ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒæ‚ªããªã£ãŸã‚Šã€
ã‚³ãƒ¼ãƒ‰ã‚ªãƒ¼ãƒŠãƒ¼ãŒæ›–æ˜§ã«ãªã£ãŸã‚Šã™ã‚‹ã®ã§ã€ãã†ã„ã†å ´åˆã¯åˆ†å‰²ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚
ã‚³ãƒ¼ãƒ‰ã‚ªãƒ¼ãƒŠãƒ¼ãŒç•°ãªã‚‹è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã§å…±é€šã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨ã„ã‚‹å ´åˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã¦
GitHub ã® CODEOWNERS ã‚’è¨­å®šã™ã‚‹ã®ã‚‚ã‚ˆã„ã§ã—ã‚‡ã†ã€‚
ã‚ã¾ã‚Šãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹ã¨åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§å†åˆ©ç”¨ã‚‚å‡ºæ¥ã¾ã™ã€‚</p><p>ã¾ãŸã€ Tengo script ã‚’ç‹¬ç«‹ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†å‰²ã™ã‚‹ã¨ã€ test ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
Tengo script ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ <a href="https://github.com/suzuki-shunsuke/tengo-tester" target="_blank" rel="noopener noreferrer">tengo-tester</a> ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚‚é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ã€ãã¡ã‚‰ã‚’ãŠä½¿ã„ãã ã•ã„ã€‚</p><p>ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã®è¨­å®šãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>phase.import</li><li>task.import:</li><li>task.input_file</li><li>task.output_file</li><li>task.when_file</li><li>command.command_file</li><li>command.env[].value_file</li><li>write_file.template_file</li></ul><p>ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¯ã€çµ¶å¯¾ãƒ‘ã‚¹ã‹ã€å®Ÿè¡Œä¸­ã® build ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã«ãªã‚Šã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã® script ã‚„ template ã«æ¸¡ã•ã‚Œã‚‹ parameter]]></title>
            <link>https://techblog.szksh.cloud/buildflow-parameter</link>
            <guid>https://techblog.szksh.cloud/buildflow-parameter</guid>
            <pubDate>Sat, 17 Oct 2020 10:44:39 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã¨æ€ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ã® Tengo script ã‚„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æ¸¡ã•ã‚Œã‚‹å¤‰æ•°ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>buildflow ã§ã¯ Tengo script ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒä½¿ãˆã‚‹è¨­å®šé …ç›®ãŒå¤šãã‚ã‚Šã¾ã™ã€‚ãã‚Œã‚‰ã®è¨­å®šã«ã¯å…±é€šã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæ¸¡ã•ã‚Œã¾ã™ã€‚</p><ul><li>PR: Pull Request ã®æƒ…å ±: <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/pulls#get-a-pull-request" target="_blank" rel="noopener noreferrer">GitHub API</a> ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ body</li><li>Files: Pull Request ã§æ›´æ–°ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§: <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/pulls#list-pull-requests-files" target="_blank" rel="noopener noreferrer">GitHub API</a> ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ body</li><li>Phases: å¯¾è±¡ã® Phase ã‚ˆã‚Šã‚‚å‰ã® Phase ã®çµæœ</li><li>Phase: å¯¾è±¡ã® Phase</li><li>Tasks: å¯¾è±¡ã® Phase ã® Task ã®çµæœ</li><li>Task: å¯¾è±¡ã® Task</li><li>Item: dynamic task ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æ¸¡ã•ã‚Œã‚‹</li><li>Meta: è¨­å®š meta</li></ul><p>Phase</p><ul><li>Status: Phase ã®å®Ÿè¡Œçµæœ<ul><li>succeeded</li><li>failed</li><li>skipped</li></ul></li><li>Tasks: Phase ã® task ã®å®Ÿè¡Œçµæœ</li><li>Meta: phase ã® è¨­å®š meta</li></ul><p>Task</p><p>type ã«ã‚ˆã‚‰ãšå…±é€š</p><ul><li>Type: task ã® type</li><li>Name: task å</li><li>Status: Task ã®å®Ÿè¡Œçµæœ<ul><li>queue</li><li>running</li><li>succeeded</li><li>failed</li><li>skipped</li></ul></li><li>Meta: task ã® meta ã®è¨­å®š</li><li>Input:</li><li>Output:</li></ul><p>command</p><ul><li>ExitCode</li><li>StdOut</li><li>StdErr</li><li>CombinedOutput</li></ul><p>read_file</p><ul><li>File<ul><li>Text: ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹</li><li>Data: read_file ã® format ã‚’æŒ‡å®šã—ãŸå ´åˆã€ãƒ‘ãƒ¼ã‚¹ã•ã‚ŒãŸçµæœ</li></ul></li></ul><p>write_file</p><ul><li>File<ul><li>Text: ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="template-ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹">Template ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹<a href="#template-ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹" class="hash-link" aria-label="Direct link to Template ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹" title="Direct link to Template ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹">â€‹</a></h2><p>ä¾‹ãˆã° command ã®å ´åˆ</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">phases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'echo "{{.Task.Name}}"'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tengo-script-ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹">Tengo script ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹<a href="#tengo-script-ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹" class="hash-link" aria-label="Direct link to Tengo script ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹" title="Direct link to Tengo script ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹">â€‹</a></h2><p>ä¾‹ãˆã° task foo ãŒæˆåŠŸã—ãŸå ´åˆã®ã¿ã€ task bar ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆ</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">phases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">dependency</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      task := {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      for t in Tasks {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        if t.Name == "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          task = t</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          break</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      result := task.Status == "succeeded"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã®ã‚ˆã†ã«ä»–ã® task ã®å®Ÿè¡Œçµæœã‚„ PR ã®æƒ…å ±ãªã©ã‚’ä½¿ã£ã¦ãƒ“ãƒ«ãƒ‰ã®æŒ™å‹•ã‚’å¤‰ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã® task ã®è¨­å®šé …ç›®]]></title>
            <link>https://techblog.szksh.cloud/buildflow-task</link>
            <guid>https://techblog.szksh.cloud/buildflow-task</guid>
            <pubDate>Sat, 17 Oct 2020 09:26:57 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã¨æ€ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ã® task ã®åŸºæœ¬çš„ãªè¨­å®šé …ç›®ãªã©ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
æ•°ãŒå¤šã„ã®ã§ã€å€‹ã€…ã®è¨­å®šã®è©³ç´°ã¯ã¾ãŸåˆ¥ã®è¨˜äº‹ã«æ›¸ãã¾ã™ã€‚</p><p>task ã«ã¯å¹¾ã¤ã‹ type ãŒã‚ã‚Šã¾ã™ãŒã€å…¨ã¦ã® type ã«å…±é€šã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚</p><ul><li>name: task åã€‚ unique ã§ã‚ã‚‹å¿…è¦ã¯ãªã„ã€‚ Go ã® text/template ãŒä½¿ãˆã‚‹</li><li>when: task ã‚’å®Ÿè¡Œã™ã‚‹ã‹å¦ã‹ã€‚ çœŸå½å€¤ã‹ Tengo script<ul><li>when_file ã§å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã‚‹</li></ul></li><li>dependency: task ã®ä¾å­˜é–¢ä¿‚ã®å®šç¾©ã€‚ task åã®ãƒªã‚¹ãƒˆã‹ã€ Tengo script</li><li>items: dynamic task ã®è¨­å®šã€‚ loop ã‚’ä½¿ã£ã¦è¤‡æ•°ã® task ã‚’å‹•çš„ã«ç”Ÿæˆã§ãã‚‹<ul><li>ä»»æ„ã® list ã‹ map ã‹ã€ Tengo script</li></ul></li><li>input: Tengo script ã§ task ã®ã‚³ãƒãƒ³ãƒ‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã§ãã‚‹<ul><li>input_file ã§å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã‚‹</li></ul></li><li>output: Tengo script ã§ task ã®å®Ÿè¡Œçµæœã‚’æ•´å½¢ã§ãã‚‹ã€‚ä»–ã® task ãŒå‚ç…§ã—ã¦æŒ™å‹•ã‚’å¤‰ãˆãŸã‚Šã§ãã‚‹<ul><li>output_file ã§å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã‚‹</li></ul></li><li>meta: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªç”±ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã§ãã‚‹ map</li></ul><p>ä¸Šè¨˜ã®è¨­å®šã¯ name ä»¥å¤–ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚</p><p>task ã® type ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>command: å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ</li><li>read_file: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ä»–ã® task ã§å‚ç…§ã§ãã‚‹</li><li>write_file: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã‚€</li></ul><p>command ã®è¨­å®š</p><ul><li>shell, shell_opts: ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã‚·ã‚§ãƒ«ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ <code>/bin/sh -c</code></li><li>command: ã‚³ãƒãƒ³ãƒ‰ã€‚ Go ã® text/template ã§å‡¦ç†ã•ã‚Œã‚‹<ul><li>command_file ã§å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã‚‹</li></ul></li><li>stdin: ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–å…¥åŠ›ã€‚ Go ã® text/template ã§å‡¦ç†ã•ã‚Œã‚‹<ul><li>stdin_file ã§å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã‚‹</li></ul></li><li>env: ç’°å¢ƒå¤‰æ•°ã€‚ç’°å¢ƒå¤‰æ•°åã¨å€¤ã¯ Go ã® text/template ã§å‡¦ç†ã•ã‚Œã‚‹</li></ul><p>read_file ã®è¨­å®š</p><ul><li>path: ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã€‚Go ã® text/template ã§å‡¦ç†ã•ã‚Œã‚‹</li><li>format: ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚ json ã¨ yaml ã‚’ã‚µãƒãƒ¼ãƒˆã€‚æŒ‡å®šã™ã‚‹ã¨ãƒ‘ãƒ¼ã‚¹ã—ãŸçµæœã‚’ä»–ã® task ãŒå‚ç…§ã§ãã‚‹</li></ul><p>write_file ã®è¨­å®š</p><ul><li>path: ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã€‚Go ã® text/template ã§å‡¦ç†ã•ã‚Œã‚‹</li><li>template: ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã€‚Go ã® text/template ã§å‡¦ç†ã•ã‚Œã‚‹<ul><li>template_file ã§å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã‚‹</li></ul></li></ul>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã® build, phase, task ã«ã¤ã„ã¦]]></title>
            <link>https://techblog.szksh.cloud/buildflow-build-phase-task</link>
            <guid>https://techblog.szksh.cloud/buildflow-build-phase-task</guid>
            <pubDate>Sat, 17 Oct 2020 09:09:19 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã¨æ€ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ã®æ¦‚å¿µã§ã‚ã‚‹ build, phase, task ã«ã¤ã„ã¦æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>buildflow ã«ã¯ Build, Phase, Task ã¨ã„ã†æ¦‚å¿µãŒã‚ã‚Šã¾ã™ã€‚
CircleCI ã® Pipeline, Workflow, Job ã¿ãŸã„ãªã‚‚ã®ã¨æ€ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã¨ã‚ˆã„ã¨æ€ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ buildflow run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã§ 1 ã¤ã® build ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
build ã¯è¤‡æ•°ã® phase ã‹ã‚‰ãªã‚Šã€ phase ãŒ 1 ã¤ãšã¤é †ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
phase ã¯è¤‡æ•°ã® task ã‹ã‚‰ãªã‚Šã€ task ãŒå…¨ã¦çµ‚äº†ã™ã‚‹ã¨ã€ãã® phase ã‚‚çµ‚äº†ã¨ãªã‚Šã¾ã™ã€‚
task ã¯ä¸¦åˆ—ã«å®Ÿè¡Œã—ãŸã‚Šã€ä¾å­˜é–¢ä¿‚ã‚’å®šç¾©ã—ãŸã‚Šã§ãã¾ã™ã€‚
task ã§ã¯å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã‚Šã§ãã¾ã™ã€‚</p><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ phases, tasks ã‚’ãã‚Œãã‚Œé…åˆ—ã§æŒ‡å®šã—ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">phases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">dependency</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> post build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šã®ä¾‹ã§ã¯ 3 ã¤ã® phase setup, build, post build ãŒé †ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã©ã‚Œã‹ã® phase ãŒå¤±æ•—ã™ã‚‹ã¨ãã‚Œä»¥é™ã® phase ã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“(ã“ã®æŒ™å‹•ã¯å¤‰ãˆã‚‰ã‚Œã¾ã™)ã€‚</p><p>task ã‚‚ phase åŒæ§˜é…åˆ—ã§æŒ‡å®šã—ã¾ã™ãŒã€é…åˆ—ã®é †åºã«æ„å‘³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ä¾å­˜é–¢ä¿‚ãŒãªã„é™ã‚Šã€ä¸¦åˆ—ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã—ã€å®Ÿè¡Œé †åºã¯ä¸å®šã§ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã§ã® Tengo ã®ä½¿ã„æ–¹]]></title>
            <link>https://techblog.szksh.cloud/buildflow-tengo</link>
            <guid>https://techblog.szksh.cloud/buildflow-tengo</guid>
            <pubDate>Sat, 17 Oct 2020 08:18:34 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ buildflow ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã‹ãªã¨æ€ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ <code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ buildflow ã§ Tengo ã¨ã„ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã‚’ã©ã®ã‚ˆã†ã«ä½¿ã£ã¦ã„ã‚‹ã‹æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p><a href="https://github.com/d5/tengo" target="_blank" rel="noopener noreferrer">https://github.com/d5/tengo</a></p><p>buildflow ã®è¨­å®šã§ã¯ task.when ã‚„ task.dependency, task.input ãªã©ã§ Tengo script ãŒä½¿ãˆã¾ã™ãŒã€
1 ã¤ã®å…±é€šã®ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚
<code>result</code> ã¨ã„ã†å¤‰æ•°ã‚’å®£è¨€ã—ã€ script ã®å®Ÿè¡Œçµæœã‚’ãã®å¤‰æ•°ã«æŒãŸã›ã‚‹ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ã§ã™ã€‚
ã“ã‚Œã¯ Tengo ã®ä»•æ§˜ã¨ã‹ã§ã¯ãªãã€ buildflow ç‰¹æœ‰ã®ãƒ«ãƒ¼ãƒ«ã§ã™ã€‚
ã‚‚ã£ã¨ã‚‚å˜ç´”ãªä¾‹ã ã¨æ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">result := true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>task.input, output ãªã©ã ã¨ result ã®å€¤ãŒ Task.Input, Task.Output ã¨ã—ã¦å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">phases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">input</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      result := {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        foo: "bar"</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'echo "{{.Task.Input.foo}}"'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"result := true"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tengo-ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª">Tengo ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª<a href="#tengo-ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª" class="hash-link" aria-label="Direct link to Tengo ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª" title="Direct link to Tengo ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª">â€‹</a></h2><p>Tengo ã«ã¯<a href="https://github.com/d5/tengo/blob/master/docs/stdlib.md" target="_blank" rel="noopener noreferrer">æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</a>ãŒã‚ã‚Šã¾ã™ã€‚
buildflow ã§ã¯å…¨ã¦ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½¿ãˆã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[buildflow ã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã®ã‚ˆã†ãªã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã„ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/buildflow-1</link>
            <guid>https://techblog.szksh.cloud/buildflow-1</guid>
            <pubDate>Sat, 17 Oct 2020 07:06:31 GMT</pubDate>
            <description><![CDATA[buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>buildflow ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚
<code>buildflow</code> ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã¦ä½•å›ã‹ã«åˆ†ã‘ã¦ãƒ–ãƒ­ã‚°ã‚’æ›¸ã“ã†ã‹ãªã¨æ€ã„ã¾ã™ã€‚
1æœ¬ç›®ã®ã“ã®è¨˜äº‹ã§ã¯</p><ul><li>ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹</li><li>Hello World</li><li>ç‰¹å¾´</li></ul><p>ã«ã¤ã„ã¦ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹">ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹<a href="#ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹" class="hash-link" aria-label="Direct link to ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹" title="Direct link to ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹">â€‹</a></h2><p><a href="https://github.com/suzuki-shunsuke/buildflow" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/buildflow</a></p><p>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã® CLI ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã¨è¨€ã†ã¨ Airflow ã¨ã‹ Azkaban, Argo Workflows ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹ã‹ã¨æ€ã„ã¾ã™ãŒã€
ãã‚Œã‚‰ã¨ã¯ç›®çš„ã‚‚æ©Ÿèƒ½ã‚‚é•ã„ã¾ã™ã€‚
ä¸€éƒ¨ã® CI ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŸã‚Šã—ã¾ã™ãŒã€ãã‚“ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
buildflow ã§ã¯ task ã¨ task ã®ä¾å­˜é–¢ä¿‚ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å®šç¾©ã—ã€ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚¿ã‚¹ã‚¯ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
ãã†ã„ã†ã¨ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã¨ã„ã£ãŸã»ã†ãŒã„ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å€‹åˆ¥ã®ã‚¿ã‚¹ã‚¯ã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œã™ã‚‹ã‚ˆã†ãªæ©Ÿèƒ½ã¯ãªã„ã®ã§ã€ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã¨ã‚‚é•ã†æ°—ãŒã—ã¾ã™ã€‚</p><p>CI ã‚µãƒ¼ãƒ“ã‚¹ä¸Šã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦é–‹ç™ºã—ã¦ã„ã¾ã™(æ±ç”¨çš„ãªãƒ„ãƒ¼ãƒ«ãªã®ã§ä»–ã®ç›®çš„ã§ã‚‚ä½¿ãˆã‚‹ã¨ã¯æ€ã„ã¾ã™)ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hello-world">Hello World<a href="#hello-world" class="hash-link" aria-label="Direct link to Hello World" title="Direct link to Hello World">â€‹</a></h2><p>ã¾ã ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹ãƒ”ãƒ³ã¨æ¥ã¦ãªã„äººã‚‚ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã€ç°¡å˜ãª Hello World ã‚’ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/buildflow/releases" target="_blank" rel="noopener noreferrer">GitHub Releases</a> ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚</p><p>æ¬¡ã®ã‚ˆã†ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ« <code>.buildflow.yaml</code> ã‚’ç”¨æ„ã—ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">phases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ task ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ buildflow run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==============</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">= Phase: main =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==============</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07:50:46UTC | hello | + /bin/sh -c echo hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07:50:46UTC | hello |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07:50:46UTC | hello | hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07:50:46UTC | hello |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">= Phase Result: main =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status: succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">task: hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status: succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit code: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start time: 2020-10-17T07:50:46Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end time: 2020-10-17T07:50:46Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">duration: 4.317259ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ /bin/sh -c echo hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹å¾´">ç‰¹å¾´<a href="#ç‰¹å¾´" class="hash-link" aria-label="Direct link to ç‰¹å¾´" title="Direct link to ç‰¹å¾´">â€‹</a></h2><p>task ã‚’ä¾å­˜é–¢ä¿‚ã«åŸºã¥ã„ã¦ä¸¦åˆ—å®Ÿè¡Œã§ãã¾ã™ã€‚åŠ ãˆã¦ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ãƒ¯ãƒ³ãƒã‚¤ãƒŠãƒªã§å‹•ãã€‚ä»–ã«ä¾å­˜ã™ã‚‹ã‚‚ã®ãŒãªã„<ul><li>Go ã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™</li></ul></li><li>ä»–ã®ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œçµæœã«ã‚ˆã£ã¦ã‚¿ã‚¹ã‚¯ã®æŒ™å‹•ã‚’å¤‰ãˆã‚‰ã‚Œã‚‹<ul><li>æ¨™æº–(ã‚¨ãƒ©ãƒ¼)å‡ºåŠ›ã€ exit code, etc</li><li>dynamic ã« task ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½</li></ul></li><li>Tengo ã¨ã„ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã‚’ç”¨ã„ã¦æŸ”è»Ÿãªè¨­å®šã‚’æ›¸ã‘ã‚‹<ul><li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ YAML ã§ã™ãŒã€ä¸€éƒ¨ã®è¨­å®šã« Tengo ã¨ã„ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªãŒä½¿ãˆã¾ã™</li><li>Tengo ã®å‡¦ç†ç³»ã‚‚ buildflow ã«å†…åŒ…ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ Tengo ã®å‡¦ç†ç³»ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“</li></ul></li><li>CI ã§å®Ÿè¡Œæ™‚ã« Pull Request (ä»¥ä¸‹ PR) ã®æƒ…å ±ã«åŸºã¥ã„ã¦å‡¦ç†ã‚’å¤‰ãˆã‚‰ã‚Œã‚‹<ul><li>GitHub å‰æ(GitLab ã‚„ BitBucket ã¯ã‚µãƒãƒ¼ãƒˆå¤–)</li><li>è‡ªå‹•ã§ PR ã®æƒ…å ±ã‚’å–å¾—</li></ul></li></ul><p>Tengo ã¯ Go ã§å®Ÿè¡Œã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã§ã™ã€‚ <a href="https://github.com/d5/tengo" target="_blank" rel="noopener noreferrer">https://github.com/d5/tengo</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
ãªãœ Tengo ã‚’æ¡ç”¨ã—ãŸã‹ã¨ã‹ã¯åˆ¥ã«æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>Tengo ã¯ Python ã‚„ Ruby, Go ã¨ã„ã£ãŸè¨€èªã«æ¯”ã¹ã‚Œã°è¨€èªä»•æ§˜ãŒã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã§ã‚ã‚Šã€
ã‚ˆãçŸ¥ã‚‰ãªãã¦ã‚‚ãªã‚“ã¨ãªãèª­ã‚ã‚‹ã—ã€ç°¡å˜ã«ã‹ã‘ã‚‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
åŠ ãˆã¦ã€ãã‚‚ãã‚‚ buildflow ã®ä¸­ã§ã® Tengo ã®å½¹å‰²ã¯é™å®šã•ã‚Œã¦ãŠã‚Šã€ Tengo ã‚’ã‚´ãƒªã‚´ãƒªæ›¸ãå¿…è¦ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚</p><p>PR ã®æƒ…å ±ã«åŸºã¥ãã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><ul><li>ç‰¹å®šã®ãƒ©ãƒ™ãƒ«ãŒã¤ã„ãŸã‚‰ task ã‚’å®Ÿè¡Œã™ã‚‹</li><li>ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒ PR ã§æ›´æ–°ã•ã‚ŒãŸã‚‰ task ã‚’å®Ÿè¡Œã™ã‚‹</li><li>ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼(botã¨ã‹)ã‹ã‚‰ã® PR ã§ã¯ task ã‚’å®Ÿè¡Œã—ãªã„</li></ul><p>ã“ã‚Œã‚‰ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯è‡ªåˆ†ãŒã‚ˆãæ¬²ã—ããªã‚‹ã®ã§ã€ buildflow ã‚’ä½¿ãˆã°ç°¡å˜ã«å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p><p>ä»–ã«ã‚‚æ§˜ã€…ãªæ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã®ã§ã€ã¾ãŸåˆ¥ã®è¨˜äº‹ã§ç´¹ä»‹ã§ããŸã‚‰ã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>buildflow</category>
        </item>
        <item>
            <title><![CDATA[tfnotify ã® parse error ã‚’é€šçŸ¥ã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/post-tfnotify-parse-error</link>
            <guid>https://techblog.szksh.cloud/post-tfnotify-parse-error</guid>
            <pubDate>Fri, 11 Sep 2020 23:05:59 GMT</pubDate>
            <description><![CDATA[tfnotify ãŒ terraform ã®æ¨™æº–å‡ºåŠ›ã®ãƒ‘ãƒ¼ã‚¹ã«å¤±æ•—ã—ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã§ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/mercari/tfnotify" target="_blank" rel="noopener noreferrer">tfnotify</a> ãŒ terraform ã®æ¨™æº–å‡ºåŠ›ã®ãƒ‘ãƒ¼ã‚¹ã«å¤±æ•—ã—ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã§ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã§ããªãã¦ã‚‚ãƒ“ãƒ«ãƒ‰ã®ãƒ­ã‚°ã«ã¯æ®‹ã‚‹ã®ã§ã™ãŒã€ã‚„ã¯ã‚Šã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã§ãã‚‹ã¨ä¾¿åˆ©ãªã®ã§ã€tfnotify ãŒãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã§ã‚³ãƒ¡ãƒ³ãƒˆã®æŠ•ç¨¿ã«å¤±æ•—ã—ãŸã‚‰ã€ <a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">github-comment</a> ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p><p>ãªãŠã€ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ tfnotify v0.7.0, github-comment v1.9.0 ã§ã™ã€‚</p><p>ä¾‹ãˆã° <code>tfnotify plan</code> ãŒãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸå ´åˆã€ <code>cannot parse plan result</code> ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚
ãã“ã§æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã« <code>cannot parse plan result</code> ãŒå«ã¾ã‚Œã¦ã„ãŸã‚‰ github-comment ã§ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform plan | github-comment exec -k plan -- tfnotify plan</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>.github-comment.yml</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ç´°ã‹ã template ã‚’åˆ†ã‘ã¦ã„ã‚‹ãŒã€åˆ¥ã«åˆ†ã‘ãªãã¦ã‚‚ã‚ˆã„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">templates</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># header ã¯ CodeBuild ã®å ´åˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">header</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'{{Env "TARGET"}} [Build link]({{Env "CODEBUILD_BUILD_URL"}})'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">exit_code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">':{{if eq .ExitCode 0}}white_check_mark{{else}}x{{end}}: Exit Code {{.ExitCode}}'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">join_command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    $ {{.JoinCommand}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    ```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">hidden_combined_output</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    &lt;details&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;pre</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">&lt;code</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">.CombinedOutput</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&lt;/code</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">&lt;/pre</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/details</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">exec_default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {{template "header" .}}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">template "exit_code" .</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">template "join_command" .</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">template "hidden_combined_output" .</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">exec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">plan</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      Stderr contains "cannot parse plan result"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      {{template "exec_default" .}}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>tfnotify apply</code> ã®å ´åˆã¯ <code>cannot parse apply result</code> ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºåŠ›ã™ã‚‹ã®ã§
æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply -auto-approve | github-comment exec -k apply -- tfnotify apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">exec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apply</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      Stderr contains "cannot parse apply result"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      {{template "exec_default" .}}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tfnotify-ã®ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª">tfnotify ã®ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª<a href="#tfnotify-ã®ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª" class="hash-link" aria-label="Direct link to tfnotify ã®ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª" title="Direct link to tfnotify ã®ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª">â€‹</a></h2><ul><li><a href="https://github.com/mercari/tfnotify/blob/v0.7.0/terraform/parser.go#L158" target="_blank" rel="noopener noreferrer">https://github.com/mercari/tfnotify/blob/v0.7.0/terraform/parser.go#L158</a></li><li><a href="https://github.com/mercari/tfnotify/blob/v0.7.0/terraform/parser.go#L111" target="_blank" rel="noopener noreferrer">https://github.com/mercari/tfnotify/blob/v0.7.0/terraform/parser.go#L111</a></li><li><a href="https://github.com/mercari/tfnotify/blob/v0.7.0/notifier/github/notify.go#L20-L21" target="_blank" rel="noopener noreferrer">https://github.com/mercari/tfnotify/blob/v0.7.0/notifier/github/notify.go#L20-L21</a></li><li><a href="https://github.com/mercari/tfnotify/blob/v0.7.0/main.go#L193" target="_blank" rel="noopener noreferrer">https://github.com/mercari/tfnotify/blob/v0.7.0/main.go#L193</a></li></ul>]]></content:encoded>
            <category>terraform</category>
            <category>tfnotify</category>
            <category>github-comment</category>
        </item>
        <item>
            <title><![CDATA[AWS CodeBuild è‰¯ã•ãã†]]></title>
            <link>https://techblog.szksh.cloud/codebuild-1</link>
            <guid>https://techblog.szksh.cloud/codebuild-1</guid>
            <pubDate>Sun, 02 Aug 2020 04:21:37 GMT</pubDate>
            <description><![CDATA[AWS CodeBuild ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹ã‚“ã§ã™ãŒã€çµæ§‹è‰¯ã„ã§ã™ã­ã€‚]]></description>
            <content:encoded><![CDATA[<p>AWS CodeBuild ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹ã‚“ã§ã™ãŒã€çµæ§‹è‰¯ã„ã§ã™ã­ã€‚
ç¾çŠ¶ Jenkins ã‚„ CircleCI ã§å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚¸ãƒ§ãƒ–ã‚„ CI/CD ã‚’ä¸€éƒ¨ç§»è¡Œã—ãŸã„ãªã¨æ€ã„ã¾ã—ãŸã€‚</p><p>ä¸€éƒ¨ã¨è¨€ã£ã¦ã„ã‚‹ã®ã¯ã€å˜ç´”ã«å…¨éƒ¨ã„ããªã‚Šç§»è¡Œã™ã‚‹ã®ã¯é›£ã—ã„ã‹ã‚‰å…±å­˜ã™ã‚‹å‰æã§è€ƒãˆã‚‹ãã‚‰ã„ã®æ„å‘³ã§ã™ã€‚</p><p>ãªãŠã€ã“ã‚Œã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã¯ã¾ã è»½ãæ¤œè¨¼ã—ã¦ã„ã‚‹ã ã‘ãªã®ã§ã€CodeBuild ã®ç†è§£ã¯æµ…ã„ã§ã™ã€‚</p><p>ç‰¹å¾´ã¨ã—ã¦ã¯</p><ul><li>Managed</li><li>AWS ä»¥å¤–ã®ã‚µãƒ¼ãƒ“ã‚¹ã« AWS ã® credential ã‚’ç™»éŒ²ã—ãªãã¦è‰¯ã„<ul><li>Secret ã‚’ AWS Secrets Manager ã§ç®¡ç†ã§ãã‚‹</li><li>Secret ã‚’è‡³ã‚‹ã¨ã“ã‚ã«è¨­å®šã™ã‚‹ã®ã§ã¯ãªãã€ AWS Secrets Manager ã‹ä½•ã‹ã§ä¸€å…ƒç®¡ç†ã™ã‚‹ã®ãŒç†æƒ³</li><li>Role ä½œã£ã¦ Build Project ã® Service Role ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã ã‘ãªã‚‰ credential ã‚’æ‰±ã†å¿…è¦ãŒãªãã¦æ¥½ã§å®‰å¿ƒ</li></ul></li><li>VPC å†…ã§å®Ÿè¡Œã§ãã‚‹</li><li>GitHub é€£æºã‚‚ç°¡å˜<ul><li>Webhook ã®è¨­å®šã§ PR ã®ç´°ã‹ãªã‚¤ãƒ™ãƒ³ãƒˆ(merge ã¨ã‹ reopen ã¨ã‹)ã«å¯¾å¿œã—ã¦ã„ã‚‹ã®ã‚‚è‰¯ã„</li><li>PR ã‚’ merge ã—ãŸã¨ãã‚‚ PR ã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã£ã¦ Webhook ã‚’ãƒ•ã‚£ãƒ«ã‚¿ã§ãã‚‹ã®ãŒè‰¯ã„</li></ul></li><li>å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã£ã¦å®Ÿè¡Œã™ã‚‹Build Project ã‚’å¤‰æ›´ã™ã‚‹ã‚ˆã†ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿç¾ã§ãã‚‹(monorepo ã§ç‰¹ã«æœ‰åŠ¹)</li></ul><p>ã¨ã„ã£ãŸç‚¹ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¤‰æ›´æ¤œçŸ¥ã«ã¤ã„ã¦">å¤‰æ›´æ¤œçŸ¥ã«ã¤ã„ã¦<a href="#å¤‰æ›´æ¤œçŸ¥ã«ã¤ã„ã¦" class="hash-link" aria-label="Direct link to å¤‰æ›´æ¤œçŸ¥ã«ã¤ã„ã¦" title="Direct link to å¤‰æ›´æ¤œçŸ¥ã«ã¤ã„ã¦">â€‹</a></h2><p>ä¸Šè¨˜ã®ç‰¹å¾´ã«ã¤ã„ã¦ã¯ã ã„ãŸã„ã€Œã¾ããã†ã ã­ã€ã¨ã„ã†ãµã†ã«æ€ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ãŒã€å¤‰æ›´æ¤œçŸ¥ã®éƒ¨åˆ†ã«ã¤ã„ã¦è£œè¶³ã—ã¾ã™ã€‚
monorepo ã‚’ã‚„ã£ã¦ã„ã‚‹ã¨ã‚µãƒ¼ãƒ“ã‚¹ A é–¢é€£ã®ã‚¸ãƒ§ãƒ–ã¯ã‚µãƒ¼ãƒ“ã‚¹ A é–¢é€£ã®ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã®ã¿å®Ÿè¡Œã—ãŸã„ã¨ã„ã†ã®ãŒã‚ã‚Šã¾ã™ã€‚
ãªã®ã§ã™ãŒã€ CircleCI ã ã¨è‡ªåˆ†ã®çŸ¥ã‚‹é™ã‚Šãã‚Œã¯ã§ãã¾ã›ã‚“ã€‚</p><p><a href="https://circleci.com/docs/2.0/configuration-reference/" target="_blank" rel="noopener noreferrer">https://circleci.com/docs/2.0/configuration-reference/</a></p><p>ãªã®ã§ç¾çŠ¶ Job ã‚’å®Ÿè¡Œã—ã¦ã‹ã‚‰ã‚µãƒ¼ãƒ“ã‚¹ A é–¢é€£ã®ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€å¤‰æ›´ã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚‰ skip ãªã„ã—
<code>circleci step halt</code> ã§ Job ã‚’çµ‚äº†ã—ã¦ã„ã¾ã™ã€‚
ãŸã ã€å·®åˆ†æ¤œçŸ¥ã®éƒ¨åˆ†ã‚’è‡ªåˆ†ã§å®Ÿè£…ã—ãªã„ã¨ã„ã‘ãªã„ã—ã€ <code>circleci step halt</code> ã§çµ‚äº†ã™ã‚‹ã«ã—ã¦ã‚‚ Job ã®èµ·å‹•è‡ªä½“ã«ãã“ãã“æ™‚é–“ãŒã‹ã‹ã£ãŸã‚Šã™ã‚‹ã—(ã“ã‚Œã ã‘ã§ã‚‚é‡‘éŠ­çš„ã‚³ã‚¹ãƒˆãŒã‹ã‹ã£ã¦ã„ã‚‹ã¯ãš)ã€ Job ã®å®Ÿè¡Œæ™‚é–“ã‚„ error rate ã®ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã§ã‚‚ãƒã‚¤ã‚ºã¨ã—ã¦æ··ã˜ã£ã¦ãã¦ã—ã¾ã„ã¾ã™ã€‚</p><p>CodeBuild ã®å ´åˆã€1ã¤ã®ãƒªãƒã‚¸ãƒˆãƒªã«è¤‡æ•°ã® Build Project ã‚’è¨­å®šã§ãã€ Build Project ã”ã¨ã« buildspec ã‚’æŒ‡å®šã§ãã¾ã™ã€‚
Build Project ã® Webhook ã® <code>FILE_PATH</code> ã®è¨­å®šã§ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã®ã¿ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
ãªã®ã§ã‚µãƒ¼ãƒ“ã‚¹ A ç”¨ã® build spec åŠã³ Build Project ã‚’ä½œæˆã—ã€ã‚µãƒ¼ãƒ“ã‚¹ A ã®ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã®ã¿ãã® Build Project ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã« Webhook ã‚’è¨­å®šã™ã‚Œã°è‰¯ã•ãã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ°—ã«ãªã‚‹ç‚¹">æ°—ã«ãªã‚‹ç‚¹<a href="#æ°—ã«ãªã‚‹ç‚¹" class="hash-link" aria-label="Direct link to æ°—ã«ãªã‚‹ç‚¹" title="Direct link to æ°—ã«ãªã‚‹ç‚¹">â€‹</a></h2><ul><li><code>FILE_PATH</code> ã§ 1 å€‹ã®æ­£è¦è¡¨ç¾ã—ã‹è¨­å®šã§ããªã„ã®ã§ã€å ´åˆã«ã‚ˆã£ã¦ã¯è¤‡é›‘ãªæ­£è¦è¡¨ç¾ã‚’æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„</li><li>Terraform ã§ç®¡ç†ã™ã‚‹ã®ãŒçµæ§‹é¢å€’ãã•ã„<ul><li>ã„ã„æ„Ÿã˜ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã¨ã‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–ã—ãªã„ã¨ã ã‚ã‹ã‚‚</li></ul></li><li>Pull Request ã®ãƒ©ãƒ™ãƒ«ãŒã¤ã„ã¦ã„ãŸã‚‰ã“ã®ã‚¸ãƒ§ãƒ–ã‚’å®Ÿè¡Œã™ã‚‹ã€ã¿ãŸã„ãªè¤‡é›‘ãªã“ã¨ã¯ä¸€å·¥å¤«å¿…è¦ã‹ã‚‚<ul><li>Webhook ã®è¨­å®šã ã¨ç„¡ç†ãªã®ã§ã€ build ã¯å®Ÿè¡Œã—ã¤ã¤ãƒ©ãƒ™ãƒ«ãŒè¨­å®šã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚‰ skip ã¨ã‹ã—ãªã„ã¨ã„ã‘ãªã„</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãŠã¾ã‘-codebuild-é–¢é€£ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹">ãŠã¾ã‘: CodeBuild é–¢é€£ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹<a href="#ãŠã¾ã‘-codebuild-é–¢é€£ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹" class="hash-link" aria-label="Direct link to ãŠã¾ã‘: CodeBuild é–¢é€£ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹" title="Direct link to ãŠã¾ã‘: CodeBuild é–¢é€£ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹">â€‹</a></h2><p>ä»¥å‰æ¤œè¨¼ã—ãŸã¨ãã‚ˆã‚Šè‰¯ããªã£ã¦ã‚‹æ°—ãŒã™ã‚‹ãªã¨æ€ã£ã¦æ›´æ–°ã‚’ãƒã‚§ãƒƒã‚¯ã—ãŸã‚‰ã‚„ã£ã±è‰²ã€…æ›´æ–°ãŒã‚ã‚‹ã¿ãŸã„ã§ã™ã­ã€‚</p><p><a href="https://aws.amazon.com/jp/new/?whats-new-content-all.sort-by=item.additionalFields.postDateTime&amp;whats-new-content-all.sort-order=desc&amp;awsf.whats-new-developer-tools=general-products%23aws-codebuild" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/jp/new/?whats-new-content-all.sort-by=item.additionalFields.postDateTime&amp;whats-new-content-all.sort-order=desc&amp;awsf.whats-new-developer-tools=general-products%23aws-codebuild</a></p>]]></content:encoded>
            <category>aws</category>
            <category>codebuild</category>
            <category>ci</category>
        </item>
        <item>
            <title><![CDATA[github-comment - GitHub ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã™ã‚‹ CLI]]></title>
            <link>https://techblog.szksh.cloud/github-comment</link>
            <guid>https://techblog.szksh.cloud/github-comment</guid>
            <pubDate>Fri, 31 Jul 2020 11:42:54 GMT</pubDate>
            <description><![CDATA[GitHub ã® issue ã‚„ pull request, commit ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã™ã‚‹ CLI ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸ(çµæ§‹å‰ã®è©±ã§ã™ãŒ)ã€‚]]></description>
            <content:encoded><![CDATA[<p>GitHub ã® issue ã‚„ pull request, commit ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã™ã‚‹ CLI ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸ(çµæ§‹å‰ã®è©±ã§ã™ãŒ)ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/github-comment" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/github-comment</a></p><p>ã“ã®ãƒ–ãƒ­ã‚°ã®åŸ·ç­†æ™‚ç‚¹ã§æœ€æ–°ã¯ v1.5.0 ã§ã™ã€‚</p><p>Go è£½ãªã®ã§ã€ GitHub Releases ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã‚Œã°ç°¡å˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚</p><p>æƒ³å®šã—ã¦ã„ã‚‹ä¸»ãªç”¨é€”ã¯ã€ CI/CD ã® çµæœã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§é€šçŸ¥ã™ã‚‹ã“ã¨ã§ DX ã‚’å‘ä¸Šã™ã‚‹ã“ã¨ã§ã™ã€‚
ä¾‹ãˆã° CI ãŒã“ã‘ãŸã‚‰ã“ã‘ãŸã‚³ãƒãƒ³ãƒ‰ã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€šçŸ¥ã™ã‚‹ãªã©ã§ã™ã€‚</p><p>github-comment ã«ã¯</p><ul><li>init: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®é››å½¢ã‚’ç”Ÿæˆã™ã‚‹</li><li>post: ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã™ã‚‹</li><li>exec: å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ãã®çµæœã‚’å…ƒã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã™ã‚‹</li></ul><p>ã¨ã„ã† 3 ã¤ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã‚³ãƒ¡ãƒ³ãƒˆã®æŠ•ç¨¿ã«ã¯ GitHub ã® Access Token ãŒå¿…è¦ã§ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•° <code>-token</code> ã§ã‚‚æ¸¡ã›ã¾ã™ãŒã€ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ export GITHUB_TOKEN=xxx # GITHUB_ACCESS_TOKEN ã‚‚å¯</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="post-ã‚³ãƒãƒ³ãƒ‰">post ã‚³ãƒãƒ³ãƒ‰<a href="#post-ã‚³ãƒãƒ³ãƒ‰" class="hash-link" aria-label="Direct link to post ã‚³ãƒãƒ³ãƒ‰" title="Direct link to post ã‚³ãƒãƒ³ãƒ‰">â€‹</a></h2><p>ã“ã‚“ãªæ„Ÿã˜ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã§ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ github-comment post -org suzuki-shunsuke -repo github-comment -pr 1 -template test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ•°ãŒå¤šã„ã§ã™ãŒã€ã„ãã¤ã‹ã® Platform ã§ã¯ç’°å¢ƒå¤‰æ•°ã‹ã‚‰è‡ªå‹•ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è£œå®Œã—ã¦ãã‚Œã¾ã™ã€‚</p><ul><li>Drone</li><li>CircleCI</li><li>GitHub Actions</li></ul><p>ãã†ã™ã‚‹ã¨ã“ã‚Œã§ã‚ˆããªã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ github-comment post -template test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚³ãƒ¡ãƒ³ãƒˆã¯ Go ã® <a href="https://golang.org/pkg/text/template/" target="_blank" rel="noopener noreferrer">text/template</a> ã§å‡¦ç†ã•ã‚Œã¾ã™ã€‚
<code>{{.Org}}</code> <code>{{.Repo}}</code> ã¨ã„ã£ãŸæ„Ÿã˜ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã§ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ github-comment post -template "{{.Org}}/{{.Repo}} test"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>PRNumber</li><li>Org</li><li>Repo</li><li>SHA1</li><li>TemplateKey</li><li>Vars</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="exec-ã‚³ãƒãƒ³ãƒ‰">exec ã‚³ãƒãƒ³ãƒ‰<a href="#exec-ã‚³ãƒãƒ³ãƒ‰" class="hash-link" aria-label="Direct link to exec ã‚³ãƒãƒ³ãƒ‰" title="Direct link to exec ã‚³ãƒãƒ³ãƒ‰">â€‹</a></h2><p>ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœ(æ¨™æº–å‡ºåŠ›ã€æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã€ exit code) ã‚’å…ƒã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã—ãŸã„å ´åˆã«ã€ exec ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ github-comment exec -template "{{.ExitCode}} {{.Stdout}}" -- echo hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸä¸Šã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã—ã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ•°ã¨ã—ã¦ã€ post ã§ã‚‚æ¸¡ã•ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä»–ã«ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡ŒçµæœãŒæ¸¡ã•ã‚Œã¾ã™ã€‚</p><ul><li>ExitCode</li><li>Stdout</li><li>Stderr</li><li>CombinedOutput</li><li>Command: <a href="https://golang.org/pkg/os/exec/#Cmd.String" target="_blank" rel="noopener noreferrer">exec.Command.String</a></li><li>JoinCommand: ã‚³ãƒãƒ³ãƒ‰å¼•æ•°(é…åˆ—)ã‚’ã‚¹ãƒšãƒ¼ã‚¹ <code>" "</code> ã§ã¤ãªã„ã æ–‡å­—åˆ—</li></ul><p>github-comment exec ã®æ¨™æº–å…¥åŠ›ã¯å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã«æ¸¡ã•ã‚Œã¾ã™ã—ã€ github-comment exec ã® exit code ã¯å®Ÿè¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰ã® exit code ã«ãªã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«">è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«<a href="#è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«" class="hash-link" aria-label="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«" title="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«">â€‹</a></h2><p>ä¸Šè¨˜ã®ä¾‹ã§ã¯æŠ•ç¨¿ã™ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã‚’ <code>-template</code> ã§æ¸¡ã—ã¦ã„ã¾ã—ãŸãŒã€ã”ãçŸ­ã„ã‚³ãƒ¡ãƒ³ãƒˆä»¥å¤–ã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã—ãŸã»ã†ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ <code>github-comment init</code> ã§é››å½¢ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ github-comment init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚“ãªæ„Ÿã˜ã§è¤‡æ•°ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¨˜è¿°ã§ãã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">post</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    foo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">hello</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    hello</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãã—ã¦ <code>post</code> å®Ÿè¡Œæ™‚ã« <code>-template-key (-k)</code> ã§ä½¿ç”¨ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æŒ‡å®šã—ã¾ã™ã€‚
<code>-template</code> ã¨ <code>-k</code> ä¸¡æ–¹æŒ‡å®šã—ãªã„å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ <code>default</code> ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ github-comment -k hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="exec-ã®è¨­å®š">exec ã®è¨­å®š<a href="#exec-ã®è¨­å®š" class="hash-link" aria-label="Direct link to exec ã®è¨­å®š" title="Direct link to exec ã®è¨­å®š">â€‹</a></h3><p><code>exec</code> ã®è¨­å®šã¯ã‚‚ã†å°‘ã—è¤‡é›‘ã§ã™ã€‚
ãã‚Œã¯ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã«ã‚ˆã£ã¦ä½¿ç”¨ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å¤‰ãˆãŸã‚Šã€ã‚ã‚‹ã„ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã—ãªã‹ã£ãŸã‚Šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã™ã€‚
ä¸€ã¤ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚­ãƒ¼ã«å¯¾ã—ã€è¤‡æ•°ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é…åˆ—ã§è¨­å®šã—ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">exec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ExitCode == 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        success</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ExitCode </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        failed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—ã¨ã¯åˆ¥ã« <code>when</code> ã¨ã„ã†ã€ãã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã†æ¡ä»¶ã‚’è¨­å®šã—ã¾ã™ã€‚
ã“ã®æ¡ä»¶ã¯ <a href="https://github.com/antonmedv/expr" target="_blank" rel="noopener noreferrer">antonmedv/expr</a> ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã¾ã™ã€‚
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã® text/template ã¨ã¯ã¾ãŸåˆ¥ã®æ§‹æ–‡ãªã®ãŒã‚„ã‚„ã“ã—ã„ã§ã™ã­ã€‚
æ¡ä»¶ã®è©•ä¾¡çµæœã¯å½“ç„¶çœŸå½å€¤ã§ã¯ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚
è©•ä¾¡çµæœãŒ true ãªã‚‰ã°ãã‚Œã‚’ä½¿ã£ã¦ã‚³ãƒ¡ãƒ³ãƒˆã—ã€ã‚ã¨ã¯ç„¡è¦–ã•ã‚Œã¾ã™ã€‚
false ãªã‚‰æ¬¡ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è©•ä¾¡ã—ã¾ã™ã€‚
å…¨éƒ¨ãƒãƒƒãƒã—ãªã‘ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆã¯æŠ•ç¨¿ã•ã‚Œã¾ã›ã‚“ã—ã€ã‚¨ãƒ©ãƒ¼ã«ã‚‚ãªã‚Šã¾ã›ã‚“ã€‚
<code>dont_comment: true</code> ã¨ã™ã‚‹ã¨ã€ãã®æ¡ä»¶ã«ãƒãƒƒãƒã—ãŸå ´åˆã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã›ãšã«çµ‚äº†ã—ã¾ã™(å¾Œç¶šã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚‚ç„¡è¦–ã•ã‚Œã¾ã™)ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">exec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">hello</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ExitCode </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dont_comment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        Hello, world</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å†åˆ©ç”¨">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å†åˆ©ç”¨<a href="#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å†åˆ©ç”¨" class="hash-link" aria-label="Direct link to ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å†åˆ©ç”¨" title="Direct link to ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å†åˆ©ç”¨">â€‹</a></h3><p><code>templates</code> ã‚’ä½¿ã†ã¨è¤‡æ•°ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ãƒ˜ãƒƒãƒ€ãƒ¼ãªã©ã‚’å…±é€šåŒ–ã—ã¦å†åˆ©ç”¨ã§ãã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">templates</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">header</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"# {{.Org}}/{{.Repo}}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">post</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {{template "header" .}}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Go ã® <a href="https://golang.org/pkg/text/template/" target="_blank" rel="noopener noreferrer">text/template</a> ã«é¦´æŸ“ã¿ãŒãªã„ã¨ã‚ã‹ã‚Šã«ãã„ã‹ã¨æ€ã„ã¾ã™ãŒã€</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">templates</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å®šç¾©ã—ã¦</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{{template "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå" .}}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å‚ç…§ã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ•°ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§æ¸¡ã™">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ•°ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§æ¸¡ã™<a href="#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ•°ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§æ¸¡ã™" class="hash-link" aria-label="Direct link to ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ•°ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§æ¸¡ã™" title="Direct link to ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ•°ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§æ¸¡ã™">â€‹</a></h2><p><code>-var å¤‰æ•°å:å€¤</code> ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã›ã¾ã™ã€‚
<code>{{.Var.å¤‰æ•°å}}</code> ã§å‚ç…§ã§ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ github-comment post -var name:foo -template "Hello, {{.Var.name}}"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹">è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹<a href="#è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹" class="hash-link" aria-label="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹" title="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹">â€‹</a></h2><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å¤‰æ•°ã‚’å®šç¾©ã§ãã¾ã™ã€‚ä»»æ„ã®å‹ã®å¤‰æ•°ã‚’å®šç¾©ã§ãã¾ã™ã€‚
<code>{{.Var}}.å¤‰æ•°å</code> ã§å‚ç…§ã§ãã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">vars</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">zoo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>{{.Var.zoo.foo}}</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="post-ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–å…¥åŠ›ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ¸¡ã™">post ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–å…¥åŠ›ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ¸¡ã™<a href="#post-ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–å…¥åŠ›ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ¸¡ã™" class="hash-link" aria-label="Direct link to post ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–å…¥åŠ›ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ¸¡ã™" title="Direct link to post ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–å…¥åŠ›ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ¸¡ã™">â€‹</a></h2><p><code>github-comment post</code> ã®æ¨™æº–å…¥åŠ›ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ¸¡ã›ã¾ã™ã€‚ exec ã®å ´åˆã¯ãã†ã¯ãªã‚‰ãªã„(å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã«æ¸¡ã•ã‚Œã‚‹)ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo foo | github-comment post</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è£œå®Œ">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è£œå®Œ<a href="#ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è£œå®Œ" class="hash-link" aria-label="Direct link to ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è£œå®Œ" title="Direct link to ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è£œå®Œ">â€‹</a></h2><p>å…ˆã«è¿°ã¹ãŸã¨ãŠã‚Šã€ã„ãã¤ã‹ã® Platform ã§ã¯ç’°å¢ƒå¤‰æ•°ã‹ã‚‰è‡ªå‹•ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è£œå®Œã—ã¦ãã‚Œã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="circleci">CircleCI<a href="#circleci" class="hash-link" aria-label="Direct link to CircleCI" title="Direct link to CircleCI">â€‹</a></h3><p>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®åˆ¤åˆ¥: <code>CIRCLECI</code> ã®æœ‰ç„¡</p><table><thead><tr><th>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</th><th>ã‚½ãƒ¼ã‚¹</th></tr></thead><tbody><tr><td>.Org</td><td>CIRCLE_PROJECT_USERNAME</td></tr><tr><td>.Repo</td><td>CIRCLE_PROJECT_REPONAME</td></tr><tr><td>.PRNumber</td><td>CIRCLE_PULL_REQUEST</td></tr><tr><td>.SHA1</td><td>CIRCLE_SHA1</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="drone">Drone<a href="#drone" class="hash-link" aria-label="Direct link to Drone" title="Direct link to Drone">â€‹</a></h3><p>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®åˆ¤åˆ¥: <code>DRONE</code> ã®æœ‰ç„¡</p><table><thead><tr><th>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</th><th>ã‚½ãƒ¼ã‚¹</th></tr></thead><tbody><tr><td>.Org</td><td>DRONE_REPO_OWNER</td></tr><tr><td>.Repo</td><td>DRONE_REPO_NAME</td></tr><tr><td>.PRNumber</td><td>DRONE_PULL_REQUEST</td></tr><tr><td>.SHA1</td><td>DRONE_COMMIT_SHA1</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-actions">GitHub Actions<a href="#github-actions" class="hash-link" aria-label="Direct link to GitHub Actions" title="Direct link to GitHub Actions">â€‹</a></h3><p>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®åˆ¤åˆ¥: <code>GITHUB_ACTIONS</code> ã®æœ‰ç„¡</p><table><thead><tr><th>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</th><th>ã‚½ãƒ¼ã‚¹</th></tr></thead><tbody><tr><td>.Org</td><td>GITHUB_REPOSITORY</td></tr><tr><td>.Repo</td><td>GITHUB_REPOSITORY</td></tr><tr><td>.PRNumber</td><td>GITHUB_EVENT_PATH</td></tr><tr><td>.SHA1</td><td>GITHUB_SHA1</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="exec-ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®-command-ã¨-joincommand">exec ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã® Command ã¨ JoinCommand<a href="#exec-ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®-command-ã¨-joincommand" class="hash-link" aria-label="Direct link to exec ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã® Command ã¨ JoinCommand" title="Direct link to exec ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã® Command ã¨ JoinCommand">â€‹</a></h2><p>å®Ÿè¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’ç¤ºã™ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ Command ã¨ JoinCommand ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚‰ã¯ä¼¼ã¦ã¾ã™ãŒã€å¾®å¦™ã«é•ã„ã¾ã™ã€‚</p><p>Command ã¯ <a href="https://golang.org/pkg/os/exec/#Cmd.String" target="_blank" rel="noopener noreferrer">exec.Cmd ã® .String()</a> ã‹ã‚‰å–å¾—ã•ã‚Œã‚‹ã®ã§ã™ãŒã€ã‚³ãƒãƒ³ãƒ‰ãŒçµ¶å¯¾ãƒ‘ã‚¹ã«ãªã£ãŸã‚Šã™ã‚‹ã®ã§ã€ã‚ã¾ã‚Šæœ›ã¾ã—ããªã„ã“ã¨ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ä¾‹ãˆã° <code>echo hello</code> ã®å ´åˆ <code>/usr/local/opt/coreutils/libexec/gnubin/echo foo</code> ã¨ãªã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ä¸€æ–¹ JoinCommand ã¯ã‚³ãƒãƒ³ãƒ‰æ–‡å­—åˆ—ã‚’å˜ã«ã‚¹ãƒšãƒ¼ã‚¹ã§ã¤ãªã„ã ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚</p><p>exec.Cmd ã® .String() ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Šã€ .Command ã¨ .JoinCommand ã¯ãã®ã¾ã¾ shell ã§å®Ÿè¡Œã™ã‚‹ã®ã«ã¯é©ã•ãªã„å½¢å¼ãªã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><blockquote><p>String returns a human-readable description of c.
It is intended only for debugging.
In particular, it is not suitable for use as input to a shell.
The output of String may vary across Go releases.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹">è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹<a href="#è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹" class="hash-link" aria-label="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹" title="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹">â€‹</a></h2><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¯ <code>--config -c</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã§ãã¾ã™ã€‚
ä½•ã‚‚æŒ‡å®šã—ãªã„å ´åˆã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å‘ã‹ã£ã¦ <code>.github-comment.yml</code>, <code>.github-comment.yaml</code> ã‚’æ¢ç´¢ã—ã€æœ€åˆã«è¦‹ã¤ã‹ã£ãŸã‚‚ã®ã‚’ä½¿ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§-org-repo-ã‚’æŒ‡å®šã™ã‚‹">è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ .Org, .Repo ã‚’æŒ‡å®šã™ã‚‹<a href="#è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§-org-repo-ã‚’æŒ‡å®šã™ã‚‹" class="hash-link" aria-label="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ .Org, .Repo ã‚’æŒ‡å®šã™ã‚‹" title="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ .Org, .Repo ã‚’æŒ‡å®šã™ã‚‹">â€‹</a></h2><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚³ãƒ¡ãƒ³ãƒˆå…ˆã®ãƒªãƒã‚¸ãƒˆãƒªã‚’æŒ‡å®šã§ãã¾ã™ã€‚
Platform ã§è£œå®Œã•ã‚Œã‚‹å ´åˆã‚„ã€æ˜ç¤ºçš„ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æŒ‡å®šã™ã‚‹å ´åˆã¯ä¸è¦ã§ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">base</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">org</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> suzuki</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">shunsuke</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">comment</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[clap - ç°¡å˜ã«ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸ]]></title>
            <link>https://techblog.szksh.cloud/clap</link>
            <guid>https://techblog.szksh.cloud/clap</guid>
            <pubDate>Mon, 06 Jul 2020 07:52:58 GMT</pubDate>
            <description><![CDATA[å¤šåˆ†è»Šè¼ªã®å†ç™ºæ˜ã ã¨ã¯æ€ã„ã¾ã™ãŒã€ç°¡å˜ã«ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã® CLI ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>å¤šåˆ†è»Šè¼ªã®å†ç™ºæ˜ã ã¨ã¯æ€ã„ã¾ã™ãŒã€ç°¡å˜ã«ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã® CLI ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚
tarball ã‚„ zip ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å±•é–‹ã—ã¦æŒ‡å®šã—ãŸãƒ‘ã‚¹ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/clap" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/clap</a></p><p>Go ã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚
ãƒ„ãƒ¼ãƒ«ã®åå‰(clap)ã«ã¯ç‰¹åˆ¥ãªæ„å‘³ã‚„ç†ç”±ã¯ãªãã€ãªã‚“ã¨ãªãã§ã™ã€‚</p><p>CI ã§ä½•ã‹ã—ã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã¾ã¾ã‚ã£ã¦ã€ãã®ãŸã‚ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’éƒ½åº¦æ›¸ãã®ãŒå‰²ã¨é¢å€’ãªã®ã§ãƒ„ãƒ¼ãƒ«åŒ–ã—ã¾ã—ãŸã€‚</p><p>ã“ã®ãƒ–ãƒ­ã‚°ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ v0.1.0-1 ã§ã€æœ€ä½é™ã®æ©Ÿèƒ½ã—ã‹ã‚ã‚Šã¾ã›ã‚“ãŒã€9å‰²å‹ãƒ‹ãƒ¼ã‚ºã‚’æº€ãŸã›ã‚‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ clap &lt;URL&gt; &lt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å†…ã§ã®ç›¸å¯¾ãƒ‘ã‚¹&gt;:&lt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆ&gt; [&lt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å†…ã§ã®ç›¸å¯¾ãƒ‘ã‚¹&gt;:&lt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆ&gt;...]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¾‹ãˆã° <a href="https://github.com/open-policy-agent/conftest" target="_blank" rel="noopener noreferrer">conftest</a> ã‚’ /usr/local/bin ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆæ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CONFTEST_VERSION=0.18.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clap install https://github.com/instrumenta/conftest/releases/download/v${CONFTEST_VERSION}/conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz conftest:/usr/local/bin/conftest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod a+x /usr/local/bin/conftest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®ä»˜ä¸ã¯ã‚„ã£ã¦ãã‚Œãªã„ã®ã§å¿…è¦ã«å¿œã˜ã¦ã‚„ã£ã¦ãã ã•ã„ã€‚
ãƒ•ã‚¡ã‚¤ãƒ«ã®åœ§ç¸®å½¢å¼ã¯ URL ã‹ã‚‰è‡ªå‹•ã§åˆ¤åˆ¥ã—ã¦ãã‚Œã¾ã™ã€‚</p><p>ä¸Šè¨˜ã® conftest ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ä»Šã¾ã§ã¯æ¬¡ã®ã‚ˆã†ãªã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦ã„ã¾ã—ãŸã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set -eu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONFTEST_VERSION=0.18.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dirpath=$(mktemp -d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pushd "$dirpath"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TARFILE=conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -OL https://github.com/instrumenta/conftest/releases/download/v${CONFTEST_VERSION}/${TARFILE}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar xvzf $TARFILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv conftest /usr/local/bin/conftest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod a+x /usr/local/bin/conftest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">popd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -R "$dirpath"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ°å‘³ã«é¢å€’ã§ã™ã­ã€‚ã“ã‚Œã‚’ãƒ„ãƒ¼ãƒ«æ¯ã«æ›¸ã„ã¦ã€ã—ã‹ã‚‚åœ§ç¸®å½¢å¼ã«ã‚ˆã£ã¦å¾®å¦™ã«å¤‰ãˆãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚</p><p>clap è‡ªä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ã©ã†ã™ã‚‹ã‹ã¨ã„ã†ã¨ã€ <a href="https://github.com/suzuki-shunsuke/clap/releases" target="_blank" rel="noopener noreferrer">GitHub Releases ã§ tarball ã®ä»–ã«ãƒã‚¤ãƒŠãƒªå˜ä½“ã§ã‚‚é…å¸ƒ</a>ã—ã¦ã„ã‚‹ã®ã§ç°¡å˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CLAP_VERSION=0.1.0-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -L -o /usr/local/bin/clap https://github.com/suzuki-shunsuke/clap/releases/download/v${CLAP_VERSION}/clap_${CLAP_VERSION}_linux_amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod a+x /usr/local/bin/clap</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸Šã€ç°¡å˜ãªç´¹ä»‹ã§ã—ãŸã€‚</p>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[CircleCI ã® run ã®å®Ÿè¡Œæ™‚é–“ã‚’ DataDog ã«é€ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/send-circleci-run-execution-time-to-datadog</link>
            <guid>https://techblog.szksh.cloud/send-circleci-run-execution-time-to-datadog</guid>
            <pubDate>Sat, 23 May 2020 05:20:53 GMT</pubDate>
            <description><![CDATA[å°ãƒã‚¿ã§ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>å°ãƒã‚¿ã§ã™ã€‚</p><p><a href="https://techblog.szksh.cloud/dd-time/" target="_blank" rel="noopener noreferrer">dd-time</a> ã‚’ä½¿ã£ã¦ CircleCI ã® <code>run</code> ã‚’ä½¿ã£ãŸã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚é–“ã‚’ã©ã†è¨ˆæ¸¬ã—ãŸã‚‰ã„ã„ã®ã‹ã¡ã‚‡ã£ã¨è€ƒãˆã¾ã—ãŸã€‚</p><p>ä»¥å‰ã€ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚é–“ã‚’ DataDog ã«é€ã‚‹ãƒ„ãƒ¼ãƒ« dd-time ã‚’ä½œã‚Šã¾ã—ãŸã€‚</p><ul><li><a href="https://techblog.szksh.cloud/dd-time/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/dd-time/</a></li><li><a href="https://github.com/suzuki-shunsuke/dd-time" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/dd-time</a></li></ul><p>ã“ã‚Œã¯åŸºæœ¬çš„ã«ä»¥ä¸‹ã®ã‚ˆã†ã«å¼•æ•°ã¨ã—ã¦ <code>--</code> ä»¥é™ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dd-time -m dd_time.execution_time -t command:docker-build -- docker build .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®Ÿè¡Œã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ¨™æº–å…¥åŠ›ã§æ¸¡ã—ãŸã„å ´åˆã¯ã“ã†ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl https://example.com/install.sh | dd-time -m dd_time.execution_time -- sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚‚ã¡ã‚ã‚“ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚ã‚‹å¿…è¦ã¯ãªãã¦ä¾‹ãˆã° Python ã ã£ãŸã‚‰ã“ã†ãªã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl https://example.com/setup.py | dd-time -m dd_time.execution_time -- python</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>CircleCI ã® <code>run</code> ã§ã¯ <code>shell</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ shell ã‚’æŒ‡å®šã§ãã¾ã™ã€‚</p><p><a href="https://circleci.com/docs/2.0/configuration-reference/#run" target="_blank" rel="noopener noreferrer">https://circleci.com/docs/2.0/configuration-reference/#run</a></p><p>ãªã®ã§ command å…¨ä½“ã®æ™‚é–“ã‚’è¨ˆæ¸¬ã—ãŸã„å ´åˆã¯ã€ shell ã‚’æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test dd</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">shell</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /usr/local/bin/dd</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">time </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">m dd_time.test </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sh </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">eo pipefail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      echo start</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      sleep 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      echo end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã†ã™ã‚‹ã¨ <code>shell</code> ä»¥å¤–ã‚’å¼„ã‚‹ã“ã¨ãªãå®Ÿè¡Œæ™‚é–“ã‚’è¨ˆæ¸¬ã—ã¦ DataDog ã«é€ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><p>ã“ã® <code>shell</code> ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¯ dd-time ã«é™ã‚‰ãšä½¿ãˆã‚‹ã‹ã‚‚çŸ¥ã‚Œãªã„ã§ã™ã­ã€‚</p><ul><li>ãƒ­ã‚°ã‚’ã©ã£ã‹ã«é€ã£ãŸã‚Šã¨ã‹</li><li>ã‚³ãƒãƒ³ãƒ‰ãŒå¤±æ•—ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã‚’æ¡ã‚Šã¤ã¶ã—ã¤ã¤ã©ã£ã‹ã«é€šçŸ¥ã—ãŸã‚Šã¨ã‹</li><li>etc</li></ul><p>ä»¥ä¸Šã€å°ãƒã‚¿ã§ã—ãŸã€‚</p>]]></content:encoded>
            <category>circleci</category>
            <category>dd-time</category>
            <category>datadog</category>
        </item>
        <item>
            <title><![CDATA[CircleCI ã® checkout ã®æ³¨æ„ç‚¹]]></title>
            <link>https://techblog.szksh.cloud/circleci-checkout-default-branch</link>
            <guid>https://techblog.szksh.cloud/circleci-checkout-default-branch</guid>
            <pubDate>Fri, 24 Apr 2020 07:53:01 GMT</pubDate>
            <description><![CDATA[CircleCI ã®çµ„ã¿è¾¼ã¿ã® command checkout ã®æ³¨æ„ç‚¹ã«ã¤ã„ã¦æ›¸ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>CircleCI ã®çµ„ã¿è¾¼ã¿ã® command <code>checkout</code> ã®æ³¨æ„ç‚¹ã«ã¤ã„ã¦æ›¸ãã¾ã™ã€‚</p><p>ãªãŠã€ã“ã“ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹å†…å®¹ã¯ 2020/04/24 æ™‚ç‚¹ã®ã‚‚ã®ã§ã‚ã‚Šã€äºˆå‘Šãªã—ã« <code>checkout</code> ã®æŒ™å‹•ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€ä»Šå›ã¯è©±ã‚’ç°¡ç•¥åŒ–ã™ã‚‹ãŸã‚ã€ <code>checkout</code> å®Ÿè¡Œæ™‚ç‚¹ã§ <code>.git</code> ãŒãªã„(ã¤ã¾ã‚Šã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ã„ãªã„)ã‚‚ã®ã¨ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€åˆã«çµè«–">æœ€åˆã«çµè«–<a href="#æœ€åˆã«çµè«–" class="hash-link" aria-label="Direct link to æœ€åˆã«çµè«–" title="Direct link to æœ€åˆã«çµè«–">â€‹</a></h2><p>å…ˆã«çµè«–ã‚’æ›¸ãã¨</p><ul><li>CircleCI ã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’å‚ç…§ã—ãªã„ã»ã†ãŒè‰¯ã„($CIRCLE_BRANCH ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã§ã‚ã‚‹å ´åˆã¯é™¤ã)<ul><li>å±¥æ­´ãŒ origin ã¨ç•°ãªã‚Šã€ $CIRCLE_BRANCH ã¨åŒæ§˜ã«ãªã£ã¦ã„ã‚‹ãŸã‚</li></ul></li><li>ä»£ã‚ã‚Šã« origin ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’å‚ç…§ã—ãŸã»ã†ãŒè‰¯ã„</li><li><code>git branch -f &lt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒ&gt; origin/&lt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒ&gt;</code> ã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã®å±¥æ­´ã‚’ä¿®æ­£ã™ã‚‹ã®ã‚‚ã‚ã‚Š</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="checkout-ãŒãªã«ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹">checkout ãŒãªã«ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹<a href="#checkout-ãŒãªã«ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹" class="hash-link" aria-label="Direct link to checkout ãŒãªã«ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹" title="Direct link to checkout ãŒãªã«ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹">â€‹</a></h2><p><code>checkout</code> ã§ãªã«ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹ã¯å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã¦ CircleCI ã® job ã®è©³ç´°ç”»é¢(?) ã‹ã‚‰ç¢ºèªã§ãã¾ã™ã€‚</p><p>ã‚µãƒ³ãƒ—ãƒ«: <a href="https://app.circleci.com/pipelines/github/suzuki-shunsuke/test-circleci/73/workflows/5611059c-d6b1-4a34-91b5-45d6f149d408/jobs/96" target="_blank" rel="noopener noreferrer">https://app.circleci.com/pipelines/github/suzuki-shunsuke/test-circleci/73/workflows/5611059c-d6b1-4a34-91b5-45d6f149d408/jobs/96</a></p><p>ã“ã“ã§ã¯ <code>checkout</code> ã®å…¨ã¦ã«ã¤ã„ã¦ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚ä¸€éƒ¨æŠœç²‹ã—ã¾ã™ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">elif [ -n "$CIRCLE_BRANCH" ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git reset --hard "$CIRCLE_SHA1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git checkout -q -B "$CIRCLE_BRANCH"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>git reset --hard</code> ãªã©ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãªãœã“ã‚“ãªã“ã¨ã‚’ã—ã¦ã„ã‚‹ã®ã‹">ãªãœã“ã‚“ãªã“ã¨ã‚’ã—ã¦ã„ã‚‹ã®ã‹ï¼Ÿ<a href="#ãªãœã“ã‚“ãªã“ã¨ã‚’ã—ã¦ã„ã‚‹ã®ã‹" class="hash-link" aria-label="Direct link to ãªãœã“ã‚“ãªã“ã¨ã‚’ã—ã¦ã„ã‚‹ã®ã‹ï¼Ÿ" title="Direct link to ãªãœã“ã‚“ãªã“ã¨ã‚’ã—ã¦ã„ã‚‹ã®ã‹ï¼Ÿ">â€‹</a></h2><p>ãªã‚“ã§ã“ã‚“ãªã“ã¨ã‚’ã—ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿå˜ã« <code>git checkout $CIRCLE_BRANCH</code> ã¨ã‹ã˜ã‚ƒã ã‚ãªã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><p>æœ¬å½“ã®ã¨ã“ã‚ã¯ CircleCI ã®ä¸­ã®äººã«èã‹ãªã„ã¨ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€è‡ªåˆ†ãªã‚Šã«è€ƒãˆã¦ã¿ã¾ã—ãŸã€‚</p><p>æ˜”å®Ÿè¡Œã—ãŸ job ã‚’ rerun ã™ã‚‹ã“ã¨ã‚’æ€ã„æµ®ã‹ã¹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
rerun ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã¯ã™ã§ã« remote branch ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã†ãªã‚Œã°å˜ã« <code>git checkout</code> ã§ã¯å¤±æ•—ã—ã¾ã™ã€‚
ã¾ãŸã€branch ãŒã‚ã£ãŸã¨ã—ã¦ã‚‚ $CIRCLE_SHA1 ãŒãã® branch ã® HEAD ã¨ã‚‚é™ã‚Šã¾ã›ã‚“ã€‚
force push ã§å±¥æ­´ãŒå¤‰æ›´ã•ã‚Œã€ $CIRCLE_SHA1 ãŒ CIRCLE_BRANCH ã®å±¥æ­´ä¸Šã«ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ãã†ã„ã£ãŸã‚±ãƒ¼ã‚¹ã‚’è€ƒæ…®ã—ã€ã“ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã£ã¦ã„ã‚‹ã®ã ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ³¨æ„ç‚¹">æ³¨æ„ç‚¹<a href="#æ³¨æ„ç‚¹" class="hash-link" aria-label="Direct link to æ³¨æ„ç‚¹" title="Direct link to æ³¨æ„ç‚¹">â€‹</a></h2><p>ã—ã‹ã—ã€ <code>git reset --hard</code> ã—ã¦ã„ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ä¸€ã¤æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
<code>git reset --hard</code> ã¯ branch ã‚’ $CIRCLE_BRANCH ã«åˆ‡ã‚Šæ›¿ãˆã‚‹å‰ã«å®Ÿè¡Œã—ã¦ã„ã‚‹ãŸã‚ã€
å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ–ãƒ©ãƒ³ãƒ(åŸºæœ¬çš„ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒ)ã®å±¥æ­´ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ­ãƒ¼ã‚«ãƒ«ã§å†ç¾ã—ã¦ã¿ã‚‹">ãƒ­ãƒ¼ã‚«ãƒ«ã§å†ç¾ã—ã¦ã¿ã‚‹<a href="#ãƒ­ãƒ¼ã‚«ãƒ«ã§å†ç¾ã—ã¦ã¿ã‚‹" class="hash-link" aria-label="Direct link to ãƒ­ãƒ¼ã‚«ãƒ«ã§å†ç¾ã—ã¦ã¿ã‚‹" title="Direct link to ãƒ­ãƒ¼ã‚«ãƒ«ã§å†ç¾ã—ã¦ã¿ã‚‹">â€‹</a></h2><p>CircleCI ã® rerun with SSH ã§ã‚‚ç¢ºèªã§ãã¾ã™ãŒã€
ãƒ­ãƒ¼ã‚«ãƒ«ã®é©å½“ãªãƒªãƒã‚¸ãƒˆãƒªã§åŒæ§˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å©ã„ã¦ã¿ã‚‹ã“ã¨ã§ç°¡å˜ã«å†ç¾ã§ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir sample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd sample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git commit --allow-empty -m "master first commit"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ export CIRCLE_BRANCH=feature/hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git checkout -b $CIRCLE_BRANCH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git commit --allow-empty -m "$CIRCLE_BRANCH first commit"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git checkout master  # clone ç›´å¾Œã®çŠ¶æ…‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ export CIRCLE_SHA1=$(git rev-parse $CIRCLE_BRANCH)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ã“ã“ã‹ã‚‰ CircleCI åŒæ§˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å©ã„ã¦ã¿ã‚‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git reset --hard "$CIRCLE_SHA1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git checkout -q -B "$CIRCLE_BRANCH"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã“ã§ git log ã—ã¦ã¿ã‚‹ã¨ master branch ã®å±¥æ­´ãŒ $CIRCLE_BRANCH ã¨åŒæ§˜ã«ãªã£ã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½•ãŒå›°ã‚‹ã®ã‹">ä½•ãŒå›°ã‚‹ã®ã‹<a href="#ä½•ãŒå›°ã‚‹ã®ã‹" class="hash-link" aria-label="Direct link to ä½•ãŒå›°ã‚‹ã®ã‹" title="Direct link to ä½•ãŒå›°ã‚‹ã®ã‹">â€‹</a></h2><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒ ã‚’å‚ç…§ã—ãªã‘ã‚Œã°ç‰¹ã«å›°ã‚‹ã“ã¨ã¯ãªã„ã§ã—ã‚‡ã†ã€‚
ä¸€æ–¹ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã¨ã®å·®åˆ†ã‚’æ¤œçŸ¥ã—ã¦å¤‰æ›´ãŒã‚ã£ãŸã‚‚ã®ã ã‘ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã‹ãã†ã„ã†ã“ã¨ã‚’ã‚„ã£ã¦ã„ã‚‹å ´åˆã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git diff --name-only master $CIRCLE_BRANCH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã†ã™ã‚‹ã¨å·®åˆ†ãŒãªã„ã“ã¨ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å›é¿æ–¹æ³•">å›é¿æ–¹æ³•<a href="#å›é¿æ–¹æ³•" class="hash-link" aria-label="Direct link to å›é¿æ–¹æ³•" title="Direct link to å›é¿æ–¹æ³•">â€‹</a></h2><p>master ã®ä»£ã‚ã‚Šã« origin/master ã‚’å‚ç…§ã™ã‚Œã°è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git diff --name-only origin/master $CIRCLE_BRANCH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãŸã ã€ã†ã£ã‹ã‚Šãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’å‚ç…§ã—ã¦ã—ã¾ã†ã“ã¨ã¯ååˆ†è€ƒãˆã‚‰ã‚Œã‚‹ä¸Šã«åˆ¥ã«ã‚¨ãƒ©ãƒ¼ã¯èµ·ã“ã‚‰ãªã„ã®ã§é–“é•ã„ã«æ°—ã¥ãã«ãã„ã§ã™ã€‚</p><p>ãã“ã§ checkout ç›´å¾Œã«ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã®å±¥æ­´ã‚’ origin ã¨å¼·åˆ¶çš„ã«åŒã˜ã«ã—ã¦ã—ã¾ã†ã¨ã„ã†ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯(?)ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DEFAULT_BRANCH=master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ "${CIRCLE_BRANCH:-}" != "$DEFAULT_BRANCH" ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git branch -f "$DEFAULT_BRANCH" "origin/$DEFAULT_BRANCH"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã†ã™ã‚Œã°é–“é•ãˆã¦ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’å‚ç…§ã—ã¦ã—ã¾ã£ã¦ã‚‚å®‰å¿ƒã§ã™ã€‚
ã¨ã¯ã„ãˆã€ã‚³ãƒ¼ãƒ‰ã‚’éƒ¨åˆ†çš„ã«ç§»æ¤ã—ãŸã‚Šã™ã‚‹éš›ã«ã‚‚å±é™º(é–“é•ã„ã«æ°—ã¥ãã«ãã„)ãªã®ã§ã€ origin ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>]]></content:encoded>
            <category>circleci</category>
        </item>
        <item>
            <title><![CDATA[Skaffold ã§ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã ã‘å‹•ã‹ã™ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸ]]></title>
            <link>https://techblog.szksh.cloud/skaffold-generator</link>
            <guid>https://techblog.szksh.cloud/skaffold-generator</guid>
            <pubDate>Sun, 05 Apr 2020 09:53:25 GMT</pubDate>
            <description><![CDATA[è‡ªä½œã® CLI ãƒ„ãƒ¼ãƒ« skaffold-generator ã®ç´¹ä»‹ã§ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>è‡ªä½œã® CLI ãƒ„ãƒ¼ãƒ« <a href="https://github.com/suzuki-shunsuke/skaffold-generator" target="_blank" rel="noopener noreferrer">skaffold-generator</a> ã®ç´¹ä»‹ã§ã™ã€‚
ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã¿ãŸã„ãªãƒãƒªã§åŠæ—¥ãã‚‰ã„ã§å‰²ã¨æ‰‹æ—©ãä½œã‚Œã¾ã—ãŸã€‚
åå‰ãŒé•·ãã¦é©å½“ãªã®ã§ã‚‚ã£ã¨è‰¯ã„åå‰ãªã„ã‹ãªã¨æ€ã£ã¦ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/skaffold-generator" target="_blank" rel="noopener noreferrer">Skaffold</a> ã«æ¬²ã—ã„æ©Ÿèƒ½ãŒãªã„ã®ã§è£œå®Œã™ã‚‹æ„Ÿã˜ã§ä½œã£ãŸã®ã§ã™ãŒã€ã€Œãã‚Œã€‡ã€‡ã§å‡ºæ¥ã‚‹ã‚ˆã€ã¨ã‹ã‚ã£ãŸã‚‰(GitHub issue ã¨ã‹ Twitter ã§)æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹">ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹<a href="#ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹" class="hash-link" aria-label="Direct link to ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹" title="Direct link to ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‹">â€‹</a></h2><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« <code>skaffold-generator.yaml</code> ã‚’ç›£è¦–ã—ã¦å¤‰æ›´ãŒã‚ã£ãŸã‚‰ <code>skaffold.yaml</code> ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚µãƒ¼ãƒ“ã‚¹ã®ä¾å­˜é–¢ä¿‚ã‚’å®šç¾©ã§ããŸã‚Šã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§æŒ‡å®šã—ãŸã‚µãƒ¼ãƒ“ã‚¹åŠã³ãã‚ŒãŒä¾å­˜ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢é€£ã—ãŸè¨­å®šã ã‘ã‚’ä½¿ã£ã¦ <code>skaffold.yaml</code> ã‚’æ›´æ–°ã—ã¾ã™ã€‚
ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ <code>skaffold.yaml</code> ã‚’ç”Ÿæˆã™ã‚‹ã ã‘ãªã®ã§å®Ÿéš›ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã«ã¯ <code>skaffold</code> ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãªãœä½œã£ãŸã‹">ãªãœä½œã£ãŸã‹<a href="#ãªãœä½œã£ãŸã‹" class="hash-link" aria-label="Direct link to ãªãœä½œã£ãŸã‹" title="Direct link to ãªãœä½œã£ãŸã‹">â€‹</a></h2><p>å…ƒã€…ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ãªãŒã‚‰é–‹ç™ºã™ã‚‹ãŸã‚ã« Docker Compose ã‚’ä½¿ã£ã¦ã‚‹ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚‹ã®ã§ã™ãŒã€ãã‚Œã‚’ skaffold ã«ç§»è¡Œå‡ºæ¥ãªã„ã‹æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚
ã¾ã  skaffold ã‚’è§¦ã‚Šå§‹ã‚ãŸã°ã‹ã‚Šã§ç†è§£ãŒæµ…ã„ã®ã§ã™ãŒã€
æœ¬ç•ªç’°å¢ƒã¯ k8s ã§å‹•ã„ã¦ã‚‹ã‹ã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã‚‚ k8s ã§å‹•ã‹ã›ã‚‹ã¨ã„ã„ã‹ãªã¨æ€ã£ãŸã‚Šã€ã‚ã¨ã¯å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦è‡ªå‹•ã§ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚ŒãŸã‚Šã—ã¦ä¾¿åˆ©ãã†ã‹ãªã¨æ€ã„ã¾ã—ãŸã€‚
ã¾ãçµæœçš„ã«ç§»è¡Œã—ãªã„ã“ã¨ã«ãªã£ãŸã¨ã—ã¦ã‚‚ã€ Skaffold ã¨ç¾çŠ¶ã®ä»•çµ„ã¿ã«ã¤ã„ã¦ç†è§£ãŒæ·±ã¾ã‚Œã°ã„ã„ã‹ãªãã‚‰ã„ã®ã¤ã‚‚ã‚Šã§ã™ã€‚</p><p>æ¤œè¨¼ã®éç¨‹ã§ã€ ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ãŒ Docker Compose ã ã¨å‡ºæ¥ã‚‹ã‘ã© Skaffold ã ã¨é›£ã—ãã†ã ã¨æ€ã„ã¾ã—ãŸã€‚</p><ul><li>ã‚µãƒ¼ãƒ“ã‚¹ã®ä¾å­˜é–¢ä¿‚ã‚’å®šç¾©ã™ã‚‹ã“ã¨<ul><li>Skaffold ã¨ã„ã†ã‚ˆã‚Š k8s ã®å•é¡Œã‹ã¨ã¯æ€ã„ã¾ã™ãŒ</li><li>Docker Compose ã ã¨ä¾å­˜ã™ã‚‹ã‚‚ã®ã‚’è‡ªå‹•ã§èµ·å‹•ã—ã¦ãã‚Œã¦ä¾¿åˆ©</li></ul></li><li>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§æŒ‡å®šã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã ã‘èµ·å‹•ã™ã‚‹ã“ã¨<ul><li>Skaffold ã ã¨ skafffold.yaml ã§å®šç¾©ã—ãŸã‚‚ã®ã™ã¹ã¦ãŒãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã¨ã„ã†èªè­˜</li></ul></li></ul><p>ã‚µãƒ¼ãƒ“ã‚¹ã®æ•°ãŒå°‘ãªã‘ã‚Œã°å…¨éƒ¨ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã§ã‚‚ã„ã„ã§ã™ãŒã€
ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ¢ãƒãƒ¬ãƒã§ç®¡ç†ã—ã¦ã„ã‚‹ã‚ˆã†ãªå ´åˆã€
ã™ã¹ã¦ã®ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ã¯ç„¡é§„ãŒå¤§ãã‹ã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ãã“ã§ <code>skaffold.yaml</code> ã®å…ƒã¨ãªã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’æŒ‡å®šã—ã¦å¿…è¦æœ€å°é™ã® <code>skaffold.yaml</code> ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«<a href="#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="hash-link" aria-label="Direct link to ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" title="Direct link to ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">â€‹</a></h2><p>Go ã®ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã¦ãã ã•ã„ã€‚ <a href="https://github.com/suzuki-shunsuke/skaffold-generator/releases" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/skaffold-generator/releases</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ã„æ–¹">ä½¿ã„æ–¹<a href="#ä½¿ã„æ–¹" class="hash-link" aria-label="Direct link to ä½¿ã„æ–¹" title="Direct link to ä½¿ã„æ–¹">â€‹</a></h2><p>ä½¿ã„æ–¹ã¯ç°¡å˜ã§ã™ã€‚ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚
ãƒªãƒã‚¸ãƒˆãƒªã«ã‚µãƒ³ãƒ—ãƒ«ãŒã‚ã‚‹ã®ã§ãã‚Œã‚’è¦‹ã¾ã—ã‚‡ã†ã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/skaffold-generator#getting-started" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/skaffold-generator#getting-started</a></li><li><a href="https://github.com/suzuki-shunsuke/skaffold-generator/tree/master/examples" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/skaffold-generator/tree/master/examples</a></li></ul><p>ã¾ãšã¯ <code>skaffold-generator.yaml</code> ã‚’ç”¨æ„ã—ã¾ã™ã€‚</p><p><code>skaffold-generator.yaml</code> ã¯ <code>base</code> ã¨ <code>services</code> ã‹ã‚‰ãªã‚Šã¾ã™ã€‚</p><p><code>base</code> ã¯ç”Ÿæˆã•ã‚Œã‚‹ <code>skaffold.yaml</code> ã®ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã‚‚ã®ã§ã™ã€‚
<code>deploy.kubectl.manifests</code> ã¨ <code>build.artifacts</code> ã¯ä¸Šæ›¸ãã•ã‚Œã‚‹ã®ã§æŒ‡å®šã—ãªã„ã§ãã ã•ã„ã€‚</p><p><code>services</code> ã§ã¯ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒªã‚¹ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚
å„ã‚µãƒ¼ãƒ“ã‚¹ã¯ä»¥ä¸‹ã®å±æ€§ã‚’æŒã¡ã¾ã™ã€‚</p><ul><li>name: ã‚µãƒ¼ãƒ“ã‚¹åã€‚ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã¨ <code>depends_on</code> ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã®ã«ä½¿ã†ã€‚ãƒ¦ãƒ‹ãƒ¼ã‚¯ã«ã™ã‚‹</li><li>manifests: skaffold.yaml ã® <code>deploy.kubectl.manifests</code> </li><li>artifacts: skaffold.yaml ã®  <code>build.artifacts</code></li><li>depends_on: ã‚µãƒ¼ãƒ“ã‚¹ãŒä¾å­˜ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹åã®ãƒªã‚¹ãƒˆ</li></ul><p>ç”¨æ„ã—ãŸã‚‰ <code>skaffold-generator</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ skaffold.yaml ãŒç”Ÿæˆ(æ—¢ã«ã‚ã‚Œã°ä¸Šæ›¸ã)ã•ã‚Œã€ <code>skaffold-generator.yaml</code> ã®å¤‰æ›´ã‚’ç›£è¦–ã—ãŸçŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ skaffold-generator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020/04/05 18:19:37 start to watch skaffold-generator.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§ã‚µãƒ¼ãƒ“ã‚¹åã‚’æŒ‡å®šã—ãªã„å ´åˆã€ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒ <code>skaffold.yaml</code> ã«åæ˜ ã•ã‚Œã¾ã™ã€‚
åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>skaffold dev</code> ã‚’å®Ÿè¡Œã™ã‚Œã°
ç”Ÿæˆã•ã‚ŒãŸ <code>skaffold.yaml</code> ã‚’ä½¿ã£ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤å‡ºæ¥ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ skaffold dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>skaffold-generator.yaml</code> ã‚’å¤‰æ›´ã™ã‚Œã°ã€ãã®å¤‰æ›´ã‚’æ¤œçŸ¥ã— <code>skaffold.yaml</code> ãŒæ›´æ–°ã•ã‚Œã€ãã—ã¦ <code>skaffold dev</code> ãŒ <code>skaffold.yaml</code> ã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã™ã€‚</p><p>å¼•æ•°ç„¡ã—ã§ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ã“ã®ãƒ„ãƒ¼ãƒ«ã®æ„å‘³ãŒãªã„ã®ã§ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§ã‚µãƒ¼ãƒ“ã‚¹åã‚’æŒ‡å®šã—ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ skaffold-generator api</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã†ã™ã‚‹ã¨ã‚µãƒ¼ãƒ“ã‚¹ <code>api</code> ã¨ <code>api</code> ãŒä¾å­˜ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹(ä¾å­˜é–¢ä¿‚ã¯å†å¸°çš„ã«å‡¦ç†ã•ã‚Œã¾ã™)ã ã‘ãŒ <code>skaffold.yaml</code> ã«åæ˜ ã•ã‚Œã¾ã™ã€‚
ä¾å­˜é–¢ä¿‚ã¯å¾ªç’°ã—ã¦ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚</p><p>ä½¿ã„æ–¹ã¯ä»¥ä¸Šã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-compose-ã¿ãŸã„ã«ã§ããªã„ã“ã¨">Docker Compose ã¿ãŸã„ã«ã§ããªã„ã“ã¨<a href="#docker-compose-ã¿ãŸã„ã«ã§ããªã„ã“ã¨" class="hash-link" aria-label="Direct link to Docker Compose ã¿ãŸã„ã«ã§ããªã„ã“ã¨" title="Direct link to Docker Compose ã¿ãŸã„ã«ã§ããªã„ã“ã¨">â€‹</a></h2><p>Docker Compose ã¿ãŸã„ã«ä¾å­˜é–¢ä¿‚ã‚’å®šç¾©ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸãŒã€
Docker Compose ã¿ãŸã„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã®é †åºã¯è€ƒæ…®ã•ã‚Œã¾ã›ã‚“ã€‚
ã¾ãã“ã®ãƒ„ãƒ¼ãƒ«ã¯ <code>skaffold.yaml</code> ã‚’ç”Ÿæˆã™ã‚‹ã ã‘ãªã®ã§ä»•æ–¹ãªã„ã§ã™ã­ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€å¾Œã«">æœ€å¾Œã«<a href="#æœ€å¾Œã«" class="hash-link" aria-label="Direct link to æœ€å¾Œã«" title="Direct link to æœ€å¾Œã«">â€‹</a></h2><p>ä»¥ä¸Šã€ <code>skaffold-generator</code> ã®ç´¹ä»‹ã§ã—ãŸã€‚
ã¾ã ä½œã£ãŸã°ã£ã‹ã§è‡ªåˆ†ã§ã‚‚ä½¿ãˆã¦ãªã„ã®ã§æœ¬å½“ã«ä½¿ã„ç‰©ã«ãªã‚‹ã®ã‹ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ãŒã€
èˆˆå‘³ã‚ã‚‹äººã¯è§¦ã£ã¦ã¿ã¦ãã ã•ã„ã€‚</p>]]></content:encoded>
            <category>k8s</category>
            <category>skaffold</category>
            <category>skaffold-generator</category>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[Terraform ãƒãƒ³ã‚ºã‚ªãƒ³ with MySQL Provider]]></title>
            <link>https://techblog.szksh.cloud/terraform-hands-on-with-mysql-provider</link>
            <guid>https://techblog.szksh.cloud/terraform-hands-on-with-mysql-provider</guid>
            <pubDate>Fri, 17 Jan 2020 00:14:08 GMT</pubDate>
            <description><![CDATA[Terraform ã‚’å‹‰å¼·ã™ã‚‹ã«ã¯å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã‚‹ã®ãŒä¸€ç•ªæ‰‹ã£å–ã‚Šæ—©ã„ã§ã™ãŒã€]]></description>
            <content:encoded><![CDATA[<p>Terraform ã‚’å‹‰å¼·ã™ã‚‹ã«ã¯å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã‚‹ã®ãŒä¸€ç•ªæ‰‹ã£å–ã‚Šæ—©ã„ã§ã™ãŒã€
ã§ã¯æ‰‹é ƒãªé¡Œæã¯ã‚ã‚‹ã‹ã¨è¨€ã‚ã‚Œã‚‹ã¨å°‘ã—é›£ã—ã„ã§ã™ã€‚</p><p><a href="https://learn.hashicorp.com/terraform/getting-started/build" target="_blank" rel="noopener noreferrer">å…¬å¼ã® Getting Started ã§ã¯ AWS ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™</a>ãŒã€
AWS ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚„ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ãŒå¿…è¦ã§ã™ã—ãŠé‡‘ã‚‚ã‹ã‹ã£ã¦ã—ã¾ã„ã¾ã™(ç„¡æ–™æ ã¯ã‚ã‚Šã¾ã™ãŒ)ã€‚
ã‚‚ã†å°‘ã—æ‰‹è»½ãªã‚‚ã®ãŒæ¬²ã—ã„ã¨ã“ã‚ã§ã™ã€‚</p><p>ãã“ã§å…¬å¼ã® Provider ã§ä¸åº¦ã„ã„ã‚‚ã®ã¯ãªã„ã‹æ¢ã—ãŸã¨ã“ã‚ã€ <a href="https://www.terraform.io/docs/providers/mysql/" target="_blank" rel="noopener noreferrer">MySQL Provider</a> ãŒè‰¯ã•ãã†ã§ã—ãŸã€‚
MySQL ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ Database ã‚’ Terraform ã§ç®¡ç†ã—ãŸã„ã¨ã¯è‡ªåˆ†ã¯æ€ã„ã¾ã›ã‚“ãŒã€ Terraform ã®å…¥é–€ã§éŠã¶ã«ã¯ã¡ã‚‡ã†ã©ã‚ˆã„ã§ã—ã‚‡ã†ã€‚</p><p>ã¡ãªã¿ã«å…¬å¼ã® Provider ã®ãƒªã‚¹ãƒˆã¯ã“ã¡ã‚‰ã§ã™ã€‚</p><ul><li><a href="https://github.com/terraform-providers" target="_blank" rel="noopener noreferrer">https://github.com/terraform-providers</a></li><li><a href="https://www.terraform.io/docs/providers/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/providers/index.html</a></li></ul><p>ã¾ãŸã€ Terraform ã«é–¢ã—ã¦ã¯ <a href="https://techblog.szksh.cloud/terraform-getting-started/" target="_blank" rel="noopener noreferrer">Terraform å…¥é–€</a> ã‚‚å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><p>ä»Šå›ã®ä½œæ¥­ç”¨ã«é©å½“ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã“ã§ä½œæ¥­ã—ã¾ã—ã‚‡ã†ã€‚</p><p>ä»¥é™ã€ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã¯ä¸€éƒ¨çœç•¥ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir workspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd workspace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨-tfenv">Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ tfenv<a href="#terraform-ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨-tfenv" class="hash-link" aria-label="Direct link to Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ tfenv" title="Direct link to Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ tfenv">â€‹</a></h2><p>Terraform ã‚’è¤‡æ•°äººã§ä½¿ã†å ´åˆã€ Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æƒãˆã‚‹ã®ãŒé‡è¦ã§ã™ã€‚ ç†ç”±ã®ä¸€ã¤ã¨ã—ã¦ã€ Terraform ã® State ã¯ State ã‚’ä½œæˆã—ãŸ Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜éŒ²ã—ã¦ãŠã‚Šã€ãã‚Œã‚ˆã‚Šå¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® Terraform ã§ <code>terraform plan</code> ãªã©ã‚’å®Ÿè¡Œã™ã‚‹ã¨å¤±æ•—ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™(ã“ã®ç‚¹ã«ã¤ã„ã¦ã¯å¾Œã§ã‚‚è§¦ã‚Œã¾ã™)ã€‚
ãã†ã„ã†æ„å‘³ã§ã¯ã€ <a href="https://github.com/tfutils/tfenv" target="_blank" rel="noopener noreferrer">tfenv</a> ã«ã‚ˆã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã™ã‚‹ã®ãŒè‰¯ã„ã§ã™ã€‚</p><p><code>.terraform-version</code> ã‚’ä½œæˆã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo 0.12.19 &gt; .terraform-version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ tfenv install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform v0.12.19</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-ã‚’-docker-ã§å‹•ã‹ã™">MySQL ã‚’ Docker ã§å‹•ã‹ã™<a href="#mysql-ã‚’-docker-ã§å‹•ã‹ã™" class="hash-link" aria-label="Direct link to MySQL ã‚’ Docker ã§å‹•ã‹ã™" title="Direct link to MySQL ã‚’ Docker ã§å‹•ã‹ã™">â€‹</a></h2><p>ã§ã¯ MySQL ã‚’ Docker ã§å‹•ã‹ã—ã¾ã™ã€‚</p><p><a href="https://hub.docker.com/_/mysql?tab=description" target="_blank" rel="noopener noreferrer">https://hub.docker.com/_/mysql?tab=description</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-compose-ä½¿ã†å ´åˆ">Docker Compose ä½¿ã†å ´åˆ<a href="#docker-compose-ä½¿ã†å ´åˆ" class="hash-link" aria-label="Direct link to Docker Compose ä½¿ã†å ´åˆ" title="Direct link to Docker Compose ä½¿ã†å ´åˆ">â€‹</a></h3><p>docker-compose.yml</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">5.7.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"23306:3306"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">MYSQL_ROOT_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose up -d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose ps  # ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸è¦ã«ãªã£ãŸã‚‰å‰Šé™¤ã—ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose rm -sf mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚Œã‹ã‚‰ Terraform ã§ MySQL ã® Database ã‚’ä½œæˆã—ã¾ã™ã€‚
ä½œæˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ãŸã‚ã« MySQL ã«æ¥ç¶šã—ã¦ãŠãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose exec mysql mysql -u root -p -P 23306</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show databases;  # database ã®ä¸€è¦§ã‚’ç¢ºèª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Database           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| information_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| mysql              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| performance_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| sys                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 rows in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-compose-ã‚’ä½¿ã‚ãªã„å ´åˆ">Docker Compose ã‚’ä½¿ã‚ãªã„å ´åˆ<a href="#docker-compose-ã‚’ä½¿ã‚ãªã„å ´åˆ" class="hash-link" aria-label="Direct link to Docker Compose ã‚’ä½¿ã‚ãªã„å ´åˆ" title="Direct link to Docker Compose ã‚’ä½¿ã‚ãªã„å ´åˆ">â€‹</a></h3><p>åŸºæœ¬çš„ã« Docker Compose ä½¿ã†å ´åˆã¨å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker run --name terraform-mysql -p "23306:3306" -e MYSQL_ROOT_PASSWORD=password -d mysql:5.7.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker exec -ti terraform-mysql mysql -u root -p -P 23306</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker rm -vf terraform-mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆ">ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆ<a href="#ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆ" class="hash-link" aria-label="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆ" title="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆ">â€‹</a></h2><p>æ¬¡ã®ã‚ˆã†ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã¾ã™ã€‚</p><p>main.tf</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">provider "mysql" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  endpoint = "localhost:23306"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  username = "root"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  password = "password"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¨­å®šã§ãã‚‹å±æ€§ã‚„ãã®æ„å‘³ãªã©ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p><p><a href="https://www.terraform.io/docs/providers/mysql/r/database.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/providers/mysql/r/database.html</a></p><p>MySQL Provider ã®è¨­å®šã¨ã—ã¦ MySQL ã«æ¥ç¶šã™ã‚‹ãŸã‚ã®æƒ…å ±ã¨ã€Terraform ã«ã‚ˆã£ã¦ä½œæˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ <code>foo</code> ã®è¨­å®šãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
password ãŒå¹³æ–‡ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ãŒæ°—ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä¸€æ—¦ã‚¹ãƒ«ãƒ¼ã—ã¦ãã ã•ã„ã€‚</p><p>ã“ã®çŠ¶æ…‹ã§ <code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚ <code>terraform plan</code> ã¯ <code>terraform apply</code> ã«ã‚ˆã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆã‚’ DRY RUN ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Could not satisfy plugin requirements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plugin reinitialization required. Please run "terraform init".</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plugins are external binaries that Terraform uses to access and manipulate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resources. The configuration provided requires plugins which can't be located,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">don't satisfy the version constraints, or are otherwise incompatible.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform automatically discovers provider requirements from your</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">configuration, including providers used in child modules. To see the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">requirements and constraints from each module, run "terraform providers".</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: provider.mysql: no suitable version installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version requirements: "(any version)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  versions installed: none</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤±æ•—ã—ã¾ã—ãŸã€‚</p><blockquote><p>Plugin reinitialization required. Please run "terraform init".</p></blockquote><p>ã¨ã‚ã‚‹é€šã‚Šã€ <code>terraform plan</code> ã‚„ <code>apply</code> ãªã©ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å‰ã« <code>terraform init</code> ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Initializing the backend...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Initializing provider plugins...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Checking for available provider plugins...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Downloading plugin for provider "mysql" (terraform-providers/mysql) 1.9.0...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">^C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The following providers do not have any version constraints in configuration,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">so the latest version was installed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To prevent automatic upgrades to new major versions that may contain breaking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changes, it is recommended to add version = "..." constraints to the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">corresponding provider blocks in configuration, with the constraint strings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">suggested below.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* provider.mysql: version = "~&gt; 1.9"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform has been successfully initialized!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You may now begin working with Terraform. Try running "terraform plan" to see</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">any changes that are required for your infrastructure. All Terraform commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">should now work.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">If you ever set or change modules or backend configuration for Terraform,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rerun this command to reinitialize your working directory. If you forget, other</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">commands will detect it and remind you to do so if necessary.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Provider ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚
<code>terraform init</code> ã‚’å®Ÿè¡Œã™ã‚‹ã¨ <code>.terraform</code> ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ls -A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.terraform  .terraform-version  main.tf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>terraform init</code> ã¯ä½•åº¦ã§ã‚‚å®‰å…¨ã«å®Ÿè¡Œã§ãã¾ã™ã€‚
<code>.terraform</code> ã‚’å‰Šé™¤ã—ãŸå ´åˆã§ã‚‚ã‚‚ã†ä¸€åº¦ <code>terraform init</code> ã‚’å®Ÿè¡Œã™ã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>æ¬¡ã« <code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Refreshing Terraform state in-memory prior to plan...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The refreshed state will be used to calculate this plan, but will not be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persisted to local or remote state storage.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">An execution plan has been generated and is shown below.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resource actions are indicated with the following symbols:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.foo will be created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_character_set = "utf8"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_collation     = "utf8_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + id                    = (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + name                  = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 1 to add, 0 to change, 0 to destroy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Note: You didn't specify an "-out" parameter to save this plan, so Terraform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">can't guarantee that exactly these actions will be performed if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"terraform apply" is subsequently run.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Plan: 1 to add, 0 to change, 0 to destroy.</p></blockquote><p>ã¨ã‚ã‚‹é€šã‚Šã€ãƒªã‚½ãƒ¼ã‚¹ãŒ 1 ã¤ä½œæˆã•ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚ DRY RUN ãªã®ã§ã¾ã ä½œæˆã•ã‚Œã¦ã¾ã›ã‚“ã€‚</p><p>ã§ã¯å®Ÿéš›ã«ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform apply</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">An execution plan has been generated and is shown below.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resource actions are indicated with the following symbols:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.foo will be created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_character_set = "utf8"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_collation     = "utf8_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + id                    = (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + name                  = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 1 to add, 0 to change, 0 to destroy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Do you want to perform these actions?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Terraform will perform the actions described above.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Only 'yes' will be accepted to approve.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Creating...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Creation complete after 0s [id=foo]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Apply complete! Resources: 1 added, 0 changed, 0 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€”ä¸­ç¢ºèªãŒã‚ã‚‹ã®ã§ <code>yes</code> ã¨å…¥åŠ›ã™ã‚‹ã¨å®Ÿéš›ã«å¤‰æ›´ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚</p><p>æœ¬å½“ã« Database ãŒä½œã‚‰ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚
MySQL ã‚¯ã‚¨ãƒªã‚’å©ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show databases;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Database           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| information_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| foo                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| mysql              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| performance_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| sys                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 rows in set (0.01 sec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; select * from INFORMATION_SCHEMA.SCHEMATA where SCHEMA_NAME='foo';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| CATALOG_NAME | SCHEMA_NAME | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| def          | foo         | utf8                       | utf8_general_ci        | NULL     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 row in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚ã‚Šã¾ã—ãŸã€‚</p><p>ã™ã‚‹ã¨ <code>terraform.tfstate</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œã‚‰ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose.yml main.tf  terraform.tfstate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚“ãª JSON ãƒ•ã‚¡ã‚¤ãƒ«ã«ãªã‚Šã¾ã™ã€‚</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"terraform_version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.12.19"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"serial"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"lineage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"7011a551-bfa1-96a5-4153-2c9d6f32251c"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"outputs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"resources"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"mode"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"managed"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mysql_database"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"provider"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"provider.mysql"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"instances"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"schema_version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"default_character_set"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"utf8"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"default_collation"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"utf8_general_ci"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"private"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bnVsbA=="</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®æƒ…å ±ã¨ã€ Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã©ã®ãƒ¡ã‚¿æƒ…å ±ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯åŸºæœ¬çš„ã« terraform ã«ã‚ˆã£ã¦æ›´æ–°ã•ã‚Œã‚‹ã‚‚ã®ã§ã‚ã‚Šã€äººé–“ãŒæ‰‹ã§ä¿®æ­£ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¤ã„-terraform-ã‚’ä½¿ã£ã¦ã¿ã‚‹">å¤ã„ Terraform ã‚’ä½¿ã£ã¦ã¿ã‚‹<a href="#å¤ã„-terraform-ã‚’ä½¿ã£ã¦ã¿ã‚‹" class="hash-link" aria-label="Direct link to å¤ã„ Terraform ã‚’ä½¿ã£ã¦ã¿ã‚‹" title="Direct link to å¤ã„ Terraform ã‚’ä½¿ã£ã¦ã¿ã‚‹">â€‹</a></h2><p>ã“ã“ã§ã‚ãˆã¦å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® Terraform ã‚’ä½¿ã£ã¦ <code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo 0.12.12 &gt; .terraform-version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ tfenv install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Error locking state: Error acquiring the state lock: state snapshot was created by Terraform v0.12.19, which is newer than current v0.12.12; upgrade to Terraform v0.12.19 or greater to work with this state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform acquires a state lock to protect the state from being written</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">by multiple users at the same time. Please resolve the issue above and try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">again. For most commands, you can disable locking with the "-lock=false"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flag, but this is not recommended.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤±æ•—ã—ã¾ã—ãŸã€‚ State ã® lock ã«å¤±æ•—ã—ãŸã‚ˆã†ã§ã™ã€‚ State ã® lock ã«ã¤ã„ã¦ã¯ <a href="https://techblog.szksh.cloud/terraform-state-locking/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/terraform-state-locking/</a> ã‚‚å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><p>ã“ã®ã‚ˆã†ã«å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® terraform ã¯ä½¿ãˆã¾ã›ã‚“ã€‚
ä¸€æ–¹æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã†ã«ã¯å•é¡Œãªãä½¿ãˆã¾ã™ãŒã€ State ã® <code>terraform_version</code> ãŒæ›´æ–°ã•ã‚Œã€ãã‚Œã¾ã§ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ãŸäººãŒçªç„¶ <code>terraform plan</code> ãªã©ãŒã§ããªããªã‚Šã¾ã™ã®ã§ã€æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</p><p>ã“ã‚ŒãŒå‰è¿°ã—ãŸæ„å‘³ã«ãªã‚Šã¾ã™ã€‚</p><blockquote><p>Terraform ã‚’è¤‡æ•°äººã§ä½¿ã†å ´åˆã€ Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æƒãˆã‚‹ã®ãŒé‡è¦ã§ã™ã€‚ ç†ç”±ã®ä¸€ã¤ã¨ã—ã¦ã€ Terraform ã® State ã¯ State ã‚’ä½œæˆã—ãŸ Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜éŒ²ã—ã¦ãŠã‚Šã€ãã‚Œã‚ˆã‚Šå¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® Terraform ã§ <code>terraform plan</code> ãªã©ã‚’å®Ÿè¡Œã™ã‚‹ã¨å¤±æ•—ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™(ã“ã®ç‚¹ã«ã¤ã„ã¦ã¯å¾Œã§ã‚‚è§¦ã‚Œã¾ã™)ã€‚</p></blockquote><p>ã§ã¯å…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã—ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo 0.12.19 &gt; .terraform-version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒªã‚½ãƒ¼ã‚¹ã®æ›´æ–°">ãƒªã‚½ãƒ¼ã‚¹ã®æ›´æ–°<a href="#ãƒªã‚½ãƒ¼ã‚¹ã®æ›´æ–°" class="hash-link" aria-label="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã®æ›´æ–°" title="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã®æ›´æ–°">â€‹</a></h2><p>åŒã˜èª¿å­ã§ã‚‚ã†ä¸€ã¤ Database ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
Database foo ã®è¨­å®šã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ <code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Duplicate resource "mysql_database" configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on main.tf line 11:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  11: resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A mysql_database resource named "foo" was already declared at main.tf:7,1-32.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resource names must be unique per type in each module.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€šã‚Šã€ãƒªã‚½ãƒ¼ã‚¹ãƒ‘ã‚¹ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯ã§ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚
ä¿®æ­£ã—ã¾ã—ã‚‡ã†ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "bar" { # "foo" ã‚’ "bar" ã«å¤‰æ›´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.bar will be created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + resource "mysql_database" "bar" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_character_set = "utf8"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_collation     = "utf8_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + id                    = (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + name                  = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 1 to add, 0 to change, 0 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½œæˆã•ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚ apply ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform apply</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Creating...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Error 1007: Can't create database 'foo'; database exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on main.tf line 11, in resource "mysql_database" "bar":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  11: resource "mysql_database" "bar" {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤±æ•—ã—ã¾ã—ãŸã€‚åŒã˜åå‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ä½œæˆã§ããªã„ã®ã§å½“ç„¶ã§ã™ã€‚
ã“ã®ã‚ˆã†ã« plan ã«æˆåŠŸã—ã¦ã‚‚ apply ã«å¤±æ•—ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã€‚</p><p>ã§ã¯ name ã‚’ä¿®æ­£ã—ã¾ã—ã‚‡ã†ã€‚ã¤ã„ã§ã« database foo ã® default character set ã‚’ä¿®æ­£ã—ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = "utf8mb4" # default character set ã‚’ä¿®æ­£ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ utf8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "bar" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = "bar" # åå‰ã‚’ foo ã‹ã‚‰ bar ã«å¤‰æ›´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.bar will be created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + resource "mysql_database" "bar" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_character_set = "utf8"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_collation     = "utf8_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + id                    = (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + name                  = "bar"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.foo will be updated in-place</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~ resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_character_set = "utf8" -&gt; "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_collation     = "utf8_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id                    = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name                  = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 1 to add, 1 to change, 0 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform apply</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Creating...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Modifying... [id=foo]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Creation complete after 0s [id=bar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Error 1253: COLLATION 'utf8_general_ci' is not valid for CHARACTER SET 'utf8mb4'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on main.tf line 7, in resource "mysql_database" "foo":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   7: resource "mysql_database" "foo" {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>mysql_database.foo ã®å¤‰æ›´ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ä¸€æ–¹ mysql_database.bar ã®ä½œæˆã«ã¯æˆåŠŸã—ã¦ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show databases;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Database           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| information_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| bar                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| foo                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| mysql              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| performance_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| sys                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6 rows in set (0.00 sec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; select * from INFORMATION_SCHEMA.SCHEMATA where SCHEMA_NAME='foo';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| CATALOG_NAME | SCHEMA_NAME | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| def          | foo         | utf8                       | utf8_general_ci        | NULL     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 row in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã®ã‚ˆã†ã«ã€ä¸€éƒ¨ã®å¤‰æ›´ã®é©ç”¨ã«å¤±æ•—ã«ã—ã¦ã‚‚ã€ãã®ä»–ã®å¤‰æ›´ã¯é©ç”¨ã•ã‚Œã‚‹ã¨ã„ã†ã€ã‚ã‚‹æ„å‘³ä¸­é€”åŠç«¯ã« apply ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã†ã„ã£ãŸå ´åˆã« rollback ã™ã‚‹ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã¯ãªã„ã®ã§æ°—ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚é©ç”¨ã•ã‚ŒãŸå¤‰æ›´ã¯ã¡ã‚ƒã‚“ã¨ State ã«åæ˜ ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã§ã¯ mysql_database.foo ã®å¤‰æ›´ã«å¤±æ•—ã—ãŸã®ã§ã€é©åˆ‡ã«è¨­å®šã‚’å¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci" # utf8_general_ci ã‹ã‚‰å¤‰æ›´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>apply ã« <code>--auto-approve</code> ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹ã¨ç¢ºèªãªã—ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚CIã§å®Ÿè¡Œã™ã‚‹å ´åˆã«ã¯åŸºæœ¬ã“ã‚Œã‚’ã¤ã‘ã‚‹ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform apply --auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Refreshing state... [id=foo]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Refreshing state... [id=bar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Modifying... [id=foo]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Modifications complete after 0s [id=foo]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Apply complete! Resources: 0 added, 1 changed, 0 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤‰æ›´ã§ãã¾ã—ãŸã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; select * from INFORMATION_SCHEMA.SCHEMATA where SCHEMA_NAME='foo';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| CATALOG_NAME | SCHEMA_NAME | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| def          | foo         | utf8mb4                    | utf8mb4_general_ci     | NULL     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 row in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraformtfstatebackup">terraform.tfstate.backup<a href="#terraformtfstatebackup" class="hash-link" aria-label="Direct link to terraform.tfstate.backup" title="Direct link to terraform.tfstate.backup">â€‹</a></h2><p>ã¨ã“ã‚ã§ <code>terraform.tfstate.backup</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose.yml main.tf  terraform.tfstate  terraform.state.backup</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚Œã¯åå‰ã®é€šã‚Š <code>terraform.tfstate</code> ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã§ã™ã€‚
<code>terraform.tfstate</code> ãŒ terraform ã®ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã£ã¦æ›´æ–°ã•ã‚Œã‚‹å‰ã«è‡ªå‹•çš„ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒä½œæˆã•ã‚Œã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒªã‚½ãƒ¼ã‚¹ã®-recreate">ãƒªã‚½ãƒ¼ã‚¹ã® recreate<a href="#ãƒªã‚½ãƒ¼ã‚¹ã®-recreate" class="hash-link" aria-label="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã® recreate" title="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã® recreate">â€‹</a></h2><p>ä»Šåº¦ã¯ database ã®åå‰ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "foo2" # foo ã‹ã‚‰å¤‰æ›´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.foo must be replaced</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-/+ resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ id                    = "foo" -&gt; (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ name                  = "foo" -&gt; "foo2" # forces replacement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 1 to add, 0 to change, 1 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…ˆç¨‹ default_collation ã¨ default_character_set ã‚’å¤‰æ›´ã—ãŸéš›ã¯æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸãŒã€ä»Šåº¦ã¯æ–°ã—ãä½œã‚Šç›´ã•ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚
ã“ã‚Œã¯ãƒªã‚½ãƒ¼ã‚¹ã®å®šç¾©ã«ä¾å­˜ã—ã¾ã™ã€‚ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p><p><a href="https://github.com/terraform-providers/terraform-provider-mysql/blob/v1.9.0/mysql/resource_database.go#L31" target="_blank" rel="noopener noreferrer">https://github.com/terraform-providers/terraform-provider-mysql/blob/v1.9.0/mysql/resource_database.go#L31</a></p><p>å±æ€§ã®å®šç¾©ã§ <code>ForceNew: true</code> ã¨ãªã£ã¦ã„ã‚‹å ´åˆã€ãã®å±æ€§ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨ãƒªã‚½ãƒ¼ã‚¹ãŒä½œã‚Šç›´ã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨æ—¢å­˜ã®ãƒªã‚½ãƒ¼ã‚¹ã®æ›´æ–°ã«ãªã‚Šã¾ã™ã€‚
æ–°ã—ãä½œã‚Šç›´ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ãªã©ã¯æ¶ˆãˆã‚‹ã¯ãšã§ã™ã€‚è©¦ã—ã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã£ã¦ãŠã„ã¦ã€ apply ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show tables from foo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Empty set (0.00 sec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; create table foo.zoo (id int);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK, 0 rows affected (0.03 sec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show tables from foo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Tables_in_foo |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| zoo           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 row in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform apply --auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Refreshing state... [id=foo]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Refreshing state... [id=bar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Destroying... [id=foo]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Destruction complete after 0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Creating...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Creation complete after 0s [id=foo2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Apply complete! Resources: 1 added, 0 changed, 1 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>mysql_database.foo: Destroying... <!-- -->[id=foo]</p></blockquote><p>ã¨ã‚ã‚‹ã‚ˆã†ã«ä¸€åº¦å‰Šé™¤ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show tables from foo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR 1049 (42000): Unknown database 'foo'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show tables from foo2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Empty set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯å…ˆç¨‹ä½œæˆã—ãŸãƒ†ãƒ¼ãƒ–ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ã‚ˆã†ã« recreate ã¯å±é™ºãªæ“ä½œãªã®ã§ã‚„ã‚‹ã¨ãã«ã¯æ³¨æ„ã‚’æ‰•ã„ã¾ã—ã‚‡ã†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¤‰æ•°ã®åˆ©ç”¨">å¤‰æ•°ã®åˆ©ç”¨<a href="#å¤‰æ•°ã®åˆ©ç”¨" class="hash-link" aria-label="Direct link to å¤‰æ•°ã®åˆ©ç”¨" title="Direct link to å¤‰æ•°ã®åˆ©ç”¨">â€‹</a></h2><p>å¤‰æ•°ã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚è¨­å®šã‚’ä¿®æ­£ã—ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "foo2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = var.default_character_set  # å¤‰æ•° default_character_set ã‚’å‚ç…§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Reference to undeclared input variable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on main.tf line 9, in resource "mysql_database" "foo":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   9:   default_character_set = var.default_character_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">An input variable with the name "default_character_set" has not been declared.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This variable can be declared with a variable "default_character_set" {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">block.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã—ãŸã€‚å¤‰æ•°ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯å®£è¨€ãŒå¿…è¦ã§ã™ã€‚
<code>variables.tf</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable "default_character_set" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var.default_character_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å€¤ã®å…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã¯å¤‰æ•°ã®å€¤ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã‹ã‚‰ã§ã™ã€‚
ã“ã“ã§ã¯ <code>foo</code> ã¨å…¥åŠ›ã—ã¦ã¿ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var.default_character_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value: foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.foo will be updated in-place</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~ resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_character_set = "utf8mb4" -&gt; "foo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id                    = "foo2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name                  = "foo2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 0 to add, 1 to change, 0 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>-input=false</code> ã«ã™ã‚‹ã¨å…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œãšã«ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan -input=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: No value for required variable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on variables.tf line 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   1: variable "default_character_set" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The root module input variable "default_character_set" is not set, and has no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default value. Use a -var or -var-file command line argument to provide a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">value for this variable.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>terraform.tfvars</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€å€¤ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">default_character_set = "utf8mb4"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>terraform.tfvars</code> ã¯ç‰¹åˆ¥ãªãƒ•ã‚¡ã‚¤ãƒ«åã§ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã¨è‡ªå‹•ã§èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚</p><p>ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å¤‰ãˆã¦ terraform plan ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mv terraform.tfvars main.tfvars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var.default_character_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>èã‹ã‚Œã¾ã—ãŸã€‚ main.tfvars ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ <code>-var-file</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚Œã° main.tfvars ã‚’èª­ã¿è¾¼ã‚ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan -var-file=main.tfvars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚‚ã¨ã«æˆ»ã—ã¦ãŠãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mv main.tfvars terraform.tfvars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»–ã®ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§">ä»–ã®ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§<a href="#ä»–ã®ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§" class="hash-link" aria-label="Direct link to ä»–ã®ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§" title="Direct link to ä»–ã®ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§">â€‹</a></h2><p>è¨­å®šã‚’ä¿®æ­£ã—ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "foo2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = var.default_character_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "bar" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "bar"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = mysql_database.foo.default_character_set  # ä»–ã®ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’å‚ç…§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"  # default_character_set ã«åˆã‚ã›ã¦å¤‰æ›´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.bar will be updated in-place</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~ resource "mysql_database" "bar" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_character_set = "utf8" -&gt; "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_collation     = "utf8_general_ci" -&gt; "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id                    = "bar"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name                  = "bar"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 0 to add, 1 to change, 0 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform apply --auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Refreshing state... [id=foo2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Refreshing state... [id=bar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Modifying... [id=bar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Modifications complete after 0s [id=bar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Apply complete! Resources: 0 added, 1 changed, 0 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-state-rm">terraform state rm<a href="#terraform-state-rm" class="hash-link" aria-label="Direct link to terraform state rm" title="Direct link to terraform state rm">â€‹</a></h2><p><a href="https://www.terraform.io/docs/commands/state/rm.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/state/rm.html</a></p><p>Terraform ã¯ State ã«ã‚ˆã£ã¦è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã®ãƒªã‚½ãƒ¼ã‚¹ã¨å®Ÿéš›ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¦ã„ã¾ã™ã€‚
State ã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¦ <code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ã€ Terraform ã¯ãã®ãƒªã‚½ãƒ¼ã‚¹ã‚’æ–°è¦ã§ä½œæˆã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform state rm mysql_database.bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Removed mysql_database.bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully removed 1 resource instance(s).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.bar will be created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + resource "mysql_database" "bar" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + id                    = (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + name                  = "bar"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 1 to add, 0 to change, 0 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®Ÿéš›ã«ã¯åŒã˜åå‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ä½œæˆã§ããªã„ã®ã§ <code>apply</code> ã§å¤±æ•—ã™ã‚‹ã¯ãšã§ã™ã€‚
<code>terraform state rm</code> ã¯å…ƒã€… Terraform ã§ç®¡ç†ã—ã¦ã„ãŸã‚‚ã®ã‚’ Terraform ã§ç®¡ç†ã™ã‚‹ã®ã‚’æ­¢ã‚ãŸã‚Šã€ã‚ã‚‹ã„ã¯æ‰‹å‹•ã§å‰Šé™¤ã—ã¦ã—ã¾ã£ãŸãƒªã‚½ãƒ¼ã‚¹ã‚’ State ã‹ã‚‰ã‚‚å‰Šé™¤ã™ã‚‹ã®ã«ä½¿ãˆã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-import">terraform import<a href="#terraform-import" class="hash-link" aria-label="Direct link to terraform import" title="Direct link to terraform import">â€‹</a></h2><p><a href="https://www.terraform.io/docs/import/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/import/index.html</a>
<a href="https://www.terraform.io/docs/commands/import.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/import.html</a></p><p><code>terraform import</code> ã¯ Terraform ã§ç®¡ç†ã•ã‚Œã¦ã„ãªã„ãƒªã‚½ãƒ¼ã‚¹ã‚’ Terraform ã§ç®¡ç†ã™ã‚‹ãŸã‚ã« State ã«ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã‚€ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚
ã¡ã‚‡ã†ã© <code>mysql_database.bar</code> ã‚’ State ã‹ã‚‰æ¶ˆã—ã¦ã—ã¾ã£ãŸã®ã§ã€ import ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ã‚‡ã†ã€‚</p><p><a href="https://www.terraform.io/docs/providers/mysql/r/database.html#import" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/providers/mysql/r/database.html#import</a> ã«ã‚ã‚‹é€šã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã‚’æŒ‡å®šã™ã‚Œã° import å‡ºæ¥ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform import mysql_database.bar bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Importing from ID "bar"...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Import prepared!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Prepared mysql_database for import</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Refreshing state... [id=bar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Import successful!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The resources that were imported are shown above. These resources are now in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">your Terraform state and will henceforth be managed by Terraform.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Import å‡ºæ¥ã¾ã—ãŸã€‚ <code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¦å·®åˆ†ãŒãªããªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ¬¡ã«æ‰‹å‹•ã§ Database ã‚’ä½œæˆã—ã¦ãã‚Œã‚’ import ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; create database zoo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK, 1 row affected (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform import mysql_database.zoo zoo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: resource address "mysql_database.zoo" does not exist in the configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Before importing this resource, please create its configuration in the root module. For example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # (resource arguments)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤±æ•—ã—ã¾ã—ãŸã€‚ <code>mysql_database.zoo</code> ãŒå­˜åœ¨ã—ãªã„ã‹ã‚‰ã§ã™ã€‚
ç©ºã§è‰¯ã„ã®ã§ãƒªã‚½ãƒ¼ã‚¹ã®è¨­å®šã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform import mysql_database.zoo zoo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.zoo: Importing from ID "zoo"...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.zoo: Import prepared!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Prepared mysql_database for import</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.zoo: Refreshing state... [id=zoo]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Import successful!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The resources that were imported are shown above. These resources are now in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">your Terraform state and will henceforth be managed by Terraform.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Import å‡ºæ¥ãŸã®ã§ zoo ã‚’ Terraform ã§ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
<code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Missing required argument</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on main.tf line 19, in resource "mysql_database" "zoo":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  19: resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The argument "name" is required, but no definition was found.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>zoo ã®è¨­å®šãŒç©ºã§ name ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã®ã§å¤±æ•—ã—ã¾ã—ãŸã€‚
ä¿®æ­£ã—ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.zoo will be updated in-place</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~ resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_character_set = "latin1" -&gt; "utf8"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_collation     = "latin1_swedish_ci" -&gt; "utf8_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id                    = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name                  = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 0 to add, 1 to change, 0 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¾ã å·®åˆ†ãŒå‡ºã¦ã—ã¾ã„ã¾ã—ãŸã€‚</p><p>Import ã¯ State ã«ã¯ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’åæ˜ ã—ã¦ãã‚Œã¾ã™ãŒã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯åæ˜ ã—ã¦ãã‚Œãªã„ã®ã§è‡ªåˆ†ã§åæ˜ ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ä¸€éƒ¨ã® Provider ã§ã¯ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«è‡ªå‹•ã§åæ˜ ã•ã›ã‚‹ãŸã‚ã®ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ„ãƒ¼ãƒ«ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ä¿®æ­£ã—ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = "latin1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "latin1_swedish_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¡äº‹å·®åˆ†ãŒãªããªã‚Šã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒªã‚½ãƒ¼ã‚¹ã®å‰Šé™¤">ãƒªã‚½ãƒ¼ã‚¹ã®å‰Šé™¤<a href="#ãƒªã‚½ãƒ¼ã‚¹ã®å‰Šé™¤" class="hash-link" aria-label="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã®å‰Šé™¤" title="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã®å‰Šé™¤">â€‹</a></h2><p>æ¬¡ã«ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¦ã¿ã¾ã™ã€‚</p><p><code>terraform destroy</code> ã‚‚ã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯è¨­å®šã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¾ã™ã€‚
ã¡ãªã¿ã« Terraform ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è¨˜è¿°è¨€èªã§ã‚ã‚‹ HCL ã§ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã¯ <code>#</code> ã§ã‚‚ <code>//</code> ã§ã‚‚ã©ã¡ã‚‰ã§ã‚‚è‰¯ã„ã§ã™ã€‚</p><p><a href="https://github.com/hashicorp/hcl#syntax" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/hcl#syntax</a></p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># resource "mysql_database" "bar" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   name                  = "bar"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   default_character_set = mysql_database.foo.default_character_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.bar will be destroyed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - resource "mysql_database" "bar" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_character_set = "utf8mb4" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_collation     = "utf8mb4_general_ci" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - id                    = "bar" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name                  = "bar" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 0 to add, 0 to change, 1 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform apply --auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo: Refreshing state... [id=foo2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Refreshing state... [id=bar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Destroying... [id=bar]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.bar: Destruction complete after 0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Apply complete! Resources: 0 added, 0 changed, 1 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show databases;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Database           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| information_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| foo2               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| mysql              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| performance_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| sys                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| zoo                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6 rows in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¢ºã‹ã«å‰Šé™¤ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-state-mv">terraform state mv<a href="#terraform-state-mv" class="hash-link" aria-label="Direct link to terraform state mv" title="Direct link to terraform state mv">â€‹</a></h2><p><a href="https://www.terraform.io/docs/commands/state/mv.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/state/mv.html</a></p><p>ã“ã“ã§ ãƒªã‚½ãƒ¼ã‚¹ã®åå‰ã‚’å¤‰ãˆã¦ <code>terraform plan</code> ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚åå‰ã‚’å¤‰ãˆãŸããªã‚‹ã“ã¨ã¯ã¾ãã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "foo2" { # foo ã‹ã‚‰ foo2 ã«å¤‰æ›´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "foo2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = var.default_character_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.foo will be destroyed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - resource "mysql_database" "foo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_character_set = "utf8mb4" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_collation     = "utf8mb4_general_ci" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - id                    = "foo2" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name                  = "foo2" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.foo2 will be created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + resource "mysql_database" "foo2" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + id                    = (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + name                  = "foo2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 1 to add, 0 to change, 1 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå‰Šé™¤ã•ã‚Œã¦æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã¦ã—ã¾ã„ãã†ã§ã™ã€‚
State ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‘ã‚¹ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform state mv mysql_database.foo mysql_database.foo2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Move "mysql_database.foo" to "mysql_database.foo2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully moved 1 object(s).</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å·®åˆ†ãŒãªããªã‚Šã¾ã—ãŸã€‚</p><p>ã“ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã£ã¦ State ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€ç‰¹ã«è¤‡æ•°äººã§ä½œæ¥­ã™ã‚‹å ´åˆã¯å®‰æ˜“ã«ãƒªã‚½ãƒ¼ã‚¹ãƒ‘ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-refresh">terraform refresh<a href="#terraform-refresh" class="hash-link" aria-label="Direct link to terraform refresh" title="Direct link to terraform refresh">â€‹</a></h2><p><a href="https://www.terraform.io/docs/commands/refresh.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/refresh.html</a></p><p><code>terraform refresh</code> ã¯å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®æƒ…å ±ã‚’å–å¾—ã—ã¦ State ã«åæ˜ ã•ã›ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚
Terraform ã‚’ä½¿ã‚ãšã«åŠ ãˆãŸå¤‰æ›´ã‚’ State ã«åæ˜ ã•ã›ã‚‹ã®ã«ä½¿ãˆã¾ã™ã€‚
Terraform ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ç®¡ç†ã—ã¦ã„ã‚‹ä»¥ä¸Šã€ Terraform ã‚’ä½¿ã‚ãšã«ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å¤‰æ›´ã™ã‚‹ã®ã¯æœ›ã¾ã—ããªã„ã§ã™ãŒã€å®Ÿéš›ã®ã¨ã“ã‚ã¯ã‚ˆãã‚ã‚‹è©±ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>Terraform ã‚’ä½¿ã‚ãšã« default_character_set ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; ALTER DATABASE zoo DEFAULT CHARACTER SET utf8mb4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK, 1 row affected (0.01 sec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; select * from INFORMATION_SCHEMA.SCHEMATA where SCHEMA_NAME='zoo';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| CATALOG_NAME | SCHEMA_NAME | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| def          | zoo         | utf8mb4                    | utf8mb4_general_ci     | NULL     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------+-------------+----------------------------+------------------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 row in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>default_character_set ã‚’å¤‰ãˆã‚‹ã¨è‡ªå‹•ã§ DEFAULT_COLLATION_NAME ã‚‚å¤‰ã‚ã‚Šã¾ã—ãŸã€‚
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚‚å¤‰æ›´ã‚’åæ˜ ã•ã›ã¾ã—ã‚‡ã†ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>-refresh=false</code> ã‚’ã¤ã‘ã¦ terraform plan ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan -refresh=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.zoo will be updated in-place</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~ resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_character_set = "latin1" -&gt; "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_collation     = "latin1_swedish_ci" -&gt; "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id                    = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name                  = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 0 to add, 1 to change, 0 to destroy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Resource targeting is in effect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You are creating a plan with the -target option, which means that the result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">of this plan may not represent all of the changes requested by the current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The -target option is not for routine use, and is provided only for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exceptional situations such as recovering from errors or mistakes, or when</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform specifically suggests to use it as part of an error message.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å·®åˆ†ãŒå‡ºã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã“ã‚Œã¯ State ãŒæ›´æ–°ã•ã‚Œã¦ã„ãªã„ã‹ã‚‰ã§ã™ã€‚
terraform.tfstate ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"mode"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"managed"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mysql_database"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"zoo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"provider"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"provider.mysql"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"instances"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"schema_version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"default_character_set"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"latin1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"default_collation"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"latin1_swedish_ci"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"zoo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"zoo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"private"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ=="</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>-refresh=false</code> ã‚’å–ã‚‹ã¨ä»Šåº¦ã¯å·®åˆ†ãŒãªããªã‚‹ã¯ãšã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚Œã¯ã€å®Ÿã¯ terraform plan ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ State ã®å†…å®¹ã¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¯”è¼ƒã™ã‚‹å‰ã«å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®æƒ…å ±ã‚’å–å¾—ã— State ã®å†…å®¹ã‚’ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã§æ›´æ–°ã—ãŸä¸Šã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨æ¯”è¼ƒã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚
ãŸã ã—ã€ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã§ã®æ›´æ–°ã§ã‚ã‚Šã€å®Ÿéš›ã® State ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã§ã™ã€‚</p><p>ä»Šã¾ã§ã‚¹ãƒ«ãƒ¼ã—ã¦ãã¾ã—ãŸãŒã€ãã®ã“ã¨ã¯ terraform plan ã®çµæœã§ã‚‚èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Refreshing Terraform state in-memory prior to plan...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The refreshed state will be used to calculate this plan, but will not be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persisted to local or remote state storage.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã§ã¯ãªã‚“ã§ <code>-refresh=false</code> ãŒå¿…è¦ã«ãªã‚‹ã‹ã¨ã„ã†ã¨ã€ç†ç”±ã®ä¸€ã¤ã¨ã—ã¦ <code>terraform plan</code> ãŒé€Ÿããªã‚‹ã“ã¨ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚
ã‚€ã—ã‚ <code>-refresh=false</code> ã‚’ã¤ã‘ãªã„ã¨ã€ç®¡ç†ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®æ•°ãŒå¢—ãˆã‚Œã°å¢—ãˆã‚‹ã»ã©æƒ…å ±ã‚’å–å¾—ã—ã¦ãã‚‹ã®ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã—ã€
å ´åˆã«ã‚ˆã£ã¦ã¯ API ã® rate limit ã«å¼•ã£ã‹ã‹ã‚‹ãªã‚“ã¦ã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ãªã®ã§æ™®æ®µ <code>-refresh=false</code> ã‚’ã¤ã‘ã¦ <code>terraform plan</code> ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã¨ Terraform ã‚’ä½¿ã‚ãšã«åŠ ãˆãŸã‚¤ãƒ³ãƒ•ãƒ©ã®ä¿®æ­£ã‚’ State ã«å–ã‚Šè¾¼ã‚€ãŸã‚ã« <code>terraform refresh</code> ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒå‡ºã¦ããŸã‚Šã—ã¾ã™ã€‚</p><p>State ã¯æ›´æ–°ã•ã‚Œã¦ã„ãªã„ã®ã§ <code>-refresh=false</code> ã¨ã™ã‚Œã°ç›¸å¤‰ã‚ã‚‰ãšå·®åˆ†ã¯å‡ºã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan -refresh=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.zoo will be updated in-place</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~ resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_character_set = "utf8mb4" -&gt; "latin1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ default_collation     = "utf8mb4_general_ci" -&gt; "latin1_swedish_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id                    = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name                  = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 0 to add, 1 to change, 0 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å·®åˆ†ãŒå‡ºã¾ã—ãŸã€‚ <code>terraform refresh</code> ã‚’å®Ÿè¡Œã™ã‚‹ã¨ State ãŒæ›´æ–°ã•ã‚Œã€å·®åˆ†ãŒãªããªã‚‹ã¯ãšã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform refresh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module.app.mysql_database.db: Refreshing state... [id=app]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo2: Refreshing state... [id=foo2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.zoo: Refreshing state... [id=zoo]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"mode"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"managed"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mysql_database"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"zoo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"provider"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"provider.mysql"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"instances"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"schema_version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"default_character_set"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"utf8mb4"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"default_collation"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"utf8mb4_general_ci"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"zoo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"zoo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"private"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ=="</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan -refresh=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="module">Module<a href="#module" class="hash-link" aria-label="Direct link to Module" title="Direct link to Module">â€‹</a></h2><p><a href="https://www.terraform.io/docs/configuration/modules.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/modules.html</a></p><p>ç°¡å˜ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vi database/database.tf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "db" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "app"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã§ã¯ Module ã‚’ä½¿ã£ã¦ database ã‚’ä½œã£ã¦ã¿ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module "app" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source = "./database"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Module not installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on main.tf line 25:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  25: module "app" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This module is not yet installed. Run "terraform init" to install all modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">required by this configuration.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤±æ•—ã—ã¾ã—ãŸã€‚ <code>terraform init</code> ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # module.app.mysql_database.db will be created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + resource "mysql_database" "db" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + id                    = (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + name                  = "app"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 1 to add, 0 to change, 0 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform apply --auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Apply complete! Resources: 1 added, 0 changed, 0 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="module-ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿">Module ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿<a href="#module-ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿" class="hash-link" aria-label="Direct link to Module ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿" title="Direct link to Module ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿">â€‹</a></h3><p>ã“ã‚Œã§ Module ã‚’ä½¿ã£ã¦ Database ã‚’ä½œã‚Œã¾ã—ãŸãŒã€ name ãŒ "app" å›ºå®šãªã®ã§ä½¿ã„ã¥ã‚‰ã„ã§ã™ã­ã€‚åå‰ã‚’å¤‰ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚</p><p>database/database.tf</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "db" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = var.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>database/variables.tf</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable "name" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Missing required argument</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on main.tf line 25, in module "app":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  25: module "app" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The argument "name" is required, but no definition was found.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã—ã¦ã„ãªã„ã®ã§å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚</p><p><a href="https://www.terraform.io/docs/configuration/variables.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/variables.html</a></p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable "name" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type    = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default = "app"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¦ name ã‚’å¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module "app" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source = "./database"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name   = "app2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # module.app.mysql_database.db must be replaced</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-/+ resource "mysql_database" "db" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ id                    = "app" -&gt; (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ~ name                  = "app" -&gt; "app2" # forces replacement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã›ã¾ã—ãŸã€‚ã‚‚ã¨ã«æˆ»ã—ã¦ãŠãã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module "app" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source = "./database"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name   = "app"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="module-output">Module Output<a href="#module-output" class="hash-link" aria-label="Direct link to Module Output" title="Direct link to Module Output">â€‹</a></h3><p><a href="https://www.terraform.io/docs/configuration/outputs.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/outputs.html</a></p><p>mysql_database.bar ã‹ã‚‰ mysql_database.foo ã®å±æ€§ã‚’å‚ç…§ã—ãŸã‚ˆã†ã«ã€ <code>module.app</code> ã§ä½œæˆã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å±æ€§ã‚’å‚ç…§ã™ã‚‹ã«ã¯ã©ã†ã—ãŸã‚‰ã‚ˆã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ
ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã§ã‚ã‚Œã°æ™®é€šã«å‚ç…§ã§ãã¾ã™ãŒã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å¤–ã‹ã‚‰å‚ç…§ã™ã‚‹ã«ã¯ã€ Module å´ã§æ˜ç¤ºçš„ã«å…¬é–‹ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¸ä¾¿ãªå´é¢ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã‚«ãƒ—ã‚»ãƒ«åŒ–ã¨ã‚‚è¨€ãˆã¾ã™ã­ã€‚</p><p>default_character_set ã‚’å…¬é–‹ã—ã¾ã—ã‚‡ã†ã€‚</p><p>database/output.tf</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">output "default_character_set" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value = mysql_database.db.default_character_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãã—ã¦å‚ç…§ã—ã¾ã™ã€‚</p><p>main.tf</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = module.app.default_character_set  # å‚ç…§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No changes. Infrastructure is up-to-date.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-destroy">terraform destroy<a href="#terraform-destroy" class="hash-link" aria-label="Direct link to terraform destroy" title="Direct link to terraform destroy">â€‹</a></h2><p><a href="https://www.terraform.io/docs/commands/destroy.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/destroy.html</a></p><p>ã“ã“ã¾ã§ãŠç–²ã‚Œã•ã¾ã§ã—ãŸã€‚
ãƒãƒ³ã‚ºã‚ªãƒ³ã®æœ€å¾Œã«ã“ã‚Œã¾ã§ä½œã£ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¦ã—ã¾ã„ã¾ã—ã‚‡ã†ã€‚
<code>-target</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒªã‚½ãƒ¼ã‚¹ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ç‰¹å®šã®ãƒªã‚½ãƒ¼ã‚¹ã ã‘å‰Šé™¤ã§ãã¾ã™ã€‚
<code>-target</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯è¤‡æ•°å›æŒ‡å®šã™ã‚‹ã“ã¨ã§è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’æŒ‡å®šã§ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform destroy -target=module.app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.zoo will be destroyed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_character_set = "utf8mb4" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_collation     = "utf8mb4_general_ci" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - id                    = "zoo" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name                  = "zoo" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # module.app.mysql_database.db will be destroyed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - resource "mysql_database" "db" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_character_set = "utf8mb4" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_collation     = "utf8mb4_general_ci" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - id                    = "app" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name                  = "app" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 0 to add, 0 to change, 2 to destroy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Do you really want to destroy all resources?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Terraform will destroy all your managed infrastructure, as shown above.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  There is no undo. Only 'yes' will be accepted to confirm.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value: yes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>module.app ã‚’æ¶ˆãã†ã¨ã—ãŸã‚‰ã€ mysql_database.zoo ã‚‚å‰Šé™¤ã•ã‚Œãã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã¯ mysql_database.zoo ãŒ module.app ã®å±æ€§ã«ä¾å­˜ã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                  = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_character_set = module.app.default_character_set  # module.app ã«ä¾å­˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>-target</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ <code>mysql_database.zoo</code> ã‚’æŒ‡å®šã™ã‚Œã°ãã‚Œã ã‘å‰Šé™¤ã•ã‚Œã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform destroy -target=mysql_database.zoo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.zoo will be destroyed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_character_set = "utf8mb4" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default_collation     = "utf8mb4_general_ci" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - id                    = "zoo" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name                  = "zoo" -&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 0 to add, 0 to change, 1 to destroy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Do you really want to destroy all resources?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Terraform will destroy all your managed infrastructure, as shown above.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  There is no undo. Only 'yes' will be accepted to confirm.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¢ºèªã•ã‚Œã‚‹ã®ã§ã€ yes ã¨å…¥åŠ›ã—ã¦å‰Šé™¤ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.zoo: Destroying... [id=zoo]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.zoo: Destruction complete after 0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Applied changes may be incomplete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The plan was created with the -target option in effect, so some changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">requested in the configuration may have been ignored and the output values may</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">not be fully updated. Run the following command to verify that no other</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changes are pending:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Note that the -target option is not suitable for routine use, and is provided</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">only for exceptional situations such as recovering from errors or mistakes, or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">when Terraform specifically suggests to use it as part of an error message.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Destroy complete! Resources: 1 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show databases;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Database           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| information_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| app                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| foo2               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| mysql              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| performance_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| sys                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6 rows in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¢ºã‹ã«æ¶ˆãˆã¦ã„ã¾ã™ã€‚
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã¯æ¶ˆãˆã¦ã„ãªã„ã®ã§ <code>terraform plan</code> ã‚’å®Ÿè¡Œã™ã‚‹ã¨ Create ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform will perform the following actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # mysql_database.zoo will be created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + resource "mysql_database" "zoo" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_character_set = "utf8mb4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + default_collation     = "utf8mb4_general_ci"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + id                    = (known after apply)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      + name                  = "zoo"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Plan: 1 to add, 0 to change, 0 to destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãƒªã‚½ãƒ¼ã‚¹ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ãªã„ã¨å…¨ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform destroy --auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module.app.mysql_database.db: Refreshing state... [id=app]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo2: Refreshing state... [id=foo2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo2: Destroying... [id=foo2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module.app.mysql_database.db: Destroying... [id=app]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module.app.mysql_database.db: Destruction complete after 0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_database.foo2: Destruction complete after 0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Destroy complete! Resources: 2 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; show databases;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Database           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| information_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| mysql              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| performance_schema |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| sys                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 rows in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¨éƒ¨æ¶ˆãˆã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>terraform</category>
        </item>
        <item>
            <title><![CDATA[Terraform å…¥é–€]]></title>
            <link>https://techblog.szksh.cloud/terraform-getting-started</link>
            <guid>https://techblog.szksh.cloud/terraform-getting-started</guid>
            <pubDate>Thu, 16 Jan 2020 00:25:05 GMT</pubDate>
            <description><![CDATA[å‚è€ƒ]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚è€ƒ">å‚è€ƒ<a href="#å‚è€ƒ" class="hash-link" aria-label="Direct link to å‚è€ƒ" title="Direct link to å‚è€ƒ">â€‹</a></h2><ul><li><a href="https://qiita.com/Chanmoro/items/55bf0da3aaf37dc26f73" target="_blank" rel="noopener noreferrer">10åˆ†ã§ç†è§£ã™ã‚‹Terraform | Qiita</a></li><li><a href="https://qiita.com/fukubaka0825/items/68506b1e6644404d6cc0" target="_blank" rel="noopener noreferrer">Terraformå…¥é–€è³‡æ–™(v0.12.0å¯¾å¿œ) ~åŸºæœ¬çŸ¥è­˜ã‹ã‚‰è¨­è¨ˆã‚„é‹ç”¨ã€çŸ¥ã£ã¦ãŠãã¹ãtipsã¾ã§~ | Qiita</a></li><li><a href="https://dev.classmethod.jp/cloud/terraform-getting-started-with-aws/" target="_blank" rel="noopener noreferrer">AWSã§Terraformã«å…¥é–€ | Developers.io</a></li><li><a href="https://qiita.com/minamijoyo/items/1f57c62bed781ab8f4d7" target="_blank" rel="noopener noreferrer">Terraformè·äººå…¥é–€: æ—¥ã€…ã®é‹ç”¨ã§å­¦ã‚“ã çŸ¥è¦‹ã‚’æ·¡ã€…ã¨ã¾ã¨ã‚ã‚‹ | Qiita</a></li></ul><p>æ‰‹ã‚’å‹•ã‹ã—ãŸã„æ–¹ã¯ <a href="https://techblog.szksh.cloud/terraform-hands-on-with-mysql-provider/" target="_blank" rel="noopener noreferrer">Terraform ãƒãƒ³ã‚ºã‚ªãƒ³ with MySQL Provider</a> ã‚‚å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰æ">å‰æ<a href="#å‰æ" class="hash-link" aria-label="Direct link to å‰æ" title="Direct link to å‰æ">â€‹</a></h2><ul><li>åŸ·ç­†æ™‚ç‚¹ (2020/01/05) ã§ Terraform ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ v0.12.18 ã§ã™</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-ã¨ã¯">Terraform ã¨ã¯<a href="#terraform-ã¨ã¯" class="hash-link" aria-label="Direct link to Terraform ã¨ã¯" title="Direct link to Terraform ã¨ã¯">â€‹</a></h2><p><a href="https://www.terraform.io/" target="_blank" rel="noopener noreferrer">Terraform</a> ã¯ Infrastructure as Code ã‚’å®Ÿç¾ã™ã‚‹æ±ç”¨çš„ãªCLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ã‚¤ãƒ³ãƒ•ãƒ©ã®çŠ¶æ…‹ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å®šç¾©ã—ã€ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€
å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®çŠ¶æ…‹ã¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’æ¤œçŸ¥ã—ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã•ã‚ŒãŸã¨ãŠã‚Šã«ãªã‚‹ã‚ˆã†ã«ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å¤‰æ›´(CRUD)ã—ã¾ã™ã€‚</p><p><a href="https://www.hashicorp.com/" target="_blank" rel="noopener noreferrer">Hashicorp</a> ã¨ã„ã†ä¼æ¥­ãŒãƒ›ã‚¹ãƒˆã—ã¦ã„ã‚‹ OSS ã«ãªã‚Šã¾ã™ã€‚
Go ã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚ <a href="https://github.com/hashicorp/terraform" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">Terraform ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«<a href="#terraform-ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="hash-link" aria-label="Direct link to Terraform ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" title="Direct link to Terraform ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">â€‹</a></h2><p>Terraform ã¯ Go è£½ãªã®ã§ 1 ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã ã‘ã§ã™ã€‚</p><p><a href="https://www.terraform.io/downloads.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/downloads.html</a></p><p>tfenv ã‚’ä½¿ã†ã¨ç®¡ç†ãŒæ¥½ã§ã™ã€‚</p><p><a href="https://github.com/tfutils/tfenv" target="_blank" rel="noopener noreferrer">https://github.com/tfutils/tfenv</a></p><p>tfenv ã¯ Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
pyenv ã‚„ rbenv ã® Terraform ç‰ˆã¿ãŸã„ãªã‚‚ã®ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç”¨èªé›†">ç”¨èªé›†<a href="#ç”¨èªé›†" class="hash-link" aria-label="Direct link to ç”¨èªé›†" title="Direct link to ç”¨èªé›†">â€‹</a></h2><p><a href="https://www.terraform.io/docs/glossary.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/glossary.html</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="provider">Provider<a href="#provider" class="hash-link" aria-label="Direct link to Provider" title="Direct link to Provider">â€‹</a></h2><p><a href="https://www.terraform.io/docs/glossary.html#terraform-provider" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/glossary.html#terraform-provider</a></p><p>Terraform ã‚’ã€Œæ±ç”¨çš„ãªã€ãƒ„ãƒ¼ãƒ«ã¨ã„ã„ã¾ã—ãŸãŒã€ã“ã“ã§ã„ã†ã€Œæ±ç”¨çš„ã€ã¨ã¯ã€ AWS ãªã©ã®ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹å°‚ç”¨ã§ã¯ãªãã€æ§˜ã€…ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’åŒã˜ã‚ˆã†ã«æ‰±ã†ã“ã¨ãŒå‡ºæ¥ã‚‹ã¨ã„ã†æ„å‘³ã§ã™ã€‚
å®Ÿéš›ã« AWS ãªã©ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚’æ“ä½œã™ã‚‹å ´åˆã«ã¯ã‚¤ãƒ³ãƒ•ãƒ©ãŒæä¾›ã™ã‚‹ API ã‚’åˆ©ç”¨ã™ã‚‹ã‚ã‘ã§ã™ãŒã€
ã‚µãƒ¼ãƒ“ã‚¹å›ºæœ‰ã® API å‘¼ã³å‡ºã—ãªã©ã®å‡¦ç†ã‚’ <code>Provider</code> ã¨ã„ã†å½¢ã§ Terraform æœ¬ä½“ã‹ã‚‰åˆ‡ã‚Šå‡ºã™ã“ã¨ã§ã“ã®æ±ç”¨æ€§ã¯å®Ÿç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚
Provider ã¯ AWS ã‚„ GCP ãªã©ã® Hashicorp å…¬å¼ã®ã‚‚ã®ã‚‚ã‚ã‚Œã°ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£è£½ã®ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ã—ã€è‡ªåˆ†ã§ä½œã£ã¦ã—ã¾ã†ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚</p><ul><li>å…¬å¼ Provider<ul><li><a href="https://www.terraform.io/docs/providers/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/providers/index.html</a></li><li><a href="https://github.com/terraform-providers" target="_blank" rel="noopener noreferrer">https://github.com/terraform-providers</a></li></ul></li><li>ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ Provider<ul><li><a href="https://www.terraform.io/docs/providers/type/community-index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/providers/type/community-index.html</a></li><li>[å®£ä¼][Graylog]<!-- -->(<a href="https://www.graylog.org/products/open-source" target="_blank" rel="noopener noreferrer">https://www.graylog.org/products/open-source</a>) ã® Provider <a href="https://github.com/suzuki-shunsuke/go-graylog" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-graylog</a></li></ul></li></ul><p>å°‘ã—çªã£è¾¼ã‚“ã è©±ã‚’ã™ã‚‹ã¨ã€ Terraform æœ¬ä½“åŒæ§˜ Provider ã‚‚å®Ÿæ…‹ã¯ Golang ã§æ›¸ã‹ã‚ŒãŸ1ãƒã‚¤ãƒŠãƒªã§ã‚ã‚Šã€æœ¬ä½“ã‹ã‚‰ Provider ã‚’ RPC ã«ã‚ˆã£ã¦å‘¼ã³å‡ºã™ã¨ã„ã†å½¢ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿæ§‹ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
<a href="https://github.com/hashicorp/go-plugin" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/go-plugin</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä½™è«‡-provider-ã®è‡ªä½œ">ä½™è«‡: Provider ã®è‡ªä½œ<a href="#ä½™è«‡-provider-ã®è‡ªä½œ" class="hash-link" aria-label="Direct link to ä½™è«‡: Provider ã®è‡ªä½œ" title="Direct link to ä½™è«‡: Provider ã®è‡ªä½œ">â€‹</a></h3><p>Provider ã®è‡ªä½œã«èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ <a href="https://www.terraform.io/docs/extend/writing-custom-providers.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/extend/writing-custom-providers.html</a> ã‚’èª­ã‚€ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚
ãŸã ã—ã€ãã‚Œã‚’èª­ã‚ã°å…¨ã¦ã‚ã‹ã‚‹ã¨ã„ã†ã“ã¨ã¯ãªãã€ä½œã‚ŠãªãŒã‚‰ Terraform æœ¬ä½“ã‚„ AWSãªã©ã®å…¬å¼ã® Provider ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚„ GoDoc ã‚’èª­ã¿ã¤ã¤è©¦è¡ŒéŒ¯èª¤ã™ã‚‹ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><ul><li><a href="https://github.com/terraform-providers/terraform-provider-aws/tree/master/aws" target="_blank" rel="noopener noreferrer">https://github.com/terraform-providers/terraform-provider-aws/tree/master/aws</a></li><li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/schema#Schema" target="_blank" rel="noopener noreferrer">https://godoc.org/github.com/hashicorp/terraform/helper/schema#Schema</a></li><li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/schema#ResourceData" target="_blank" rel="noopener noreferrer">https://godoc.org/github.com/hashicorp/terraform/helper/schema#ResourceData</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒªã‚½ãƒ¼ã‚¹">ãƒªã‚½ãƒ¼ã‚¹<a href="#ãƒªã‚½ãƒ¼ã‚¹" class="hash-link" aria-label="Direct link to ãƒªã‚½ãƒ¼ã‚¹" title="Direct link to ãƒªã‚½ãƒ¼ã‚¹">â€‹</a></h2><p><a href="https://www.terraform.io/docs/glossary.html#resource" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/glossary.html#resource</a></p><p>Terraform ã§ã¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚’æ§‹æˆã™ã‚‹æœ€å°ã®æ§‹æˆè¦ç´ ã‚’ <code>ãƒªã‚½ãƒ¼ã‚¹</code> ã¨å‘¼ã³ã¾ã™ã€‚
ä¾‹ãˆã°ã‚µãƒ¼ãƒãŒ 3 å°ã‚ã‚Œã°ãã‚Œãã‚ŒãŒåˆ¥ã€…ã®ãƒªã‚½ãƒ¼ã‚¹ã¨è¨€ãˆã¾ã™ã€‚
ãƒªã‚½ãƒ¼ã‚¹ã”ã¨ã«è¨­å®šã‚’è¨˜è¿°ã—ã¾ã™ã€‚
<code>terraform apply</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨å„ãƒªã‚½ãƒ¼ã‚¹ã«ã¤ã„ã¦è¨­å®šã¨å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®çŠ¶æ…‹ã®å·®åˆ†ãŒæ¤œçŸ¥ã•ã‚Œã€ãƒªã‚½ãƒ¼ã‚¹ã”ã¨ã« CRUD å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«">è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«<a href="#è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«" class="hash-link" aria-label="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«" title="Direct link to è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«">â€‹</a></h2><ul><li><a href="https://www.terraform.io/docs/configuration/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/index.html</a></li><li><a href="https://github.com/hashicorp/hcl/blob/hcl2/hclsyntax/spec.md" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/hcl/blob/hcl2/hclsyntax/spec.md</a></li></ul><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ <a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">HCL</a> ã¨ã„ã†è¨€èªã§è¨˜è¿°ã—ã¾ã™ã€‚
HCL ã¯ Hashicorp Configuration Language ã®ç•¥ã§ã€ Hashicorp ãŒé–‹ç™ºã—ã¦ã„ã‚‹ JSON ã‚„ YAML ã®ã‚ˆã†ãªè¨­å®šã‚’è¨˜è¿°ã™ã‚‹è¨€èªã§ã™ã€‚</p><p>Terraform v0.12 ã§ã¯ HCL ã® v2 ã‚’ä½¿ã„ã¾ã™ã€‚ v1 ã¯å¤ã„ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ã¯åŸºæœ¬ <code>.tf</code> ã§ã™ã€‚
æ¬¡ã®ã‚ˆã†ãªå½¢ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># resource "ãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡" "ãƒªã‚½ãƒ¼ã‚¹å"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource "aws_instance" "example" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # å±æ€§å = å±æ€§å€¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ami           = "ami-2757f631"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  instance_type = "t2.micro"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½™è«‡ã§ã™ãŒã€ <a href="https://github.github.com/gfm/" target="_blank" rel="noopener noreferrer">GFM (GitHub Flavored Markdown)</a> ã§ã¯ <code>hcl</code> ã§ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒã§ãã¾ã™ã€‚</p><p>å„ãƒªã‚½ãƒ¼ã‚¹å®šç¾©ã¯ãƒ‘ã‚¹ã«ã‚ˆã£ã¦è­˜åˆ¥ã•ã‚Œã¾ã™ã€‚
ä¸Šè¨˜ã®ã‚ˆã†ãªã‚·ãƒ³ãƒ—ãƒ«ãªãƒªã‚½ãƒ¼ã‚¹ã®å®šç¾©ã®å ´åˆ <code>ãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡.ãƒªã‚½ãƒ¼ã‚¹å</code> (<code>aws_instance.example</code>) ã§ã™ã€‚ãƒ‘ã‚¹ã¯ä¸€æ„ã§ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚</p><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯åŒã˜1ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ãã¾ã™ã€‚
<code>terraform plan</code> ãªã©ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã—ã‹è¦‹ã¾ã›ã‚“ã€‚</p><p>ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã¯ãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚
å„Provider ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¾ã—ã‚‡ã†ã€‚</p><p>ä¾‹ãˆã° AWS ã® EC2 instance ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã“ã¡ã‚‰ã§ã™ã€‚ <a href="https://www.terraform.io/docs/providers/aws/r/instance.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/providers/aws/r/instance.html</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§">ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§<a href="#ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§" class="hash-link" aria-label="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§" title="Direct link to ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã®å‚ç…§">â€‹</a></h2><p>ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®è¨­å®šã§ä»–ã®ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§å€¤ã‚’å‚ç…§ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><p>ã‚µãƒ³ãƒ—ãƒ«ã‚’ç¤ºã—ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "aws_iam_instance_profile" "example" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ãƒªã‚½ãƒ¼ã‚¹ aws_iam_role.example ã®å±æ€§ name ã®å€¤ã‚’å‚ç…§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  role = aws_iam_role.example.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state">State<a href="#state" class="hash-link" aria-label="Direct link to State" title="Direct link to State">â€‹</a></h2><p><a href="https://www.terraform.io/docs/state/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/state/index.html</a></p><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®å·®åˆ†ã‚’æ¤œçŸ¥ã™ã‚‹ã«ã¯ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªã‚½ãƒ¼ã‚¹å®šç¾©ã¨å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¸Šã§ã¯ãƒªã‚½ãƒ¼ã‚¹ã¯ãƒ‘ã‚¹ã«ã‚ˆã£ã¦è­˜åˆ¥ã•ã‚Œã¾ã™ãŒã€å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒªã‚½ãƒ¼ã‚¹ã¯ã‚¤ãƒ³ãƒ•ãƒ©å›ºæœ‰ã® ID ãªã©ã§è­˜åˆ¥ã•ã‚Œã¾ã™ã€‚
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¸Šã®ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‘ã‚¹ã¨ã€å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒªã‚½ãƒ¼ã‚¹ã® ID ã¨ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ä¿å­˜ã™ã‚‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒ <code>State</code> ã«ãªã‚Šã¾ã™ã€‚
ãŸã ã— State ã®å½¹å‰²ã¯ãƒãƒƒãƒ”ãƒ³ã‚°ã ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è©³ç´°ã¯ <a href="https://www.terraform.io/docs/state/purpose.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/state/purpose.html</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
ã€Œã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€ã¨ã„ã„ã¾ã—ãŸãŒãã®å®Ÿæ…‹ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãŸã ã® JSON ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ <code>terraform apply</code> ãªã©ã‚’å®Ÿè¡Œã™ã‚‹ã¨å‹æ‰‹ã« <code>terraform.tfstate</code> ã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä½œæˆã€æ›´æ–°ã•ã‚Œã¾ã™ã€‚
State ã®ä¿å­˜å…ˆã¯ S3 ã‚’å«ã‚è‰²ã€…ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p><a href="https://www.terraform.io/docs/backends/types/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/backends/types/index.html</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç™ºå±•-state-ã‚’æŒãŸãªã„ãƒ„ãƒ¼ãƒ«ã¨ã®é•ã„">ç™ºå±•: State ã‚’æŒãŸãªã„ãƒ„ãƒ¼ãƒ«ã¨ã®é•ã„<a href="#ç™ºå±•-state-ã‚’æŒãŸãªã„ãƒ„ãƒ¼ãƒ«ã¨ã®é•ã„" class="hash-link" aria-label="Direct link to ç™ºå±•: State ã‚’æŒãŸãªã„ãƒ„ãƒ¼ãƒ«ã¨ã®é•ã„" title="Direct link to ç™ºå±•: State ã‚’æŒãŸãªã„ãƒ„ãƒ¼ãƒ«ã¨ã®é•ã„">â€‹</a></h3><p>Terraform ã®ä»–ã«ã‚‚ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ç®¡ç†ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã™ãŒã€ãã®ä¸­ã«ã¯ State ã®ã‚ˆã†ãªãƒãƒƒãƒ”ãƒ³ã‚°ã‚’æŒãŸãªã„ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ã€‚
ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’æŒãŸãªã„ãƒ„ãƒ¼ãƒ«ã ã¨ã€ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã‚ãšã«ä½œã£ãŸãƒªã‚½ãƒ¼ã‚¹ãŒãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦å‰Šé™¤ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ä¸€æ–¹ã€ Terraform ã§ã¯ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã‚ãšã«ä½œã£ãŸãƒªã‚½ãƒ¼ã‚¹ã¯å¤‰æ›´ã®å¯¾è±¡ã«ãªã‚Šã¾ã›ã‚“ã€‚
å¤‰æ›´ã®å¯¾è±¡ã«ã—ãŸã„å ´åˆã¯ãã®ãƒªã‚½ãƒ¼ã‚¹ã®æƒ…å ±ã‚’ State ã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãŸã ã® JSON ãƒ•ã‚¡ã‚¤ãƒ«ãªã®ã§æ‰‹ã§ä¿®æ­£ã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ãŒã€ <a href="https://www.terraform.io/docs/commands/import.html" target="_blank" rel="noopener noreferrer">terraform import</a> ã¨ã„ã†å°‚ç”¨ã®ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹ã®ã§ãã‚Œã‚’ä½¿ã†ã»ã†ãŒå®‰å…¨ã§ã™ã€‚</p><p><a href="https://www.terraform.io/docs/import/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/import/index.html</a></p><p>é€†ã«ã€ã‚ã¾ã‚Šãªã„ã‚±ãƒ¼ã‚¹ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã«ã¤ã„ã¦ Terraform ã§ç®¡ç†ã™ã‚‹ã®ã‚’ã‚„ã‚ãŸã„å ´åˆã€
ãã®ãƒªã‚½ãƒ¼ã‚¹ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã§ãªã State ã‹ã‚‰ã‚‚å‰Šé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
å˜ç´”ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å‰Šé™¤ã™ã‚‹ã ã‘ã ã¨ã€ Terraform ã«ã‚ˆã£ã¦å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒªã‚½ãƒ¼ã‚¹ãŒå‰Šé™¤ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚
State ã‹ã‚‰å‰Šé™¤ã™ã‚‹ã«ã¯ <a href="https://www.terraform.io/docs/commands/state/rm.html" target="_blank" rel="noopener noreferrer">terraform state rm</a> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚</p><p>ãã®ä»– State ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãŒè‰²ã€…ã‚ã‚‹ã®ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><p><a href="https://www.terraform.io/docs/commands/state/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/state/index.html</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç™ºå±•-remote-state-ã‚’ä½¿ã†ã‹å¦ã‹">ç™ºå±•: Remote State ã‚’ä½¿ã†ã‹å¦ã‹<a href="#ç™ºå±•-remote-state-ã‚’ä½¿ã†ã‹å¦ã‹" class="hash-link" aria-label="Direct link to ç™ºå±•: Remote State ã‚’ä½¿ã†ã‹å¦ã‹" title="Direct link to ç™ºå±•: Remote State ã‚’ä½¿ã†ã‹å¦ã‹">â€‹</a></h3><p>Terraform ã‚’ CI/CD ã«ã‚ˆã£ã¦å®Ÿè¡Œã™ã‚‹å‰æã§ã™ã€‚
åŸºæœ¬çš„ã« remote state ã‚’ä½¿ã†ã¹ãã ã¨æ€ã„ã¾ã™ã€‚</p><p>remote state ã‚’ä½¿ã‚ãªã„å ´åˆã€ <code>terraform.tfstate</code> ã‚’ Git ã§ç®¡ç†ã™ã‚‹ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚
ãã®å ´åˆã€ feature branch ã® terraform.tfstate ã¨å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®çŠ¶æ…‹ã®ä¹–é›¢ãŒèµ·ã“ã‚Šãˆã¾ã™ã€‚
ãƒãƒ¼ãƒ ã®è¦æ¨¡ãŒå¤§ããè¤‡æ•°ã®é–‹ç™ºãŒä¸¦è¡Œã—ã¦è¡Œã‚ã‚Œã‚Œã°è¡Œã‚ã‚Œã‚‹ã»ã©ã€ä¹–é›¢ã®å¼Šå®³ãŒå¤§ãããªã‚Šã€ remote state ã‚’ä½¿ã£ãŸã»ã†ãŒè‰¯ã„ã¨ã„ã†ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ã¾ãŸã€ CI/CD ã§æ›´æ–°ã•ã‚ŒãŸ <code>terraform.tfstate</code> ã‚’ commit &amp; push ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
<code>terraform apply</code> ã§å¤±æ•—ã—ãŸå ´åˆã€ä¸€éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ã®æ›´æ–°ã«ã¯æˆåŠŸã—ã€State ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
<code>terraform apply</code> ãŒå¤±æ•—ã—ã¦ã‚‚å³åº§ã«çµ‚äº†ã•ã›ãšã« <code>terraform.tfstate</code> ã‚’ commit &amp; push ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã¯ CI/CD ã®ã‚³ãƒ¼ãƒ‰ã§æ°—ã‚’ã¤ã‘ã‚Œã°å•é¡Œãªã„ã®ã§ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¨è¨€ã†ã»ã©ã§ã¯ãªã„ã§ã™ãŒã€æ˜”è‡ªåˆ†ã¯ä½•åº¦ã‹ commit &amp; push ã—æã­ã¦é¢å€’ãã•ã„ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¤‰æ•°">å¤‰æ•°<a href="#å¤‰æ•°" class="hash-link" aria-label="Direct link to å¤‰æ•°" title="Direct link to å¤‰æ•°">â€‹</a></h2><ul><li><a href="https://www.terraform.io/docs/glossary.html#variables" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/glossary.html#variables</a></li><li><a href="https://learn.hashicorp.com/terraform/getting-started/variables.html" target="_blank" rel="noopener noreferrer">https://learn.hashicorp.com/terraform/getting-started/variables.html</a></li></ul><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯å¤‰æ•°ãŒä½¿ãˆã¾ã™ã€‚
å¤‰æ•°ã‚’ä½¿ã†ã«ã¯å®£è¨€ãŒå¿…è¦ã§ã™ã€‚å®£è¨€ã§ã¯å‹ãªã©ã‚‚æŒ‡å®šã§ãã¾ã™ã€‚</p><p><a href="https://www.terraform.io/docs/configuration/types.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/types.html</a></p><p>å¤‰æ•°ã®å®£è¨€ã¯ã¤ãã®ã‚ˆã†ã«ã—ã¾ã™ã€‚ <code>.tf</code> ã®ã©ã“ã«æ›¸ã„ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># variable "å¤‰æ•°å"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable "region" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type    = "string"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default = "us-east-1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤‰æ•°ã®å€¤ã®è¨­å®šã¯æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚ <code>terraform.tfvars</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«åã«æ›¸ã„ã¦ãŠãã¨ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ami = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "us-east-1" = "ami-abc123"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "us-west-2" = "ami-def456"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§æ¸¡ã™ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="provider-ã®è¨­å®š">Provider ã®è¨­å®š<a href="#provider-ã®è¨­å®š" class="hash-link" aria-label="Direct link to Provider ã®è¨­å®š" title="Direct link to Provider ã®è¨­å®š">â€‹</a></h2><p>Provider ã‚’ä½¿ã†ã«ã¯è¨­å®šãŒå¿…è¦ã§ã™ã€‚
è¨­å®šã®å±æ€§ã¯ Provider ã«ã‚ˆã£ã¦é•ã„ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># provider "Providerå"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">provider "google" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  project = "acme-app"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  region  = "us-central1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="module">Module<a href="#module" class="hash-link" aria-label="Direct link to Module" title="Direct link to Module">â€‹</a></h2><p><a href="https://www.terraform.io/docs/modules/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/modules/index.html</a>
<a href="https://www.terraform.io/docs/configuration/modules.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/modules.html</a></p><p>è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ã®è¨­å®šã‚’ã¾ã¨ã‚ã¦å†åˆ©ç”¨å¯èƒ½ãªå½¢ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ã™ã‚‹ä»•çµ„ã¿ã¨ã—ã¦ Module ãŒã‚ã‚Šã¾ã™ã€‚
ãƒªã‚½ãƒ¼ã‚¹ãŒ1ã¤ã ã‘ã§ã‚‚ã€ãƒãƒ¼ãƒ å›ºæœ‰ã®è¨­å®šã‚’ Module ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ã—ã¦è¨­å®šã—ãŸã‚Šã€ãƒãƒ¼ãƒ ã§ã¯ä½¿ã‚ãªã„ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’éš è”½ã—ãŸã‚Šç”¨é€”ã¯ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>Module ã®ä½œã‚Šæ–¹ã¯é€šå¸¸ã® Terraform ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è¨˜è¿°ã¨åŒæ§˜ã€ 1ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨˜è¿°ã™ã‚‹ã ã‘ã§ã™ã€‚</p><p>Module ã¯æ¬¡ã®ã‚ˆã†ã«ä½¿ã„ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># module "åå‰"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module "servers" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ãƒ‘ã‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source = "./app-cluster"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  servers = 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Module ã®ãƒ‘ã‚¹ã¯ <code>module.ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å</code> (module.servers) ã«ãªã‚Šã¾ã™ã€‚</p><p>Module ã® <code>source</code> ã¨ã—ã¦ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ãƒ‘ã‚¹ä»¥å¤–ã«ã‚‚æ§˜ã€…ãªã‚‚ã®ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://www.terraform.io/docs/modules/sources.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/modules/sources.html</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®-module">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã® Module<a href="#ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®-module" class="hash-link" aria-label="Direct link to ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã® Module" title="Direct link to ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã® Module">â€‹</a></h3><p>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã‚ˆã£ã¦æ§˜ã€…ãª Module ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li><a href="https://registry.terraform.io/" target="_blank" rel="noopener noreferrer">https://registry.terraform.io/</a></li><li><a href="https://registry.terraform.io/modules/terraform-aws-modules" target="_blank" rel="noopener noreferrer">https://registry.terraform.io/modules/terraform-aws-modules</a></li><li><a href="https://github.com/terraform-community-modules" target="_blank" rel="noopener noreferrer">https://github.com/terraform-community-modules</a></li><li><a href="https://github.com/terraform-aws-modules" target="_blank" rel="noopener noreferrer">https://github.com/terraform-aws-modules</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="module-åŒ–ã™ã‚‹ã¹ãã‹å¦ã‹">Module åŒ–ã™ã‚‹ã¹ãã‹å¦ã‹<a href="#module-åŒ–ã™ã‚‹ã¹ãã‹å¦ã‹" class="hash-link" aria-label="Direct link to Module åŒ–ã™ã‚‹ã¹ãã‹å¦ã‹" title="Direct link to Module åŒ–ã™ã‚‹ã¹ãã‹å¦ã‹">â€‹</a></h3><p>Go ã‚„ Python ãªã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«(ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç­‰å‘¼ã³æ–¹ã¯æ§˜ã€…ã§ã™ãŒ)åŒ–ã¨æ¯”ã¹ã€
Terraform ã® Module åŒ–ã¯æ…é‡ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
ç†ç”±ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ãŒã€</p><ul><li>Module ã‚’å¤‰æ›´ã™ã‚‹ã¨ State ã®å¤‰æ›´ã‚‚å¿…è¦ã«ãªã‚‹å ´åˆã‚‚ã‚ã‚‹</li><li>Terraform ã®è¨­å®šã¯ä¸­ã€…ãƒ‘ãƒ¯ãƒ•ãƒ«ã ã¨ã¯æ€ã„ã¾ã™ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«æ¯”ã¹ã‚‹ã¨æŸ”è»Ÿæ€§ãŒè¶³ã‚‰ãšã€å¤‰æ›´ã«å¼±ãã€è¤‡é›‘ã«ãªã‚‹ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒæ‚ªããªã‚Šã¾ã™</li></ul><p>åè¦‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«æ¯”ã¹ã‚‹ã¨ã€ Terraform ã«ã€Œç²¾é€šã€ã—ã¦ã„ã‚‹äººã¯ãã‚Œã»ã©å¤šããªã„ã¨æ€ã„ã¾ã™ã€‚
åˆå¿ƒè€…ã¯ç›´ã Module åŒ–ã«é£›ã³ã¤ãã®ã¯ã‚„ã‚ãŸæ–¹ãŒè‰¯ã„ã¨æ€ã„ã¾ã™(å°¤ã‚‚ä½¿ã£ã¦ã¿ãªã„ã¨ç†è§£ãŒæ·±ã¾ã‚‰ãªã„ã¨ã„ã†æ„å‘³ã§ã¯ä½¿ã£ãŸã»ã†ãŒè‰¯ã„ã§ã™ãŒ)ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="output">Output<a href="#output" class="hash-link" aria-label="Direct link to Output" title="Direct link to Output">â€‹</a></h2><p><a href="https://www.terraform.io/docs/configuration/outputs.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/outputs.html</a></p><p>Module ã§å®šç¾©ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã¯åŸºæœ¬çš„ã«å¤–éƒ¨ã‹ã‚‰éš è”½ã•ã‚Œã¾ã™ã€‚
ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã«å€‹åˆ¥ã« Output ã¨ã—ã¦å®£è¨€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">output "instance_ip_addr" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value = aws_instance.server.private_ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚Œã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§å®šç¾©ã—ãŸãƒªã‚½ãƒ¼ã‚¹ <code>aws_instance.server</code> ã®å±æ€§ <code>private_ip</code> ã‚’ Module ã®å±æ€§ <code>instance_ip_addr</code> ã¨ã—ã¦å¤–éƒ¨ã«å…¬é–‹ã™ã‚‹ã¨ã„ã†æ„å‘³ã§ã™ã€‚
Module ã®ãƒ‘ã‚¹ãŒ module.servers ã ã¨ã™ã‚‹ã¨ã€ <code>module.servers.instance_ip_addr</code> ã§å‚ç…§ã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-source">Data Source<a href="#data-source" class="hash-link" aria-label="Direct link to Data Source" title="Direct link to Data Source">â€‹</a></h2><p><a href="https://www.terraform.io/docs/configuration/data-sources.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/data-sources.html</a></p><p>Data source ã¯ Terraform ã§ç®¡ç†ã—ã¦ã„ãªã„(ã‚ã‚‹ã„ã¯ä»–ã® State ã§ç®¡ç†ã—ã¦ã„ã‚‹)ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’å‚ç…§ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã§ã™ã€‚</p><p>æ¬¡ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># data "ãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡" "ãƒªã‚½ãƒ¼ã‚¹å"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data "aws_ami" "example" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ãƒªã‚½ãƒ¼ã‚¹ã‚’ä¸€æ„ã«è­˜åˆ¥ã™ã‚‹ãŸã‚ã®ã‚¯ã‚¨ãƒª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  most_recent = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  owners = ["self"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name   = "app-server"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Tested = "true"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Data source ã§ã¯å±æ€§ã«ã‚ˆã£ã¦å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’æ¤œç´¢ã—ã¾ã™ã€‚æ¤œç´¢ã«ãƒãƒƒãƒã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã¯å¿…ãš1ã¤ã§ãªã‘ã‚Œã°ãªã‚‰ãšã€
è¤‡æ•°ãƒãƒƒãƒã—ãŸã‚Š1ã¤ã‚‚ãƒãƒƒãƒã—ãªã‹ã£ãŸã‚Šã™ã‚‹ã¨å¤±æ•—ã—ã¾ã™(å³å¯†ã«ã¯ Provider ã®å®Ÿè£…æ¬¡ç¬¬ã§ã™ãŒ)ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä»–ã®-state-ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’-data-source-ã¨ã—ã¦å‚ç…§ã™ã‚‹">ä»–ã® State ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’ Data source ã¨ã—ã¦å‚ç…§ã™ã‚‹<a href="#ä»–ã®-state-ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’-data-source-ã¨ã—ã¦å‚ç…§ã™ã‚‹" class="hash-link" aria-label="Direct link to ä»–ã® State ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’ Data source ã¨ã—ã¦å‚ç…§ã™ã‚‹" title="Direct link to ä»–ã® State ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’ Data source ã¨ã—ã¦å‚ç…§ã™ã‚‹">â€‹</a></h3><p><a href="https://www.terraform.io/docs/providers/terraform/d/remote_state.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/providers/terraform/d/remote_state.html</a></p><p>ä»–ã® State ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®å±æ€§ã‚’ Data source ã‚’ä½¿ã£ã¦å‚ç…§ã™ã‚‹ãŸã‚ã« <code>terraform_remote_state</code> ãŒã‚ã‚Šã¾ã™ã€‚
å‚ç…§ã™ã‚‹ã«ã¯ Module åŒæ§˜ ãã®å±æ€§ãŒ Output ã«ã‚ˆã£ã¦å¤–éƒ¨ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data "terraform_remote_state" "vpc" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  backend = "remote"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  config = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    organization = "hashicorp"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workspaces = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name = "vpc-prod"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workspace">workspace<a href="#workspace" class="hash-link" aria-label="Direct link to workspace" title="Direct link to workspace">â€‹</a></h2><ul><li><a href="https://www.terraform.io/docs/state/workspaces.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/state/workspaces.html</a></li><li><a href="https://blog.mosuke.tech/entry/2018/06/16/terraform-workspaces/" target="_blank" rel="noopener noreferrer">Terraform workspaceã‚’åˆ©ç”¨ã—ã¦ç’°å¢ƒæ¯ã®ãƒªã‚½ãƒ¼ã‚¹åã®å¤‰æ›´ã‚’è¡Œã†</a></li><li><a href="http://kenzo0107.hatenablog.com/entry/2019/04/17/103558" target="_blank" rel="noopener noreferrer">Terraform é‹ç”¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ 2019 ~workspace ã‚’ã‚„ã‚ã¦ã¿ãŸç­‰è«¸ã€…~</a></li></ul><p>Terraform ã«ã¯ workspace ã¨ã„ã†æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã¡ã‚‰ã®æ©Ÿèƒ½ã¯è‡ªåˆ†ã¯ä½¿ã£ãŸã“ã¨ãŒãªã„ã®ã§ç°¡å˜ã«è§¦ã‚Œã‚‹ã ã‘ã«ç•™ã‚ã¾ã™ã€‚
workspace ã®ä»£è¡¨çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ production ã‚„ staging ãªã©ã®ç•°ãªã‚‹ç’°å¢ƒã§åŒã˜è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…±æœ‰ã—ã¤ã¤ State ã‚’ switch ã™ã‚‹ã“ã¨ã ã¨æ€ã„ã¾ã™ã€‚</p><p>workspace ã‚’ä½¿ã‚ãªã„å ´åˆç’°å¢ƒã”ã¨ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåŠã³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Œå…¨ã«åˆ†ã‘ã‚‹ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">production/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ec2.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  terraform.tfstate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">staging/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ec2.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  terraform.tfstate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>workspace ã‚’ä½¿ã†ã¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…±æœ‰ã§ãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ec2.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform.tfstate.d/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  production/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    terraform.tfstate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  staging/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    terraform.tfstate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç’°å¢ƒã”ã¨ã®è¨­å®šã®å¾®å¦™ãªé•ã„ã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å†…ã§åˆ†å²ã™ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ã—ã‚‡ã†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç™ºå±•-workspace-ã‚’ä½¿ã†ã¹ãã‹">ç™ºå±•: workspace ã‚’ä½¿ã†ã¹ãã‹<a href="#ç™ºå±•-workspace-ã‚’ä½¿ã†ã¹ãã‹" class="hash-link" aria-label="Direct link to ç™ºå±•: workspace ã‚’ä½¿ã†ã¹ãã‹" title="Direct link to ç™ºå±•: workspace ã‚’ä½¿ã†ã¹ãã‹">â€‹</a></h3><p>workspace ã‚’ä½¿ã†ã¹ãã‹å¦ã‹ã¯æ„è¦‹ãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹æ§˜ã«æ€ãˆã¾ã™ã€‚
æã‚‰ããƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚„ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã® Terraform ã¸ã®æˆç†Ÿåº¦ã«ã‚‚ã‚ˆã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ç¾çŠ¶è‡ªåˆ†ã¯ã€Œä½¿ã‚ãªã„ã€ã¨ã„ã†ã‚¹ã‚¿ãƒ³ã‚¹ã§ã™ã€‚</p><p>è‡ªåˆ†ãŒã“ã‚Œã¾ã§é–¢ã‚ã£ã¦ããŸãƒãƒ¼ãƒ äº‹æƒ…ã ã¨ Terraform ã«å…¨å“¡ãŒç²¾é€šã—ã¦ã„ã‚‹ã¨ã„ã†ã‚ˆã‚Šã¯ã€ã‚€ã—ã‚ Terraform ã«ãã“ã¾ã§è©³ã—ããªã„äººã‚‚è§¦ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚
åè¦‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãã†ã„ã†ãƒãƒ¼ãƒ ã¯å°‘ãªããªã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ
ãã†ã„ã†ãƒãƒ¼ãƒ çŠ¶æ³ã§ã¯ã€ workspace ã‚’ä½¿ã£ã¦ DRY ã«ãªã‚‹ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆä»¥ä¸Šã«ã€ workspace ãã®ã‚‚ã®ã¸ã®å­¦ç¿’ã‚³ã‚¹ãƒˆã‚„ç’°å¢ƒã«ã‚ˆã£ã¦è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å†…ã§åˆ†å²ã™ã‚‹å­¦ç¿’ã‚³ã‚¹ãƒˆã‚’çœãã€
Terraform ã«ç²¾é€šã—ã¦ã„ãªãã¦ã‚‚ç†è§£ã§ãã‚‹ãã‚‰ã„ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¤ã“ã¨ã®ã»ã†ãŒå¤§äº‹ãªã®ã§ã¯ãªã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ç‰¹ã«ã€ã“ã‚Œã¾ã§ Terraform ã‚’ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹æ¨ªæ–­çš„ãªãƒãƒ¼ãƒ ã§ç®¡ç†ã—ã¦ã„ãŸçŠ¶æ…‹ã‹ã‚‰å„ã‚µãƒ¼ãƒ“ã‚¹ã®æ‹…å½“è€…ã« ownership ã‚’å§”è­²ã—ã‚ˆã†ã¨ã™ã‚‹å ´åˆã€ä¸Šè¿°ã®å­¦ç¿’ã‚³ã‚¹ãƒˆãƒ»è¤‡é›‘ã•ãŒå¼Šå®³ã«ãªã‚‹ã®ã§ã¯ãªã„ã‹ãªã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚</p><p>ãŸã ã—ã€ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒè‡ªåˆ†ã¯ workspace ã‚’ä½¿ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
ä¸Šè¨˜ã®è‡ªåˆ†ã®èªè­˜ãŒé–“é•ã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã—ã€ä»Šå¾Œ workspace ã‚’ä½¿ã£ã¦ã¿ãŸã‚‰è€ƒãˆãŒå¤‰ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-command-ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹">Terraform command ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹<a href="#terraform-command-ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹" class="hash-link" aria-label="Direct link to Terraform command ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹" title="Direct link to Terraform command ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹">â€‹</a></h2><p><a href="https://www.terraform.io/docs/commands/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/index.html</a></p><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ãŸä¸Šã§åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-init">terraform init<a href="#terraform-init" class="hash-link" aria-label="Direct link to terraform init" title="Direct link to terraform init">â€‹</a></h3><p><a href="https://www.terraform.io/docs/commands/init.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/init.html</a></p><p>ã¾ãšã€ <code>terraform init</code> ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>terraform init</code> ã«ã‚ˆã£ã¦ã€ä¾å­˜ã™ã‚‹ Provider ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‚Šã—ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-fmt">terraform fmt<a href="#terraform-fmt" class="hash-link" aria-label="Direct link to terraform fmt" title="Direct link to terraform fmt">â€‹</a></h3><p><a href="https://www.terraform.io/docs/commands/fmt.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/fmt.html</a></p><p><code>terraform fmt</code> ã«ã‚ˆã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ•´å½¢ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform fmt [-check] [-recursive]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>-check</code> ã‚’ã¤ã‘ã‚‹ã¨ã€ã‚³ãƒ¼ãƒ‰ã‚’æ•´å½¢ã™ã‚‹ä»£ã‚ã‚Šã«ã€ã‚³ãƒ¼ãƒ‰ãŒæ•´å½¢ã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚‰ exit code ãŒ non 0 ã§çµ‚äº†ã—ã¾ã™ã€‚
CI ã§ã‚³ãƒ¼ãƒ‰ãŒæ•´å½¢ã•ã‚Œã¦ã„ã‚‹ã‹ã®ãƒã‚§ãƒƒã‚¯ã«ä½¿ãˆã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-plan">terraform plan<a href="#terraform-plan" class="hash-link" aria-label="Direct link to terraform plan" title="Direct link to terraform plan">â€‹</a></h3><p><a href="https://www.terraform.io/docs/commands/plan.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/plan.html</a></p><p><code>terraform plan</code> ã«ã‚ˆã£ã¦ <code>terraform apply</code> ã® dry run ãŒå‡ºæ¥ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform plan [-refresh=false]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã¯å¤‰æ›´ã•ã‚Œãšã€ <code>apply</code> ã‚’å®Ÿè¡Œã—ãŸå ´åˆã«ã©ã®ã‚ˆã†ãªå¤‰æ›´ãŒè¡Œã‚ã‚Œã‚‹ã‹å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-apply">terraform apply<a href="#terraform-apply" class="hash-link" aria-label="Direct link to terraform apply" title="Direct link to terraform apply">â€‹</a></h3><p><a href="https://www.terraform.io/docs/commands/apply.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/apply.html</a></p><p>å®Ÿéš›ã«ã‚¤ãƒ³ãƒ•ãƒ©ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«åˆã‚ã›ã¦å¤‰æ›´ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform apply [-auto-approve]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯æœ€åˆã« plan ã®å®Ÿè¡ŒçµæœãŒå‡ºåŠ›ã•ã‚Œã¦æœ¬å½“ã«å¤‰æ›´ã‚’é©ç”¨ã—ã¦ã‚ˆã„ã‹ç¢ºèªãŒã‚ã‚Šã¾ã™ã€‚
<code>-auto-approve</code> ã‚’æŒ‡å®šã™ã‚‹ã¨ç¢ºèªã‚’ skip å‡ºæ¥ã¾ã™ã€‚</p><p><code>plan</code> ã«æˆåŠŸã—ã¦ã‚‚ <code>apply</code> ã«ã¯å¤±æ•—ã™ã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚
ç°¡å˜ãªä¾‹ã¨ã—ã¦ã¯æ›´æ–°ã™ã‚‹æ¨©é™ãŒãªã„å ´åˆã§ã™ã€‚
<code>apply</code> ã«å¤±æ•—ã™ã‚‹ã¨ä¸€éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ã ã‘æ›´æ–°ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã¯èµ·ã“ã‚Šãˆã¾ã™ã€‚
ãã†ãªã£ã¦ã‚‚ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã‹ã¯å‡ºæ¥ãªã„(terraform ã« rollback ã®æ©Ÿèƒ½ã¯ãªã„)ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-destroy">terraform destroy<a href="#terraform-destroy" class="hash-link" aria-label="Direct link to terraform destroy" title="Direct link to terraform destroy">â€‹</a></h3><p><a href="https://www.terraform.io/docs/commands/destroy.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/destroy.html</a></p><p>Terraform ã§ä½œæˆã—ãŸã‚¤ãƒ³ãƒ•ãƒ©ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform destroy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æã‚‰ãå®Ÿéš›ã®é‹ç”¨ã§ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã¯ã‚ã¾ã‚Šãªã„ã¨æ€ã„ã¾ã™ã€‚
å‰Šé™¤ã—ãŸã„ãªã‚‰è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãã®ãƒªã‚½ãƒ¼ã‚¹ã‚’æ¶ˆã—ã¦ apply ã™ã‚‹ã§ã—ã‚‡ã†ã€‚
Terraform ã®å‹‰å¼·ãŒã¦ã‚‰éŠã³ã§ä½œã£ãŸã‚‚ã®ã‚’ä¸¸ã£ã¨æ¶ˆã™ã¨ã‹ä¸»ã«ãã†ã„ã†ç”¨é€”ã§ä½¿ã‚ã‚Œã‚‹æ°—ãŒã—ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-refresh">terraform refresh<a href="#terraform-refresh" class="hash-link" aria-label="Direct link to terraform refresh" title="Direct link to terraform refresh">â€‹</a></h3><p><a href="https://www.terraform.io/docs/commands/refresh.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/refresh.html</a></p><p>State ã‚’å®Ÿéš›ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®çŠ¶æ…‹ã«åˆã‚ã›ã¦æ›´æ–°ã—ã¾ã™ã€‚
ã‚¤ãƒ³ãƒ•ãƒ©ã¯æ›´æ–°ã•ã‚Œã¾ã›ã‚“ã€‚
æ‰‹å‹•ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å¤‰æ›´ã—ãŸå ´åˆã«ã€ãã®å¤‰æ›´ã‚’ State ã«åæ˜ ã•ã›ã‚‹ã®ã«ä½¿ãˆã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform refresh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-import">terraform import<a href="#terraform-import" class="hash-link" aria-label="Direct link to terraform import" title="Direct link to terraform import">â€‹</a></h3><p><a href="https://www.terraform.io/docs/commands/import.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/import.html</a>
<a href="https://www.terraform.io/docs/import/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/import/index.html</a></p><p>Terraform ã§ç®¡ç†ã•ã‚Œã¦ã„ãªã„ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ State ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
State ã¯ãƒªã‚½ãƒ¼ã‚¹ãƒ‘ã‚¹ã¨ã‚¤ãƒ³ãƒ•ãƒ©ã®ID ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ç®¡ç†ã™ã‚‹ã¨è¨€ã„ã¾ã—ãŸãŒã€ import ã‚³ãƒãƒ³ãƒ‰ã®å¼•æ•°ã§ã¯ã“ã®2ã¤ã‚’æ¸¡ã™ã“ã¨ã§ãƒãƒƒãƒ”ãƒ³ã‚°ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ãƒªã‚½ãƒ¼ã‚¹ãƒ‘ã‚¹ ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform import aws_instance.example i-abcd1234</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¡ãªã¿ã«ã€ä¸€éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ã¯ import ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã¾ã›ã‚“ã€‚
ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã¯ Provider ã®å®Ÿè£…ã«ä¾å­˜ã—ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-state">terraform state<a href="#terraform-state" class="hash-link" aria-label="Direct link to terraform state" title="Direct link to terraform state">â€‹</a></h3><p><a href="https://www.terraform.io/docs/commands/state/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/commands/state/index.html</a></p><p>State ã‚’æ“ä½œã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚æ§˜ã€…ãªã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-ã®-cicd">Terraform ã® CI/CD<a href="#terraform-ã®-cicd" class="hash-link" aria-label="Direct link to Terraform ã® CI/CD" title="Direct link to Terraform ã® CI/CD">â€‹</a></h2><p>terraform apply ã¯åŸå‰‡ CD ã«ã‚ˆã£ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã¹ãã ã—ã€
CI ã«ã‚ˆã£ã¦ <code>terraform fmt -check</code> ã‚„ <code>terraform plan</code> ã¯å®Ÿè¡Œã•ã‚Œã‚‹ã¹ãã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>é€†ã« <code>terraform plan</code> ã‚„ <code>apply</code> ã¯ CI/CD ã§ã‚„ã£ã¦ã‚‹ã‘ã©ã€
<code>terraform state</code> ã‚„ <code>terraform import</code> ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰å®Ÿè¡Œã—ã¦ã„ã‚‹ã¨ã„ã†ãƒãƒ¼ãƒ ã‚‚å°‘ãªãã¯ãªã„ã®ã‹ãªã¨ã„ã†æ°—ãŒã—ã¦ã„ã¾ã™ã€‚</p><p>èª²é¡Œã¨ãªã‚Šã†ã‚‹ã®ã¯</p><ul><li>Credential ã®ç®¡ç†</li><li>IPåˆ¶é™</li></ul><p>ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="credential-ã®ç®¡ç†">Credential ã®ç®¡ç†<a href="#credential-ã®ç®¡ç†" class="hash-link" aria-label="Direct link to Credential ã®ç®¡ç†" title="Direct link to Credential ã®ç®¡ç†">â€‹</a></h3><p>Terraform ã§ä½¿ã†ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¯å¼·åŠ›ãªæ¨©é™ã‚’æŒã¡ãŒã¡ãªã®ã§æ‰±ã„ã«æ³¨æ„ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚
æ¨©é™ã‚’çµã‚‹ã®ãŒç†æƒ³ã§ã™ãŒã€çµæ§‹é›£ã—ã‹ã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ä¾‹ãˆã° PR ã® CI ã§ã¯ <code>terraform apply</code> ã‚’å®Ÿè¡Œã—ãªã„ã®ã§ã‚ã‚Œã°ã€ PR ã® CI ç”¨ã« Read Only ãªã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚’ç”¨æ„ã™ã‚‹ã¨ã‹ã‚‚ã‚ã‚Šã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ä¾‹ãˆã° AWS ã®ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†ã‚’ Terraform + CircleCI ã§è¡Œã†å ´åˆã€
AWS ã®ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚’ CircleCI ã§å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
CircleCI ã§ã¯ SSH ã§ã‚³ãƒ³ãƒ†ãƒŠã«ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ãŸã‚ã€ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚’ç›—ã‚‚ã†ã¨ç›—ã‚ã¾ã™ã—ã€
CircleCI ã«é™ã‚‰ãšæ‚ªæ„ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ CI ã§å®Ÿè¡Œã—ã¦å¤–éƒ¨ã«ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚’é€ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ip-åˆ¶é™">IP åˆ¶é™<a href="#ip-åˆ¶é™" class="hash-link" aria-label="Direct link to IP åˆ¶é™" title="Direct link to IP åˆ¶é™">â€‹</a></h3><p>CI ã§ Terraform ã‚’ä½¿ã†å ´åˆã€ CI ã®å®Ÿè¡Œç’°å¢ƒã‹ã‚‰ã‚¤ãƒ³ãƒ•ãƒ©ã® API ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
IP åˆ¶é™ã‚’ã‹ã‘ã¦ã„ã‚‹å ´åˆã€ CI ã®å®Ÿè¡Œç’°å¢ƒã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãªã©ã®å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚
CI ã®å®Ÿè¡Œç’°å¢ƒã® IP range ãŒå®šã¾ã£ã¦ãªã„å ´åˆã€è©±ã¯æ›´ã«é›£ã—ããªã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç™ºå±•-è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã§ä½¿ãˆã‚‹é–¢æ•°">ç™ºå±•: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã§ä½¿ãˆã‚‹é–¢æ•°<a href="#ç™ºå±•-è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã§ä½¿ãˆã‚‹é–¢æ•°" class="hash-link" aria-label="Direct link to ç™ºå±•: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã§ä½¿ãˆã‚‹é–¢æ•°" title="Direct link to ç™ºå±•: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã§ä½¿ãˆã‚‹é–¢æ•°">â€‹</a></h2><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã¯ãƒ“ãƒ«ãƒ‰ã‚¤ãƒ³é–¢æ•°ãŒä½¿ãˆã¾ã™ã€‚
å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><p><a href="https://www.terraform.io/docs/configuration/functions.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/functions.html</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½™è«‡-awesome-terraform">ä½™è«‡: awesome-terraform<a href="#ä½™è«‡-awesome-terraform" class="hash-link" aria-label="Direct link to ä½™è«‡: awesome-terraform" title="Direct link to ä½™è«‡: awesome-terraform">â€‹</a></h2><p><a href="https://github.com/shuaibiyy/awesome-terraform" target="_blank" rel="noopener noreferrer">https://github.com/shuaibiyy/awesome-terraform</a></p><p>Terraform é–¢é€£ã® awesome ãªãƒ„ãƒ¼ãƒ«ã®ãƒªãƒ³ã‚¯é›†ã§ã™ã€‚</p>]]></content:encoded>
            <category>terraform</category>
        </item>
        <item>
            <title><![CDATA[Terraform ã® State Locking ã®æ¦‚è¦]]></title>
            <link>https://techblog.szksh.cloud/terraform-state-locking</link>
            <guid>https://techblog.szksh.cloud/terraform-state-locking</guid>
            <pubDate>Fri, 10 Jan 2020 07:18:05 GMT</pubDate>
            <description><![CDATA[Terraform ã® State Locking ã¨ã„ã†æ©Ÿèƒ½ã®æ¦‚è¦ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Terraform ã® <a href="https://www.terraform.io/docs/state/locking.html" target="_blank" rel="noopener noreferrer">State Locking</a> ã¨ã„ã†æ©Ÿèƒ½ã®æ¦‚è¦ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
ãŸã ã—ã€è‡ªåˆ†ã‚‚ã¡ã‚ƒã‚“ã¨ç†è§£ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ã€æ¨æ¸¬ã‚‚æ··ã˜ã‚Šã¾ã™ã€‚
åŸºæœ¬çš„ã«ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã„ã¦ã‚ã‚‹å†…å®¹ãªã®ã§ãã¡ã‚‰ã‚’ã”å‚ç…§ãã ã•ã„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-locking-ã¨ã¯">State Locking ã¨ã¯<a href="#state-locking-ã¨ã¯" class="hash-link" aria-label="Direct link to State Locking ã¨ã¯" title="Direct link to State Locking ã¨ã¯">â€‹</a></h2><p><code>terraform plan</code> ãªã©ã®ã‚³ãƒãƒ³ãƒ‰ã¯ State ã‚’å¤‰æ›´ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
ãã®å‡¦ç†ã¯ atomic ã§ã¯ãªã„ãŸã‚ã€åŒæ™‚ã«è¤‡æ•°ã®ã‚³ãƒãƒ³ãƒ‰ãŒ State ã‚’æ›¸ãæ›ãˆã‚ˆã†ã¨ã™ã‚‹ã¨ä¸æ•´åˆãŒç”Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p><hr><p>ä¾‹ãˆã° S3 backend ã® state ã‚’ state rm ã§æ›´æ–°ã™ã‚‹å ´åˆã‚’è€ƒãˆã¾ã™ã€‚
ã“ã‚Œã¯ã‚³ãƒãƒ³ãƒ‰å†…éƒ¨ã§</p><ol><li>ç¾åœ¨ã® State ã‚’å–å¾—ã™ã‚‹ (READ)</li><li>ä¿®æ­£ã—ãŸ State ã‚’ S3 ã« push ã™ã‚‹ (WRITE)</li></ol><p>ã¨ã„ã†å‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹ã¯ãšã§ã‚ã‚Šã€è¤‡æ•°ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸå ´åˆã€READ ã¨ WRITE ã®é–“ã«ä»–ã®ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã£ã¦ WRITE ã•ã‚Œã‚‹ã¨ã€ãã® WRITE ã«ã‚ˆã‚‹å¤‰æ›´ãŒæ¶ˆãˆã¦ã—ã¾ã„ã¾ã™ã€‚</p><hr><p>ãã“ã§ State Locking ã‚’ä½¿ã†ã¨å„ã‚³ãƒãƒ³ãƒ‰ã§ State ã‚’å¤‰æ›´ã™ã‚‹å‰ã« lock ã‚’å–ã‚Šã€WRITE å¾Œã« lock ã‚’è§£é™¤ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³">ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³<a href="#ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³" class="hash-link" aria-label="Direct link to ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³" title="Direct link to ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³">â€‹</a></h2><p>plan, apply, refresh, state rm, state mv, state push ã«ã¯æ¬¡ã®ã‚ˆã†ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-lock=true          Lock the state file when locking is supported.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-lock-timeout=0s    Duration to retry a state lock.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>-lock</code> ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ true ãªã®ã§ State Locking ã®ã“ã¨ã‚’çŸ¥ã‚‰ãªãã¦ã‚‚å®Ÿã¯ State Locking ä½¿ã£ã¦ãŸã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šãˆã¾ã™ãŒã€ Backend type ã«ã‚ˆã£ã¦ã¯ State Locking ã®ãŸã‚ã®è¨­å®šã‚’ã—ã¦ã„ãªã„ã¨ State Locking ãŒç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä¾‹ãˆã° S3 backend ã§ State Locking ã‚’ã™ã‚‹ã«ã¯ DynamoDB ãŒå¿…è¦ã§ã‚ã‚Šã€ DynamoDB ã®è¨­å®š <code>dynamodb_table</code> ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã¨ State Locking ã¯ç„¡åŠ¹ã«ãªã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€<code>-lock=false</code> ã§ç„¡åŠ¹åŒ–ã§ãã¾ã™ãŒã€å…¬å¼çš„ã«éæ¨å¥¨ã«ãªã‚Šã¾ã™ã€‚</p><p><code>-lock-timeout</code> ã¯ lock ã®å–å¾—ã«å¤±æ•—ã—ãŸå ´åˆã«ä½•ç§’å¾Œã«ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ã‹ã®è¨­å®šã«ãªã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="force-unlock">force-unlock<a href="#force-unlock" class="hash-link" aria-label="Direct link to force-unlock" title="Direct link to force-unlock">â€‹</a></h2><p>lock ã®è§£æ”¾ã«å¤±æ•—ã—ãŸå ´åˆã®ãŸã‚ã«ã€ <a href="https://www.terraform.io/docs/commands/force-unlock.html" target="_blank" rel="noopener noreferrer">force-unlock</a> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚
ä½•ã‚‰ã‹ã®ãƒˆãƒ©ãƒ–ãƒ«ã§ lock ãŒè§£æ”¾ã•ã‚Œãªã„å ´åˆã«ä½¿ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform force-unlock LOCK_ID</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¾‹ãˆã° plan ã‚’å®Ÿè¡Œä¸­ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹ã¨ lock ãŒè§£æ”¾ã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚</p><p>lock ãŒè§£æ”¾ã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã§ plan ãªã©ã‚’å®Ÿè¡Œã™ã‚‹ã¨ lock ã®å–å¾—ã«å¤±æ•—ã—ã€æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Acquiring state lock. This may take a few moments...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Error locking state: Error acquiring the state lock: ConditionalCheckFailedException: The conditional request failed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status code: 400, request id: xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Lock Info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ID:        xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Path:      terraform.tfstate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Operation: OperationTypePlan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Who:       xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Version:   0.12.13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Created:   2020-01-09 09:30:37.41120929 +0000 UTC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Info:      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform acquires a state lock to protect the state from being written</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">by multiple users at the same time. Please resolve the issue above and try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">again. For most commands, you can disable locking with the "-lock=false"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flag, but this is not recommended.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã“ã§å‡ºåŠ›ã•ã‚Œã‚‹ ID ã‚’ force-unlock ã®å¼•æ•°ã¨ã—ã¦æŒ‡å®šã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform force-unlock xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Do you really want to force-unlock?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Terraform will remove the lock on the remote state.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  This will allow local Terraform commands to modify this state, even though it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  may be still be in use. Only 'yes' will be accepted to confirm.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Enter a value: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Terraform state has been successfully unlocked!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The state has been unlocked, and Terraform commands should now be able to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obtain a new lock on the remote state.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="s3-backend">S3 backend<a href="#s3-backend" class="hash-link" aria-label="Direct link to S3 backend" title="Direct link to S3 backend">â€‹</a></h2><p>State Locking ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‹ã¯ Backend type ã«ã‚ˆã‚Šã¾ã™ãŒã€ S3 ã®å ´åˆã€ DynamoDB ã‚’ä½¿ãˆã°ã§ãã¾ã™ã€‚</p><p><a href="https://www.terraform.io/docs/backends/types/s3.html#configuration-variables" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/backends/types/s3.html#configuration-variables</a></p><p>backend ã®è¨­å®šã§ <code>dynamodb_table</code> ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><a href="https://www.terraform.io/docs/backends/types/s3.html#dynamodb_table" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/backends/types/s3.html#dynamodb_table</a></p><blockquote><p>dynamodb_table - (Optional) The name of a DynamoDB table to use for state locking and consistency. The table must have a primary key named LockID. If not present, locking will be disabled.</p></blockquote><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data "terraform_remote_state" "network" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  backend = "s3"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  config = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bucket = "terraform-state-prod"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key    = "network/terraform.tfstate"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    region = "us-east-1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # state locking ã®è¨­å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dynamodb_table = "???"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>IAMã®æ¨©é™ã¨ã—ã¦ã¯ <a href="https://www.terraform.io/docs/backends/types/s3.html#dynamodb-table-permissions" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/backends/types/s3.html#dynamodb-table-permissions</a> ãŒå¿…è¦ã§ã™ã€‚</p><p>DynamoDB ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯ <code>LockID</code> ã¨ã„ã† Primary Key ãŒå¿…è¦ã§ã™ã€‚ å‹ã¯ <code>æ–‡å­—åˆ—</code> ã§ã™ã€‚</p><p>ãã—ã¦ State Locking ã‚’æœ‰åŠ¹ã«ã—ãŸçŠ¶æ…‹ã§ plan ãªã©ã‚’å®Ÿè¡Œã™ã‚‹ã¨
DynamoDB ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒ State ã”ã¨ã«ä½œã‚‰ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-locking-ã‚’ã™ã‚Œã°å®‰å…¨ã¨ã„ã†ã‚ã‘ã§ã¯ãªã„">State Locking ã‚’ã™ã‚Œã°å®‰å…¨ã€ã¨ã„ã†ã‚ã‘ã§ã¯ãªã„<a href="#state-locking-ã‚’ã™ã‚Œã°å®‰å…¨ã¨ã„ã†ã‚ã‘ã§ã¯ãªã„" class="hash-link" aria-label="Direct link to State Locking ã‚’ã™ã‚Œã°å®‰å…¨ã€ã¨ã„ã†ã‚ã‘ã§ã¯ãªã„" title="Direct link to State Locking ã‚’ã™ã‚Œã°å®‰å…¨ã€ã¨ã„ã†ã‚ã‘ã§ã¯ãªã„">â€‹</a></h2><p>State Locking è‡ªä½“ã¯å®‰å…¨æ€§ã«å¯„ä¸ã™ã‚‹ä»•çµ„ã¿ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ State Locking ã•ãˆã™ã‚Œã°å®‰å…¨ã‹ã¨ã„ã†ã¨ãã†ã§ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚</p><p>è¤‡æ•°äººãŒåŒæ™‚ã« plan ã‚„ apply ãªã©ã‚’å®Ÿè¡Œã™ã‚‹ç’°å¢ƒã§ã¯ã€åˆ¥ã®ãƒ­ãƒƒã‚¯æ©Ÿæ§‹ã‚‚å¿…è¦ã ã¨æ€ã„ã¾ã™ã€‚</p><p>è©³ç´°ã¯ã¾ãŸåˆ¥é€”æ›¸ã“ã†ã¨æ€ã„ã¾ã™ãŒã€CI/CD ã§ plan, apply ãªã©ã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã€ apply å®Ÿè¡Œä¸­ã¯ãã‚ŒãŒçµ‚ã‚ã‚‹ã¾ã§ä»–ã® plan ã‚„ apply ã®å®Ÿè¡Œã‚’ wait ã™ã‚‹ã‚ˆã†ãªä»•çµ„ã¿ãŒãªã„ã¨å±é™ºã§ã™ã€‚</p>]]></content:encoded>
            <category>terraform</category>
        </item>
        <item>
            <title><![CDATA[dd-time - ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚é–“ã‚’ Datadog ã«é€ã‚‹ãƒ„ãƒ¼ãƒ«]]></title>
            <link>https://techblog.szksh.cloud/dd-time</link>
            <guid>https://techblog.szksh.cloud/dd-time</guid>
            <pubDate>Sat, 30 Nov 2019 04:54:47 GMT</pubDate>
            <description><![CDATA[ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚é–“ã‚’ Datadog ã«é€ã‚‹ dd-time ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚é–“ã‚’ Datadog ã«é€ã‚‹ <a href="https://github.com/suzuki-shunsuke/dd-time" target="_blank" rel="noopener noreferrer">dd-time</a> ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚</p><p>ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ <a href="https://github.com/yuya-takeyama/circle-dd-bench" target="_blank" rel="noopener noreferrer">circle-dd-bench</a> ã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã•ã‚Œã¦ã„ã¾ã™ãŒã€ CircleCI ä»¥å¤–ã§ã‚‚éœ€è¦ã‚ã‚‹ã¨æ€ã£ãŸã‚Šã€ä»–ã«ã‚‚å¹¾ã¤ã‹æ”¹å–„ã—ãŸã„éƒ¨åˆ†ãŒã‚ã£ãŸã®ã§è‡ªä½œã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>circle-dd-bench ã«ã¤ã„ã¦ã¯ circle-dd-bench ã®ä½œè€…ãŒæ›¸ã„ãŸãƒ–ãƒ­ã‚° <a href="https://blog.yuyat.jp/post/circle-dd-bench/" target="_blank" rel="noopener noreferrer">https://blog.yuyat.jp/post/circle-dd-bench/</a> ã‚‚å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p><p>dd-time ã¯ Go è£½ãªã®ã§ <a href="https://github.com/suzuki-shunsuke/dd-time/releases" target="_blank" rel="noopener noreferrer">GitHub Releases</a> ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚Œã°ä½¿ãˆã¾ã™ã€‚</p><p>ä½¿ã„æ–¹ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§å®Ÿè¡Œæ™‚é–“ã‚’è¨ˆæ¸¬ã—ãŸã„ã‚³ãƒãƒ³ãƒ‰ã®å‰ã« <code>dd-time --</code> ã‚’ã¤ã‘ã‚‹ã ã‘ã§ã™ã€‚
ä¾‹ãˆã° Docker image ã®ãƒ“ãƒ«ãƒ‰ã®æ™‚é–“ã‚’è¨ˆæ¸¬ã—ãŸã„å ´åˆæ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dd-time -t command:docker-build -- docker build .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Datadog ã® API key ã‚’ç’°å¢ƒå¤‰æ•° <code>DATADOG_API_KEY</code> ã¨ã—ã¦è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã†ã™ã‚‹ã¨ <a href="https://docs.datadoghq.com/api/?lang=python#post-timeseries-points" target="_blank" rel="noopener noreferrer">Datadog ã® Post timeseries points API</a> ã‚’ä½¿ã„ã€<code>command_execution_time</code> ã¨ã„ã†ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚¹å(å¤‰æ›´å¯èƒ½)ã§ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚é–“ãŒé€ã‚‰ã‚Œã¾ã™ã€‚</p><p>ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚¹ã®åå‰ã‚„ host, tags ã¯ãã‚Œãã‚Œ <code>--metric-name (-m)</code>, <code>--host</code>, <code>--tag (-t)</code> ã§æŒ‡å®šã§ãã¾ã™ã€‚
<code>--tag</code> ã¯è¤‡æ•°å›æŒ‡å®šå¯èƒ½ã§ã€ <code>key:value</code> ã¨ã„ã†ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§æŒ‡å®šã—ã¾ã™ã€‚</p><p>CircleCI ã§å®Ÿè¡Œã—ãŸå ´åˆã€ CircleCI ã®ãƒ“ãƒ«ãƒ‰ã‚¤ãƒ³ç’°å¢ƒå¤‰æ•°ãŒ tag ã¨ã—ã¦å‹æ‰‹ã«è¨­å®šã•ã‚Œã¾ã™ãŒã€ CircleCI ä»¥å¤–ã§ã‚‚ä½¿ãˆã¾ã™ã€‚</p><p>dd-time ã‚’ä½œã‚‹ä¸Šã§æ„è­˜ã—ãŸã“ã¨ã¯ã€<code>é€éçš„ã«ã™ã‚‹(å…ƒã®ã‚³ãƒ¼ãƒ‰ã«ã»ã¨ã‚“ã©å½±éŸ¿ã‚’ä¸ãˆãšã«ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹)</code>ã¨ã„ã†ã“ã¨ã§ã™ã€‚
å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªç‚¹ã§ã™ã€‚</p><ul><li>æ¨™æº–å…¥åŠ›ã‚’ãã®ã¾ã¾ã‚³ãƒãƒ³ãƒ‰ã«æ¸¡ã™</li><li>ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–å‡ºåŠ›ãƒ»æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã‚’ãã®ã¾ã¾å‡ºåŠ›ã™ã‚‹</li><li>ã‚³ãƒãƒ³ãƒ‰ã® exit code ã‚’ãã®ã¾ã¾ dd-time ã® exit code ã¨ã™ã‚‹</li><li>Datadog ã¸ã®é€ä¿¡ã«å¤±æ•—ã—ã¦ã‚‚ dd-time ã® exit code ã¯ 0 ã¨ã™ã‚‹
(option ã§ non zero ã«ã‚‚ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã®ã‚‚ã‚ã‚Šã ãŒã€ç¾çŠ¶ã¯ãã†ã—ã¦ãªã„)</li><li>Datadog ã¸ã®é€ä¿¡ã«å¤±æ•—ã—ãŸå ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«åãå‡ºã›ã‚‹(ã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ã¨æ··ã–ã‚‰ãªã„ã‚ˆã†ã«ã§ãã‚‹)<ul><li>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã ãŒã€ <code>--output (-o)</code> ã¨ <code>--apend (-a)</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å¤‰æ›´ã§ãã‚‹</li><li><code>--append</code> ã‚’æŒ‡å®šã™ã‚‹ã¨è¿½è¨˜ãƒ¢ãƒ¼ãƒ‰ã§å‡ºåŠ›ã§ãã‚‹</li></ul></li><li>é©åˆ‡ã«ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹(æœ¬å½“ã«é©åˆ‡ã¨è¨€ãˆã‚‹ã‹ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ãŒ)</li></ul><p>ä»¥ä¸Šã€ç°¡å˜ã§ã™ãŒ dd-time ã®ç´¹ä»‹ã§ã—ãŸã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>datadog</category>
        </item>
        <item>
            <title><![CDATA[ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„ã£ã¦ã„ããŸã„]]></title>
            <link>https://techblog.szksh.cloud/mobreview</link>
            <guid>https://techblog.szksh.cloud/mobreview</guid>
            <pubDate>Sun, 10 Nov 2019 09:31:05 GMT</pubDate>
            <description><![CDATA[æœ€è¿‘ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼å–ã‚Šå…¥ã‚ŒãŸã„ã¨æ„Ÿã˜ã¦ã„ã¦ã€ãªã‚“ã§å–ã‚Šå…¥ã‚ŒãŸã„ã‹ãªã©ã«ã¤ã„ã¦æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>æœ€è¿‘ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼å–ã‚Šå…¥ã‚ŒãŸã„ã¨æ„Ÿã˜ã¦ã„ã¦ã€ãªã‚“ã§å–ã‚Šå…¥ã‚ŒãŸã„ã‹ãªã©ã«ã¤ã„ã¦æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚
ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼è‡ªä½“ã¾ã  2, 3 å›ã—ã‹ã‚„ã£ã¦ãªã„ã®ã§èª¬å¾—åŠ›ã«ã‹ã‘ã¾ã™ãŒã€ã”å®¹èµ¦ãã ã•ã„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æƒ³å®š">æƒ³å®š<a href="#æƒ³å®š" class="hash-link" aria-label="Direct link to æƒ³å®š" title="Direct link to æƒ³å®š">â€‹</a></h2><ul><li>ãƒãƒ¼ãƒ ã¯ 6 äººä»¥ä¸‹</li><li>Pull Request (ä»¥ä¸‹ PR) ã‚’ãƒãƒ¼ã‚¸ã™ã‚‹ã«ã¯å¿…ãšä»–ã®èª°ã‹ãŒ approve ã—ãªã„ã¨ã„ã‘ãªã„</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç›®çš„">ç›®çš„<a href="#ç›®çš„" class="hash-link" aria-label="Direct link to ç›®çš„" title="Direct link to ç›®çš„">â€‹</a></h2><ul><li>ãƒãƒ¼ãƒ å†…ã®æƒ…å ±å…±æœ‰<ul><li>å±äººåŒ–ã®è§£æ¶ˆ</li><li>é€€è·ã‚„ç•°å‹•ãªã©ã«ã‚ˆã‚‹æƒ…å ±ã®å–ªå¤±(èª°ã‚‚åˆ†ã‹ã‚‰ãªã„çŠ¶æ…‹)ã‚’é˜²ã</li><li>ãƒãƒ¼ãƒ å¤–ã®äººã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚‚æ´»ç”¨ã§ãã‚‹</li></ul></li><li>ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ã®çŸ­ç¸®</li><li>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å“è³ªã®æ”¹å–„</li><li>ä»•äº‹ã‚’è©•ä¾¡ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã§æ‰¿èªæ¬²æ±‚ã‚’æº€ãŸã™</li><li>ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®æ”¹å–„<ul><li>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é€šã˜ã¦å¿…è¦ãªçŸ¥è­˜ã‚’å¸åã—ã¦ã‚‚ã‚‰ã†</li><li>ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«é™ã£ãŸã“ã¨ã§ã¯ãªã„ãŒã€ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ã‚‚æœ‰åŠ¹ã§ã¯ãªã„ã‹</li></ul></li><li>æœ€å¾Œã¾ã§ã‚„ã‚Šãã‚‹</li></ul><p>ç®‡æ¡æ›¸ã—ãŸå†…å®¹ã‚’è£œè¶³ã—ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æƒ…å ±å…±æœ‰">æƒ…å ±å…±æœ‰<a href="#æƒ…å ±å…±æœ‰" class="hash-link" aria-label="Direct link to æƒ…å ±å…±æœ‰" title="Direct link to æƒ…å ±å…±æœ‰">â€‹</a></h3><p>å±äººåŒ–ã®è§£æ¶ˆã¯çµæ§‹é‡è¦ã ã¨è‡ªåˆ†ã¯æ€ã£ã¦ã„ã¦ã€ç‰¹å®šã®äººã˜ã‚ƒãªã„ã¨å‡ºæ¥ãªã„ã“ã¨ã€ã‚ã‹ã‚‰ãªã„ã“ã¨ã¨ã„ã†ã®ã¯
ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚„æŠ€è¡“çš„è² å‚µã ã£ãŸã‚Šã€éšœå®³å¯¾å¿œæ™‚ã«è‡´å‘½çš„ã«ãªã‚Šã‹ã­ã¾ã›ã‚“(æ·±å¤œã«éšœå®³ãŒèµ·ã“ã£ã¦Aã•ã‚“ã«èã‹ãªã„ã¨ã‚ã‹ã‚‰ãªã„ã®ã«ã€Aã•ã‚“ã¨é€£çµ¡ãŒå–ã‚Œãªã„ã¨ã‹æœ€æ‚ª)ã€‚
ãƒãƒ¼ãƒ å…¨å“¡ã¨ã¯ã„ã‹ãªãã¦ã‚‚ 3 äººãã‚‰ã„ã¯å‡ºæ¥ã‚‹ãƒ»åˆ†ã‹ã£ã¦ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ã¾ãã€å½“åˆã¯ 3 äººãã‚‰ã„åˆ†ã‹ã£ã¦ã¦ã‚‚ã€æ™‚é–“ãŒçµŒã£ã¦ç•°å‹•ã‚„ã‚‰é€€è·ã‚„ã‚‰ã§æ°—ã¥ã„ãŸã‚‰åˆ†ã‹ã£ã¦ã„ã‚‹äººã„ãªããªã£ã¦ãŸã¨ã„ã†ã®ã¯
ã‚ã‚Šãˆãªããªã„ã®ã§ã€ãã†ã„ã£ãŸãƒªã‚¹ã‚¯ã‚’ã©ã†ã‚„ã£ã¦é˜²ãã‹ã¨ã„ã†ã®ã¯è€ƒãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã®è©±ã¨ã¯å¤–ã‚Œã‚‹ã®ã§å‰²æ„›ã—ã¾ã™ã€‚</p><p>ã¾ãŸã€ãƒãƒ¼ãƒ å¤–ã®äººã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚‚æ´»ç”¨ã§ãã‚‹ã¨æ€ã£ã¦ã„ã¦ã€
ä¾‹ãˆã°ãƒ©ãƒ³ãƒã‚„é£²ã¿ä¼šã§ãƒãƒ¼ãƒ å¤–ã®äººã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–ã‚‹éš›ã«è‡ªåˆ†ã®ãƒãƒ¼ãƒ ã®ä»–ã®äººãŒå¯¾å¿œã—ãŸä»¶ã¨ã‹ãŒè©±é¡Œã«ä¸ŠãŒã£ãŸã¨ãã«
ã¡ã‚ƒã‚“ã¨æƒ…å ±å…±æœ‰ã§ãã¦ãªã„ã¨ã€è‡ªåˆ†ã¯æ‹…å½“å¤–ãªã®ã§åˆ†ã‹ã‚Šã¾ã›ã‚“ã¨ãªã£ã¦ã—ã¾ã†ã§ã—ã‚‡ã†ã€‚
çŸ¥ã£ã¦ã„ã‚Œã°ã‚€ã—ã‚è‡ªåˆ†ã‹ã‚‰è©±é¡Œã«ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ãã“ã‹ã‚‰ç™ºå±•ã—ã¦æ›´ã«æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã®è©±ã‚‚ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ”¹å–„">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ”¹å–„<a href="#ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ”¹å–„" class="hash-link" aria-label="Direct link to ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ”¹å–„" title="Direct link to ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ”¹å–„">â€‹</a></h3><p>ã›ã£ã‹ãã„ã„ä»•äº‹ã‚’ã—ã¦ã‚‚ä¸­ã€…ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã‚‚ã‚‰ãˆãªã„ã¨ãªã‚‹ã¨ä¸æº€ãŒãŸã¾ã‚Šã¾ã™ã€‚
ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿæ–½ã™ã‚‹ã“ã¨ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä¿ƒé€²ã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ã®æ™‚é–“ã‚’çŸ­ãã§ãã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¾ã™ã€‚
ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ãŸãã¦ã‚‚è‰¯ãã‚ã‹ã‚‰ãªãã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ããªã„ã¨ã„ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ã‚ã‚‹ã¨æ€ã†ã®ã§ã€
ã‚ã‹ã‚‰ãªã„éƒ¨åˆ†ã‚’ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§è§£æ¶ˆã•ã‚Œã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé€²ã‚€ã¨è‰¯ã„ã§ã™ã­ã€‚</p><p>ã¾ãŸã€ã¡ã‚ƒã‚“ã¨è¤‡æ•°äººã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã“ã¨ã§ç›®å…ˆã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã ã‘ã®æœ¬è³ªçš„ã§ãªã„å•é¡Œè§£æ±ºã‚’é˜²ãã“ã¨ãŒå‡ºæ¥ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
ã€Œã„ã‚„ã€ãã‚Œãã‚‚ãã‚‚PRã®å‰æãŒãŠã‹ã—ããªã„ï¼Ÿå‰æã¨ãªã£ã¦ã„ã‚‹ä»•æ§˜ã‚’è¦‹ç›´ã™ã¹ããªã®ã§ã¯ã€
ã¿ãŸã„ãªã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä»•äº‹ã‚’è©•ä¾¡ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã§æ‰¿èªæ¬²æ±‚ã‚’æº€ãŸã™">ä»•äº‹ã‚’è©•ä¾¡ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã§æ‰¿èªæ¬²æ±‚ã‚’æº€ãŸã™<a href="#ä»•äº‹ã‚’è©•ä¾¡ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã§æ‰¿èªæ¬²æ±‚ã‚’æº€ãŸã™" class="hash-link" aria-label="Direct link to ä»•äº‹ã‚’è©•ä¾¡ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã§æ‰¿èªæ¬²æ±‚ã‚’æº€ãŸã™" title="Direct link to ä»•äº‹ã‚’è©•ä¾¡ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã§æ‰¿èªæ¬²æ±‚ã‚’æº€ãŸã™">â€‹</a></h3><p>ã„ã„ä»•äº‹ã—ãŸã‚‰ä»–ã®äººã«ã‚‚çŸ¥ã£ã¦ã‚‚ã‚‰ã„ãŸã„ã¨ã„ã†ã®ã¯è‡ªç„¶ãªã“ã¨ã§ã—ã‚‡ã†ã€‚
ã„ã„ä»•äº‹ã‚’è¤’ã‚ã‚‹ã®ã¯è‰¯ã„ãƒãƒ¼ãƒ ãƒ»ç’°å¢ƒã§ã‚ã‚Šåƒãã‚„ã™ã•ã¨ã„ã†ã¨ã“ã‚ã«ã¤ãªãŒã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><p>ã¡ãªã¿ã«ç¾è·ã ã¨ Slack ã§ä»–ã®ãƒãƒ¼ãƒ ã«ã‚‚å…±æœ‰ã—ã¦ emoji ã§è¤’ã‚ç§°ãˆã‚‹ã¨ã„ã†ã®ãŒçµæ§‹ã‚„ã‚‰ã‚Œã¦ã„ã¦
æ°—æŒã¡ã®ã„ã„ç’°å¢ƒã ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¸ã®æ´»ç”¨">ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¸ã®æ´»ç”¨<a href="#ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¸ã®æ´»ç”¨" class="hash-link" aria-label="Direct link to ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¸ã®æ´»ç”¨" title="Direct link to ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¸ã®æ´»ç”¨">â€‹</a></h3><p>ãã‚‚ãã‚‚ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ã„ã†ã‚‚ã®ã‚’ã¡ã‚ƒã‚“ã¨å—ã‘ãŸã®ãŒç¾è·ãŒåˆã‚ã¦ã§ã€
ç¾è·ã§ã‚‚ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ã¤ã„ã¦ã¯ã¾ã ã¾ã æ¤œè¨ä¸­ã§ã‚ã‚Šã€ã€Œä½•ã‚’ã‚‚ã£ã¦ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¯çµ‚ã‚ã‚Šã¨è¨€ãˆã‚‹ã®ã‹ã€ã¿ãŸã„ãªè­°è«–ãŒ Slack ã§ã•ã‚Œã¦ãŸã‚Šã—ã¦ã€
è‡ªåˆ†ã‚‚ã‚ˆãã‚ã‹ã£ã¦ãªã„ã®ã§ã™ãŒã€ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ã‚‚æ´»ç”¨ã§ãã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨ã„ã†æ°—ãŒã—ã¦ã„ã¾ã™ã€‚</p><p>è‰²ã€…ãªã«ã‚‚åˆ†ã‹ã£ã¦ãªã„çŠ¶æ…‹ã® New Joiner ã§ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«ã€èƒŒæ™¯ã¨ã‹ã‚’èª¬æ˜ã—ãŸã‚Šã™ã‚‹ã“ã¨ã§
ä¼šç¤¾å›ºæœ‰ã®ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ãªã©ã‚’è£œã„ã€æˆ¦åŠ›åŒ–ã‚’ä¿ƒã™ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚
ä¼šç¤¾å›ºæœ‰ã®ç•¥èªãªã©ãŒå½“ãŸã‚Šå‰ã«ä½¿ã‚ã‚Œã¦ãŸã‚Šã™ã‚‹ã¨ New Joiner ã«ã¯ç†è§£ã§ããªã„ã®ã§ã™ãŒã€ãã†ã„ã†ã®ã‚‚å«ã‚ã¦ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã‚ã’ã‚‹è‰¯ã„æ©Ÿä¼šã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚
ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ãªã‚“ã‹ã‚’ã‚„ã£ã¦ã„ã‚‹ã¨ New Joiner ã«ã¯åå‰ã‚’èã„ãŸã ã‘ã§ã¯ç†è§£ã§ããªã„ã‚‚ã®ã‚‚å‡ºã¦ãã¾ã™ã—ã­ã€‚</p><p>ã¾ãã‚ã¾ã‚Šç´°ã‹ãªè©±ã¾ã§ã—ã ã™ã¨ãã‚Œã¯ã¾ã  New Joiner ã«ã¯æ—©ã„ã¨ã„ã†ã“ã¨ã«ã‚‚ãªã‚‹ã®ã§ã€ã‚±ãƒ¼ã‚¹ãƒã‚¤ã‚±ãƒ¼ã‚¹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€å¾Œã¾ã§ã‚„ã‚Šãã‚‹">æœ€å¾Œã¾ã§ã‚„ã‚Šãã‚‹<a href="#æœ€å¾Œã¾ã§ã‚„ã‚Šãã‚‹" class="hash-link" aria-label="Direct link to æœ€å¾Œã¾ã§ã‚„ã‚Šãã‚‹" title="Direct link to æœ€å¾Œã¾ã§ã‚„ã‚Šãã‚‹">â€‹</a></h3><p>PR ã‚’æŠ•ã’ãŸå¾Œã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã‚‚ã‚‰ãˆãªã„ã€èª¬æ˜ã‚’æ›¸ã„ã¦ã„ã‚‹ã®ã«èª­ã‚“ã§ã‚‚ã‚‰ãˆãªã„ã¨ã„ã£ãŸã¨ãã«</p><ul><li>è‡ªåˆ†ã¯ã‚„ã‚‹ã¹ãã“ã¨ã‚’ã‚„ã£ã¦ã„ã‚‹</li><li>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ãªã„äººãŸã¡ãŒæ‚ªã„</li><li>èª¬æ˜ã‚’èª­ã¾ãªã„äººãŸã¡ãŒæ‚ªã„</li></ul><p>ã¨ã—ã¦ãã‚Œä»¥ä¸Šãªã«ã‚‚ã—ãªã„ã¨ã„ã†ã®ã¯ã‚‚ã£ãŸã„ãªã„ã¨æ€ã„ã¾ã™ã€‚
ã€ŒçµæœãŒã™ã¹ã¦ã€ã ã¨è€ƒãˆã‚‹ã¨èª¬æ˜ã‚’æ›¸ã„ã¦ã‚‚èª­ã‚“ã§ã‚‚ã‚‰ãˆãªã‹ã£ãŸã‚‰ãã‚Œã¯æ›¸ã„ã¦ãªã„ã¨åŒã˜ãªã®ã§
ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ã„ã†å½¢ã§èª­ã‚“ã§ã‚‚ã‚‰ã†åŠªåŠ›ã‚’ã™ã‚‹ã®ãŒã‚ˆã‚Šå»ºè¨­çš„ãªã®ã§ã—ã‚‡ã†ã€‚
ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã¿ãŸã‚‰ã€Œãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã‚ˆã†ã¨æ€ã£ãŸã‘ã©ã€ã“ã“ãŒè‰¯ãã‚ã‹ã‚‰ãªãã¦ã‚„ã‚ã¡ã‚ƒã£ãŸã‚“ã ã‚ˆã­ã€ã¨ã„ã†ã“ã¨ã‚‚ã‚ã£ãŸã®ã§ã€
è‡ªåˆ†ã®èª¬æ˜ã‚‚è¶³ã‚Šã¦ãªã‹ã£ãŸã‚“ã ãªã¨è¦‹ç›´ã™è‰¯ã„æ©Ÿä¼šã«ã‚‚ãªã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è§£æ±ºã—ãŸã„èª²é¡Œ">è§£æ±ºã—ãŸã„èª²é¡Œ<a href="#è§£æ±ºã—ãŸã„èª²é¡Œ" class="hash-link" aria-label="Direct link to è§£æ±ºã—ãŸã„èª²é¡Œ" title="Direct link to è§£æ±ºã—ãŸã„èª²é¡Œ">â€‹</a></h2><ul><li>ä»–ã®äººãŒä½•ã‚„ã£ã¦ã‚‹ã®ã‹ã‚ˆãã‚ã‹ã‚‰ãªã„</li><li>ä»–ã®äººã®ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã‚ˆã†ã¨ã—ã¦ã‚‚è‰¯ãã‚ã‹ã‚‰ãªãã¦ãã£ã¨ã‚¿ãƒ–ã‚’é–‰ã˜ã¦ã—ã¾ã†<ul><li>åˆ†ã‹ã‚‰ãªã„ã“ã¨ã‚’ç†è§£ã™ã‚‹æˆé•·ãƒãƒ£ãƒ³ã‚¹ã‚’ç„¡é§„ã«ã—ã¦ã„ã‚‹ã®ã§ã¯</li></ul></li><li>ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ãŒé•·ã„<ul><li>ç´°ã‹ã PR ã‚’æŠ•ã’ãŸãã¦ã‚‚å‰ã®ãŒãƒãƒ¼ã‚¸ã•ã‚Œã¦ãªã„ã¨å…ˆã«é€²ã‚ãªã„</li><li>ãƒãƒ¼ã‚¸ã•ã‚Œãªã„ã¾ã¾ master ãŒæ›´æ–°ã•ã‚Œã¦é€ä¸€ rebase ã—ãªã„ã¨ã„ã‘ãªã„</li></ul></li><li>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å“è³ªã®ä½ä¸‹<ul><li>ã‚ˆãã‚ã‹ã‚‰ãªã„ã‘ã©ãƒãƒ¼ã‚¸ã—ã¦ã—ã¾ãˆ: ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ„å‘³ãŒãªã„</li></ul></li><li>issue ã‚„ PR ã®èª¬æ˜ã‚„ã‚³ãƒ¡ãƒ³ãƒˆãŒè¶³ã‚Šã¦ãªã„<ul><li>èª¬æ˜ã‚’è‹±èªã§æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã¨ã‹ã ã¨ã€èª¬æ˜ä¸è¶³ã«ãªã‚Šã‚„ã™ã„</li><li>ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§å£é ­ã§èª¬æ˜ã—ã¦ã¿ã‚‹ã¨ã€ issue ã‚„ PR ã«æ›¸ã„ã¦ãªã„æƒ…å ±ãŒå‡ºã¦ãã‚‹
ãã®æƒ…å ±ã‚’è¿½è¨˜ã™ã‚‹ã“ã¨ã§(å£é ­ã§èª¬æ˜ã™ã‚‹ã ã‘ã§ã¯ã ã‚ã€‚å¾Œã‹ã‚‰ãã®å ´ã«ã„ãªã‹ã£ãŸäººã‚‚è¦‹è¿”ã™ã‚‚ã®)æ”¹å–„ã§ãã‚‹</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®Ÿæ–½æ–¹æ³•">å®Ÿæ–½æ–¹æ³•<a href="#å®Ÿæ–½æ–¹æ³•" class="hash-link" aria-label="Direct link to å®Ÿæ–½æ–¹æ³•" title="Direct link to å®Ÿæ–½æ–¹æ³•">â€‹</a></h2><p>å®šä¾‹ã‚’çµ„ã‚€ã®ã‚‚ã‚ã‚Šã§ã™ãŒã€å€‹äººçš„ã«ã¯äºˆå®šã‚’æŠ¼ã•ãˆãªãã¦ã‚‚å ´æ‰€ã‚’ç¢ºä¿ã§ãã‚‹ã®ãªã‚‰(ãƒ•ãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¹ã¨ã‹ã«ãƒ¢ãƒ‹ã‚¿ãƒ¼ãŒã‚ã£ã¦ã‚µãƒƒã¨å‡ºæ¥ã‚‹ãªã‚‰ç†æƒ³çš„)ä¸å®šæœŸãŒã„ã„ã¨æ€ã„ã¾ã™ã€‚
ã‚„ã‚ŠãŸããªã£ãŸã‚‰ãã®æ—¨ã‚’ Slack ã§ã‚µãƒƒã¨å…±æœ‰ã—ã€ãã®å ´ã§ç›´ãã§ãã‚‹ãªã‚‰ã‚„ã‚Šã€
ã§ããªã„å ´åˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¦‹ã¦ç©ºã„ã¦ãã†ãªæ ã‚’è¦‹ã¤ã‘ã¦äºˆå®šã‚’æŠ¼ã•ãˆã‚‹ã‹ã€Slackã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚
ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§è©±ã—ã¦ã„ã‚‹å†…å®¹ã‚„ã€è³ªç–‘å¿œç­”ãªã©ã¯ Slack ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã«ã§ã‚‚ãƒ¡ãƒ¢ã£ã¦ãŠãã¨è‰¯ã•ãã†ã§ã™ã€‚
issue ã‚„ PR ã®èª¬æ˜ã«æ›¸ã„ã¦ãªã„ã“ã¨ãŒå‡ºã¦ããŸã‚‰ã€èª¬æ˜ã‚’ä¿®æ­£ã—ã¦è¿½è¨˜ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®šæœŸçš„ã«äºˆå®šã‚’ã„ã‚Œã‚‹æ‡¸å¿µç‚¹">å®šæœŸçš„ã«äºˆå®šã‚’ã„ã‚Œã‚‹æ‡¸å¿µç‚¹<a href="#å®šæœŸçš„ã«äºˆå®šã‚’ã„ã‚Œã‚‹æ‡¸å¿µç‚¹" class="hash-link" aria-label="Direct link to å®šæœŸçš„ã«äºˆå®šã‚’ã„ã‚Œã‚‹æ‡¸å¿µç‚¹" title="Direct link to å®šæœŸçš„ã«äºˆå®šã‚’ã„ã‚Œã‚‹æ‡¸å¿µç‚¹">â€‹</a></h3><ul><li>å®šä¾‹ã¯å°‘ãªã„ã»ã†ãŒè‰¯ã„</li><li>å½¢å¼çš„ã«ãªã‚‹</li><li>å®šä¾‹ã¾ã§å¾…ãŸãªãã¦è‰¯ã„ã®ã§ã¯</li><li>å®šä¾‹ã¾ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ãªã„ã¨ã„ã†ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒåƒãå ´åˆã‚‚ã‚ã‚‹ã®ã§ã¯</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚„ã‚ŠãŸããªã£ãŸã‚‰ã‚„ã‚‹å ´åˆã®æ‡¸å¿µç‚¹">ã‚„ã‚ŠãŸããªã£ãŸã‚‰ã‚„ã‚‹å ´åˆã®æ‡¸å¿µç‚¹<a href="#ã‚„ã‚ŠãŸããªã£ãŸã‚‰ã‚„ã‚‹å ´åˆã®æ‡¸å¿µç‚¹" class="hash-link" aria-label="Direct link to ã‚„ã‚ŠãŸããªã£ãŸã‚‰ã‚„ã‚‹å ´åˆã®æ‡¸å¿µç‚¹" title="Direct link to ã‚„ã‚ŠãŸããªã£ãŸã‚‰ã‚„ã‚‹å ´åˆã®æ‡¸å¿µç‚¹">â€‹</a></h3><ul><li>ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã®ãŒé¢å€’ãã•ã„(ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚‹)</li><li>äººã«ã‚ˆã£ã¦ã¯èºŠèº‡ã—ã¦ã—ã¾ã†</li><li>å ´æ‰€ã‚’ç¢ºä¿ã§ããªã„ã‹ã‚‚</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ‡¸å¿µç‚¹">æ‡¸å¿µç‚¹<a href="#æ‡¸å¿µç‚¹" class="hash-link" aria-label="Direct link to æ‡¸å¿µç‚¹" title="Direct link to æ‡¸å¿µç‚¹">â€‹</a></h2><ul><li>è¤‡æ•°äººã®æ™‚é–“ã‚’æ‹˜æŸã—ã¦å®Ÿæ–½ã™ã‚‹ã“ã¨ã®ã‚³ã‚¹ãƒˆ</li><li>å£é ­ã§èª¬æ˜ã™ã‚‹ã“ã¨ã«ç”˜ãˆã¦ã¡ã‚ƒã‚“ã¨ issue ã‚„ PR ã«æ›¸ã‹ãªããªã‚‹<ul><li>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ®µéšã§æŒ‡æ‘˜ã™ã‚‹</li></ul></li><li>å ´æ‰€ã‚’æŠ¼ã•ãˆã‚‰ã‚Œã‚‹ã‹<ul><li>ä¼šè­°å®¤è¶³ã‚Šãªã„å•é¡Œ</li></ul></li><li>ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ„ç¾©ã‚’å…±æœ‰ã§ãã‚‹ã‹<ul><li>äººã«ã‚ˆã£ã¦ã¯æ™‚é–“ã®ç„¡é§„ã¨æ€ã†äººãŒã„ã¦ã‚‚ãŠã‹ã—ããªã„</li><li>ä¸æº€ã‚„ææ¡ˆãŒã‚ã£ãŸã¨ãã«ã¡ã‚ƒã‚“ã¨ãã‚Œã‚’è¨€ãˆã‚‹ç’°å¢ƒã§ã‚ã‚ŠãŸã„</li></ul></li></ul><p>ã¡ã‚ƒã‚“ã¨æ–‡ç« åŒ–ã™ã‚‹ã®ã‚’ã‚ã‚“ã©ãã•ãŒã£ã¦å£é ­ã§ã®èª¬æ˜ã§æ¸ˆã¾ã—ãŸãŒã‚‹ã‚ˆã†ã«ãªã£ãŸã‚‰ã‚ˆã‚ã—ããªã„ã§ã™ã­ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªåˆ†ã®åçœç‚¹">è‡ªåˆ†ã®åçœç‚¹<a href="#è‡ªåˆ†ã®åçœç‚¹" class="hash-link" aria-label="Direct link to è‡ªåˆ†ã®åçœç‚¹" title="Direct link to è‡ªåˆ†ã®åçœç‚¹">â€‹</a></h2><p>ã“ã“ã¾ã§æ›¸ã„ã¦å‡ºã¦ããŸè‡ªåˆ†ã®åçœç‚¹ã¨ã—ã¦ã¯ã€ issue ã‚„ PR ã®èª¬æ˜ã§ã¡ã‚ƒã‚“ã¨ Context ã‚„ Background ã‚’ã‚‚ã£ã¨ã¡ã‚ƒã‚“ã¨æ›¸ã‹ãªã„ã¨é§„ç›®ã‹ãªã¨ã„ã†ã“ã¨ã§ã™ã€‚
å£é ­ã§èª¬æ˜ã™ã‚‹éš›ã«ã¯ãã®ã¸ã‚“ã‚’æœ€åˆã«æ„è­˜ã—ã¦è©±ã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ãŒã€èª¬æ˜ã«ã¯æ›¸ã„ã¦ãªã„ã“ã¨ãŒå°‘ãªããªã„ã®ã§ã¡ã‚ƒã‚“ã¨æ›¸ãã‚ˆã†ã«ã—ã‚ˆã†ã¨æ€ã„ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚€ã™ã³">ã‚€ã™ã³<a href="#ã‚€ã™ã³" class="hash-link" aria-label="Direct link to ã‚€ã™ã³" title="Direct link to ã‚€ã™ã³">â€‹</a></h2><p>ä»Šå›ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã¤ã„ã¦ã‚ã‚Œã“ã‚Œè€ƒãˆã¦ã¿ã¾ã—ãŸã€‚
ã¾ã ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ 2, 3 å›ã‚„ã£ãŸç¨‹åº¦ãªã®ã§ã€ã¡ã‚ƒã‚“ã¨å–ã‚Šçµ„ã‚“ã§ã¿ã¦ PDCA å›ã—ã¦æ”¹å–„å‡ºæ¥ãŸã‚‰è‰¯ã„ãªã¨æ€ã„ã¾ã™ã€‚
ä¾‹ãˆã°ã€ä»Šã®æ‰€å®šæœŸã§ã¯ã‚„ã‚ŠãŸããªã„ã¨æ€ã£ã¦ã¾ã™ãŒã€ã‚„ã£ã¦ã¿ãŸã‚‰ã¡ã‚ƒã‚“ã¨å®šæœŸã˜ã‚ƒãªã„ã¨é§„ç›®ã ã£ãŸã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã—ã€
ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ç›®çš„ã˜ã‚ƒãªãã¦æ‰‹æ®µãªã®ã§ã€ä»–ã«ã‚‚ã£ã¨ã‚ˆã„æ‰‹æ®µãŒã‚ã£ã¦ãƒ¢ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸è¦ã ã£ãŸã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ã‚„ã‚‰ãªã„ã¨å§‹ã¾ã‚‰ãªã„ã®ã§ã‚„ã‚ŒãŸã‚‰ã„ã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[go-timeout - command ã® timeout]]></title>
            <link>https://techblog.szksh.cloud/go-timeout</link>
            <guid>https://techblog.szksh.cloud/go-timeout</guid>
            <pubDate>Mon, 04 Nov 2019 01:00:21 GMT</pubDate>
            <description><![CDATA[ä½œã£ãŸã®ã¯ 2ãƒ¶æœˆãã‚‰ã„å‰ã®è©±ã§ã™ãŒã€]]></description>
            <content:encoded><![CDATA[<p>ä½œã£ãŸã®ã¯ 2ãƒ¶æœˆãã‚‰ã„å‰ã®è©±ã§ã™ãŒã€
Go ã® command ã® timeout ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-timeout" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-timeout</a></p><p>åŸºæœ¬çš„ã«ã¯ <a href="https://github.com/Songmu/timeout" target="_blank" rel="noopener noreferrer">https://github.com/Songmu/timeout</a> ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ãŒã€ã“ã‚Œã ã¨ä¸Šæ‰‹ãã„ã‹ãªã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã£ãŸã®ã§è‡ªä½œã—ã¾ã—ãŸã€‚</p><p>Go ã® command ã® timeout ã«é–¢ã—ã¦ã¯ <a href="https://junkyard.song.mu/slides/gocon2019-spring/#24" target="_blank" rel="noopener noreferrer">https://junkyard.song.mu/slides/gocon2019-spring/#24</a> ãŒã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã™ã€‚</p><p>ä¸Šè¨˜ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã§ã¯</p><ul><li>æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã® <a href="https://golang.org/pkg/os/exec/#CommandContext" target="_blank" rel="noopener noreferrer">exec.CommandContext</a> ã§ã‚‚åœæ­¢ã§ãã‚‹ãŒã€ SIGKILL ã§å¼·åˆ¶çš„ã«åœæ­¢ã™ã‚‹ã“ã¨ã«ãªã‚‹<ul><li>å­ãƒ—ãƒ­ã‚»ã‚¹ãŒåœæ­¢ã—ãªã„</li></ul></li><li><a href="https://github.com/golang/go/issues/21135" target="_blank" rel="noopener noreferrer">å…¬å¼è¦‹è§£</a> ã§ã¯ã€SIGKILL ä»¥å¤–ã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ã‚µãƒãƒ¼ãƒˆã—ãªã„ã€‚ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã§ã‚„ã‚Œã°ã‚ˆã„</li><li><a href="https://github.com/Songmu/timeout" target="_blank" rel="noopener noreferrer">Songmu/timeout</a> ä½¿ãˆã° SIGKILL ä»¥å¤–ã§ã‚ˆã‚Šå®‰å…¨ã«åœæ­¢ã§ãã‚‹</li></ul><p>ã¨ã„ã†ã“ã¨ãŒä¸å¯§ã«èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>è‡ªåˆ†ã¯ <a href="https://github.com/suzuki-shunsuke/cmdx" target="_blank" rel="noopener noreferrer">cmdx</a> ã¨ã„ã† task runner ã‚’é–‹ç™ºã—ã¦ã„ã¦ãã®ä¸­ã§ task ã®å®Ÿè¡Œæ™‚ã« timeout ã‚’è¨­å®šå‡ºæ¥ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
å½“åˆ <a href="https://github.com/Songmu/timeout" target="_blank" rel="noopener noreferrer">Songmu/timeout</a> ã‚’ä½¿ã£ã¦å®Ÿè£…ã—ãŸã®ã§ã™ãŒã€å•é¡ŒãŒã‚ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚
ãã‚Œã¯ã€ command ã®ä¸­ã§ <a href="https://github.com/junegunn/fzf" target="_blank" rel="noopener noreferrer">fzf</a> ã‚’ä½¿ã†ã¨ã€ä¸Šæ‰‹ãå‹•ã‹ãªã„ã¨ã„ã†ã‚‚ã®ã§ã—ãŸã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/cmdx/issues/52" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/cmdx/issues/52</a></li><li><a href="https://twitter.com/szkdash/status/1165529415238815745" target="_blank" rel="noopener noreferrer">https://twitter.com/szkdash/status/1165529415238815745</a></li></ul><p>æ­£ç›´ã“ã®è¾ºã®æŒ™å‹•ã¯ã¡ã‚ƒã‚“ã¨ç†è§£ã§ãã¦ã„ãªã„ã®ã§ã™ãŒã€
èª¿ã¹ã¦ã¿ã‚‹ã¨ Songmu/timeout ã ã¨ syscall.SysProcAttr ã® Setpgid ã‚’ true ã«è¨­å®šã—ã¦ã„ã¦ã€ãã†ã™ã‚‹ã¨ fzf ãŒä¸Šæ‰‹ãå‹•ã‹ãªã„ã‚ˆã†ã§ã—ãŸã€‚</p><p><a href="https://junkyard.song.mu/slides/gocon2019-spring/#48" target="_blank" rel="noopener noreferrer">https://junkyard.song.mu/slides/gocon2019-spring/#48</a></p><p><a href="https://junkyard.song.mu/slides/gocon2019-spring/#45" target="_blank" rel="noopener noreferrer">https://junkyard.song.mu/slides/gocon2019-spring/#45</a></p><p>ã«ã¯ timeout ã®å®Ÿè£…æ–¹å¼ã¨ã—ã¦</p><ul><li>GNU timeout ã®å ´åˆ</li><li>Songmu timeout ã®å ´åˆ</li></ul><p>ã® 2 é€šã‚Šæ›¸ã„ã¦ã‚ã‚Šã¾ã™ãŒã€ suzuki-shunsuke/go-timeout ã§ã¯ GNU timeout ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ </p><p><a href="https://junkyard.song.mu/slides/gocon2019-spring/#46" target="_blank" rel="noopener noreferrer">https://junkyard.song.mu/slides/gocon2019-spring/#46</a></p><p>ã«æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Šã€å°‘ã€…ä¹±æš´ãªæ°—ã‚‚ã—ã¾ã™ãŒã€ <a href="https://github.com/suzuki-shunsuke/cmdx" target="_blank" rel="noopener noreferrer">cmdx</a> ã§ä½¿ã†åˆ†ã«ã¯ç‰¹ã«å•é¡Œãªã„æ°—ãŒã—ã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>golang</category>
        </item>
        <item>
            <title><![CDATA[cmdx - task runner]]></title>
            <link>https://techblog.szksh.cloud/cmdx</link>
            <guid>https://techblog.szksh.cloud/cmdx</guid>
            <pubDate>Fri, 23 Aug 2019 02:35:13 GMT</pubDate>
            <description><![CDATA[æœ€è¿‘è‡ªä½œã—ãŸ OSS, cmdx ã®ç´¹ä»‹ã§ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>æœ€è¿‘è‡ªä½œã—ãŸ OSS, cmdx ã®ç´¹ä»‹ã§ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/cmdx" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/cmdx</a></p><p>cmdx ã¯ task runner ã§ã™ã€‚</p><p><code>task runner</code> ã®å®šç¾©ã¯ã‚°ã‚°ã£ã¦ã‚‚ã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã€ cmdx ã‚’ <code>task runner</code> ã¨å‘¼ã¶ã®ãŒé©åˆ‡ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€
ã“ã“ã§ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ã‚¿ã‚¹ã‚¯</p><ul><li>ä¾å­˜ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li><li>ãƒ“ãƒ«ãƒ‰</li><li>ãƒ†ã‚¹ãƒˆ</li><li>ã‚³ãƒ¼ãƒ‰æ•´å½¢</li><li>lint</li><li>etc</li></ul><p>ãªã©ã‚’ç®¡ç†ã™ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</p><p>é¡ä¼¼ã™ã‚‹ã‚‚ã®ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>Make</li><li><a href="https://docs.npmjs.com/misc/scripts" target="_blank" rel="noopener noreferrer">npm scripts</a></li><li><a href="https://taskfile.dev/" target="_blank" rel="noopener noreferrer">Task</a></li><li><a href="https://github.com/tj/robo" target="_blank" rel="noopener noreferrer">tj/robo</a></li><li><a href="https://github.com/mumoshu/variant" target="_blank" rel="noopener noreferrer">mumoshu/variant</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ã„æ–¹">ä½¿ã„æ–¹<a href="#ä½¿ã„æ–¹" class="hash-link" aria-label="Direct link to ä½¿ã„æ–¹" title="Direct link to ä½¿ã„æ–¹">â€‹</a></h2><p>è©³ç´°ã¯ <a href="https://github.com/suzuki-shunsuke/cmdx/blob/master/README.md" target="_blank" rel="noopener noreferrer">README</a> ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cmdx -i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®é››å½¢ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p><p>ãã—ã¦è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã« task ã‚’å®šç¾©ã—ã¦ã„ãã¾ã™ã€‚
è¨­å®šã«é–¢ã—ã¦ã¯ <a href="https://github.com/suzuki-shunsuke/cmdx/blob/master/README.md" target="_blank" rel="noopener noreferrer">README</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><p>ãã†ã™ã‚‹ã¨ <code>cmdx -l</code> ã§ã‚¿ã‚¹ã‚¯ã®ä¸€è¦§ã¨ãã®èª¬æ˜ãŒè¦‹ã‚Œã¾ã™ã€‚</p><p>ä¾‹ãˆã°æ¬¡ã¯ <a href="https://github.com/suzuki-shunsuke/cmdx" target="_blank" rel="noopener noreferrer">cmdx</a> ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã®å®Ÿè¡Œçµæœã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cmdx -l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">init, i - setup git hooks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">coverage, c - test a package (fzf is required)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test, t - test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt - format the go code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vet, v - go vet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lint, l - lint the go code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">release, r - release the new version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">durl - check dead links (durl is required)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ci-local - run the Drone pipeline at localhost (drone-cli is required)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚Œã«ã‚ˆã‚Šæ–°ã—ããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å‚ç”»ã—ãŸäººã‚‚ã©ã®ã‚ˆã†ãª task ãŒã‚ã‚‹ã®ã‹ç›´ãã‚ã‹ã‚Šã¾ã™ã€‚
ä¾‹ãˆã° test ã‚’å®Ÿè¡Œã—ãŸã‘ã‚Œã° <code>cmdx t</code> ã‚’å®Ÿè¡Œã™ã‚Œã°ã„ã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚
<code>cmdx help test</code> ã¨ã™ã‚Œã°ã“ã“ã®ã‚¿ã‚¹ã‚¯ã®ã‚ˆã‚Šè©³ç´°ãªãƒ˜ãƒ«ãƒ—ãŒè¦‹ã‚Œã¾ã™ã€‚</p><p>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã« task ã«ã¤ã„ã¦æ›¸ã„ã¦ã‚‚ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã¡ã‚ƒã‚“ã¨æ›´æ–°ã•ã‚Œãšãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨å®Ÿæ…‹ãŒä¹–é›¢ã™ã‚‹ãªã‚“ã¦ã“ã¨ã¯ã‚ˆãã‚ã‚Šã¾ã™ãŒã€
cmdx ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ˜ãƒ«ãƒ—ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã§ä¹–é›¢ã—ã«ãããªã‚Šã¾ã™(å®Ÿéš›ã«ä½¿ã‚ã‚Œã¦ãªã„ task ãŒæ®‹ã£ã¦ãŸã‚Šã€task ã® description ã‚„ usage ãŒé–“é•ã£ã¦ãŸã‚‰é§„ç›®ã§ã™ãŒ)ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãªãœ-cmdx-ã‹">ãªãœ cmdx ã‹<a href="#ãªãœ-cmdx-ã‹" class="hash-link" aria-label="Direct link to ãªãœ cmdx ã‹" title="Direct link to ãªãœ cmdx ã‹">â€‹</a></h2><p>è‡ªåˆ†ã¯ä»Šã¾ã§ task runner ã¨ã—ã¦åŸºæœ¬çš„ã« npm scripts ã‚’ä½¿ã£ã¦ãã¦ã„ã¦ã€ãƒ–ãƒ­ã‚°ã«ã‚‚æ›¸ã„ã¦ã„ã¾ã™ã€‚</p><p><a href="https://techblog.szksh.cloud/use-npm/" target="_blank" rel="noopener noreferrer">JSä»¥å¤–ã§ã®npmã®æ´»ç”¨</a></p><p>ã—ã‹ã—ã€ npm scripts ã«å¯¾ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªä¸æº€ãŒã‚ã‚Šã¾ã—ãŸã€‚</p><ul><li>security alert ãŒå®šæœŸçš„ã«é£›ã‚“ã§ãã¦å¯¾å¿œãŒé¢å€’ãã•ã„<ul><li>ã“ã‚Œã¯ husky ã‚„ commitlint ãªã©ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ãŒåŸå› ãªã®ã§ã‚ã£ã¦ã€ npm scripts ã®å•é¡Œã§ã¯ãªã„ã§ã™ãŒ</li></ul></li><li>task ã«å¯¾ã™ã‚‹ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãªã„<ul><li>ä»Šã¾ã§ã¯ README ã«æ›¸ã„ã¦ãŸãŒã€æœ¬æ¥ã¯ help ã‚³ãƒãƒ³ãƒ‰ã§è‡ªå‹•ç”Ÿæˆãƒ»ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã¹ãã ã¨æ€ã£ã¦ã„ã‚‹</li></ul></li></ul><p>ä»–ã®ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦ã“ã‚Œã‚‰ã®ä¸æº€ã¯è§£æ¶ˆã§ãã‚‹ã®ã§ã™ãŒã€ä»–ã®ãƒ„ãƒ¼ãƒ«ã«ã‚‚ãã‚Œãã‚Œå¾®å¦™ã«ä¸æº€ãŒã‚ã‚Šã€
å®Œå…¨ã«è‡ªåˆ†ã®ãƒ‹ãƒ¼ã‚ºã«åˆã†ã‚‚ã®ãŒãªã‹ã£ãŸã®ã§ä½œã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>ä¸€ä¾‹ã§ã™ãŒã€ npm scripts ã¯</p><ul><li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (package.json) ã‚’æ¢ç´¢</li><li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ</li></ul><p>ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Š</p><ul><li>ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ„è­˜ã™ã‚‹å¿…è¦ãŒãªã„<ul><li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒãªã„</li><li>ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¾å­˜ã—ãªã„(é€†ã«è¨€ã†ã¨ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¾å­˜ã—ãŸå‡¦ç†ã‚’å®Ÿè¡Œã—ã«ãã„ã¨ã„ã†é¢ã‚‚ã‚ã‚Šã¾ã™ãŒ)</li></ul></li></ul><p>ã¨ã„ã†è‰¯ã•ãŒã‚ã‚Šã€ ã“ã‚ŒãŒæ„å¤–ã¨ä»–ã®ãƒ„ãƒ¼ãƒ«ã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãªã(ä¾‹ãˆã° Make ã ã£ãŸã‚‰ <code>-F</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ Makefile ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹)ã€ä¸æº€ã§ã—ãŸã€‚</p><p>ã¾ãŸã€ Make ã‚„ Task ã§ã¯ task ã®ä¾å­˜é–¢ä¿‚ã‚’å®šç¾©ã—ã€ä¸€å›ã®ã‚³ãƒãƒ³ãƒ‰ã§è¤‡æ•°ã®ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã§ãã¾ã™ãŒã€
cmdx ã§ã¯ãã®ã‚ˆã†ãªæ©Ÿèƒ½ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
è‡ªåˆ†ãŒæ™®æ®µãã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’ã‚ã¾ã‚Šå¿…è¦ã¨ã—ã¦ã„ãªã„ã‹ã‚‰ã§ã™ã€‚</p><p>cmdx ã§ã¯ä¸Šã®ã‚ˆã†ãª npm scripts ã®ä¸æº€ã‚’è§£æ¶ˆã™ã‚‹ã ã‘ã§ãªãã€æŠ˜è§’ãªã®ã§å¹¾ã¤ã‹ç´°ã‹ãªæ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚</p><ul><li>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã ã¨é¢å€’ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³å¼•æ•°ã‚’ã‚µãƒãƒ¼ãƒˆ</li><li>ãƒªãƒƒãƒãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚µãƒãƒ¼ãƒˆ</li><li>ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</li><li>etc</li></ul><p>cmdx ã‹ã‚‰ npm scripts ã«ä¹—ã‚Šæ›ãˆãŸå ´åˆã®å•é¡Œç‚¹ã¨ã—ã¦ã¯ husky ã‚„ commitlint ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ãŒä½¿ãˆãªããªã‚‹ã“ã¨ã§ã™ãŒã€
å¿…é ˆã®ãƒ„ãƒ¼ãƒ«ã§ã‚‚ãªã„ã®ã§è¨±å®¹ã—ã¦ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[Drone Extension ã®ãƒªã‚¹ã‚¯]]></title>
            <link>https://techblog.szksh.cloud/risk-of-drone-extension</link>
            <guid>https://techblog.szksh.cloud/risk-of-drone-extension</guid>
            <pubDate>Wed, 14 Aug 2019 22:54:23 GMT</pubDate>
            <description><![CDATA[Drone v1 ã§ã¯ Extension ã¨ã„ã†ä»•çµ„ã¿ãŒå°å…¥ã•ã‚Œã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>Drone v1 ã§ã¯ Extension ã¨ã„ã†ä»•çµ„ã¿ãŒå°å…¥ã•ã‚Œã¾ã—ãŸã€‚</p><p>ã“ã‚Œã¯æ–‡å­—é€šã‚Š Drone ã‚’æ‹¡å¼µã™ã‚‹ä»•çµ„ã¿ã§ã€ä»•æ§˜ã«å¾“ã£ã¦ä½œã‚Œã°è‡ªç”±ã« Drone ã‚’æ‹¡å¼µã§ãã¾ã™ã€‚</p><p><a href="https://docs.drone.io/extensions/overview/" target="_blank" rel="noopener noreferrer">https://docs.drone.io/extensions/overview/</a></p><p>å…¨ã¦ã‚’æœ¬ä½“ã§ã‚„ã‚‹ã®ã§ã¯ãªãã€æ‹¡å¼µã™ã‚‹ä»•çµ„ã¿ã‚’æä¾›ã—ã€ã‚ã¨ã¯ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«å§”ã­ã‚‹ã¨ã„ã†ã®ãŒ Drone ã®ä¸€ã¤ã®æ–¹é‡ã¨ã‚‚è¨€ãˆã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>Extension ã¯éå¸¸ã«é¢ç™½ã„ä»•çµ„ã¿ã ã¨æ€ã„ã¾ã™ãŒã€ Drone ã‚’é‹ç”¨ã™ã‚‹ç«‹å ´ã‹ã‚‰ã™ã‚‹ã¨ä¸­ã€…é ­ãŒç—›ã„ä»•çµ„ã¿ãªæ°—ãŒã—ã¦ã¦ã€
è‡ªåˆ†ã¯å°å…¥ã«å¯¾ã—æ…é‡ãªç«‹å ´ã§ã™ã€‚
å˜ãªã‚‹ææ†‚ã§æ¸ˆã‚ã°è‰¯ã„ã®ã§ã™ãŒã€ãã®æ‡¸å¿µã«ã¤ã„ã¦æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>æ ¹æœ¬ã¯ Drone Extension å›ºæœ‰ã®å•é¡Œã¨è¨€ã†ã‚ˆã‚Šã€ä¸€èˆ¬çš„ãªæ‹¡å¼µæ©Ÿæ§‹å…¨èˆ¬ã«è¨€ãˆã‚‹ã“ã¨ã ã¨æ€ã„ã¾ã™ã€‚
ãŸã ã—ã€ Drone Extension ã¯å…¨ã¦ã®ãƒ“ãƒ«ãƒ‰ã«å½±éŸ¿ã‚’åŠã¼ã™ã€
CI/CDã‚·ã‚¹ãƒ†ãƒ ãŒå‹•ã‹ãªããªã‚‹ã¨ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒªãƒªãƒ¼ã‚¹ã«å½±éŸ¿ã‚’åŠã¼ã—ã‹ã­ãªã„ã¨ã„ã†ã“ã¨ã‹ã‚‰ã‚ˆã‚Šãƒªã‚¹ã‚¯ã®é«˜ã„ã‚‚ã®ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><ul><li>æœ¬ä½“ã® drone/drone ã¨æ¯”ã¹ã€é–‹ç™ºã¯æ´»ç™ºã§ã¯ãªãã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã® extension ã¯ã„ã¤é–‹ç™ºãŒæ­¢ã¾ã£ã¦ã‚‚ãŠã‹ã—ããªã„</li><li>æœ¬ä½“ã® drone/drone ã¨æ¯”ã¹ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ã‚µãƒãƒ¼ãƒˆä½“åˆ¶ãŒè²§å¼±ã ã¨æ€ã‚ã‚Œã‚‹(drone ã«é–¢ã—ã¦ã¯ <a href="https://discourse.drone.io" target="_blank" rel="noopener noreferrer">https://discourse.drone.io</a> ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãŒã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã® extension ã§ã¯é›£ã—ã„)</li><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã® extension ã«é–¢ã™ã‚‹è¦æœ›ã‚’å—ã‘ä»˜ã‘ã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ã€ç®¡ç†è€…ã®è² æ‹…ã«ãªã‚‹</li><li>extension ã®ã‚¯ã‚©ãƒªãƒ†ã‚£ã¯ãƒãƒãƒãƒã§ã‚ã‚Šã€ä¾‹å¤–å‡¦ç†ãŒç”˜ã‹ã£ãŸã‚Šã€ã¡ã‚ƒã‚“ã¨ã‚¨ãƒ©ãƒ¼ã‚’åã‹ãªã„ã‚‚ã®ã‚‚ã‚ã‚‹ã ã‚ã†</li><li>ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒé›£ã—ã„ã¨æ€ã‚ã‚Œã‚‹</li><li>extension ã®ä»•çµ„ã¿ä¸Šã€extension ã‚’å¿…è¦ã¨ã—ãªã„ãƒ“ãƒ«ãƒ‰ã«ã‚‚å½±éŸ¿ã‚’åŠã¼ã—ã†ã‚‹</li><li>ä¸€åº¦è¿½åŠ ã—ã€ä¾å­˜ã—ã ã™ã¨æ¶ˆã™ã®ãŒé›£ã—ããªã‚‹</li><li>extension ãŒè½ã¡ã‚‹ã¨å…¨ build ã«å½±éŸ¿ã™ã‚‹ã®ã§ã€è€éšœå®³æ€§(å†—é•·åŒ–)ã€ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãŒå¿…è¦</li><li>etc</li></ul><p>å‹¿è«–ã€ä¸Šè¨˜ã®æ‡¸å¿µç‚¹ã¯ Extension ã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹æ©Ÿèƒ½ã¨ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã§ã‚ã‚Šã€
Extension ã®å°å…¥æ–¹é‡ã¯ Drone ãŒé‹ç”¨ã•ã‚Œã‚‹ç’°å¢ƒã«ã‚ˆã£ã¦å¤§ããä¾å­˜ã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ä¾‹ãˆã°å…¨å“¡ãŒé¡”è¦‹çŸ¥ã‚Šã®ã‚ˆã†ãªå°ã•ãªçµ„ç¹”ã§ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹å°‚ç”¨ã« Drone ã‚’ä½¿ã£ã¦ã„ã¦ã‹ã¤ Drone ã®é‹ç”¨ä½“åˆ¶(äººå“¡)ã«ååˆ†ä½™è£•ãŒã‚ã‚‹ãªã‚‰
ç©æ¥µçš„ã« Extension ã‚’å°å…¥ã—ã¦ã‚‚å•é¡Œãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ä¸€æ–¹å¤§ããªçµ„ç¹”ã§è‰²ã€…ãªã‚µãƒ¼ãƒ“ã‚¹ã§åŒã˜ Drone ã‚’ä½¿ã£ã¦ã„ã¦ã‹ã¤ Drone ã®é‹ç”¨ä½“åˆ¶ãŒä¸ååˆ†(äººæ‰‹ä¸è¶³)ãªã‚‰ã°ã€ Extension ã®å°å…¥ã«ã¯æ…é‡ã«ãªã‚‰ã–ã‚‹ã‚’å¾—ãªã„ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[Drone v1 ã§ gRPC ãŒä½¿ã‚ã‚Œãªããªã£ãŸ]]></title>
            <link>https://techblog.szksh.cloud/drone-v1-deprecate-grpc</link>
            <guid>https://techblog.szksh.cloud/drone-v1-deprecate-grpc</guid>
            <pubDate>Wed, 14 Aug 2019 22:39:18 GMT</pubDate>
            <description><![CDATA[v0.8 ã§ã¯ server - agent é–“ã®é€šä¿¡ã« gPRC ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã—ãŸãŒã€ v1 ã§ã¯ä½¿ã‚ã‚Œãªããªã‚Šã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>v0.8 ã§ã¯ server - agent é–“ã®é€šä¿¡ã« gPRC ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã—ãŸãŒã€ v1 ã§ã¯ä½¿ã‚ã‚Œãªããªã‚Šã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç†ç”±">ç†ç”±<a href="#ç†ç”±" class="hash-link" aria-label="Direct link to ç†ç”±" title="Direct link to ç†ç”±">â€‹</a></h2><ul><li><a href="https://discourse.drone.io/t/curious-about-decision-to-drop-grpc/3987" target="_blank" rel="noopener noreferrer">https://discourse.drone.io/t/curious-about-decision-to-drop-grpc/3987</a><ul><li>gRPCé–¢é€£ã®ãƒˆãƒ©ãƒ–ãƒ«ã®å•ã„åˆã‚ã›ãŒå¤šã™ãã¦ã‚µãƒãƒ¼ãƒˆã—ãã‚Œãªã„ã®ã§æ­¢ã‚ãŸ</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v1-ã§ã®é€šä¿¡æ–¹æ³•">v1 ã§ã®é€šä¿¡æ–¹æ³•<a href="#v1-ã§ã®é€šä¿¡æ–¹æ³•" class="hash-link" aria-label="Direct link to v1 ã§ã®é€šä¿¡æ–¹æ³•" title="Direct link to v1 ã§ã®é€šä¿¡æ–¹æ³•">â€‹</a></h2><ul><li><a href="https://discourse.drone.io/t/drone-agents-keep-closing-connections-with-499-code/5197/2" target="_blank" rel="noopener noreferrer">https://discourse.drone.io/t/drone-agents-keep-closing-connections-with-499-code/5197/2</a><ul><li>agent ãŒãƒ­ãƒ³ã‚°ãƒãƒ¼ãƒªãƒ³ã‚°ã—ã¦ã„ã‚‹</li><li>30ç§’å¾Œã€ãªã‚“ã®ãƒ“ãƒ«ãƒ‰ã‚‚ãªã‘ã‚Œã°ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’åˆ‡ã£ã¦ã€å†æ¥ç¶šã™ã‚‹(å¼µã‚Šã£ã±ãªã—ã«ã—ã¦ã‚‹ã¨ã€LBã‚„ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã«ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³åˆ‡ã‚‰ã‚Œã‚‹ãŸã‚)</li></ul></li></ul><hr><p>è‡ªåˆ†ã‚‚ v0.8 ã‹ã‚‰ Drone ã‚’é‹ç”¨ã—ã¦ã„ã¦æœ€è¿‘ v1 ã« upgrade ã—ã¾ã—ãŸãŒã€
v0.8 ã§ã¯ gRPC é–¢é€£ã®ãƒˆãƒ©ãƒ–ãƒ«ãŒé »ç™ºã—ã¦ã„ã¾ã—ãŸã€‚
server ã®ãƒ­ã‚°ã§ã¯çµ¶ãˆãš gRPC é–¢é€£ã®ã‚¨ãƒ©ãƒ¼ã‚’åã„ã¦ã„ã¾ã—ãŸã—ã€
server - agent é–“ã® TCP connection ãŒåˆ‡ã‚Œã£ã±ãªã—ã«ãªã£ã¦æˆ»ã‚‰ããªã£ã¦ agent æ•°ãŒã©ã‚“ã©ã‚“æ¸›ã£ã¦ã„ã£ãŸã‚Š
ãƒ“ãƒ«ãƒ‰ãŒ pending ã®ã¾ã¾ã«ãªã£ãŸã‚Šã€è‰²ã€…ã‚ã‚Šã¾ã—ãŸã€‚</p><p>é–¢é€£ã™ã‚‹ issue ã¯ã‚ã‚Šã€å¹¾ã¤ã‹å¯¾ç­–ã‚’æ‰“ã£ã¦ã¿ãŸã‚Šã—ã¾ã—ãŸãŒã€çµå±€è§£æ±ºã—ã¾ã›ã‚“ã§ã—ãŸã€‚</p><ul><li><a href="https://github.com/drone/drone/issues/2090" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone/issues/2090</a></li><li><a href="https://github.com/drone/drone/issues/2246" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone/issues/2246</a></li><li><a href="https://github.com/drone/drone/pull/2294" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone/pull/2294</a></li><li><a href="https://www.reddit.com/r/droneci/comments/8opifu/drone_stops_working_after_some_little_time/e06d1gn/" target="_blank" rel="noopener noreferrer">https://www.reddit.com/r/droneci/comments/8opifu/drone_stops_working_after_some_little_time/e06d1gn/</a></li></ul><p>ãã‚ŒãŒ v1 ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ gRPC ãŒä½¿ã‚ã‚Œãªããªã£ã¦ã‹ã‚‰è§£æ¶ˆã—ã€å€‹äººçš„ã«ã¯ã¨ã¦ã‚‚åŠ©ã‹ã‚Šã¾ã—ãŸã€‚
ç®¡ç†è€…çš„ã«ã¯ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ä¸€ç•ªå¬‰ã—ã„ç‚¹ã§ã™ã­ã€‚</p>]]></content:encoded>
            <category>drone</category>
            <category>grpc</category>
        </item>
        <item>
            <title><![CDATA[Golang ã§ã®æ™‚åˆ»ã®æ‰±ã„æ–¹ã‚’æ•´ç†ã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/golang-time</link>
            <guid>https://techblog.szksh.cloud/golang-time</guid>
            <pubDate>Wed, 14 Aug 2019 11:28:56 GMT</pubDate>
            <description><![CDATA[ä»Šæ›´ãªãŒã‚‰ Golang ã§ã®æ™‚åˆ»ã®æ‰±ã„æ–¹ã«ã¤ã„ã¦æ”¹ã‚ã¦æ•´ç†ã—ã¦ã¿ã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>ä»Šæ›´ãªãŒã‚‰ Golang ã§ã®æ™‚åˆ»ã®æ‰±ã„æ–¹ã«ã¤ã„ã¦æ”¹ã‚ã¦æ•´ç†ã—ã¦ã¿ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã¾ã¨ã‚">ã¾ã¨ã‚<a href="#ã¾ã¨ã‚" class="hash-link" aria-label="Direct link to ã¾ã¨ã‚" title="Direct link to ã¾ã¨ã‚">â€‹</a></h2><ul><li>time.Local ã¯æ˜ç¤ºçš„ã«è¨­å®šã™ã‚‹(åŸºæœ¬UTC)</li><li>DB ãªã©ã«ã¯ åŸºæœ¬UTC ã§æ°¸ç¶šåŒ–ã™ã‚‹</li><li>å‡ºåŠ›æ™‚ã«å¿…è¦ã«ãªã£ãŸã‚‰ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’å¤‰æ›´ã™ã‚‹<ul><li>location ã¯å‡ºåŠ›æ™‚ã«å•é¡Œã«ãªã‚‹ã®ã§å‡ºåŠ›æ™‚ã« location ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹</li><li>é€†ã«è¨€ã†ã¨å‡ºåŠ›æ™‚ä»¥å¤–ã¯å•é¡Œã«ãªã‚‰ãªã„ã®ã§ç„¡ç†ã« location ã‚’ UTC ã«ã—ãªãã¦ã‚‚è‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„</li><li>ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£(ex. ORM) ã« time.Time ã‚’æ¸¡ã™å ´åˆã¯ location ã«æ³¨æ„ãŒå¿…è¦</li></ul></li><li>æ–‡å­—åˆ—ã¨ã—ã¦æ™‚åˆ»ã®å…¥åŠ›ã‚’å—ã‘ä»˜ã‘ã‚‹å ´åˆã¯ location ã‚’æ˜ç¤ºçš„ã«ã‚»ãƒƒãƒˆã™ã‚‹</li><li>ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãŒ time.Local ã«ä¾å­˜ã™ã‚‹å ´åˆã€ time.Local ã‚’æ˜ç¤ºçš„ã« UTC ã«ã—ãŸã‚Šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„</li><li>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§åˆ©ç”¨ã™ã‚‹ location ãŒåˆ†ã‹ã£ã¦ã„ã‚‹å ´åˆã€location ã‚’å–å¾—ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’å®šç¾©ã™ã‚‹</li><li><code>time.LoadLocation</code> ã¯ç’°å¢ƒä¾å­˜ãªã®ã§äºˆã‚ location ãŒåˆ†ã‹ã£ã¦ã„ã‚‹ãªã‚‰ä½¿ã‚ãªã„ã»ã†ãŒã‚ˆã„</li><li>æ–‡å­—åˆ—ã‚’ time.Time ã«å¤‰æ›ã™ã‚‹å ´åˆã€<code>time.ParseInLocation</code> ã§ Location ã‚’æŒ‡å®šã—ã¦ time.Time ã«å¤‰æ›å¾Œã€time.Time.UTC() ã§ UTC ã«å¤‰æ›ã™ã‚‹</li><li>time.Time ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹å ´åˆã€time.In ã§ location ã‚’å¤‰æ›å¾Œã€time.Time.Format ã§æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚°ãƒ­ãƒ¼ãƒãƒ«ãª-location">ã‚°ãƒ­ãƒ¼ãƒãƒ«ãª location<a href="#ã‚°ãƒ­ãƒ¼ãƒãƒ«ãª-location" class="hash-link" aria-label="Direct link to ã‚°ãƒ­ãƒ¼ãƒãƒ«ãª location" title="Direct link to ã‚°ãƒ­ãƒ¼ãƒãƒ«ãª location">â€‹</a></h2><p><a href="https://golang.org/pkg/time/#Location" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/time/#Location</a></p><blockquote><p>Local represents the system's local time zone.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="location-ã‚’è¨­å®šã™ã‚‹">location ã‚’è¨­å®šã™ã‚‹<a href="#location-ã‚’è¨­å®šã™ã‚‹" class="hash-link" aria-label="Direct link to location ã‚’è¨­å®šã™ã‚‹" title="Direct link to location ã‚’è¨­å®šã™ã‚‹">â€‹</a></h2><p><a href="https://crieit.net/posts/Go-time-LoadLocation" target="_blank" rel="noopener noreferrer">https://crieit.net/posts/Go-time-LoadLocation</a> ã«æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Šã€
<code>time.LoadLocation</code> ã‚’ä¸‹æ‰‹ã«å‘¼ã³å‡ºã™ã¨ç’°å¢ƒã«ã‚ˆã£ã¦ã¯ <code>unknown time zone</code> ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã‚‹ãŸã‚
æ¬¡ã®ã‚ˆã†ã« time.FixedZone ã§ Location ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jp </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FixedZone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Asia/Tokyo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">60</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>FixedZone ã¨ã„ã†é–¢æ•°åãŒç´›ã‚‰ã‚ã—ã„æ°—ã‚‚ã—ã¾ã™ãŒã€æ–°ã—ã„ Location ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã ã‘ã§å‰¯ä½œç”¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ã¡ãªã¿ã« time.FixedZone ã«æ¸¡ã™æ–‡å­—åˆ—ã¯ "foo" ã¿ãŸã„ãªé©å½“ãªæ–‡å­—åˆ—ã§ã‚‚å‹•ãã‚ˆã†ã§ã™ã€‚</p><p><a href="https://golang.org/pkg/time/#FixedZone" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/time/#FixedZone</a></p><p><a href="https://github.com/golang/go/blob/9e277f7d554455e16ba3762541c53e9bfc1d8188/src/time/zoneinfo.go#L263-L308" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/9e277f7d554455e16ba3762541c53e9bfc1d8188/src/time/zoneinfo.go#L263-L308</a></p><p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§åˆ©ç”¨ã™ã‚‹ location ãŒæ±ºã¾ã£ã¦ã„ã‚‹å ´åˆã€æ¬¡ã®ã‚ˆã†ã« location ã‚’è¿”ã™ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ç”¨æ„ã™ã‚‹ã¨è‰¯ã•ãã†ã§ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"time"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jp </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FixedZone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Asia/Tokyo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">60</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">JP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Location </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> jp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å³å¯†ã«-utc-ãª-location-ã‚’å–å¾—ã™ã‚‹">å³å¯†ã« UTC ãª Location ã‚’å–å¾—ã™ã‚‹<a href="#å³å¯†ã«-utc-ãª-location-ã‚’å–å¾—ã™ã‚‹" class="hash-link" aria-label="Direct link to å³å¯†ã« UTC ãª Location ã‚’å–å¾—ã™ã‚‹" title="Direct link to å³å¯†ã« UTC ãª Location ã‚’å–å¾—ã™ã‚‹">â€‹</a></h2><p>å³å¯†ã«è¨€ã†ã¨ã€<code>time.UTC</code> ã¯å¤‰æ›´å¯èƒ½ãªã®ã§ UTC ã ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚
ãã®ãŸã‚ã€æœ¬æ¥ <code>time.UTC</code> ã¯ã‚²ãƒƒã‚¿ãƒ¼é–¢æ•°ã§ã‚ã‚‹ã¹ãã ã£ãŸã‚“ã˜ã‚ƒãªã„ã‹ãªã¨ã„ã†æ°—ã‚‚ã—ã¾ã™ã€‚</p><p>å³å¯†ã« UTC ãª Location ã‚’å–å¾—ã™ã‚‹ã«ã¯ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’æ›¸ãã¨è‰¯ã•ãã†ã§ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"time"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    utc </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    utc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FixedZone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"UTC"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UTC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Location </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> utc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‹•ä½œç’°å¢ƒã«ä¾å­˜ã—ãªã„ã‚³ãƒ¼ãƒ‰ã«ã™ã‚‹ãŸã‚ã«">å‹•ä½œç’°å¢ƒã«ä¾å­˜ã—ãªã„ã‚³ãƒ¼ãƒ‰ã«ã™ã‚‹ãŸã‚ã«<a href="#å‹•ä½œç’°å¢ƒã«ä¾å­˜ã—ãªã„ã‚³ãƒ¼ãƒ‰ã«ã™ã‚‹ãŸã‚ã«" class="hash-link" aria-label="Direct link to å‹•ä½œç’°å¢ƒã«ä¾å­˜ã—ãªã„ã‚³ãƒ¼ãƒ‰ã«ã™ã‚‹ãŸã‚ã«" title="Direct link to å‹•ä½œç’°å¢ƒã«ä¾å­˜ã—ãªã„ã‚³ãƒ¼ãƒ‰ã«ã™ã‚‹ãŸã‚ã«">â€‹</a></h2><p>å‹•ä½œç’°å¢ƒã«ã‚ˆã£ã¦ <code>time.Local</code> ã®å€¤ãŒé•ã†ã“ã¨ã§çµæœãŒå¤‰ã‚ã£ã¦ã—ã¾ã†å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
ãã‚Œã‚’é˜²ããŸã‚ã«ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æœ€åˆã« <code>time.Local</code> ã‚’ UTC ã«ã™ã‚‹ã¨ã„ã†æ‰‹ã‚‚ã‚ã‚Šãã†ã§ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Local </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UTC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãŸã ã—ã€ãã‚Œã§ã‚‚ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã§ã‚ã‚‹ä»¥ä¸Šã€è¡Œå„€ã®æ‚ªã„ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦å¤‰æ›´ã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã—ã€
å¿…è¦ãªç®‡æ‰€ã§ location ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ã¦ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä¾å­˜ã—ãªã„ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã‚’å¿ƒãŒã‘ãŸã»ã†ãŒè‰¯ã„æ°—ã‚‚ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–‡å­—åˆ—ã‚’-timetime-ã«å¤‰æ›ã™ã‚‹">æ–‡å­—åˆ—ã‚’ time.Time ã«å¤‰æ›ã™ã‚‹<a href="#æ–‡å­—åˆ—ã‚’-timetime-ã«å¤‰æ›ã™ã‚‹" class="hash-link" aria-label="Direct link to æ–‡å­—åˆ—ã‚’ time.Time ã«å¤‰æ›ã™ã‚‹" title="Direct link to æ–‡å­—åˆ—ã‚’ time.Time ã«å¤‰æ›ã™ã‚‹">â€‹</a></h2><ul><li><a href="https://golang.org/pkg/time/#Parse" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/time/#Parse</a></li><li><a href="https://golang.org/pkg/time/#ParseInLocation" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/time/#ParseInLocation</a></li></ul><blockquote><p>ParseInLocation is like Parse but differs in two important ways.
First, in the absence of time zone information, Parse interprets a time as UTC;
ParseInLocation interprets the time as in the given location.
Second, when given a zone offset or abbreviation, Parse tries to match it against the Local location;
ParseInLocation uses the given location.</p></blockquote><p>ParseInLocation ã¨ Parse ã®é•ã„</p><ul><li>æ–‡å­—åˆ—ã« location ã®æƒ…å ±ãŒãªã„å ´åˆã€ Parse ã¯ UTC ã¨ã—ã¦æ‰±ã†</li><li>zone offset ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã€ Parse ã¯ Local location ã‹ã‚‰ã® offset ã¨ã—ã¦æ‰±ã†<ul><li>ParseInLocation ã§æ˜ç¤ºçš„ã« Location ã‚’æŒ‡å®šã—ãŸã»ã†ãŒè‰¯ã•ãã†</li></ul></li></ul><p>äºˆã‚ location ãŒã‚ã‹ã£ã¦ã„ã‚‹å ´åˆ time.ParseInLocation ã§ location ã‚’æŒ‡å®šã—ã¦ time.Time ã«å¤‰æ›ã—ãŸå¾Œ time.Time.In ã§ UTC ã«ã™ã‚‹ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ParseInLocation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"2006-01-02T15:04:05"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2019-08-13T21:30:00"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> jp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UTC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timetime-ã®-location-ã‚’å¤‰æ›´ã™ã‚‹">time.Time ã® Location ã‚’å¤‰æ›´ã™ã‚‹<a href="#timetime-ã®-location-ã‚’å¤‰æ›´ã™ã‚‹" class="hash-link" aria-label="Direct link to time.Time ã® Location ã‚’å¤‰æ›´ã™ã‚‹" title="Direct link to time.Time ã® Location ã‚’å¤‰æ›´ã™ã‚‹">â€‹</a></h2><p><a href="https://golang.org/pkg/time/#Time.In" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/time/#Time.In</a></p><blockquote><p>In returns a copy of t representing the same time instant,
but with the copy's location information set to loc for display purposes.</p></blockquote><p>time.Time.In ã¯ time.Time ã® Location ã ã‘å¤‰æ›´ã—ãŸã‚³ãƒ”ãƒ¼ã‚’è¿”ã—ã¾ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"time"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Local </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UTC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2019-08-14 12:08:44.150725 +0000 UTC m=+0.000212031</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t2 </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">In</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">JP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2019-08-14 21:08:44.150725 +0900 Asia/Tokyo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timetime-ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹">time.Time ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹<a href="#timetime-ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹" class="hash-link" aria-label="Direct link to time.Time ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹" title="Direct link to time.Time ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹">â€‹</a></h2><p><a href="https://golang.org/pkg/time/#Time.Format" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/time/#Time.Format</a></p><p>time.Time.In ã§ location ã‚’å¤‰æ›´ã—ãŸå¾Œ time.Time.Format ã§æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timenow-ã®-location">time.Now ã® location<a href="#timenow-ã®-location" class="hash-link" aria-label="Direct link to time.Now ã® location" title="Direct link to time.Now ã® location">â€‹</a></h2><p>Location ã¯ <code>time.Local</code> ã«ãªã‚Šã¾ã™ã€‚</p><p><a href="https://golang.org/pkg/time/#Now" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/time/#Now</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®-location-ã®æ‰±ã„">ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® location ã®æ‰±ã„<a href="#ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®-location-ã®æ‰±ã„" class="hash-link" aria-label="Direct link to ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® location ã®æ‰±ã„" title="Direct link to ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® location ã®æ‰±ã„">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="log">log<a href="#log" class="hash-link" aria-label="Direct link to log" title="Direct link to log">â€‹</a></h3><p>log ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å‡ºåŠ›ã•ã‚Œã‚‹æ™‚åˆ»ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ location ã¯ log.SetFlags ã«ã‚ˆã£ã¦ã‚ã‚‹ç¨‹åº¦å¤‰æ›´ã§ãã¾ã™ã€‚</p><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ æ—¥æ™‚ã‚’ time.Local ã§å‡ºåŠ›ã—ã¾ã™ã€‚
log.LUTC ã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ã§ UTC ã«ãªã‚Šã¾ã™ã€‚</p><ul><li><a href="https://golang.org/pkg/log/#SetFlags" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/log/#SetFlags</a></li><li><a href="https://golang.org/pkg/log/#pkg-constants" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/log/#pkg-constants</a></li></ul><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetFlags</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Flags</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LUTC</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="logrus">logrus<a href="#logrus" class="hash-link" aria-label="Direct link to logrus" title="Direct link to logrus">â€‹</a></h3><p><a href="https://github.com/Sirupsen/logrus" target="_blank" rel="noopener noreferrer">logrus</a> ã®ãƒ­ã‚°ã®æ™‚åˆ»ã® location ã‚‚ time.Local ãªã‚ˆã†ã§ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="robfigcron">robfig/cron<a href="#robfigcron" class="hash-link" aria-label="Direct link to robfig/cron" title="Direct link to robfig/cron">â€‹</a></h3><p><a href="https://github.com/robfig/cron" target="_blank" rel="noopener noreferrer">https://github.com/robfig/cron</a></p><blockquote><p>All interpretation and scheduling is done in the machine's local time zone (as provided by the Go time package (<a href="http://www.golang.org/pkg/time" target="_blank" rel="noopener noreferrer">http://www.golang.org/pkg/time</a>).</p></blockquote><p>time.Local ãªã‚ˆã†ã§ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="go-sql-drivermisql">go-sql-driver/misql<a href="#go-sql-drivermisql" class="hash-link" aria-label="Direct link to go-sql-driver/misql" title="Direct link to go-sql-driver/misql">â€‹</a></h3><ul><li><a href="https://github.com/go-sql-driver/mysql#timetime-support" target="_blank" rel="noopener noreferrer">https://github.com/go-sql-driver/mysql#timetime-support</a></li><li><a href="https://www.sambaiz.net/article/189/" target="_blank" rel="noopener noreferrer">https://www.sambaiz.net/article/189/</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gorm">gorm<a href="#gorm" class="hash-link" aria-label="Direct link to gorm" title="Direct link to gorm">â€‹</a></h3><p><a href="https://github.com/jinzhu/gorm/wiki/How-To-Do-Time" target="_blank" rel="noopener noreferrer">https://github.com/jinzhu/gorm/wiki/How-To-Do-Time</a></p>]]></content:encoded>
            <category>golang</category>
        </item>
        <item>
            <title><![CDATA[Drone v1 ã§ã¯ Jsonnet ãŒ extension ãªã—ã§ä½¿ãˆã‚‹]]></title>
            <link>https://techblog.szksh.cloud/drone-jsonnet</link>
            <guid>https://techblog.szksh.cloud/drone-jsonnet</guid>
            <pubDate>Fri, 02 Aug 2019 14:02:57 GMT</pubDate>
            <description><![CDATA[Drone ã§ã¯ v1 ã‹ã‚‰å†—é•·ãª YAML ã‚’ DRY ã«ã™ã‚‹ä¸€ã¤ã®æ‰‹ã¨ã—ã¦ã€ Jsonnet ã®åˆ©ç”¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Drone ã§ã¯ v1 ã‹ã‚‰å†—é•·ãª YAML ã‚’ DRY ã«ã™ã‚‹ä¸€ã¤ã®æ‰‹ã¨ã—ã¦ã€ Jsonnet ã®åˆ©ç”¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã‚Œã«ã¤ã„ã¦ã¯éå»ã®ãƒ–ãƒ­ã‚°ã§ã‚‚è§¦ã‚Œã¦ã„ã¾ã™ã€‚</p><p><a href="https://techblog.szksh.cloud/drone-jsonnet-generator/" target="_blank" rel="noopener noreferrer">https://techblog.szksh.cloud/drone-jsonnet-generator/</a></p><p>ã—ã‹ã—ã€ v1 ã® rc ã®æ™‚ç‚¹ã§ã¯ Jsonnet ã®æ´»ç”¨ã«ã¯ Jsonnet Extension ãŒå¿…è¦ã§ã—ãŸã€‚</p><p><a href="https://engineering.linecorp.com/ja/blog/go-oss-ci-cd-platform-drone-1-0-0-rc-1/#title7-1" target="_blank" rel="noopener noreferrer">https://engineering.linecorp.com/ja/blog/go-oss-ci-cd-platform-drone-1-0-0-rc-1/#title7-1</a></p><p>ã—ã‹ã—ã€ v1 ã®æ­£å¼ç‰ˆã§ã¯ Jsonnet Extension ãŒãªãã¦ã‚‚ Jsonnet ãŒåˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãš Drone ã®ç®¡ç†è€…å´ã§ Drone server ã«ç’°å¢ƒå¤‰æ•° <code>DRONE_JSONNET_ENABLED=true</code> ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ãã†ã—ãŸã‚‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å´ã¯æ¬¡ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ jsonnet ãŒä½¿ãˆã¾ã™ã€‚</p><ol><li>.drone.yml ã®ä»£ã‚ã‚Šã« .drone.jsonnet ã‚’ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ (.drone.yml ã¯ä¸è¦)</li><li>å„ãƒªãƒã‚¸ãƒˆãƒªã® settings ã® Main &gt; Configuration ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’å¤‰æ›´ã™ã‚‹</li></ol><p>ã“ã†ã™ã‚‹ã“ã¨ã§ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§ Jsonnet ãŒ YAML ã«å¤‰æ›ã•ã‚Œå‡¦ç†ã•ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã„ã¤ã‹ã‚‰-jsonnet-extension-ã¯ä¸è¦ã«ãªã£ãŸã®ã‹">ã„ã¤ã‹ã‚‰ Jsonnet Extension ã¯ä¸è¦ã«ãªã£ãŸã®ã‹<a href="#ã„ã¤ã‹ã‚‰-jsonnet-extension-ã¯ä¸è¦ã«ãªã£ãŸã®ã‹" class="hash-link" aria-label="Direct link to ã„ã¤ã‹ã‚‰ Jsonnet Extension ã¯ä¸è¦ã«ãªã£ãŸã®ã‹" title="Direct link to ã„ã¤ã‹ã‚‰ Jsonnet Extension ã¯ä¸è¦ã«ãªã£ãŸã®ã‹">â€‹</a></h2><ul><li><a href="https://github.com/drone/drone/compare/v1.0.0-rc.6...v1.0.0" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone/compare/v1.0.0-rc.6...v1.0.0</a></li><li><a href="https://github.com/drone/drone/commit/5013cfa993fa455fc56f10e45b9f36cf1d6dff57" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone/commit/5013cfa993fa455fc56f10e45b9f36cf1d6dff57</a></li></ul><p>v1 ã® rc ã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã¾ã›ã‚“ã§ã—ãŸãŒã€æ­£å¼ç‰ˆã‚’ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ Jsonnet Extension ãŒä¸è¦ã«ãªã£ã¦ã„ãŸã‚ˆã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ³¨æ„ç‚¹">æ³¨æ„ç‚¹<a href="#æ³¨æ„ç‚¹" class="hash-link" aria-label="Direct link to æ³¨æ„ç‚¹" title="Direct link to æ³¨æ„ç‚¹">â€‹</a></h2><ul><li>SaaS <a href="https://cloud.drone.io" target="_blank" rel="noopener noreferrer">https://cloud.drone.io</a> ã¯ 2019-08-02 æ™‚ç‚¹ã§æœªå¯¾å¿œ</li><li>Jsonnet ã¯ pipeline ãŒ 1 ã¤ã§ã‚‚ <code>[]</code> ã§å›²ã„ã€é…åˆ—ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li><li>Jsonnet ã® Imports ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹">ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹<a href="#ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹" class="hash-link" aria-label="Direct link to ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹" title="Direct link to ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹">â€‹</a></h2><ul><li><a href="https://discourse.drone.io/t/how-to-reduce-yaml-boilerplate/3704" target="_blank" rel="noopener noreferrer">https://discourse.drone.io/t/how-to-reduce-yaml-boilerplate/3704</a></li></ul>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[The Top 10 Most Common Mistakes Iâ€™ve Seen in Go Projects ã‚’èª­ã‚“ã§ã¿ã¦]]></title>
            <link>https://techblog.szksh.cloud/the-top-10-most-common-mistakes-ive-seen-in-go-projects</link>
            <guid>https://techblog.szksh.cloud/the-top-10-most-common-mistakes-ive-seen-in-go-projects</guid>
            <pubDate>Sun, 21 Jul 2019 09:13:53 GMT</pubDate>
            <description><![CDATA[The Top 10 Most Common Mistakes Iâ€™ve Seen in Go Projects ã¨ã„ã†è¨˜äº‹ã‚’èª­ã‚“ã§é¢ç™½ã‹ã£ãŸã®ã§ãƒ¡ãƒ¢ã‚Šã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p><a href="https://itnext.io/the-top-10-most-common-mistakes-ive-seen-in-go-projects-4b79d4f6cd65" target="_blank" rel="noopener noreferrer">The Top 10 Most Common Mistakes Iâ€™ve Seen in Go Projects</a> ã¨ã„ã†è¨˜äº‹ã‚’èª­ã‚“ã§é¢ç™½ã‹ã£ãŸã®ã§ãƒ¡ãƒ¢ã‚Šã¾ã™ã€‚
ç¿»è¨³ã§ã¯ãªã„ã§ã™ã€‚ãƒ¡ãƒ¢ãªã®ã§ã€åŸæ–‡ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚</p><ol><li>Unknown Enum Value: Unknown ã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ã™ enum ã®å€¤ã¯ 0 ã«ã—ã‚ˆã†ã€‚å€¤ãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ãªã„å ´åˆã« Unknown ã¨ã—ã¦æ‰±ãˆã‚‹ã‹ã‚‰</li><li>Benchmarking: ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚‹ã®ã¯é›£ã—ã„ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®æœ€é©åŒ–ã«ã‚ˆã£ã¦ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®çµæœãŒä¸é©åˆ‡ã«ãªã‚‹å ´åˆãŒã‚ã‚‹</li><li>Pointers! Pointers Everywhere!: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è¦³ç‚¹ã‹ã‚‰åŸºæœ¬çš„ã«ã¯ãƒã‚¤ãƒ³ã‚¿ã‚’ä½¿ã†ã¹ãã§ã¯ãªã„ã€‚å¤‰æ•°ã‚’å…±æœ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã®ã¿ã€ãƒã‚¤ãƒ³ã‚¿ã‚’ä½¿ã†</li><li>Breaking a for/switch or a for/select: for, switch ãŒå…¥ã‚Œå­ã«ãªã£ã¦ã„ã‚‹å ´åˆã€switch ã®ä¸­ã§ break ã—ã¦ã‚‚ for ã‹ã‚‰æŠœã‘ã‚‰ã‚Œãªã„ã€‚æŠœã‘ãŸã‘ã‚Œã° labeled break ã‚’ä½¿ã†</li><li>Errors Management</li><li>Slice Initialization</li><li>Context Management</li><li>Not Using the -race Option: <code>go test</code> ã‚³ãƒãƒ³ãƒ‰ã§ã¯ <code>-race</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚ˆã†</li><li>Using a Filename as an Input: å¼•æ•°ã¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æ¸¡ã™ã®ã§ã¯ãªãã€ io.Reader ã‚„ io.Writer ã‚’æ¸¡ãã†</li><li>Goroutines and Loop Variables</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pointers-pointers-everywhere">Pointers! Pointers Everywhere!<a href="#pointers-pointers-everywhere" class="hash-link" aria-label="Direct link to Pointers! Pointers Everywhere!" title="Direct link to Pointers! Pointers Everywhere!">â€‹</a></h2><p>å¤‰æ•°ã¯ãƒ’ãƒ¼ãƒ—ã‹ã‚¹ã‚¿ãƒƒã‚¯ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã€‚</p><ul><li>ã‚¹ã‚¿ãƒƒã‚¯: é–¢æ•°å†…ã®å¤‰æ•°ã¯ã€é–¢æ•°ãŒè¿”ã•ã‚Œã‚‹ã¨ã€ã‚¹ã‚¿ãƒƒã‚¯ã‹ã‚‰ãƒãƒƒãƒ—ã•ã‚Œã‚‹</li><li>ãƒ’ãƒ¼ãƒ—: å…±æœ‰å¤‰æ•°ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°</li></ul><p>é–¢æ•°ã§ç”Ÿæˆã—ãŸæ§‹é€ ä½“ã‚’è¿”ã™ã¨ã€ã‚¹ã‚¿ãƒƒã‚¯ã§ç®¡ç†ã•ã‚Œã€è¿”ã•ã‚ŒãŸæ™‚ç‚¹ã§ãƒãƒƒãƒ—ã•ã‚Œã‚‹ã€‚
é–¢æ•°å†…ã§ç”Ÿæˆã—ãŸãƒã‚¤ãƒ³ã‚¿ã‚’è¿”ã™ã¨ã€ãã‚Œã¯ Heap ã§ç®¡ç†ã•ã‚Œã‚‹ã€‚
ã‚¹ã‚¿ãƒƒã‚¯ã§ç®¡ç†ã™ã‚‹ã¨ã€é–¢æ•°ãŒè¿”ã•ã‚ŒãŸæ™‚ç‚¹ã§ãƒãƒƒãƒ—ã•ã‚Œã¦ã—ã¾ã„ã€é–¢æ•°ã®å¤–ã§ãƒã‚¤ãƒ³ã‚¿ãŒæŒ‡ã™å€¤ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚‹ãŸã‚ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getFooValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> foo </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> result foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Do something</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getFooPointer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">foo </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> result foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Do something</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚¹ã‚¿ãƒƒã‚¯ã®ã»ã†ãŒåŠ¹ç‡ãŒè‰¯ã„ç†ç”±</p><ul><li>ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚¿ãŒä¸è¦<ul><li>é–¢æ•°ã‚’æŠœã‘ãŸæ™‚ç‚¹ã§ã‚¹ã‚¿ãƒƒã‚¯ã‹ã‚‰ãƒãƒƒãƒ—ã•ã‚Œã‚‹</li><li>æœªä½¿ç”¨ã®å¤‰æ•°ã‚’å›åã™ã‚‹è¤‡é›‘ãªå‡¦ç†ãŒä¸è¦</li></ul></li><li>ã‚¹ã‚¿ãƒƒã‚¯ã®å¤‰æ•°ã¯ä¸€ã¤ã® goroutine ã«å±ã™ã‚‹ãŸã‚ã€å…±æœ‰ã®ãŸã‚ã®åŒæœŸãŒä¸è¦ã ã‹ã‚‰</li></ul><p>ã‚ˆã£ã¦åŸºæœ¬çš„ã«ã¯ãƒã‚¤ãƒ³ã‚¿ã‚’ä½¿ã†ã¹ãã§ã¯ãªã„ã€‚å¤‰æ•°ã‚’å…±æœ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã®ã¿ã€ãƒã‚¤ãƒ³ã‚¿ã‚’ä½¿ã†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="error-management">Error Management<a href="#error-management" class="hash-link" aria-label="Direct link to Error Management" title="Direct link to Error Management">â€‹</a></h2><ul><li>ã‚¨ãƒ©ãƒ¼ã¯ä¸€å›ã ã‘ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã¹ãã€‚ã‚¨ãƒ©ãƒ¼ã¯ãƒ­ã‚®ãƒ³ã‚°ã•ã‚Œã‚‹ã‹ã€ãƒ—ãƒ­ãƒ‘ã‚²ãƒ¼ãƒˆã•ã‚Œã‚‹ã¹ã(ãƒ­ã‚®ãƒ³ã‚°ã—ã¤ã¤ãƒ—ãƒ­ãƒ‘ã‚²ãƒ¼ãƒˆã¯ã ã‚)</li><li>pkg/errors ã‚’ä½¿ã†ã¨æ ¹æœ¬çš„ãªã‚¨ãƒ©ãƒ¼ã®å‹ã‚’è¦‹ã¦æ¡ä»¶åˆ†å²ã§ãã‚‹<ul><li>è‡ªåˆ†ãŒä½œã£ã¦ã‚‹ <a href="https://github.com/suzuki-shunsuke/go-errlog" target="_blank" rel="noopener noreferrer">go-errlog</a> ã® v0.9.1 ã ã¨ãã‚Œã¯å‡ºæ¥ãªã„ã€‚æ”¹å–„ã™ã¹ãã‹</li></ul></li></ul><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> errors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Cause</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"unable to server HTTP POST request for customer %s"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Status</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ok</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DBError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">retry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="slice-initialization">Slice Initialization<a href="#slice-initialization" class="hash-link" aria-label="Direct link to Slice Initialization" title="Direct link to Slice Initialization">â€‹</a></h2><p><a href="https://tour.golang.org/moretypes/11" target="_blank" rel="noopener noreferrer">https://tour.golang.org/moretypes/11</a></p><ul><li>slice ã«ã¯ length ã¨ capacity ãŒã‚ã‚‹</li><li>length ã¯ slice ãŒä¿æŒã™ã‚‹è¦ç´ ã®æ•°</li><li>capacity ã¯ slice ã®è£ã«ã‚ã‚‹é…åˆ—ã®è¦ç´ æ•°ã‚’ slice ã®æœ€åˆã®è¦ç´ ã‹ã‚‰æ•°ãˆãŸã‚‚ã®</li></ul><p><a href="https://golang.org/ref/spec#Making_slices_maps_and_channels" target="_blank" rel="noopener noreferrer">https://golang.org/ref/spec#Making_slices_maps_and_channels</a></p><p>slice ã®å ´åˆ</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// length, capacity å…±ã« n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// length ã¯ n, capacity ã¯ m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://play.golang.org/p/R1CF1e1K3L6" target="_blank" rel="noopener noreferrer">https://play.golang.org/p/R1CF1e1K3L6</a></p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">a </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 0, 10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1, 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>append</code> ã¯ã‚³ã‚¹ãƒˆãŒé«˜ã„ã‹ã‚‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®šã—ãŸã»ã†ãŒè‰¯ã„ã¨ã„ã†ãŒã€
<code>make</code> ã§ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ç”Ÿæˆã—ã¦ã„ã‚Œã°ã€<code>append</code> ã—ã¦ã‚‚ãã“ã¾ã§ã‚³ã‚¹ãƒˆã¯é«˜ããªã„ã€‚
è‹¥å¹²ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®šã—ãŸã»ã†ãŒåŠ¹ç‡ãŒè‰¯ã„ãŒã€ä¸€è²«æ€§ã¨ã„ã†è¦³ç‚¹ã§ã¯ <code>append</code> ã‚’ä½¿ã£ãŸã»ã†ãŒã‚ˆã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="goroutines-and-loop-variables">Goroutines and Loop Variables<a href="#goroutines-and-loop-variables" class="hash-link" aria-label="Direct link to Goroutines and Loop Variables" title="Direct link to Goroutines and Loop Variables">â€‹</a></h2><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ints </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> ints </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"%v\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚Œã ã¨å…¨ã¦ã® goroutine ã§åŒã˜ i ã‚’å…±æœ‰ã—ã¦ã—ã¾ã†ã€‚é–¢æ•°ã®å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã‹ã€for ãƒ«ãƒ¼ãƒ—å†…ã®å¤‰æ•°ã¨ã—ã¦å®šç¾©ã™ã‚‹ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ints </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> ints </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"%v\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ints </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> ints </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> i </span><span class="token comment" style="color:#999988;font-style:italic">// åˆè¦‹ã ã¨å¥‡å¦™ã«è¦‹ãˆã‚‹ãŒã€æ­£ã—ã„ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"%v\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>go</category>
        </item>
        <item>
            <title><![CDATA[Flute - Golang HTTP client testing framework]]></title>
            <link>https://techblog.szksh.cloud/fagott</link>
            <guid>https://techblog.szksh.cloud/fagott</guid>
            <pubDate>Sat, 06 Jul 2019 23:20:00 GMT</pubDate>
            <description><![CDATA[2019-07-17 è¿½è¨˜]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2019-07-17-è¿½è¨˜">2019-07-17 è¿½è¨˜<a href="#2019-07-17-è¿½è¨˜" class="hash-link" aria-label="Direct link to 2019-07-17 è¿½è¨˜" title="Direct link to 2019-07-17 è¿½è¨˜">â€‹</a></h2><p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåãŒå¤‰ã‚ã‚Šã¾ã—ãŸ</p><p><a href="https://github.com/suzuki-shunsuke/flute/issues/20" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/flute/issues/20</a></p><hr><p>Go ã® HTTP client ã®ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½œã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/flute" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/flute</a></p><p>åŸ·ç­†æ™‚ç‚¹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ v0.6.0 ã§ã™ã€‚</p><ul><li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒ†ã‚¹ãƒˆ</li><li>HTTP ã‚µãƒ¼ãƒã®ãƒ¢ãƒƒã‚­ãƒ³ã‚°</li></ul><p>ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚</p><p>æ¯”è¼ƒçš„å®Ÿè·µçš„ãªã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹ç°¡å˜ãª API client ã¨ãã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ãŸã®ã§å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/flute/blob/master/examples/create_user.go" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/flute/blob/master/examples/create_user.go</a></li><li><a href="https://github.com/suzuki-shunsuke/flute/blob/master/examples/create_user_test.go#L17-L53" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/flute/blob/master/examples/create_user_test.go#L17-L53</a></li></ul><p>å…ƒã€…è‡ªåˆ†ã¯ã“ã®ç›®çš„ã®ãŸã‚ã« <a href="https://github.com/h2non/gock" target="_blank" rel="noopener noreferrer">h2non/gock</a> ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸã€‚
ãŸã ã€ gock ã ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒãƒãƒƒãƒã—ãªã‹ã£ãŸã¨ãã«ã€ãªãœãƒãƒƒãƒã—ãªã„ã®ã‹ãŒã‚ã‹ã‚‰ãšã€èª¿æŸ»ã«å›°ã‚‹ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚</p><p>ãã“ã§ flute ã§ã¯ request ã«å¯¾ã—ã€matcher ã¨ tester ã¨ã„ã†æ¦‚å¿µã‚’å°å…¥ã—ã€
matcher ã§ãƒãƒƒãƒã—ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ tester ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ã¨ã„ã†ãµã†ã«ã—ã¾ã—ãŸã€‚
ãƒ†ã‚¹ãƒˆã§ã¯å†…éƒ¨ã§ <a href="https://github.com/stretchr/testify" target="_blank" rel="noopener noreferrer">stretchr/testify</a> ã® assert ã‚’ä½¿ã£ã¦ãŠã‚Šã€ãƒ†ã‚¹ãƒˆã«å¤±æ•—ã—ãŸã¨ãã«ãªãœå¤±æ•—ã—ãŸã®ã‹ãŒåˆ†ã‹ã‚Šã‚„ã™ãå‡ºåŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><p>ä¾‹ãˆã°ä»¥ä¸‹ã®ä¾‹ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã® Authorization header ã«ãƒˆãƒ¼ã‚¯ãƒ³ãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ãªã‹ã£ãŸå ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">=== RUN   TestClient_CreateUser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- FAIL: TestClient_CreateUser (0.00s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tester.go:168:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Error Trace:    tester.go:168</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        tester.go:32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        transport.go:25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        client.go:250</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        client.go:174</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        client.go:641</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        client.go:509</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        create_user.go:45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        create_user_test.go:56</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Error:          Not equal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                expected: []string{"token XXXXX"}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                actual  : []string{"token "}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                Diff:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                --- Expected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                +++ Actual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                @@ -1,3 +1,3 @@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 ([]string) (len=1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                - (string) (len=11) "token XXXXX"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                + (string) (len=6) "token "</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Test:           TestClient_CreateUser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Messages:       the request header "Authorization" should match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                service: http://example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                request name: create a user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¾ãŸã€å½“ãŸã‚Šå‰ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãƒ¢ãƒƒã‚¯ã¨ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚‚è¿”ã—ã¾ã™ã€‚</p><p>ãƒãƒƒãƒãƒ³ã‚°ã‚„ãƒ†ã‚¹ãƒˆã§ä½¿ãˆã‚‹é …ç›®ã¨ã—ã¦ã¯</p><ul><li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ã‚¹ (ex. "/users")</li><li>method (ex. "GET", "POST")</li><li>ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿(ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æœ‰ç„¡ã€å€¤)</li><li>ãƒ˜ãƒƒãƒ€ãƒ¼(ãƒ˜ãƒƒãƒ€ãƒ¼ã®æœ‰ç„¡ã€å€¤)</li><li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£<ul><li>æ–‡å­—åˆ—å®Œå…¨ä¸€è‡´</li><li>JSONã¨ã—ã¦ã®ç­‰ä¾¡æ€§</li></ul></li><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ã‚«ã‚¹ã‚¿ãƒ é–¢æ•°</li></ul><p>ãªã©ãŒã‚ã‚Šã¾ã™ã€‚</p><p>è©³ç´°ã¯ ã‚³ãƒ¼ãƒ‰ä¸­ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œã¦ã„ã‚‹ã®ã§ <a href="https://godoc.org/github.com/suzuki-shunsuke/flute/flute" target="_blank" rel="noopener noreferrer">godoc</a> ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚</p><p>æŠ€è¡“çš„ã«ã¯ <a href="https://golang.org/pkg/net/http/#Client" target="_blank" rel="noopener noreferrer">*http.Client</a> ã® Transport ã« *flute.Transport ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ HTTP ã‚µãƒ¼ãƒã®ãƒ¢ãƒƒã‚­ãƒ³ã‚°ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><p>API ã®ãƒ‡ã‚¶ã‚¤ãƒ³é¢ã§è€ƒæ…®ã—ãŸã“ã¨ã¨ã—ã¦ã¯ã€
ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã§ã‚ã‚‹ http.DefaultClient ã®å¤‰æ›´ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå´ã§ã‚„ã‚‰ãªã„ã“ã¨ã§ã™ã€‚
ã‚ãã¾ã§ http.RoundTripper ã®å®Ÿè£…ã‚’æä¾›ã™ã‚‹ã ã‘ã§ã€ãã‚Œã‚’ http.DefaultClient ã«è¨­å®šã™ã‚‹å ´åˆã€ãã‚Œã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä»»ã›ã¦ã„ã¾ã™ã€‚</p><ul><li>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®å¤‰æ›´ã‚’éš è”½ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç„¡æ„è­˜ã®ã†ã¡ã«å¤‰æ›´ã—ã¦ãŸã‚Šã™ã‚‹ã®ã¯è‰¯ããªã„<ul><li>gock ã§ã¯ http.DefaultClient ã‚’å¤‰æ›´ã—ã¦ã„ã‚‹ãŒã€ãã‚Œã‚’ç†è§£ã—ãªã„ã¾ã¾ä½¿ã£ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚‚ã„ã‚‹ã¯ãš</li><li>ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®å¤‰æ›´ã«ã¯å‰¯ä½œç”¨ã‚‚ã‚ã‚‹ã®ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç†è§£ã—ãŸä¸Šã§æ˜ç¤ºçš„ã«è¡Œã†ã¹ãã§ã‚ã‚‹</li><li>æ˜ç¤ºçš„ã« <code>http.DefaultClient = client</code> ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ›¸ã‹ã›ã‚Œã°ã€ç†è§£ã—ãªã„ã¾ã¾ä½¿ã†ã“ã¨ã¯ãªã„ã¯ãš</li></ul></li><li>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å¤–ã‹ã‚‰ã‚‚å¤‰æ›´ã§ãã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å®Œå…¨ã«ç®¡ç†ã™ã‚‹ã®ã¯ä¸å¯èƒ½ãªã®ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä»»ã›ã‚‹</li></ul><p>ä»¥ä¸Šã€ç°¡å˜ã§ã™ãŒè‡ªä½œã® OSS <a href="https://github.com/suzuki-shunsuke/flute" target="_blank" rel="noopener noreferrer">flute</a> ã®ç´¹ä»‹ã§ã—ãŸã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>golang</category>
            <category>flute</category>
        </item>
        <item>
            <title><![CDATA[Drone ã§ã€Œãƒ“ãƒ«ãƒ‰å®Ÿè¡Œæ™‚ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã€ã£ã½ã„ã“ã¨ã‚’ã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/how-to-imitate-jenkins-parameterized-build-at-drone</link>
            <guid>https://techblog.szksh.cloud/how-to-imitate-jenkins-parameterized-build-at-drone</guid>
            <pubDate>Thu, 20 Jun 2019 08:50:11 GMT</pubDate>
            <description><![CDATA[Jenkins ã§ã¯ parameterized build ã¨ã„ã†æ©Ÿèƒ½ã§ã€ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œæ™‚ã« Web UI ã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Jenkins ã§ã¯ parameterized build ã¨ã„ã†æ©Ÿèƒ½ã§ã€ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œæ™‚ã« Web UI ã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>Drone ã§ã¯åŸºæœ¬çš„ã« Git ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒ•ãƒƒã‚¯ã—ã¦å‹•ãã®ã§ã€Œãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œæ™‚ã«æ‰‹å‹•ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹ã€ã¨ã„ã†ã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚</p><p>è‡ªåˆ†ã¯åŸºæœ¬çš„ã«ã§ããªãã¦ã‚‚æ§‹ã‚ãªã„ã¨æ€ã£ã¦ã„ã¾ã™ãŒã€
ã“ã†ã„ã£ãŸæ©Ÿèƒ½ãŒãªã„ã‹ã‚‰ Drone ã‚’ä½¿ã‚ãªã„ã¨ã„ã†äººã‚‚ä¸­ã«ã¯ã„ã‚‹ã®ã§ã€
Drone ã§ã‚‚ã¡ã‚‡ã£ã¨ã—ãŸå·¥å¤«ã§ãã‚Œã£ã½ã„ã“ã¨ã¯å‡ºæ¥ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã„ã€ç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚</p><p>ä¸€å¿œè¨€ã£ã¦ãŠãã¨ã€ Jenkins ã® parameterized build ã‚’å®Œå…¨ã«ä»£æ›¿ã™ã‚‹ã‚ˆã†ãªã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example-drone-build-parameter" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-drone-build-parameter</a></p><p>ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…è¦ã§ã™ã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/build_params/params.sh.tpl" target="_blank" rel="noopener noreferrer">build_params/params.sh.tpl</a>: ãƒ“ãƒ«ãƒ‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨˜è¿°ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</li><li><a href="https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/scripts/deploy.sh" target="_blank" rel="noopener noreferrer">scripts/deploy.sh</a>: ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«å®Ÿè¡Œã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</li><li><a href="https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/.drone.yml" target="_blank" rel="noopener noreferrer">.drone.yml</a>: Drone ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«</li></ul><p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bash scripts/deploy.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã™ã‚‹ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨˜è¿°ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ä½œæˆã•ã‚Œã€ã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ãã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/scripts/deploy.sh#L12-L17" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/scripts/deploy.sh#L12-L17</a></p><p>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨˜è¿°ã—ã€ã‚¨ãƒ‡ã‚£ã‚¿ã‚’é–‰ã˜ã¾ã™ã€‚</p><p>ã™ã‚‹ã¨ãã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚³ãƒŸãƒƒãƒˆã•ã‚Œã€æ–°ã—ã„ã‚¿ã‚°ãŒä½œæˆã•ã‚Œã€ã‚³ãƒŸãƒƒãƒˆã¨ã‚¿ã‚°ãŒãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/scripts/deploy.sh#L27-L35" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/scripts/deploy.sh#L27-L35</a></p><p>Drone ã§ã‚¿ã‚°ã‚’ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒ•ãƒƒã‚¯ã—ã¦ãƒ“ãƒ«ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/.drone.yml#L13-L17" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/.drone.yml#L13-L17</a></p><p>ãƒ“ãƒ«ãƒ‰ã§ã¯ã‚³ãƒŸãƒƒãƒˆã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ã“ã¨ã§ãƒ“ãƒ«ãƒ‰ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã›ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/.drone.yml#L10" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/.drone.yml#L10</a></p><p>ã“ã†ã™ã‚‹ã“ã¨ã§ãƒ“ãƒ«ãƒ‰ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹ã®ã§ Git ã§ç®¡ç†ã§ãã‚‹ã¨ã„ã†ã®ã‚‚ç‰¹å¾´ã§ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/build_params/2019-07-07T10-04-02JST/params.sh" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example-drone-build-parameter/blob/master/build_params/2019-07-07T10-04-02JST/params.sh</a></p><p>ä¸Šè¨˜ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ç’°å¢ƒå¤‰æ•°ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ãŒã€
ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚ã‚‹å¿…è¦æ€§ã¯ãªãã€ä¾‹ãˆã° JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨˜è¿°ã—ã¦ãƒ“ãƒ«ãƒ‰ã§ JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã‚‚ã‚ˆã„ã—ã€
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’é¸æŠã•ã›ã‚‹ã‚ˆã†ãªã“ã¨ãŒã—ãŸã‘ã‚Œã° <a href="https://github.com/junegunn/fzf" target="_blank" rel="noopener noreferrer">fzf</a> ã®ã‚ˆã†ãªã‚‚ã®ã‚’ä½¿ã£ã¦ã‚‚ã‚ˆã„ã—ã€
ã„ãã‚‰ã§ã‚‚æ”¹å–„ã§ãã¾ã™ã€‚</p><p>ä»¥ä¸Šã€ç°¡å˜ãª tips ã§ã—ãŸã€‚</p>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[Drone v0.8 ã® .drone.yml ã‚’ v1 ã® .drone.jsonnet ã«å¤‰æ›ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸ]]></title>
            <link>https://techblog.szksh.cloud/drone-jsonnet-generator</link>
            <guid>https://techblog.szksh.cloud/drone-jsonnet-generator</guid>
            <pubDate>Tue, 11 Jun 2019 22:40:45 GMT</pubDate>
            <description><![CDATA[Drone v0.8 ã® .drone.yml ã‚’ v1 ã® .drone.jsonnet ã«å¤‰æ›ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Drone v0.8 ã® .drone.yml ã‚’ v1 ã® .drone.jsonnet ã«å¤‰æ›ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/drone-jsonnet-generator" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/drone-jsonnet-generator</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯">èƒŒæ™¯<a href="#èƒŒæ™¯" class="hash-link" aria-label="Direct link to èƒŒæ™¯" title="Direct link to èƒŒæ™¯">â€‹</a></h2><p><a href="https://docs.drone.io/user-guide/pipeline/migrating/" target="_blank" rel="noopener noreferrer">https://docs.drone.io/user-guide/pipeline/migrating/</a></p><p>Drone ã¯ v0.8 ã‹ã‚‰ v1 ã§ .drone.yml ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒå¤§ããå¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚
Drone v1 ã§ã¯ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§å¤‰æ›ã—ã¦ã„ã‚‹ãŸã‚ã€v0.8 ã® .drone.yml ã§ã‚‚ãã®ã¾ã¾å‹•ãã¾ã™(matrix builds ã‚‚å‹•ãã¾ã™)ã€‚</p><p>ãã®ãŸã‚ã€Drone v0.8 ã‹ã‚‰ v1 ã«ç§»è¡Œã™ã‚‹éš›ã€ã™ãã« .drone.yml ã‚’ä¿®æ­£ã—ãªãã¦ã‚‚å•é¡Œãªã„ã®ã§ã™ãŒã€
v1 ç‹¬è‡ªã®æ©Ÿèƒ½ãŒå‡ºã¦ããŸå ´åˆ v0.8 ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å ´åˆåˆ©ç”¨ã§ããªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã—ã€
ã„ã¤ã¾ã§ã‚‚å¤ã„ã¾ã¾ã ã¨æ°—æŒã¡æ‚ªã„ã®ã§å‡ºæ¥ã‚‹ãªã‚‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å¤‰æ›ã—ãŸã„ã§ã™ã€‚</p><p>drone-cli ã§ã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å¤‰æ›ã™ã‚‹ <code>drone convert</code> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ãŸã ã—ã€ <code>drone convert</code> ã¯ matrix build ã‚’ multiple pipeline ã«å¤‰æ›ã™ã‚‹ã®ã§ã™ãŒã€
éå¸¸ã«å†—é•·ã«ãªã‚Šã¾ã™ã€‚
ãã®ãŸã‚ã€<a href="https://jsonnet.org/" target="_blank" rel="noopener noreferrer">jsonnet</a> ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p><a href="https://docs.drone.io/user-guide/pipeline/migrating/" target="_blank" rel="noopener noreferrer">https://docs.drone.io/user-guide/pipeline/migrating/</a></p><blockquote><p>The above syntax can be quite verbose if you are testing a large number of variations.
To simplify your configuration we recommend using jsonnet.</p></blockquote><p>ã“ã® .drone.jsonnet ã®ç”Ÿæˆã¯ <code>drone convert</code> ã§ã¯å‡ºæ¥ãªã„ã§ã™ã—ã€æ‰‹ä½œæ¥­ã«ãªã‚‹ã®ã§ã™ãŒã€çµæ§‹é¢å€’ã§ã™ã€‚
v0.8 ã‹ã‚‰ v1 ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒå¤‰ã‚ã£ã¦ã¾ã™ã—ã€jsonnet ã«é¦´æŸ“ã¿ã®è–„ã„äººã‚‚å°‘ãªããªã„ã§ã—ã‚‡ã†ã€‚
ç§»è¡Œå¯¾è±¡ã®ãƒªãƒã‚¸ãƒˆãƒªãŒå¤šã„å ´åˆã€éå¸¸ã«è‹¦è¡Œã«ãªã‚Šã¾ã™ã€‚</p><p>ãã“ã§ä»Šå›ã“ã® .drone.jsonnet ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’é–‹ç™ºã—ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ã„æ–¹">ä½¿ã„æ–¹<a href="#ä½¿ã„æ–¹" class="hash-link" aria-label="Direct link to ä½¿ã„æ–¹" title="Direct link to ä½¿ã„æ–¹">â€‹</a></h2><p>éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ drone-jsonnet-generator gen [--source .drone.yml] [--target .drone.jsonnet] [--stdout]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚’å®Ÿè¡Œã™ã‚‹ã¨ .drone.yml ã‹ã‚‰ .drone.jsonnet ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p><p>ä¾‹ãˆã°</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">pipeline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> golang</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">GO_VERSION</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> echo hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">DATABASE</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">include</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">GO_VERSION</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">DATABASE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5.5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">GO_VERSION</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">DATABASE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6.5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">GO_VERSION</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">DATABASE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5.5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‹ã‚‰</p><div class="language-jsonnet codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonnet codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">local pipeline(GO_VERSION, DATABASE) = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "kind": "pipeline",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "name": "'GO_VERSION:' + GO_VERSION + ' DATABASE:' + DATABASE",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "platform": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "arch": "amd64",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "os": "linux"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "services": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "image": "${DATABASE}",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "name": "database",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "pull": "default"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "steps": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "commands": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "echo hello"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "image": "golang:${GO_VERSION}",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "name": "build",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "pull": "default"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local args = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "DATABASE": "mysql:5.5",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "GO_VERSION": "1.4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "DATABASE": "mysql:6.5",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "GO_VERSION": "1.4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "DATABASE": "mysql:5.5",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "GO_VERSION": "1.3"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pipeline(arg.GO_VERSION, arg.DATABASE) for arg in args</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>æ®‹å¿µãªãŒã‚‰ç”Ÿæˆã•ã‚ŒãŸ jsonnet ã¯ãã®ã¾ã¾ã§ã¯ä½¿ãˆã¾ã›ã‚“ã€‚ä¿®æ­£ãŒå¿…è¦ã§ã™ã€‚</strong>
ãã‚Œã§ã‚‚ä¸€ã‹ã‚‰ .drone.jsonnet ã‚’æ›¸ãã‚ˆã‚Šã¯åœ§å€’çš„ã«åŠ¹ç‡ãŒè‰¯ã„ã§ã™ã€‚</p><ul><li>pipeline ä¸­ã®å¤‰æ•°ãŒ <code>${å¤‰æ•°å}</code> ã¨ãªã£ã¦ã„ã‚‹ã®ã§ç›´ã™ (<code>"golang:${GO_VERSION}"</code> -&gt; <code>"golang:" + GO_VERSION</code>)</li><li>pipeline name ãŒ <code>"</code> ã§å›²ã¾ã‚Œã¦ã‚‹ã®ã§å–ã‚Šé™¤ã (<code>"'GO_VERSION:' + GO_VERSION + ' DATABASE:' + DATABASE"</code> -&gt; <code>'GO_VERSION:' + GO_VERSION + ' DATABASE:' + DATABASE</code>)</li></ul><p>ã‚ã¨ã€ä¸€éƒ¨ã®ã‚³ãƒ¼ãƒ‰ã‚’ JSON ã¨ã—ã¦ç”Ÿæˆã—ã¦ã„ã‚‹ã®ã§ã€jsonnet ã¨ã—ã¦ã¯å¤šå°‘ç¶ºéº—ã§ã¯ãªã„(ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ<code>"</code>ã§å›²ã¾ã‚Œã¦ãŸã‚Šã™ã‚‹)ã§ã™ãŒã€å®Ÿç”¨ä¸Šç‰¹ã«å•é¡Œãªã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¡ãªã¿ã«ä¸Šã®ä¾‹ã§ã¯ matrix build ã® <code>include</code> ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ãŒã€ä½¿ã£ã¦ã„ãªã„å ´åˆã«ã‚‚å¯¾å¿œã—ã¦ã¾ã™ã—ã€
<code>include</code> ãŒä½¿ã‚ã‚Œã¦ã„ãªã„å ´åˆã€è‹¥å¹²ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒé•ã„ã¾ã™ã€‚</p><p>ãªãŠã€ä»Šå›ã®ãƒ„ãƒ¼ãƒ«ã®å¯¾è±¡ã«ãªã‚‹ .drone.yml ã¯ matrix build ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ãŒå‰æã«ãªã‚Šã¾ã™ã€‚
matrix build ãŒä½¿ã‚ã‚Œã¦ã„ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ã¾ã™ã€‚
matrix build ã‚’ä½¿ã£ã¦ã„ãªã„ã®ã§ã‚ã‚Œã° jsonnet ã‚’ä½¿ã†å¿…è¦æ€§ãŒå¼±ã„ã§ã™ã—ã€ <code>drone convert</code> ã§å¤‰æ›ã™ã‚Œã°è‰¯ã„æ°—ãŒã—ã¾ã™ã€‚</p><p>ä»¥ä¸Šã€è‡ªä½œã®OSSã®ç´¹ä»‹ã§ã—ãŸã€‚
Drone v0.8 ã‹ã‚‰ v1 ã¸ã®ç§»è¡Œã§å›°ã£ã¦ã„ã‚‹äººã¯æ˜¯éä½¿ã£ã¦ã¿ã¦ãã ã•ã„ã€‚
å¿«é©ãª Drone ãƒ©ã‚¤ãƒ•ã‚’ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[.drone.jsonnet ã¨ .drone.yml ã‚’æ¯”è¼ƒã™ã‚‹ Drone plugin ã‚’ä½œã£ãŸ]]></title>
            <link>https://techblog.szksh.cloud/drone-plugin-jsonnet-check</link>
            <guid>https://techblog.szksh.cloud/drone-plugin-jsonnet-check</guid>
            <pubDate>Fri, 31 May 2019 23:34:10 GMT</pubDate>
            <description><![CDATA[ä¹…ã—ã¶ã‚Šã« Drone plugin ã‚’ä½œã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>ä¹…ã—ã¶ã‚Šã« <a href="https://docs.drone.io/plugins/" target="_blank" rel="noopener noreferrer">Drone plugin</a> ã‚’ä½œã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><a href="https://www.github.com/suzuki-shunsuke/drone-plugin-jsonnet-check" target="_blank" rel="noopener noreferrer">https://www.github.com/suzuki-shunsuke/drone-plugin-jsonnet-check</a></p><p>.drone.jsonnet ã‹ã‚‰ .drone.yml ã‚’ç”Ÿæˆã—ã¦ã„ã¦ã€ä¸¡æ–¹ã‚’ Git ã§ç®¡ç†ã—ã¦ã„ã‚‹å ´åˆã«ã€
.drone.jsonnet ã¨ .drone.yml ã®çŠ¶æ…‹ãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã® plugin ã§ã™ã€‚</p><p>Drone v1 ã§ã¯ matrix builds ãŒå»ƒæ­¢ã•ã‚Œã€multiple pipeline ãŒå°å…¥ã•ã‚Œã¾ã—ãŸã€‚
matrix builds ã‚’ <code>drone convert</code> ã‚³ãƒãƒ³ãƒ‰ã§ multiple pipeline ã«å¤‰æ›ã™ã‚‹ã¨ã€pipeline ã®æ•°ãŒå¤šã„ã»ã©å†—é•·ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒæ‚ªããªã‚Šã¾ã™ã€‚
ãã“ã§å…¬å¼ã§ã¯ <a href="https://jsonnet.org" target="_blank" rel="noopener noreferrer">jsonnet</a> ã§è¨˜è¿°ã—ã¦ .drone.yml ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p><a href="https://docs.drone.io/user-guide/pipeline/migrating/" target="_blank" rel="noopener noreferrer">https://docs.drone.io/user-guide/pipeline/migrating/</a></p><blockquote><p>To simplify your configuration we recommend using jsonnet.</p></blockquote><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ drone jsonnet --format --stream</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>jsonnet ã‹ã‚‰ yaml ã¸ã®å¤‰æ›ã¯ <a href="https://docs.drone.io/extend/config/jsonnet/" target="_blank" rel="noopener noreferrer">Jsonnet extension</a> ã‚’ä½¿ã†ã¨ Drone ãŒãƒ“ãƒ«ãƒ‰å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§å¤‰æ›ã—ã¦ãã‚Œã‚‹ã®ã§ .drone.yml ã‚’ç®¡ç†ã™ã‚‹å¿…è¦ã¯ãªããªã‚Šã¾ã™ãŒã€
ä½¿ã£ã¦ã„ãªã„å ´åˆã€ .drone.jsonnet ã¨ .drone.yml ã‚’ Git ã§ç®¡ç†ã—ã€è‡ªå‰ã§å¤‰æ›ã—ã¦ã‚³ãƒŸãƒƒãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®ä½œæ¥­ã‚’ãªã«ã‹ã—ã‚‰è‡ªå‹•åŒ–ã—ãªã„ã¨ .drone.jsonnet ã¨ .drone.yml ã«ä¸æ•´åˆãŒç”Ÿã˜ã‚‹ã“ã¨ã‚‚ã‚ã‚Šå¾—ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><ul><li>.drone.jsonnet ã‚’æ›´æ–°ã—ãŸã‘ã© .drone.yml ã‚’æ›´æ–°ã—å¿˜ã‚Œã‚‹</li><li>.drone.yml ã‚’ç›´æ¥æ›´æ–°ã—ã¦ã—ã¾ã£ãŸ</li></ul><p>ãã“ã§ CI ã§ä¸æ•´åˆãŒç”Ÿã˜ã¦ã„ãªã„ã‹ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã® plugin ã‚’ä½œã‚Šã¾ã—ãŸã€‚</p><p>æœ€åˆã¯ plugin ã§ã¯ãªãã€ãŸã ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦å…¬é–‹ã—ã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/drone-jsonnet-convert-test" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/drone-jsonnet-convert-test</a></p><p>ã—ã‹ã—ã€æŠ˜è§’ãªã®ã§ plugin ã«ã—ã¾ã—ãŸã€‚</p><p>ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯å˜ç´”ã§ã€ .drone.jsonnet ã‹ã‚‰ YAML ã‚’ç”Ÿæˆã—ã€ .drone.yml ã¨ diff ã‚’å–ã£ã¦ã„ã‚‹ã ã‘ã§ã™ã€‚</p><p>ä½¿ã„æ–¹ã¯ README ã‚’è¦‹ã‚Œã°åˆ†ã‹ã‚‹ã¨æ€ã„ã¾ã™ãŒã€</p><p><code>drone jsonnet</code> ã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ plugin ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æ¸¡ã›ã¾ã™ã€‚</p><div class="language-jsonnet codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonnet codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind: "pipeline",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: "test",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  steps: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: "test .drone.yml",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      image: "suzukishunsuke/jsonnet-check:v1.1.1-v0.1.0",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      settings: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        format: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ drone exec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:0] + drone jsonnet --format --target /tmp/.drone.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:1] + diff .drone.yml /tmp/.drone.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:2] --- .drone.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:3] +++ /tmp/.drone.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:4] @@ -12,5 +12,4 @@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:5]    settings:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:6]      format: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:8] -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[test .drone.yml:9]  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2019/06/01 00:33:27 test .drone.yml : exit code 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å®Ÿè£…ã—ã¾ã—ãŸã€‚
ãƒ†ã‚¹ãƒˆã§ã¯ <a href="https://github.com/bats-core/bats-core" target="_blank" rel="noopener noreferrer">bats</a> ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚</p><p>ä»¥ä¸Šã€ç°¡å˜ã§ã™ãŒã€è‡ªä½œ Drone plugin ã®ç´¹ä»‹ã§ã—ãŸã€‚</p>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[go-jsoneq - 2ã¤ã®å€¤ãŒJSONã¨ã—ã¦ç­‰ã—ã„ã‹æ¯”è¼ƒã™ã‚‹Goãƒ©ã‚¤ãƒ–ãƒ©ãƒª]]></title>
            <link>https://techblog.szksh.cloud/go-jsoneq</link>
            <guid>https://techblog.szksh.cloud/go-jsoneq</guid>
            <pubDate>Thu, 23 May 2019 02:43:18 GMT</pubDate>
            <description><![CDATA[https://github.com/suzuki-shunsuke/go-jsoneq]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/suzuki-shunsuke/go-jsoneq" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-jsoneq</a></p><p>2ã¤ã®å€¤ãŒJSONã¨ã—ã¦ç­‰ã—ã„ã‹æ¯”è¼ƒã™ã‚‹Goãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é–‹ç™ºã—ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>ã€Œ2ã¤ã®å€¤ãŒJSONã¨ã—ã¦ç­‰ã—ã„ã€ã¨ã¯ã€2ã¤ã®å€¤ã‚’ãã‚Œãã‚ŒJSONæ–‡å­—åˆ—ã«å¤‰æ›ã—ãŸã‚‰ã€2ã¤ãŒè¡¨ç¾ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒãŠãªã˜ã«ãªã‚‹ã¨ã„ã†æ„å‘³ã§ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Foo </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`json:"foo"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¨</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚’ JSON ã«å¤‰æ›ã—ãŸã‚‰ã¨ã‚‚ã«</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"foo"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã«ãªã‚Šã¾ã™ã­ã€‚</p><p>json.Marshaler ã®ãƒ†ã‚¹ãƒˆã‚„ã€
å®Ÿéš›ã® JSON æ–‡å­—åˆ—ã‹ã‚‰æ§‹é€ ä½“ã‚’å®šç¾©ã—ãŸã¨ãã«ã¡ã‚ƒã‚“ã¨å®šç¾©ã§ãã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã®ã«ä½¿ãˆã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>jsoneq.Equal ã§ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯å˜ç´”ã§ã™ã€‚</p><ol><li>json.Marshal ã§ []byte ã«å¤‰æ›</li><li>json.Unmarshal ã§ []byte ã‚’ map, array ã¨ primitive ãªå‹ã‹ã‚‰ãªã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(?)ã«å¤‰æ›</li><li>reflect.DeepEqual ã§æ¯”è¼ƒ</li></ol><p>å¼•æ•°ãŒ []byte ã®å ´åˆã¯ 1 ã¯é£›ã°ã—ã¾ã™ã€‚</p><p>GoDoc ã‚„ã‚µãƒ³ãƒ—ãƒ«ã‚’è¦‹ã‚Œã°ä½¿ã„æ–¹ã¯ç°¡å˜ã«ã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ä»¥ä¸Šã€ç°¡å˜ã§ã™ãŒã€è‡ªä½œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç´¹ä»‹ã§ã—ãŸã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>golang</category>
        </item>
        <item>
            <title><![CDATA[durl - å£Šã‚ŒãŸURLã‚’æ¤œçŸ¥ã™ã‚‹CLIãƒ„ãƒ¼ãƒ«]]></title>
            <link>https://techblog.szksh.cloud/durl</link>
            <guid>https://techblog.szksh.cloud/durl</guid>
            <pubDate>Sun, 28 Apr 2019 12:25:00 GMT</pubDate>
            <description><![CDATA[çµæ§‹å‰ã«é–‹ç™ºã—ãŸãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ã¾ã è¨˜äº‹ã«ã—ã¦ãªã‹ã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>çµæ§‹å‰ã«é–‹ç™ºã—ãŸãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ã¾ã è¨˜äº‹ã«ã—ã¦ãªã‹ã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/durl" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/durl</a></p><p>ãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã® URL ãŒå£Šã‚Œã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã® URL ã‚’æŠ½å‡ºã—ã€HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã¦ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ãŒ 2xx ã§ãªã„ã‚‚ã®ãŒã‚ã£ãŸå ´åˆã€ç•°å¸¸çµ‚äº†ã—ã¾ã™ã€‚</p><p>ãªãŠã€ãƒšãƒ¼ã‚¸å†…ãƒªãƒ³ã‚¯(ã‚¢ãƒ³ã‚«ãƒ¼)ãŒå£Šã‚Œã¦ã„ã‚‹ã‚‚ã®ã«ã¤ã„ã¦ã¯æ¤œçŸ¥ã§ãã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«<a href="#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="hash-link" aria-label="Direct link to ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" title="Direct link to ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">â€‹</a></h2><p>Goè£½ã§ã€ãƒã‚¤ãƒŠãƒªã‚’ GitHub Releases ã§å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/durl/releases" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/durl/releases</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-ã‚¤ãƒ¡ãƒ¼ã‚¸">Docker ã‚¤ãƒ¡ãƒ¼ã‚¸<a href="#docker-ã‚¤ãƒ¡ãƒ¼ã‚¸" class="hash-link" aria-label="Direct link to Docker ã‚¤ãƒ¡ãƒ¼ã‚¸" title="Direct link to Docker ã‚¤ãƒ¡ãƒ¼ã‚¸">â€‹</a></h2><p><a href="https://quay.io/repository/suzuki_shunsuke/durl" target="_blank" rel="noopener noreferrer">https://quay.io/repository/suzuki_shunsuke/durl</a></p><p>busybox ãƒ™ãƒ¼ã‚¹ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚‚æä¾›ã—ã¦ã„ã¾ã™ã€‚
CI ã§ä½¿ã†ã®ã«ä¾¿åˆ©ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ã„æ–¹">ä½¿ã„æ–¹<a href="#ä½¿ã„æ–¹" class="hash-link" aria-label="Direct link to ä½¿ã„æ–¹" title="Direct link to ä½¿ã„æ–¹">â€‹</a></h2><p><code>durl init</code> ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« <code>.durl.yml</code> ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ durl init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>durl check</code> ã«å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒªã‚¹ãƒˆã‚’æ¨™æº–å…¥åŠ›ã¨ã—ã¦æ¸¡ã—ã¦ãã ã•ã„ã€‚
<code>find</code> ã‚³ãƒãƒ³ãƒ‰ãªã©ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨è‰¯ã„ã§ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-errlog/blob/v0.9.0/scripts/durl.sh#L9" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-errlog/blob/v0.9.0/scripts/durl.sh#L9</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">find . \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -type d -name node_modules -prune -o \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -type d -name .git -prune -o \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -type d -name vendor -prune -o \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -type f -print | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  grep -v package-lock.json | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  grep -v Gopkg.toml | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  grep -v Gopkg.lock | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  durl check || exit 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å£Šã‚ŒãŸ URL ãŒè¦‹ã¤ã‹ã£ãŸã‚‰ ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã€URLã€HTTPã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo bar.txt | durl check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[bar.txt] https://github.com/suzuki-shunsuke/dead-repository is dead (404)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç„¡è¦–ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³">ç„¡è¦–ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³<a href="#ç„¡è¦–ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³" class="hash-link" aria-label="Direct link to ç„¡è¦–ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³" title="Direct link to ç„¡è¦–ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³">â€‹</a></h2><p><a href="https://github.com/suzuki-shunsuke/durl/issues/11" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/durl/issues/11</a></p><p>ã“ã‚Œã‚‰ã¯ç„¡è¦–ã—ã¾ã™ã€‚</p><ul><li>example.com, example.org, example.net</li><li>localhost</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¨­å®š">è¨­å®š<a href="#è¨­å®š" class="hash-link" aria-label="Direct link to è¨­å®š" title="Direct link to è¨­å®š">â€‹</a></h2><p><a href="https://github.com/suzuki-shunsuke/durl#configuration" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/durl#configuration</a></p><ul><li>ignore_urls: ç„¡è¦–ã™ã‚‹URL(å®Œå…¨ä¸€è‡´)ã®ãƒªã‚¹ãƒˆ</li><li>ignore_hosts: ç„¡è¦–ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³(å®Œå…¨ä¸€è‡´)ã®ãƒªã‚¹ãƒˆ</li><li>http_method: HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰<ul><li>head,get: HEADãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¤±æ•—ã—ãŸã‚‰GETãƒªã‚¯ã‚¨ã‚¹ãƒˆ</li><li>head: HEADãƒªã‚¯ã‚¨ã‚¹ãƒˆ</li><li>get: GETãƒªã‚¯ã‚¨ã‚¹ãƒˆ</li></ul></li><li>max_request_count: åŒæ™‚ã«ä¸¦åˆ—ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹æœ€å¤§æ•°</li><li>max_failed_request_count: æœ€å¤§ã®å¤±æ•—URLæ•°ã€‚ã“ã‚Œã‚’è¶…ãˆã‚‹ã¨å³æ™‚ç•°å¸¸çµ‚äº†ã™ã‚‹</li><li>http_request_timeout: HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ci-ã«çµ„ã¿è¾¼ã‚€">CI ã«çµ„ã¿è¾¼ã‚€<a href="#ci-ã«çµ„ã¿è¾¼ã‚€" class="hash-link" aria-label="Direct link to CI ã«çµ„ã¿è¾¼ã‚€" title="Direct link to CI ã«çµ„ã¿è¾¼ã‚€">â€‹</a></h2><p>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ãƒ–ãƒ­ã‚°ã‚’GitHubãªã©ã§ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹å ´åˆã€CIã«çµ„ã¿è¾¼ã‚€ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/go-errlog/blob/v0.9.0/.drone.yml#L35-L38" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-errlog/blob/v0.9.0/.drone.yml#L35-L38</a></li><li><a href="https://github.com/suzuki-shunsuke/go-errlog/blob/v0.9.0/scripts/durl.sh#L9" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-errlog/blob/v0.9.0/scripts/durl.sh#L9</a></li></ul>]]></content:encoded>
            <category>oss</category>
        </item>
        <item>
            <title><![CDATA[æ¯é€±30åˆ†ã®æŠ€è¡“å…±æœ‰ä¼š]]></title>
            <link>https://techblog.szksh.cloud/2019-knowledge-share-meeting</link>
            <guid>https://techblog.szksh.cloud/2019-knowledge-share-meeting</guid>
            <pubDate>Sun, 17 Mar 2019 04:47:40 GMT</pubDate>
            <description><![CDATA[è‡ªåˆ†ãŒæœ€è¿‘è·å ´ã§è¡Œã£ã¦ã„ã‚‹æŠ€è¡“å…±æœ‰ã®å–ã‚Šçµ„ã¿ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>è‡ªåˆ†ãŒæœ€è¿‘è·å ´ã§è¡Œã£ã¦ã„ã‚‹æŠ€è¡“å…±æœ‰ã®å–ã‚Šçµ„ã¿ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯">èƒŒæ™¯<a href="#èƒŒæ™¯" class="hash-link" aria-label="Direct link to èƒŒæ™¯" title="Direct link to èƒŒæ™¯">â€‹</a></h2><p>ã“ã‚Œã¾ã§è‡ªåˆ†ã¯ç©æ¥µçš„ã«è‡ªåˆ†ã«ã¨ã£ã¦æ–°ã—ã„æŠ€è¡“ã‚’å–ã‚Šå…¥ã‚Œã¦ã‚µãƒ¼ãƒ“ã‚¹ã®å“è³ªã®å‘ä¸Šã«ç¹‹ã’ã¦ãã¾ã—ãŸã€‚
ãŸã ã—ã€ãã‚Œã‚‰ã®æŠ€è¡“ã«é–¢ã—ã¦å‘¨ã‚Šã«ååˆ†ã«å…±æœ‰ã§ãã¦ã„ãªã‹ã£ãŸå´é¢ãŒã‚ã‚Šã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚„ã£ã¦ã„ã‚‹ã“ã¨">ã‚„ã£ã¦ã„ã‚‹ã“ã¨<a href="#ã‚„ã£ã¦ã„ã‚‹ã“ã¨" class="hash-link" aria-label="Direct link to ã‚„ã£ã¦ã„ã‚‹ã“ã¨" title="Direct link to ã‚„ã£ã¦ã„ã‚‹ã“ã¨">â€‹</a></h2><p>æ¯é€±30åˆ†æ±ºã¾ã£ãŸæ™‚é–“ã«ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ä½¿ã£ã¦ç™ºè¡¨ã—ã¦ã„ã¾ã™ã€‚
å¯¾è±¡ã¯åŒã˜éƒ¨ç½²ã®å¸Œæœ›è€…ã§ã™ã€‚
æ ã¯30åˆ†ã§ã™ãŒã€å®Ÿè³ªè©±ã—ã¦ã„ã‚‹ã®ã¯20åˆ†ãã‚‰ã„ãªæ°—ãŒã—ã¾ã™ã€‚
k8sã®ãƒãƒ³ã‚ºã‚ªãƒ³çš„ãªã“ã¨ã‚‚ã‚„ã‚Šã¾ã—ãŸ(ãã®ã¨ãã¯30åˆ†ã§çµ‚ã‚ã‚‰ãªã„ã®ã§2å›ã«åˆ†ã‘ã¦ã‚„ã‚Šã¾ã—ãŸ)ã€‚</p><p>è©±ã—ãŸã„ã“ã¨ã¯ãŸãã•ã‚“ã‚ã‚‹ã®ã§ã™ãŒã€ã¨ã‚Šã‚ãˆãšå¤§ããªãƒˆãƒ”ãƒƒã‚¯ã¨ã—ã¦ä»¥ä¸‹ã®3ã¤ã«çµã£ã¦ã„ã¾ã™ã€‚</p><ol><li>k8s(Rancher): ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ (ã„ã¾ã“ã“)</li><li>Drone: CI/CD</li><li>Graylog: ãƒ­ã‚°åé›†</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã“ã‚Œã¾ã§è©±ã—ãŸã“ã¨è©±ã™äºˆå®šã®ã“ã¨">ã“ã‚Œã¾ã§è©±ã—ãŸã“ã¨ãƒ»è©±ã™äºˆå®šã®ã“ã¨<a href="#ã“ã‚Œã¾ã§è©±ã—ãŸã“ã¨è©±ã™äºˆå®šã®ã“ã¨" class="hash-link" aria-label="Direct link to ã“ã‚Œã¾ã§è©±ã—ãŸã“ã¨ãƒ»è©±ã™äºˆå®šã®ã“ã¨" title="Direct link to ã“ã‚Œã¾ã§è©±ã—ãŸã“ã¨ãƒ»è©±ã™äºˆå®šã®ã“ã¨">â€‹</a></h2><p>k8s ã®åˆå¿ƒè€…ãŒ k8s ã‚’æœ¬ç•ªé‹ç”¨ã‚’è¦–é‡ã«å…¥ã‚Œã¤ã¤æ¤œè¨¼ç’°å¢ƒã§ä½¿ã£ã¦ã¿ã‚‹ã¨ã“ã‚ã¾ã§ã‚’ç›®æŒ‡ã—ã¦è©±ã—ã¦ã„ã¾ã™ã€‚</p><ol><li>ãªãœ k8s ã‚’ä½¿ã†ã®ã‹(éƒ¨ç½²ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«åˆã‚ã›ã¦å°å…¥æ„ç¾©ã‚’èª¬æ˜)</li><li>k8s ã®ãƒªã‚½ãƒ¼ã‚¹(Pod, Service, Deployment, etc) ã«ã¤ã„ã¦</li><li>k8s, Rancher ãƒãƒ³ã‚ºã‚ªãƒ³(2å›) ç°¡å˜ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ãŸã‚Š</li><li>Logging (ã„ã¾ã“ã“)</li><li>ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°</li><li>IPåˆ¶é™ã®ã‹ã‹ã£ãŸå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ–¹æ³•</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ¯é€±30åˆ†ã¨ã„ã†ãƒšãƒ¼ã‚¹æ„Ÿã«ã¤ã„ã¦">æ¯é€±30åˆ†ã¨ã„ã†ãƒšãƒ¼ã‚¹æ„Ÿã«ã¤ã„ã¦<a href="#æ¯é€±30åˆ†ã¨ã„ã†ãƒšãƒ¼ã‚¹æ„Ÿã«ã¤ã„ã¦" class="hash-link" aria-label="Direct link to æ¯é€±30åˆ†ã¨ã„ã†ãƒšãƒ¼ã‚¹æ„Ÿã«ã¤ã„ã¦" title="Direct link to æ¯é€±30åˆ†ã¨ã„ã†ãƒšãƒ¼ã‚¹æ„Ÿã«ã¤ã„ã¦">â€‹</a></h2><p>ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ã‚’é…æ…®ã—ã¾ã—ãŸã€‚</p><ul><li>é›†ä¸­åŠ›ãŒç¶šãã“ã¨<ul><li>60åˆ†ã¯é•·ã™ãã‚‹</li></ul></li><li>æŒç¶šå¯èƒ½ã§ã‚ã‚‹ã“ã¨<ul><li>1, 2 å›ã‚„ã£ãŸã ã‘ã§ã¯æ„å‘³ãŒãªã„</li><li>30åˆ†ã ã‘ãªã‚‰å‚åŠ ã—ã‚„ã™ã„</li><li>æº–å‚™ã®ã‚³ã‚¹ãƒˆã‚‚ç¾å®Ÿçš„ãªç¯„å›²</li><li>30åˆ†ã¨çŸ­ã‚ãªã®ã§æ¯é€±ã‚„ã‚‹ã€‚éš”é€±ã¨ã‹ã ã¨é »åº¦ãŒå°‘ãªã™ãã‚‹ã—ã€1å›é£›ã¶ã¨1ãƒ¶æœˆç©ºã„ã¦ã—ã¾ã†</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã“ã‚Œã¾ã§ã®çµæœ">ã“ã‚Œã¾ã§ã®çµæœ<a href="#ã“ã‚Œã¾ã§ã®çµæœ" class="hash-link" aria-label="Direct link to ã“ã‚Œã¾ã§ã®çµæœ" title="Direct link to ã“ã‚Œã¾ã§ã®çµæœ">â€‹</a></h2><p>ç‰¹ã«å¤§ããªæˆæœãŒã‚ã‚‹ã‚ã‘ã§ã¯ãªã„ã§ã™ãŒã€
k8sã«èˆˆå‘³ã‚’æŒã¡k8sã‚’æ¤œè¨¼ç’°å¢ƒã§ä½¿ã£ã¦ãã‚Œã‚‹äººãŒå‡ºã¦ãã¾ã—ãŸã€‚
å…±æœ‰ä¼šãŒk8s ã‚’è§¦ã‚‹ãã£ã‹ã‘ã«ãªã£ãŸã®ã ã¨ã—ãŸã‚‰ãã‚Œã ã‘ã§ã‚‚ã‚„ã£ã¦ã‚ˆã‹ã£ãŸã¨æ€ã„ã¾ã™ã€‚</p><p>ã¾ãŸã€è‡ªåˆ†è‡ªèº«å­¦ã¶ã“ã¨ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚
Logging ã«é–¢ã—ã¦è‡ªåˆ†ã¯ä»Šã¾ã§ Sidecar pattern ã‚’ä½¿ã£ã¦ã„ãŸã®ã§ã™ãŒã€Cluster Level Logging ã¸ã®ç§»è¡Œã‚’æ¤œè¨ã™ã‚‹ãã£ã‹ã‘ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ä»Šå¾Œã‚‚ã“ã®å–çµ„ã‚’(ç„¡ç†ã®ãªã„ç¯„å›²ã§)ç¶šã‘ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>job</category>
        </item>
        <item>
            <title><![CDATA[Rancherã§username ãŒé‡è¤‡ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã§ããªããªã£ãŸå ´åˆã®è§£æ¶ˆæ–¹æ³•]]></title>
            <link>https://techblog.szksh.cloud/rancher-duplicated-user-name</link>
            <guid>https://techblog.szksh.cloud/rancher-duplicated-user-name</guid>
            <pubDate>Sat, 16 Mar 2019 12:17:05 GMT</pubDate>
            <description><![CDATA[å…ˆæ—¥èµ·ã“ã£ãŸ Rancher ã®ãƒˆãƒ©ãƒ–ãƒ«ã®è§£æ¶ˆæ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>å…ˆæ—¥èµ·ã“ã£ãŸ Rancher ã®ãƒˆãƒ©ãƒ–ãƒ«ã®è§£æ¶ˆæ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
Rancher ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ v2.1.6 ã§ã™ã€‚
admin ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã‚ˆã†ã¨ã—ãŸã¨ã“ã‚ã€ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã‚Šã¾ã—ãŸã€‚
æœ€åˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹ã®ã‹ã¨æ€ã„ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆã—ãŸã‚‚ã®ã®ã€è§£æ¶ˆã—ã¾ã›ã‚“ã§ã—ãŸã€‚</p><p><a href="https://rancher.com/docs/rancher/v2.x/en/faq/technical/#how-can-i-reset-the-admin-password" target="_blank" rel="noopener noreferrer">https://rancher.com/docs/rancher/v2.x/en/faq/technical/#how-can-i-reset-the-admin-password</a></p><p>ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚ˆãè¦‹ã‚‹ã¨ 500 ã‚¨ãƒ©ãƒ¼ã§ã—ãŸã€‚ãã“ã§ rancher ã®ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’è¦‹ã¾ã—ãŸã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[ERROR] API error response 500 for POST /v3-public/localProviders/local?action=login. Cause: found more than one users with username admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>username ãŒ <code>admin</code> ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¤‡æ•°äººã„ã‚‹ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚
ã§ã‚ã‚Œã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ rename ãªã„ã— delete ã™ã‚Œã°è§£æ¶ˆã—ãã†ã§ã™ã€‚
ã—ã‹ã— Admin æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã®ãŒ admin ã—ã‹ã„ãªã„ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ rename ã—ãŸã‚Š delete ã™ã‚‹ã®ãŒé›£ã—ã„ã§ã™ã€‚</p><p>ã©ã†ã™ã‚Œã°ã‚ˆã„ã‹ã¨æ€ã£ã¦èª¿ã¹ã¦ãŸã¨ã“ã‚
rancher ã®ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ kubectl ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã“ã¨ã§ Rancher ã® Custom Resource ã‚’æ“ä½œã§ããã†ãªã“ã¨ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚</p><p><a href="https://qiita.com/yamamoto-febc/items/498b911611dd25351ad7" target="_blank" rel="noopener noreferrer">https://qiita.com/yamamoto-febc/items/498b911611dd25351ad7</a></p><p>ãã“ã§ 2 äººã„ã‚‹ <code>admin</code> ã®ç‰‡æ–¹ã‚’ rename ã™ã‚‹ã“ã¨ã§è§£æ¶ˆã—ã¾ã—ãŸã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># rancher ã®ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker exec -ti rancher bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># CRDã®ä¸€è¦§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get crd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get users.management.cattle.io -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># rename ã™ã‚‹ user ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get users.management.cattle.io/&lt;id&gt; -o yaml &gt; /tmp/user.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># vi ãŒã‚³ãƒ³ãƒ†ãƒŠã«ãªã„ãŸã‚ sed ã§å¯¾å¿œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sed -e "s/username: admin/username: admin2/" /tmp/user.yaml | kubectl apply -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>rancher</category>
        </item>
        <item>
            <title><![CDATA[Goã®è¨­å®šç®¡ç†ã§ viper ã®ä»£ã‚ã‚Šã« confita ã‚’ä½¿ã†]]></title>
            <link>https://techblog.szksh.cloud/use-confita</link>
            <guid>https://techblog.szksh.cloud/use-confita</guid>
            <pubDate>Sat, 16 Feb 2019 09:38:45 GMT</pubDate>
            <description><![CDATA[Golang ã®è¨­å®šç®¡ç†ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã„ãˆã° viper ãŒæœ‰åã§ã™ãŒã€]]></description>
            <content:encoded><![CDATA[<p>Golang ã®è¨­å®šç®¡ç†ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã„ãˆã° <a href="https://github.com/spf13/viper" target="_blank" rel="noopener noreferrer">viper</a> ãŒæœ‰åã§ã™ãŒã€
<a href="https://github.com/heetch/confita" target="_blank" rel="noopener noreferrer">confita</a> ã‚‚è‰¯ã•ãã†ã ã£ãŸã®ã§ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>confita ã®æ©Ÿèƒ½ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>æ§‹é€ ä½“ã«è¨­å®šã‚’ãƒãƒƒãƒ”ãƒ³ã‚°</li><li>flag ã‚„ç’°å¢ƒå¤‰æ•°ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾å¿œ</li><li>è¤‡æ•°ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾å¿œ</li></ul><p>æ§‹é€ ä½“ã«è¨­å®šã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã“ã¨ã§ã€<a href="https://github.com/go-playground/validator" target="_blank" rel="noopener noreferrer">https://github.com/go-playground/validator</a> ã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦è¨­å®šã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‡ºæ¥ã¾ã™ã€‚</p><p>ã¾ãŸ viper ã¯ <a href="https://github.com/spf13/viper/tree/v1.3.1#reading-config-files" target="_blank" rel="noopener noreferrer">v1.3.1</a> ã®æ™‚ç‚¹ã§è¤‡æ•°ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã„ã«ãã„ã§ã™ã€‚</p><blockquote><p>Viper can search multiple paths, but currently a single Viper instance only supports a single configuration file.</p></blockquote><p>k8s ã§ ConfigMap ã¨ Secret ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦æ‰±ã†å ´åˆã€è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ãˆãªã„ã¨ä¸ä¾¿ã§ã™ã€‚
ãã®ç‚¹ confita ã¯è¤‡æ•°ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å•é¡Œãªãæ‰±ãˆã¾ã™ã€‚</p><p>ä»¥ä¸‹ã¯ãƒ•ãƒ©ã‚°ã§æŒ‡å®šã—ãŸè¤‡æ•°ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è¨­å®šã‚’èª­ã¿è¾¼ã‚€ç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"context"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"gopkg.in/go-playground/validator.v9"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"github.com/heetch/confita"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"github.com/heetch/confita/backend"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"github.com/heetch/confita/backend/file"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flag </span><span class="token string" style="color:#e3116c">"github.com/spf13/pflag"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cps </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">StringSliceP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"config"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"c"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"configuration file path"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fileBackends </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">backend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Backend</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">cps </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fileBackends </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fileBackends</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewBackend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loader </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> confita</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fileBackends</span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cfg </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> Config</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">LogLevel</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"info"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// default value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> loader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validate </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> validator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> validate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Struct</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸Šã€ç°¡å˜ãªç´¹ä»‹ã§ã—ãŸã€‚
viper ä»¥å¤–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¢ã—ã¦ã„ã‚‹äººã¯è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>]]></content:encoded>
            <category>golang</category>
        </item>
        <item>
            <title><![CDATA[JSä»¥å¤–ã§ã®npmã®æ´»ç”¨]]></title>
            <link>https://techblog.szksh.cloud/use-npm</link>
            <guid>https://techblog.szksh.cloud/use-npm</guid>
            <pubDate>Thu, 14 Feb 2019 12:34:22 GMT</pubDate>
            <description><![CDATA[npm ã¯ Node.js ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ãŒã€è‡ªåˆ†ã¯JSä»¥å¤–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ä½¿ãˆã‚‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>npm ã¯ Node.js ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ãŒã€è‡ªåˆ†ã¯JSä»¥å¤–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ä½¿ãˆã‚‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
å®Ÿéš›ã€Goã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€OSSã€ansible role, playbook ãªã©ç¨®é¡ã‚’å•ã‚ãšã€è‡ªåˆ†ãŒç®¡ç†ã—ã¦ã„ã‚‹å¤šãã®ãƒªãƒã‚¸ãƒˆãƒªã§ä½¿ã£ã¦ã„ã¾ã™ã€‚
ãŸã ã€Goã®OSSã§ npm ä½¿ã£ã¦ã„ã‚‹ã®ã¯è‡ªåˆ†ä»¥å¤–ã§è¦‹ãŸã“ã¨ã¯ãªã„ã§ã™ã—ã€
æ­£ç›´ã‚ã¾ã‚Šè³›åŒã¯ã•ã‚Œãªã„ã‹ãªã¨æ€ã„ã¾ã™ãŒã€ã“ã†ã„ã†è€ƒãˆæ–¹ã‚‚ã‚ã‚‹ã¨æ€ã£ã¦ã„ãŸã ã‘ãŸã‚‰ã¨æ€ã„ã¾ã™ã€‚</p><p>npm ã‚’ä½¿ã†ç†ç”±ã¯</p><ul><li>Nodeè£½ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ãŸã‚</li><li>npm scripts ã‚’ä½¿ã†ãŸã‚ (ä»Šå›æ›¸ããŸã„ã®ã¯ã“ã£ã¡)</li></ul><p>ã®2ã¤ã‚ã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nodeè£½ã®ãƒ„ãƒ¼ãƒ«">Nodeè£½ã®ãƒ„ãƒ¼ãƒ«<a href="#nodeè£½ã®ãƒ„ãƒ¼ãƒ«" class="hash-link" aria-label="Direct link to Nodeè£½ã®ãƒ„ãƒ¼ãƒ«" title="Direct link to Nodeè£½ã®ãƒ„ãƒ¼ãƒ«">â€‹</a></h2><ul><li><a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky</a>: Git Hookã‚’è¨­å®š</li><li><a href="https://conventional-changelog.github.io/commitlint/#/" target="_blank" rel="noopener noreferrer">commitlint</a>: commit ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®lint</li><li><a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">standard-version</a>: ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ã«ã‚ˆã£ã¦ Change Log ã‚’ç”Ÿæˆ</li></ul><p>ãªã©ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚
Nodeã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å¤‰åŒ–ãŒé€Ÿãã€äº’æ›æ€§ãŒå£Šã‚ŒãŸã‚Šã¨ã‹ã‚‚å¤šã„å°è±¡ã§ã™ãŒã€
ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªãã¦ã‚‚ãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã« install å‡ºæ¥ã‚‹(package.jsonã§ç®¡ç†ã§ãã‚‹)ã®ã§ãã®ç‚¹ã¯(ç‰¹ã«ãƒãƒ¼ãƒ é–‹ç™ºã§ã¯)è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="npm-scripts">npm scripts<a href="#npm-scripts" class="hash-link" aria-label="Direct link to npm scripts" title="Direct link to npm scripts">â€‹</a></h2><p>npm scripts ã«ã‚ˆã£ã¦ãã®ãƒªãƒã‚¸ãƒˆãƒªã®é–‹ç™ºã«ä½¿ã†ã‚³ãƒãƒ³ãƒ‰ç¾¤ã‚’ç®¡ç†ã™ã‚‹ã¨ã„ã†ã“ã¨ã‚’è‡ªåˆ†ã¯ã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/gomic/blob/v0.5.7/package.json" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/gomic/blob/v0.5.7/package.json</a></p><p>ãªã«ã‚‚ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã‚ãªã„å ´åˆã«æ¯”ã¹ã€ã“ã†ã™ã‚‹ã“ã¨ã§ãƒãƒ¼ãƒ å…¨ä½“ã§ã‚³ãƒãƒ³ãƒ‰ã‚’çµ±ä¸€ã§ãã¾ã™ã—ã€ä¸€é€£ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆåŒ–ã—ã¦ npm scripts ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãªã©ã€è‡ªå‹•åŒ–ã‚‚ä¿ƒé€²ã•ã‚Œã¾ã™ã€‚</p><p>ã”ãç°¡å˜ãªè‡ªå‹•åŒ–ã®ä¾‹ã§ã™ãŒã€tag ã‚’æ‰“ã¤ã¨åŒæ™‚ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸­ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’æ›´æ–°ã™ã‚‹ã®ã‚’ <code>npm run tag v1.1.0</code> ã¨ã„ã£ãŸã‚³ãƒãƒ³ãƒ‰ã§å‡ºæ¥ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
ã“ã†ã™ã‚‹ã“ã¨ã§ tag ã¨versionã‚³ãƒãƒ³ãƒ‰ã§å‡ºåŠ›ã•ã‚Œã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒé•ã†ãªã‚“ã¦ã“ã¨ã‚’é˜²ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/gomic/blob/v0.5.7/scripts/tag.sh" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/gomic/blob/v0.5.7/scripts/tag.sh</a></p><p>ã¾ãŸã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦å‹•ä½œãŒå¤‰ã‚ã‚‹ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã¯ npm scripts ã«ã‚ˆã£ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’çµ±ä¸€ã§ãã¾ã™ã€‚
ä¾‹ãˆã° <code>gofmt</code> ã¯ <code>-s</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æœ‰ç„¡ã§çµæœãŒå¤‰ã‚ã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="make-ã§ã„ã„ã®ã§ã¯">Make ã§ã„ã„ã®ã§ã¯<a href="#make-ã§ã„ã„ã®ã§ã¯" class="hash-link" aria-label="Direct link to Make ã§ã„ã„ã®ã§ã¯" title="Direct link to Make ã§ã„ã„ã®ã§ã¯">â€‹</a></h2><p>npm scripts ã§ã¯ãªãã¦ Make ã®ã»ã†ãŒã„ã„ã‚“ã˜ã‚ƒãªã„ã®ã¨ã„ã†æ„è¦‹ã‚‚ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><ul><li>npm ãŒç‰¹å®šã®è¨€èªã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãªã®ã«å¯¾ã—ã€Makeã¯ã‚ˆã‚Šæ±ç”¨çš„ãªãƒ„ãƒ¼ãƒ«ãªã®ã§ã€Nodeä»¥å¤–ã§ã¯Makeã®ã»ã†ãŒé©åˆ‡ã§ã¯</li><li>Makeã®ã»ã†ãŒnpm scriptsã‚ˆã‚Šå¤šæ©Ÿèƒ½<ul><li>ä¾å­˜é–¢ä¿‚ã®ã‚ã‚‹ã‚¿ã‚¹ã‚¯ã‚’ç®¡ç†ã™ã‚‹å ´åˆã¯Makeã®ã»ã†ãŒè‰¯ã„</li></ul></li><li>package.jsonã¯jsonãªã®ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã‘ãªã„ã®ãŒä¸ä¾¿</li></ul><p>ãŸã ã€Makeã‚ˆã‚Šnpm scriptsã®ã»ã†ãŒè‰¯ã„ã¨æ„Ÿã˜ã¦ã„ã‚‹éƒ¨åˆ†ãŒå°‘ãªã‹ã‚‰ãšã‚ã‚Šã¾ã™ã€‚</p><ul><li>Makeã«ã¯æ´¾ç”ŸãŒã‚ã‚‹(BSD, GNU, etc)</li><li>Makeã¯è¤‡é›‘ã™ãã‚‹(1å†Šã®æœ¬ã«ãªã‚‹ãã‚‰ã„)<ul><li>npm scripts ã¯æ©Ÿèƒ½ãŒå°‘ãªã„åˆ†ã€ã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«</li></ul></li><li>npm scripts ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¾å­˜ã—ãªã„(package.jsonãŒã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰å®Ÿè¡Œã•ã‚Œã‚‹)<ul><li>Makeã§ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«Makefile ãŒãªã„å ´åˆã€Makefileã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li></ul></li><li>Makeã¯å¼•æ•°ãŒæ¸¡ã—ã¥ã‚‰ã„(make FOO=foo ã¿ãŸã„ã«å¼•æ•°åã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹)</li></ul><p>ãã®ãŸã‚ã€è‡ªåˆ†ã¯ npm scripts ã‚’ä½¿ã£ã¦ã„ã¾ã™(huskyã¨ã‹ã‚’ä½¿ã†ã‹ã‚‰ã¨ã„ã†ã®ã‚‚ã‚ã‚Šã¾ã™ãŒ)ã€‚</p><p>ãã‚Œä»¥å¤–ã®ãƒ„ãƒ¼ãƒ«ã¨ã®æ¯”è¼ƒã¯ã—ã¦ã„ã¾ã›ã‚“ã€‚
npm ã¯ã‹ãªã‚Šä¸€èˆ¬çš„ãªãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€ãã®ã¸ã‚“ã®ãƒ„ãƒ¼ãƒ«ã‚ˆã‚Šã¯å°å…¥éšœå£ãŒä½ã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="npm-scripts-ã®é–¢æ•°ã‚¨ã‚¤ãƒªã‚¢ã‚¹">npm scripts ã®é–¢æ•°ãƒ»ã‚¨ã‚¤ãƒªã‚¢ã‚¹<a href="#npm-scripts-ã®é–¢æ•°ã‚¨ã‚¤ãƒªã‚¢ã‚¹" class="hash-link" aria-label="Direct link to npm scripts ã®é–¢æ•°ãƒ»ã‚¨ã‚¤ãƒªã‚¢ã‚¹" title="Direct link to npm scripts ã®é–¢æ•°ãƒ»ã‚¨ã‚¤ãƒªã‚¢ã‚¹">â€‹</a></h2><p>npm scripts ã‚’ã‚ˆãä½¿ã†å ´åˆã€é–¢æ•°ã‚„ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nx() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  npm --silent run $1 -- ${@:2}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias npm="npm --silent"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>--silent</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã®è¨­å®šã§ã™ã€‚ <a href="https://docs.npmjs.com/misc/config#loglevel" target="_blank" rel="noopener noreferrer">https://docs.npmjs.com/misc/config#loglevel</a>
ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚’ç‰¹ã«æŒ‡å®šã—ãªã„ã¨ã€Nodeã«é–¢ã™ã‚‹ãƒ­ã‚°ã‚‚å‡ºåŠ›ã•ã‚Œã¦ã—ã¾ã„ã€è¦‹é€šã—ãŒæ‚ªããªã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ /usr/local/bin/npm run vet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; @ vet /Users/suzuki-shunsuke/repos/src/github.com/suzuki-shunsuke/gomic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; go vet ./...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># github.com/suzuki-shunsuke/gomic/internal/usecase/gencmd/output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">internal/usecase/gencmd/output/output.go:9:14: undefined: imports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ERR! code ELIFECYCLE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ERR! errno 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ERR! @ vet: `go vet ./...`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ERR! Exit status 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ERR!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ERR! Failed at the @ vet script.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ERR! A complete log of this run can be found in:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ERR!     /Users/suzuki-shunsuke/.npm/_logs/2019-02-14T22_44_50_065Z-debug.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>--silent</code> ã‚’ã¤ã‘ã‚‹ã¨ã™ã£ãã‚Šã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ /usr/local/bin/npm --silent run vet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># github.com/suzuki-shunsuke/gomic/internal/usecase/gencmd/output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">internal/usecase/gencmd/output/output.go:9:14: undefined: imports</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãŸã ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¤ã‘ã‚‹ã¨ã€npm scripts ã§é–“é•ã£ãŸã‚³ãƒãƒ³ãƒ‰ã‚’æŒ‡å®šã—ã¦ã‚‚ãªã‚“ã®ã‚¨ãƒ©ãƒ¼ã‚‚å‡ºåŠ›ã—ã¦ãã‚Œãªããªã‚‹ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>]]></content:encoded>
            <category>npm</category>
        </item>
        <item>
            <title><![CDATA[Go ã®å¥½ããªã¨ã“ã‚]]></title>
            <link>https://techblog.szksh.cloud/golang-good-point</link>
            <guid>https://techblog.szksh.cloud/golang-good-point</guid>
            <pubDate>Sun, 10 Feb 2019 08:49:58 GMT</pubDate>
            <description><![CDATA[è‡ªåˆ†ã¯ 2017/8é ƒ(æ›–æ˜§)ã‹ã‚‰ãƒ¡ã‚¤ãƒ³ã§æ›¸ãè¨€èªã‚’ Python ã‹ã‚‰ Go ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>è‡ªåˆ†ã¯ 2017/8é ƒ(æ›–æ˜§)ã‹ã‚‰ãƒ¡ã‚¤ãƒ³ã§æ›¸ãè¨€èªã‚’ Python ã‹ã‚‰ Go ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚
Goã‚’æ›¸ãå§‹ã‚ã¦å‰²ã¨æ—©ã„æ®µéšã§GoãŒä¸€ç•ªå¥½ãã«ãªã‚Šã¾ã—ãŸã€‚
ãã“ã§ãªã‚“ã§ Go ãŒå¥½ããªã®ã‹ã¨ã„ã†ã“ã¨ã‚’é ‘å¼µã£ã¦è¨€èªåŒ–ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚</p><p>è‹¥å¹²ä»–ã®è¨€èªã¨æ¯”è¼ƒã™ã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚Šã¾ã™ãŒã€æ±ºã—ã¦ä»–ã®è¨€èªã‚’ãƒ‡ã‚£ã‚¹ã£ãŸã‚Šã€
ä»–ã®è¨€èªã‚ˆã‚Šå„ªã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãŒè¨€ã„ãŸã„ã‚ã‘ã§ã¯ãªã„ã®ã§ã”äº†æ‰¿ãã ã•ã„ã€‚</p><ul><li>ä¾å­˜ã™ã‚‹ã‚‚ã®ãŒå°ã•ãã€ãƒã‚¤ãƒŠãƒª1ã¤ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã ã‘ã§è‰¯ã„<ul><li>Prometheus ã® exporter ã¨ã‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ç°¡å˜</li><li>Docker Imageã‚‚æœ€å°é™ã«ãªã‚‹</li></ul></li><li>é™çš„å‹ä»˜ã‘<ul><li>ãƒ“ãƒ«ãƒ‰å‡ºæ¥ã¦ã„ã‚‹æ™‚ç‚¹ã§ä¸€å®šã®ä¿¡é ¼æ€§ãŒæ‹…ä¿ã•ã‚Œã¦ã„ã‚‹</li><li>ã‚ˆãçŸ¥ã‚‰ãªã„ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã ã‚Šä¿®æ­£ã™ã‚‹ã¨ãã¨ã‹ã ã„ã¶æœ‰ã‚Šé›£ã„</li></ul></li><li>GoDocãŒç´ æ™´ã‚‰ã—ã„<ul><li>ä½•ã‚‚ã—ãªãã¦ã‚‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå‡ºæ¥ä¸ŠãŒã£ã¦ã„ã‚‹</li></ul></li><li>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å…¬é–‹ãŒå®¹æ˜“<ul><li>GitHubã«å…¬é–‹ã™ã‚‹ã ã‘</li><li>npm ã‚„ pypi ã®ã‚ˆã†ãªãƒ¬ã‚¸ã‚¹ãƒˆãƒªãŒãªã„ã®ã§æ¥½</li></ul></li><li>go test ã¨ã‹ go vet, gofmt ã¿ãŸã„ã«æ¨™æº–ãƒ„ãƒ¼ãƒ«ãŒæƒã£ã¦ã„ã‚‹</li><li>ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã§æ‚©ã‚€å¿…è¦ãŒãªã„</li><li>lintãƒ„ãƒ¼ãƒ«ãŒå……å®Ÿã—ã¦ã„ã‚‹<ul><li>gometalinter ã¨ã‹ä½¿ã£ã¦ãŠã‘ã° OK</li><li>lintã§ãã‚‹ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ã®ã«ãã“ã¾ã§é ‘å¼µã‚‰ãªãã¦è‰¯ã„</li></ul></li><li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒæš—é»™çš„ã«çœç•¥ã§ããªã„ã®ã§ä¿¡é ¼æ€§ãŒé«˜ã„<ul><li>Goã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å«Œã„ã£ã¦äººã‚‚ã„ã‚‹ã—ã€v2ã§æ”¹å–„ã•ã‚Œã‚‹ã£ã¦è©±ã‚‚èãã‘ã©ã€è‡ªåˆ†ã¯ã‚€ã—ã‚å¥½ã(é¢å€’ãªã®ã¯ç†è§£ã§ãã‚‹ã‘ã©)</li></ul></li><li>è¨€èªä»•æ§˜ãŒã‚·ãƒ³ãƒ—ãƒ«(å®¢è¦³çš„ãªæ ¹æ‹ ã¯ãªã„ã—ã€é›£ã—ã„éƒ¨åˆ†ã‚‚ã‚ã‚‹ã‘ã©ã€ãã‚“ãªæ°—ãŒã™ã‚‹)<ul><li>ãƒ¡ã‚¿ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ä½¿ã£ãŸã€é­”è¡“çš„ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã«ãã„</li></ul></li><li>interface ä½¿ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç–çµåˆã«ã™ã‚‹ã®ãŒæ›¸ã„ã¦ã¦æ°—æŒã¡ã„ã„</li><li>ä¸¦åˆ—å‡¦ç†ãŒæ›¸ãã‚„ã™ã„</li></ul>]]></content:encoded>
            <category>golang</category>
        </item>
        <item>
            <title><![CDATA[go-error-handling-logging-practice v0.2]]></title>
            <link>https://techblog.szksh.cloud/golang-logging-error-handling-practice-0.2.0</link>
            <guid>https://techblog.szksh.cloud/golang-logging-error-handling-practice-0.2.0</guid>
            <pubDate>Fri, 01 Feb 2019 13:26:13 GMT</pubDate>
            <description><![CDATA[ä»¥å‰ Golang ã®ãƒ­ã‚®ãƒ³ã‚°ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã¤ã„ã¦æ›¸ãã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>ä»¥å‰ Golang ã®ãƒ­ã‚®ãƒ³ã‚°ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã¤ã„ã¦æ›¸ãã¾ã—ãŸã€‚</p><ul><li><a href="https://suzuki-shunsuke.github.io/golang-logging-error-handling-practice/" target="_blank" rel="noopener noreferrer">https://suzuki-shunsuke.github.io/golang-logging-error-handling-practice/</a></li><li><a href="https://github.com/suzuki-shunsuke/go-error-handling-logging-practice" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-error-handling-logging-practice</a></li></ul><p>ãã‚Œã‚’å°‘ã— v0.1 ã‹ã‚‰ v0.2 ã«äº’æ›æ€§ã‚’å£Šã™å½¢ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã‚ˆã†ã‹ã¨æ€ã„ã¾ã™ã€‚
æœ¬è¨˜äº‹ã§ã¯ãã®å¤‰æ›´ç‚¹ã«ã¤ã„ã¦æ›¸ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¤‰æ›´ç‚¹">å¤‰æ›´ç‚¹<a href="#å¤‰æ›´ç‚¹" class="hash-link" aria-label="Direct link to å¤‰æ›´ç‚¹" title="Direct link to å¤‰æ›´ç‚¹">â€‹</a></h2><p><strong>é–¢æ•°ã®ã‚¨ãƒ©ãƒ¼ã«æƒ…å ±ã‚’ä»˜ä¸ã™ã‚‹è²¬å‹™ã‚’é–¢æ•°ã«å‰²ã‚Šå½“ã¦ã¦ã„ãŸã‚‚ã®ã‚’ã€å‘¼ã³å‡ºã—å…ƒã«å‰²ã‚Šå½“ã¦ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</strong></p><p>å…·ä½“çš„ã«ã¯å…ƒã€…</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> errlog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">checkName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logrus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Fields</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"age"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> age</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"failed to create a user"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã ã£ãŸã‚‚ã®ãŒ</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> errlog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">checkName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"user name is invalid"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã«ãªã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¤‰æ›´ç†ç”±">å¤‰æ›´ç†ç”±<a href="#å¤‰æ›´ç†ç”±" class="hash-link" aria-label="Direct link to å¤‰æ›´ç†ç”±" title="Direct link to å¤‰æ›´ç†ç”±">â€‹</a></h2><p>ãƒ¡ã‚¿æƒ…å ±ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ä¾å­˜ã—ã¾ã™ã€‚
ä¸Šè¨˜ã®ä¾‹ã ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ã„ã†ãƒ¡ã‚¿æƒ…å ±ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¯ <code>name</code> ã‚ˆã‚Š <code>user_name</code> ã‚„ <code>admin_name</code>, <code>owner_name</code> ã¨ã—ãŸã»ã†ãŒé©åˆ‡ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã‚Œã¯é–¢æ•°å†…éƒ¨ã§ã¯åˆ†ã‹ã‚‰ãšã€å‘¼ã³å‡ºã—å…ƒã§ãªã„ã¨åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚å‘¼ã³å‡ºã—å…ƒã§ãªã„ã¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®è¡çªãŒé¿ã‘ã‚‰ã‚Œãªã„ã“ã¨ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«é–¢ã—ã¦ã‚‚åŒæ§˜ã®ã“ã¨ãŒè¨€ãˆã¾ã™ã€‚
ã¾ãŸã€å…ƒã€… v0.1 ã§ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®šç¾©ã—ãŸé–¢æ•°ã¨</p><ul><li>æ¨™æº–é–¢æ•°ã‚„ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–éƒ¨ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°</li><li>interface ã®é–¢æ•°ã‚„ãƒ¡ã‚½ãƒƒãƒ‰</li></ul><p>ã‚’åŒºåˆ¥ã—ã€å‰è€…ã§ã¯é–¢æ•°å´ã§ã‚¨ãƒ©ãƒ¼ã«æƒ…å ±ã‚’ä»˜ä¸ã•ã›ã‚‹ä¸€æ–¹ã€å¾Œè€…ã§ã¯å‘¼ã³å‡ºã—å…ƒã§æƒ…å ±ã‚’ä»˜ä¸ã•ã›ã‚‹ã¨ã„ã†ãµã†ã«ã—ã¦ã„ã¾ã—ãŸã€‚</p><p>v0.2 ã§ã¯ä¸¡è€…ã‚’åŒºåˆ¥ã›ãšã€ã©ã¡ã‚‰ã®å ´åˆã§ã‚‚å‘¼ã³å‡ºã—å…ƒã«ä»˜ä¸ã•ã›ã‚‹ã¨ã„ã†ãµã†ã«ã™ã‚‹ã“ã¨ã§ã‚ˆã‚Šãƒ«ãƒ¼ãƒ«ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šã¾ã™ã€‚</p>]]></content:encoded>
            <category>golang</category>
        </item>
        <item>
            <title><![CDATA[Terraform Providerã§ import ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•]]></title>
            <link>https://techblog.szksh.cloud/terraform-provider-graylog-import</link>
            <guid>https://techblog.szksh.cloud/terraform-provider-graylog-import</guid>
            <pubDate>Fri, 25 Jan 2019 13:38:28 GMT</pubDate>
            <description><![CDATA[terraform provider graylog ã§ alert condition ã¨ stream rule ã® import ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>terraform provider graylog ã§ alert condition ã¨ stream rule ã® import ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/go-graylog/pull/59" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-graylog/pull/59</a></li><li><a href="https://github.com/suzuki-shunsuke/go-graylog/pull/60" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-graylog/pull/60</a></li></ul><p>ãã“ã§ import ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>terraform ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’importã™ã‚‹ã«ã¯ãƒªã‚½ãƒ¼ã‚¹ãŒimportã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
<a href="https://godoc.org/github.com/hashicorp/terraform/helper/schema#Resource" target="_blank" rel="noopener noreferrer">schema.Resource ã® Importer ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</a>ã§ã™ã­ã€‚ãƒªã‚½ãƒ¼ã‚¹ãŒIDã ã‘ã§Getå‡ºæ¥ã‚‹å ´åˆã€<a href="https://godoc.org/github.com/hashicorp/terraform/helper/schema#ImportStatePassthrough" target="_blank" rel="noopener noreferrer">schema.ImportStatePassthrough</a>ã‚’ä½¿ãˆã°çµ‚ã‚ã‚Šã§ã™ã€‚
ä¸€æ–¹ã€Graylogã®alert condition ã‚„ stream rule ã¯IDã ã‘ã§ãªãã€stream id ã‚‚å¿…è¦ã«ãªã‚Šã¾ã™ã€‚
terraform import ã‚³ãƒãƒ³ãƒ‰ã¯1ã¤ã®å¼•æ•°ã—ã‹å–ã‚‰ãªã„ãŸã‚ã€ã‚µãƒãƒ¼ãƒˆã§ããªã„ã®ã§ã¯ï¼Ÿã¨ä»¥å‰ã¾ã§æ€ã£ã¦ã„ã¾ã—ãŸã€‚
ãã†ã„ã£ãŸå ´åˆã€æ¬¡ã®ã‚ˆã†ã«StateFuncã‚’å®Ÿè£…ã™ã‚Œã°ã‚µãƒãƒ¼ãƒˆã§ãã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-graylog/pull/59/commits/baee1165f49d2bc21b6ea7551ceff6b7daf01543#diff-f41be2a3640efd12ad4e808d77c5c8d5" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-graylog/pull/59/commits/baee1165f49d2bc21b6ea7551ceff6b7daf01543#diff-f41be2a3640efd12ad4e808d77c5c8d5</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># "/" ã§åŒºåˆ‡ã£ã¦ stream id ã¨ ID ã‚’æ¸¡ã™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ terraform import graylog_alarm_callback.test 5bb1b4b5c9e77bbbbbbbbbbb/5c4acaefc9e77bbbbbbbbbbb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åŒºåˆ‡ã‚Šæ–‡å­—ã¯ä½•ã§ã‚‚è‰¯ã„ã®ã§ã—ã‚‡ã†ãŒã€å…¬å¼ã®provider ãŒ "/" ã§åŒºåˆ‡ã£ã¦ã„ãŸã®ã§ãã‚Œã«å¾“ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p><a href="https://www.terraform.io/docs/providers/google/r/spanner_database.html#import" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/providers/google/r/spanner_database.html#import</a></p><p><a href="https://godoc.org/github.com/hashicorp/terraform/helper/schema#ImportStatePassthrough" target="_blank" rel="noopener noreferrer">https://godoc.org/github.com/hashicorp/terraform/helper/schema#ImportStatePassthrough</a> ã®å®Ÿè£…ã‚’è¦‹ã¦ã¿ã‚Œã°åˆ†ã‹ã‚Šã¾ã™ãŒã€
StateFunc ã®ä¸­ã§ã¯ GET API ã‚’å©ã„ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—ã—ãŸã‚Šã¯ã—ã¾ã›ã‚“ã€‚
<code>terraform import</code> ã‚³ãƒãƒ³ãƒ‰ã®æ¨™æº–å‡ºåŠ›ã‚’è¦‹ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ãŒ refresh ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã®ã§ãã“ã§GETã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚
StateFunc ã¯ *schema.ResourceData ã®é…åˆ—ã‚’è¿”ã—ã¾ã™ãŒã€ã“ã‚Œã¯1åº¦ã®GETã§è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ãªAPIã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®ã‚ˆã†ã§ã™ã€‚</p><p>ä»¥ä¸Šã€terraform import ã®å®Ÿè£…æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>terraform</category>
            <category>graylog</category>
        </item>
        <item>
            <title><![CDATA[Githubã‚’Free Planã«ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãŸ]]></title>
            <link>https://techblog.szksh.cloud/downgrade-github-plan</link>
            <guid>https://techblog.szksh.cloud/downgrade-github-plan</guid>
            <pubDate>Sun, 20 Jan 2019 03:27:26 GMT</pubDate>
            <description><![CDATA[GitHub ã®ãƒ—ãƒ©ãƒ³ä½“ç³»ãŒå¤‰ã‚ã‚Šã€ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã‚‚ç„¡åˆ¶é™ã§private repositoryãŒä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>GitHub ã®ãƒ—ãƒ©ãƒ³ä½“ç³»ãŒå¤‰ã‚ã‚Šã€ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã‚‚ç„¡åˆ¶é™ã§private repositoryãŒä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><p><a href="https://github.blog/2019-01-07-new-year-new-github/" target="_blank" rel="noopener noreferrer">https://github.blog/2019-01-07-new-year-new-github/</a></p><p>ãã“ã§ç„¡æ–™ãƒ—ãƒ©ãƒ³ã«ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><ul><li><a href="https://help.github.com/articles/downgrading-your-github-billing-plan/" target="_blank" rel="noopener noreferrer">https://help.github.com/articles/downgrading-your-github-billing-plan/</a></li><li><a href="https://blog.jnito.com/entry/2019/01/09/081913" target="_blank" rel="noopener noreferrer">https://blog.jnito.com/entry/2019/01/09/081913</a></li></ul><p>ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã¯wikiã¯public repositoryã§ã—ã‹ä½¿ãˆãªã„ã®ã§ã€
private repository ã® wiki ã‚’ ç§»è¡Œã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>private ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(ã‚µãƒ¼ãƒ“ã‚¹)ã®ãŸã‚ã®wikiã§ã¯ãªãã€
å€‹äººçš„ãªãƒ¡ãƒ¢ãŒæ›¸ã„ã¦ã‚ã‚‹ã ã‘ã ã£ãŸã®ã§ç§»è¡Œã™ã‚‹ã“ã¨ã«ç‰¹ã«å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¨-private-repository-ã®-wiki-ã‚’-clone">å…¨ private repository ã® wiki ã‚’ clone<a href="#å…¨-private-repository-ã®-wiki-ã‚’-clone" class="hash-link" aria-label="Direct link to å…¨ private repository ã® wiki ã‚’ clone" title="Direct link to å…¨ private repository ã® wiki ã‚’ clone">â€‹</a></h2><p>ãã“ã§ã¾ãšã¯ãã†ã„ã£ãŸ wiki ã‚’ clone ã—ã¦ä¸€ã¤ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¾ã¨ã‚ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/foo" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/foo</a> ã® wiki ã¯
<a href="https://github.com/suzuki-shunsuke/foo.wiki" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/foo.wiki</a> ã§ clone ã§ãã¾ã™ã€‚</p><p>æ¬¡ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€private repositoryã®wikiã‚’å…¨éƒ¨cloneã—ã¾ã—ãŸã€‚</p><p><a href="https://developer.github.com/v3/repos/#list-your-repositories" target="_blank" rel="noopener noreferrer">https://developer.github.com/v3/repos/#list-your-repositories</a></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl "https://api.github.com/user/repos?access_token=$GITHUB_TOKEN&amp;visibility=private" | jq -r '.[].html_url' | xargs -I{} -n 1 git clone {}.wiki</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>wikiãŒå­˜åœ¨ã—ãªã„ã‚‚ã®ã«é–¢ã—ã¦ã¯ clone ã«å¤±æ•—ã—ã¾ã™ã€‚
API ã§ wiki ã®ãƒªã‚¹ãƒˆãŒå–å¾—ã§ãã‚‹ã¨è‰¯ã‹ã£ãŸã‚“ã§ã™ãŒã€
wikiã«é–¢ã™ã‚‹APIã¯ãªã•ãã†ã§ã™ã€‚</p><p>ã¾ãŸ <code>/user/repos</code> API ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® <code>has_wiki</code> ã¯wikiãŒå­˜åœ¨ã—ãªãã¦ã‚‚ã€wikiãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ãªã‘ã‚Œã° true ãªã‚ˆã†ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wiki-ã‚’-notable-ã«ç§»æ¤">wiki ã‚’ notable ã«ç§»æ¤<a href="#wiki-ã‚’-notable-ã«ç§»æ¤" class="hash-link" aria-label="Direct link to wiki ã‚’ notable ã«ç§»æ¤" title="Direct link to wiki ã‚’ notable ã«ç§»æ¤">â€‹</a></h2><p>clone ã—ãŸ wiki ã‚’ <a href="https://github.com/fabiospampinato/notable" target="_blank" rel="noopener noreferrer">notable</a> ã«ç§»æ¤ã—ã¾ã™ã€‚</p><p>notable ã¯ <a href="https://www.moongift.jp/2019/01/notable-%E6%B7%BB%E4%BB%98%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%82%E4%BD%BF%E3%81%88%E3%82%8Bmarkdown%E8%A8%98%E6%B3%95%E3%81%AE%E3%83%A1%E3%83%A2/" target="_blank" rel="noopener noreferrer">moon gift ã§æœ€è¿‘ç´¹ä»‹ã•ã‚Œã¦ã„ã¦è‰¯ã•ãã†ã ã£ãŸ</a>ã®ã§ä½¿ã£ã¦ã¿ã¾ã™ã€‚</p><p>Hugo ã«ç§»æ¤ã—ã¦ã‚‚è‰¯ã‹ã£ãŸã®ã§ã™ãŒ notable ãŒæ°—ã«ãªã£ãŸã®ã§ notable ã«ã—ã¾ã—ãŸã€‚
notable ã‚’ä½¿ã£ã¦ã¿ã¦ãƒ€ãƒ¡ãã†ã ã£ãŸã‚‰ Hugo ã‚‚æ¤œè¨ã—ã¾ã™ã€‚</p><p>Hugo ã«æ¯”ã¹ã¦notableãŒè‰¯ã„ã¨ã“ã‚ã¯</p><ul><li>ã‚·ãƒ³ã‚¿ã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ</li><li>tagã«ã‚ˆã‚‹çµã‚Šè¾¼ã¿</li><li>æ¤œç´¢</li></ul><p>ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§(ç‰¹ã«æ‰‹ã‚’åŠ ãˆãŸã‚Šã—ãªãã¦ã‚‚)ã„ã„æ„Ÿã˜ã«ä½¿ãˆã‚‹ã“ã¨ã§ã™ã€‚</p><p>notable ã® data directory ã‚’ private repository ã§ç®¡ç†ã—ã¾ã™(Dropbox ãªã©ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ç®¡ç†ã—ã¦ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™)ã€‚</p><p>å°‚ç”¨ã® private repository ã‚’1ã¤ä½œæˆã—ã€data directory ã‚’ä½œæˆã—ã€notable ã®è¨­å®šã§ä½œæˆã—ãŸdata directory ã‚’notable ã® data directory ã«ã—ã¾ã™ã€‚</p><p>notable ã® data directory ã«ã¯ãƒã‚¤ãƒŠãƒªã§ã¯ãªãã€plain text ã¨ã—ã¦ wiki ãŒä½œã‚‰ã‚Œã‚‹ã‚ˆã†ãªã®ã§ç§»æ¤ã‚‚ header ã®éƒ¨åˆ†ã‚’ notable ã«åˆã‚ã›ã¦ data directory ã«æ”¾ã‚Šè¾¼ã‚€ã ã‘ã§è‰¯ã„ã®ã§ç°¡å˜ã§ã—ãŸã€‚</p><p>header ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">title: Ansible action plugin ã«ã¤ã„ã¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tags: [ansible]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ„å¤–ã¨ç§»è¡Œå¯¾è±¡ã®wikiãŒå°‘ãªã‹ã£ãŸã®ã§1, 2æ™‚é–“ã§çµ‚ã‚ã‚Šã¾ã—ãŸã€‚
çµ‚ã‚ã£ãŸã‚ã¨ãƒ—ãƒ©ãƒ³ã‚’ç„¡æ–™ãƒ—ãƒ©ãƒ³ã«å¤‰æ›´ã—ã¦ä½œæ¥­ã¯çµ‚äº†ã—ã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>github</category>
        </item>
        <item>
            <title><![CDATA[Go ã«ãŠã‘ã‚‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ­ã‚®ãƒ³ã‚°ã®ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹]]></title>
            <link>https://techblog.szksh.cloud/golang-logging-error-handling-practice</link>
            <guid>https://techblog.szksh.cloud/golang-logging-error-handling-practice</guid>
            <pubDate>Tue, 25 Dec 2018 12:51:41 GMT</pubDate>
            <description><![CDATA[2018-12-30 è¿½è¨˜]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2018-12-30-è¿½è¨˜">2018-12-30 è¿½è¨˜<a href="#2018-12-30-è¿½è¨˜" class="hash-link" aria-label="Direct link to 2018-12-30 è¿½è¨˜" title="Direct link to 2018-12-30 è¿½è¨˜">â€‹</a></h2><p>ã“ã®è¨˜äº‹ã‚’å…ƒã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-error-handling-logging-practice" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-error-handling-logging-practice</a></p><p>è¿½è¨˜ã“ã“ã¾ã§</p><hr><p>Go ã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ­ã‚®ãƒ³ã‚°ã‚’ã—ã¦ãã¦è‡ªåˆ†ã®ä¸­ã§å›ºã¾ã‚Šã¤ã¤ã‚ã‚‹ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’æ˜æ–‡åŒ–ã—ã¾ã™ã€‚
æ˜æ–‡åŒ–ã™ã‚‹ã“ã¨ã§ä»¥ä¸‹ã®ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚</p><ul><li>è¿·ã„ã‚’ãªãã™</li><li>ã‚³ãƒ¼ãƒ‰ã®ä¸€è²«æ€§ã‚’ä¿ã¤</li><li>ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã¨ã™ã‚‹ã“ã¨ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å“è³ªã‚’ä¸Šã’ã‚‹(è‡ªå‹•åŒ–ã¯å‡ºæ¥ãªã„ã‘ã©)</li><li>ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’ä¸Šã’ã‚‹(ã‚³ãƒ¼ãƒ‰ãŒã‚´ãƒãƒ£ã¤ã‹ãªããªã‚‹)</li><li>é©åˆ‡ã«ã‚¨ãƒ©ãƒ¼ã‚’ãƒ­ã‚®ãƒ³ã‚°ã™ã‚‹(å¿…è¦ååˆ†ãªæƒ…å ±ã‚’ãƒ­ã‚°ã¨ã—ã¦æ®‹ã™)</li></ul><p>ã¾ãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ­ã‚®ãƒ³ã‚°ã®ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è‡ªä½œã—ã¦ã„ã‚‹ã®ã§ãã‚Œã‚‚ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-errlog" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-errlog</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ­ã‚®ãƒ³ã‚°ã«é–¢ã™ã‚‹é–¢é€£è¨˜äº‹">ãƒ­ã‚®ãƒ³ã‚°ã«é–¢ã™ã‚‹é–¢é€£è¨˜äº‹<a href="#ãƒ­ã‚®ãƒ³ã‚°ã«é–¢ã™ã‚‹é–¢é€£è¨˜äº‹" class="hash-link" aria-label="Direct link to ãƒ­ã‚®ãƒ³ã‚°ã«é–¢ã™ã‚‹é–¢é€£è¨˜äº‹" title="Direct link to ãƒ­ã‚®ãƒ³ã‚°ã«é–¢ã™ã‚‹é–¢é€£è¨˜äº‹">â€‹</a></h2><p>ã“ã®è¨˜äº‹ã‚’æ›¸ãå‰ã«è»½ãã‚°ã‚°ã£ã¦ã¿ãŸã ã‘ã§ã¡ã‚ƒã‚“ã¨èª­ã‚“ã§ãªã„ã®ã§ã™ãŒã€
èˆˆå‘³ã®ã‚ã‚‹äººã¯èª­ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚</p><ul><li><a href="https://www.loggly.com/blog/think-differently-about-what-to-log-in-go-best-practices-examined/" target="_blank" rel="noopener noreferrer">https://www.loggly.com/blog/think-differently-about-what-to-log-in-go-best-practices-examined/</a></li><li><a href="https://dave.cheney.net/2015/11/05/lets-talk-about-logging" target="_blank" rel="noopener noreferrer">https://dave.cheney.net/2015/11/05/lets-talk-about-logging</a></li><li><a href="https://postd.cc/go-best-practices-2016/#logging-and-instrumentation" target="_blank" rel="noopener noreferrer">https://postd.cc/go-best-practices-2016/#logging-and-instrumentation</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã¯åˆ†ã‘ã‚‹">ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã¯åˆ†ã‘ã‚‹<a href="#ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã¯åˆ†ã‘ã‚‹" class="hash-link" aria-label="Direct link to ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã¯åˆ†ã‘ã‚‹" title="Direct link to ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã¯åˆ†ã‘ã‚‹">â€‹</a></h2><p>ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã§warningã¨ã‹ã„ã‚‰ãªã„ã¨ã„ã†æ„è¦‹ã‚‚ã‚ã‚Šã¾ã™ãŒã€è‡ªåˆ†ã¯å¿…è¦ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
è‡ªåˆ†ã¯ä»¥ä¸‹ã®ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚’ä½¿ã„åˆ†ã‘ã¾ã™ã€‚</p><ul><li>debug: ã‚ã¾ã‚Šä½¿ã‚ãªã„ã€‚èª¿æŸ»ç›®çš„ã§ä¸€æ™‚çš„ã«åŸ‹ã‚è¾¼ã‚€ãƒ­ã‚°ã€‚èª¿æŸ»ãŒçµ‚ã‚ã£ãŸã‚‰å‡ºåŠ›ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚ä¸€æ™‚çš„ã§ãªã„ã‚‚ã®ã¯infoã«ã™ã‚‹</li><li>info: ã‚¨ãƒ©ãƒ¼ã§ãªã„ãƒ­ã‚°ã€‚ã‚¤ãƒ™ãƒ³ãƒˆã€å‡¦ç†ã®é–‹å§‹æ™‚ã‚„çµ‚äº†ã‚’è¨˜éŒ²ã™ã‚‹ã®ã«ä½¿ã†ã“ã¨ãŒå¤šã„</li><li>warn: 4xxç³»ã®ã‚¨ãƒ©ãƒ¼ã€‚ãã‚ŒãŒèµ·ã“ã£ãŸã ã‘ã§ã¯ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã•ãªã„ãŒã€æ•°ãŒé€šå¸¸æ™‚ã‚ˆã‚Šå¤šã„å ´åˆã¯ãƒã‚°ã‹UIã«å•é¡ŒãŒã‚ã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé–“é•ãˆã‚„ã™ããªã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã™</li><li>error: 5xxç³»ã®ã‚¨ãƒ©ãƒ¼ã€‚ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã™(é–¾å€¤ã¯èª¿æ•´)</li><li>fatal: å‡¦ç†ç¶™ç¶šãŒä¸å¯èƒ½ãªè‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼ã€‚ã‚·ã‚¹ãƒ†ãƒ ã‚’æ­¢ã‚ã‚‹</li></ul><p>æ›¸ã„ã¦ã‹ã‚‰æ€ã„ã¾ã—ãŸãŒã€ã“ã‚Œã«é–¢ã—ã¦ã¯æ¨™æº–çš„ãªä½¿ã„åˆ†ã‘ã®ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Šãã†ã§ã™ã­(è¦èª¿æŸ»)ã€‚ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="logrus-ã‚’ä½¿ã£ã¦ãƒ­ã‚°ã‚’æ§‹é€ åŒ–ã™ã‚‹">logrus ã‚’ä½¿ã£ã¦ãƒ­ã‚°ã‚’æ§‹é€ åŒ–ã™ã‚‹<a href="#logrus-ã‚’ä½¿ã£ã¦ãƒ­ã‚°ã‚’æ§‹é€ åŒ–ã™ã‚‹" class="hash-link" aria-label="Direct link to logrus ã‚’ä½¿ã£ã¦ãƒ­ã‚°ã‚’æ§‹é€ åŒ–ã™ã‚‹" title="Direct link to logrus ã‚’ä½¿ã£ã¦ãƒ­ã‚°ã‚’æ§‹é€ åŒ–ã™ã‚‹">â€‹</a></h2><p>å‰æã¨ã—ã¦webã‚·ã‚¹ãƒ†ãƒ ã‚„ãƒãƒƒãƒã‚·ã‚¹ãƒ†ãƒ ãªã©ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚CLIãƒ„ãƒ¼ãƒ«ãªã‚‰ã°è©±ã¯å¤‰ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚
JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§å‡ºåŠ›ã—ã¦fluentdã§Elasticsearchã«ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã™ã‚‹ã®ãŒå€‹äººçš„ã«ã‚ˆãã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚</p><p>go-errlogã‚‚logrusã®ä½¿ç”¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚</p><p>ãƒ­ã‚®ãƒ³ã‚°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä»–ã«ã‚‚è‰²ã€…ã‚ã‚‹ã®ã§ã€logrusã§æº€è¶³ã§ããªã„äººã¯ä»¥ä¸‹ã‹ã‚‰æ¢ã—ã¦ã¿ã‚‹ã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚</p><p><a href="https://github.com/avelino/awesome-go#logging" target="_blank" rel="noopener noreferrer">https://github.com/avelino/awesome-go#logging</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯ä¸­å¤®é›†æ¨©çš„ã«-main-ã«è¿‘ã„æ‰€ã§å‡ºåŠ›ã™ã‚‹">ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯ä¸­å¤®é›†æ¨©çš„ã« main ã«è¿‘ã„æ‰€ã§å‡ºåŠ›ã™ã‚‹<a href="#ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯ä¸­å¤®é›†æ¨©çš„ã«-main-ã«è¿‘ã„æ‰€ã§å‡ºåŠ›ã™ã‚‹" class="hash-link" aria-label="Direct link to ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯ä¸­å¤®é›†æ¨©çš„ã« main ã«è¿‘ã„æ‰€ã§å‡ºåŠ›ã™ã‚‹" title="Direct link to ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯ä¸­å¤®é›†æ¨©çš„ã« main ã«è¿‘ã„æ‰€ã§å‡ºåŠ›ã™ã‚‹">â€‹</a></h2><p>ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ã©ã“ã§å‡ºåŠ›ã™ã‚‹ã‹ã§ã™ãŒã€åŸå‰‡ä¸­å¤®é›†æ¨©çš„ã« main ã«è¿‘ã„æ‰€ã§å‡ºåŠ›ã—ã¾ã™ã€‚
å› ã¿ã«ä¸­å¤®é›†æ¨©çš„ã¨ã„ã†è¡¨ç¾ã¯ echo ã® centralized error handling ã‹ã‚‰ã‚‚ã˜ã£ã¦ã„ã¾ã™ã€‚</p><p><a href="https://echo.labstack.com/guide/error-handling" target="_blank" rel="noopener noreferrer">https://echo.labstack.com/guide/error-handling</a></p><p>error ãŒç™ºç”Ÿã—ã¦ã‚‚ã™ããƒ­ã‚°ã‚’åãã®ã§ã¯ãªãã€error ã‚’é–¢æ•°ã®æˆ»ã‚Šå€¤ã¨ã—ã¦è¿”ã—ã€ãƒ­ã‚®ãƒ³ã‚°ã™ã‚‹è²¬å‹™ã‚’è¦ªã«å§”è­²ã—ã¾ã™ã€‚
Goã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¤ãƒ‡ã‚£ã‚ªãƒ ãŒã‚ˆãè¦‹ã‚‰ã‚Œã¾ã™ã­ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ­ã‚®ãƒ³ã‚°ã«å¿…è¦ãªæƒ…å ±ã‚’æˆ»ã‚Šå€¤ã®errorã«å«ã‚ã‚‹">ãƒ­ã‚®ãƒ³ã‚°ã«å¿…è¦ãªæƒ…å ±ã‚’æˆ»ã‚Šå€¤ã®errorã«å«ã‚ã‚‹<a href="#ãƒ­ã‚®ãƒ³ã‚°ã«å¿…è¦ãªæƒ…å ±ã‚’æˆ»ã‚Šå€¤ã®errorã«å«ã‚ã‚‹" class="hash-link" aria-label="Direct link to ãƒ­ã‚®ãƒ³ã‚°ã«å¿…è¦ãªæƒ…å ±ã‚’æˆ»ã‚Šå€¤ã®errorã«å«ã‚ã‚‹" title="Direct link to ãƒ­ã‚®ãƒ³ã‚°ã«å¿…è¦ãªæƒ…å ±ã‚’æˆ»ã‚Šå€¤ã®errorã«å«ã‚ã‚‹">â€‹</a></h2><p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§å•é¡Œãªã®ã¯ã€ã‚¨ãƒ©ãƒ¼ã«é–¢ã™ã‚‹æƒ…å ±ãŒæ¬ æã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã“ã¨ã§ã™ã€‚</p><p>ã“ã‚Œã«é–¢ã—ã¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚</p><p><a href="https://deeeet.com/writing/2016/04/25/go-pkg-errors/" target="_blank" rel="noopener noreferrer">https://deeeet.com/writing/2016/04/25/go-pkg-errors/</a></p><p>ã‚¨ãƒ©ãƒ¼ã«é–¢ã™ã‚‹æƒ…å ±ã«ã¯2ç¨®é¡ã‚ã‚‹ã¨å€‹äººçš„ã«è€ƒãˆã¦ã„ã¦ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã¨ã€Œãƒ¡ã‚¿æƒ…å ±ã€ãªã‚“ã¦é¢¨ã«è„³å†…ã§å‘¼ã‚“ã§ãŸã‚Šã—ã¾ã™ã€‚</p><ul><li>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ã‚¨ãƒ©ãƒ¼ã®åŸå› ã‚’ç¤ºã™human readable ãªãƒ†ã‚­ã‚¹ãƒˆ(<a href="https://github.com/pkg/errors" target="_blank" rel="noopener noreferrer">pkg/errors</a>ã¯ã“ã‚Œã«å¯¾å¿œã—ã¦ã„ã‚‹)<ul><li>ãƒªã‚¹ãƒˆã«ãªã‚‹</li></ul></li><li>ãƒ¡ã‚¿æƒ…å ±: ã‚¨ãƒ©ãƒ¼ã«é–¢ã™ã‚‹æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿<ul><li>ãƒãƒƒã‚·ãƒ¥ã«ãªã‚‹</li></ul></li></ul><p>ä¾‹ãˆã° foo ã¨ã„ã†ãƒ¦ãƒ¼ã‚¶ãƒ¼åãŒæ—¢ã«ä½¿ã‚ã‚Œã¦ã„ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆã«å¤±æ•—ã—ãŸå ´åˆ</p><ul><li>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸<ul><li>username is already used</li><li>invalid username</li><li>failed to create a user</li></ul></li><li>ãƒ¡ã‚¿æƒ…å ±<ul><li>username: foo</li></ul></li></ul><p>ã¨è¨€ã£ãŸæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ãƒ¡ã‚¿æƒ…å ±ã‚’å«ã‚ã¦ <code>"foo" is invalid username</code> ã¨ã„ã£ãŸé¢¨ã«ã‚‚å‡ºæ¥ã¾ã™ãŒã€ãã†ã™ã‚‹ã¨æ¤œç´¢ãƒ»é›†è¨ˆã—ã¥ã‚‰ã‹ã£ãŸã‚Šã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç”Ÿæˆã«ä¸€æ‰‹é–“ã‹ã‹ã£ãŸã‚Šã™ã‚‹ã®ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ãƒ¡ã‚¿æƒ…å ±ã‚’å«ã‚ã¾ã›ã‚“ã€‚</p><p>pkg/errors ã ã¨ãƒ¡ã‚¿æƒ…å ±ã«ã¯å¯¾å¿œã§ããªã„ã®ã§è‡ªåˆ†ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã‚Šã¾ã—ãŸã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-errlog" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-errlog</a></p><p>ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> errlog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logrus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Fields</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"username"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"failed to create a user"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="error-ã«å«ã‚ã‚‹æƒ…å ±ã®è²¬å‹™">error ã«å«ã‚ã‚‹æƒ…å ±ã®è²¬å‹™<a href="#error-ã«å«ã‚ã‚‹æƒ…å ±ã®è²¬å‹™" class="hash-link" aria-label="Direct link to error ã«å«ã‚ã‚‹æƒ…å ±ã®è²¬å‹™" title="Direct link to error ã«å«ã‚ã‚‹æƒ…å ±ã®è²¬å‹™">â€‹</a></h2><p>ä¸Šè¨˜ã®ã‚ˆã†ã« error ã«æƒ…å ±ã‚’å«ã‚ã‚‹å ´åˆã€ã©ã“ã¾ã§å«ã‚ã‚‹ã‹ã¨ã„ã†ã®ãŒå•é¡Œã«ãªã‚Šã¾ã™ã€‚
ã“ã“ã§ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ã—ã¦ã€
<strong>é–¢æ•°ãŒerrorã‚’è¿”ã™å ´åˆã€ãã®é–¢æ•°ãŒã‚‚ã£ã¦ã„ã‚‹æƒ…å ±ã¯å…¨ã¦å«ã‚ã‚‹è²¬å‹™ãŒã‚ã‚Šã€
é€†ã«å­é–¢æ•°ã‹ã‚‰è¿”ã£ã¦ããŸerrorã«ã¯å­é–¢æ•°ã«æ¸¡ã£ã¦ã„ã‚‹æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã®ã§å‘¼ã³å‡ºã—å…ƒã§ä»˜ä¸ã™ã‚‹å¿…è¦ã¯ãªã„</strong>ã¨ã„ã†ãµã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> age </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> errlog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logrus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Fields</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"age"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> age</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"failed to create a user"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¤ã¾ã‚Šä¸Šã®ã‚³ãƒ¼ãƒ‰ã§ã¯å­é–¢æ•°ã«æ¸¡ã£ã¦ã„ã‚‹ãƒ¡ã‚¿æƒ…å ±<code>name</code>ã‚„ã€<code>invalid username</code> ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ <code>errlog.Wrap</code> ã«æ¸¡ã™å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ä¸Šè¨˜ã®ä¾‹ã ã¨ã‚¨ãƒ©ãƒ¼ã«é–¢ä¿‚ãªã„ <code>age</code> ã‚‚æ¸¡ã™å¿…è¦ã¯ãªã„ã®ã§ã¯ãªã„ã‹ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ãŒã€åŸå‰‡ãƒ­ã‚°ã«æ®‹ã™ã“ã¨ã¨ã—ã¾ã™ã€‚</p><p>ãŸã ã—ã€å­é–¢æ•°ãŒæ¨™æº–é–¢æ•°ã‚„ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–éƒ¨ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°ã§ã‚ã‚Œã°è©±ã¯åˆ¥ã§ã™ã€‚
ãã‚Œã‚‰ãŒã©ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã‹ã¯ä¿è¨¼ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filename</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> errlog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logrus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Fields</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"filename"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> filename</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"failed to open a file"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"failed to create a user"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šè¨˜ã®ä¾‹ã ã¨ã€<code>os.Open</code>ã«æ¸¡ã—ãŸãƒ¡ã‚¿æƒ…å ± <code>filename</code> ã‚„ os.Openã«å¤±æ•—ã—ãŸã“ã¨ã‚’ç¤ºã™ <code>failed to open a file</code> ã¨ã„ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚<code>errlog.Wrap</code>ã«æ¸¡ã—ã¦ã„ã¾ã™ã€‚</p><p><code>errlog.Wrap</code> ã¯è¤‡æ•°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é †ç•ªã¯å·¦ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸé †ã«ãªã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
ä¸Šè¨˜ã®ä¾‹ã ã¨ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚ªãƒ¼ãƒ—ãƒ³ã«å¤±æ•—ã€ã—ãŸçµæœã€ã€Œãƒ¦ãƒ¼ã‚¶ã®ä½œæˆã«å¤±æ•—ã€ã™ã‚‹ã¨ã„ã†é †åºã«ãªã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ©ãƒ¼ã®ãƒ­ã‚®ãƒ³ã‚°ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«">ã‚¨ãƒ©ãƒ¼ã®ãƒ­ã‚®ãƒ³ã‚°ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«<a href="#ã‚¨ãƒ©ãƒ¼ã®ãƒ­ã‚®ãƒ³ã‚°ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«" class="hash-link" aria-label="Direct link to ã‚¨ãƒ©ãƒ¼ã®ãƒ­ã‚®ãƒ³ã‚°ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«" title="Direct link to ã‚¨ãƒ©ãƒ¼ã®ãƒ­ã‚®ãƒ³ã‚°ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«">â€‹</a></h2><p>go-errlogã§ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«ãƒ­ã‚®ãƒ³ã‚°ã‚’è¨˜è¿°ã§ãã¾ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">logger </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> errlog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// err != nil ãªã‚‰ logging ã™ã‚‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// err ãŒãƒ¡ã‚¿æƒ…å ±ã‚’æŒã£ã¦ãŸã‚‰ logrusã§æ§‹é€ åŒ–ã—ã¦ãƒ­ã‚®ãƒ³ã‚°ã™ã‚‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚ pkg/errors ã®ã‚ˆã†ã«ä¸€ã¤ã®ãƒ†ã‚­ã‚¹ãƒˆã«é€£çµã—ã¦ãƒ­ã‚®ãƒ³ã‚°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Fatal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">createUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãã®ä»–-go-errlog-ã®æ©Ÿèƒ½">ãã®ä»– go-errlog ã®æ©Ÿèƒ½<a href="#ãã®ä»–-go-errlog-ã®æ©Ÿèƒ½" class="hash-link" aria-label="Direct link to ãã®ä»– go-errlog ã®æ©Ÿèƒ½" title="Direct link to ãã®ä»– go-errlog ã®æ©Ÿèƒ½">â€‹</a></h2><p>ãƒ¡ã‚¿æƒ…å ±ã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã‚ˆã£ã¦æ¡ä»¶åˆ†å²ã—ãŸã‚Šå‡ºæ¥ã‚‹ã‚ˆã†ã«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’å¹¾ã¤ã‹æä¾›ã—ã¦ã„ã¾ã™ã€‚</p><ul><li>CheckField</li><li>HasField</li><li>HasMsg</li></ul><p>è©³ç´°ã¯<a href="https://godoc.org/github.com/suzuki-shunsuke/go-errlog" target="_blank" rel="noopener noreferrer">GoDoc</a>ã‚„ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€å¾Œã«">æœ€å¾Œã«<a href="#æœ€å¾Œã«" class="hash-link" aria-label="Direct link to æœ€å¾Œã«" title="Direct link to æœ€å¾Œã«">â€‹</a></h2><p>è‰²ã€…æ›¸ã„ã¦ã—ã¾ã„ã¾ã—ãŸãŒã€ä¸€ç•ªè¨€ã„ãŸã‹ã£ãŸã“ã¨ã¯</p><blockquote><p><strong>é–¢æ•°ãŒerrorã‚’è¿”ã™å ´åˆã€ãã®é–¢æ•°ãŒã‚‚ã£ã¦ã„ã‚‹æƒ…å ±ã¯å…¨ã¦å«ã‚ã‚‹è²¬å‹™ãŒã‚ã‚Šã€
é€†ã«å­é–¢æ•°ã‹ã‚‰è¿”ã£ã¦ããŸerrorã«ã¯å­é–¢æ•°ã«æ¸¡ã£ã¦ã„ã‚‹æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã®ã§å‘¼ã³å‡ºã—å…ƒã§ä»˜ä¸ã™ã‚‹å¿…è¦ã¯ãªã„</strong>ã¨ã„ã†ãµã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><p>ãŸã ã—ã€å­é–¢æ•°ãŒæ¨™æº–é–¢æ•°ã‚„ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–éƒ¨ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°ã§ã‚ã‚Œã°è©±ã¯åˆ¥ã§ã™ã€‚</p></blockquote><p>ã®éƒ¨åˆ†ã§ã™ã€‚ã“ã®è¾ºã¯å…ƒã€…è‡ªåˆ†ã®ä¸­ã§ãƒ«ãƒ¼ãƒ«ãŒæ±ºã¾ã£ã¦ãªãã¦ãšã£ã¨ãƒ¢ãƒ¤ãƒ¢ãƒ¤ã—ã¦ã¦ã€
ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã³ã«ã¶ã‚Œã¦ãŸã®ã§ã™ãŒã€ã€Œã“ã†ã™ã‚Œã°ã„ã‘ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã€ã¨æ€ã„ã¤ãã€ãã®å®Ÿè£…ã‚’è£œåŠ©ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é–‹ç™ºã—ã€
å®Ÿè·µã—ãŸã¨ã“ã‚ä»Šã®æ‰€ãã“ãã“ã†ã¾ãè¡Œã£ã¦ã„ã¾ã™ã€‚
ãŸã ã¾ã æ—¥ãŒæµ…ã„ã®ã§å°‘ã—ãšã¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ãéƒ¨åˆ†ã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€
ãã®å ´åˆã§ã‚‚ã€Œãªã‚“ã¨ãªãã€ã§ã¯ãªãã€å¯èƒ½ãªé™ã‚Šæ˜æ–‡åŒ–ã—ã¦ã„ãã“ã¨ã§ã€è¿·ã„ã‚’ãªãã—ã€ã‚³ãƒ¼ãƒ‰ã¨ãƒ­ã‚°ã®å“è³ªã‚’ä¸Šã’ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>golang</category>
            <category>logging</category>
        </item>
        <item>
            <title><![CDATA[Graylogã®Alertã®èª²é¡Œ]]></title>
            <link>https://techblog.szksh.cloud/graylog-alert-issue</link>
            <guid>https://techblog.szksh.cloud/graylog-alert-issue</guid>
            <pubDate>Wed, 19 Dec 2018 12:02:11 GMT</pubDate>
            <description><![CDATA[Graylogã‚’é‹ç”¨ã—ã¦ãã¦æ„Ÿã˜ã¦ã„ã‚‹Alertæ©Ÿèƒ½å‘¨ã‚Šã®èª²é¡Œã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Graylogã‚’é‹ç”¨ã—ã¦ãã¦æ„Ÿã˜ã¦ã„ã‚‹Alertæ©Ÿèƒ½å‘¨ã‚Šã®èª²é¡Œã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚
è‡ªåˆ†ã®Graylogã®ç†è§£ãŒä¸ååˆ†ã§å‹˜é•ã„ã—ã¦ã„ã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã”äº†æ‰¿ãã ã•ã„ã€‚
Graylogã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ 2.5.0 ã§ã™ã€‚
ã“ã“ã§ã„ã†ã€Œãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã€ã¨ã¯ã€Slackã®ã‚ˆã†ãªãƒãƒ£ãƒƒãƒˆãƒ„ãƒ¼ãƒ«ã®ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚’æŒ‡ã—ã¾ã™ã€‚
ãƒªã‚¹ãƒˆã®è©³ç´°ã‚’æ›¸ãã ã—ã¦ã¿ãŸã‚‚ã®ã®ã€ãƒªã‚¹ãƒˆã ã‘ã§ã ã„ãŸã„è¨€ã„ãŸã„ã“ã¨ãŒè¨€ãˆã¦ã—ã¾ã£ã¦ã„ãŸã®ã¨ã€å˜ãªã‚‹æ„šç—´ã£ã½ããªã£ã¦ã—ã¾ã£ãŸã®ã§ã€
ãƒªã‚¹ãƒˆã ã‘ã«ç•™ã‚ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2018-12-31-è¿½è¨˜">2018-12-31 è¿½è¨˜<a href="#2018-12-31-è¿½è¨˜" class="hash-link" aria-label="Direct link to 2018-12-31 è¿½è¨˜" title="Direct link to 2018-12-31 è¿½è¨˜">â€‹</a></h2><p>å…ƒã€… Alert Condition, Notification ã® APIãŒãªã„ã¨å‹˜é•ã„ã—ã¦ã„ãŸã®ã§ã™ãŒã€
å®Ÿã¯ã¡ã‚ƒã‚“ã¨ã‚ã£ãŸã®ã§ terraform ã§ç®¡ç†ã§ãã‚‹ã‚ˆã†ã« go-graylog ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/go-graylog/pull/50" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-graylog/pull/50</a></li><li><a href="https://github.com/suzuki-shunsuke/go-graylog/pull/52" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-graylog/pull/52</a></li><li><a href="https://github.com/suzuki-shunsuke/go-graylog/blob/v11.0.0/docs/resources/alarm_callback.md" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-graylog/blob/v11.0.0/docs/resources/alarm_callback.md</a></li><li><a href="https://github.com/suzuki-shunsuke/go-graylog/blob/v11.0.0/docs/resources/alert_condition.md" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-graylog/blob/v11.0.0/docs/resources/alert_condition.md</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èª²é¡Œãƒªã‚¹ãƒˆ">èª²é¡Œãƒªã‚¹ãƒˆ<a href="#èª²é¡Œãƒªã‚¹ãƒˆ" class="hash-link" aria-label="Direct link to èª²é¡Œãƒªã‚¹ãƒˆ" title="Direct link to èª²é¡Œãƒªã‚¹ãƒˆ">â€‹</a></h2><ul><li><del>APIã§Alert Condition, Notificationã‚’ç®¡ç†ã§ããªã„</del><ul><li><del>APIãŒãªã„ã®ã§ terraform ã§ã‚µãƒãƒ¼ãƒˆã‚‚å‡ºæ¥ãªã„</del></li><li><del>æ•°ãŒå¢—ãˆã‚‹ã¨Web UIã§ã¯ç®¡ç†ãŒè¾›ã„ãƒ»ä¿®æ­£æ¼ã‚Œã‚„è¨­å®šãƒŸã‚¹ãŒå‡ºã‚„ã™ã„</del></li></ul></li><li>Condition, NotificationãŒStreamã«ç´ã¥ã<ul><li>Conditionã«ã‚ˆã£ã¦Notificationã‚’å¤‰ãˆã‚‰ã‚Œãªã„<ul><li>æ¡ä»¶ã«å¿œã˜ã¦ã‚¢ãƒ©ãƒ¼ãƒˆã®æ–‡é¢ãƒ»é€šçŸ¥å…ˆãƒ»ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³å…ˆãƒ»ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã®æœ‰ç„¡ã‚’å¤‰ãˆã‚‰ã‚Œãªã„
(æ­£ç¢ºã«ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã§é ‘å¼µã‚Œã°ã‚ã‚‹ç¨‹åº¦å¯¾å¿œã§ãã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒã€å€‹äººçš„ã«ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãã®ã‚‚ã®ã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„)</li></ul></li><li>Conditionã‚„Notificationã‚’è¤‡æ•°ã®Streamã§ä½¿ã„å›ã›ãªã„</li></ul></li><li>(å°‘ãªãã¨ã‚‚æ¨™æº–æ©Ÿèƒ½ã§ã¯)æ™‚é–“å¸¯ã«ã‚ˆã£ã¦ã‚¢ãƒ©ãƒ¼ãƒˆã®æŒ™å‹•ã‚’å¤‰æ›´ã§ããªã„<ul><li>å¤œä¸­ã«ã¯ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã•ãªã„ãƒ»ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ãªã„ã¨ã„ã£ãŸã“ã¨ãŒå‡ºæ¥ãªã„</li><li><a href="https://github.com/Graylog2/graylog2-server/issues/3182" target="_blank" rel="noopener noreferrer">ä¸€æ™‚çš„ã«ã‚¢ãƒ©ãƒ¼ãƒˆã‚’æ­¢ã‚ã‚‰ã‚Œãªã„</a></li></ul></li><li>Pluginã‚’ä½¿ã†ã«ã—ã¦ã‚‚ã©ã‚Œã‚’ä½¿ã£ãŸã‚‰è‰¯ã„ã‹åˆ†ã‹ã‚‰ãªã„<ul><li>ã‚‚ã£ã¨GraylogãŒãƒ¡ã‚¸ãƒ£ãƒ¼ã«ãªã‚Œã°çŠ¶æ³ã‚‚å¤‰ã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„</li></ul></li></ul>]]></content:encoded>
            <category>graylog</category>
        </item>
        <item>
            <title><![CDATA[Graylog ã® Terraform ã‚’ CI/CDã§å®Ÿè¡Œã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/graylog-terraform-ci</link>
            <guid>https://techblog.szksh.cloud/graylog-terraform-ci</guid>
            <pubDate>Thu, 06 Dec 2018 23:22:49 GMT</pubDate>
            <description><![CDATA[ä»¥å‰ Graylog ã‚’ Terraform ã§ç®¡ç†ã™ã‚‹è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>ä»¥å‰ Graylog ã‚’ Terraform ã§ç®¡ç†ã™ã‚‹è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚</p><p><a href="https://suzuki-shunsuke.github.io/graylog-terraform/" target="_blank" rel="noopener noreferrer">https://suzuki-shunsuke.github.io/graylog-terraform/</a></p><p>ä»Šå›ã¯ãã‚Œã‚’ CI/CD ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ãŸè©±ã§ã™ã€‚</p><p>ãŸã ã—ã€ä»Šå›ã®å†…å®¹ã¯ Graylog ã«é™ã‚‰ãš Terraform ã‚’ CI/CD ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã¨ã—ã¦ä½¿ãˆã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ä»Šå›å®Ÿç¾ã—ãŸã®ã¯ä»¥ä¸‹ã®ã“ã¨ã§ã™ã€‚</p><ul><li>PRæ™‚ã«ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹</li><li><code>plan/*</code> tag ã‚’ push ã™ã‚‹ã¨ <code>terraform plan</code> ãŒå®Ÿè¡Œã•ã‚Œã‚‹</li><li><code>apply/*</code> tag ã‚’ push ã™ã‚‹ã¨ <code>terraform apply</code> ãŒå®Ÿè¡Œã•ã‚Œã€tfstate ãŒã‚³ãƒŸãƒƒãƒˆã€ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰<a href="#ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰" class="hash-link" aria-label="Direct link to ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰" title="Direct link to ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰">â€‹</a></h2><p><a href="https://github.com/suzuki-shunsuke/example/tree/master/graylog-terraform" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example/tree/master/graylog-terraform</a> ã«ç½®ã„ã¦ãŠãã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/role.tf#L13-L25" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/role.tf#L13-L25</a></li><li><a href="https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/user.tf#L12-L21" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/user.tf#L12-L21</a></li><li><a href="https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/.drone.yml" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/.drone.yml</a></li><li><a href="https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/terraform.tfvars.tpl" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/terraform.tfvars.tpl</a></li><li><a href="https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/drone_pipeline_commands/git.sh" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example/blob/master/graylog-terraform/drone_pipeline_commands/git.sh</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cicdç”¨ã®-user-role-ã‚’ä½œæˆã™ã‚‹">CI/CDç”¨ã® user, role ã‚’ä½œæˆã™ã‚‹<a href="#cicdç”¨ã®-user-role-ã‚’ä½œæˆã™ã‚‹" class="hash-link" aria-label="Direct link to CI/CDç”¨ã® user, role ã‚’ä½œæˆã™ã‚‹" title="Direct link to CI/CDç”¨ã® user, role ã‚’ä½œæˆã™ã‚‹">â€‹</a></h2><p>ã¾ãšã¯ role ã‚’ä½œæˆã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "graylog_role" "terraform" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name        = "terraform"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = "terraform"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  permissions = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "dashboards:*",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "indexsets:*",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "inputs:*",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "roles:*",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "streams:*",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "users:*",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>permission ã¯ terraform ã§ç®¡ç†ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ã¿ä»˜ä¸ã—ã¾ã™ãŒã€
ãã‚Œã§ã‚‚çµæ§‹å¼·ã„æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã®ã§å–æ‰±ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><p>ã‚ˆã‚Šã¡ã‚ƒã‚“ã¨æ¨©é™ç®¡ç†ã™ã‚‹ã®ã§ã‚ã‚Œã° project ã”ã¨ã« role, user ã‚’åˆ†ã‘ã‚‹ã¨ã„ã†æ‰‹ã‚‚ã‚ã‚Šãã†ã§ã™ãŒã€ãã†ã™ã‚‹ã¨ç®¡ç†ã‚‚å¤§å¤‰ãã†ã§ã™ã€‚</p><p>æ¬¡ã« user ã‚’ä½œæˆã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "graylog_user" "terraform" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  username  = "terraform"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  email     = "terraform@example.com"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  full_name = "terraform"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  roles = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "terraform",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "Reader",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Reader ã‹ Admin ã¯å¿…é ˆã‚‰ã—ã„ã®ã§Readerã‚’ä»˜ä¸ã—ã¦ã„ã¾ã™ã€‚</p><p><a href="http://docs.graylog.org/en/2.5/pages/users_and_roles/permission_system.html" target="_blank" rel="noopener noreferrer">http://docs.graylog.org/en/2.5/pages/users_and_roles/permission_system.html</a></p><blockquote><p>Every user needs to at least have the standard â€œReaderâ€ permissions
but those do not provide any access to data or maintenance functionalities.</p></blockquote><p>æ¬¡ã«ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® token ã‚’ç™ºè¡Œã—ã¾ã™ã€‚</p><p><a href="http://docs.graylog.org/en/2.5/pages/configuration/rest_api.html#creating-and-using-access-token" target="_blank" rel="noopener noreferrer">http://docs.graylog.org/en/2.5/pages/configuration/rest_api.html#creating-and-using-access-token</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -u &lt;username&gt;:&lt;password&gt; -H 'Accept: application/json' -X POST 'https://graylog.example.com/api/users/&lt;username&gt;/tokens/&lt;tokenname&gt;?pretty=true'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç™ºè¡Œã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ CI/CD ã«ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚
ã‚„ã‚Šæ–¹ã¯åˆ©ç”¨ã™ã‚‹CI/CDã«ã‚ˆã£ã¦å¤‰ã‚ã‚Šã¾ã™ã€‚</p><p>ä»¥é™ã¯ <a href="https://drone.io/" target="_blank" rel="noopener noreferrer">drone ci</a> ã¨ã„ã† CI/CD ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’å‰æã«æ›¸ãã¾ã™ãŒã€
travis ci ã‚„ circle ci, jenkins ãªã©ä»–ã®CI/CDã§ã‚‚è€ƒãˆæ–¹ã¯ä¸€ç·’ã ã¨æ€ã„ã¾ã™ã€‚</p><p>.drone.yml ã¯ ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">pipeline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">envsubst</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> suzukishunsuke/alpine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">envsubst</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> envsubst &lt; terraform.tfvars.tpl </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> terraform.tfvars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secrets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> terraform_token_prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> graylog_auth_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">plan</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">&amp;terraform_image</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"suzukishunsuke/terraform-graylog:0.1.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform fmt </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> refs/tags/plan/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apply</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">*terraform_image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform fmt </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform apply </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">auto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> refs/tags/apply/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">git</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> plugins/git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sh drone_pipeline_commands/git.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> refs/tags/apply/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">validate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">*terraform_image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TF_VAR_auth_name=dummy"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TF_VAR_auth_password=token"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TF_VAR_web_endpoint_uri=https://graylog.example.com/api"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform fmt </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pull_request</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¾ãšã¯ terraform ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã® Docker Image ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚</p><p><a href="https://hub.docker.com/r/suzukishunsuke/terraform-graylog/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/suzukishunsuke/terraform-graylog/</a></p><p>PRæ™‚ã®ãƒ†ã‚¹ãƒˆã§ã¯ terraform validate ã¨ terraform fmt ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">validate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">*terraform_image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TF_VAR_auth_name=dummy"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TF_VAR_auth_password=token"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TF_VAR_web_endpoint_uri=https://graylog.example.com/api"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform fmt </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pull_request</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>TF_VAR_</code> ã§å§‹ã¾ã‚‹ã®ãŒ terraform ã®å¤‰æ•°ã§ã™ã€‚</p><p><a href="https://www.terraform.io/docs/configuration/variables.html#environment-variables" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/configuration/variables.html#environment-variables</a></p><p>token ã¯é©å½“ãªæ–‡å­—åˆ—ã‚’ã‚»ãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚PRæ™‚ã«ã¯å®Ÿéš›ã«graylog ã® API ã‚’å‘¼ã°ãªã„ã®ã§é©å½“ãªã®ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>æ¬¡ã« <code>plan/*</code> ã¨ tag ã‚’ push ã™ã‚‹ã¨ <code>terraform plan</code> ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
ã“ã®çµæœã‚’è¦‹ã¦ <code>terraform apply</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><p>ã“ã‚Œã¯ <a href="https://0-8-0.docs.drone.io/manage-secrets/" target="_blank" rel="noopener noreferrer">drone ã® secrets</a> ã®éƒ½åˆãªã®ã§ã™ãŒã€secrets ã®ç’°å¢ƒå¤‰æ•°ã¯å…¨éƒ¨å¤§æ–‡å­—ã«ãªã£ã¦ã—ã¾ã†ãŸã‚ <code>TF_VAR_auth_name</code> ã¨ã„ã†ç’°å¢ƒå¤‰æ•°ã‚’ã‚»ãƒƒãƒˆã§ãã¾ã›ã‚“ã€‚ãã®ãŸã‚ <a href="https://www.gnu.org/software/gettext/manual/html_node/envsubst-Invocation.html" target="_blank" rel="noopener noreferrer">envsubst</a> ã‚’ä½¿ã£ã¦ terraform.tfvars ã« token ã‚’æ›¸ãè¾¼ã‚“ã§ã„ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">envsubst</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> suzukishunsuke/alpine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">envsubst</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> envsubst &lt; terraform.tfvars.tpl </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> terraform.tfvars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secrets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> terraform_token_prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> graylog_auth_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tag</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>terraform.tfvars.tpl ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">web_endpoint_uri = "https://graylog.example.com/api"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth_name = "$GRAYLOG_AUTH_NAME"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth_password = "token"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>plan ã‚’å®Ÿè¡Œã™ã‚‹ step ã§ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">plan</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">&amp;terraform_image</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"suzukishunsuke/terraform-graylog:0.1.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform fmt </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> refs/tags/plan/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>apply/*</code> ã¨ tag ã‚’ push ã™ã‚‹ã¨ <code>terraform apply</code> ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apply</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">*terraform_image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform fmt </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> terraform apply </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">auto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> refs/tags/apply/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>terraform.tfstate ã‚’ã‚³ãƒŸãƒƒãƒˆ, ãƒ—ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">git</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> plugins/git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sh drone_pipeline_commands/git.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> refs/tags/apply/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>drone_pipeline_commands/git.sh ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git status --porcelain || exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if `git diff --exit-code --quiet terraform.tfstate`; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "terraform.tfstate isn't changed"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git config user.name drone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git config user.email drone@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git add . || exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git commit -m "build: commit by drone" || exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git push origin HEAD:master || exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>terraform.tfstate ã«å¤‰åŒ–ãŒã‚ã£ãŸå ´åˆã®ã¿ ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
ã“ã®è¾ºã®ã‚„ã‚Šæ–¹ã¯ã‚‚ã£ã¨ã†ã¾ã„ã‚„ã‚Šæ–¹ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“
(è‡ªåˆ†ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆåŠ›ãŒä½ã„ãŸã‚)ã€‚</p><p><code>terraform plan</code> ã® <code>-detailed-exitcode</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã®ãŒè‰¯ã„æ°—ãŒã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  -detailed-exitcode  Return detailed exit codes when the command exits. This</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      will change the meaning of exit codes to:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      0 - Succeeded, diff is empty (no changes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      1 - Errored</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      2 - Succeeded, there is a diff</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸Š Graylog ã® Terraform ã‚’ CI/CD ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚
Graylog ã«é™ã‚‰ãšã€ Terraform ã‚’ CI/CD ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã¨ã—ã¦ä½¿ãˆã‚‹ã¨æ€ã†ã®ã§å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p>]]></content:encoded>
            <category>graylog</category>
            <category>terraform</category>
            <category>ci</category>
        </item>
        <item>
            <title><![CDATA[molecule ã§ansible ã® role ã¨ playbook ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/ansible-molecule</link>
            <guid>https://techblog.szksh.cloud/ansible-molecule</guid>
            <pubDate>Thu, 06 Dec 2018 14:08:04 GMT</pubDate>
            <description><![CDATA[ansible å°‚ç”¨ã® testing ãƒ„ãƒ¼ãƒ« molecule ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>ansible å°‚ç”¨ã® testing ãƒ„ãƒ¼ãƒ« <a href="https://molecule.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener noreferrer">molecule</a> ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
molecule ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä»¥å¤–ã®æƒ…å ±ã¯å°‘ãªã„ã®ã§ã€å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><p>ä»¥å‰ Docker ã‚’ä½¿ã£ã¦ ansible ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p><a href="https://suzuki-shunsuke.github.io/test-ansible-on-docker/" target="_blank" rel="noopener noreferrer">https://suzuki-shunsuke.github.io/test-ansible-on-docker/</a></p><p>ã“ã®éš›ã¯ Docker Compose ã¨ç°¡å˜ãªã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ã£ã¦å®Ÿç¾ã—ã¾ã—ãŸã€‚
ã“ã‚Œã¯ã“ã‚Œã§ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãªéƒ¨åˆ†ãŒãªãã€å­¦ç¿’ã‚³ã‚¹ãƒˆã‚‚ä½ãã¦æ‚ªããªã„ã®ã§èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ãã¡ã‚‰ã‚‚ã”å‚ç…§ãã ã•ã„ã€‚</p><p>molecule ã¯ ansible å°‚ç”¨ã® testing ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
åŸºæœ¬çš„ã« playbook ã¨ã„ã†ã‚ˆã‚Š role ç”¨ã®ãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€playbookã®ãƒ†ã‚¹ãƒˆã‚‚å·¥å¤«ã™ã‚Œã°å‡ºæ¥ã¾ã™ã€‚</p><ul><li>æƒ…å ±ãŒå°‘ãªã„</li><li>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚åˆ†ã‹ã‚Šã¥ã‚‰ã„éƒ¨åˆ†ãŒã‚ã‚‹</li><li>ã‚³ãƒãƒ³ãƒ‰ãŒã‚¨ãƒ©ãƒ¼åã„ã¦å¤±æ•—ã—ãŸéš›ã«ã€ã‚°ã‚°ã£ã¦ã‚‚æƒ…å ±ãŒå‡ºã¦ã“ãªã„ã®ã§è¾›ã„</li></ul><p>ã¨ã„ã†é¢¨ã«è¾›ã„éƒ¨åˆ†ã‚‚ã‚ã‚Šã¾ã™ãŒã€</p><ul><li>staræ•°ã¯ãã‚Œãªã‚Šã«ã‚ã‚‹</li><li>ansible ã®å…¬å¼ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ <a href="https://github.com/ansible/molecule/" target="_blank" rel="noopener noreferrer">https://github.com/ansible/molecule/</a></li><li><a href="https://github.com/geerlingguy" target="_blank" rel="noopener noreferrer">geerlingguy</a> ã•ã‚“ã‚‚ä½¿ã£ã¦ã‚‹</li></ul><p>ã¨ã„ã†é¢¨ã«è‰¯ã„é¢ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ãã‚Œã§ã¯ä½¿ã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«<a href="#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="hash-link" aria-label="Direct link to ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" title="Direct link to ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">â€‹</a></h2><p><a href="https://molecule.readthedocs.io/en/latest/installation.html" target="_blank" rel="noopener noreferrer">https://molecule.readthedocs.io/en/latest/installation.html</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ pip install molecule</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Docker ã‚’ä½¿ã†å ´åˆ <code>docker-py</code> ã‚‚å¿…è¦ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ pip install docker-py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="role-ã®ãƒ†ã‚¹ãƒˆ">role ã®ãƒ†ã‚¹ãƒˆ<a href="#role-ã®ãƒ†ã‚¹ãƒˆ" class="hash-link" aria-label="Direct link to role ã®ãƒ†ã‚¹ãƒˆ" title="Direct link to role ã®ãƒ†ã‚¹ãƒˆ">â€‹</a></h2><p>playbookã«æ¯”ã¹ã¦ role ã®ãƒ†ã‚¹ãƒˆã¯ç°¡å˜ã§ã™ã€‚</p><p>role ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª(tasksã‚„filesãªã©ãŒã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª)ã«ç§»å‹•ã—ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ molecule init scenario -r &lt;role name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã†ã™ã‚‹ã¨ <code>molecule</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p><p><code>molecule/default/molecule.yml</code> ã‚’ä¿®æ­£ã—ã¾ã™ã€‚</p><p><a href="https://molecule.readthedocs.io/en/latest/configuration.html" target="_blank" rel="noopener noreferrer">https://molecule.readthedocs.io/en/latest/configuration.html</a></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">dependency</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> galaxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¾å­˜ã™ã‚‹ role ãŒã‚ã‚‹å ´åˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">role-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> roles.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">lint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> yamllint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># https://molecule.readthedocs.io/en/latest/configuration.html#platforms</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">platforms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> server  </span><span class="token comment" style="color:#999988;font-style:italic"># ã‚³ãƒ³ãƒ†ãƒŠã®åå‰ã«ãªã‚‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¿…è¦ã«å¿œã˜ã¦ image ã‚’å¤‰æ›´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ä»Šå›ã¯ ansibleã®remote user ã‚’érootã«ã™ã‚‹ãŸã‚ã«è‡ªä½œã® Docker Image ã‚’æŒ‡å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># https://hub.docker.com/r/suzukishunsuke/ansible-test-centos/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> suzukishunsuke/ansible</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">centos</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># systemd ã‚’ä½¿ã£ãŸã‚Šã™ã‚‹å ´åˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># https://molecule.readthedocs.io/en/latest/examples.html#systemd-container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">privileged</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /sbin/init  </span><span class="token comment" style="color:#999988;font-style:italic"># systemd ã‚’ä½¿ã†å ´åˆå¿…è¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">USER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo </span><span class="token comment" style="color:#999988;font-style:italic"># Dockerã ã¨USERç’°å¢ƒå¤‰æ•°ãŒç©ºã«ãªã£ã¦ã—ã¾ã†ã‚ˆã†ãªã®ã§æ˜ç¤ºçš„ã«è¨­å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">provisioner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># https://molecule.readthedocs.io/en/latest/configuration.html#id12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ansible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">lint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ansible</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo </span><span class="token comment" style="color:#999988;font-style:italic"># érootãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">inventory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">group_vars</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># variables ã‚’æŒ‡å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">all</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">nginx_server_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">mysql_host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">mysql_port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3306</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">mysql_database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">mysql_user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">mysql_password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scenario</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">verifier</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> testinfra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">lint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flake8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>test ã®å‰ã«ã¾ãšã¯ lint ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ molecule lint [-s &lt;senario name&gt;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã™ã‚‹ã¨ yamllint ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« <code>.yamllint</code> ãŒä½œã‚‰ã‚Œã¦ã„ã‚‹ã¨æ€ã†ã®ã§ã€å¿…è¦ã«å¿œã˜ã¦ä¿®æ­£ã—ã¾ã™ã€‚</p><p><a href="https://yamllint.readthedocs.io/en/stable/configuration.html" target="_blank" rel="noopener noreferrer">https://yamllint.readthedocs.io/en/stable/configuration.html</a></p><p>ansible-lint ã§å¼•ã£ã‹ã‹ã£ãŸäººã¯ã“ã¡ã‚‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><p><a href="https://github.com/ansible/ansible-lint" target="_blank" rel="noopener noreferrer">https://github.com/ansible/ansible-lint</a></p><p>ãã—ã¦ test ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ molecule test [-s &lt;senario name&gt;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>test</code> ã‚³ãƒãƒ³ãƒ‰ã§ã¯ã‚³ãƒ³ãƒ†ãƒŠãŒå‰Šé™¤ã•ã‚Œã‚‹ãŸã‚ã€ãƒ‡ãƒãƒƒã‚°ãŒé›£ã—ã‹ã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ãã®å ´åˆã€ <code>converge</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚Œã°ã‚³ãƒ³ãƒ†ãƒŠã¯æ¶ˆãˆã¾ã›ã‚“ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ molecule converge [-s &lt;senario name&gt;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ¶ˆã—ãŸããªã£ãŸã‚‰ destroy ã‚³ãƒãƒ³ãƒ‰ã§æ¶ˆã—ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ molecule destroy [-s &lt;senario name&gt;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="playbook-ã®ãƒ†ã‚¹ãƒˆ">playbook ã®ãƒ†ã‚¹ãƒˆ<a href="#playbook-ã®ãƒ†ã‚¹ãƒˆ" class="hash-link" aria-label="Direct link to playbook ã®ãƒ†ã‚¹ãƒˆ" title="Direct link to playbook ã®ãƒ†ã‚¹ãƒˆ">â€‹</a></h2><p>æ¬¡ã« playbook ã®ãƒ†ã‚¹ãƒˆã§ã™ã€‚å‰²ã¨ã“ã‚ŒãŒæœ¬é¡Œã ã£ãŸã‚Šã—ã¾ã™ã€‚
molecule ã¯åŸºæœ¬çš„ã« playbook ã¨ã„ã†ã‚ˆã‚Š role ç”¨ã®ãƒ„ãƒ¼ãƒ«ãªã®ã§è‹¥å¹²å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚</p><p>è‡ªåˆ†ã¯ã‚ˆã ansible playbook ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hello-molecule/  # ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  agent.yml # agent ã‚°ãƒ«ãƒ¼ãƒ—ç”¨ã® playbook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  group_vars/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all.yml  # å…±é€šã®variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    agent.yml  # agent ã‚°ãƒ«ãƒ¼ãƒ—ç”¨ã® variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  roles/  # role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inventories/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prod.yml # productionç”¨ã®inventory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  roles.yml  # ä¾å­˜ã™ã‚‹ role ã®ãƒªã‚¹ãƒˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ansible.cfg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã®ã¨ãã« playbook <code>agent.yml</code> ã®ãƒ†ã‚¹ãƒˆãŒã—ãŸã„ã¨ã—ã¾ã™ã€‚
molecule ã®ãŸã‚ã«ã“ã®æ§‹æˆã‚’å¼„ã£ãŸã‚Šã¯æ¥µåŠ›ã—ãŸãã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>playbook ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ <code>molecule init</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
default ã‚·ãƒŠãƒªã‚ªã¯å¿…é ˆã®ã‚ˆã†ã§ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ molecule init scenario -r hello-molecule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ molecule init scenario -s agent -r hello-molecule</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã™ã‚‹ã¨ã“ã†ãªã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hello-molecule/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  agent.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  group_vars/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    agent.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  roles/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inventories/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prod.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  roles.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ansible.cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  molecule/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    agent/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      molecule.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      playbook.yml # ã“ã‚Œã¯ä½¿ã‚ãªã„ã€‚æ¶ˆã™</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã“ã‹ã‚‰ molecule.yml ã‚’ä¿®æ­£ã—ã¦ã„ãã¾ã™ã€‚
ä¸€éƒ¨æŠœç²‹ã—ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">dependency</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> galaxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">role-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> roles.yml </span><span class="token comment" style="color:#999988;font-style:italic"># ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">platforms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> server  </span><span class="token comment" style="color:#999988;font-style:italic"># groupå</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">provisioner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ansible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">playbooks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">converge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ../../server.yml </span><span class="token comment" style="color:#999988;font-style:italic"># ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ playbookã‚’æŒ‡å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ANSIBLE_ROLES_PATH</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ../../roles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">../../_roles  </span><span class="token comment" style="color:#999988;font-style:italic"># roleã®ãƒ‘ã‚¹ã‚’ä¿®æ­£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scenario</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã®ã‚ˆã†ã« playbookã‚„ role ã®ãƒ‘ã‚¹ã‚’ä¿®æ­£ã™ã‚Œã°ã‚ã¨ã¯ role ã®ãƒ†ã‚¹ãƒˆã¨åŒã˜è¦é ˜ã§ã„ã‘ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ä»¥ä¸Šã€ç°¡å˜ã§ã™ãŒ molecule ã®ä½¿ã„æ–¹ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>ansible</category>
            <category>molecule</category>
        </item>
        <item>
            <title><![CDATA[Graylogã‚’Terraformã§ç®¡ç†ã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/graylog-terraform</link>
            <guid>https://techblog.szksh.cloud/graylog-terraform</guid>
            <pubDate>Sat, 01 Dec 2018 05:56:00 GMT</pubDate>
            <description><![CDATA[Graylogã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ terraform ã§ç®¡ç†ã™ã‚‹ãŸã‚ã«ä½œã£ãŸ terraform provider ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Graylogã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ terraform ã§ç®¡ç†ã™ã‚‹ãŸã‚ã«ä½œã£ãŸ terraform provider ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
<a href="https://www.graylog.org/" target="_blank" rel="noopener noreferrer">Graylog</a>ã¨ã¯ä½•ã‹ã¯<a href="/graylog/">ã“ã¡ã‚‰</a>ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚</p><p>Graylogã«ã¯æ§˜ã€…ãªãƒªã‚½ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>User</li><li>Role</li><li>Input</li><li>Index Set</li><li>Stream</li><li>Stream Rule</li><li>Dashboard</li><li>Alert</li><li>etc</li></ul><p>ã“ã‚Œã‚‰ã®ãƒªã‚½ãƒ¼ã‚¹ã¯Web UIã‹ã‚‰ä½œæˆã—ãŸã‚Šå‡ºæ¥ã‚‹ã‚ã‘ã§ã™ãŒã€
Web UIã§ãƒãƒãƒãƒã™ã‚‹ã®ã¯ç–²ã‚Œã¾ã™ã—ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã—ãŸã„ã‚‚ã®ã§ã™(Infrastructure as Code)ã€‚
ã¾ãŸã€Web UIã‹ã‚‰ã§ã¯ç´°ã‹ãªæ¨©é™ç®¡ç†ã¯å‡ºæ¥ãš(é™ã‚‰ã‚ŒãŸæ¨©é™ç®¡ç†ã—ã‹å‡ºæ¥ãªã„)ã€APIã‚’ä½¿ã£ã¦ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>APIã‚’ä½¿ã£ã¦ç®¡ç†ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã‚’æ¢ã—ãŸã‚‚ã®ã®è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã€
APIã‚’ä½¿ã£ã¦Graylogç”¨ã®terraform providerã‚’è‡ªä½œã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-graylog" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-graylog</a></p><p>Graylogã®APIã®ç¨®é¡ã¯éå¸¸ã«å¤šãã€æ®‹å¿µãªãŒã‚‰ã‚«ãƒãƒ¼ã§ãã¦ã„ã‚‹ã®ã¯ä¸€éƒ¨ã ã‘ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><ul><li>Alert Condition</li><li>Alert Notification (Alarm Callback)</li><li>Input</li><li>User</li><li>Role</li><li>Index Set</li><li>Stream</li><li>Stream Rule</li><li>Dashboard</li><li>Ldap Setting</li></ul><p>Role ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã®ã§æ¨©é™ç®¡ç†ã¯å•é¡Œãªãå‡ºæ¥ã¾ã™ã€‚
Dashboard Widget ã‚‚ã‚µãƒãƒ¼ãƒˆã—ãŸã„ã§ã™ã€‚</p><p><del>å‡ºæ¥ã‚Œã° Alert ã®è¨­å®šã‚‚å‡ºæ¥ã‚‹ã¨è‰¯ã„ã®ã§ã™ãŒã€Alertã«é–¢ã™ã‚‹CRUD APIãŒæä¾›ã•ã‚Œã¦ã„ãªã„(GETã®ã¿)ã®ã§ã€ã‚µãƒãƒ¼ãƒˆã§ãã¾ã›ã‚“ã€‚</del></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-ã‚’ä½¿ã£ãŸç®¡ç†æ–¹æ³•">terraform ã‚’ä½¿ã£ãŸç®¡ç†æ–¹æ³•<a href="#terraform-ã‚’ä½¿ã£ãŸç®¡ç†æ–¹æ³•" class="hash-link" aria-label="Direct link to terraform ã‚’ä½¿ã£ãŸç®¡ç†æ–¹æ³•" title="Direct link to terraform ã‚’ä½¿ã£ãŸç®¡ç†æ–¹æ³•">â€‹</a></h2><p>ä»¥ä¸‹ã§ã¯è‡ªåˆ†ã®ç®¡ç†æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/example/tree/master/graylog-terraform" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example/tree/master/graylog-terraform</a></p><p>ã«ã‚µãƒ³ãƒ—ãƒ«ãŒç½®ã„ã¦ã‚ã‚Šã¾ã™ã€‚</p><p>åŸºæœ¬ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«</p><ol><li>Index Set, Stream, Role ã¨ã„ã£ãŸãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆ</li><li>User ã« Role ã‚’ä»˜ä¸</li></ol><p>ã¨ã„ã†æµã‚Œã«ãªã‚Šã¾ã™ã€‚</p><p>1ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã®è¨­å®šã¯ <a href="https://www.terraform.io/docs/modules/index.html" target="_blank" rel="noopener noreferrer">terraform ã® module</a> ã¨ã„ã†å½¢ã§ã¾ã¨ã‚ã¦ã—ã¾ã„ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-provider-ã®é–‹ç™ºã«ã¤ã„ã¦">terraform provider ã®é–‹ç™ºã«ã¤ã„ã¦<a href="#terraform-provider-ã®é–‹ç™ºã«ã¤ã„ã¦" class="hash-link" aria-label="Direct link to terraform provider ã®é–‹ç™ºã«ã¤ã„ã¦" title="Direct link to terraform provider ã®é–‹ç™ºã«ã¤ã„ã¦">â€‹</a></h2><p>terraform provider ã®é–‹ç™ºã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå°‘ãªãå‹•ã‹ã—ã¤ã¤æ‰‹æ¢ã‚Šã§æ›¸ã„ã¦ã„ãŸã‚Šã—ã¦ã„ã¾ã™ã€‚
terraform provider ã®é–‹ç™ºã«èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ã“ã®è¾ºã‚’è¦‹ã¦ã¿ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><ul><li><a href="https://www.terraform.io/docs/plugins/provider.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/plugins/provider.html</a></li><li><a href="https://www.terraform.io/guides/writing-custom-terraform-providers.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/guides/writing-custom-terraform-providers.html</a></li><li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/schema" target="_blank" rel="noopener noreferrer">https://godoc.org/github.com/hashicorp/terraform/helper/schema</a></li><li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCase" target="_blank" rel="noopener noreferrer">https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCase</a></li></ul><p>ã‚ã¨ã¯ <a href="https://github.com/terraform-providers/terraform-provider-google" target="_blank" rel="noopener noreferrer">https://github.com/terraform-providers/terraform-provider-google</a> ã®ã‚ˆã†ãªå…¬å¼ã® provider ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚‚å‚è€ƒã«ãªã‚Šã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€å¾Œã«">æœ€å¾Œã«<a href="#æœ€å¾Œã«" class="hash-link" aria-label="Direct link to æœ€å¾Œã«" title="Direct link to æœ€å¾Œã«">â€‹</a></h2><p>API ã‚’ä½¿ã£ã¦ terraform provider ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ã§ã€Infrastructure as Code ã‚’ã‚ã‚‹ç¨‹åº¦å®Ÿç¾ã§ãã¾ã—ãŸã€‚</p><ul><li><del>Stream Rule ã¨ Dashboard ã‚’ã‚µãƒãƒ¼ãƒˆã§ãã¦ã„ãªã„</del></li><li><del>Alertã«é–¢ã™ã‚‹CRUD APIãŒæä¾›ã•ã‚Œã¦ã„ãªã„(GETã®ã¿)ã®ã§ã€ã‚µãƒãƒ¼ãƒˆã§ããªã„</del></li></ul><p>ã¨ã„ã†å•é¡ŒãŒã‚¯ãƒªã‚¢å‡ºæ¥ã¦ãªã„ã®ã§ã€ãã“ã‚’ã‚¯ãƒªã‚¢ã—ãŸã„ã§ã™ã€‚</p><p>ã¾ãŸã€</p><ul><li><del>ã¾ã  terraform ã‚’ CI ã§å‡ºæ¥ã¦ã„ãªã„(ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰å®Ÿè¡Œã—ã¦ã„ã‚‹)</del></li><li>æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¿½åŠ ã®éš›ã«é››å½¢ã‚’è‡ªå‹•ç”Ÿæˆã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚ŠãŸã„(ç‰¹ã«ã€æ–°ã—ãå‚ç”»ã—ãŸäººã®ãŸã‚ã«ã‚ã‚‹ã¨è‰¯ã„)</li></ul><p>ã¨ã„ã£ãŸç‚¹ã‚‚æ”¹å–„ã—ãŸã„ã§ã™(å‡ºæ¥ãŸã‚‰è¨˜äº‹ã«ã—ãŸã„ã¨æ€ã„ã¾ã™)ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2018-12-03-è¿½è¨˜">2018-12-03 è¿½è¨˜<a href="#2018-12-03-è¿½è¨˜" class="hash-link" aria-label="Direct link to 2018-12-03 è¿½è¨˜" title="Direct link to 2018-12-03 è¿½è¨˜">â€‹</a></h2><ul><li>Stream Rule ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ</li><li><a href="/graylog-terraform-ci">terraform ã‚’ CI ã§å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸ(æ°—ãŒå‘ã„ãŸã‚‰è¨˜äº‹æ›¸ãã¾ã™)</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2018-12-31-è¿½è¨˜">2018-12-31 è¿½è¨˜<a href="#2018-12-31-è¿½è¨˜" class="hash-link" aria-label="Direct link to 2018-12-31 è¿½è¨˜" title="Direct link to 2018-12-31 è¿½è¨˜">â€‹</a></h2><ul><li>Alert Condition, Notification ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸ</li></ul>]]></content:encoded>
            <category>oss</category>
            <category>graylog</category>
            <category>terraform</category>
        </item>
        <item>
            <title><![CDATA[Graylog ã§ log ã‚’ç®¡ç†ã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/graylog</link>
            <guid>https://techblog.szksh.cloud/graylog</guid>
            <pubDate>Tue, 27 Nov 2018 07:40:33 GMT</pubDate>
            <description><![CDATA[Java è£½ã® OSS ãƒ­ã‚°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  Graylog ã®ç´¹ä»‹ã§ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>Java è£½ã® OSS ãƒ­ã‚°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  Graylog ã®ç´¹ä»‹ã§ã™ã€‚
Graylog ã«ã¤ã„ã¦ã¯å¹¾ã¤ã‹ã«åˆ†ã‘ã¦è¨˜äº‹ã‚’æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚
ä»Šå›ã¯Graylogã®å…¥é–€çš„ãªå†…å®¹ã«ãªã‚Šã¾ã™ã€‚</p><p>ãªãŠã€æœ¬è¨˜äº‹ä¸­ã§ã€Œç¾åœ¨ã€ã€Œç¾æ™‚ç‚¹ã€ã¨ã„ã£ãŸå ´åˆã€ç‰¹ã«æ–­ã‚ŠãŒãªã‘ã‚Œã°è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ 2018-11-27 ã‚’æŒ‡ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="graylog-ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³">Graylog ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³<a href="#graylog-ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³" class="hash-link" aria-label="Direct link to Graylog ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³" title="Direct link to Graylog ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³">â€‹</a></h2><p>æ¤œè¨¼ã«ç”¨ã„ã‚‹Graylogã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ 2.4.6 ã«ãªã‚Šã¾ã™ã€‚</p><p>OSSãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨Enterpriseãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ãŒã€æœ¬è¨˜äº‹ã§ã¯OSSãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="graylog-ã¨ã¯">Graylog ã¨ã¯<a href="#graylog-ã¨ã¯" class="hash-link" aria-label="Direct link to Graylog ã¨ã¯" title="Direct link to Graylog ã¨ã¯">â€‹</a></h2><ul><li><a href="https://www.graylog.org/" target="_blank" rel="noopener noreferrer">https://www.graylog.org/</a></li><li><a href="https://github.com/Graylog2/graylog2-server" target="_blank" rel="noopener noreferrer">https://github.com/Graylog2/graylog2-server</a></li></ul><p>Kibana ã¨ Elasticsearch(ä»¥ä¸‹ES) ã‚’ä½¿ã£ãŸã“ã¨ãŒã‚ã‚‹äººã¯ã€Kibanaã«ä»£ã‚ã‚‹ã‚‚ã®ã ã¨æ€ã£ã¦ã„ãŸã ãã¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã‹ã¨æ€ã„ã¾ã™ã€‚
ãƒ­ã‚°ã¯Graylogãã®ã‚‚ã®ãŒä¿æŒã™ã‚‹ã®ã§ã¯ãªãã€ESã«ã‚¤ãƒ³ãƒ‡ã‚­ã‚·ãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚
KibanaåŒæ§˜ã€ESã«åé›†ã•ã‚ŒãŸãƒ­ã‚°ã‚’æ¤œç´¢ã—ãŸã‚Šã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œã£ãŸã‚Šå‡ºæ¥ã¾ã™ã€‚
ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«é–¢ã—ã¦ã¯Kibanaã®ã»ã†ãŒå„ªã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã‚‚æ€ãˆã¾ã™ãŒã€
Graylogã¯èªè¨¼ãƒ»èªå¯ã«ã‚ˆã‚Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚„ãƒ­ã‚°ã‚’æ“ä½œã§ãã‚‹äººã‚’åˆ¶é™ãƒ»ç®¡ç†ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><p>Graylogã§ãƒ­ã‚°ã‚’ç®¡ç†ã™ã‚‹å ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç›´æ¥ESã«ã¯ãƒ­ã‚°ã‚’é€ã‚‰ãšã€Graylogã‚’çµŒç”±ã—ã¦é€ã‚Šã¾ã™ã€‚
ESã«å¯¾ã™ã‚‹Graylogä»¥å¤–ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™ã—ç›´æ¥ESã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ã®ã‚’é˜²ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><p>Graylog ã¯å¤šæ©Ÿèƒ½ãªã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚Šã€ãƒ­ã‚°ã‚’æ•´å½¢ã—ãŸã‚Šã€ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã—ãŸã‚Šã€ä»–ã®ã‚·ã‚¹ãƒ†ãƒ ã«ãƒ­ã‚°ã‚’ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã—ãŸã‚Šã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚
<a href="http://docs.graylog.org/en/2.5/pages/marketplace.html" target="_blank" rel="noopener noreferrer">marketplace</a> ã§ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã® plugin ãŒå…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€æ©Ÿèƒ½ã‚’æ‹¡å¼µã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
<a href="http://docs.graylog.org/en/2.5/pages/configuration/rest_api.html" target="_blank" rel="noopener noreferrer">API</a>ã‚‚æä¾›ã•ã‚Œã¦ãŠã‚Šã€ã‚ã‚‹ç¨‹åº¦è‡ªå‹•åŒ–ãŒå¯èƒ½ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èªè¨¼èªå¯">èªè¨¼ãƒ»èªå¯<a href="#èªè¨¼èªå¯" class="hash-link" aria-label="Direct link to èªè¨¼ãƒ»èªå¯" title="Direct link to èªè¨¼ãƒ»èªå¯">â€‹</a></h2><p>ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ã§ãƒ­ã‚°ã‚’ç®¡ç†ã™ã‚‹å ´åˆã€ç¤¾å¤–ã‹ã‚‰ã¯å‹¿è«–ç¤¾å†…ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚‚åˆ¶é™ã—ãŸã„ã§ã™ã€‚
Graylog ã§ã¯ LDAP ã‚„ Active Directory ã«ã‚ˆã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™ã§ãã¾ã™ã€‚
ãƒªã‚½ãƒ¼ã‚¹æ¯ã«èª°ãŒä½•ã‚’å‡ºæ¥ã‚‹ã‹è¨­å®šã§ãã¾ã™ã€‚</p><p><a href="http://docs.graylog.org/en/2.5/pages/users_and_roles/external_auth.html" target="_blank" rel="noopener noreferrer">http://docs.graylog.org/en/2.5/pages/users_and_roles/external_auth.html</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ­ã‚°ã®åé›†">ãƒ­ã‚°ã®åé›†<a href="#ãƒ­ã‚°ã®åé›†" class="hash-link" aria-label="Direct link to ãƒ­ã‚°ã®åé›†" title="Direct link to ãƒ­ã‚°ã®åé›†">â€‹</a></h2><p>ãƒ­ã‚°ã®åé›†ã‚’ã™ã‚‹ã«ã¯ Graylog ã§å¹¾ã¤ã‹ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>Input</li><li>Index Set</li><li>Stream</li><li>Stream Rule</li></ul><p>Input ã¯ãƒ­ã‚°ã®å…¥åŠ›ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®è¨­å®šã§ã‚ã‚Šã€
ã©ã®ãƒãƒ¼ãƒˆã§ã©ã†ã„ã£ãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãƒ­ã‚°ã‚’å—ã‘ä»˜ã‘ã‚‹ã‹ã¨ã„ã†è¨­å®šã«ãªã‚Šã¾ã™ã€‚
ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ§˜ã€…ãªã‚‚ã®ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li>AWS Flow Logs</li><li>AWS Cloud Watch Logs</li><li>AWS Cloud Trail</li><li>Beats</li><li>CEF AMQP</li><li>CEF Kafka</li><li>CEF TCP</li><li>CEF UDP</li><li>Fake HTTP Message</li><li>GELF AMQP</li><li>GELF HTTP</li><li>GELF Kafka</li><li>GELF TCP</li><li>GELF UDP</li><li>JSON Path</li><li>NetFlow UDP</li><li>Raw AMQP</li><li>Syslog AMQP</li><li>Syslog Kafka</li><li>Syslog TCP</li><li>Syslog UDP</li></ul><p>ã“ã®è¨­å®šã¯ãƒ­ã‚°ã‚’åé›†ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã”ã¨ã«è¨­å®šã™ã‚‹ã¨ã„ã†ã‚ˆã‚Šã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªè¨­å®šãªã®ã§ã€ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§æ—¢ã«åŒã˜å½¢å¼ã§ãƒ­ã‚°ã‚’åé›†ã—ã¦ã„ãŸã‚‰æ–°ãŸã«è¨­å®šã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p><a href="http://docs.graylog.org/en/2.5/pages/streams.html#index-sets" target="_blank" rel="noopener noreferrer">Index Set</a>ã¯ESã®Indexã®è«–ç†çš„ãªã‚»ãƒƒãƒˆã§ã™ã€‚
Graylogã¯ESã®è¤‡æ•°ã®Indexã‚’1ã¤ã®ã‚»ãƒƒãƒˆã¨ã—ã¦ç®¡ç†ã—ã¾ã™ã€‚
Index Setã®è¨­å®šã§å¤ã„ãƒ­ã‚°ã‚’è‡ªå‹•ã§closeã—ãŸã‚Šå‰Šé™¤ã—ãŸã‚Šã™ã‚‹äº‹ãŒã§ãã‚‹ã®ã§ãƒ­ã‚°ã®ç®¡ç†ãŒæ¥½ã«ãªã‚Šã¾ã™ã€‚
ESã®ãƒ­ã‚°ã¯åé›†ã—ã¦ã„ã‚‹ã ã‘ã ã¨ã©ã‚“ã©ã‚“è‚¥å¤§åŒ–ã—ã¦ã„ã£ã¦ã—ã¾ã†ã®ã§ã€<a href="https://dev.classmethod.jp/server-side/elasticsearch/elastic-curator/" target="_blank" rel="noopener noreferrer">Curatorãªã©ã‚’ä½¿ã£ã¦å¤ã„ã‚‚ã®ã‚’æ¶ˆã—ãŸã‚Šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒ</a>ã€ãã†ã„ã£ãŸã“ã¨ã‚’GraylogãŒè‡ªå‹•ã§ã‚„ã£ã¦ãã‚Œã¾ã™ã€‚</p><p><a href="http://docs.graylog.org/en/2.5/pages/streams.html" target="_blank" rel="noopener noreferrer">Stream</a> ã¯Graylogã«åé›†ã•ã‚ŒãŸãƒ­ã‚°ã‚’åˆ†é¡ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚
Streamæ¯ã«æ¤œç´¢ã—ãŸã‚Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œã£ãŸã‚Šã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã—ãŸã‚Šãƒ­ã‚°ã®é–²è¦§ã‚’åˆ¶é™ã—ãŸã‚Šã—ã¾ã™ã€‚
åˆ†é¡ã®ä»•æ–¹ã¯è‡ªç”±ã§ã™ãŒã€è‡ªåˆ†ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¯ã«Streamã‚’ä½œã£ã¦ã„ã¾ã™ã€‚
Streamæ¯ã«Stream Ruleã‚’å®šç¾©ã—ã€Stream Ruleã®æ¡ä»¶ã«ãƒãƒƒãƒã—ãŸãƒ­ã‚°ã¯ãã®Streamã«æŒ¯ã‚Šåˆ†ã‘ã‚‰ã‚Œã¾ã™ã€‚
è‡ªåˆ†ã¯fluentdã‹ã‚‰é€ã£ãŸãƒ­ã‚°ã® tag ã«ã‚ˆã£ã¦Streamã‚’åˆ†ã‘ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ­ã‚°ã‚’é€ã‚‹">ãƒ­ã‚°ã‚’é€ã‚‹<a href="#ãƒ­ã‚°ã‚’é€ã‚‹" class="hash-link" aria-label="Direct link to ãƒ­ã‚°ã‚’é€ã‚‹" title="Direct link to ãƒ­ã‚°ã‚’é€ã‚‹">â€‹</a></h2><p>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¹¾ã¤ã‹ãƒ­ã‚°ã®é€ã‚Šæ–¹ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p><a href="http://docs.graylog.org/en/2.5/pages/sending_data.html" target="_blank" rel="noopener noreferrer">http://docs.graylog.org/en/2.5/pages/sending_data.html</a></p><p>è‡ªåˆ†ãŒä¸»ã«ã‚„ã£ã¦ã„ã‚‹ã®ãŒ</p><ul><li><a href="https://docs.docker.com/config/containers/logging/gelf/" target="_blank" rel="noopener noreferrer">Docker ã® GELF log driver</a> ã‚’ä½¿ã†</li><li>k8s ã® Pod ã§ fluentd ã‚’ side car ã¨ã—ã¦å‹•ã‹ã™(<a href="https://hub.docker.com/r/suzukishunsuke/fluentd-gelf/" target="_blank" rel="noopener noreferrer">fluentdã«ã¯out_gelf plugin ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a>)</li></ul><p>ã“ã“ã¾ã§ã‚„ã‚Œã°ãƒ­ã‚°ã‚’<a href="http://docs.graylog.org/en/2.5/pages/queries.html" target="_blank" rel="noopener noreferrer">æ¤œç´¢</a>ã—ãŸã‚Šå‡ºæ¥ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="alert">Alert<a href="#alert" class="hash-link" aria-label="Direct link to Alert" title="Direct link to Alert">â€‹</a></h2><p><a href="http://docs.graylog.org/en/2.5/pages/streams/alerts.html" target="_blank" rel="noopener noreferrer">http://docs.graylog.org/en/2.5/pages/streams/alerts.html</a></p><p>ã‚¢ãƒ©ãƒ¼ãƒˆã®è¨­å®šã¯</p><ul><li>Condition: ã‚¢ãƒ©ãƒ¼ãƒˆã®æ¡ä»¶</li><li>Notification: ã‚¢ãƒ©ãƒ¼ãƒˆå…ˆ(ã©ã“ã«ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã™ã‹)</li></ul><p>ã®2ã¤ã«åˆ†ã‹ã‚Œã¾ã™ã€‚ãã‚Œãã‚ŒStreamã«é–¢é€£ã¥ã„ãŸè¨­å®šã§ã™ã€‚</p><p>Condition ã§ã¯</p><ul><li>Field content condition</li><li>Field aggregation condition</li><li>Message count condition</li></ul><p>ã¨ã„ã£ãŸæ¡ä»¶ã§è¨­å®šã§ãã¾ã™ã€‚</p><p>Notification ã¯æ¨™æº–ã§ã¯</p><ul><li>HTTP(Webhook)</li><li>Email</li></ul><p>ã®2ç¨®é¡ã—ã‹ãªã„ã®ã§ã™ãŒã€pluginã§ Slack ãªã©ã«ã‚‚é€šçŸ¥ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
è‡ªåˆ†ã¯ <a href="https://github.com/graylog-labs/graylog-plugin-slack" target="_blank" rel="noopener noreferrer">https://github.com/graylog-labs/graylog-plugin-slack</a> ã‚’ä½¿ã£ã¦ Slack ã«é€šçŸ¥ã—ã¦ã„ã¾ã™ã€‚</p><p>Notification ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯è‡ªç”±ã«å¤‰ãˆã‚‰ã‚Œã¾ã™ãŒã€ã©ã†ã„ã£ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒè‰¯ã„ã‹ã¯é›£ã—ã„ã§ã™ã€‚
è‡ªåˆ†ã¯æ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜ã«ã—ã¦ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">${alert_condition.title}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">${foreach backlog message}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;https://graylog.example.com/streams/${stream.id}/search?rangetype=absolute&amp;from=${message.timestamp}&amp;to=${message.timestamp} | link&gt; ${message.message}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">${end}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>graylog ã® URL ã¯é©å®œç½®ãæ›ãˆã¦ãã ã•ã„ã€‚
<code>link</code> ã®éƒ¨åˆ†ã‚’å¤‰æ•°(<code>${message.message}</code>ã¨ã‹)ã«ã™ã‚‹ã¨ãƒªãƒ³ã‚¯ãŒå£Šã‚Œã¦ã—ã¾ã†ã“ã¨ãŒã‚ã£ãŸã®ã§å›ºå®šæ–‡å­—åˆ—ã«ã—ã¦ã„ã¾ã™ã€‚</p><p>graylog-plugin-slack ã®è¨­å®šã§ <code>Graylog URL (optional)</code>ã‚’è¨­å®šã—ãªã„ã¨ <code>${stream_url}</code> ãªã©ãŒç©ºã«ãªã£ã¦ã—ã¾ã†ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
è‡ªåˆ†ã¯ optional ãªã®ã§å…ƒã€…è¨­å®šã—ã¦ã„ãªã‹ã£ãŸã®ã§ãƒãƒã‚Šã¾ã—ãŸ(ã‚°ã‚°ã£ã¦ã‚‚åˆ†ã‹ã‚‰ãªã‹ã£ãŸ)ã€‚
<code>Graylog URL</code>ã¨ã„ã†è¨­å®šã¯ notification æ¯ã«å¤‰ãˆã‚‹ã‚ˆã†ãªã‚‚ã®ã§ã‚‚ãªã„ã®ã§globalã«è¨­å®šã§ãã‚‹ã¨ã‚ˆã„ã®ã§ã™ãŒã€ã©ã†ã‚‚å‡ºæ¥ãªãã†ã§ã™ã€‚</p><p>ã¾ãŸã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸­ã§ä½¿ãˆã‚‹å¤‰æ•°ã®ä¸­ã«messageã®URLã¯ãªã„ãã†ã§ã™ã€‚</p><p><a href="https://community.graylog.org/t/message-url-in-alert-notification/1916" target="_blank" rel="noopener noreferrer">https://community.graylog.org/t/message-url-in-alert-notification/1916</a></p><p>ãã®ãŸã‚ã€message.timestamp ã‚’ from ã¨ to ã«æŒ‡å®šã—ã¦æ¤œç´¢ã™ã‚‹ã¨ã„ã†å›ã‚Šãã©ã„(?)ã“ã¨ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆ">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆ<a href="#ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆ" class="hash-link" aria-label="Direct link to ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆ" title="Direct link to ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆ">â€‹</a></h2><p>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆã¯</p><ol><li>Dashboardãƒšãƒ¼ã‚¸: ç©ºã®Dashboardã‚’ä½œã‚‹</li><li>Stream ãƒšãƒ¼ã‚¸: ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ãŸã‚Šã—ã¦ã‚°ãƒ©ãƒ•ã‚’ä½œã‚‹</li><li>Stream ãƒšãƒ¼ã‚¸: ã‚°ãƒ©ãƒ•ã‚’Dashboardã«è¿½åŠ ã™ã‚‹</li><li>Dashboardãƒšãƒ¼ã‚¸: ã‚°ãƒ©ãƒ•ã‚’ä¸¦ã³æ›¿ãˆãŸã‚Šã™ã‚‹</li></ol><p>è©³ç´°ã¯å‰²æ„›ã™ã‚‹ã®ã§ <a href="http://docs.graylog.org/en/2.5/pages/dashboards.html" target="_blank" rel="noopener noreferrer">http://docs.graylog.org/en/2.5/pages/dashboards.html</a> ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ¨©é™ç®¡ç†">æ¨©é™ç®¡ç†<a href="#æ¨©é™ç®¡ç†" class="hash-link" aria-label="Direct link to æ¨©é™ç®¡ç†" title="Direct link to æ¨©é™ç®¡ç†">â€‹</a></h2><p>Graylogã®æ¨©é™ç®¡ç†ã§ã¯ User ã¨ Role ã¨ã„ã†æ¦‚å¿µãŒã‚ã‚Šã€
Role ã® permissions ã¨ã—ã¦ã©ã®ãƒªã‚½ãƒ¼ã‚¹ã«ã©ã†ã„ã£ãŸæ“ä½œã‚’è¨±å¯ã™ã‚‹ã‹å®šç¾©ã—ã€
User ã« Role ã‚’ä»˜ä¸ã—ã¾ã™ã€‚</p><p><a href="http://docs.graylog.org/en/2.5/pages/users_and_roles/permission_system.html#permissions" target="_blank" rel="noopener noreferrer">http://docs.graylog.org/en/2.5/pages/users_and_roles/permission_system.html#permissions</a></p><p>permissions ã¨ã—ã¦å®šç¾©ã§ãã‚‹ã‚‚ã®ã¯å…¬å¼ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„ã®ã§ã™ãŒã€APIã§å–å¾—ã§ãã¾ã™ã€‚</p><p><a href="https://gist.github.com/suzuki-shunsuke/e371f1bd2716cde31d6fa89bf39f0e77" target="_blank" rel="noopener noreferrer">https://gist.github.com/suzuki-shunsuke/e371f1bd2716cde31d6fa89bf39f0e77</a></p><p>ä¾‹ãˆã° <code>streams:read</code> ã¯å…¨ã¦ã®Streamã‚’readã™ã‚‹æ¨©é™ã¨ãªã‚Šã¾ã™ã—ã€
<code>streams:read:&lt;stream id&gt;</code> ã¨ã™ã‚Œã°ç‰¹å®šã®Streamã®ã¿readã™ã‚‹æ¨©é™ã¨ãªã‚Šã¾ã™ã€‚</p><p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«roleã‚’å®šç¾©ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–¢ä¿‚è€…ã«ä»˜ä¸ã—ãŸã‚Šã€ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚„æ­£ç¤¾å“¡ã¨ã„ã£ãŸé›‡ç”¨å½¢æ…‹ã«å¿œã˜ã¦roleã‚’å®šç¾©ã—ãŸã‚Šã€è‰²ã€…ãªåˆ©ç”¨æ–¹æ³•ã¯ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã†ã„ã£ãŸRoleã®permissionã®å®šç¾©ã¯Web UIã‹ã‚‰ã‚‚å‡ºæ¥ã¾ã™ãŒã€
æ®‹å¿µãªãŒã‚‰Web UIã‹ã‚‰ã§ã¯ãªãAPIã‚’ç”¨ã„ãªã„ã¨å®šç¾©ã§ããªã„permissionã‚‚ã‚ã‚Šã¾ã™ã€‚
ãã®ãŸã‚ã€è‡ªåˆ†ã¯ Graylog APIã‚’ç”¨ã„ã¦ terraform provider ã‚’é–‹ç™ºã—ã€terraform ã§ Roleã®ä½œæˆã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€å¾Œã«">æœ€å¾Œã«<a href="#æœ€å¾Œã«" class="hash-link" aria-label="Direct link to æœ€å¾Œã«" title="Direct link to æœ€å¾Œã«">â€‹</a></h2><p>ä»¥ä¸Šã€è‡ªåˆ†ãŒä¸»ã«ä½¿ã£ã¦ã„ã‚‹Graylogã®æ©Ÿèƒ½ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚
Graylogã¯å¤šæ©Ÿèƒ½ã§è‡ªåˆ†ãŒä½¿ã£ã¦ã„ãªã„ã€åˆ†ã‹ã£ã¦ã„ãªã„æ©Ÿèƒ½ãŒè‰²ã€…ã‚ã‚Šã¾ã™ã€‚
èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯èª¿ã¹ã¦ã¿ã¦ãã ã•ã„ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>graylog</category>
        </item>
        <item>
            <title><![CDATA[akoi - binary installer]]></title>
            <link>https://techblog.szksh.cloud/akoi</link>
            <guid>https://techblog.szksh.cloud/akoi</guid>
            <pubDate>Tue, 30 Oct 2018 23:56:04 GMT</pubDate>
            <description><![CDATA[è‡ªä½œã®OSS akoi ã®ç´¹ä»‹ã‚’ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>è‡ªä½œã®OSS <a href="https://github.com/suzuki-shunsuke/akoi" target="_blank" rel="noopener noreferrer">akoi</a> ã®ç´¹ä»‹ã‚’ã—ã¾ã™ã€‚</p><ul><li>ãªãœã“ã‚“ãªã‚‚ã®ã‚’ä½œã£ãŸã®ã‹</li><li>akoi ã¨ ansible ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒã«ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ–¹æ³•</li></ul><p>ã«ã¤ã„ã¦ä¸»ã«èª¬æ˜ã—ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã¾ã¨ã‚">ã¾ã¨ã‚<a href="#ã¾ã¨ã‚" class="hash-link" aria-label="Direct link to ã¾ã¨ã‚" title="Direct link to ã¾ã¨ã‚">â€‹</a></h2><ul><li>akoi ã¯ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©</li><li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã§ãã‚‹</li><li>å†ªç­‰ã§ã‚ã‚Šã€åŠ¹ç‡ã‚ˆãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹<ul><li>ä¸¦åˆ—ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li><li>Accept-Ranges ã«ã‚ˆã‚‹åˆ†æ•£ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</li></ul></li><li>ansibleã§ã‚µãƒ¼ãƒã«ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã‚’è£œåŠ©ã—ã¦ãã‚Œã‚‹<ul><li>ansible ã§çœŸé¢ç›®ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã¦åŠ¹ç‡ã‚ˆãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã¯é›£ã—ã„(ã»ã¨ã‚“ã©ã® ansible role ã¯å‡ºæ¥ã¦ã„ãªã„)</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="akoi-ã¨ã¯">akoi ã¨ã¯<a href="#akoi-ã¨ã¯" class="hash-link" aria-label="Direct link to akoi ã¨ã¯" title="Direct link to akoi ã¨ã¯">â€‹</a></h2><p>akoi ã¯ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã§ã™ã€‚
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰URLã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã‚’è¨˜è¿°ã—ã¦ç®¡ç†ã—ã¾ã™ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒã‚¤ãƒŠãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãŒå¯èƒ½ã§ã‚ã‚Šã€æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¸ã®åˆ‡ã‚Šæ›¿ãˆã¯ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ã‚’ä½œã‚Šç›´ã™ã ã‘ãªã®ã§ä¸€ç¬ã§çµ‚ã‚ã‚Šã¾ã™ã€‚ç„¡é§„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’ã—ãŸã‚Šã¯ã—ã¾ã›ã‚“ã€‚
è¤‡æ•°ã®ãƒã‚¤ãƒŠãƒªã‚’ä¸¦åˆ—ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚Šã€Accept-Ranges ãƒ˜ãƒƒãƒ€ã«ã‚ˆã‚‹åˆ†æ•£ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><p>åˆ†æ•£ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã¯</p><p><a href="https://qiita.com/codehex/items/d0a500ac387d39a34401" target="_blank" rel="noopener noreferrer">https://qiita.com/codehex/items/d0a500ac387d39a34401</a></p><p>ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚</p><p>Goã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/akoi/releases" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/akoi/releases</a> ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚</p><p>è©³ç´°ã¯<a href="https://github.com/suzuki-shunsuke/akoi" target="_blank" rel="noopener noreferrer">README</a>ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãªãœä½œã£ãŸã®ã‹">ãªãœä½œã£ãŸã®ã‹<a href="#ãªãœä½œã£ãŸã®ã‹" class="hash-link" aria-label="Direct link to ãªãœä½œã£ãŸã®ã‹" title="Direct link to ãªãœä½œã£ãŸã®ã‹">â€‹</a></h2><p>ã‚µãƒ¼ãƒã«ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ ansible role ã‚’æ›¸ãã®ãŒè¾›ã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚
æœ€è¿‘ã¯è‰²ã€…ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãŒGoã§æ›¸ã‹ã‚Œã€ãƒã‚¤ãƒŠãƒªã§é…å¸ƒã•ã‚Œã¦ã„ã¾ã™ã€‚
ãã†ã„ã£ãŸãƒã‚¤ãƒŠãƒªã‚’ã‚µãƒ¼ãƒã¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã¯
ansible ã§è¡Œã£ã¦ã„ã‚‹ã¨ã„ã†æ–¹ã‚‚å°‘ãªããªã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ
æœ‰åãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ ansible role ã¯å¤§æŠµ<a href="https://galaxy.ansible.com" target="_blank" rel="noopener noreferrer">Ansible Galaxy</a> ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã—ã‹ã—ã€ã»ã¨ã‚“ã©ã® role ã¯ã€ŒçœŸé¢ç›®ã«ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã—ã¦ã„ã¾ã›ã‚“ã€‚
ã“ã“ã§ã„ã†ã€ŒçœŸé¢ç›®ã«ã€ã¨ã¯</p><ol><li>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã§ãã‚‹</li><li>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´ã§ãã‚‹</li><li>æŒ‡å®šã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒæ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ç„¡é§„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚Šã—ãªã„</li></ol><p>ã¨ã„ã£ãŸã“ã¨ã§ã™ã€‚</p><p>ã“ã‚Œã‚‰ã‚’ ansible ã§ã‚„ã‚ã†ã¨ã™ã‚‹ã¨çµæ§‹é¢å€’ãªã‚“ã§ã™ã€‚</p><p>æ—¢å­˜ã®roleã§ã‚ˆãã‚ã‚‹ã®ãŒ</p><ol><li>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‹ã‹ã‚ã‚‰ãšæ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãŸã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªã„(ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ã§ããªã„)</li><li>1ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã€å¼·åˆ¶çš„ã«å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ•ãƒ©ã‚°ãŒã‚ã‚‹(åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚‚ã®ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¦ã‚‚ç„¡é§„ã«å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹)</li></ol><p>ã ã¨æ€ã„ã¾ã™ã€‚</p><p>çœŸé¢ç›®ã«ã‚„ã‚ã†ã¨ã™ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚‹æ°—ãŒã—ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/ansible_role_akoi/blob/master/tasks/install_binary.yml" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/ansible_role_akoi/blob/master/tasks/install_binary.yml</a></p><p>ã“ã‚Œã‚‰ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã«é–¢ã‚ã‚‰ãšã»ã¨ã‚“ã©å…±é€šã§ã™ã€‚
ãã‚Œã‚’ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã”ã¨ã«å®Ÿè£…ã—ã¦ãƒ†ã‚¹ãƒˆã—ã¦ãªã‚“ã¦ã®ã¯é¢å€’ã§ã™ã€‚</p><p>ãã“ã§ akoi ã‚’ä½œã‚‹å‰ã«æ±ç”¨çš„ãª ansible role ã¨ã—ã¦é–‹ç™ºã—ã¦ã¿ãŸã®ãŒ</p><p><a href="https://github.com/suzuki-shunsuke/ansible-role-general-installer" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/ansible-role-general-installer</a></p><p>ã§ã™ã€‚</p><p>ã—ã‹ã—ã“ã‚Œã¯ ansible ã®ãƒã‚°ã§ã†ã¾ãå‹•ãã¾ã›ã‚“ã§ã—ãŸã€‚</p><p><a href="https://github.com/ansible/ansible/issues/34736" target="_blank" rel="noopener noreferrer">https://github.com/ansible/ansible/issues/34736</a></p><p>ãã“ã§ä½œã‚‰ã‚ŒãŸã®ãŒ akoi ã§ã™ã€‚
çµæœçš„ã« ansible ã§ã‚„ã‚‹ã‚ˆã‚Šé«˜é€Ÿã‹ã¤æ±ç”¨çš„ãªã®ã§ä½œã£ã¦è‰¯ã‹ã£ãŸã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="akoi-ã¨-ansible-ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒã«ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">akoi ã¨ ansible ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒã«ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«<a href="#akoi-ã¨-ansible-ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒã«ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="hash-link" aria-label="Direct link to akoi ã¨ ansible ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒã«ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" title="Direct link to akoi ã¨ ansible ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒã«ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">â€‹</a></h2><p>akoi ã‚’ä½¿ã†ã«ã—ã¦ã‚‚ ansible ãŒä¸è¦ã«ãªã‚‹ã¨ã„ã†è©±ã§ã¯ãªãã€ansible ã§akoiã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹æ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚
<a href="https://github.com/suzuki-shunsuke/akoi#use-akoi-at-ansible" target="_blank" rel="noopener noreferrer">README</a> ã«ã‚‚æ›¸ãã¾ã—ãŸãŒã€ akoiã‚’ ansible ã® shell ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å‘¼ã³å‡ºã—ã¦æ¨™æº–å‡ºåŠ›ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã“ã¨ã§ task ã® <code>changed</code> ã‚’åˆ¤å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> install consul</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">shell</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/usr/local/bin/akoi install -f ansible 2&gt;&amp;1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">register</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">changed_when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> (result.stdout</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">from_json)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"changed"</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>akoi ã‚’ä½¿ã£ã¦ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŸã‚ã«ã€ãã‚‚ãã‚‚ã©ã†ã‚„ã£ã¦ã‚µãƒ¼ãƒã« akoi ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‹ã§ã™ãŒ(å„ã‚µãƒ¼ãƒã« akoi ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™)ã€
akoi ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ ansible role ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/ansible_role_akoi" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/ansible_role_akoi</a></p><p>ã“ã‚Œã§ akoi ã‚’ä½¿ã£ã¦ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ãŒã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚Œã°çµ‚ã‚ã‚Šã¨ã„ã†ã“ã¨ã§ã¯ãªãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã—ãŸã‚Šã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ãŸã‚Šã€systemd ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•ã—ãŸã‚Šã¨è‰²ã€…ã‚ã‚Šã¾ã™ã€‚</p><p>è‡ªåˆ†ã¯ãã‚Œã‚‰ã®å‡¦ç†ã¯åˆ¥ã® ansible role ã¨ã—ã¦é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚</p><ul><li><a href="https://galaxy.ansible.com/suzuki-shunsuke/consul_config" target="_blank" rel="noopener noreferrer">suzuki-shunsuke.consul_config</a></li><li><a href="https://galaxy.ansible.com/suzuki-shunsuke/prometheus_node_exporter_config" target="_blank" rel="noopener noreferrer">suzuki-shunsuke.prometheus_node_exporter_config</a></li></ul><p>ãƒã‚¤ãƒŠãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ akoi ã§ã‚„ã‚Šã€ãã‚Œä»¥å¤–ã®éƒ¨åˆ†ã¯åˆ¥é€” ansible role ã‚’é–‹ç™ºã™ã‚‹ã¨ã„ã†ã‚¹ã‚¿ã‚¤ãƒ«ã§ã™ã€‚
ãã‚Œã‚‰ã® role ã§ã¯ã„ã¡ã„ã¡ãƒã‚¤ãƒŠãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å‡¦ç†ã‚’æ›¸ã‹ãªãã¦è‰¯ã„ã®ã§ã ã„ã¶é–‹ç™ºãŒæ¥½ã«ãªã‚Šã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>ansible</category>
        </item>
        <item>
            <title><![CDATA[gomic - Goã®ãƒ¢ãƒƒã‚¯ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿]]></title>
            <link>https://techblog.szksh.cloud/gomic</link>
            <guid>https://techblog.szksh.cloud/gomic</guid>
            <pubDate>Mon, 29 Oct 2018 23:35:16 GMT</pubDate>
            <description><![CDATA[è‡ªä½œã®OSS gomic ã®ç´¹ä»‹ã‚’ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>è‡ªä½œã®OSS <a href="https://github.com/suzuki-shunsuke/gomic" target="_blank" rel="noopener noreferrer">gomic</a> ã®ç´¹ä»‹ã‚’ã—ã¾ã™ã€‚</p><ul><li>ãªãœã‚ã–ã‚ã–ã“ã‚“ãªã‚‚ã®ã‚’ä½œã£ãŸã®ã‹</li><li>ç”Ÿæˆã•ã‚ŒãŸãƒ¢ãƒƒã‚¯ã®ç°¡å˜ãªä½¿ã„æ–¹</li></ul><p>ã‚’ä¸»ã«èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã¾ã¨ã‚">ã¾ã¨ã‚<a href="#ã¾ã¨ã‚" class="hash-link" aria-label="Direct link to ã¾ã¨ã‚" title="Direct link to ã¾ã¨ã‚">â€‹</a></h2><ul><li>gomic ã¯ Goã®interfaceã‚’å®Ÿè£…ã—ãŸãƒ¢ãƒƒã‚¯ã‚’ç”Ÿæˆã™ã‚‹CLIãƒ„ãƒ¼ãƒ«</li><li>ãƒ¢ãƒƒã‚¯ã‚’æ‰‹ã§æ›¸ãã®ãŒè¾›ã™ããŸ &amp; æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã§æº€è¶³ã§ããªã‹ã£ãŸãŸã‚ä½œã£ãŸ<ul><li>è‡ªå‹•ç”Ÿæˆã§ãã‚‹ã‚³ãƒ¼ãƒ‰ã¯è‡ªå‹•ç”Ÿæˆã™ã¹ã</li></ul></li><li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã™ã‚‹ãŸã‚ã€interfaceã®æ›´æ–°ã«åˆã‚ã›ã¦mockã®æ›´æ–°ãŒå®¹æ˜“</li><li>ç”Ÿæˆã•ã‚Œã‚‹ãƒ¢ãƒƒã‚¯ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªAPIã®ã¿æä¾›ã™ã‚‹ã®ã§å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ã„</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gomic-ã¨ã¯">gomic ã¨ã¯<a href="#gomic-ã¨ã¯" class="hash-link" aria-label="Direct link to gomic ã¨ã¯" title="Direct link to gomic ã¨ã¯">â€‹</a></h2><p>gomic ã¯ Goã®interfaceã‚’å®Ÿè£…ã—ãŸãƒ¢ãƒƒã‚¯ã‚’ç”Ÿæˆã™ã‚‹CLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ã“ã‚Œã«ã‚ˆã£ã¦ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã®ä½œæˆã‚’åŠ¹ç‡åŒ–ã—ã¾ã™ã€‚
å˜èª¿ãªä½œæ¥­ã‚’è‡ªå‹•åŒ–ã—ã€æœ¬æ¥æ³¨åŠ›ã™ã¹ãã“ã¨ã«æ³¨åŠ›ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p>Goã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/gomic/releases" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/gomic/releases</a> ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚</p><p>åŒæ§˜ã®ãƒ„ãƒ¼ãƒ«ã¯å¹¾ã¤ã‹ã‚ã‚Šã¾ã™ã€‚</p><ul><li><a href="https://github.com/avelino/awesome-go#testing" target="_blank" rel="noopener noreferrer">https://github.com/avelino/awesome-go#testing</a></li><li><a href="https://github.com/golang/mock" target="_blank" rel="noopener noreferrer">https://github.com/golang/mock</a> (ä»¥ä¸‹ gomock)</li><li><a href="https://github.com/gojuno/minimock" target="_blank" rel="noopener noreferrer">https://github.com/gojuno/minimock</a> (ä»¥ä¸‹ minimock)</li></ul><p>ç‰¹ã« gomock ã¯æœ‰åã§ã™ã­ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãªãœä½œã£ãŸã®ã‹">ãªãœä½œã£ãŸã®ã‹<a href="#ãªãœä½œã£ãŸã®ã‹" class="hash-link" aria-label="Direct link to ãªãœä½œã£ãŸã®ã‹" title="Direct link to ãªãœä½œã£ãŸã®ã‹">â€‹</a></h2><p>ä¸Šè¿°ã®ã‚ˆã†ã«æ—¢ã«åŒæ§˜ã®ãƒ„ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã™ã—ã€ gomock ã¨ minimock ã¯è©¦ã—ã¾ã—ãŸã€‚
ã—ã‹ã—ã‚ã¾ã‚Šæº€è¶³ã®ã„ãã‚‚ã®ã§ã¯ãªã‹ã£ãŸãŸã‚ã€è‡ªåˆ†ã§ä½œã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>è‡ªåˆ†ãŒæ¬²ã—ã‹ã£ãŸã®ã¯å­¦ç¿’ã‚³ã‚¹ãƒˆã®ä½ã„ã‚·ãƒ³ãƒ—ãƒ«ãªAPIã§ã™ã€‚
interfaceã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã—ãŸé–¢æ•°ã‚’ãƒ¢ãƒƒã‚¯ã«æ¸¡ã™ã“ã¨ã§
ç°¡å˜ã«ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„ã®ã§ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Getwd ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ¢ãƒƒã‚¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetFuncGetwd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Getwd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// "/tmp", nil</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚Œã¯éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã§åˆ†ã‹ã‚Šã‚„ã™ãã€æŸ”è»Ÿæ€§ã®ã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™(minimockã¯ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™)ã€‚</p><p>gomock ã‚„ minimock ã§ã¯</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mockSample</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">EXPECT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Method</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"hoge"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Return</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã®ã‚ˆã†ã« é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨æˆ»ã‚Šå€¤ã®ãƒšã‚¢ã‚’æ¸¡ã—ã¦ãƒ¢ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³(ä½•ã‹åå‰ãŒã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ)ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚
ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ gomic ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã”ãç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ã§ã¯æœ‰åŠ¹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å®Ÿéš›ã«ã¯ä½¿ãˆãªã„ã“ã¨ãŒå¤šã„ã‹ãªã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãŸã€gomock ã¯ãã‚Œä»¥å¤–ã«ã‚‚ <a href="https://godoc.org/github.com/golang/mock/gomock#InOrder" target="_blank" rel="noopener noreferrer">gomock.InOrder</a> ã‚„ <a href="https://godoc.org/github.com/golang/mock/gomock#Call.After" target="_blank" rel="noopener noreferrer">gomock#Call.After</a> ãªã©ã€è‰²ã€…ä¾¿åˆ©ãªAPIã‚’æä¾›ã—ã¦ã„ã¾ã™ãŒã€
ãã‚Œã‚‰ã¯å­¦ç¿’ã‚³ã‚¹ãƒˆã‚’ä¸Šã’ã¦ã—ã¾ã†è¦å› ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚
gomicã¯ãã†ã„ã£ãŸAPIã¯æä¾›ã—ã¦ã„ã¾ã›ã‚“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç´ ã®goã§è‰¯ã„ã®ã§ã¯gomicã„ã‚‰ãªããªã„">ç´ ã®Goã§è‰¯ã„ã®ã§ã¯(gomicã„ã‚‰ãªããªã„)?<a href="#ç´ ã®goã§è‰¯ã„ã®ã§ã¯gomicã„ã‚‰ãªããªã„" class="hash-link" aria-label="Direct link to ç´ ã®Goã§è‰¯ã„ã®ã§ã¯(gomicã„ã‚‰ãªããªã„)?" title="Direct link to ç´ ã®Goã§è‰¯ã„ã®ã§ã¯(gomicã„ã‚‰ãªããªã„)?">â€‹</a></h3><p>ä¸Šè¿°ã®ã‚ˆã†ã«é–¢æ•°ã‚’æ¸¡ã™ã ã‘ã®å®Ÿè£…ãªã‚‰ gomic ãªã‚“ã¦ä½¿ã‚ãªãã¦ã‚‚ç´ ã®Goã§è‰¯ã„ã®ã§ã¯ãªã„ã‹ã¨ã„ã†æ„è¦‹ã‚‚ã‚ã‚Šãã†ã§ã™ã­ã€‚</p><p><a href="http://haya14busa.com/golang-how-to-write-mock-of-interface-for-testing/" target="_blank" rel="noopener noreferrer">http://haya14busa.com/golang-how-to-write-mock-of-interface-for-testing/</a></p><p>ã§ã‚‚ä¼¼ãŸã‚ˆã†ãªãƒ¢ãƒƒã‚­ãƒ³ã‚°ã®æ–¹æ³•ãŒãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã—ãªã„ã§mockã‚’æ›¸ããƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã—ã¦ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™
(ä¼¼ãŸã‚ˆã†ãªã¨ã„ã†ã‹ã€<a href="https://github.com/suzuki-shunsuke/gomic/blob/v0.4.0/examples/os_mock_test.go#L20-L22" target="_blank" rel="noopener noreferrer">gomicã‚‚ v0.4.0 ã¾ã§ã¯æ§‹é€ ä½“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä»£å…¥ã—ã¦ã„ã¾ã—ãŸ</a>)ã€‚</p><p>Goã§ã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã—ãªã„ã§æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã‘ã§æ›¸ãã®ãŒè‰¯ã„ã¨ã„ã†æ€æƒ³ãƒ»æ„è¦‹ãŒã‚ˆãè¦‹ã‚‰ã‚Œã¾ã™ã€‚
ãã®ãŸã‚ã€gomicã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’å¥½ã¾ãªã„æ–¹ãŒã„ã‚‹ã®ã¯æ‰¿çŸ¥ã—ã¦ã„ã¾ã™ã€‚</p><p>ãŸã ã€è‡ªåˆ†ã¯ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…ã‚’æ‰‹ã§æ„šç›´ã«æ›¸ãã®ã¯è¾›ã„ã—ã€ç”Ÿç”£çš„ã§ã¯ãªã„ã®ã§ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦è‡ªå‹•ç”Ÿæˆã™ã¹ãã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>ä»¥ä¸‹ã¯2ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿æŒã¤ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã¨ãã®ãƒ¢ãƒƒã‚¯ã§ã™ã€‚</p><ul><li><a href="https://github.com/suzuki-shunsuke/gomic/blob/master/examples/os.go" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/gomic/blob/master/examples/os.go</a></li><li><a href="https://github.com/suzuki-shunsuke/gomic/blob/master/examples/os_mock.go" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/gomic/blob/master/examples/os_mock.go</a></li></ul><p>ã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãª interface ã¨ãã®ãƒ¢ãƒƒã‚¯ã§ã™ãŒã€ãã‚Œã§ã‚‚ãƒ¢ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹ã®ã¯ãã“ãã“é¢å€’ã§ã™ã€‚
ãƒ¡ã‚½ãƒƒãƒ‰ã€interfaceã®æ•°ã«æ¯”ä¾‹ã—ã¦ã©ã‚“ã©ã‚“é¢å€’ã«ãªã‚Šã¾ã™ã€‚
golintã®ã‚ˆã†ãªlinterã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãã®ã‚‚åœ°å‘³ã«å¤§å¤‰ã§ã™ã€‚</p><p>interfaceã‚’æ›´æ–°ã™ã‚Œã°mockã‚‚æ›´æ–°ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚</p><p>ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦è‡ªå‹•åŒ–ã™ã¹ãã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¢ãƒƒã‚¯ã®ä½¿ã„æ–¹">ãƒ¢ãƒƒã‚¯ã®ä½¿ã„æ–¹<a href="#ãƒ¢ãƒƒã‚¯ã®ä½¿ã„æ–¹" class="hash-link" aria-label="Direct link to ãƒ¢ãƒƒã‚¯ã®ä½¿ã„æ–¹" title="Direct link to ãƒ¢ãƒƒã‚¯ã®ä½¿ã„æ–¹">â€‹</a></h2><p>ç”Ÿæˆã•ã‚ŒãŸãƒ¢ãƒƒã‚¯ã®ä½¿ã„æ–¹ã«ã¤ã„ã¦è»½ãèª¬æ˜ã—ã¾ã™ã€‚
<a href="https://github.com/suzuki-shunsuke/gomic/releases/tag/v0.5.0" target="_blank" rel="noopener noreferrer">v0.5.0</a> æ™‚ç‚¹ã®ã‚‚ã®ãªã®ã§å¤ããªã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
æœ€æ–°ã®ä½¿ã„æ–¹ã¯</p><ul><li><a href="https://github.com/suzuki-shunsuke/gomic" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/gomic</a></li><li><a href="https://github.com/suzuki-shunsuke/gomic/tree/master/examples" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/gomic/tree/master/examples</a></li></ul><p>ã‚’ã”ç¢ºèªãã ã•ã„ã€‚</p><p>ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ <a href="https://github.com/suzuki-shunsuke/gomic/tree/v0.5.0/examples" target="_blank" rel="noopener noreferrer">v0.5.0ã®ã‚µãƒ³ãƒ—ãƒ«</a> ã‚’å…ƒã«ã—ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãš mock ã‚’ç”Ÿæˆã—ã¾ã™(ä»¥ä¸‹ã“ã®ãƒ¢ãƒƒã‚¯ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ã‚’"ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿"ã¨å‘¼ã³ã¾ã™)ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mock </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> examples</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewOSMock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¬¬ä¸€å¼•æ•°ã¯ <em>testing.T ã§ã€é€šå¸¸ã®ãƒ†ã‚¹ãƒˆãªã‚‰ãƒ†ã‚¹ãƒˆé–¢æ•°ã®å¼•æ•°ã‚’ãã®ã¾ã¾æ¸¡ã›ã°è‰¯ã„ã—ã€ãã†ã§ãªã‘ã‚Œã° nil ã‚’æ¸¡ã›ã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚
ç¬¬äºŒå¼•æ•°ã¯ `func(t </em>testing.T, intfName, methodName string)` å‹ã®é–¢æ•°ã§ã€interfaceã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ãªã„å ´åˆã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚nil ã‚’æ¸¡ã™ã¨ä»£ã‚ã‚Šã«<a href="https://godoc.org/github.com/suzuki-shunsuke/gomic/gomic#DefaultCallbackNotImplemented" target="_blank" rel="noopener noreferrer">gomic.DefaultCallbackNotImplemented</a> ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</p><p>mockã¯ interface ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚</p><p>æ¬¡ã«interfaceã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã—ãŸé–¢æ•°ã‚’mockã«ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetFuncGetwd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>mock.Getwd</code> ã‚’å‘¼ã³å‡ºã™ã¨ <code>SetFuncGetwd</code> ã«æ¸¡ã—ãŸé–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</p><p>ä¸Šè¨˜ã®ã‚µãƒ³ãƒ—ãƒ«ã®ã‚ˆã†ã«æ±ºã¾ã£ãŸå€¤ã‚’è¿”ã™ã ã‘ã® fake ã¯ã‚ˆãã‚ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ç°¡å˜ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetReturnGetwd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/tmp"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãƒ¢ãƒƒã‚¯ã® <code>SetFuncXXX</code> åŠã³ <code>SetReturnXXX</code> ã¯ãƒ¢ãƒƒã‚¯è‡ªèº«ã‚’è¿”ã™ã®ã§ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mock </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> examples</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewOSMock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">SetReturnMkdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">SetFuncGetwd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®Ÿè£…ãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã§ãƒ¢ãƒƒã‚¯ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã¨
ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ç¬¬äºŒå¼•æ•°ã§æ¸¡ã—ãŸé–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</p><p>ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ç¬¬äºŒå¼•æ•°ãŒnilã ã¨ <a href="https://godoc.org/github.com/suzuki-shunsuke/gomic/gomic#DefaultCallbackNotImplemented" target="_blank" rel="noopener noreferrer">gomic.DefaultCallbackNotImplemented</a> ãŒå‘¼ã³ã ã•ã‚Œã¾ã™ã€‚
gomic.DefaultCallbackNotImplemented ã¯ ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ç¬¬ä¸€å¼•æ•°ãŒ nil ã ã¨ <a href="https://golang.org/pkg/log/#Fatal" target="_blank" rel="noopener noreferrer">log.Fatal</a> ã‚’ã€ãã†ã§ãªã‘ã‚Œã° <a href="https://golang.org/pkg/testing/#T.Fatal" target="_blank" rel="noopener noreferrer">testing.T#Fatal</a> ã‚’å‘¼ã³å‡ºã—ã€ãã“ã§å‡¦ç†ã‚’åœæ­¢ã—ã¾ã™ã€‚</p><p>ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ç¬¬äºŒå¼•æ•°ã§æ¸¡ã—ãŸé–¢æ•°ã§ log.Fatal ã‚„ testing.Fatal ã«ã‚ˆã£ã¦å‡¦ç†ã‚’æ­¢ã‚ãªã‘ã‚Œã°ã€interfaceã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã—ã¦ã„ãªã„å ´åˆã€<a href="https://golang.org/ref/spec#The_zero_value" target="_blank" rel="noopener noreferrer">zero value</a> ã‚’è¿”ã™ fake ã«ãªã‚Šã¾ã™ã€‚</p><p>ä¸€ç•ªç°¡å˜ãªã®ã¯ <a href="https://godoc.org/github.com/suzuki-shunsuke/gomic/gomic#DoNothing" target="_blank" rel="noopener noreferrer">gomic.DoNothing</a> ã‚’æ¸¡ã™ã“ã¨ã§ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> mock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Getwd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gomic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DoNothing</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šã§èª¬æ˜ã—ãŸã“ã¨ã¯</p><p><a href="https://github.com/suzuki-shunsuke/gomic/blob/v0.5.0/examples/os_mock.go#L27-L67" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/gomic/blob/v0.5.0/examples/os_mock.go#L27-L67</a></p><p>ã‚’è¦‹ã¦ã‚‚ã‚‰ãˆã°ã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>oss</category>
            <category>golang</category>
            <category>gomic</category>
        </item>
        <item>
            <title><![CDATA[Dockerã‚’ä½¿ã£ã¦ansible playbookã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/test-ansible-on-docker</link>
            <guid>https://techblog.szksh.cloud/test-ansible-on-docker</guid>
            <pubDate>Fri, 12 Oct 2018 12:02:51 GMT</pubDate>
            <description><![CDATA[ansible playbookã‚’(VMã®ä»£ã‚ã‚Šã«)Dockerã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã—ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€åŠ¹ç‡ã‚ˆãå‹•ä½œç¢ºèªã§ãã‚‹ã¨ã„ã†ãŠè©±ã§ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>ansible playbookã‚’(VMã®ä»£ã‚ã‚Šã«)Dockerã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã—ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€åŠ¹ç‡ã‚ˆãå‹•ä½œç¢ºèªã§ãã‚‹ã¨ã„ã†ãŠè©±ã§ã™ã€‚
ansible playbookã®å‹•ä½œç¢ºèªã®ãŸã‚ã«vagrantã§VMã‚’èµ·å‹•ã—ãŸã‚Šã—ã¦ã„ã‚‹ã¨å‹•ä½œç¢ºèªã«æ™‚é–“ãŒã‹ã‹ã‚‹ã—ã€å®¹é‡ã‚‚å–°ã„ã¾ã™ã€‚
Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ã£ã¦å‹•ä½œç¢ºèªã§ãã‚Œã°ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ±ºã§ãã¾ã™ã€‚</p><p>ãŸã ã—ã€Dockerã‚³ãƒ³ãƒ†ãƒŠã®å ´åˆã€ä¸€éƒ¨ã®ansible ã®taskãŒå¤±æ•—ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§
ansible playbookã«ã‚ˆã£ã¦ã¯Dockerã‚³ãƒ³ãƒ†ãƒŠã§ã¯ãƒ†ã‚¹ãƒˆã«ãªã‚‰ãªã„å ´åˆã‚‚ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚µãƒ³ãƒ—ãƒ«">ã‚µãƒ³ãƒ—ãƒ«<a href="#ã‚µãƒ³ãƒ—ãƒ«" class="hash-link" aria-label="Direct link to ã‚µãƒ³ãƒ—ãƒ«" title="Direct link to ã‚µãƒ³ãƒ—ãƒ«">â€‹</a></h2><p><a href="https://github.com/suzuki-shunsuke/example/tree/master/ansible/test-on-docker" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/example/tree/master/ansible/test-on-docker</a></p><p>ç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚</p><p>ansible playbookã«åŠ ãˆã€</p><ul><li>docker-compose.yml</li><li>test_docker.sh: ç°¡å˜ãªã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</li></ul><p>ã‚’ä½œæˆã—ã¦ã‚ã‚Šã¾ã™ã€‚</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bash test_docker.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã¨ã™ã‚‹ã“ã¨ã§å‹•ä½œç¢ºèªã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èª¬æ˜">èª¬æ˜<a href="#èª¬æ˜" class="hash-link" aria-label="Direct link to èª¬æ˜" title="Direct link to èª¬æ˜">â€‹</a></h2><p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯</p><ol><li>Docker Compose ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•</li><li>ã‚³ãƒ³ãƒ†ãƒŠã®IDã‚’å–å¾—ã—ã€inventory ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ</li><li>Docker Connection Pluginã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã«playbookã‚’å®Ÿè¡Œ</li></ol><p>ã§ã™ã€‚</p><p>Docker Connection Plugin ã‚’ä½¿ã†ã¨Dockerã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã—ã¦ansible playbookã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚</p><ul><li><a href="https://docs.ansible.com/ansible/2.6/plugins/connection.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/2.6/plugins/connection.html</a></li><li><a href="https://docs.ansible.com/ansible/2.6/plugins/connection/docker.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/2.6/plugins/connection/docker.html</a></li></ul><p>ã¾ãŸã€Docker Hubã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹å¤šãã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®USERã¯ root ã§ã™ãŒã€
ansible playbookã®å‹•ä½œç¢ºèªã¨ã—ã¦ã¯éƒ½åˆãŒæ‚ªã‹ã£ãŸã‚Šã—ã¾ã™ã€‚</p><p>ãã“ã§è‡ªåˆ†ã¯érootãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ãŸDocker Imageã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚</p><p><a href="https://hub.docker.com/r/suzukishunsuke/ansible-test-centos/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/suzukishunsuke/ansible-test-centos/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é–¢ä¿‚ã‚ã‚Šãã†ãªãƒ„ãƒ¼ãƒ«">é–¢ä¿‚ã‚ã‚Šãã†ãªãƒ„ãƒ¼ãƒ«<a href="#é–¢ä¿‚ã‚ã‚Šãã†ãªãƒ„ãƒ¼ãƒ«" class="hash-link" aria-label="Direct link to é–¢ä¿‚ã‚ã‚Šãã†ãªãƒ„ãƒ¼ãƒ«" title="Direct link to é–¢ä¿‚ã‚ã‚Šãã†ãªãƒ„ãƒ¼ãƒ«">â€‹</a></h2><p>ä»Šå›ã¯ç°¡å˜ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨docker-compose.ymlã‚’ç”¨æ„ã—ã¾ã—ãŸãŒã€
ã‚‚ã£ã¨ã‚¤ã‚±ã¦ã‚‹ã‚„ã‚Šæ–¹ãŒã‚ã‚Šãã†ãªã‚‚ã®ã§ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vagrant-docker-provider">Vagrant Docker Provider<a href="#vagrant-docker-provider" class="hash-link" aria-label="Direct link to Vagrant Docker Provider" title="Direct link to Vagrant Docker Provider">â€‹</a></h3><p><a href="https://www.vagrantup.com/docs/docker/" target="_blank" rel="noopener noreferrer">https://www.vagrantup.com/docs/docker/</a></p><p>ãªã‚“ã‹ã‚ã¾ã‚Šä½¿ãˆãªã•ãã†ã§ã™ã€‚
Linuxä»¥å¤–ã ã¨çµå±€VMãŒå¿…è¦ã§ã€æ—¢ã«éæ¨å¥¨ãª boot2docker ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ä½¿ã†ã‚‰ã—ãã ã‚ãã†ã ãªã£ã¦æ€ã„ã¾ã—ãŸã€‚
ã‚ã¾ã‚Šèª¿ã¹ã¦ã¾ã›ã‚“ã€‚</p><p><a href="https://www.vagrantup.com/docs/docker/basics.html#host-vm" target="_blank" rel="noopener noreferrer">https://www.vagrantup.com/docs/docker/basics.html#host-vm</a></p><blockquote><p>By default, the host VM Vagrant spins up is backed by boot2docker, because it launches quickly and uses little resources. </p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ansible-container">Ansible Container<a href="#ansible-container" class="hash-link" aria-label="Direct link to Ansible Container" title="Direct link to Ansible Container">â€‹</a></h3><p><a href="https://docs.ansible.com/ansible-container/" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible-container/</a></p><p>ã‚ˆãçŸ¥ã‚Šã¾ã›ã‚“ã€‚å‹•ä½œç¢ºèªã—ãŸã„ã ã‘ã ã¨ã‚ªãƒ¼ãƒãƒ¼ã‚¹ãƒšãƒƒã‚¯ãªå°è±¡ã¯å—ã‘ã¾ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="packer">Packer<a href="#packer" class="hash-link" aria-label="Direct link to Packer" title="Direct link to Packer">â€‹</a></h3><ul><li><a href="https://www.packer.io/docs/builders/docker.html" target="_blank" rel="noopener noreferrer">https://www.packer.io/docs/builders/docker.html</a></li><li><a href="https://www.packer.io/docs/provisioners/ansible.html" target="_blank" rel="noopener noreferrer">https://www.packer.io/docs/provisioners/ansible.html</a></li></ul><p>è¨˜äº‹ã‚’æ›¸ãçµ‚ã‚ã£ã¦ã‹ã‚‰ãã†ã„ãˆã° Packer ãŒã‚ã£ãŸãªã¨æ€ã„å‡ºã—ã¾ã—ãŸã€‚</p>]]></content:encoded>
            <category>ansible</category>
        </item>
        <item>
            <title><![CDATA[Project site ã‚’ User site ã«ç§»è¡Œã—ã¾ã—ãŸ (GitHub Pages)]]></title>
            <link>https://techblog.szksh.cloud/migrate-to-user-gh-pages</link>
            <guid>https://techblog.szksh.cloud/migrate-to-user-gh-pages</guid>
            <pubDate>Wed, 10 Oct 2018 12:14:03 GMT</pubDate>
            <description><![CDATA[ãªã‚“ã¨ãªãè©¦é¨“çš„ã« Project site ã§ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ãŸ GitHub Pages ã‚’ User site ã«ç§»è¡Œã—ã¾ã—ãŸã€‚]]></description>
            <content:encoded><![CDATA[<p>ãªã‚“ã¨ãªãè©¦é¨“çš„ã« Project site ã§ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ãŸ GitHub Pages ã‚’ User site ã«ç§»è¡Œã—ã¾ã—ãŸã€‚</p><p>source code ã¯ <a href="https://github.com/suzuki-shunsuke/suzuki-shunsuke.github.io/tree/source" target="_blank" rel="noopener noreferrer">source branch</a> ã«ã‚ã‚Šã¾ã™ã€‚</p><p>CIã«é–¢ã—ã¦ã¯ <a href="https://suzuki-shunsuke.github.io/how-to-host-hugo-at-github-pages/" target="_blank" rel="noopener noreferrer">Hugoè£½ãƒ–ãƒ­ã‚°ã‚’GitHub Pagesã¸CIã§ãƒ‡ãƒ—ãƒ­ã‚¤</a> ã«ã‚‚æ›¸ãã¾ã—ãŸãŒå‚è€ƒã«ãªã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>]]></content:encoded>
            <category>hugo</category>
        </item>
        <item>
            <title><![CDATA[Hugoè£½ãƒ–ãƒ­ã‚°ã‚’GitHub Pagesã¸CIã§ãƒ‡ãƒ—ãƒ­ã‚¤]]></title>
            <link>https://techblog.szksh.cloud/how-to-host-hugo-at-github-pages</link>
            <guid>https://techblog.szksh.cloud/how-to-host-hugo-at-github-pages</guid>
            <pubDate>Sun, 30 Sep 2018 23:04:16 GMT</pubDate>
            <description><![CDATA[https//pages.github.com/ ã®è©±ã§ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p><a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">https://gohugo.io/</a> ã¨ <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">https://pages.github.com/</a> ã®è©±ã§ã™ã€‚
master ã« push ã—ãŸã‚‰ GitHub Pages ã« circle ciã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ã®ç´¹ä»‹ã§ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰æ">å‰æ<a href="#å‰æ" class="hash-link" aria-label="Direct link to å‰æ" title="Direct link to å‰æ">â€‹</a></h2><ul><li>ãƒ†ãƒ¼ãƒã¯ master branch ã«å«ã‚ãªã„(CIã§cloneã™ã‚‹)</li><li>buildã—ãŸã‚‚ã®ã¯ gh-pages ãƒ–ãƒ©ãƒ³ãƒã«ãƒ‡ãƒ—ãƒ­ã‚¤</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚³ãƒ¼ãƒ‰">ã‚³ãƒ¼ãƒ‰<a href="#ã‚³ãƒ¼ãƒ‰" class="hash-link" aria-label="Direct link to ã‚³ãƒ¼ãƒ‰" title="Direct link to ã‚³ãƒ¼ãƒ‰">â€‹</a></h2><p>.circleci/config.yml</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">docker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> suzukishunsuke/hugo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0.1.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> checkout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> git config user.name "</span><span class="token important">***"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> git config user.email "</span><span class="token important">***@example.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># --depth 1 ã§é«˜é€ŸåŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> git clone </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">depth 1 https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/suzuki</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">shunsuke/tale</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hugo themes/tale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hugo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sh release.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">workflows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">only</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>release.sh</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git checkout gh-pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv .git .circleci public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç”Ÿæˆç‰©ã«å·®åˆ†ãŒã‚ã£ãŸã¨ãã®ã¿ãƒ‡ãƒ—ãƒ­ã‚¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git status --porcelain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -n "`git status --porcelain`" ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git commit -m "update"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git push origin gh-pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>hugo ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ Docker Image ã‚’ç”¨æ„ã—ã¦ãŠãã¾ã™ã€‚</p><p><a href="https://hub.docker.com/r/suzukishunsuke/hugo-ci/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/suzukishunsuke/hugo-ci/</a></p><p>ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‚ã®ã‚’ gh-pages ãƒ–ãƒ©ãƒ³ãƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³•ã‚’å·¥å¤«ã—ã¦ã„ã¦ã€
<code>.git</code> ã‚’ <code>public</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ã„ã¾ã™ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git checkout gh-pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv .git .circleci public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd public</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚ã¨ã€ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸã‚‚ã®ã«å·®åˆ†ãŒã‚ã£ãŸã¨ãã®ã¿ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if [ -n "`git status --porcelain`" ]; then</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>hugo</category>
        </item>
        <item>
            <title><![CDATA[travis ci ã‹ã‚‰ circle ci ã¸ã®ç§»è¡Œã®ã™ã™ã‚]]></title>
            <link>https://techblog.szksh.cloud/migrate-from-travis-ci-to-circle-ci</link>
            <guid>https://techblog.szksh.cloud/migrate-from-travis-ci-to-circle-ci</guid>
            <pubDate>Sun, 30 Sep 2018 22:23:15 GMT</pubDate>
            <description><![CDATA[travis ci ã¨ circle ci ã®ç„¡å„ŸSaaS ç‰ˆã‚’æ¯”è¼ƒã—ã¦ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>travis ci ã¨ circle ci ã®ç„¡å„ŸSaaS ç‰ˆã‚’æ¯”è¼ƒã—ã¦ã„ã¾ã™ã€‚</p><p>OSS ã® CI ã§ã¯ travis ci ãŒã‚ˆãä½¿ã‚ã‚Œã‚‹å°è±¡ãŒã‚ã‚Šã¾ã™ãŒã€
å ´åˆã«ã‚ˆã£ã¦ã¯ circle CI ã«ç§»è¡Œã™ã‚‹ã¨CIã®æ™‚é–“ãŒå¤§å¹…ã«çŸ­ããªã£ãŸã‚Šã—ã¦è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚
ãŸã ã—ã€è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ä¸¦åˆ—ã«ãƒ†ã‚¹ãƒˆã—ãŸã„å ´åˆã€circle ci ã®ç„¡å„Ÿplanã ã¨ä¸¦åˆ—ã«å®Ÿè¡Œã§ããªã„ãŸã‚ã€
travis ã§ã‚„ã£ãŸã»ã†ãŒé€Ÿã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="circle-ci-ã®è‰¯ã„ã¨ã“ã‚">Circle CI ã®è‰¯ã„ã¨ã“ã‚<a href="#circle-ci-ã®è‰¯ã„ã¨ã“ã‚" class="hash-link" aria-label="Direct link to Circle CI ã®è‰¯ã„ã¨ã“ã‚" title="Direct link to Circle CI ã®è‰¯ã„ã¨ã“ã‚">â€‹</a></h2><ul><li>å¥½ããª Docker Image ãŒä½¿ãˆã‚‹</li><li>ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆãŒå‡ºæ¥ã‚‹</li><li>Pending æ™‚é–“ãŒ travis ci ã«æ¯”ã¹ã¦çŸ­ã„æ°—ãŒã™ã‚‹(ä¸»è¦³)</li><li>private repository ã® CI ã‚‚å‡ºæ¥ã‚‹</li></ul><p>å¥½ããª Docker Image ãŒä½¿ãˆã‚‹ã®ãŒå¤§ãã„ã§ã™ã­ã€‚
äºˆã‚ CI ã«å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ Image ã‚’ç”¨æ„ã—ã¦ãŠãã“ã¨ã§å¤§å¹…ã«é«˜é€ŸåŒ–å‡ºæ¥ã¾ã™ã—ã€
ãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããªã‹ã£ãŸã‚Šãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ã¦ã—ã¾ã£ãŸã‚Šã™ã‚‹ãƒˆãƒ©ãƒ–ãƒ«ã‚‚é¿ã‘ã‚‰ã‚Œã¾ã™ã€‚
åŒã˜Imageã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆã§ãã‚‹ã®ã§ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®æ¤œè¨¼ã‚‚ã—ã‚„ã™ã„ã§ã™ã€‚</p><p>è‡ªåˆ†ã®å ´åˆ Golang ã®ãƒ„ãƒ¼ãƒ«ã® CIç”¨ã« Docker Image ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://hub.docker.com/r/suzukishunsuke/go-ci/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/suzukishunsuke/go-ci/</a></p>]]></content:encoded>
            <category>circleci</category>
            <category>travisci</category>
        </item>
        <item>
            <title><![CDATA[metabase ã‚’ä½¿ã£ã¦ drone ã®åˆ©ç”¨çŠ¶æ³ã‚’å¯è¦–åŒ–ã™ã‚‹]]></title>
            <link>https://techblog.szksh.cloud/visualize-drone-usage-by-metabase</link>
            <guid>https://techblog.szksh.cloud/visualize-drone-usage-by-metabase</guid>
            <pubDate>Sun, 30 Sep 2018 13:55:57 GMT</pubDate>
            <description><![CDATA[drone OSS 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>drone OSS 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://drone.io/" target="_blank" rel="noopener noreferrer">https://drone.io/</a> ã¨ <a href="https://www.metabase.com/" target="_blank" rel="noopener noreferrer">https://www.metabase.com/</a> ã®è©±ã§ã™ã€‚</p><p>drone ã®åˆ©ç”¨çŠ¶æ³ã‚’å¯è¦–åŒ–ã—ãŸã‹ã£ãŸã®ã§ã€
drone ã® DB(MySQL) ã®ãƒ‡ãƒ¼ã‚¿ã‚’ metabase ã§å¯è¦–åŒ–ã—ã¾ã—ãŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã©ã‚“ãªã‚°ãƒ©ãƒ•ã‚’ä½œã£ãŸã®ã‹">ã©ã‚“ãªã‚°ãƒ©ãƒ•ã‚’ä½œã£ãŸã®ã‹<a href="#ã©ã‚“ãªã‚°ãƒ©ãƒ•ã‚’ä½œã£ãŸã®ã‹" class="hash-link" aria-label="Direct link to ã©ã‚“ãªã‚°ãƒ©ãƒ•ã‚’ä½œã£ãŸã®ã‹" title="Direct link to ã©ã‚“ãªã‚°ãƒ©ãƒ•ã‚’ä½œã£ãŸã®ã‹">â€‹</a></h2><p>ã„ã–ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã™ã‚‹ã¨ãªã‚‹ã¨ã€ä½•ã‚’ä½œã£ãŸã‚‰ã„ã„ã®ã‹è¿·ã„ã¾ã—ãŸãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã‚’ã¨ã‚Šã‚ãˆãšä½œã£ã¦ã¿ã¾ã—ãŸã€‚</p><ul><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</li><li>æœ‰åŠ¹åŒ–ã•ã‚ŒãŸãƒªãƒã‚¸ãƒˆãƒªæ•°</li><li>buildã®å¤šã„ãƒªãƒã‚¸ãƒˆãƒª</li><li>buildã‚’ã‚ˆãå®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼</li><li>ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®åˆ†å¸ƒ</li><li>build event ã®å‰²åˆ(push, tag, pull request, deployment)</li><li>ãƒªãƒã‚¸ãƒˆãƒªã®secretsã®æ•°ã®åˆ†å¸ƒ</li></ul>]]></content:encoded>
            <category>drone</category>
            <category>metabase</category>
        </item>
        <item>
            <title><![CDATA[drone ã®ç®¡ç†ã®ãŸã‚ã« portainer ã‚’å°å…¥ã—ãŸ]]></title>
            <link>https://techblog.szksh.cloud/use-portainer-for-drone-admin</link>
            <guid>https://techblog.szksh.cloud/use-portainer-for-drone-admin</guid>
            <pubDate>Sun, 30 Sep 2018 12:56:42 GMT</pubDate>
            <description><![CDATA[drone OSS 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>drone OSS 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://drone.io/" target="_blank" rel="noopener noreferrer">https://drone.io/</a> ã¨ <a href="https://portainer.io/" target="_blank" rel="noopener noreferrer">https://portainer.io/</a> ã®è©±ã§ã™ã€‚</p><p>drone ã¯ã‹ãªã‚Šå®‰å®šã—ãŸã‚·ã‚¹ãƒ†ãƒ ã ã¨æ€ã„ã¾ã™ãŒã€
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¥½ããªã‚¤ãƒ¡ãƒ¼ã‚¸ã§å¥½ããªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹ä»¥ä¸Šã€ãƒˆãƒ©ãƒ–ãƒ«ãŒèµ·ã“ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã€‚</p><p>ãã®çµæœã€ ç‰¹å®šã® build ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«ãªã‚‰ãšã«å»¶ã€…ã¨å®Ÿè¡Œã•ã‚Œç¶šã‘ã‚‹ãªã‚“ã¦ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ãã®å ´åˆã€</p><ol><li>ã©ã®ãƒãƒ¼ãƒ‰ã®ã©ã®ã‚³ãƒ³ãƒ†ãƒŠã§ãƒˆãƒ©ãƒ–ãƒ«ãŒèµ·ãã¦ã„ã‚‹ã®ã‹</li><li>ãã®ã‚³ãƒ³ãƒ†ãƒŠã§ä½•ãŒèµ·ã“ã£ã¦ã„ã‚‹ã®ã‹</li></ol><p>ã¨ã„ã†ã®ã‚’çŸ¥ã‚ŠãŸã„ã®ã§ã™ãŒã€ drone ã«ã¯ãã†ã„ã£ãŸç®¡ç†æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ãã“ã§ è¤‡æ•°ã®ã‚µãƒ¼ãƒã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ Docker ã‚³ãƒ³ãƒ†ãƒŠã‚’ç®¡ç†ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã¯ãªã„ã‹ã¨æ¢ã—ãŸã¨ã“ã‚ã€
<a href="https://portainer.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">portainer</a> ãŒè‰¯ã•ãã†ã ã£ãŸã®ã§å°å…¥ã—ã¾ã—ãŸã€‚</p><p>portainer ã‚’ä½¿ã†ã¨è¤‡æ•°ã®ã‚µãƒ¼ãƒã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ä¸€è¦§ã§è¦‹ã‚‹ã“ã¨ãŒå‡ºæ¥ã€
ã‚³ãƒ³ãƒ†ãƒŠã‚’æ“ä½œ(å‰Šé™¤ã€åœæ­¢ã€å†èµ·å‹•etc)å‡ºæ¥ã¾ã™ã€‚
ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚„ç°¡å˜ãªãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚¹(CPU, memory, network usage) ãŒè¦‹ã‚Œã¾ã™ã€‚
ã‚³ãƒ³ãƒ†ãƒŠã ã‘ã§ãªãã€network ã‚„ volume, image ã¨ã„ã£ãŸãƒªã‚½ãƒ¼ã‚¹ã‚‚ç®¡ç†ã§ãã¾ã™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="portainer-ã®å°å…¥">portainer ã®å°å…¥<a href="#portainer-ã®å°å…¥" class="hash-link" aria-label="Direct link to portainer ã®å°å…¥" title="Direct link to portainer ã®å°å…¥">â€‹</a></h2><p>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã„ã¦ã‚ã‚Šã¾ã™ãŒã€ swarm cluster ã‚’æ§‹ç¯‰ã—ã¦ãã“ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚Œã°ã‚ˆã„ã§ã™ã€‚</p><ul><li><a href="https://docs.docker.com/engine/swarm/swarm-tutorial/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/swarm/swarm-tutorial/</a></li><li><a href="https://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster" target="_blank" rel="noopener noreferrer">https://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å›°ã£ã¦ã„ã‚‹ã“ã¨">å›°ã£ã¦ã„ã‚‹ã“ã¨<a href="#å›°ã£ã¦ã„ã‚‹ã“ã¨" class="hash-link" aria-label="Direct link to å›°ã£ã¦ã„ã‚‹ã“ã¨" title="Direct link to å›°ã£ã¦ã„ã‚‹ã“ã¨">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ¯å›æ¤œç´¢ã§çµã‚Šè¾¼ã¿ã—ãªã„ã¨ã„ã‘ãªã„">æ¯å›æ¤œç´¢ã§çµã‚Šè¾¼ã¿ã—ãªã„ã¨ã„ã‘ãªã„<a href="#æ¯å›æ¤œç´¢ã§çµã‚Šè¾¼ã¿ã—ãªã„ã¨ã„ã‘ãªã„" class="hash-link" aria-label="Direct link to æ¯å›æ¤œç´¢ã§çµã‚Šè¾¼ã¿ã—ãªã„ã¨ã„ã‘ãªã„" title="Direct link to æ¯å›æ¤œç´¢ã§çµã‚Šè¾¼ã¿ã—ãªã„ã¨ã„ã‘ãªã„">â€‹</a></h3><p>æ¤œç´¢ã§çµã‚Šè¾¼ã‚“ã å¾Œã«ç‰¹å®šã®ã‚³ãƒ³ãƒ†ãƒŠã®è©³ç´°ç”»é¢é£›ã‚“ã å¾Œä¸€è¦§ã«æˆ»ã‚‹ã¨
æ¤œç´¢ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¦ã„ã‚‹ã®ã§ã‚‚ã†ä¸€åº¦æ¤œç´¢ã—ãªã„ã¨ã„ã‘ãªã„ã®ãŒé¢å€’ã§ã™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚‚ã†å°‘ã—é«˜åº¦ãªæ¤œç´¢ãŒã—ãŸã„">ã‚‚ã†å°‘ã—é«˜åº¦ãªæ¤œç´¢ãŒã—ãŸã„<a href="#ã‚‚ã†å°‘ã—é«˜åº¦ãªæ¤œç´¢ãŒã—ãŸã„" class="hash-link" aria-label="Direct link to ã‚‚ã†å°‘ã—é«˜åº¦ãªæ¤œç´¢ãŒã—ãŸã„" title="Direct link to ã‚‚ã†å°‘ã—é«˜åº¦ãªæ¤œç´¢ãŒã—ãŸã„">â€‹</a></h3><p>è‡ªç”±å…¥åŠ›ã®æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ãŒ1ã¤ã‚ã‚‹ã ã‘ã§ã€ç‰¹ã«ã‚¯ã‚¨ãƒªãŒæ›¸ã‘ã‚‹ã‚ã‘ã§ã‚‚ãªã•ãã†ãªã®ã§ã€
ã‚‚ã†å°‘ã—é«˜åº¦ãªæ¤œç´¢ãŒã—ãŸã„ã§ã™ã€‚
ä¾‹ãˆã° Created At ã§ 1æ™‚é–“ä»¥ä¸Šå‰ã«ç‰¹å®šã®ãƒãƒ¼ãƒ‰ã§ä½œã‚‰ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒŠã®ä¸€è¦§ã¨ã‹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-api-ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’æ“ä½œã§ããªã„">docker API ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’æ“ä½œã§ããªã„<a href="#docker-api-ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’æ“ä½œã§ããªã„" class="hash-link" aria-label="Direct link to docker API ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’æ“ä½œã§ããªã„" title="Direct link to docker API ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’æ“ä½œã§ããªã„">â€‹</a></h3><p>ã“ã‚Œã¯å¤šåˆ†ä¸å…·åˆã¨ã‹ã§ã¯ãªãè‡ªåˆ†ã®è¨­å®šãŒè‰¯ããªã„ã®ã ã¨æ€ã„ã¾ã™ã€‚
ã“ã®è¾ºã® issue ãŒé–¢ä¿‚ã—ã¦ãã†ã§ã™ãŒã€ã¾ã è§£æ¶ˆã§ãã¦ã„ã¾ã›ã‚“ã€‚</p><ul><li><a href="https://github.com/portainer/portainer/issues/831" target="_blank" rel="noopener noreferrer">https://github.com/portainer/portainer/issues/831</a></li><li><a href="https://github.com/portainer/portainer/issues/1897" target="_blank" rel="noopener noreferrer">https://github.com/portainer/portainer/issues/1897</a></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cron error: endpoint snapshot error (endpoint=primary, URL=tcp://tasks.agent:9001) (err=Cannot connect to the Docker daemon at tcp://tasks.agent:9001. Is the docker daemon running?)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http error: Unable to execute cluster operation (err=Get https://192.160.0.16:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>drone</category>
            <category>portainer</category>
        </item>
        <item>
            <title><![CDATA[drone ã§érootãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œã•ã‚Œã‚‹Imageã‚’ä½¿ãˆãªã„]]></title>
            <link>https://techblog.szksh.cloud/drone-cant-use-nonroot-image</link>
            <guid>https://techblog.szksh.cloud/drone-cant-use-nonroot-image</guid>
            <pubDate>Sun, 30 Sep 2018 12:42:16 GMT</pubDate>
            <description><![CDATA[drone ã§érootãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œã•ã‚Œã‚‹Docker Imageã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨buildã«å¤±æ•—ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>drone ã§érootãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œã•ã‚Œã‚‹Docker Imageã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨buildã«å¤±æ•—ã—ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/bin/sh: 3: cannot create /root/.netrc: Permission denied</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã“ã‚Œã«ã¤ã„ã¦ã¯ drone ã®é–‹ç™ºè€…ãŒå›ç­”ã—ã¦ã„ã¾ã™ã€‚</p><ul><li><a href="https://discourse.drone.io/t/solved-netrc-permission-denied/171/2" target="_blank" rel="noopener noreferrer">https://discourse.drone.io/t/solved-netrc-permission-denied/171/2</a></li><li><a href="https://discourse.drone.io/t/solved-netrc-permission-denied/171/4" target="_blank" rel="noopener noreferrer">https://discourse.drone.io/t/solved-netrc-permission-denied/171/4</a></li></ul><p>çµè«–ã‚’è¨€ã†ã¨ã€
ä»–ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã†ã‹ã€
rootã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚</p>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[drone ã® step ã‚’å®Ÿè¡Œã™ã‚‹ã‹å¦ã‹ã‚’ã‚¿ã‚°åã§åˆ¤å®šã™ã‚‹æ–¹æ³•]]></title>
            <link>https://techblog.szksh.cloud/drone-tag-conditional-step</link>
            <guid>https://techblog.szksh.cloud/drone-tag-conditional-step</guid>
            <pubDate>Sun, 30 Sep 2018 12:30:06 GMT</pubDate>
            <description><![CDATA[drone 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>drone 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚</p><p>tag åã«ã‚ˆã‚‹åˆ¤å®šæ–¹æ³•ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯æ›¸ã„ã¦ãªã„ã®ã§æ›¸ã„ã¦ãŠãã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">when:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ref: refs/tags/foo-*  # ã‚¿ã‚°åãŒ foo-* ãªã‚‰ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã‚°ãƒ­ãƒ– <code>*</code> ã«ã¯ <code>/</code> ã¯å«ã¾ã‚Œãªã„ã“ã¨ã«ã¯æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><p>ä¸Šè¨˜ã®ä¾‹ã ã¨ã€ tag <code>foo/bar/0.1.0</code> ã¯ãƒãƒƒãƒã—ã¾ã›ã‚“ã€‚
ã“ã‚Œã¯ Go ã® <a href="https://golang.org/pkg/path/filepath/#Match" target="_blank" rel="noopener noreferrer">filepath.Match</a> ã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚</p><ul><li><a href="https://github.com/cncd/pipeline/blob/f8c48fc9fb9fd113c6e7dd941d63bb9f86a623cb/pipeline/frontend/yaml/constraint.go#L70" target="_blank" rel="noopener noreferrer">https://github.com/cncd/pipeline/blob/f8c48fc9fb9fd113c6e7dd941d63bb9f86a623cb/pipeline/frontend/yaml/constraint.go#L70</a></li><li><a href="https://github.com/cncd/pipeline/blob/f8c48fc9fb9fd113c6e7dd941d63bb9f86a623cb/pipeline/frontend/yaml/constraint.go#L80" target="_blank" rel="noopener noreferrer">https://github.com/cncd/pipeline/blob/f8c48fc9fb9fd113c6e7dd941d63bb9f86a623cb/pipeline/frontend/yaml/constraint.go#L80</a></li></ul>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[drone ã® project visibility ã¨ã¯]]></title>
            <link>https://techblog.szksh.cloud/drone-project-visibility</link>
            <guid>https://techblog.szksh.cloud/drone-project-visibility</guid>
            <pubDate>Sun, 30 Sep 2018 11:32:20 GMT</pubDate>
            <description><![CDATA[æã‚‰ãå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«èª¬æ˜ãŒãªã„æ°—ãŒã™ã‚‹ã®ã§æ›¸ã„ã¦ãŠãã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>æã‚‰ãå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«èª¬æ˜ãŒãªã„æ°—ãŒã™ã‚‹ã®ã§æ›¸ã„ã¦ãŠãã¾ã™ã€‚
ã¨è¨€ã£ã¦ã‚‚ã€ä»¥ä¸‹ã®issueã«å…¨éƒ¨æ›¸ã„ã¦ã‚ã‚Šã¾ã™ãŒã€‚</p><p><a href="https://github.com/drone/drone/issues/2042" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone/issues/2042</a></p><p>droneã® web ui ã‹ã‚‰ãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã«è¨­å®šã§ãã¾ã™ã€‚
ãã®ãƒªãƒã‚¸ãƒˆãƒªãŒèª°ã«è¦‹ãˆã‚‹ã‹ã®è¨­å®šã§ã™ã€‚</p><ul><li>public: ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªãã¦ã‚‚èª°ã§ã‚‚è¦‹ã‚Œã‚‹(publicãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)</li><li>private: ãƒªãƒã‚¸ãƒˆãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹äººã—ã‹è¦‹ã‚Œãªã„(privateãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)</li><li>internal: ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚Œã°èª°ã§ã‚‚è¦‹ã‚Œã‚‹</li></ul>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[drone ã® matrix build ãŒ27å€‹ã—ã‹å®Ÿè¡Œã•ã‚Œãªã„]]></title>
            <link>https://techblog.szksh.cloud/drone-matrix-build-run-only-27</link>
            <guid>https://techblog.szksh.cloud/drone-matrix-build-run-only-27</guid>
            <pubDate>Sun, 30 Sep 2018 11:26:11 GMT</pubDate>
            <description><![CDATA[drone 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>drone 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ZOO</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">FOO</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">BAR</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šè¨˜ã®å ´åˆã€æœ¬æ¥ 4 <em> 8 </em> 2 = 64 å€‹å®Ÿè¡Œã•ã‚Œã‚‹ã¯ãšã®matrix builds ãŒ27å€‹ã—ã‹å®Ÿè¡Œã•ã‚Œãªã‹ã£ãŸã®ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ãŸã¨ã“ã‚ã€
27å€‹ã—ã‹å®Ÿè¡Œã•ã‚Œãªã„ã‚ˆã†ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/cncd/pipeline/blob/d4e09fd3021a16408bc3ebdd3500efd28f51e72c/pipeline/frontend/yaml/matrix/matrix.go#L11" target="_blank" rel="noopener noreferrer">https://github.com/cncd/pipeline/blob/d4e09fd3021a16408bc3ebdd3500efd28f51e72c/pipeline/frontend/yaml/matrix/matrix.go#L11</a></li><li><a href="https://github.com/cncd/pipeline/blob/d4e09fd3021a16408bc3ebdd3500efd28f51e72c/pipeline/frontend/yaml/matrix/matrix.go#L93" target="_blank" rel="noopener noreferrer">https://github.com/cncd/pipeline/blob/d4e09fd3021a16408bc3ebdd3500efd28f51e72c/pipeline/frontend/yaml/matrix/matrix.go#L93</a></li></ul><p>é–¢ä¿‚ã‚ã‚‹éƒ¨åˆ†ã ã‘æŠ½å‡ºã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">limitAxis </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">axisList </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Axis</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> perm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> p</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    axisList </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">axisList</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> axis</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> limitAxis </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆ¶é™ã‚’ã‹ã‘ã‚‹ã®ã¯ä»•æ–¹ãªã„ã§ã™ãŒã€
ã‚¨ãƒ©ãƒ¼ã‚‚ warning ã‚‚ãªãæ­£å¸¸çµ‚äº†ã—ã€ã§ã‚‚ã‚ˆãè¦‹ã‚‹ã¨ 27 å€‹ã—ã‹å®Ÿè¡Œã•ã‚Œã¦ã„ãªã„ã®ã§
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã¯æ··ä¹±ã—ã¾ã™ã­ã€‚
build ã®çµæœã®ç”»é¢ã®ä¸Šã®æ–¹ã« warning ãŒã‚ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[drone ã® build ã® timeout ãŒå¤‰æ›´ã§ããªã„]]></title>
            <link>https://techblog.szksh.cloud/drone-build-timeout</link>
            <guid>https://techblog.szksh.cloud/drone-build-timeout</guid>
            <pubDate>Sun, 30 Sep 2018 11:16:28 GMT</pubDate>
            <description><![CDATA[drone 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>drone 0.8.5 ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚</p><p>drone ã® build ã® ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã®è¨­å®šã¯ãƒªãƒã‚¸ãƒˆãƒªã® settings ã‹ã‚‰å¤‰æ›´ã§ããã†ã§ã™ãŒã€
å®Ÿã¯ drone ã® admin ã—ã‹å¤‰æ›´ã§ãã¾ã›ã‚“ã€‚</p><p>ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã¨ã€ã“ã® Timeout ã®è¨­å®šã‚’å¤‰æ›´ã—ãŸéš›ã«</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PATCH /api/repos/:owner/:name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé£›ã‚“ã§ã„ã‚‹ã®ã§ã€ãã“ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’è¿½ã„ã‹ã‘ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ã€‚</p><ul><li><a href="https://github.com/drone/drone/blob/29785b86f6534ded974120de0fcf7c21397a9d0d/router/router.go#L109" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone/blob/29785b86f6534ded974120de0fcf7c21397a9d0d/router/router.go#L109</a></li><li><a href="https://github.com/drone/drone/blob/29785b86f6534ded974120de0fcf7c21397a9d0d/server/repo.go#L117" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone/blob/29785b86f6534ded974120de0fcf7c21397a9d0d/server/repo.go#L117</a></li></ul>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[Drone ã® build å®Ÿè¡Œæ™‚ã®èªè¨¼æ–¹æ³•]]></title>
            <link>https://techblog.szksh.cloud/drone-git-authentication</link>
            <guid>https://techblog.szksh.cloud/drone-git-authentication</guid>
            <pubDate>Sun, 30 Sep 2018 10:44:27 GMT</pubDate>
            <description><![CDATA[drone ã® build ã«ãŠã‘ã‚‹ GitHub (GitHubå‰æã§æ›¸ãã¾ã™ãŒã€GitHubä»¥å¤–ã§ã‚‚åŒã˜ã ã¨æ€ã„ã¾ã™) ã®èªè¨¼ã®è©±(ã©ã†ã‚„ã£ã¦èªè¨¼ã—ã¦ã„ã‚‹ã‹)ã«ã¤ã„ã¦æ›¸ã„ã¦ãŠã“ã†ã¨æ€ã„ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>drone ã® build ã«ãŠã‘ã‚‹ GitHub (GitHubå‰æã§æ›¸ãã¾ã™ãŒã€GitHubä»¥å¤–ã§ã‚‚åŒã˜ã ã¨æ€ã„ã¾ã™) ã®èªè¨¼ã®è©±(ã©ã†ã‚„ã£ã¦èªè¨¼ã—ã¦ã„ã‚‹ã‹)ã«ã¤ã„ã¦æ›¸ã„ã¦ãŠã“ã†ã¨æ€ã„ã¾ã™ã€‚
drone ã® build ã¯ clone step ã§å¯¾è±¡ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ GitHub ã‹ã‚‰ clone ã—ã¦ãã¦ã„ã¾ã™ã€‚
ã“ã®éš›ã«ä½•ã‹ã—ã‚‰ã®æ–¹æ³•ã§èªè¨¼ã—ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚</p><p>çµè«–ã‚’è¨€ã†ã¨ã€</p><p>ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªAã®buildã§ã¯ã€
ãƒªãƒã‚¸ãƒˆãƒªAã® <strong>droneé€£æºã‚’æœ‰åŠ¹åŒ–ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼</strong> Bã® access token ã‚’ <strong>.netrc</strong> ã«æ›¸ãè¾¼ã‚“ã§èªè¨¼ã—ã¦ã„ã¾ã™ã€‚
ã‚ˆã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼Bã«cloneã™ã‚‹æ¨©é™ãŒã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã¯cloneã§ãã‚‹ã—ã€
ãƒ¦ãƒ¼ã‚¶ãƒ¼Bã«cloneã™ã‚‹æ¨©é™ãŒãªã„ãƒªãƒã‚¸ãƒˆãƒªã¯cloneã§ãã¾ã›ã‚“ã€‚
ã¤ã¾ã‚Šã€ <strong>èª°ãŒé€£æºã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã‹ãŒé‡è¦</strong> ã«ãªã‚Šã¾ã™(ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œè¿°ã—ã¾ã™)ã€‚
ãªãŠã€droneé€£æºã®æœ‰åŠ¹åŒ–ã¯ãã®ãƒªãƒã‚¸ãƒˆãƒªã®ownerä»¥ä¸Šã§ãªã„ã¨å‡ºæ¥ã¾ã›ã‚“ã€‚</p><p>droneä¸Šã§ãƒªãƒã‚¸ãƒˆãƒªã®é€£æºã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã¨ã€
ãƒªãƒã‚¸ãƒˆãƒªã®HookãŒä½œæˆã•ã‚Œã¾ã™ã€‚
ãƒªãƒã‚¸ãƒˆãƒªã® settings &gt; Hooks ã‹ã‚‰ç¢ºèªã§ãã¾ã™ã€‚
ã“ã® Hook ã® Payload URL ã‚’è¦‹ã‚‹ã¨ access_token ã‚¯ã‚¨ãƒªãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
JWTã®ã‚ˆã†ã§ã™ã­ã€‚ã“ã‚Œã¯ãƒªãƒã‚¸ãƒˆãƒªã®é€£æºã‚’æœ‰åŠ¹åŒ–ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®tokenã§ã™ã€‚</p><p>ã“ã®tokenãŒ GitHub ã‹ã‚‰ drone ã¸ã® webhook ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦é€ã‚‰ã‚Œã¦ãã‚‹ã®ã§ã€
drone å´ã§èªè¨¼ã—ã€èªè¨¼ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®GitHub  ã®access token ã‚’å–å¾—ã—ã€
build æ™‚ã«ã‚³ãƒ³ãƒ†ãƒŠã® /root/.netrc ã«æ›¸ãè¾¼ã‚€ã‚ˆã†ã§ã™ã€‚</p><p>.netrcã«æ›¸ãè¾¼ã¾ã‚Œã¦ã„ã‚‹ã®ã¯è©¦ã—ã«å€‹äººã® private repository ã§ .netrc ã‚’catã—ã¦ã¿ã‚Œã°ã‚ã‹ã‚Šã¾ã™ã€‚
ä»–äººã‚‚è¦‹ãˆã‚‹repositoryã§catã™ã‚‹ã¨æ‚ªç”¨ã•ã‚Œã‹ã­ãªã„ã®ã§æ°—ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pipeline:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netrc:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image: alpine:3.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- cat ~/.netrc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+ cat ~/.netrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">machine gihub.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">login **************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password x-oauth-basic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloneã‚¹ãƒ†ãƒƒãƒ—ä»¥å¤–ã§ã®-netrcã®æ´»ç”¨">cloneã‚¹ãƒ†ãƒƒãƒ—ä»¥å¤–ã§ã® .netrcã®æ´»ç”¨<a href="#cloneã‚¹ãƒ†ãƒƒãƒ—ä»¥å¤–ã§ã®-netrcã®æ´»ç”¨" class="hash-link" aria-label="Direct link to cloneã‚¹ãƒ†ãƒƒãƒ—ä»¥å¤–ã§ã® .netrcã®æ´»ç”¨" title="Direct link to cloneã‚¹ãƒ†ãƒƒãƒ—ä»¥å¤–ã§ã® .netrcã®æ´»ç”¨">â€‹</a></h2><p>.netrc ã®ãŠã‹ã’ã§é›£ã—ã„ã“ã¨è€ƒãˆãšã« clone å‡ºæ¥ã¦ã„ã‚‹ã‚ã‘ã§ã™ãŒã€ã“ã® .netrc ã¯å½“ç„¶ clone ã‚¹ãƒ†ãƒƒãƒ—ä»¥å¤–ã§ã‚‚ä½¿ãˆã¾ã™ã€‚
ä¾‹ãˆã° private repository ã® ansible role ã® install ã§ã™ã€‚</p><p>roles.yml</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">src</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/&lt;owner</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">/&lt;repo</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo.bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">scm</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>.drone.yml</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ansible</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">galaxy install </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">r roles.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èª°ãŒé€£æºã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã¹ãã‹">èª°ãŒé€£æºã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã¹ãã‹<a href="#èª°ãŒé€£æºã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã¹ãã‹" class="hash-link" aria-label="Direct link to èª°ãŒé€£æºã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã¹ãã‹" title="Direct link to èª°ãŒé€£æºã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã¹ãã‹">â€‹</a></h2><p>çµè«–ã‚’è¨€ã†ã¨ã€ãƒ™ã‚¹ãƒˆãªæ–¹æ³•ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚</p><p>é€£æºã‚’æœ‰åŠ¹åŒ–ã—ãŸäººãŒé€€è·ã—ã¦ã—ã¾ã£ãŸã‚Šã€organizationã‹ã‚‰æŠœã‘ã¦ã—ã¾ã£ãŸå ´åˆã€æ€¥ã«ãƒ“ãƒ«ãƒ‰ãŒå¤±æ•—ã™ã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚
ç†æƒ³ã‚’è¨€ãˆã°ç‰¹å®šã®å€‹äººã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§é€£æºã™ã‚‹ã®ã§ã¯ãªãã€é€£æºç”¨ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç”¨æ„ã™ã‚‹ã®ãŒè‰¯ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€
ãã‚Œã¯ãã‚Œã§é‹ç”¨ãŒé›£ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>drone API ãªã„ã— CLI ã§æœ‰åŠ¹åŒ–ã¯å‡ºæ¥ã‚‹ã®ã§ã€CIã§é€£æºã‚’è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã ã¨æ€ã„ã¾ã™ã€‚</p><ul><li><a href="https://0-8-0.docs.drone.io/cli-repository-add/" target="_blank" rel="noopener noreferrer">https://0-8-0.docs.drone.io/cli-repository-add/</a></li><li><a href="https://0-8-0.docs.drone.io/api-repo-create/" target="_blank" rel="noopener noreferrer">https://0-8-0.docs.drone.io/api-repo-create/</a></li></ul><p>è‡ªåˆ†ã®ã¨ã“ã‚ã§ã¯ã¾ã ãã“ã¾ã§ã‚„ã£ã¦ãªãã€å€‹äººã§æœ‰åŠ¹åŒ–ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€
è‡ªå‹•åŒ–ã—ãŸã‚‰ã¾ãŸè¨˜äº‹ã«ã§ã‚‚ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[Drone ã¨ Circle CI ã® workspace ã®æ‰±ã„ã®é•ã„ã«ã¤ã„ã¦]]></title>
            <link>https://techblog.szksh.cloud/drone-circle-volume-difference</link>
            <guid>https://techblog.szksh.cloud/drone-circle-volume-difference</guid>
            <pubDate>Sun, 30 Sep 2018 10:27:59 GMT</pubDate>
            <description><![CDATA[drone ã¯åŒã˜ pipeline ã® step é–“ã§åŒã˜ workspace ã‚’ docker ã® volume ã¨ã—ã¦ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã“ã¨ã§ workspace ã‚’å…±æœ‰ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>drone ã¯åŒã˜ pipeline ã® step é–“ã§åŒã˜ workspace ã‚’ docker ã® volume ã¨ã—ã¦ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã“ã¨ã§ workspace ã‚’å…±æœ‰ã—ã¾ã™ã€‚</p><p><a href="http://docs.drone.io/workspace/" target="_blank" rel="noopener noreferrer">http://docs.drone.io/workspace/</a></p><p>circle ci ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ job é–“ã§ workspace ã‚’å…±æœ‰ã—ã¾ã›ã‚“ã€‚
persist_to_workspace ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§å…±æœ‰ã™ã‚‹äº‹ãŒã§ãã¾ã™ã€‚</p><p><a href="https://circleci.com/docs/2.0/workflows/#using-workspaces-to-share-data-among-jobs" target="_blank" rel="noopener noreferrer">https://circleci.com/docs/2.0/workflows/#using-workspaces-to-share-data-among-jobs</a></p><p>circle ci ã®å ´åˆã¯ volume ã‚’å…±æœ‰ã™ã‚‹ã®ã§ã¯ãªãã€æŒ‡å®šã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ archive ã—ã€æ¬¡ã® job ã§å±•é–‹ã™ã‚‹ã“ã¨ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…±æœ‰ã™ã‚‹ã‚ˆã†ã§ã™ã€‚</p><p>ã“ã®é•ã„ã«ã¯ä¸€é•·ä¸€çŸ­ãŒã‚ã‚Šã¾ã™ã€‚</p><p>circle ci ã®å ´åˆã¯ archive, unarchive ã™ã‚‹åˆ†ã€volume å…±æœ‰ã«æ¯”ã¹ã¦æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚</p><p>ãã®ãŸã‚ã€ä¸‹æ‰‹ã« job ã‚’åˆ†ã‘ã‚‹ã‚ˆã‚Šä¸€ã¤ã® job ã§å‡¦ç†ã—ãŸã»ã†ãŒå‡¦ç†æ™‚é–“ãŒçŸ­ããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ãŒã€
build ã‚„ test ã¨ã„ã£ãŸå‡¦ç†ã¯å‡ºæ¥ã‚Œã°åˆ¥ã® job ã¨ã—ã¦å®Ÿè¡Œã—ãŸã„ã§ã—ã‚‡ã†ã—ã€ãã‚Œã§ã¯ workflow ãŒä½¿ãˆã¾ã›ã‚“ã€‚</p><p>ãŸã ã—ã€å…±æœ‰ã™ã‚‹ãƒ‘ã‚¹ã¯è‡ªç”±ã«é¸ã¹ã‚‹ã®ã§å¿…è¦æœ€å°é™ã«æŠ‘ãˆã‚‹ã“ã¨ã§æ™‚é–“ã‚’çŸ­ç¸®ã§ãã¾ã™ã€‚</p><p>ã¾ãŸã€circle ci ã®å ´åˆã¯ archive ã™ã‚‹ãƒ‘ã‚¹åŠã³å±•é–‹å…ˆã®ãƒ‘ã‚¹ã‚’è‡ªç”±ã«é¸ã¹ã‚‹ã®ã§è‡ªç”±åº¦ãŒé«˜ã„ã§ã™ã€‚
drone ã®å ´åˆã€ workspace ä»¥å¤–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…±æœ‰ã§ãã¾ã›ã‚“ã€‚</p><p>ã¾ãŸã€drone ã®å ´åˆ volume ã‚’å…±æœ‰ã™ã‚‹ã®ã§åŒã˜ pipeline ã® step ã¯åŒã˜ãƒãƒ¼ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹ã¨ã„ã†åˆ¶ç´„ãŒã‚ã‚Šã¾ã™ãŒã€
circle ci ã®å ´åˆã€åˆ¥ã®ãƒãƒ¼ãƒ‰ã§ã®å®Ÿè¡ŒãŒå¯èƒ½ã§ã™ã€‚
drone ã® group ã‚’ä½¿ã£ã¦ä¸¦åˆ—ã«å®Ÿè¡Œã™ã‚‹å ´åˆã€è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ã«åˆ†æ•£ã§ãã¾ã›ã‚“ãŒã€ circle ci ã®å ´åˆåˆ†æ•£ã§ãã‚‹ã®ã§ã‚ˆã‚Šã‚¹ã‚±ãƒ¼ãƒ«ã—ã‚„ã™ã„ã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="çµå±€ã©ã£ã¡ã®ã»ã†ãŒã„ã„ã®ã‹">çµå±€ã©ã£ã¡ã®ã»ã†ãŒã„ã„ã®ã‹<a href="#çµå±€ã©ã£ã¡ã®ã»ã†ãŒã„ã„ã®ã‹" class="hash-link" aria-label="Direct link to çµå±€ã©ã£ã¡ã®ã»ã†ãŒã„ã„ã®ã‹" title="Direct link to çµå±€ã©ã£ã¡ã®ã»ã†ãŒã„ã„ã®ã‹">â€‹</a></h2><p>ä¸€é•·ä¸€çŸ­ãŒã‚ã‚‹ã¨è¨€ã£ãŸã¨ãŠã‚Šã€ä¸€æ¦‚ã«ã©ã£ã¡ãŒè‰¯ã„ã¨ã¯è¨€ãˆã¾ã›ã‚“ãŒã€å€‹äººçš„ã«ã¯ drone ã®ã‚„ã‚Šæ–¹ã®ã»ã†ãŒç›´æ„Ÿçš„ã ã—ã€
ä½•ã‚ˆã‚Šé€Ÿã„ã®ã§å¥½ãã§ã™ã€‚åŒã˜ pipeline ã®å‡¦ç†ã‚’è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ã«åˆ†æ•£ã•ã›ãŸã„ã“ã¨ã£ã¦å€‹äººçš„ã«ã¯ã‚ã¾ã‚Šã‚ã‚Šã¾ã›ã‚“ã€‚</p>]]></content:encoded>
            <category>drone</category>
            <category>circleci</category>
        </item>
        <item>
            <title><![CDATA[drone exec ã‚’ä¸¦åˆ—å®Ÿè¡Œã—ãŸéš›ã®docker network name ã®è¡çªã«ã¤ã„ã¦]]></title>
            <link>https://techblog.szksh.cloud/drone-exec-network-name-collision</link>
            <guid>https://techblog.szksh.cloud/drone-exec-network-name-collision</guid>
            <pubDate>Sun, 30 Sep 2018 09:52:34 GMT</pubDate>
            <description><![CDATA[drone exec ã‚’ä¸¦åˆ—å®Ÿè¡Œã™ã‚‹ã¨ docker network name ãŒè¡çªã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>drone exec ã‚’ä¸¦åˆ—å®Ÿè¡Œã™ã‚‹ã¨ docker network name ãŒè¡çªã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ drone exec --local &amp; drone exec --local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1] 42934</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2018/06/06 01:58:12 Error response from daemon: network drone_default is ambiguous (4 matches found on name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2018/06/06 01:58:12 Error response from daemon: Conflict. The container name "/drone_step_0" is already in use by container "464a29b0726d6ff1a352d81df9c837330501085be550bb16abac3d338dfad887". You have to remove (or rename) that container to be able to reuse that name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1]  + exit 1     drone exec --local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>drone ã¯ pipeline å®Ÿè¡Œæ™‚ã« network ã‚’ä½œæˆã—ã€pipeline ãŒçµ‚äº†ã™ã‚‹ã¨ network ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p><ul><li><a href="https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/pipeline.go#L58" target="_blank" rel="noopener noreferrer">https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/pipeline.go#L58</a></li><li><a href="https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/pipeline.go#L62" target="_blank" rel="noopener noreferrer">https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/pipeline.go#L62</a></li><li><a href="https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/backend/docker/docker.go#L50" target="_blank" rel="noopener noreferrer">https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/backend/docker/docker.go#L50</a></li><li><a href="https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/backend/docker/docker.go#L179" target="_blank" rel="noopener noreferrer">https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/backend/docker/docker.go#L179</a></li></ul><p>å‰Šé™¤ã™ã‚‹ã®ã§ã€ä¸¦åˆ—ã§å®Ÿè¡Œã—ãªã„é™ã‚ŠåŸºæœ¬çš„ã«è¡çªã—ãŸã‚Šã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ãªãŠã€ docker ã®ä»•æ§˜ã§ã¯åŒã˜åå‰ã® network ã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã§ã™ã€‚</p><ul><li><a href="https://github.com/moby/moby/issues/20648" target="_blank" rel="noopener noreferrer">https://github.com/moby/moby/issues/20648</a></li><li><a href="https://github.com/moby/moby/issues/18864" target="_blank" rel="noopener noreferrer">https://github.com/moby/moby/issues/18864</a></li></ul><p><code>drone exec</code> ã¯ <code>{prefix}_default</code> ã¨ã„ã†ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä½œæˆã—ã¾ã™ã€‚</p><p><a href="https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/frontend/yaml/compiler/compiler.go#L85" target="_blank" rel="noopener noreferrer">https://github.com/cncd/pipeline/blob/b03959913369b4e2a6c49be514f52d076ef6b172/pipeline/frontend/yaml/compiler/compiler.go#L85</a></p><p><code>{prefix}</code> ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ <code>drone</code> ã§ã™ãŒã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§æŒ‡å®šã§ãã¾ã™ã€‚</p><p><a href="https://github.com/drone/drone-cli/blob/800d6949bd96847b4d5c400e261b18386ea2226f/drone/exec/exec.go#L62" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone-cli/blob/800d6949bd96847b4d5c400e261b18386ea2226f/drone/exec/exec.go#L62</a></p><p>ã“ã®prefixã‚’å¤‰ãˆã‚Œã°è¡çªã¯å›é¿ã§ãã¾ã™ã€‚
bash, zshãªã‚‰æ¬¡ã®ã‚ˆã†ã«ä¹±æ•°ã‚’æŒ‡å®šã™ã‚Œã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ drone exec --local --prefix drone_${RANDOM}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ãªãŠã€ <code>drone exec --help</code> ã®ä¸­ã« <code>--prefix</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã“ã‚Œã¯æ˜ç¤ºçš„ã«helpã‹ã‚‰æ¶ˆã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚</p><p><a href="https://github.com/drone/drone-cli/blob/eca37514c1c3a441dbb0618531b91e05f56067e8/drone/exec/exec.go#L65" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone-cli/blob/eca37514c1c3a441dbb0618531b91e05f56067e8/drone/exec/exec.go#L65</a></p><p>ãªãœæ¶ˆã—ã¦ã„ã‚‹ã‹ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚</p><p>ãªãŠã€ drone ã® build ã§ã¯ prefix ã« ãƒ—ãƒ­ã‚»ã‚¹IDã¨ä¹±æ•°ã‚’ä½¿ã†ã“ã¨ã§è¡çªã‚’é¿ã‘ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚</p><p><a href="https://github.com/drone/drone/blob/29785b86f6534ded974120de0fcf7c21397a9d0d/server/hook.go#L552" target="_blank" rel="noopener noreferrer">https://github.com/drone/drone/blob/29785b86f6534ded974120de0fcf7c21397a9d0d/server/hook.go#L552</a></p>]]></content:encoded>
            <category>drone</category>
        </item>
        <item>
            <title><![CDATA[go-gencfg - viperã®å€‹ã€…ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿]]></title>
            <link>https://techblog.szksh.cloud/go-gencfg</link>
            <guid>https://techblog.szksh.cloud/go-gencfg</guid>
            <pubDate>Thu, 06 Sep 2018 14:59:35 GMT</pubDate>
            <description><![CDATA[è‡ªä½œã®OSS go-gencfg ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚]]></description>
            <content:encoded><![CDATA[<p>è‡ªä½œã®OSS <a href="https://github.com/suzuki-shunsuke/go-gencfg" target="_blank" rel="noopener noreferrer">go-gencfg</a> ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
Golang ã§ <a href="https://github.com/spf13/viper" target="_blank" rel="noopener noreferrer">viper</a> ã¨ã„ã†æ±ç”¨çš„ãªè¨­å®šç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚Šã¾ã™ãŒã€
ç‰¹å®šã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã« viper ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ç”Ÿæˆã™ã‚‹CLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p>ä½¿ã„æ–¹ã‚„é–‹ç™ºã®èƒŒæ™¯ã‚’æ›¸ã“ã†ã‹ã¨æ€ã„ã¾ã—ãŸãŒã€ã ã„ãŸã„ README ã«æ›¸ã„ã¦ã‚ã‚‹ã®ã§
ãã¡ã‚‰ã‚’å¾¡è¦§ãã ã•ã„ã€‚</p><p><a href="https://github.com/suzuki-shunsuke/go-gencfg/blob/master/README.md" target="_blank" rel="noopener noreferrer">https://github.com/suzuki-shunsuke/go-gencfg/blob/master/README.md</a></p>]]></content:encoded>
            <category>oss</category>
            <category>golang</category>
        </item>
    </channel>
</rss>